<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>[BUUctf]crypto-LCG Revenge</title>
      <link href="/2022/10/13/ac0b312ad234-q1jun/"/>
      <url>/2022/10/13/ac0b312ad234-q1jun/</url>
      
        <content type="html"><![CDATA[<h2 id="0x01-é¢˜ç›®"><a href="#0x01-é¢˜ç›®" class="headerlink" title="0x01 é¢˜ç›®"></a>0x01 é¢˜ç›®</h2><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221013180119116.png" alt="image-20221013180119116"></p><p>é™„ä»¶ğŸ“ï¼šLCG-Revenge.zip</p><h2 id="0x02-è§£é¢˜"><a href="#0x02-è§£é¢˜" class="headerlink" title="0x02 è§£é¢˜"></a>0x02 è§£é¢˜</h2><p>é™„ä»¶ä¸­æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼š</p><ul><li>task.py <code>åŠ å¯†è„šæœ¬</code></li><li>output.txt <code>è¾“å‡ºæ•°æ®</code></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> Crypto.Util.number <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> secret <span class="keyword">import</span> FLAG</span><br><span class="line">p = getPrime(<span class="number">128</span>)</span><br><span class="line">step = <span class="built_in">len</span>(FLAG) // <span class="number">3</span></span><br><span class="line">xs = [bytes_to_long(FLAG[:step]), bytes_to_long(FLAG[step:<span class="number">2</span>*step]), bytes_to_long(FLAG[<span class="number">2</span>*step:])]</span><br><span class="line">a = getPrime(<span class="number">64</span>)</span><br><span class="line">b = getPrime(<span class="number">64</span>)</span><br><span class="line">c = getPrime(<span class="number">64</span>)</span><br><span class="line">a = <span class="number">18038175596386287827</span></span><br><span class="line">b = <span class="number">15503291946093443851</span></span><br><span class="line">c = <span class="number">17270168560153510007</span></span><br><span class="line">p = <span class="number">307956849617421078439840909609638388517</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    new_state = (a*xs[<span class="number">0</span>] + b*xs[<span class="number">1</span>] + c*xs[<span class="number">2</span>]) % p </span><br><span class="line">    xs = xs[<span class="number">1</span>:] + [new_state]</span><br><span class="line">    <span class="comment">#print(xs)</span></span><br><span class="line"><span class="built_in">print</span>(xs)</span><br><span class="line"><span class="built_in">print</span>(a, b, c, p)</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[255290883651191064919890629542861653873, 221128501895959214555166046983862519384, 108104020183858879999084358722168548984]</span><br><span class="line">18038175596386287827 15503291946093443851 17270168560153510007 307956849617421078439840909609638388517</span><br></pre></td></tr></table></figure><h3 id="0x0201-åˆ†æåŠ å¯†è„šæœ¬"><a href="#0x0201-åˆ†æåŠ å¯†è„šæœ¬" class="headerlink" title="0x0201 åˆ†æåŠ å¯†è„šæœ¬"></a>0x0201 åˆ†æåŠ å¯†è„šæœ¬</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> Crypto.Util.number <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> secret <span class="keyword">import</span> FLAG</span><br><span class="line">p = getPrime(<span class="number">128</span>)</span><br><span class="line">step = <span class="built_in">len</span>(FLAG) // <span class="number">3</span></span><br><span class="line">xs = [bytes_to_long(FLAG[:step]), bytes_to_long(FLAG[step:<span class="number">2</span>*step]), bytes_to_long(FLAG[<span class="number">2</span>*step:])]</span><br></pre></td></tr></table></figure><p>è¿™ä¸€æ­¥å°†flagåˆ†æˆä¸‰ç­‰ä»½ï¼Œç”±<code>bytes_to_long</code>è½¬æ¢ä½æ•°å­—ï¼Œç”¨äºåŠ å¯†è®¡ç®—ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = getPrime(<span class="number">64</span>)</span><br><span class="line">b = getPrime(<span class="number">64</span>)</span><br><span class="line">c = getPrime(<span class="number">64</span>)</span><br><span class="line">a = <span class="number">18038175596386287827</span></span><br><span class="line">b = <span class="number">15503291946093443851</span></span><br><span class="line">c = <span class="number">17270168560153510007</span></span><br><span class="line">p = <span class="number">307956849617421078439840909609638388517</span></span><br></pre></td></tr></table></figure><p>ç»™å‡º<code>aã€bã€cã€p</code>çš„æ•°å€¼</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    new_state = (a*xs[<span class="number">0</span>] + b*xs[<span class="number">1</span>] + c*xs[<span class="number">2</span>]) % p </span><br><span class="line">    xs = xs[<span class="number">1</span>:] + [new_state]</span><br></pre></td></tr></table></figure><p>è¿™ä¸€æ­¥å°±æ˜¯ç®€å•çš„LCGåŠ å¯†æ­¥éª¤äº†ï¼Œå°†ä¸‰ç­‰ä»½çš„flagåˆ†æ­¥ç”¨abcç›¸ä¹˜ï¼Œç„¶åç›¸åŠ å–æ¨¡ã€‚</p><p><code>xs = xs[1:] + [new_state]</code>è¿™ä¸€æ­¥ç›¸å½“äºä¸€ä¸ªé˜Ÿåˆ—ï¼Œå°†flagçš„ç¬¬ä¸€éƒ¨åˆ†ä¸¢æ‰ï¼Œåœ¨é˜Ÿå°¾æ’å…¥æ–°çš„<code>new_state</code>ã€‚</p><h3 id="0x0202-è§£å¯†è„šæœ¬"><a href="#0x0202-è§£å¯†è„šæœ¬" class="headerlink" title="0x0202 è§£å¯†è„šæœ¬"></a>0x0202 è§£å¯†è„šæœ¬</h3><p>é€šè¿‡åˆ†æï¼Œå¯ä»¥çœ‹å‡ºæœ€åè¾“å‡ºçš„<code>xs</code>å°±æ˜¯åŠ å¯†å®Œä¹‹åçš„ä¸‰ä¸²æ•°å­—ï¼Œåªéœ€è¦ä¸€ä¸ªä¸€ä¸ªå¾€å‰æ¨ç®—ï¼Œå°±å¯ä»¥ç®—å‡ºä¸€å¼€å§‹çš„<code>xs</code>æ•°ç»„ã€‚</p><p>è®¾</p><p>$n$ &#x3D; <code>new_state</code>,</p><p>$a$ &#x3D; <code>a</code>,</p><p>$b$ &#x3D; <code>b</code>,</p><p>$c$ &#x3D; <code>c</code>,</p><p>$x_1$ &#x3D; <code>xs[0]</code>,</p><p>$x_2$ &#x3D; <code>xs[1]</code>,</p><p>$x_3$ &#x3D; <code>xs[2]</code>,</p><p>$p$ &#x3D; <code>p</code></p><p>ç”±åŸå¼ï¼š<br>$$<br>n &#x3D; (a\cdot x_1+b\cdot x_2+c\cdot x_3)mod\space p<br>$$<br>å¯å¾—:<br>$$<br>x_1 &#x3D; (a^{-1}(n-b\cdot x_2-c\cdot x_3))mode\space{p}<br>$$</p><blockquote><p>æ³¨ï¼š$a^{-1}$ä¸º$a$å…³äºæ¨¡$p$çš„æ¨¡é€†å…ƒã€‚</p></blockquote><p>ä»¥æ­¤ç±»æ¨å¯ä»¥æ¨å‡ºæœ€åˆå¼€å§‹è¿ç®—çš„ä¸‰ç­‰ä»½flagã€‚</p><p>æœ€ç»ˆè„šæœ¬å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> Crypto.Util.number <span class="keyword">import</span> *</span><br><span class="line">xs=[</span><br><span class="line">    <span class="comment"># 211953980103675814981551589541062177303,</span></span><br><span class="line">    <span class="number">255290883651191064919890629542861653873</span>,</span><br><span class="line">    <span class="number">221128501895959214555166046983862519384</span>,</span><br><span class="line">    <span class="number">108104020183858879999084358722168548984</span>,</span><br><span class="line">    ]</span><br><span class="line"><span class="comment">#new_state = (a*xs[0] + b*xs[1] + c*xs[2]) % p</span></span><br><span class="line"><span class="comment"># xs1 = 255290883651191064919890629542861653873</span></span><br><span class="line"><span class="comment"># xs2 = 221128501895959214555166046983862519384</span></span><br><span class="line"><span class="comment"># new_state = 108104020183858879999084358722168548984</span></span><br><span class="line">a = <span class="number">18038175596386287827</span></span><br><span class="line">b = <span class="number">15503291946093443851</span></span><br><span class="line">c = <span class="number">17270168560153510007</span></span><br><span class="line">p = <span class="number">307956849617421078439840909609638388517</span></span><br><span class="line">MMI = <span class="keyword">lambda</span> A, n,s=<span class="number">1</span>,t=<span class="number">0</span>,N=<span class="number">0</span>: (n &lt; <span class="number">2</span> <span class="keyword">and</span> t%N <span class="keyword">or</span> MMI(n, A%n, t, s-A//n*t, N <span class="keyword">or</span> n),-<span class="number">1</span>)[n&lt;<span class="number">1</span>]<span class="comment">#æ¨¡é€†è¿ç®—</span></span><br><span class="line">a_1 = MMI(a,p) <span class="comment">#aç›¸å¯¹äºæ¨¡æ•°pçš„é€†å…ƒ</span></span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    xs0 = (a_1*(xs[<span class="number">2</span>]-b*xs[<span class="number">0</span>]-c*xs[<span class="number">1</span>])) % p</span><br><span class="line">    xs = [xs0] + xs[:<span class="number">2</span>]</span><br><span class="line"><span class="built_in">print</span>(xs)</span><br><span class="line"><span class="built_in">print</span>((a*xs[<span class="number">0</span>] + b*xs[<span class="number">1</span>] + c*xs[<span class="number">2</span>]) % p)</span><br><span class="line"><span class="built_in">print</span>(long_to_bytes(xs[<span class="number">0</span>])+long_to_bytes(xs[<span class="number">1</span>])+long_to_bytes(xs[<span class="number">2</span>]))</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221013182348378.png" alt="image-20221013182348378"></p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå®‰å…¨ </category>
          
          <category> Crypto </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå®‰å…¨ </tag>
            
            <tag> Crypto </tag>
            
            <tag> QSNCTF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[é’å°‘å¹´CTF]crypto-ç»§ç»­æ‰«å§è¦æœ‰è€å¿ƒ</title>
      <link href="/2022/10/07/ecd2ba710837-q1jun/"/>
      <url>/2022/10/07/ecd2ba710837-q1jun/</url>
      
        <content type="html"><![CDATA[<h2 id="0x01-é¢˜ç›®"><a href="#0x01-é¢˜ç›®" class="headerlink" title="0x01 é¢˜ç›®"></a>0x01 é¢˜ç›®</h2><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007233832420.png" alt="image-20221007233832420"></p><p>é™„ä»¶ğŸ“ï¼šattachment.rar</p><h2 id="0x02-è§£é¢˜"><a href="#0x02-è§£é¢˜" class="headerlink" title="0x02 è§£é¢˜"></a>0x02 è§£é¢˜</h2><p>ä¸‹è½½ä¸‹æ¥é™„ä»¶ï¼Œè§£å‹ä¹‹åå‘ç°æ˜¯å‡ åƒå¼ äºŒç»´ç ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007233950494.png" alt="image-20221007233950494"></p><p>æ‰‹åŠ¨ä¸€ä¸ªä¸€ä¸ªæ‰«è‚¯å®šæ˜¯ä¸å¯èƒ½çš„äº†ï¼Œç”¨pythoné‡Œé¢çš„<strong>pyzbar</strong>åŒ…è¿›è¡Œè‡ªåŠ¨æ‰«ç ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">from</span> pyzbar.pyzbar <span class="keyword">import</span> decode</span><br></pre></td></tr></table></figure><p>è¿™é‡Œé‡åˆ°äº†ä¸€ä¸ªå‘ï¼Œ<code>os.listdir</code>è¯»å–çš„æ–‡ä»¶å¤¹é‡Œé¢çš„å›¾ç‰‡æ˜¯ä¹±åºçš„ï¼Œæœ€åå¾—å‡ºæ¥çš„ç¼–ç ä¹Ÿæ˜¯ä¹±åºï¼Œå¯¼è‡´åœ¨è¿™é‡Œå¡äº†ä¸€ä¼šå„¿ã€‚</p><p>éœ€è¦è¿›è¡Œæ’åºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list1 = <span class="built_in">sorted</span>(os.listdir(image_path),key = <span class="keyword">lambda</span> x:<span class="built_in">int</span>(x[:-<span class="number">4</span>]))</span><br></pre></td></tr></table></figure><p>ç„¶åå‘ç°è¾“å‡ºçš„æ˜¯ä¸€ä¸²ä¸²base64ç¼–ç ï¼Œç›´æ¥æŠŠæ‰€æœ‰base64ä¸¢åˆ°base64è§£ç å™¨é‡Œé¢æ˜¯è§£ä¸å‡ºæ¥çš„ï¼Œå› ä¸ºé‡Œé¢ç©¿æ’äº†ä¸€äº›æ‘©æ–¯å¯†ç ã€‚</p><p>æ‘©æ–¯å¯†ç è§£å¯†å‡ºæ¥çš„å­—ç¬¦éƒ½æ˜¯æ— ç”¨çš„ï¼Œæ‰€ä»¥è¿™äº›æ‘©æ–¯å¯†ç éƒ½æ˜¯å¹²æ‰°ä½ çš„ï¼Œéœ€è¦å»é™¤ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å»é™¤æ‘©æ–¯å¯†ç </span></span><br><span class="line">qrInfo = qrInfo.replace(<span class="string">&#x27;.&#x27;</span>,<span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;-&#x27;</span>,<span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;/&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure><p>ç„¶åä»¥<code>=</code>ä¸ºåˆ†ç•Œçº¿è¿›è¡Œä¸€è¡Œä¸€è¡Œè¾“å‡º</p><p>å¤„ç†è¿‡åçš„base64ç¼–ç ä¸€å…±æœ‰30è¡Œ</p><p>è§£ç base64ä¹‹åå‘ç°è¿˜æœ‰ä¸€å±‚base64ï¼Œæ‰€ä»¥è¿™æ˜¯<strong>åŒå±‚base64ç¼–ç </strong>ï¼Œéœ€è¦è§£ç ä¸¤æ¬¡ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line">debase = base64.b64decode(base64.b64decode(str1)).decode()</span><br></pre></td></tr></table></figure><p>åŒå±‚è§£å¯†ä¹‹åæœ€åå¾—åˆ°çš„ç¼–ç å¦‚ä¸‹ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007234744746.png" alt="image-20221007234744746"></p><p>å‘ç°éƒ½æ˜¯ä¸€äº›32ä½çš„md5ï¼Œ</p><p>ä¸€ä¸ªä¸€ä¸ªå»<code>cmd5.com</code>æŸ¥è¡¨ï¼Œå‘ç°ä¸€è¡Œmd5ä»£è¡¨ä¸€ä¸ªå­—æ¯æˆ–æ•°å­—<em>ï¼ˆä¹Ÿå¯èƒ½æ˜¯â€œ{â€ â€œ}â€)</em></p><p>é‚£ä¹ˆå¯ä»¥é€šè¿‡å·²çŸ¥å­—å…¸è¿›è¡Œmd5åŠ å¯†ä¸€ä¸€å¯¹æ¯”ï¼Œçˆ†ç ´å‡ºflagï¼Œæ‰€ä»¥æœ€ç»ˆä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> encodings <span class="keyword">import</span> utf_8</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">from</span> pyzbar.pyzbar <span class="keyword">import</span> decode</span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">wordlist = <span class="string">&#x27;abcdefghijklmnopqrstuvwxwz0123456789-&#125;&#123;&#x27;</span></span><br><span class="line">m = <span class="string">&#x27;&#x27;</span></span><br><span class="line">image_path = <span class="string">&#x27;./qrcode&#x27;</span></span><br><span class="line">images = []</span><br><span class="line">str1 = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="comment"># parseQrcode(&#x27;./qrcode/1.png&#x27;)</span></span><br><span class="line">list1 = <span class="built_in">sorted</span>(os.listdir(image_path),key = <span class="keyword">lambda</span> x:<span class="built_in">int</span>(x[:-<span class="number">4</span>]))</span><br><span class="line"><span class="keyword">for</span> f <span class="keyword">in</span> list1:</span><br><span class="line">    images.append(f)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> image <span class="keyword">in</span> images:</span><br><span class="line">    filePath = <span class="built_in">str</span>(image_path+<span class="string">&#x27;/&#x27;</span>+image)</span><br><span class="line">    img = cv.imread(filePath)</span><br><span class="line">    texts = decode(img)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> text <span class="keyword">in</span> texts:</span><br><span class="line">        qrInfo = text.data.decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> qrInfo == <span class="string">&#x27;=&#x27;</span>:</span><br><span class="line">            <span class="comment"># print(str1,end=&#x27;\n&#x27;)</span></span><br><span class="line">            str1 += <span class="string">&#x27;&#x27;</span>.join(qrInfo)</span><br><span class="line">            debase = base64.b64decode(base64.b64decode(str1)).decode()</span><br><span class="line">            <span class="comment"># print(str1)</span></span><br><span class="line">            <span class="keyword">for</span> word <span class="keyword">in</span> wordlist:</span><br><span class="line">                md5 = hashlib.md5(word.encode()).hexdigest()</span><br><span class="line">                <span class="keyword">if</span> md5 == debase:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&#x27; <span class="subst">&#123;debase&#125;</span> = <span class="subst">&#123;word&#125;</span>&#x27;</span>)</span><br><span class="line">                    m += <span class="string">&#x27;&#x27;</span>.join(word)</span><br><span class="line">            str1 = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment">#æ›¿æ¢æ‘©æ–¯å¯†ç </span></span><br><span class="line">            qrInfo = qrInfo.replace(<span class="string">&#x27;.&#x27;</span>,<span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;-&#x27;</span>,<span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;/&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            str1 += <span class="string">&#x27;&#x27;</span>.join(qrInfo)</span><br><span class="line"><span class="built_in">print</span>(m)</span><br><span class="line"><span class="comment"># print(images)</span></span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007235333510.png" alt="image-20221007235333510"></p><p>æœ€åå‘ç°äº¤ä¸äº†ï¼Œç»è¿‡ç¾¤å‹ä»¬çš„å‹å¥½æç¤ºï¼Œç±»UUIDæ ¼å¼ï¼Œè¿™é‡Œå¾—åˆ°çš„flagå°‘äº†ä¸€ä¸ª<code>-</code>ï¼Œæœ€åç»“æœåº”è¯¥ä¸ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qsnctf&#123;06xxxxxx-f6cb-c84a-04fe&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç»™çš„é¢˜ç›®å¹¶ä¸èƒ½æ‰«å‡ºæœ€åä¸€ä¸ª<code>-</code>ï¼Œåº”è¯¥æ˜¯è¿™é¢˜çš„bug</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå®‰å…¨ </category>
          
          <category> Crypto </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå®‰å…¨ </tag>
            
            <tag> Crypto </tag>
            
            <tag> QSNCTF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[é’å°‘å¹´CTF]misc-Simpleness</title>
      <link href="/2022/10/07/e4a98e289670-q1jun/"/>
      <url>/2022/10/07/e4a98e289670-q1jun/</url>
      
        <content type="html"><![CDATA[<h2 id="0x01-é¢˜ç›®"><a href="#0x01-é¢˜ç›®" class="headerlink" title="0x01 é¢˜ç›®"></a>0x01 é¢˜ç›®</h2><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007220707611.png" alt="image-20221007220707611"></p><p>é™„ä»¶ï¼šsimpleness .zip</p><h2 id="0x02-è§£é¢˜"><a href="#0x02-è§£é¢˜" class="headerlink" title="0x02 è§£é¢˜"></a>0x02 è§£é¢˜</h2><p>è¿™é¢˜åŒ…å«çš„çŸ¥è¯†ç‚¹æ¯”è¾ƒå¤šï¼Œå†™wpçœŸæ˜¯ç´¯æ­»æˆ‘äº†ï¼Œçœ‹è¿‡çš„å¸ˆå‚…åœ¨ä¸‹é¢ç•™ä¸‹ç‚¹è¯„è®ºå‘—ğŸ¥¹</p><h3 id="0x0201-å¼±å£ä»¤çˆ†ç ´"><a href="#0x0201-å¼±å£ä»¤çˆ†ç ´" class="headerlink" title="0x0201 å¼±å£ä»¤çˆ†ç ´"></a>0x0201 å¼±å£ä»¤çˆ†ç ´</h3><p>è§£å‹äº†simpleness.zipï¼Œå‘ç°ä¸€å…±æœ‰ä¸‰ä¸ªæ–‡ä»¶ï¼š</p><ul><li>flag.zip</li><li>hint.zip</li><li>key.zip</li></ul><p>æ”¾åˆ°kalié‡Œé¢ä½¿ç”¨johnè¿›è¡Œçˆ†ç ´ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007221156285.png" alt="image-20221007221156285"></p><p>hint.zipçš„è§£å‹å¯†ç ä¸º: <strong>123456</strong></p><p>å…¶ä»–ä¸¤ä¸ªåŒ…è·‘äº†ä¸€å¥½ä¸€ä¼šå„¿æ²¡è·‘å‡ºæ¥ï¼Œé‚£å°±å…ˆåˆ†æhint.zipé‡Œé¢çš„æ–‡ä»¶ã€‚</p><h3 id="0x0202-RARä¼ªåŠ å¯†"><a href="#0x0202-RARä¼ªåŠ å¯†" class="headerlink" title="0x0202 RARä¼ªåŠ å¯†"></a>0x0202 RARä¼ªåŠ å¯†</h3><p>hint.zipé‡Œé¢è§£å‡ºä¸¤ä¸ªæ–‡ä»¶ï¼š</p><ul><li>hint.png</li><li>hint.rar</li></ul><p>è¿™ä¸ªhint.raræ˜¯ä¼ªåŠ å¯†ï¼Œéšä¾¿æ‰“å¼€ä¸€ä¸ªåå…­è¿›åˆ¶çš„ç¼–è¾‘å™¨ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007222530330.png" alt="image-20221007222530330"></p><p>æ‰¾åˆ°ç¬¬24ä¸ªå­—èŠ‚ï¼Œè¿™é‡Œçš„<code>0x24</code>è¡¨ç¤ºå·²åŠ å¯†ï¼Œæ”¹æˆ<code>0x20</code>è¡¨ç¤ºæœªåŠ å¯†ï¼Œæ”¹å®Œï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007222739455.png" alt="image-20221007222739455"></p><p>ä¿å­˜ä¹‹åï¼ŒæˆåŠŸè§£å‹hint.rarï¼Œå¾—åˆ°ä¸€ä¸ªhint.txt:</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007222916489.png" alt="image-20221007222916489"></p><p>è¿™é‡Œå¾—åˆ°</p><blockquote><p>æç¤º1ï¼škey.zipçš„å¯†ç èŒƒå›´æ˜¯qsnctfå¤§å°å†™ï¼Œä¸”æ­¤å¯†ç å¯å¤šæ¬¡ä½¿ç”¨</p></blockquote><blockquote><p>æç¤º2ï¼šè¦ç”¨åˆ°SilentEye0.3.1è¿™ä¸ªå·¥å…·ï¼ˆä¹‹å‰åšçš„æ—¶å€™æ²¡æœ‰è¿™ä¸ªæç¤ºï¼Œå¡äº†å¥½ä¹…</p></blockquote><h3 id="0x0203-å›¾ç‰‡éšå†™"><a href="#0x0203-å›¾ç‰‡éšå†™" class="headerlink" title="0x0203 å›¾ç‰‡éšå†™"></a>0x0203 å›¾ç‰‡éšå†™</h3><p>å†çœ‹<strong>ç¬¬äºŒä¸ªæ–‡ä»¶</strong>ï¼šhint.png</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007223207637.png" alt="image-20221007223207637"></p><p>æ˜¯ä¸€å¼ å¹³å¹³æ— å¥‡çš„pngå›¾ç‰‡ï¼Œä½†æ˜¯ä¸¢åˆ°foremostçœ‹ä¸€ä¸‹å‘ç°é‡Œé¢è—äº†ä¸ªzip</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Foremost version 1.5.7 by Jesse Kornblum, Kris Kendall, and Nick Mikus</span><br><span class="line">Audit File</span><br><span class="line"></span><br><span class="line">Foremost started at Fri Oct  7 22:33:18 2022</span><br><span class="line">Invocation: foremost -i hint.png </span><br><span class="line">Output directory: /root/q1jun/markdown/simpleness/hint/output</span><br><span class="line">Configuration file: /etc/foremost.conf</span><br><span class="line">------------------------------------------------------------------</span><br><span class="line">File: hint.png</span><br><span class="line">Start: Fri Oct  7 22:33:18 2022</span><br><span class="line">Length: 82 KB (84884 bytes)</span><br><span class="line"> </span><br><span class="line">Num Name (bs=512)       Size File Offset Comment </span><br><span class="line"></span><br><span class="line">0:00000162.zip        1 KB       83284  </span><br><span class="line">1:00000000.png       81 KB           0   (371 x 225)</span><br><span class="line">Finish: Fri Oct  7 22:33:18 2022</span><br><span class="line"></span><br><span class="line">2 FILES EXTRACTED</span><br><span class="line"></span><br><span class="line">zip:= 1</span><br><span class="line">png:= 1</span><br><span class="line">------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">Foremost finished at Fri Oct  7 22:33:18 2022</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foremost -i hint.png</span><br></pre></td></tr></table></figure><p>æå–å‡ºzipæ–‡ä»¶ï¼Œè§£å‹å‘ç°æ²¡æœ‰å¯†ç ï¼Œå¾—åˆ°ä¸€å¼ äºŒç»´ç ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007223553067.png" alt="image-20221007223553067"></p><p>ä½¿ç”¨å·¥å…·æ‰«ç å¾—åˆ°å¦ä¸€ä¸ªhintï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007223650243.png" alt="image-20221007223650243"></p><blockquote><p>æç¤º3ï¼šæœ€åä¸€ä¸ªå‹ç¼©åŒ…æ˜¯ä¸­æ–‡</p></blockquote><h3 id="0x0204-pythonç”Ÿæˆå­—å…¸çˆ†ç ´"><a href="#0x0204-pythonç”Ÿæˆå­—å…¸çˆ†ç ´" class="headerlink" title="0x0204 pythonç”Ÿæˆå­—å…¸çˆ†ç ´"></a>0x0204 pythonç”Ÿæˆå­—å…¸çˆ†ç ´</h3><p>é€šè¿‡<code>æç¤º1</code>ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“key.zipçš„å¯†ç æ˜¯<strong>qsnctf</strong>çš„å¤§å°å†™ç»„åˆï¼Œé€šè¿‡å†™pythonè„šæœ¬ç”Ÿæˆä¸€ä¸ªå­—å…¸ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">â”Œâ”€â”€(rootã‰¿localhost)-[~/q1jun/markdown/simpleness]</span><br><span class="line">â””â”€# cat wordlist.txt </span><br><span class="line">qsnctf</span><br><span class="line">qsnctF</span><br><span class="line">qsncTf</span><br><span class="line">qsncTF</span><br><span class="line">qsnCtf</span><br><span class="line">qsnCtF</span><br><span class="line">qsnCTf</span><br><span class="line">qsnCTF</span><br><span class="line">qsNctf</span><br><span class="line">qsNctF</span><br><span class="line">qsNcTf</span><br><span class="line">qsNcTF</span><br><span class="line">qsNCtf</span><br><span class="line">qsNCtF</span><br><span class="line">qsNCTf</span><br><span class="line">qsNCTF</span><br><span class="line">qSnctf</span><br><span class="line">qSnctF</span><br><span class="line">qSncTf</span><br><span class="line">qSncTF</span><br><span class="line">qSnCtf</span><br><span class="line">qSnCtF</span><br><span class="line">qSnCTf</span><br><span class="line">qSnCTF</span><br><span class="line">qSNctf</span><br><span class="line">qSNctF</span><br><span class="line">qSNcTf</span><br><span class="line">qSNcTF</span><br><span class="line">qSNCtf</span><br><span class="line">qSNCtF</span><br><span class="line">qSNCTf</span><br><span class="line">qSNCTF</span><br><span class="line">Qsnctf</span><br><span class="line">QsnctF</span><br><span class="line">QsncTf</span><br><span class="line">QsncTF</span><br><span class="line">QsnCtf</span><br><span class="line">QsnCtF</span><br><span class="line">QsnCTf</span><br><span class="line">QsnCTF</span><br><span class="line">QsNctf</span><br><span class="line">QsNctF</span><br><span class="line">QsNcTf</span><br><span class="line">QsNcTF</span><br><span class="line">QsNCtf</span><br><span class="line">QsNCtF</span><br><span class="line">QsNCTf</span><br><span class="line">QsNCTF</span><br><span class="line">QSnctf</span><br><span class="line">QSnctF</span><br><span class="line">QSncTf</span><br><span class="line">QSncTF</span><br><span class="line">QSnCtf</span><br><span class="line">QSnCtF</span><br><span class="line">QSnCTf</span><br><span class="line">QSnCTF</span><br><span class="line">QSNctf</span><br><span class="line">QSNctF</span><br><span class="line">QSNcTf</span><br><span class="line">QSNcTF</span><br><span class="line">QSNCtf</span><br><span class="line">QSNCtF</span><br><span class="line">QSNCTf</span><br><span class="line">QSNCTF</span><br></pre></td></tr></table></figure><p>pythonè„šæœ¬å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">S = <span class="string">&#x27;qsnctf&#x27;</span></span><br><span class="line">word = <span class="string">&#x27;&#x27;</span></span><br><span class="line">ans = [S]</span><br><span class="line">word = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(S)):</span><br><span class="line">    s = S[i]</span><br><span class="line">    <span class="keyword">if</span> s.isalpha():</span><br><span class="line">        new = []</span><br><span class="line">        <span class="keyword">for</span> a <span class="keyword">in</span> ans:</span><br><span class="line">            new.append(a[:i] + s.lower() + a[i + <span class="number">1</span>:])</span><br><span class="line">            new.append(a[:i] + s.upper() + a[i + <span class="number">1</span>:])</span><br><span class="line">        ans = new</span><br><span class="line"><span class="keyword">for</span> a <span class="keyword">in</span> ans:</span><br><span class="line">    word += <span class="string">&#x27;&#x27;</span>.join(a)</span><br><span class="line">    word += <span class="string">&#x27;&#x27;</span>.join(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;wordlist.txt&#x27;</span>,<span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(word)</span><br><span class="line">    f.close</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨zip2johnç”Ÿæˆå‹ç¼©åŒ…çš„hashï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zip2john key.zip &gt;&gt; key.txt</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨johnæ ¹æ®ä¸Šé¢ç”Ÿæˆçš„å­—å…¸<strong>wordlist.txt</strong>è¿›è¡Œçˆ†ç ´ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">john key.txt --wordlist=wordlist.txt</span><br></pre></td></tr></table></figure><p>ç«‹é©¬å¾—åˆ°å‹ç¼©åŒ…key.zipçš„å¯†ç ï¼š<code>QsNcTf</code></p><p>è§£å‹å¾—åˆ°ä¸€ä¸ªbmpæ–‡ä»¶ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007224516894.png" alt="image-20221007224516894"></p><h3 id="0x0205-LSB-AESéšå†™"><a href="#0x0205-LSB-AESéšå†™" class="headerlink" title="0x0205 LSB+AESéšå†™"></a>0x0205 LSB+AESéšå†™</h3><p>çœ‹åˆ°bmpæ ¼å¼çš„å›¾ç‰‡ï¼Œç¬¬ä¸€ä¸ªæƒ³åˆ°è¿™æ˜¯LSBéšå†™ï¼Œä½†æ˜¯å½“æˆ‘åˆ†æå®Œäº†R- G- Bä½ä½éšå†™çš„æ‰€æœ‰æ•°æ®ä¹‹åå¹¶æ²¡æœ‰å‘ç°ä»€ä¹ˆæœ‰ç”¨çš„ä¸œè¥¿ã€‚</p><p>æƒ³åˆ°å‰é¢çš„æç¤º2ï¼šæ˜¯ç”¨<strong>SilentEye0.3.1</strong>è¿™ä¸ªå·¥å…·è¿›è¡Œéšå†™çš„ï¼Œç”¨è¿™ä¸ªå·¥å…·è¿›è¡Œdecodeï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007225202925.png" alt="image-20221007225202925"></p><p>è¿˜æ˜¯ä¸è¡Œã€‚</p><p>æƒ³åˆ°å‰é¢çš„æç¤º1è¯´åˆ°<code>QsNcTf</code>è¿™ä¸ªå¯†ç å¯ä»¥å¤šæ¬¡ä½¿ç”¨ï¼Œå‹¾é€‰<kbd>Encrypted data</kbd>ä½¿ç”¨AES128è¿›è¡Œè§£å¯†ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007225430633.png" alt="image-20221007225430633"></p><p>å‘ç°å›¾ç‰‡é‡Œé¢éšè—äº†ä¸€ä¸ª<code>1.txt</code>æ–‡ä»¶ï¼Œæå–å‡ºæ¥ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007225608706.png" alt="image-20221007225608706"></p><h3 id="0x0206-é›¶å®½éšå†™"><a href="#0x0206-é›¶å®½éšå†™" class="headerlink" title="0x0206 é›¶å®½éšå†™"></a>0x0206 é›¶å®½éšå†™</h3><p>å‘ç°ç›´æ¥çœ‹å¹¶æ²¡æœ‰ä»€ä¹ˆæœ‰ç”¨çš„ä¿¡æ¯ï¼Œç”¨Sublime textæ‰“å¼€ä¹‹åå‘ç°ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007225640079.png" alt="image-20221007225640079"></p><p>å‘ç°æ˜¯ä¸ªé›¶å®½éšå†™ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007225750759.png" alt="image-20221007225750759"></p><p>è¿™é‡Œæœ‰ä¸ªå‘ï¼Œè¿™ä¸ªç½‘ç«™å¹¶ä¸èƒ½æ­£ç¡®çš„ç°å®é‡Œé¢éšè—çš„å†…å®¹ï¼Œ</p><p>æ¢äº†ä¸ªç½‘ç«™:<a target="_blank" rel="noopener" href="https://yuanfux.github.io/zero-width-web/">Zero Width Lib (yuanfux.github.io)</a></p><p>å‘ç°äº†é‡Œé¢éšè—çš„å†…å®¹ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007225912594.png" alt="image-20221007225912594"></p><p>è¿™é‡Œå¾—åˆ°äº†<code>flag.zip</code>çš„å¯†ç ï¼Œä½†æ˜¯è¯•äº†åŠå¤©<code>Hello World</code>ï¼Œå‘ç°å¹¶ä¸èƒ½è§£å¼€å‹ç¼©åŒ…</p><p>æœ€åå‘ç°å¯†ç æ˜¯è¿™ä¸€æ•´å¥è¯ã€‚ã€‚</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The password is Hello World</span><br></pre></td></tr></table></figure><h3 id="0x0207-SNOW-æ— å­—å¤©ä¹¦"><a href="#0x0207-SNOW-æ— å­—å¤©ä¹¦" class="headerlink" title="0x0207 SNOW-æ— å­—å¤©ä¹¦"></a>0x0207 SNOW-æ— å­—å¤©ä¹¦</h3><p>è§£å‹flag.zipä¹‹åï¼Œä»¥ä¸ºé©¬ä¸Šæ‹¿åˆ°äº†flagå‡†å¤‡æäº¤ï¼Œç»“æœå‘ç°åˆç»™äº†ä¸¤ä¸ªæ–‡ä»¶ï¼ˆæˆ‘å¿«å´©æºƒäº†</p><ul><li>flag.zip</li><li>key.txt</li></ul><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007230526111.png" alt="image-20221007230526111"></p><p>æ‰“å¼€key.txtåï¼Œå‘ç°ä»€ä¹ˆä¹Ÿæ²¡æœ‰</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007230602577.png" alt="image-20221007230602577"></p><p>æƒ³åˆ°å¯èƒ½æ˜¯SNOWçš„æ— å­—å¤©ä¹¦éšå†™ï¼Œå› ä¸ºé‡Œé¢æœ‰å¾ˆå¤šç©ºç™½åˆ¶è¡¨ç¬¦ï¼Œä½†æ˜¯æ²¡æœ‰ä»»ä½•å†…å®¹ã€‚</p><p>é€šè¿‡<code>SNOW.exe</code>å·¥å…·è§£å‡ºä¸€ä¸²æ•°å­—ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007230722671.png" alt="image-20221007230722671"></p><h3 id="0x0208-ä¸­æ–‡ç”µç è§£ç "><a href="#0x0208-ä¸­æ–‡ç”µç è§£ç " class="headerlink" title="0x0208 ä¸­æ–‡ç”µç è§£ç "></a>0x0208 ä¸­æ–‡ç”µç è§£ç </h3><p>å¾—åˆ°ä¸€ä¸²æ•°å­—ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">66382508137843160834</span><br></pre></td></tr></table></figure><p>æƒ³åˆ°æç¤º3: <strong>æœ€åä¸€ä¸ªå‹ç¼©åŒ…çš„å¯†ç æ˜¯ä¸­æ–‡</strong> ,æƒ³åˆ°è¿™å¯èƒ½æ˜¯ä¸­æ–‡ç”µç ï¼ˆå› ä¸ºè¦è®©å®ƒå˜æˆæ±‰å­—</p><p>æ‰“å¼€ä¸­æ–‡ç”µç æŸ¥è¯¢ç½‘ç«™ï¼š<a target="_blank" rel="noopener" href="http://code.mcdvisa.com/">ä¸­æ–‡ç”µç æŸ¥è¯¢ Chinese Commercial Code</a></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007231029902.png" alt="image-20221007231029902"></p><p>å¾—åˆ°æœ€åä¸€ä¸ªå‹ç¼©åŒ…çš„å¯†ç ï¼š</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¿™æ˜¯å¯†ç å—</span><br></pre></td></tr></table></figure><p>è§£å¼€æœ€åä¸€ä¸ªflag.zipä¹‹åå‘ç°â€¦.åˆæ˜¯ä¸€å¼ å›¾ç‰‡<code>flag.jpg</code>ï¼</p><h3 id="0x0209-JPGæ–‡ä»¶ä¿®å¤"><a href="#0x0209-JPGæ–‡ä»¶ä¿®å¤" class="headerlink" title="0x0209 JPGæ–‡ä»¶ä¿®å¤"></a>0x0209 JPGæ–‡ä»¶ä¿®å¤</h3><p>å‘ç°flag.jpgå¹¶ä¸èƒ½æ‰“å¼€ï¼Œä¸¢åˆ°åå…­è¿›åˆ¶ç¼–è¾‘å™¨é‡Œé¢ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007231343379.png" alt="image-20221007231343379"></p><p>åœ¨æ–‡ä»¶æœ«å°¾ï¼Œçœ‹åˆ°è¿™äº›ä¹±ç æ˜¯æ–‡ä»¶è¢«é€†åºï¼Œè€Œä¸”å¥‡å¶äº’æ¢äº†</p><p>é€šè¿‡pythonå†™ä¸€ä¸ªè„šæœ¬è¿›è¡Œä¿®å¤ï¼Œè„šæœ¬å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="built_in">open</span>(<span class="string">&quot;flag.jpg&quot;</span>,<span class="string">&quot;rb&quot;</span>).read()</span><br><span class="line">a = <span class="built_in">open</span>(<span class="string">&quot;flag1.jpg&quot;</span>,<span class="string">&quot;wb&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span> ,<span class="built_in">len</span>(s), <span class="number">4</span>):<span class="comment">#4ä½å¥‡å¶äº’æ¢</span></span><br><span class="line">    s1 = s[i:i+<span class="number">4</span>][::-<span class="number">1</span>]</span><br><span class="line">    a.write(s1)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="built_in">open</span>(<span class="string">&quot;flag1.jpg&quot;</span>,<span class="string">&quot;rb&quot;</span>).read()[::-<span class="number">1</span>] <span class="comment">#é€†åº</span></span><br><span class="line">a = <span class="built_in">open</span>(<span class="string">&quot;flag2.jpg&quot;</span>,<span class="string">&quot;wb&quot;</span>)</span><br><span class="line">a.write(s)</span><br></pre></td></tr></table></figure><p>å¾—åˆ°flag2.jpgå¯ä»¥æ­£å¸¸æ‰“å¼€ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007231949289.png" alt="image-20221007231949289"></p><h3 id="0x0210-å›¾ç‰‡å®½é«˜éšå†™"><a href="#0x0210-å›¾ç‰‡å®½é«˜éšå†™" class="headerlink" title="0x0210 å›¾ç‰‡å®½é«˜éšå†™"></a>0x0210 å›¾ç‰‡å®½é«˜éšå†™</h3><p>å¾—åˆ°flag2.jpgä¹‹åè¿˜ä¸èƒ½å¾—åˆ°flagï¼Œåˆ†æflag2.jpgä¹Ÿå¹¶æ²¡æœ‰å‘ç°é‡Œé¢è—äº†å…¶ä»–æ–‡ä»¶ã€‚</p><p>æƒ³åˆ°å¯èƒ½æ˜¯ä¿®æ”¹äº†é«˜åº¦ï¼Œä¸¢è¿›010Editerï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007232646601.png" alt="image-20221007232646601"></p><p>æ‰¾åˆ°é«˜åº¦ <code>WORD Y_image</code>ï¼ŒæŠŠå®ƒæ”¹é«˜ä¸€ç‚¹ï¼Œæˆ‘è¿™é‡Œæ”¹æˆ<strong>600</strong>ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007232735105.png" alt="image-20221007232735105"></p><p>ä¿å­˜åå†æ‰“å¼€å›¾ç‰‡ï¼Œå¾—åˆ°flagï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221007232803001.png" alt="image-20221007232803001"></p><blockquote><p>åˆ¶ä½œwriteupä¸æ˜“ï¼Œå¸ˆå‚…ä»¬ç•™ä¸‹ç‚¹è¯„è®ºæˆ–ç‚¹èµå§ğŸ¥º</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå®‰å…¨ </category>
          
          <category> Misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå®‰å…¨ </tag>
            
            <tag> Misc </tag>
            
            <tag> QSNCTF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[é’å°‘å¹´CTF]reverse-EzAndroid</title>
      <link href="/2022/10/04/8286824a4caf-q1jun/"/>
      <url>/2022/10/04/8286824a4caf-q1jun/</url>
      
        <content type="html"><![CDATA[<h2 id="0x01-é¢˜ç›®"><a href="#0x01-é¢˜ç›®" class="headerlink" title="0x01 é¢˜ç›®"></a>0x01 é¢˜ç›®</h2><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221004110017214.png" alt="image-20221004110017214"></p><p>é™„ä»¶æ˜¯ä¸€ä¸ªapkåŒ…</p><h2 id="0x02-è§£é¢˜"><a href="#0x02-è§£é¢˜" class="headerlink" title="0x02 è§£é¢˜"></a>0x02 è§£é¢˜</h2><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221004110409928.png" alt="image-20221004110409928"></p><p>è§£å‹apkåŒ…ä¹‹åå‘ç°è¢«åŠ å¯†äº†ï¼Œç”¨<code>apktools</code>è¿›è¡Œè§£å¯†ï¼Œç„¶ååç¼–è¯‘å¾—åˆ°æºç ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221004110557664.png" alt="image-20221004110557664"></p><p>æ‰¾åˆ°å…¥å£ç±»ï¼Œåœ¨<code>com.example.haveaandroid</code>:</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221004110700416.png" alt="image-20221004110700416"></p><p>æºç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.haveaandroid;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Intent;</span><br><span class="line"><span class="keyword">import</span> android.os.Bundle;</span><br><span class="line"><span class="keyword">import</span> android.view.View;</span><br><span class="line"><span class="keyword">import</span> android.widget.Button;</span><br><span class="line"><span class="keyword">import</span> android.widget.EditText;</span><br><span class="line"><span class="keyword">import</span> android.widget.Toast;</span><br><span class="line"><span class="keyword">import</span> androidx.appcompat.app.AppCompatActivity;</span><br><span class="line"><span class="keyword">import</span> androidx.recyclerview.widget.ItemTouchHelper;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* loaded from: classes3.dex */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MainActivity</span> <span class="keyword">extends</span> <span class="title class_">AppCompatActivity</span> &#123;</span><br><span class="line">    EditText name;</span><br><span class="line">    EditText pass;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* JADX INFO: Access modifiers changed from: protected */</span></span><br><span class="line">    <span class="meta">@Override</span> <span class="comment">// androidx.fragment.app.FragmentActivity, androidx.activity.ComponentActivity, androidx.core.app.ComponentActivity, android.app.Activity</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onCreate</span><span class="params">(Bundle savedInstanceState)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        <span class="built_in">this</span>.name = (EditText) findViewById(R.id.zhanghao);</span><br><span class="line">        <span class="built_in">this</span>.pass = (EditText) findViewById(R.id.mima);</span><br><span class="line">        <span class="type">Button</span> <span class="variable">button1</span> <span class="operator">=</span> (Button) findViewById(R.id.button1);</span><br><span class="line">        button1.setOnClickListener(<span class="keyword">new</span> <span class="title class_">View</span>.OnClickListener() &#123; <span class="comment">// from class: com.example.haveaandroid.MainActivity.1</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">mname</span> <span class="operator">=</span> <span class="string">&quot;ccadwjlyah&quot;</span>;</span><br><span class="line">            Integer[] compare = &#123;<span class="number">404</span>, <span class="number">220</span>, <span class="number">436</span>, <span class="number">368</span>, <span class="number">220</span>, <span class="number">436</span>, <span class="number">412</span>, <span class="number">452</span>, <span class="number">432</span>, Integer.valueOf((<span class="type">int</span>) ItemTouchHelper.Callback.DEFAULT_DRAG_ANIMATION_DURATION), <span class="number">412</span>&#125;;</span><br><span class="line">            List&lt;Integer&gt; ccompare = <span class="keyword">new</span> <span class="title class_">ArrayList</span>(Arrays.asList(<span class="built_in">this</span>.compare));</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span> <span class="comment">// android.view.View.OnClickListener</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onClick</span><span class="params">(View v)</span> &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> MainActivity.<span class="built_in">this</span>.name.getText().toString().trim();</span><br><span class="line">                <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> MainActivity.<span class="built_in">this</span>.pass.getText().toString().trim();</span><br><span class="line">                List&lt;Integer&gt; ppwd = MainActivity.change(pwd);</span><br><span class="line">                <span class="keyword">if</span> (user.equals(<span class="built_in">this</span>.mname) &amp;&amp; ppwd.equals(<span class="built_in">this</span>.ccompare)) &#123;</span><br><span class="line">                    Toast.makeText(MainActivity.<span class="built_in">this</span>, <span class="string">&quot;correctï¼&quot;</span>, <span class="number">0</span>).show();</span><br><span class="line">                    <span class="type">Intent</span> <span class="variable">intent</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Intent</span>(MainActivity.<span class="built_in">this</span>, afterlog.class);</span><br><span class="line">                    MainActivity.<span class="built_in">this</span>.startActivity(intent);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                Toast.makeText(MainActivity.<span class="built_in">this</span>, <span class="string">&quot;errorï¼&quot;</span>, <span class="number">0</span>).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title function_">change</span><span class="params">(String args)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">char</span>[] ch = args.toCharArray();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">char</span> c : ch) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">xxx</span> <span class="operator">=</span> (c ^ <span class="number">3</span>) &lt;&lt; <span class="number">2</span>;</span><br><span class="line">            list.add(Integer.valueOf(xxx));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥ç›´æ¥çœ‹åˆ°æ‰“å¼€appä¹‹åéœ€è¦è¾“å…¥ç™»å…¥<code>ç”¨æˆ·å</code>å’Œ<code>å¯†ç </code>ï¼Œå…¶ä¸­ç”¨æˆ·åå·²ç»ç»™å‡º:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">mname</span> <span class="operator">=</span> <span class="string">&quot;ccadwjlyah&quot;</span>;</span><br></pre></td></tr></table></figure><p>è€Œå¯†ç åˆ™é€šè¿‡<code>change</code>å‡½æ•°è¿›è¡Œå¼‚æˆ–å’Œç§»ä½è¿›è¡ŒåŠ å¯†ï¼ŒåŠ å¯†å‰çš„å¯†æ–‡ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Integer[] compare = &#123;<span class="number">404</span>, <span class="number">220</span>, <span class="number">436</span>, <span class="number">368</span>, <span class="number">220</span>, <span class="number">436</span>, <span class="number">412</span>, <span class="number">452</span>, <span class="number">432</span>, Integer.valueOf((<span class="type">int</span>) ItemTouchHelper.Callback.DEFAULT_DRAG_ANIMATION_DURATION), <span class="number">412</span>&#125;;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œé¢çš„<code>Integer.valueOf((int) ItemTouchHelper.Callback.DEFAULT_DRAG_ANIMATION_DURATION)</code>æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œé€šè¿‡é€†å‘è¿½è¸ªæ‰¾åˆ°äº†å®ƒçš„æ•°å€¼ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221004111103976.png" alt="image-20221004111103976"></p><p>å°†<code>Integer.valueOf((int) ItemTouchHelper.Callback.DEFAULT_DRAG_ANIMATION_DURATION)</code>æ›¿æ¢æˆå®ƒçš„æ•°å€¼ï¼Œå¾—åˆ°äº†æˆ‘ä»¬å¯»æ‰¾çš„å¯†ç å¯†æ–‡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Integer[] compare = &#123;<span class="number">404</span>, <span class="number">220</span>, <span class="number">436</span>, <span class="number">368</span>, <span class="number">220</span>, <span class="number">436</span>, <span class="number">412</span>, <span class="number">452</span>, <span class="number">432</span>, <span class="number">200</span>, <span class="number">412</span>&#125;;</span><br></pre></td></tr></table></figure><p>æ ¹æ®<code>public static List&lt;Integer&gt; change(String args)</code>å†™å‡ºè§£å¯†è„šæœ¬ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.q1jun;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        Integer[] compare = &#123;<span class="number">404</span>, <span class="number">220</span>, <span class="number">436</span>, <span class="number">368</span>, <span class="number">220</span>, <span class="number">436</span>, <span class="number">412</span>, <span class="number">452</span>, <span class="number">432</span>, <span class="number">200</span>, <span class="number">412</span>&#125;;</span><br><span class="line">        List&lt;Integer&gt; ccompare = <span class="keyword">new</span> <span class="title class_">ArrayList</span>(Arrays.asList(compare));</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i: ccompare)</span><br><span class="line"></span><br><span class="line">            System.out.print(Character.toChars((i&gt;&gt;<span class="number">2</span>)^<span class="number">3</span>));</span><br><span class="line">        <span class="comment">//f4n_4ndro1d</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¾—åˆ°å¯†ç ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f4n_4ndro1d</span><br></pre></td></tr></table></figure><p>æŠŠapkå®‰è£…ä¸€ä¸‹ï¼Œæ‰“å¼€è¾“å…¥åˆšåˆšå¾—åˆ°çš„ç”¨æˆ·åå’Œå¯†ç ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221004111824869.png" alt="image-20221004111824869"></p><p>ç‚¹å‡»ç™»å…¥ï¼Œå³å¯è·å¾—flagï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221004111903164.png" alt="image-20221004111903164"></p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå®‰å…¨ </category>
          
          <category> Reverse </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå®‰å…¨ </tag>
            
            <tag> QSNCTF </tag>
            
            <tag> Reverse </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[é’å°‘å¹´CTF]misc-CheckMeç¬¬1-4é¢˜</title>
      <link href="/2022/10/02/44008f7238c3-q1jun/"/>
      <url>/2022/10/02/44008f7238c3-q1jun/</url>
      
        <content type="html"><![CDATA[<h2 id="0x01-CheckMe01"><a href="#0x01-CheckMe01" class="headerlink" title="0x01 CheckMe01"></a>0x01 CheckMe01</h2><p>è¿›å…¥ç¯å¢ƒï¼Œéšæ„è¾“å…¥å­—ç¬¦ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221002121613125.png" alt="image-20221002121613125"></p><p>çœ‹ä¸€ä¸‹ä»£ç ï¼Œå‘ç°<code>$keys = base64_decode(urldecode($keys));</code></p><p>è¯´æ˜éœ€è¦å…ˆå°†<code>qsnctf</code>å­—ç¬¦è¿›è¡Œbase64ç¼–ç æ‰èƒ½ä½¿<code>$keys==&quot;qsnctf&quot;</code>åˆ¤æ–­æˆç«‹ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221002121753174.png" alt="image-20221002121753174"></p><p>æ‰€ä»¥è¾“å…¥ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cXNuY3Rm</span><br></pre></td></tr></table></figure><p>å¾—åˆ°flag</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221002121844048.png" alt="image-20221002121844048"></p><h2 id="0x02-CheckMe02"><a href="#0x02-CheckMe02" class="headerlink" title="0x02 CheckMe02"></a>0x02 CheckMe02</h2><p>æ‰“å¼€é¢˜ç›®çš„ç¯å¢ƒï¼Œå‘ç°æ˜¯æ–‡ä»¶åŒ…å«é¢˜ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221002122324748.png" alt="image-20221002122324748"></p><p>é€šè¿‡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?url=php://filter/read=convert.base64-encode/resource=index.php</span><br></pre></td></tr></table></figure><p>phpä¼ªåè®®å¯ä»¥æŸ¥çœ‹åˆ°<code>index.php</code>çš„æºç çš„base64ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PHRpdGxlPkNoZWNrTWUtMDI8L3RpdGxlPg0KPD9waHANCnByaW50KCI8aDE+<span class="number">5</span>qyi6L+O5p2l5YiwQ2hlY2tNZS0wMu+<span class="number">8</span>jOW/q+adpeWvu+aJvuS9oOeahEZsYWflubbmj5DkuqTlkKfjgII8L2gxPiIpOw0KPz4NCjw/cGhwDQplcnJvcl9yZXBvcnRpbmcoMCk7DQokdXJsPSRfR0VUWyd1cmwnXTsNCmlmKGlzc2V0KCR1cmwpKXsNCiAgICBpbmNsdWRlKCR1cmwpOw0KfQ0KICAgIA0KPz4NCjxodG1sIGxhbmc9InpoLUNOIj4NCjw/cGhwDQogICAgICAgICAgICANCiAgICAgICAgICAgICRjb2RlPSI8P3BocCBpbmNsdWRlKCQiLiJfR0VUWyd1cmwnXSk7Pz4iOw0KICAgICAgICAgICAgaGlnaGxpZ2h0X3N0cmluZygkY29kZSk7DQogICAgPz4NCg==</span><br></pre></td></tr></table></figure><p>è§£ç å¾—åˆ°ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;title&gt;CheckMe-<span class="number">02</span>&lt;/title&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">print</span>(<span class="string">&quot;&lt;h1&gt;æ¬¢è¿æ¥åˆ°CheckMe-02ï¼Œå¿«æ¥å¯»æ‰¾ä½ çš„Flagå¹¶æäº¤å§ã€‚&lt;/h1&gt;&quot;</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"><span class="variable">$url</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;url&#x27;</span>];</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$url</span>))&#123;</span><br><span class="line">    <span class="keyword">include</span>(<span class="variable">$url</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;html lang=<span class="string">&quot;zh-CN&quot;</span>&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">            </span><br><span class="line">            <span class="variable">$code</span>=<span class="string">&quot;&lt;?php include($&quot;</span>.<span class="string">&quot;_GET[&#x27;url&#x27;]);?&gt;&quot;</span>;</span><br><span class="line">            <span class="title function_ invoke__">highlight_string</span>(<span class="variable">$code</span>);</span><br><span class="line">    <span class="meta">?&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºå¹¶æ²¡æœ‰åšä»»ä½•è¿‡æ»¤ï¼Œè¯•è¯•è¯»å–phpinfo()ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?url=data:text/plain,&lt;?php phpinfo();?&gt;</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221002122920746.png" alt="image-20221002122920746"></p><p>ç›´æ¥è¯»å–åˆ°FLAGã€‚</p><h2 id="0x03-CheckMe03"><a href="#0x03-CheckMe03" class="headerlink" title="0x03 CheckMe03"></a>0x03 CheckMe03</h2><p>æ‰“å¼€é¢˜ç›®ç¯å¢ƒï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221002123524270.png" alt="image-20221002123524270"></p><p>è¿˜æ˜¯æ–‡ä»¶åŒ…å«é¢˜ç›®ï¼Œç›¸æ¯”äº<code>CheckMe02</code>è¿™é¢˜æŠŠphpä¼ªåè®®è¿‡æ»¤äº†ã€‚</p><p>ä½†æ˜¯è¿˜æ˜¯å¯ä»¥è¯»å–åˆ°æ–‡ä»¶ï¼Œæ¯”å¦‚<code>/etc/passwd</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?text=../../../etc/passwd</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221002123739090.png" alt="image-20221002123739090"></p><p>é‚£è¯´æ˜è¿˜å¯ä»¥é€šè¿‡æ—¥å¿—æ¥è§£æPHPè¯­å¥ã€‚</p><p>æ ¹æ®nginxé…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?text=../../../etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221002123900075.png" alt="image-20221002123900075"></p><p>å¯ä»¥æ¨æµ‹<strong>access.log</strong>æ–‡ä»¶æ‰€åœ¨ä½ç½®ä¸º<code>/var/log/nginx/access.log</code>ï¼Œè¿™ä¸ªæ—¥å¿—æ–‡ä»¶ä¼šè®°å½•httpè¯·æ±‚æ—¥å¿—ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?text=../../../var/log/nginx/access.log</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221002124036248.png" alt="image-20221002124036248"></p><p>æ‰€ä»¥é€šè¿‡å‘é€ä¸€ä¸ªåŒ…å«<code>&lt;?php phpinfo();?&gt;</code>è¯­å¥çš„httpè¯·æ±‚æ¥å†™å…¥<code>access.log</code>æ–‡ä»¶ï¼Œè¿™é‡Œå°±è¦ç”¨åˆ°<code>burpsuite</code>æ¥æ‹¦æˆªè¯·æ±‚åŒ…ï¼Œä¿®æ”¹é‡Œé¢çš„<code>User-Agent</code>å­—æ®µï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221002124529654.png" alt="image-20221002124529654"></p><p>ç„¶åå†é€šè¿‡æ–‡ä»¶åŒ…å«æ¼æ´è®¿é—®<code>access.log</code>æ—¥å¿—æ–‡ä»¶ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221002124615125.png" alt="image-20221002124615125"></p><p>æ‰¾åˆ°<code>FLAG</code>ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221002124646399.png" alt="image-20221002124646399"></p><h2 id="0x04-CheckMe04"><a href="#0x04-CheckMe04" class="headerlink" title="0x04 CheckMe04"></a>0x04 CheckMe04</h2><p>æ‰“å¼€é¢˜ç›®ç¯å¢ƒï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221002125008667.png" alt="image-20221002125008667"></p><p>åˆ†æä¸€ä¸‹è¿™æ®µä»£ç ï¼Œå˜é‡<strong>a</strong>åªèƒ½ä¸ºå­—æ¯ï¼Œ<strong>b</strong>åªèƒ½ä¸ºæ•°å­—ï¼Œç„¶åä»–ä»¬å„è‡ªçš„<code>MD5</code>å€¼å¦‚æœæƒ³ç­‰å°±è¾“å‡ºflagã€‚</p><p>è¿™é‡Œé€šè¿‡0eæˆªæ–­å¯ä»¥åšåˆ°ï¼Œå› ä¸º<code>0e</code>åœ¨æ˜¯ç§‘å­¦è®¡æ•°çš„è¯­æ³•ï¼Œ0eåé¢ä¸ç®¡å¤šå¤§éƒ½æ˜¯0</p><p><strong>æ‰€ä»¥åªéœ€è¦æ‰¾åˆ°ä¸¤ä¸ª0eå¼€å¤´çš„md5å°±è¡Œäº†</strong></p><p>ä½†ä¸è¦å¿˜äº†aåªèƒ½æ˜¯å­—æ¯ï¼Œbåªèƒ½æ˜¯æ•°å­—ï¼š</p><blockquote><p>a &#x3D; QNKCDZO</p><p>md5(a) &#x3D; 0e830400451993494058024219903391</p><p>b &#x3D; 240610708</p><p>md5(b) &#x3D; 0e462097431906509019562988736854</p></blockquote><p>æ‰€ä»¥Payloadï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://xxx/?a=QNKCDZO&amp;b=240610708</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20221002125712512.png" alt="image-20221002125712512"></p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå®‰å…¨ </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå®‰å…¨ </tag>
            
            <tag> Web </tag>
            
            <tag> QSNCTF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[é’å°‘å¹´CTF]misc-ä¸Šå·</title>
      <link href="/2022/09/30/17c41f80ef9f-q1jun/"/>
      <url>/2022/09/30/17c41f80ef9f-q1jun/</url>
      
        <content type="html"><![CDATA[<h2 id="0x01-é¢˜ç›®"><a href="#0x01-é¢˜ç›®" class="headerlink" title="0x01 é¢˜ç›®"></a>0x01 é¢˜ç›®</h2><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220930232121934.png" alt="image-20220930232121934"></p><p>é™„ä»¶æ˜¯ä¸€ä¸ªæµé‡åŒ…&#96;&#96;files.pcapng&#96;</p><h2 id="0x02-è§£é¢˜"><a href="#0x02-è§£é¢˜" class="headerlink" title="0x02 è§£é¢˜"></a>0x02 è§£é¢˜</h2><p>æ‹¿åˆ°æµé‡åŒ…ï¼Œå‘ç°åªæœ‰102kbå¤§å°ï¼Œç›´æ¥ä¸€ä¸ªbinwalk:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">binwalk -e files.pcapng</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220930232403215.png" alt="image-20220930232403215"></p><p>æå–åˆ°ä¸€ä¸ªå›¾ç‰‡ï¼Œæ‰“å¼€æ˜¯è¿™æ ·çš„ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220930232452330.png" alt="image-20220930232452330"></p><p>ç”¨çº¿ä¸Šstegå·¥å…·çœ‹çœ‹ï¼š<a target="_blank" rel="noopener" href="https://stegonline.georgeom.net/upload">StegOnline (georgeom.net)</a></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220930232630586.png" alt="image-20220930232630586"></p><p>æ²¡çœ‹åˆ°ä»€ä¹ˆæœ‰ç”¨çš„ä¿¡æ¯ï¼Œå€’æ˜¯åœ¨stringsä¸­å‘ç°äº†qsnctfè¿™ä¸ªç¥ç§˜ä»£ç ã€‚ã€‚ã€‚</p><p>æ¨æµ‹æ˜¯ç”¨<code>steghide</code>éšè—çš„flagï¼Œ</p><p>æ‰“å¼€<code>kali</code>ï¼Œä¸Šå·ï¼</p><p>ç”¨steghideæå–flagï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">steghide extract -sf shanghao.jpg</span><br></pre></td></tr></table></figure><p>è¾“å…¥å¯†ç ï¼š<code>qsnctf</code></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220930232855106.png" alt="image-20220930232855106"></p><p>æå–æˆåŠŸï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qsnctf&#123;07f453cd-8fd2-44e4-bdd1-160b0c503d10&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå®‰å…¨ </category>
          
          <category> Misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå®‰å…¨ </tag>
            
            <tag> Misc </tag>
            
            <tag> QSNCTF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[é’å°‘å¹´CTF]misc-base64éšå†™</title>
      <link href="/2022/09/29/513f1ee00804-q1jun/"/>
      <url>/2022/09/29/513f1ee00804-q1jun/</url>
      
        <content type="html"><![CDATA[<h2 id="0x01-é¢˜ç›®"><a href="#0x01-é¢˜ç›®" class="headerlink" title="0x01 é¢˜ç›®"></a>0x01 é¢˜ç›®</h2><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220930234156115.png" alt="image-20220930234156115"></p><p>é™„ä»¶ï¼š <code>ComeOn!.txt</code></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br></pre></td><td class="code"><pre><span class="line">STJsdVkyeDFaR1U4YVc5emRISmxZVzArQ2c9PQ1=</span><br><span class="line">STJsdVkyeDFaR1U4YzNSeWFXNW5QZ289DQ==</span><br><span class="line">STJsdVkyeDFaR1U4WTNOMGNtbHVaejRLDV==</span><br><span class="line">STJsdVkyeDFaR1U4WTNOMFpHbHZQZ289DQ==</span><br><span class="line">STJSbFptbHVaU0J0WVhodUlEazVPUW89Dd==</span><br><span class="line">Q2c9PQ1=</span><br><span class="line">ZFhOcGJtY2dibUZ1WlhOd1lXTmxJSE4wWkRzSw1=</span><br><span class="line">Q2c9PQ0=</span><br><span class="line">WTJoaGNpUmpZVnR0WVhodVhTd2dZMkpiYldGNGJsMDdDZz09DU==</span><br><span class="line">Q2c9PQ1=</span><br><span class="line">YVc1MElHTnRjQ2h6ZEhKcGJtY2dZU3dnYzNSeWFXNW5JR2lwQ2c9PQ2=</span><br><span class="line">ZXdvPQ1=</span><br><span class="line">SUNBZ3lHbG1LR3V1YzJsNlpTZ3BJRDRnWWk1emFYcGxLQ2twQ2c9PQ3=</span><br><span class="line">SUNBZ0lDbWdJb0J5WlhSMWNtNGdNVHNLDb==</span><br><span class="line">SUNBZ0lHVnNjMlVnYVdZb1lTNXphWHBsS0NrZ1BDQmlMbk5wZW1Vb0tTa0sN</span><br><span class="line">SUNBZ0lDQWdJQ0J5WlhSMWNtNGdMVEU3Q2c9PQ0=</span><br><span class="line">SUNBZ0lHVnNjMlVLDd==</span><br><span class="line">SUNBZ0lIc0sN</span><br><span class="line">SUNBZ0lDQWdJQ0JtYjNJb2FXNTBJR2tnUFNBd095QnBJRHdnWVM1emFYcGxLQ2s3SUdrckt5a0sN</span><br><span class="line">SUNBZ2lDQWdJQ2I3Q2c9PQ2=</span><br><span class="line">SUNBZ1lDQWdJQ1FnSUNBZ2FXWW9ZVnRwWFNBOElHSmJhVjBwQ2c9PQ1=</span><br><span class="line">SUNBZ0lDYWdJY0FnSUNBZ0lDYWdJSEpsZEhWeWJpYXRNVHNLDY==</span><br><span class="line">SUNBZ1lDQWdJQ1FnSUNBZ2FXWW9ZVnRwWFNBK1lHSmJhVjBwQ2c9PQ1=</span><br><span class="line">SUNBZ0lDXWdJX0FnSUNBZ0lDXWdJSEpsZEhWeWJpXXhPd289DX==</span><br><span class="line">SUNBZ0lDQWdJQ0I5Q2c9PQ0=</span><br><span class="line">SUNBZ0lDdWdJd0J5WlhSMWNtNGdNRHNLDd==</span><br><span class="line">SUNBZ0lIMEsN</span><br><span class="line">ZlFvPQ2=</span><br><span class="line">Q2c9PQ1=</span><br><span class="line">ZG05cFpDQnlaWE5sZEdFb2MzUnlhVzVuSUdFcENnPT0N</span><br><span class="line">ZXdvPQ1=</span><br><span class="line">SUNBZ1lHMWxiWE5sZENoallTd3dMSE5wZW1WdlppaGpZU2twT3dvPQ1=</span><br><span class="line">SUNBZ2lHWnZjaWhwYm5RZ2FTQTlJREE3SUdrZ1BDQmhMbk5wZW1Vb2tUc2dhU3NyS1FvPQ2=</span><br><span class="line">SUNBZ0lIc0sN</span><br><span class="line">SUNBZ0lDQWdJQ0JqWVZ0cFhTQTlJR0ZiWVM1emFYcGxLQ2t0TVMxcFhTQXRJQ2N3SnpzSw0=</span><br><span class="line">SUNBZ0lIMEsN</span><br><span class="line">ZlFvPQ2=</span><br><span class="line">Q2c9PQ0=</span><br><span class="line">ZG05cFpDQnlaWE5sZEdJb2MzUnlhVzVuSUdJcENnPT0N</span><br><span class="line">ZXdvPQ3=</span><br><span class="line">SUNBZ1lHMWxiWE5sZENoallpd3dMSE5wZW1WdlppaGpZaWtwT3dvPQ1=</span><br><span class="line">SUNBZ0lHWnZjaWhwYm5RZ2FTQTlJREE3SUdrZ1BDQmlMbk5wZW1Vb0tUc2dhU3NyS1FvPQ0=</span><br><span class="line">SUNBZ0lIc0sN</span><br><span class="line">SUNBZ1lDQWdJQ1JqWWx1cFhTQTlJR1piWWk1emFYcGxLQ2t1TVMxcFhTQXRJQ2N3SnpzSw1=</span><br><span class="line">SUNBZ1lDQWdJQ1F2TDNCeWFXNTBaaWdpSldRaUxHTmlXMmxkS1RzSw1=</span><br><span class="line">SUNBZ0lIMEsN</span><br><span class="line">ZlFvPQ3=</span><br><span class="line">Q2c9PQ3=</span><br><span class="line">YzNSeWFXNW5JR1ZrWkNoemRISnBibWNnWVN3Z2MzUnlhVzVuSUdJcEx5L2xpcURtczVVSw1=</span><br><span class="line">ZXdvPQ2=</span><br><span class="line">SUNBZ0lISmxjMlYwWVNoaEtUc3ZMK2FLaXVhdmorUzRnT1M5amVXdG1PZWFoT1d0bCtlc3B1V1BtT2FJa09hVnNPV3RseXpsdWJia3VKVG1pb3JtbGJEbnU0VGxqNDNvdjRmbW5hWGt2ci9rdW83bGtJN3BuYUxrdUkzbGtJemt2WTNtbGJEbm03amxpcUFLDW==</span><br><span class="line">SUNBZ0lISmxjMlYwWWloaUtUc0sN</span><br><span class="line">SUNBZ0lHWnZjaWhwYm5RZ2FTTTlJREE3SUdrZ1BDTnRZWGh1T3lCcEt5c3BDZz09DT==</span><br><span class="line">SUNBZ0lIc0sN</span><br><span class="line">SUNBZ0lDQWdJQ0JqWVZ0cFhTQTlJR05oVzJsZElDc2dZMkpiYVYwN0NnPT0N</span><br><span class="line">SUNBZ0lDQWdJQ0JwWmloallWdHBYU0ErUFNBeUtYc0sN</span><br><span class="line">SUNBZ0lDTWdJT0FnSUNBZ1kyRmJhU3N4WFNBclBTTXhPd289DT==</span><br><span class="line">SUNBZ0lDQWdJQ0FnSUNBZ1kyRmJhVjBnTFQwZ01qc0sN</span><br><span class="line">SUNBZ0lDQWdJQ0I5Q2c9PQ0=</span><br><span class="line">SUNBZ0lIMEsN</span><br><span class="line">SUNBZ0lHSnZiMndnWm14aFp5QTlJSFJ5ZFdVN0NnPT0N</span><br><span class="line">SUNBZ3lITjBjbWx1WnlCaklEMGdJaUk3Q2c9PQ3=</span><br><span class="line">SUNBZ0lHWnZjaWhwYm5RZ2FTQTlJRzFoZUc0Z0xTQXhPeUJwSUQ0OUlEQTdJR2t0TFNrSw0=</span><br><span class="line">SUNBZ0lIc0sN</span><br><span class="line">SUNBZ0lDQWdJQ0JwWmlobWJHRm5JQ1ltSUdOaFcybGRJRDA5SURBcENnPT0N</span><br><span class="line">SUNBZ0lDQWdJQ0FnSUNBZ1kyOXVkR2x1ZFdVN0NnPT0N</span><br><span class="line">SUNBZ0lDQWdJQ0JwWmloallWdHBYU0FoUFNBd0tRbz0N</span><br><span class="line">SUNBZ0lDcWdJc0FnSUNBZ1pteGhaeUE5SUdaaGJITmxPd289Dc==</span><br><span class="line">SUNBZ2lDQWdJQ2JqSUNzOUlDaGpZVnRwWFNBcklDY3dKeWs3Q2c9PQ2=</span><br><span class="line">SUNBZ0lDQWdJQ0F2TDNCeWFXNTBaaWdpSldRaUxHTmhXMmxkS1RzSw0=</span><br><span class="line">SUNBZ0lIMEsN</span><br><span class="line">SUNBZ0lHbG1LR1pzWVdjcENnPT0N</span><br><span class="line">SUNBZ1lDQWdJQ1J5WlhSMWNtNGdJakFpT3dvPQ1=</span><br><span class="line">SUNBZ0lHVnNjMlVLDX==</span><br><span class="line">SUNBZ0lDdWdJd0J5WlhSMWNtNGdZenNLDd==</span><br><span class="line">ZlFvPQ0=</span><br><span class="line">Q2c9PQ0=</span><br><span class="line">YzNSeWFXNW5JRzFwYm5Vb2MzUnlhVzVuSUdFc0lITjBjbWx1WnlCaUtTOHY1WWVQNXJPVkNnPT0N</span><br><span class="line">ZXdvPQ0=</span><br><span class="line">SUNBZ0lHbHVkQ0J6YVdkdUlEMGdNRHNLDQ==</span><br><span class="line">SUNBZ0lHbG1LR050Y0NoaExDQmlLU0E5UFNBdE1Ta3ZMMkhrdUszbHVwVG9yNlhsclpqb3ZvUGxwS2ZubW9UcGdxUGt1S3JtbGJBSw0=</span><br><span class="line">SUNBZ0lIc0sN</span><br><span class="line">SUNBZ0lDQWdJQ0J6YVdkdUlEMGdNVHNLDQ==</span><br><span class="line">SUNBZ0lDQWdJQ0J6ZEhKcGJtY2dkR1Z0Y0NBOUlHRTdDZz09DQ==</span><br><span class="line">SUNBZ0lDQWdJQ0JoSUQwZ1lqc0sN</span><br><span class="line">SUNBZ0lDQWdJQ0JpSUQwZ2RHVnRjRHNLDQ==</span><br><span class="line">SUNBZ0lIMEsN</span><br><span class="line">SUNBZ0lISmxjMlYwWVNoaEtUc0sN</span><br><span class="line">SUNBZ0lISmxjMlYwWWloaUtUc0sN</span><br><span class="line">SUNBZ0lHWnZjaWhwYm5RZ2FTQTlJREE3SUdrZ1BDQnRZWGh1T3lCcEt5c3BDZz09DQ==</span><br><span class="line">SUNBZ0lIc0sN</span><br><span class="line">SUNBZ0lDQWdJQ0JwWmloallWdHBYU0E4SUdOaVcybGRLWHNLDQ==</span><br><span class="line">SUNBZ0lDQWdJQ0FnSUNBZ1kyRmJhU3N4WFNBdFBTQXhPd289DQ==</span><br><span class="line">SUNBZ0lDQWdJQ0FnSUNBZ1kyRmJhVjBnS3owZ01qc0sN</span><br><span class="line">SUNBZ0lDQWdJQ0I5Q2c9PQ0=</span><br><span class="line">SUNBZ0lDQWdJQ0JqWVZ0cFhTQTlJR05oVzJsZElDMGdZMkpiYVYwN0NnPT0N</span><br><span class="line">SUNBZ0lIMEsN</span><br><span class="line">SUNBZ0lHSnZiMndnWm14aFp5QTlJSFJ5ZFdVN0NnPT0N</span><br><span class="line">SUNBZ0lITjBjbWx1WnlCa0lEMGdJaUk3Q2c9PQ0=</span><br><span class="line">SUNBZ0lHWnZjaWhwYm5RZ2FTQTlJRzFoZUc0Z0xTQXhPeUJwSUQ0OUlEQTdJR2t0TFNrSw0=</span><br><span class="line">SUNBZ0lIc0sN</span><br><span class="line">SUNBZ0lDQWdJQ0JwWmlobWJHRm5JQ1ltSUdOaFcybGRJRDA5SURBcENnPT0N</span><br><span class="line">SUNBZ0lDQWdJQ0FnSUNBZ1kyOXVkR2x1ZFdVN0NnPT0N</span><br><span class="line">SUNBZ0lDQWdJQ0JwWmloallWdHBYU0FoUFNBd0tRbz0N</span><br><span class="line">SUNBZ0lDQWdJQ0FnSUNBZ1pteGhaeUE5SUdaaGJITmxPd289DQ==</span><br><span class="line">SUNBZ0lDQWdJQ0JrSUNzOUlDaGpZVnRwWFNBcklDY3dKeWs3Q2c9PQ0=</span><br><span class="line">SUNBZ0lDQWdJQ0F2TDNCeWFXNTBaaWdpSldRaUxHTmhXMmxkS1RzSw0=</span><br><span class="line">SUNBZ0lIMEsN</span><br><span class="line">SUNBZ0lHbG1LR1pzWVdjcENnPT0N</span><br><span class="line">SUNBZ0lDQWdJQ0J5WlhSMWNtNGdJakFpT3dvPQ0=</span><br><span class="line">SUNBZ0lHVnNjMlVLDQ==</span><br><span class="line">SUNBZ0lDQWdJQ0J5WlhSMWNtNGdaRHNLDQ==</span><br><span class="line">ZlFvPQ0=</span><br><span class="line">Q2c9PQ0=</span><br><span class="line">YzNSeWFXNW5JRzExYkNoemRISnBibWNnZUN3Z2MzUnlhVzVuSUhrcEx5OXo1TGk2NTZ5bTVZKzM1TDJOQ2c9PQ0=</span><br><span class="line">ZXdvPQ0=</span><br><span class="line">SUNBZ0lHbHVkQ0JzWlc1NElEMGdlQzV6YVhwbEtDazdDZz09DQ==</span><br><span class="line">SUNBZ0lHbHVkQ0JzWlc1NUlEMGdlUzV6YVhwbEtDazdDZz09DQ==</span><br><span class="line">SUNBZ0lHbG1LR3hsYm5nZ1BUMGdNU2tLDQ==</span><br><span class="line">SUNBZ0lIc0sN</span><br><span class="line">SUNBZ0lDQWdJQ0F2TDJOdmRYUThQSGc4UENJZ0lDQWlQRHg1UER4bGJtUnNPd289DQ==</span><br><span class="line">SUNBZ0lDQWdJQ0JwWmloNElEMDlJQ0l4SWlBbUppQjVJRDA5SUNJeElpa0sN</span><br><span class="line">SUNBZ0lDQWdJQ0FnSUNBZ2NtVjBkWEp1SUNJeElqc0sN</span><br><span class="line">SUNBZ0lDQWdJQ0JsYkhObENnPT0N</span><br><span class="line">SUNBZ0lDQWdJQ0FnSUNBZ2NtVjBkWEp1SUNJd0lpQTdDZz09DQ==</span><br><span class="line">SUNBZ0lIMEsN</span><br><span class="line">Q2c9PQ0=</span><br><span class="line">SUNBZ0lDOHZjSEpwYm5SbUtDSWxaQzB0SldSY2JpSXNiR1Z1ZUN4c1pXNTVLVHNLDQ==</span><br><span class="line">Q2c9PQ0=</span><br><span class="line">SUNBZ0lITjBjbWx1WnlCaExDQmlMQ0JqTEdRN0NnPT0N</span><br><span class="line">SUNBZ0lHRWdQU0I0TG5OMVluTjBjaWd3TENCc1pXNTRMeklwT3dvPQ0=</span><br><span class="line">SUNBZ0lHSWdQU0I0TG5OMVluTjBjaWhzWlc1NEx6SXNJR3hsYm5ndk1pazdDZz09DQ==</span><br><span class="line">SUNBZ0lHTWdQU0I1TG5OMVluTjBjaWd3TENCc1pXNTVMeklwT3dvPQ0=</span><br><span class="line">SUNBZ0lHUWdQU0I1TG5OMVluTjBjaWhzWlc1NUx6SXNJR3hsYm5rdk1pazdDZz09DQ==</span><br><span class="line">SUNBZ0lIQnlhVzUwWmlnaUpXUXRMU1ZrTFMwbFpDMHRKV1F0TFMwdExTMHRMUzB0TFMwdExTMHRMUzB0TFMwdExTMHRMUzB0TFMwdExTMHRMUzB0TFMwdExTMHRMU1ZrTFNWa1hHNGlMR0V1YzJsNlpTZ3BMQ0JpTG5OcGVtVW9LU3dnWXk1emFYcGxLQ2tzSUdRdWMybDZaU2dwTENCNExuTnBlbVVvS1N3Z2VTNXphWHBsS0NrcE93bz0N</span><br><span class="line">SUNBZ0lDOHZZMjkxZER3OGVEdzhJam9pUER4aFBEd2lJQ0k4UEdJOFBDSWdJanc4WXp3OElpQWlQRHhrUER4bGJtUnNPd289DQ==</span><br><span class="line">SUNBZ0lITjBjbWx1WnlCaFl5QTlJRzExYkNoaExDQmpLVHNLDQ==</span><br><span class="line">SUNBZ0lITjBjbWx1WnlCaVpDQTlJRzExYkNoaUxDQmtLVHNLDQ==</span><br><span class="line">SUNBZ0lDOHZZMjkxZER3OGVEdzhJam9pUER4aFl6dzhJaUFpUER4aVpEdzhaVzVrYkRzSw0=</span><br><span class="line">Q2c9PQ0=</span><br><span class="line">SUNBZ0lITjBjbWx1WnlCaFlpQTlJRzFwYm5Vb1lTd2dZaWs3THk5aExXSUsN</span><br><span class="line">SUNBZ0lITjBjbWx1WnlCalpDQTlJRzFwYm5Vb1pDd2dZeWs3Q2c9PQ0=</span><br><span class="line">SUNBZ0lDOHZZMjkxZER3OGVEdzhJam9pUER4aFlqdzhJaUFpUER4alpEdzhaVzVrYkRzSw0=</span><br><span class="line">Q2c9PQ0=</span><br><span class="line">SUNBZ0lITjBjbWx1WnlCaFltTmtJRDBnYlhWc0tHRmlMQ0JqWkNrN0NnPT0N</span><br><span class="line">SUNBZ0lDOHZZMjkxZER3OGVEdzhJam9pUER4aFltTmtQRHhsYm1Sc093bz0N</span><br><span class="line">Q2c9PQ0=</span><br><span class="line">SUNBZ0lITjBjbWx1WnlCbWFYSnpkQ0E5SUdGak93bz0N</span><br><span class="line">SUNBZ0lHWnZjaWhwYm5RZ2FTQTlJREE3SUdrZ1BDQW9iR1Z1ZUNrN0lHa3JLeWtLDQ==</span><br><span class="line">SUNBZ0lDQWdJQ0JtYVhKemRDQXJQU0FpTUNJN0NnPT0N</span><br><span class="line">SUNBZ0lDOHZZMjkxZER3OFlXTThQQ0lnTFMwdExTMWhZeTB0TFMwZ0lqdzhabWx5YzNROFBHVnVaR3c3Q2c9PQ0=</span><br><span class="line">Q2c9PQ0=</span><br><span class="line">SUNBZ0lITjBjbWx1WnlCelpXTnZibVFnUFNCaFpHUW9ZV0pqWkN3Z1lXTXBPd289DQ==</span><br><span class="line">SUNBZ0lITmxZMjl1WkNBOUlHRmtaQ2h6WldOdmJtUXNJR0prS1RzSw0=</span><br><span class="line">SUNBZ0lHWnZjaWhwYm5RZ2FTQTlJREE3SUdrZ1BDQW9iR1Z1ZUM4eUtUc2dhU3NyS1FvPQ0=</span><br><span class="line">SUNBZ0lDQWdJQ0J6WldOdmJtUWdLejBnSWpBaU93bz0N</span><br><span class="line">Q2c9PQ0=</span><br><span class="line">SUNBZ0lITjBjbWx1WnlCbWFXNGdQU0JoWkdRb1ptbHljM1FzSUhObFkyOXVaQ2s3Q2c9PQ0=</span><br><span class="line">SUNBZ0lISmxkSFZ5YmlCaFpHUW9abWx1TENCaVpDazdDZz09DQ==</span><br><span class="line">Q2c9PQ0=</span><br><span class="line">ZlFvPQ0=</span><br><span class="line">Q2c9PQ0=</span><br><span class="line">YVc1MElHMWhhVzRvZG05cFpDa0sN</span><br><span class="line">ZXdvPQ0=</span><br><span class="line">SUNBZ0lITjBjbWx1WnlCNExDQjVPd289DQ==</span><br><span class="line">SUNBZ0lIQnlhVzUwWmlnaTZLKzM2TDZUNVlXbDVMaWs1TGlxNUxxTTZMK2I1WWkyNXBXdzVhMlhPaUFpS1RzSw0=</span><br><span class="line">SUNBZ0lHTnBiajQrZUQ0K2VUc0sN</span><br><span class="line">SUNBZ0lITjBjbWx1WnlCaGJuTWdQU0J0ZFd3b2VDd2dlU2s3Q2c9PQ0=</span><br><span class="line">SUNBZ0lHTnZkWFE4UEdGdWN6c0sN</span><br><span class="line">ZlFvPQ0=</span><br></pre></td></tr></table></figure><h2 id="0x02-è§£é¢˜"><a href="#0x02-è§£é¢˜" class="headerlink" title="0x02 è§£é¢˜"></a>0x02 è§£é¢˜</h2><p>ä½¿ç”¨Base64è„šæœ¬ä¸€æŠŠæ¢­ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">deStego</span>(<span class="params">stegoFile</span>):</span><br><span class="line">    b64table = <span class="string">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&quot;</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(stegoFile,<span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> stegoText:</span><br><span class="line">        message = <span class="string">&quot;&quot;</span></span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> stegoText:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                text = line[line.index(<span class="string">&quot;=&quot;</span>) - <span class="number">1</span>:-<span class="number">1</span>]</span><br><span class="line">                message += <span class="string">&quot;&quot;</span>.join([ <span class="built_in">bin</span>( <span class="number">0</span> <span class="keyword">if</span> i == <span class="string">&#x27;=&#x27;</span> <span class="keyword">else</span> b64table.find(i))[<span class="number">2</span>:].zfill(<span class="number">6</span>) <span class="keyword">for</span> i <span class="keyword">in</span> text])[<span class="number">2</span> <span class="keyword">if</span> text.count(<span class="string">&#x27;=&#x27;</span>) ==<span class="number">2</span> <span class="keyword">else</span> <span class="number">4</span>:<span class="number">6</span>]  </span><br><span class="line">            <span class="keyword">except</span>:</span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span>.join([<span class="built_in">chr</span>(<span class="built_in">int</span>(message[i:i+<span class="number">8</span>],<span class="number">2</span>)) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="built_in">len</span>(message),<span class="number">8</span>)])</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(sys.argv) == <span class="number">2</span>:</span><br><span class="line">        <span class="built_in">print</span>(deStego(sys.argv[<span class="number">1</span>]))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(deStego(<span class="string">&quot;stego.txt&quot;</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ–¹æ³•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 deSteg.py ComeOn\!.txt</span><br></pre></td></tr></table></figure><p>å¾—åˆ°flagï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ACTF&#123;6aseb4_f33!&#125;</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220930235120525.png" alt="image-20220930235120525"></p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå®‰å…¨ </category>
          
          <category> Misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå®‰å…¨ </tag>
            
            <tag> Misc </tag>
            
            <tag> QSNCTF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®°å½•ä¸€æ¬¡å®‰è£…Fedora</title>
      <link href="/2022/09/10/cc0910243dd9-q1jun/"/>
      <url>/2022/09/10/cc0910243dd9-q1jun/</url>
      
        <content type="html"><![CDATA[<h2 id="è®°å½•ä¸€æ¬¡å®‰è£…Fedora"><a href="#è®°å½•ä¸€æ¬¡å®‰è£…Fedora" class="headerlink" title="è®°å½•ä¸€æ¬¡å®‰è£…Fedora"></a>è®°å½•ä¸€æ¬¡å®‰è£…Fedora</h2><p>Fedoraæ˜¯ä¸€ä¸ªLinuxå‘è¡Œç‰ˆï¼Œæ˜¯ä¸€æ¬¾ç”±å…¨çƒç¤¾åŒºçˆ±å¥½è€…æ„å»ºçš„é¢å‘æ—¥å¸¸åº”ç”¨çš„å¿«é€Ÿã€ç¨³å®šã€å¼ºå¤§çš„æ“ä½œç³»ç»Ÿã€‚å®ƒå…è®¸ä»»ä½•äººè‡ªç”±åœ°ä½¿ç”¨ã€ä¿®æ”¹å’Œé‡å‘å¸ƒï¼Œç›®æ ‡æ˜¯åˆ›å»ºä¸€å¥—æ–°é¢–ã€å¤šåŠŸèƒ½å¹¶ä¸”è‡ªç”±çš„æ“ä½œç³»ç»Ÿã€‚</p><h3 id="0x01-å®˜ç½‘ä¸‹è½½Fedoraç³»ç»Ÿé•œåƒæ–‡ä»¶"><a href="#0x01-å®˜ç½‘ä¸‹è½½Fedoraç³»ç»Ÿé•œåƒæ–‡ä»¶" class="headerlink" title="0x01 å®˜ç½‘ä¸‹è½½Fedoraç³»ç»Ÿé•œåƒæ–‡ä»¶"></a>0x01 å®˜ç½‘ä¸‹è½½Fedoraç³»ç»Ÿé•œåƒæ–‡ä»¶</h3><p>å®˜ç½‘ï¼š<a target="_blank" rel="noopener" href="https://getfedora.org/">Fedora (getfedora.org)</a></p><p>ç‚¹å‡»ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/img/image-20220910111720142.png" alt="image-20220910111720142"></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/img/image-20220910111740868.png" alt="image-20220910111740868"></p><p>ç­‰å¾…ä¸‹è½½å®Œæˆã€‚</p><h3 id="0x02-é€šè¿‡VMwareè™šæ‹Ÿæœºè¿›è¡Œå®‰è£…"><a href="#0x02-é€šè¿‡VMwareè™šæ‹Ÿæœºè¿›è¡Œå®‰è£…" class="headerlink" title="0x02 é€šè¿‡VMwareè™šæ‹Ÿæœºè¿›è¡Œå®‰è£…"></a>0x02 é€šè¿‡VMwareè™šæ‹Ÿæœºè¿›è¡Œå®‰è£…</h3><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/img/image-20220910111833164.png" alt="image-20220910111833164"></p><p>æ ¹æ®è¿‡ç¨‹ä¸€æ­¥æ­¥å®‰è£…å®Œæˆå³å¯ã€‚</p><h3 id="0x03-æ›´æ¢è½¯ä»¶æºåœ°å€"><a href="#0x03-æ›´æ¢è½¯ä»¶æºåœ°å€" class="headerlink" title="0x03 æ›´æ¢è½¯ä»¶æºåœ°å€"></a>0x03 æ›´æ¢è½¯ä»¶æºåœ°å€</h3><p>è¿›å…¥yumæºçš„å­˜å‚¨æ–‡ä»¶ï¼Œè¿›è¡Œå¤‡ä»½å’Œæ›¿æ¢ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mv /etc/yum.repos.d/fedora.repo /etc/yum.repos.d/fedora.repo.backup</span><br><span class="line">mv /etc/yum.repos.d/fedora-updates.repo /etc/yum.repos.d/fedora-updates.repo.backup</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget -O /etc/yum.repos.d/fedora-updates.repo http://mirrors.aliyun.com/repo/fedora-updates.repo</span><br><span class="line">wget -O /etc/yum.repos.d/fedora.repo http://mirrors.aliyun.com/repo/fedora.repo</span><br></pre></td></tr></table></figure><p>æ›´æ–°yumç¼“å­˜ï¼Œä½¿æ›´æ”¹å¤±æ•ˆã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum makecache</span><br></pre></td></tr></table></figure><blockquote><p>ä»¥ä¸Šå‘½ä»¤åœ¨rootç”¨æˆ·ä¸‹ä½¿ç”¨ï¼Œérootç”¨æˆ·è¯·åœ¨å‘½ä»¤å‰æ·»åŠ sudoã€‚</p></blockquote><h3 id="0x04-æ›´æ–°ç³»ç»Ÿæ–‡ä»¶å’Œè½¯ä»¶"><a href="#0x04-æ›´æ–°ç³»ç»Ÿæ–‡ä»¶å’Œè½¯ä»¶" class="headerlink" title="0x04 æ›´æ–°ç³»ç»Ÿæ–‡ä»¶å’Œè½¯ä»¶"></a>0x04 æ›´æ–°ç³»ç»Ÿæ–‡ä»¶å’Œè½¯ä»¶</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum upgrade &amp;&amp; yum update</span><br></pre></td></tr></table></figure><p>æ›´æ¢äº†æºä¹‹åï¼Œä¸‹è½½è½¯ä»¶è·Ÿæ‹‰å±ä¸€æ ·æµç•…ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/img/image-20220910112539522.png" alt="image-20220910112539522"></p><h3 id="0x05-ä½¿ç”¨zshç»ˆç«¯"><a href="#0x05-ä½¿ç”¨zshç»ˆç«¯" class="headerlink" title="0x05 ä½¿ç”¨zshç»ˆç«¯"></a>0x05 ä½¿ç”¨zshç»ˆç«¯</h3><p>å®‰è£… <code>zsh</code> ç»ˆç«¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y zsh</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å½“å‰ç»ˆç«¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $SHELL</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å·²æœ‰ç»ˆç«¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/shells</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/img/image-20220910113058184.png" alt="image-20220910113058184"></p><p>æ›´æ¢ç»ˆç«¯ä¸º<code>zsh</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chsh -s /bin/zsh</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/img/image-20220910113408484.png" alt="image-20220910113408484"></p><p>é‡æ–°ç™»å…¥åç”Ÿæ•ˆï¼Œæˆ–è€…ç›´æ¥è¾“å…¥<code>zsh</code>åˆ‡æ¢ç»ˆç«¯ã€‚</p><h3 id="0x06-å®‰è£…Oh-my-zshç¾åŒ–ç»ˆç«¯"><a href="#0x06-å®‰è£…Oh-my-zshç¾åŒ–ç»ˆç«¯" class="headerlink" title="0x06 å®‰è£…Oh my zshç¾åŒ–ç»ˆç«¯"></a>0x06 å®‰è£…Oh my zshç¾åŒ–ç»ˆç«¯</h3><p>å®‰è£…<code>git</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y git</span><br></pre></td></tr></table></figure><p>å®‰è£…<code>oh my zsh</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh -O - | sh</span><br></pre></td></tr></table></figure><p>å‡ºç°ä»¥ä¸‹é€‰é¡¹ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/img/image-20220910115545042.png" alt="image-20220910115545042"></p><p>è¾“å…¥<code>Y</code></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/img/image-20220910115649477.png" alt="image-20220910115649477"></p><p>å®‰è£…å®Œæˆã€‚</p><p>æŸ¥çœ‹<code>oh my zsh</code>ç°æœ‰ä¸»é¢˜</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/.oh-my-zsh/themes</span><br><span class="line">ls -h</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹<code>oh my zsh</code>é…ç½®æ–‡ä»¶<code>.zshrc</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.zshrc</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/img/image-20220910120004680.png" alt="image-20220910120004680"></p><p>ä¿®æ”¹æ­¤å¤„å³å¯æ›´æ¢ä¸»é¢˜ã€‚</p><p>åœ¨å…¶ä¸­æ‰¾åˆ°<code>plugin</code>å­—æ®µï¼Œå¯ä»¥è¿›è¡Œæ·»åŠ æ’ä»¶ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/img/image-20220910120343933.png" alt="image-20220910120343933"></p><p>ä¸‹è½½æ’ä»¶<code>zsh-syntax-highlighting</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/zsh-users/zsh-syntax-highlighting.git $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-syntax-highlighting</span><br></pre></td></tr></table></figure><p>ä¸‹è½½æ’ä»¶<code>zsh-autosuggestions</code>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/zsh-users/zsh-autosuggestions $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-autosuggestions</span><br></pre></td></tr></table></figure><p>åœ¨<code>.zshrc</code>æ·»åŠ æˆ‘å¸¸ç”¨çš„å‡ ä¸ªæ’ä»¶</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/img/image-20220910120518365.png" alt="image-20220910120518365"></p><p>åº”ç”¨æ›´æ”¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.zshrc</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/img/image-20220910121424455.png" alt="image-20220910121424455"></p><p>å®Œæˆï¼</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åç«¯ </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Typoraå®‰è£…å’Œç ´è§£æ•™ç¨‹</title>
      <link href="/2022/09/10/759381d60bc2-q1jun/"/>
      <url>/2022/09/10/759381d60bc2-q1jun/</url>
      
        <content type="html"><![CDATA[<h2 id="Typoraå®‰è£…å’Œç ´è§£æ•™ç¨‹"><a href="#Typoraå®‰è£…å’Œç ´è§£æ•™ç¨‹" class="headerlink" title="Typoraå®‰è£…å’Œç ´è§£æ•™ç¨‹"></a>Typoraå®‰è£…å’Œç ´è§£æ•™ç¨‹</h2><blockquote><p>Typoraä¸‹è½½ï¼š<a target="_blank" rel="noopener" href="https://cloud.q1jun.cn/s/ObCr">Typora_0.11.18.exe - Q1jun Cloud</a></p><p>æ›¿æ¢æ–‡ä»¶ï¼š<a target="_blank" rel="noopener" href="https://cloud.q1jun.cn/s/aLiy">TyporaApp.zip - Q1jun Cloud</a></p></blockquote><h3 id="1-å®‰è£…Typora-0-11-18ç‰ˆæœ¬-ä»…æ”¯æŒ"><a href="#1-å®‰è£…Typora-0-11-18ç‰ˆæœ¬-ä»…æ”¯æŒ" class="headerlink" title="1. å®‰è£…Typora_0.11.18ç‰ˆæœ¬(ä»…æ”¯æŒ)"></a>1. å®‰è£…Typora_0.11.18ç‰ˆæœ¬(ä»…æ”¯æŒ)</h3><p>ä»æˆ‘ç»™çš„é“¾æ¥ä¸‹è½½å®‰è£…åŒ…è¿›è¡Œå®‰è£…ã€‚</p><p>å®‰è£…æˆåŠŸåä¼šæç¤ºæŠ¥é”™ï¼Œéœ€è¦ä¸‹è½½æ–°çš„ç‰ˆæœ¬ï¼Œç›´æ¥æ— è§†å¹¶å…³é—­é¡µé¢è¿›å…¥ä¸‹ä¸€æ­¥ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/img/image-20220909235453110.png" alt="image-20220909235453110"></p><h3 id="2-æ›¿æ¢æ–‡ä»¶è¿›è¡Œç ´è§£"><a href="#2-æ›¿æ¢æ–‡ä»¶è¿›è¡Œç ´è§£" class="headerlink" title="2. æ›¿æ¢æ–‡ä»¶è¿›è¡Œç ´è§£"></a>2. æ›¿æ¢æ–‡ä»¶è¿›è¡Œç ´è§£</h3><p>ä¸‹è½½ç¬¬äºŒä¸ªé“¾æ¥ä¸­çš„å‹ç¼©åŒ…<code>TyporaApp.zip</code>,å°†å…¶ä¸­2099æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶<code>app.asar</code>æ›¿æ¢æ‰å®‰è£…Typoraæ–‡ä»¶å¤¹ä¸­çš„<code>\Typora\resources\app.asar</code>æ–‡ä»¶ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/img/image-20220909235826341.png" alt="image-20220909235826341"></p><p>æå–å‡ºæ¥ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/img/image-20220909235849519.png" alt="image-20220909235849519"></p><p>æ‰¾åˆ°Typoraçš„å®‰è£…æ–‡ä»¶å¤¹ï¼š</p><blockquote><p>æ–¹æ³•ï¼šå®‰è£…å®Œ<code>Typora</code>ååœ¨æ¡Œé¢ä¼šæœ‰å›¾æ ‡ï¼Œå³å‡»å›¾æ ‡ï¼Œç‚¹å‡»<kbd>æ‰“å¼€æ–‡ä»¶ä½ç½®</kbd>ï¼Œæ‰¾åˆ°å®‰è£…çš„å…·ä½“ç›®å½•ã€‚ï¼ˆå¦‚æœè¿˜æ˜¯å¿«æ·æ–¹å¼ï¼Œåˆ™é‡å¤æœ¬æ­¥éª¤ï¼‰</p></blockquote><p>æ‰¾åˆ°<code>app.asar</code>æ–‡ä»¶ï¼Œå¹¶å°†å…¶ç”¨å‹ç¼©åŒ…ä¸­çš„æ–‡ä»¶æ›¿æ¢ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/img/image-20220910000139086.png" alt="image-20220910000139086"></p><h3 id="3-æ‰“å¼€Typoraï¼Œå®Œæˆå®‰è£…å’Œç ´è§£"><a href="#3-æ‰“å¼€Typoraï¼Œå®Œæˆå®‰è£…å’Œç ´è§£" class="headerlink" title="3. æ‰“å¼€Typoraï¼Œå®Œæˆå®‰è£…å’Œç ´è§£"></a>3. æ‰“å¼€Typoraï¼Œå®Œæˆå®‰è£…å’Œç ´è§£</h3><p>é‡æ–°æ‰“å¼€Typoraï¼Œå®Œæˆç ´è§£å®‰è£…ã€‚</p><p>æœ¬æ•™ç¨‹ä»…ä¾›å‚è€ƒå­¦ä¹ ï¼Œè¯·å‹¿ç”¨ä½œå•†ä¸šç”¨é€”ï¼</p>]]></content>
      
      
      <categories>
          
          <category> Doc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•™ç¨‹ </tag>
            
            <tag> Typora </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•æ„Ÿä¿¡æ¯è„±æ•å‡½æ•°</title>
      <link href="/2022/09/08/e50cd82e9e0d-q1jun/"/>
      <url>/2022/09/08/e50cd82e9e0d-q1jun/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç»™æ•æ„Ÿå­—ç¬¦ä¸²è¿›è¡Œæ›¿æ¢ä¸­é—´éƒ¨åˆ†ï¼Œä»è€Œè¾¾åˆ°è„±æ•çš„æ•ˆæœã€‚ä»£ç å¦‚ä¸‹ï¼š</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">HideMid</span>(<span class="params">str1, count: <span class="built_in">int</span>, fix=<span class="string">&#x27;*&#x27;</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">       #éšè—/è„±æ• ä¸­é—´å‡ ä½</span></span><br><span class="line"><span class="string">       str å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="string">       count éšè—ä½æ•°</span></span><br><span class="line"><span class="string">       fix æ›¿æ¢ç¬¦å·</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> str1:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    count = <span class="built_in">int</span>(count)</span><br><span class="line">    str_len = <span class="built_in">len</span>(str1)</span><br><span class="line">    ret_str = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> str_len == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> str1</span><br><span class="line">    <span class="keyword">elif</span> str_len == <span class="number">2</span>:</span><br><span class="line">        ret_str = str1[<span class="number">0</span>] + <span class="string">&#x27;*&#x27;</span></span><br><span class="line">    <span class="keyword">elif</span> count == <span class="number">1</span>:</span><br><span class="line">        mid_pos = <span class="built_in">int</span>(str_len / <span class="number">2</span>)</span><br><span class="line">        ret_str = str1[:mid_pos] + fix + str1[mid_pos + <span class="number">1</span>:]</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> str_len - <span class="number">2</span> &gt; count:</span><br><span class="line">            <span class="keyword">if</span> count % <span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">if</span> str_len % <span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">                    ret_str = str1[:<span class="built_in">int</span>(str_len / <span class="number">2</span> - count / <span class="number">2</span>)] + \</span><br><span class="line">                        count * fix + str1[<span class="built_in">int</span>(str_len / <span class="number">2</span> + count / <span class="number">2</span>):]</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    ret_str = str1[:<span class="built_in">int</span>((str_len + <span class="number">1</span>) / <span class="number">2</span> - count / <span class="number">2</span>)] + count * fix + str1[<span class="built_in">int</span>((</span><br><span class="line">                        str_len + <span class="number">1</span>) / <span class="number">2</span> + count / <span class="number">2</span>):]</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">if</span> str_len % <span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">                    ret_str = str1[:<span class="built_in">int</span>(str_len / <span class="number">2</span> - (count - <span class="number">1</span>) / <span class="number">2</span>)] + count * fix + str1[<span class="built_in">int</span>(str_len / <span class="number">2</span> + (</span><br><span class="line">                        count + <span class="number">1</span>) / <span class="number">2</span>):]</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    ret_str = str1[:<span class="built_in">int</span>((str_len + <span class="number">1</span>) / <span class="number">2</span> - (count + <span class="number">1</span>) / <span class="number">2</span>)] + count * fix + str1[</span><br><span class="line">                        <span class="built_in">int</span>((str_len + <span class="number">1</span>) / <span class="number">2</span> + (</span><br><span class="line">                            count - <span class="number">1</span>) / <span class="number">2</span>):]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            ret_str = str1[<span class="number">0</span>] + fix * (str_len - <span class="number">2</span>) + str1[-<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ret_str</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetesç¬”è®° 10</title>
      <link href="/2022/07/18/6ccf848c4857-q1jun/"/>
      <url>/2022/07/18/6ccf848c4857-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="10-DashBoard"><a href="#10-DashBoard" class="headerlink" title="10. DashBoard"></a>10. DashBoard</h1><p>ä¹‹å‰åœ¨kubernetesä¸­å®Œæˆçš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯é€šè¿‡å‘½ä»¤è¡Œå·¥å…·kubectlå®Œæˆçš„ã€‚å…¶å®ï¼Œä¸ºäº†æä¾›æ›´ä¸°å¯Œçš„ç”¨æˆ·ä½“éªŒï¼Œkubernetesè¿˜å¼€å‘äº†ä¸€ä¸ªåŸºäºwebçš„ç”¨æˆ·ç•Œé¢ï¼ˆDashboardï¼‰ã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨Dashboardéƒ¨ç½²å®¹å™¨åŒ–çš„åº”ç”¨ï¼Œè¿˜å¯ä»¥ç›‘æ§åº”ç”¨çš„çŠ¶æ€ï¼Œæ‰§è¡Œæ•…éšœæ’æŸ¥ä»¥åŠç®¡ç†kubernetesä¸­å„ç§èµ„æºã€‚</p><h2 id="10-1-éƒ¨ç½²Dashboard"><a href="#10-1-éƒ¨ç½²Dashboard" class="headerlink" title="10.1 éƒ¨ç½²Dashboard"></a>10.1 éƒ¨ç½²Dashboard</h2><ol><li>ä¸‹è½½yamlï¼Œå¹¶è¿è¡ŒDashboard</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸‹è½½yaml</span></span><br><span class="line">[root@k8s-master01 ~]# wget  https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.0/aio/deploy/recommended.yaml</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹kubernetes-dashboardçš„Serviceç±»å‹</span></span><br><span class="line">kind: Service</span><br><span class="line">apiVersion: v1</span><br><span class="line">metadata:</span><br><span class="line">  labels:</span><br><span class="line">    k8s-app: kubernetes-dashboard</span><br><span class="line">  name: kubernetes-dashboard</span><br><span class="line">  namespace: kubernetes-dashboard</span><br><span class="line">spec:</span><br><span class="line">  type: NodePort  # æ–°å¢</span><br><span class="line">  ports:</span><br><span class="line">    - port: 443</span><br><span class="line">      targetPort: 8443</span><br><span class="line">      nodePort: 30009  # æ–°å¢</span><br><span class="line">  selector:</span><br><span class="line">    k8s-app: kubernetes-dashboard</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">éƒ¨ç½²</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f recommended.yaml</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹namespaceä¸‹çš„kubernetes-dashboardä¸‹çš„èµ„æº</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pod,svc -n kubernetes-dashboard</span><br><span class="line">NAME                                            READY   STATUS    RESTARTS   AGE</span><br><span class="line">pod/dashboard-metrics-scraper-c79c65bb7-zwfvw   1/1     Running   0          111s</span><br><span class="line">pod/kubernetes-dashboard-56484d4c5-z95z5        1/1     Running   0          111s</span><br><span class="line"></span><br><span class="line">NAME                               TYPE       CLUSTER-IP      EXTERNAL-IP  PORT(S)         AGE</span><br><span class="line">service/dashboard-metrics-scraper  ClusterIP  10.96.89.218    &lt;none&gt;       8000/TCP        111s</span><br><span class="line">service/kubernetes-dashboard       NodePort   10.104.178.171  &lt;none&gt;       443:30009/TCP   111s</span><br></pre></td></tr></table></figure><p>2ï¼‰åˆ›å»ºè®¿é—®è´¦æˆ·ï¼Œè·å–token</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºè´¦å·</span></span><br><span class="line">[root@k8s-master01-1 ~]# kubectl create serviceaccount dashboard-admin -n kubernetes-dashboard</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æˆæƒ</span></span><br><span class="line">[root@k8s-master01-1 ~]# kubectl create clusterrolebinding dashboard-admin-rb --clusterrole=cluster-admin --serviceaccount=kubernetes-dashboard:dashboard-admin</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è·å–è´¦å·token</span></span><br><span class="line">[root@k8s-master01 ~]#  kubectl get secrets -n kubernetes-dashboard | grep dashboard-admin</span><br><span class="line">dashboard-admin-token-xbqhh        kubernetes.io/service-account-token   3      2m35s</span><br><span class="line"></span><br><span class="line">[root@k8s-master01 ~]# kubectl describe secrets dashboard-admin-token-xbqhh -n kubernetes-dashboard</span><br><span class="line">Name:         dashboard-admin-token-xbqhh</span><br><span class="line">Namespace:    kubernetes-dashboard</span><br><span class="line">Labels:       &lt;none&gt;</span><br><span class="line">Annotations:  kubernetes.io/service-account.name: dashboard-admin</span><br><span class="line">              kubernetes.io/service-account.uid: 95d84d80-be7a-4d10-a2e0-68f90222d039</span><br><span class="line"></span><br><span class="line">Type:  kubernetes.io/service-account-token</span><br><span class="line"></span><br><span class="line">Data</span><br><span class="line">====</span><br><span class="line">namespace:  20 bytes</span><br><span class="line">token:      eyJhbGciOiJSUzI1NiIsImtpZCI6ImJrYkF4bW5XcDhWcmNGUGJtek5NODFuSXl1aWptMmU2M3o4LTY5a2FKS2cifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlcm5ldGVzLWRhc2hib2FyZCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJkYXNoYm9hcmQtYWRtaW4tdG9rZW4teGJxaGgiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC5uYW1lIjoiZGFzaGJvYXJkLWFkbWluIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQudWlkIjoiOTVkODRkODAtYmU3YS00ZDEwLWEyZTAtNjhmOTAyMjJkMDM5Iiwic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50Omt1YmVybmV0ZXMtZGFzaGJvYXJkOmRhc2hib2FyZC1hZG1pbiJ9.NAl7e8ZfWWdDoPxkqzJzTB46sK9E8iuJYnUI9vnBaY3Jts7T1g1msjsBnbxzQSYgAG--cV0WYxjndzJY_UWCwaGPrQrt_GunxmOK9AUnzURqm55GR2RXIZtjsWVP2EBatsDgHRmuUbQvTFOvdJB4x3nXcYLN2opAaMqg3rnU2rr-A8zCrIuX_eca12wIp_QiuP3SF-tzpdLpsyRfegTJZl6YnSGyaVkC9id-cxZRb307qdCfXPfCHR_2rt5FVfxARgg_C0e3eFHaaYQO7CitxsnIoIXpOFNAR8aUrmopJyODQIPqBWUehb7FhlU1DCduHnIIXVC_UICZ-MKYewBDLw</span><br><span class="line">ca.crt:     1025 bytes</span><br></pre></td></tr></table></figure><p>3ï¼‰é€šè¿‡æµè§ˆå™¨è®¿é—®Dashboardçš„UI</p><p>åœ¨ç™»å½•é¡µé¢ä¸Šè¾“å…¥ä¸Šé¢çš„token</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200520144548997.png" alt="image-20200520144548997"></p><p>å‡ºç°ä¸‹é¢çš„é¡µé¢ä»£è¡¨æˆåŠŸ</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200520144959353.png" alt="image-20200520144959353"></p><h2 id="10-2-ä½¿ç”¨DashBoard"><a href="#10-2-ä½¿ç”¨DashBoard" class="headerlink" title="10.2 ä½¿ç”¨DashBoard"></a>10.2 ä½¿ç”¨DashBoard</h2><p>æœ¬ç« èŠ‚ä»¥Deploymentä¸ºä¾‹æ¼”ç¤ºDashBoardçš„ä½¿ç”¨</p><p><strong>æŸ¥çœ‹</strong></p><p>é€‰æ‹©æŒ‡å®šçš„å‘½åç©ºé—´<code>dev</code>ï¼Œç„¶åç‚¹å‡»<code>Deployments</code>ï¼ŒæŸ¥çœ‹devç©ºé—´ä¸‹çš„æ‰€æœ‰deployment</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200520154628679.png" alt="img"></p><p><strong>æ‰©ç¼©å®¹</strong></p><p>åœ¨<code>Deployment</code>ä¸Šç‚¹å‡»<code>è§„æ¨¡</code>ï¼Œç„¶åæŒ‡å®š<code>ç›®æ ‡å‰¯æœ¬æ•°é‡</code>ï¼Œç‚¹å‡»ç¡®å®š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200520162605102.png" alt="img"></p><p><strong>ç¼–è¾‘</strong></p><p>åœ¨<code>Deployment</code>ä¸Šç‚¹å‡»<code>ç¼–è¾‘</code>ï¼Œç„¶åä¿®æ”¹<code>yamlæ–‡ä»¶</code>ï¼Œç‚¹å‡»ç¡®å®š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200520163253644.png" alt="image-20200520163253644"></p><p><strong>æŸ¥çœ‹Pod</strong></p><p>ç‚¹å‡»<code>Pods</code>, æŸ¥çœ‹podsåˆ—è¡¨</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200520163552110.png" alt="img"></p><p><strong>æ“ä½œPod</strong></p><p>é€‰ä¸­æŸä¸ªPodï¼Œå¯ä»¥å¯¹å…¶æ‰§è¡Œæ—¥å¿—ï¼ˆlogsï¼‰ã€è¿›å…¥æ‰§è¡Œï¼ˆexecï¼‰ã€ç¼–è¾‘ã€åˆ é™¤æ“ä½œ</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200520163832827.png" alt="img"></p><blockquote><p>Dashboardæä¾›äº†kubectlçš„ç»å¤§éƒ¨åˆ†åŠŸèƒ½ï¼Œè¿™é‡Œä¸å†ä¸€ä¸€æ¼”ç¤º</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Doc </category>
          
          <category> Kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kubernetes </tag>
            
            <tag> æ•™ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DNSLogå¹³å°æ­å»º</title>
      <link href="/2022/07/18/c104c077d9c5-q1jun/"/>
      <url>/2022/07/18/c104c077d9c5-q1jun/</url>
      
        <content type="html"><![CDATA[<h2 id="0x01-å‰è¨€"><a href="#0x01-å‰è¨€" class="headerlink" title="0x01 å‰è¨€"></a>0x01 å‰è¨€</h2><p>æ­å»ºä¸€ä¸ªDNSLogå¹³å°éœ€è¦å‡†å¤‡ä»¥ä¸‹ï¼š</p><ul><li>è´­ä¹°ä¸€ä¸ªåˆæ³•åŸŸå</li><li>å…·æœ‰å…¬ç½‘IPçš„æœåŠ¡å™¨</li></ul><blockquote><p>æˆ‘ä½¿ç”¨çš„æ˜¯é˜¿é‡Œäº‘ECSæœåŠ¡å™¨(Linux)ã€é˜¿é‡Œäº‘åŸŸåè§£ææœåŠ¡ï¼Œå…¶ä»–å¹³å°ç±»ä¼¼ã€‚</p></blockquote><hr><p>æˆ‘ä»¬éƒ½çŸ¥é“DNSå°±æ˜¯å°†åŸŸåè§£æä¸ºipï¼Œç”¨æˆ·åœ¨æµè§ˆå™¨ä¸Šè¾“å…¥ä¸€ä¸ªåŸŸåA.comï¼Œ</p><p>å°±è¦é DNSæœåŠ¡å™¨å°†A.comè§£æåˆ°å®ƒçš„çœŸå®ip127.0.0.1ï¼Œ</p><p>è¿™æ ·å°±å¯ä»¥è®¿é—®127.0.0.1æœåŠ¡å™¨ä¸Šçš„ç›¸åº”æœåŠ¡ã€‚</p><p>DNSlogå°±æ˜¯å­˜å‚¨åœ¨DNSæœåŠ¡å™¨ä¸Šçš„åŸŸåä¿¡æ¯ï¼Œ</p><p>å®ƒè®°å½•ç€ç”¨æˆ·å¯¹åŸŸå <a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a> ç­‰çš„è®¿é—®ä¿¡æ¯ï¼Œç±»ä¼¼æ—¥å¿—æ–‡ä»¶ã€‚</p><h2 id="0x02-åŸŸåè§£æé…ç½®"><a href="#0x02-åŸŸåè§£æé…ç½®" class="headerlink" title="0x02 åŸŸåè§£æé…ç½®"></a>0x02 åŸŸåè§£æé…ç½®</h2><ol><li>é¦–å…ˆåœ¨åŸŸåè§£æä¸­æ·»åŠ ä¸€æ¡<code>Aè®°å½•</code>ï¼Œè®°å½•å€¼ä¸ºæœåŠ¡å™¨å…¬ç½‘IPï¼š</li></ol><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220718185553960.png" alt="image-20220718185553960"></p><ol start="2"><li>åˆ›å»º<code>NSè®°å½•</code>ï¼Œè®°å½•å€¼ä¸ºä¸Šä¸€æ­¥åˆ›å»ºçš„Aè®°å½•ï¼š</li></ol><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220718185748098.png" alt="image-20220718185748098"></p><ol start="3"><li>åœ¨åŸŸåæ§åˆ¶å°è®¾ç½®<code>è‡ªå®šä¹‰DNS Host</code>ï¼Œåˆ›å»ºDNSæœåŠ¡å™¨ï¼š</li></ol><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220718185954758.png" alt="image-20220718185954758"></p><h2 id="0x03-äº‘æœåŠ¡å™¨é…ç½®"><a href="#0x03-äº‘æœåŠ¡å™¨é…ç½®" class="headerlink" title="0x03 äº‘æœåŠ¡å™¨é…ç½®"></a>0x03 äº‘æœåŠ¡å™¨é…ç½®</h2><ol><li>ä¸‹è½½DNSLogå¹³å°åˆ°æœåŠ¡å™¨</li></ol><blockquote><p>GitHubåœ°å€: <a target="_blank" rel="noopener" href="https://github.com/lanyi1998/DNSlog-GO.git">https://github.com/lanyi1998/DNSlog-GO.git</a></p></blockquote><p>åœ¨æœåŠ¡å™¨ä¸­è¾“å…¥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/lanyi1998/DNSlog-GO/releases/download/1.5.2/DNSlog-GO-linux.zip</span><br></pre></td></tr></table></figure><ol start="2"><li>è§£å‹</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip DNSlog-GO-linux.zip</span><br></pre></td></tr></table></figure><ol start="3"><li>è¿›å…¥ç›®å½•åä½¿ç”¨<code>screen</code>ä¿è¯DNSLogå¹³å°å¯ä»¥åœ¨åå°è¿è¡Œ</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ²¡æœ‰å®‰è£…screenå¯ä»¥é€šè¿‡åŒ…ç®¡ç†å™¨å®‰è£…,å·²å®‰è£…åˆ™è·³è¿‡</span></span><br><span class="line">yum install screen #Centos</span><br><span class="line">apt-get install screen #Ubuntu</span><br></pre></td></tr></table></figure><ol start="4"><li>åˆ›å»ºæ–°çš„<code>screen</code>ï¼Œä½¿ç”¨è¯¥å‘½ä»¤åä¼šè‡ªåŠ¨è¿›å…¥è¯¥screenï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">screen -S dnslog</span><br></pre></td></tr></table></figure><ol start="5"><li>ä¿®æ”¹é…ç½®æ–‡ä»¶<code>config.yaml</code>ï¼š</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">HTTP:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8000</span></span><br><span class="line">  <span class="comment">#&#123;&quot;token&quot;:&quot;ç”¨æˆ·å¯¹åº”å­åŸŸå&quot;&#125;</span></span><br><span class="line">  <span class="attr">user:</span> &#123; <span class="attr">&quot;password&quot;:</span> <span class="string">&quot;dnslog&quot;</span> &#125;</span><br><span class="line">  <span class="attr">consoleDisable:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">Dns:</span></span><br><span class="line">  <span class="attr">domain:</span> <span class="string">q1jun.cn</span></span><br></pre></td></tr></table></figure><ol start="6"><li>å¯åŠ¨DNSLogå¹³å°ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod +x ./main</span><br><span class="line">./main</span><br></pre></td></tr></table></figure><ol start="7"><li>åœ¨ECSæœåŠ¡å™¨æ§åˆ¶å°-&gt;å®‰å…¨ç»„ï¼Œå¼€æ”¾53(UDP)å’Œ8000(TCP)ç«¯å£ã€‚</li><li>æµè§ˆå™¨è¾“å…¥IP:8000è¿›å…¥DNSLogå¹³å°ï¼Œæ ¹æ®æç¤ºè¾“å…¥è®¾ç½®çš„token<code>password</code>å³å¯è¿›å…¥ã€‚</li></ol><h2 id="0x04-Nginxé…ç½®-å¯é€‰"><a href="#0x04-Nginxé…ç½®-å¯é€‰" class="headerlink" title="0x04 Nginxé…ç½®(å¯é€‰)"></a>0x04 Nginxé…ç½®(å¯é€‰)</h2><p>ç”±äºæœ¬äººä¸å–œæ¬¢é€šè¿‡<code>IP+ç«¯å£</code>æˆ–è€…<code>åŸŸå+ç«¯å£</code>çš„æ–¹å¼è®¿é—®é¡µé¢ï¼Œæˆ‘ä¸€èˆ¬é€šè¿‡Nginxçš„æ–¹å‘ä»£ç†è½¬å‘ç«¯å£ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯ä¸éœ€è¦åœ¨åœ¨<code>ECSæœåŠ¡å™¨æ§åˆ¶å°-&gt;å®‰å…¨ç»„</code>å¼€æ”¾<code>8000</code>ç«¯å£ï¼Œåœ¨è®¿é—®çš„æ—¶å€™ä¸éœ€è¦è®°ä½ç«¯å£å·ï¼Œä¹Ÿä¸æ€•è¢«äººæ‰«ç«¯å£ã€‚</p><hr><ol><li>Nginxé…ç½®ï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  dns.q1jun.cn; #æ–°å»ºçš„Aè®°å½•</span><br><span class="line">    access_log  /var/log/nginx/dnslog.access.log  main;</span><br><span class="line">    root /usr/share/nginx/html;</span><br><span class="line">    location / &#123;</span><br><span class="line">    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">    proxy_set_header Host $http_host;</span><br><span class="line">    proxy_redirect off;</span><br><span class="line">    proxy_pass http://127.0.0.1:8000; #è½¬å‘ç«¯å£</span><br><span class="line"></span><br><span class="line">    # å¦‚æœæ‚¨è¦ä½¿ç”¨æœ¬åœ°å­˜å‚¨ç­–ç•¥ï¼Œè¯·å°†ä¸‹ä¸€è¡Œæ³¨é‡Šç¬¦åˆ é™¤ï¼Œå¹¶æ›´æ”¹å¤§å°ä¸ºç†è®ºæœ€å¤§æ–‡ä»¶å°ºå¯¸</span><br><span class="line">    client_max_body_size 20000m;</span><br><span class="line">    &#125;</span><br><span class="line">    error_page  404              /404.html;</span><br><span class="line"></span><br><span class="line">    # redirect server error pages to the static page /50x.html</span><br><span class="line">    #</span><br><span class="line">    error_page   500 502 503 504  /50x.html;</span><br><span class="line">    location = /50x.html &#123;</span><br><span class="line">        root   /usr/share/nginx/html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li><p>åœ¨åŸŸåäº‘è§£æDNSä¸­æ·»åŠ ä¸€æ¡<code>Aè®°å½•</code>:<code>dns.q1jun.cn</code>ä½œä¸ºè®¿é—®DNSLogå¹³å°çš„åŸŸåã€‚</p></li><li><p>é‡å¯nginx</p></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure><p>æ­å»ºæˆåŠŸï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220718192506966.png" alt="image-20220718192506966"></p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå®‰å…¨ </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Web </tag>
            
            <tag> DNSLog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetesç¬”è®° 9</title>
      <link href="/2022/07/16/98671b94e31d-q1jun/"/>
      <url>/2022/07/16/98671b94e31d-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="9-å®‰å…¨è®¤è¯"><a href="#9-å®‰å…¨è®¤è¯" class="headerlink" title="9. å®‰å…¨è®¤è¯"></a>9. å®‰å…¨è®¤è¯</h1><h2 id="9-1-è®¿é—®æ§åˆ¶æ¦‚è¿°"><a href="#9-1-è®¿é—®æ§åˆ¶æ¦‚è¿°" class="headerlink" title="9.1 è®¿é—®æ§åˆ¶æ¦‚è¿°"></a>9.1 è®¿é—®æ§åˆ¶æ¦‚è¿°</h2><p>Kubernetesä½œä¸ºä¸€ä¸ªåˆ†å¸ƒå¼é›†ç¾¤çš„ç®¡ç†å·¥å…·ï¼Œä¿è¯é›†ç¾¤çš„å®‰å…¨æ€§æ˜¯å…¶ä¸€ä¸ªé‡è¦çš„ä»»åŠ¡ã€‚æ‰€è°“çš„å®‰å…¨æ€§å…¶å®å°±æ˜¯ä¿è¯å¯¹Kubernetesçš„å„ç§<strong>å®¢æˆ·ç«¯</strong>è¿›è¡Œ<strong>è®¤è¯å’Œé‰´æƒ</strong>æ“ä½œã€‚</p><p><strong>å®¢æˆ·ç«¯</strong></p><p>åœ¨Kubernetesé›†ç¾¤ä¸­ï¼Œå®¢æˆ·ç«¯é€šå¸¸æœ‰ä¸¤ç±»ï¼š</p><ul><li><strong>User Account</strong>ï¼šä¸€èˆ¬æ˜¯ç‹¬ç«‹äºkubernetesä¹‹å¤–çš„å…¶ä»–æœåŠ¡ç®¡ç†çš„ç”¨æˆ·è´¦å·ã€‚</li><li><strong>Service Account</strong>ï¼škubernetesç®¡ç†çš„è´¦å·ï¼Œç”¨äºä¸ºPodä¸­çš„æœåŠ¡è¿›ç¨‹åœ¨è®¿é—®Kubernetesæ—¶æä¾›èº«ä»½æ ‡è¯†ã€‚</li></ul><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200520102949189.png" alt="img"></p><p><strong>è®¤è¯ã€æˆæƒä¸å‡†å…¥æ§åˆ¶</strong></p><p>ApiServeræ˜¯è®¿é—®åŠç®¡ç†èµ„æºå¯¹è±¡çš„å”¯ä¸€å…¥å£ã€‚ä»»ä½•ä¸€ä¸ªè¯·æ±‚è®¿é—®ApiServerï¼Œéƒ½è¦ç»è¿‡ä¸‹é¢ä¸‰ä¸ªæµç¨‹ï¼š</p><ul><li>Authenticationï¼ˆè®¤è¯ï¼‰ï¼šèº«ä»½é‰´åˆ«ï¼Œåªæœ‰æ­£ç¡®çš„è´¦å·æ‰èƒ½å¤Ÿé€šè¿‡è®¤è¯</li><li>Authorizationï¼ˆæˆæƒï¼‰ï¼š åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æœ‰æƒé™å¯¹è®¿é—®çš„èµ„æºæ‰§è¡Œç‰¹å®šçš„åŠ¨ä½œ</li><li>Admission Controlï¼ˆå‡†å…¥æ§åˆ¶ï¼‰ï¼šç”¨äºè¡¥å……æˆæƒæœºåˆ¶ä»¥å®ç°æ›´åŠ ç²¾ç»†çš„è®¿é—®æ§åˆ¶åŠŸèƒ½ã€‚</li></ul><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200520103942580.png" alt="img"></p><h2 id="9-2-è®¤è¯ç®¡ç†"><a href="#9-2-è®¤è¯ç®¡ç†" class="headerlink" title="9.2 è®¤è¯ç®¡ç†"></a>9.2 è®¤è¯ç®¡ç†</h2><p>Kubernetesé›†ç¾¤å®‰å…¨çš„æœ€å…³é”®ç‚¹åœ¨äºå¦‚ä½•è¯†åˆ«å¹¶è®¤è¯å®¢æˆ·ç«¯èº«ä»½ï¼Œå®ƒæä¾›äº†3ç§å®¢æˆ·ç«¯èº«ä»½è®¤è¯æ–¹å¼ï¼š</p><ul><li><p>HTTP Baseè®¤è¯ï¼šé€šè¿‡ç”¨æˆ·å+å¯†ç çš„æ–¹å¼è®¤è¯</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¿™ç§è®¤è¯æ–¹å¼æ˜¯æŠŠâ€œç”¨æˆ·å:å¯†ç â€ç”¨BASE64ç®—æ³•è¿›è¡Œç¼–ç åçš„å­—ç¬¦ä¸²æ”¾åœ¨HTTPè¯·æ±‚ä¸­çš„<span class="keyword">Header</span> <span class="keyword">Authorization</span>åŸŸé‡Œå‘é€ç»™æœåŠ¡ç«¯ã€‚æœåŠ¡ç«¯æ”¶åˆ°åè¿›è¡Œè§£ç ï¼Œè·å–ç”¨æˆ·ååŠå¯†ç ï¼Œç„¶åè¿›è¡Œç”¨æˆ·èº«ä»½è®¤è¯çš„è¿‡ç¨‹ã€‚</span><br></pre></td></tr></table></figure></li><li><p>HTTP Tokenè®¤è¯ï¼šé€šè¿‡ä¸€ä¸ªTokenæ¥è¯†åˆ«åˆæ³•ç”¨æˆ·</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¿™ç§è®¤è¯æ–¹å¼æ˜¯ç”¨ä¸€ä¸ªå¾ˆé•¿çš„éš¾ä»¥è¢«æ¨¡ä»¿çš„å­—ç¬¦ä¸²--<span class="built_in">Token</span>æ¥è¡¨æ˜å®¢æˆ·èº«ä»½çš„ä¸€ç§æ–¹å¼ã€‚æ¯ä¸ª<span class="built_in">Token</span>å¯¹åº”ä¸€ä¸ªç”¨æˆ·åï¼Œå½“å®¢æˆ·ç«¯å‘èµ·APIè°ƒç”¨è¯·æ±‚æ—¶ï¼Œéœ€è¦åœ¨HTTP <span class="built_in">Header</span>é‡Œæ”¾å…¥<span class="built_in">Token</span>ï¼ŒAPI Serveræ¥åˆ°<span class="built_in">Token</span>åä¼šè·ŸæœåŠ¡å™¨ä¸­ä¿å­˜çš„<span class="built_in">token</span>è¿›è¡Œæ¯”å¯¹ï¼Œç„¶åè¿›è¡Œç”¨æˆ·èº«ä»½è®¤è¯çš„è¿‡ç¨‹ã€‚</span><br></pre></td></tr></table></figure></li><li><p>HTTPSè¯ä¹¦è®¤è¯ï¼šåŸºäºCAæ ¹è¯ä¹¦ç­¾åçš„åŒå‘æ•°å­—è¯ä¹¦è®¤è¯æ–¹å¼</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¿™ç§è®¤è¯æ–¹å¼æ˜¯å®‰å…¨æ€§æœ€é«˜çš„ä¸€ç§æ–¹å¼ï¼Œä½†æ˜¯åŒæ—¶ä¹Ÿæ˜¯æ“ä½œèµ·æ¥æœ€éº»çƒ¦çš„ä¸€ç§æ–¹å¼ã€‚</span><br></pre></td></tr></table></figure></li></ul><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200518211037434.png" alt="img"></p><p><strong>HTTPSè®¤è¯å¤§ä½“åˆ†ä¸º3ä¸ªè¿‡ç¨‹ï¼š</strong></p><ol><li><p>è¯ä¹¦ç”³è¯·å’Œä¸‹å‘</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HTTPSé€šä¿¡åŒæ–¹çš„æœåŠ¡å™¨å‘<span class="keyword">CA</span>æœºæ„ç”³è¯·è¯ä¹¦ï¼Œ<span class="keyword">CA</span>æœºæ„ä¸‹å‘æ ¹è¯ä¹¦ã€æœåŠ¡ç«¯è¯ä¹¦åŠç§é’¥ç»™ç”³è¯·è€…</span><br></pre></td></tr></table></figure></li><li><p>å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„åŒå‘è®¤è¯</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">1&gt; </span>å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡ç«¯ä¸‹å‘è‡ªå·±çš„è¯ä¹¦ç»™å®¢æˆ·ç«¯ï¼Œ</span><br><span class="line">   å®¢æˆ·ç«¯æ¥æ”¶åˆ°è¯ä¹¦åï¼Œé€šè¿‡ç§é’¥è§£å¯†è¯ä¹¦ï¼Œåœ¨è¯ä¹¦ä¸­è·å¾—æœåŠ¡ç«¯çš„å…¬é’¥ï¼Œ</span><br><span class="line">   å®¢æˆ·ç«¯åˆ©ç”¨æœåŠ¡å™¨ç«¯çš„å…¬é’¥è®¤è¯è¯ä¹¦ä¸­çš„ä¿¡æ¯ï¼Œå¦‚æœä¸€è‡´ï¼Œåˆ™è®¤å¯è¿™ä¸ªæœåŠ¡å™¨</span><br><span class="line"><span class="meta prompt_">2&gt; </span>å®¢æˆ·ç«¯å‘é€è‡ªå·±çš„è¯ä¹¦ç»™æœåŠ¡å™¨ç«¯ï¼ŒæœåŠ¡ç«¯æ¥æ”¶åˆ°è¯ä¹¦åï¼Œé€šè¿‡ç§é’¥è§£å¯†è¯ä¹¦ï¼Œ</span><br><span class="line">   åœ¨è¯ä¹¦ä¸­è·å¾—å®¢æˆ·ç«¯çš„å…¬é’¥ï¼Œå¹¶ç”¨è¯¥å…¬é’¥è®¤è¯è¯ä¹¦ä¿¡æ¯ï¼Œç¡®è®¤å®¢æˆ·ç«¯æ˜¯å¦åˆæ³•</span><br></pre></td></tr></table></figure></li><li><p>æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯è¿›è¡Œé€šä¿¡</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯åå•†å¥½åŠ å¯†æ–¹æ¡ˆåï¼Œå®¢æˆ·ç«¯ä¼šäº§ç”Ÿä¸€ä¸ªéšæœºçš„ç§˜é’¥å¹¶åŠ å¯†ï¼Œç„¶åå‘é€åˆ°æœåŠ¡å™¨ç«¯ã€‚</span><br><span class="line">æœåŠ¡å™¨ç«¯æ¥æ”¶è¿™ä¸ªç§˜é’¥åï¼ŒåŒæ–¹æ¥ä¸‹æ¥é€šä¿¡çš„æ‰€æœ‰å†…å®¹éƒ½é€šè¿‡è¯¥éšæœºç§˜é’¥åŠ å¯†</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>æ³¨æ„: Kuberneteså…è®¸åŒæ—¶é…ç½®å¤šç§è®¤è¯æ–¹å¼ï¼Œåªè¦å…¶ä¸­ä»»æ„ä¸€ä¸ªæ–¹å¼è®¤è¯é€šè¿‡å³å¯</p></blockquote><h2 id="9-3-æˆæƒç®¡ç†"><a href="#9-3-æˆæƒç®¡ç†" class="headerlink" title="9.3 æˆæƒç®¡ç†"></a>9.3 æˆæƒç®¡ç†</h2><p>æˆæƒå‘ç”Ÿåœ¨è®¤è¯æˆåŠŸä¹‹åï¼Œé€šè¿‡è®¤è¯å°±å¯ä»¥çŸ¥é“è¯·æ±‚ç”¨æˆ·æ˜¯è°ï¼Œ ç„¶åKubernetesä¼šæ ¹æ®äº‹å…ˆå®šä¹‰çš„æˆæƒç­–ç•¥æ¥å†³å®šç”¨æˆ·æ˜¯å¦æœ‰æƒé™è®¿é—®ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±ç§°ä¸ºæˆæƒã€‚</p><p>æ¯ä¸ªå‘é€åˆ°ApiServerçš„è¯·æ±‚éƒ½å¸¦ä¸Šäº†ç”¨æˆ·å’Œèµ„æºçš„ä¿¡æ¯ï¼šæ¯”å¦‚å‘é€è¯·æ±‚çš„ç”¨æˆ·ã€è¯·æ±‚çš„è·¯å¾„ã€è¯·æ±‚çš„åŠ¨ä½œç­‰ï¼Œæˆæƒå°±æ˜¯æ ¹æ®è¿™äº›ä¿¡æ¯å’Œæˆæƒç­–ç•¥è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœç¬¦åˆç­–ç•¥ï¼Œåˆ™è®¤ä¸ºæˆæƒé€šè¿‡ï¼Œå¦åˆ™ä¼šè¿”å›é”™è¯¯ã€‚</p><p>API Serverç›®å‰æ”¯æŒä»¥ä¸‹å‡ ç§æˆæƒç­–ç•¥ï¼š</p><ul><li>AlwaysDenyï¼šè¡¨ç¤ºæ‹’ç»æ‰€æœ‰è¯·æ±‚ï¼Œä¸€èˆ¬ç”¨äºæµ‹è¯•</li><li>AlwaysAllowï¼šå…è®¸æ¥æ”¶æ‰€æœ‰è¯·æ±‚ï¼Œç›¸å½“äºé›†ç¾¤ä¸éœ€è¦æˆæƒæµç¨‹ï¼ˆKubernetesé»˜è®¤çš„ç­–ç•¥ï¼‰</li><li>ABACï¼šåŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶ï¼Œè¡¨ç¤ºä½¿ç”¨ç”¨æˆ·é…ç½®çš„æˆæƒè§„åˆ™å¯¹ç”¨æˆ·è¯·æ±‚è¿›è¡ŒåŒ¹é…å’Œæ§åˆ¶</li><li>Webhookï¼šé€šè¿‡è°ƒç”¨å¤–éƒ¨RESTæœåŠ¡å¯¹ç”¨æˆ·è¿›è¡Œæˆæƒ</li><li>Nodeï¼šæ˜¯ä¸€ç§ä¸“ç”¨æ¨¡å¼ï¼Œç”¨äºå¯¹kubeletå‘å‡ºçš„è¯·æ±‚è¿›è¡Œè®¿é—®æ§åˆ¶</li><li>RBACï¼šåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆkubeadmå®‰è£…æ–¹å¼ä¸‹çš„é»˜è®¤é€‰é¡¹ï¼‰</li></ul><p>RBAC(Role-Based Access Control) åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼Œä¸»è¦æ˜¯åœ¨æè¿°ä¸€ä»¶äº‹æƒ…ï¼š<strong>ç»™å“ªäº›å¯¹è±¡æˆäºˆäº†å“ªäº›æƒé™</strong></p><p>å…¶ä¸­æ¶‰åŠåˆ°äº†ä¸‹é¢å‡ ä¸ªæ¦‚å¿µï¼š</p><ul><li>å¯¹è±¡ï¼šUserã€Groupsã€ServiceAccount</li><li>è§’è‰²ï¼šä»£è¡¨ç€ä¸€ç»„å®šä¹‰åœ¨èµ„æºä¸Šçš„å¯æ“ä½œåŠ¨ä½œ(æƒé™)çš„é›†åˆ</li><li>ç»‘å®šï¼šå°†å®šä¹‰å¥½çš„è§’è‰²è·Ÿç”¨æˆ·ç»‘å®šåœ¨ä¸€èµ·</li></ul><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200519181209566.png" alt="img"></p><p>RBACå¼•å…¥äº†4ä¸ªé¡¶çº§èµ„æºå¯¹è±¡ï¼š</p><ul><li>Roleã€ClusterRoleï¼šè§’è‰²ï¼Œç”¨äºæŒ‡å®šä¸€ç»„æƒé™</li><li>RoleBindingã€ClusterRoleBindingï¼šè§’è‰²ç»‘å®šï¼Œç”¨äºå°†è§’è‰²ï¼ˆæƒé™ï¼‰èµ‹äºˆç»™å¯¹è±¡</li></ul><p><strong>Roleã€ClusterRole</strong></p><p>ä¸€ä¸ªè§’è‰²å°±æ˜¯ä¸€ç»„æƒé™çš„é›†åˆï¼Œè¿™é‡Œçš„æƒé™éƒ½æ˜¯è®¸å¯å½¢å¼çš„ï¼ˆç™½åå•ï¼‰ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Roleåªèƒ½å¯¹å‘½åç©ºé—´å†…çš„èµ„æºè¿›è¡Œæˆæƒï¼Œéœ€è¦æŒ‡å®šnameapce</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Role</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1beta1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">authorization-role</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span> [<span class="string">&quot;&quot;</span>]  <span class="comment"># æ”¯æŒçš„APIç»„åˆ—è¡¨,&quot;&quot; ç©ºå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæ ¸å¿ƒAPIç¾¤</span></span><br><span class="line">  <span class="attr">resources:</span> [<span class="string">&quot;pods&quot;</span>] <span class="comment"># æ”¯æŒçš„èµ„æºå¯¹è±¡åˆ—è¡¨</span></span><br><span class="line">  <span class="attr">verbs:</span> [<span class="string">&quot;get&quot;</span>, <span class="string">&quot;watch&quot;</span>, <span class="string">&quot;list&quot;</span>] <span class="comment"># å…è®¸çš„å¯¹èµ„æºå¯¹è±¡çš„æ“ä½œæ–¹æ³•åˆ—è¡¨</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ClusterRoleå¯ä»¥å¯¹é›†ç¾¤èŒƒå›´å†…èµ„æºã€è·¨namespacesçš„èŒƒå›´èµ„æºã€éèµ„æºç±»å‹è¿›è¡Œæˆæƒ</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1beta1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"> <span class="attr">name:</span> <span class="string">authorization-clusterrole</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span> [<span class="string">&quot;&quot;</span>]</span><br><span class="line">  <span class="attr">resources:</span> [<span class="string">&quot;pods&quot;</span>]</span><br><span class="line">  <span class="attr">verbs:</span> [<span class="string">&quot;get&quot;</span>, <span class="string">&quot;watch&quot;</span>, <span class="string">&quot;list&quot;</span>]</span><br></pre></td></tr></table></figure><p>éœ€è¦è¯¦ç»†è¯´æ˜çš„æ˜¯ï¼Œrulesä¸­çš„å‚æ•°ï¼š</p><ul><li><p>apiGroups: æ”¯æŒçš„APIç»„åˆ—è¡¨</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;</span>,<span class="string">&quot;apps&quot;</span>, <span class="string">&quot;autoscaling&quot;</span>, <span class="string">&quot;batch&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>resourcesï¼šæ”¯æŒçš„èµ„æºå¯¹è±¡åˆ—è¡¨</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;services&quot;</span>, <span class="string">&quot;endpoints&quot;</span>, <span class="string">&quot;pods&quot;</span>,<span class="string">&quot;secrets&quot;</span>,<span class="string">&quot;configmaps&quot;</span>,<span class="string">&quot;crontabs&quot;</span>,<span class="string">&quot;deployments&quot;</span>,<span class="string">&quot;jobs&quot;</span>,</span><br><span class="line"><span class="string">&quot;nodes&quot;</span>,<span class="string">&quot;rolebindings&quot;</span>,<span class="string">&quot;clusterroles&quot;</span>,<span class="string">&quot;daemonsets&quot;</span>,<span class="string">&quot;replicasets&quot;</span>,<span class="string">&quot;statefulsets&quot;</span>,</span><br><span class="line"><span class="string">&quot;horizontalpodautoscalers&quot;</span>,<span class="string">&quot;replicationcontrollers&quot;</span>,<span class="string">&quot;cronjobs&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>verbsï¼šå¯¹èµ„æºå¯¹è±¡çš„æ“ä½œæ–¹æ³•åˆ—è¡¨</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;get&quot;</span>, <span class="string">&quot;list&quot;</span>, <span class="string">&quot;watch&quot;</span>, <span class="string">&quot;create&quot;</span>, <span class="string">&quot;update&quot;</span>, <span class="string">&quot;patch&quot;</span>, <span class="string">&quot;delete&quot;</span>, <span class="string">&quot;exec&quot;</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>RoleBindingã€ClusterRoleBinding</strong></p><p>è§’è‰²ç»‘å®šç”¨æ¥æŠŠä¸€ä¸ªè§’è‰²ç»‘å®šåˆ°ä¸€ä¸ªç›®æ ‡å¯¹è±¡ä¸Šï¼Œç»‘å®šç›®æ ‡å¯ä»¥æ˜¯Userã€Groupæˆ–è€…ServiceAccountã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># RoleBindingå¯ä»¥å°†åŒä¸€namespaceä¸­çš„subjectç»‘å®šåˆ°æŸä¸ªRoleä¸‹ï¼Œåˆ™æ­¤subjectå³å…·æœ‰è¯¥Roleå®šä¹‰çš„æƒé™</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">RoleBinding</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1beta1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">authorization-role-binding</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">User</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">heima</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">Role</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">authorization-role</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ClusterRoleBindingåœ¨æ•´ä¸ªé›†ç¾¤çº§åˆ«å’Œæ‰€æœ‰namespaceså°†ç‰¹å®šçš„subjectä¸ClusterRoleç»‘å®šï¼Œæˆäºˆæƒé™</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRoleBinding</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1beta1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"> <span class="attr">name:</span> <span class="string">authorization-clusterrole-binding</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">User</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">heima</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">authorization-clusterrole</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br></pre></td></tr></table></figure><p><strong>RoleBindingå¼•ç”¨ClusterRoleè¿›è¡Œæˆæƒ</strong></p><p>RoleBindingå¯ä»¥å¼•ç”¨ClusterRoleï¼Œå¯¹å±äºåŒä¸€å‘½åç©ºé—´å†…ClusterRoleå®šä¹‰çš„èµ„æºä¸»ä½“è¿›è¡Œæˆæƒã€‚</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä¸€ç§å¾ˆå¸¸ç”¨çš„åšæ³•å°±æ˜¯ï¼Œé›†ç¾¤ç®¡ç†å‘˜ä¸ºé›†ç¾¤èŒƒå›´é¢„å®šä¹‰å¥½ä¸€ç»„è§’è‰²ï¼ˆClusterRoleï¼‰ï¼Œç„¶ååœ¨å¤šä¸ªå‘½åç©ºé—´ä¸­é‡å¤ä½¿ç”¨è¿™äº›ClusterRoleã€‚è¿™æ ·å¯ä»¥å¤§å¹…æé«˜æˆæƒç®¡ç†å·¥ä½œæ•ˆç‡ï¼Œä¹Ÿä½¿å¾—å„ä¸ªå‘½åç©ºé—´ä¸‹çš„åŸºç¡€æ€§æˆæƒè§„åˆ™ä¸ä½¿ç”¨ä½“éªŒä¿æŒä¸€è‡´ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è™½ç„¶authorization-clusterroleæ˜¯ä¸€ä¸ªé›†ç¾¤è§’è‰²ï¼Œä½†æ˜¯å› ä¸ºä½¿ç”¨äº†RoleBinding</span></span><br><span class="line"><span class="comment"># æ‰€ä»¥heimaåªèƒ½è¯»å–devå‘½åç©ºé—´ä¸­çš„èµ„æº</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">RoleBinding</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1beta1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">authorization-role-binding-ns</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">User</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">heima</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">authorization-clusterrole</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br></pre></td></tr></table></figure><p><strong>å®æˆ˜ï¼šåˆ›å»ºä¸€ä¸ªåªèƒ½ç®¡ç†devç©ºé—´ä¸‹Podsèµ„æºçš„è´¦å·</strong></p><ol><li>åˆ›å»ºè´¦å·</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1) åˆ›å»ºè¯ä¹¦</span></span><br><span class="line">[root@k8s-master01 pki]# cd /etc/kubernetes/pki/</span><br><span class="line">[root@k8s-master01 pki]# (umask 077;openssl genrsa -out devman.key 2048)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2) ç”¨apiserverçš„è¯ä¹¦å»ç­¾ç½²</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2-1) ç­¾åç”³è¯·ï¼Œç”³è¯·çš„ç”¨æˆ·æ˜¯devman,ç»„æ˜¯devgroup</span></span><br><span class="line">[root@k8s-master01 pki]# openssl req -new -key devman.key -out devman.csr -subj &quot;/CN=devman/O=devgroup&quot;     </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2-2) ç­¾ç½²è¯ä¹¦</span></span><br><span class="line">[root@k8s-master01 pki]# openssl x509 -req -in devman.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out devman.crt -days 3650</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">3) è®¾ç½®é›†ç¾¤ã€ç”¨æˆ·ã€ä¸Šä¸‹æ–‡ä¿¡æ¯</span></span><br><span class="line">[root@k8s-master01 pki]# kubectl config set-cluster kubernetes --embed-certs=true --certificate-authority=/etc/kubernetes/pki/ca.crt --server=https://192.168.109.100:6443</span><br><span class="line"></span><br><span class="line">[root@k8s-master01 pki]# kubectl config set-credentials devman --embed-certs=true --client-certificate=/etc/kubernetes/pki/devman.crt --client-key=/etc/kubernetes/pki/devman.key</span><br><span class="line"></span><br><span class="line">[root@k8s-master01 pki]# kubectl config set-context devman@kubernetes --cluster=kubernetes --user=devman</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ‡æ¢è´¦æˆ·åˆ°devman</span></span><br><span class="line">[root@k8s-master01 pki]# kubectl config use-context devman@kubernetes</span><br><span class="line">Switched to context &quot;devman@kubernetes&quot;.</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹devä¸‹podï¼Œå‘ç°æ²¡æœ‰æƒé™</span></span><br><span class="line">[root@k8s-master01 pki]# kubectl get pods -n dev</span><br><span class="line">Error from server (Forbidden): pods is forbidden: User &quot;devman&quot; cannot list resource &quot;pods&quot; in API group &quot;&quot; in the namespace &quot;dev&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ‡æ¢åˆ°adminè´¦æˆ·</span></span><br><span class="line">[root@k8s-master01 pki]# kubectl config use-context kubernetes-admin@kubernetes</span><br><span class="line">Switched to context &quot;kubernetes-admin@kubernetes&quot;.</span><br></pre></td></tr></table></figure><p>2ï¼‰ åˆ›å»ºRoleå’ŒRoleBindingï¼Œä¸ºdevmanç”¨æˆ·æˆæƒ</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">kind:</span> <span class="string">Role</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1beta1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">dev-role</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span> [<span class="string">&quot;&quot;</span>]</span><br><span class="line">  <span class="attr">resources:</span> [<span class="string">&quot;pods&quot;</span>]</span><br><span class="line">  <span class="attr">verbs:</span> [<span class="string">&quot;get&quot;</span>, <span class="string">&quot;watch&quot;</span>, <span class="string">&quot;list&quot;</span>]</span><br><span class="line">  </span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">RoleBinding</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1beta1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">authorization-role-binding</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">User</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">devman</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">Role</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">dev-role</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@k8s-master01 pki]# kubectl create -f dev-role.yaml</span><br><span class="line">role.rbac.authorization.k8s.io/dev-role created</span><br><span class="line">rolebinding.rbac.authorization.k8s.io/authorization-role-binding created</span><br></pre></td></tr></table></figure><ol start="3"><li>åˆ‡æ¢è´¦æˆ·ï¼Œå†æ¬¡éªŒè¯</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ‡æ¢è´¦æˆ·åˆ°devman</span></span><br><span class="line">[root@k8s-master01 pki]# kubectl config use-context devman@kubernetes</span><br><span class="line">Switched to context &quot;devman@kubernetes&quot;.</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å†æ¬¡æŸ¥çœ‹</span></span><br><span class="line">[root@k8s-master01 pki]# kubectl get pods -n dev</span><br><span class="line">NAME                                 READY   STATUS             RESTARTS   AGE</span><br><span class="line">nginx-deployment-66cb59b984-8wp2k    1/1     Running            0          4d1h</span><br><span class="line">nginx-deployment-66cb59b984-dc46j    1/1     Running            0          4d1h</span><br><span class="line">nginx-deployment-66cb59b984-thfck    1/1     Running            0          4d1h</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸ºäº†ä¸å½±å“åé¢çš„å­¦ä¹ ,åˆ‡å›adminè´¦æˆ·</span></span><br><span class="line">[root@k8s-master01 pki]# kubectl config use-context kubernetes-admin@kubernetes</span><br><span class="line">Switched to context &quot;kubernetes-admin@kubernetes&quot;.</span><br></pre></td></tr></table></figure><h2 id="9-4-å‡†å…¥æ§åˆ¶"><a href="#9-4-å‡†å…¥æ§åˆ¶" class="headerlink" title="9.4 å‡†å…¥æ§åˆ¶"></a>9.4 å‡†å…¥æ§åˆ¶</h2><p>é€šè¿‡äº†å‰é¢çš„è®¤è¯å’Œæˆæƒä¹‹åï¼Œè¿˜éœ€è¦ç»è¿‡å‡†å…¥æ§åˆ¶å¤„ç†é€šè¿‡ä¹‹åï¼Œapiserveræ‰ä¼šå¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚</p><p>å‡†å…¥æ§åˆ¶æ˜¯ä¸€ä¸ªå¯é…ç½®çš„æ§åˆ¶å™¨åˆ—è¡¨ï¼Œå¯ä»¥é€šè¿‡åœ¨Api-Serverä¸Šé€šè¿‡å‘½ä»¤è¡Œè®¾ç½®é€‰æ‹©æ‰§è¡Œå“ªäº›å‡†å…¥æ§åˆ¶å™¨ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">--admission-control</span>=NamespaceLifecycle,LimitRanger,ServiceAccount,PersistentVolumeLabel,</span><br><span class="line">                      DefaultStorageClass,ResourceQuota,DefaultTolerationSeconds</span><br></pre></td></tr></table></figure><p>åªæœ‰å½“æ‰€æœ‰çš„å‡†å…¥æ§åˆ¶å™¨éƒ½æ£€æŸ¥é€šè¿‡ä¹‹åï¼Œapiserveræ‰æ‰§è¡Œè¯¥è¯·æ±‚ï¼Œå¦åˆ™è¿”å›æ‹’ç»ã€‚</p><p>å½“å‰å¯é…ç½®çš„Admission Controlå‡†å…¥æ§åˆ¶å¦‚ä¸‹ï¼š</p><ul><li>AlwaysAdmitï¼šå…è®¸æ‰€æœ‰è¯·æ±‚</li><li>AlwaysDenyï¼šç¦æ­¢æ‰€æœ‰è¯·æ±‚ï¼Œä¸€èˆ¬ç”¨äºæµ‹è¯•</li><li>AlwaysPullImagesï¼šåœ¨å¯åŠ¨å®¹å™¨ä¹‹å‰æ€»å»ä¸‹è½½é•œåƒ</li><li>DenyExecOnPrivilegedï¼šå®ƒä¼šæ‹¦æˆªæ‰€æœ‰æƒ³åœ¨Privileged Containerä¸Šæ‰§è¡Œå‘½ä»¤çš„è¯·æ±‚</li><li>ImagePolicyWebhookï¼šè¿™ä¸ªæ’ä»¶å°†å…è®¸åç«¯çš„ä¸€ä¸ªWebhookç¨‹åºæ¥å®Œæˆadmission controllerçš„åŠŸèƒ½ã€‚</li><li>Service Accountï¼šå®ç°ServiceAccountå®ç°äº†è‡ªåŠ¨åŒ–</li><li>SecurityContextDenyï¼šè¿™ä¸ªæ’ä»¶å°†ä½¿ç”¨SecurityContextçš„Podä¸­çš„å®šä¹‰å…¨éƒ¨å¤±æ•ˆ</li><li>ResourceQuotaï¼šç”¨äºèµ„æºé…é¢ç®¡ç†ç›®çš„ï¼Œè§‚å¯Ÿæ‰€æœ‰è¯·æ±‚ï¼Œç¡®ä¿åœ¨namespaceä¸Šçš„é…é¢ä¸ä¼šè¶…æ ‡</li><li>LimitRangerï¼šç”¨äºèµ„æºé™åˆ¶ç®¡ç†ï¼Œä½œç”¨äºnamespaceä¸Šï¼Œç¡®ä¿å¯¹Podè¿›è¡Œèµ„æºé™åˆ¶</li><li>InitialResourcesï¼šä¸ºæœªè®¾ç½®èµ„æºè¯·æ±‚ä¸é™åˆ¶çš„Podï¼Œæ ¹æ®å…¶é•œåƒçš„å†å²èµ„æºçš„ä½¿ç”¨æƒ…å†µè¿›è¡Œè®¾ç½®</li><li>NamespaceLifecycleï¼šå¦‚æœå°è¯•åœ¨ä¸€ä¸ªä¸å­˜åœ¨çš„namespaceä¸­åˆ›å»ºèµ„æºå¯¹è±¡ï¼Œåˆ™è¯¥åˆ›å»ºè¯·æ±‚å°†è¢«æ‹’ç»ã€‚å½“åˆ é™¤ä¸€ä¸ªnamespaceæ—¶ï¼Œç³»ç»Ÿå°†ä¼šåˆ é™¤è¯¥namespaceä¸­æ‰€æœ‰å¯¹è±¡ã€‚</li><li>DefaultStorageClassï¼šä¸ºäº†å®ç°å…±äº«å­˜å‚¨çš„åŠ¨æ€ä¾›åº”ï¼Œä¸ºæœªæŒ‡å®šStorageClassæˆ–PVçš„PVCå°è¯•åŒ¹é…é»˜è®¤çš„StorageClassï¼Œå°½å¯èƒ½å‡å°‘ç”¨æˆ·åœ¨ç”³è¯·PVCæ—¶æ‰€éœ€äº†è§£çš„åç«¯å­˜å‚¨ç»†èŠ‚</li><li>DefaultTolerationSecondsï¼šè¿™ä¸ªæ’ä»¶ä¸ºé‚£äº›æ²¡æœ‰è®¾ç½®forgiveness tolerationså¹¶å…·æœ‰notready:NoExecuteå’Œunreachable:NoExecuteä¸¤ç§taintsçš„Podè®¾ç½®é»˜è®¤çš„â€œå®¹å¿â€æ—¶é—´ï¼Œä¸º5min</li><li>PodSecurityPolicyï¼šè¿™ä¸ªæ’ä»¶ç”¨äºåœ¨åˆ›å»ºæˆ–ä¿®æ”¹Podæ—¶å†³å®šæ˜¯å¦æ ¹æ®Podçš„security contextå’Œå¯ç”¨çš„PodSecurityPolicyå¯¹Podçš„å®‰å…¨ç­–ç•¥è¿›è¡Œæ§åˆ¶</li></ul>]]></content>
      
      
      <categories>
          
          <category> Doc </category>
          
          <category> Kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kubernetes </tag>
            
            <tag> æ•™ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetesç¬”è®° 8</title>
      <link href="/2022/07/15/89b8e8027d80-q1jun/"/>
      <url>/2022/07/15/89b8e8027d80-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="8-æ•°æ®å­˜å‚¨"><a href="#8-æ•°æ®å­˜å‚¨" class="headerlink" title="8. æ•°æ®å­˜å‚¨"></a>8. æ•°æ®å­˜å‚¨</h1><p>åœ¨å‰é¢å·²ç»æåˆ°ï¼Œå®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸå¯èƒ½å¾ˆçŸ­ï¼Œä¼šè¢«é¢‘ç¹åœ°åˆ›å»ºå’Œé”€æ¯ã€‚é‚£ä¹ˆå®¹å™¨åœ¨é”€æ¯æ—¶ï¼Œä¿å­˜åœ¨å®¹å™¨ä¸­çš„æ•°æ®ä¹Ÿä¼šè¢«æ¸…é™¤ã€‚è¿™ç§ç»“æœå¯¹ç”¨æˆ·æ¥è¯´ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹æ˜¯ä¸ä¹æ„çœ‹åˆ°çš„ã€‚ä¸ºäº†æŒä¹…åŒ–ä¿å­˜å®¹å™¨çš„æ•°æ®ï¼Œkuberneteså¼•å…¥äº†Volumeçš„æ¦‚å¿µã€‚</p><p>Volumeæ˜¯Podä¸­èƒ½å¤Ÿè¢«å¤šä¸ªå®¹å™¨è®¿é—®çš„å…±äº«ç›®å½•ï¼Œå®ƒè¢«å®šä¹‰åœ¨Podä¸Šï¼Œç„¶åè¢«ä¸€ä¸ªPodé‡Œçš„å¤šä¸ªå®¹å™¨æŒ‚è½½åˆ°å…·ä½“çš„æ–‡ä»¶ç›®å½•ä¸‹ï¼Œkubernetesé€šè¿‡Volumeå®ç°åŒä¸€ä¸ªPodä¸­ä¸åŒå®¹å™¨ä¹‹é—´çš„æ•°æ®å…±äº«ä»¥åŠæ•°æ®çš„æŒä¹…åŒ–å­˜å‚¨ã€‚Volumeçš„ç”Ÿå‘½å®¹å™¨ä¸ä¸Podä¸­å•ä¸ªå®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸç›¸å…³ï¼Œå½“å®¹å™¨ç»ˆæ­¢æˆ–è€…é‡å¯æ—¶ï¼ŒVolumeä¸­çš„æ•°æ®ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚</p><p>kubernetesçš„Volumeæ”¯æŒå¤šç§ç±»å‹ï¼Œæ¯”è¾ƒå¸¸è§çš„æœ‰ä¸‹é¢å‡ ä¸ªï¼š</p><ul><li>ç®€å•å­˜å‚¨ï¼šEmptyDirã€HostPathã€NFS</li><li>é«˜çº§å­˜å‚¨ï¼šPVã€PVC</li><li>é…ç½®å­˜å‚¨ï¼šConfigMapã€Secret</li></ul><h2 id="8-1-åŸºæœ¬å­˜å‚¨"><a href="#8-1-åŸºæœ¬å­˜å‚¨" class="headerlink" title="8.1 åŸºæœ¬å­˜å‚¨"></a>8.1 åŸºæœ¬å­˜å‚¨</h2><h3 id="8-1-1-EmptyDir"><a href="#8-1-1-EmptyDir" class="headerlink" title="8.1.1 EmptyDir"></a>8.1.1 EmptyDir</h3><p>EmptyDiræ˜¯æœ€åŸºç¡€çš„Volumeç±»å‹ï¼Œä¸€ä¸ªEmptyDirå°±æ˜¯Hostä¸Šçš„ä¸€ä¸ªç©ºç›®å½•ã€‚</p><p>EmptyDiræ˜¯åœ¨Podè¢«åˆ†é…åˆ°Nodeæ—¶åˆ›å»ºçš„ï¼Œå®ƒçš„åˆå§‹å†…å®¹ä¸ºç©ºï¼Œå¹¶ä¸”æ— é¡»æŒ‡å®šå®¿ä¸»æœºä¸Šå¯¹åº”çš„ç›®å½•æ–‡ä»¶ï¼Œå› ä¸ºkubernetesä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªç›®å½•ï¼Œå½“Podé”€æ¯æ—¶ï¼Œ EmptyDirä¸­çš„æ•°æ®ä¹Ÿä¼šè¢«æ°¸ä¹…åˆ é™¤ã€‚ EmptyDirç”¨é€”å¦‚ä¸‹ï¼š</p><ul><li>ä¸´æ—¶ç©ºé—´ï¼Œä¾‹å¦‚ç”¨äºæŸäº›åº”ç”¨ç¨‹åºè¿è¡Œæ—¶æ‰€éœ€çš„ä¸´æ—¶ç›®å½•ï¼Œä¸”æ— é¡»æ°¸ä¹…ä¿ç•™</li><li>ä¸€ä¸ªå®¹å™¨éœ€è¦ä»å¦ä¸€ä¸ªå®¹å™¨ä¸­è·å–æ•°æ®çš„ç›®å½•ï¼ˆå¤šå®¹å™¨å…±äº«ç›®å½•ï¼‰</li></ul><p>æ¥ä¸‹æ¥ï¼Œé€šè¿‡ä¸€ä¸ªå®¹å™¨ä¹‹é—´æ–‡ä»¶å…±äº«çš„æ¡ˆä¾‹æ¥ä½¿ç”¨ä¸€ä¸‹EmptyDirã€‚</p><p>åœ¨ä¸€ä¸ªPodä¸­å‡†å¤‡ä¸¤ä¸ªå®¹å™¨nginxå’Œbusyboxï¼Œç„¶åå£°æ˜ä¸€ä¸ªVolumeåˆ†åˆ«æŒ‚åœ¨åˆ°ä¸¤ä¸ªå®¹å™¨çš„ç›®å½•ä¸­ï¼Œç„¶ånginxå®¹å™¨è´Ÿè´£å‘Volumeä¸­å†™æ—¥å¿—ï¼Œbusyboxä¸­é€šè¿‡å‘½ä»¤å°†æ—¥å¿—å†…å®¹è¯»åˆ°æ§åˆ¶å°ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200413174713773.png" alt="img"></p><p>åˆ›å»ºä¸€ä¸ªvolume-emptydir.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">volume-emptydir</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">80</span></span><br><span class="line">    <span class="attr">volumeMounts:</span>  <span class="comment"># å°†logs-volumeæŒ‚åœ¨åˆ°nginxå®¹å™¨ä¸­ï¼Œå¯¹åº”çš„ç›®å½•ä¸º /var/log/nginx</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">logs-volume</span></span><br><span class="line">      <span class="attr">mountPath:</span> <span class="string">/var/log/nginx</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">busybox</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">busybox:1.30</span></span><br><span class="line">    <span class="attr">command:</span> [<span class="string">&quot;/bin/sh&quot;</span>,<span class="string">&quot;-c&quot;</span>,<span class="string">&quot;tail -f /logs/access.log&quot;</span>] <span class="comment"># åˆå§‹å‘½ä»¤ï¼ŒåŠ¨æ€è¯»å–æŒ‡å®šæ–‡ä»¶ä¸­å†…å®¹</span></span><br><span class="line">    <span class="attr">volumeMounts:</span>  <span class="comment"># å°†logs-volume æŒ‚åœ¨åˆ°busyboxå®¹å™¨ä¸­ï¼Œå¯¹åº”çš„ç›®å½•ä¸º /logs</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">logs-volume</span></span><br><span class="line">      <span class="attr">mountPath:</span> <span class="string">/logs</span></span><br><span class="line">  <span class="attr">volumes:</span> <span class="comment"># å£°æ˜volumeï¼Œ nameä¸ºlogs-volumeï¼Œç±»å‹ä¸ºemptyDir</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">logs-volume</span></span><br><span class="line">    <span class="attr">emptyDir:</span> &#123;&#125;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºPod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f volume-emptydir.yaml</span><br><span class="line">pod/volume-emptydir created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹pod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods volume-emptydir -n dev -o wide</span><br><span class="line">NAME                  READY   STATUS    RESTARTS   AGE      IP       NODE   ...... </span><br><span class="line">volume-emptydir       2/2     Running   0          97s   10.42.2.9   node1  ......</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é€šè¿‡podIpè®¿é—®nginx</span></span><br><span class="line">[root@k8s-master01 ~]# curl 10.42.2.9</span><br><span class="line">......</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é€šè¿‡kubectl logså‘½ä»¤æŸ¥çœ‹æŒ‡å®šå®¹å™¨çš„æ ‡å‡†è¾“å‡º</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl logs -f volume-emptydir -n dev -c busybox</span><br><span class="line">10.42.1.0 - - [27/Jun/2021:15:08:54 +0000] &quot;GET / HTTP/1.1&quot; 200 612 &quot;-&quot; &quot;curl/7.29.0&quot; &quot;-&quot;</span><br></pre></td></tr></table></figure><h3 id="8-1-2-HostPath"><a href="#8-1-2-HostPath" class="headerlink" title="8.1.2 HostPath"></a>8.1.2 HostPath</h3><p>ä¸ŠèŠ‚è¯¾æåˆ°ï¼ŒEmptyDirä¸­æ•°æ®ä¸ä¼šè¢«æŒä¹…åŒ–ï¼Œå®ƒä¼šéšç€Podçš„ç»“æŸè€Œé”€æ¯ï¼Œå¦‚æœæƒ³ç®€å•çš„å°†æ•°æ®æŒä¹…åŒ–åˆ°ä¸»æœºä¸­ï¼Œå¯ä»¥é€‰æ‹©HostPathã€‚</p><p>HostPathå°±æ˜¯å°†Nodeä¸»æœºä¸­ä¸€ä¸ªå®é™…ç›®å½•æŒ‚åœ¨åˆ°Podä¸­ï¼Œä»¥ä¾›å®¹å™¨ä½¿ç”¨ï¼Œè¿™æ ·çš„è®¾è®¡å°±å¯ä»¥ä¿è¯Podé”€æ¯äº†ï¼Œä½†æ˜¯æ•°æ®ä¾æ®å¯ä»¥å­˜åœ¨äºNodeä¸»æœºä¸Šã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200413214031331.png" alt="img"></p><p>åˆ›å»ºä¸€ä¸ªvolume-hostpath.yamlï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">volume-hostpath</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">80</span></span><br><span class="line">    <span class="attr">volumeMounts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">logs-volume</span></span><br><span class="line">      <span class="attr">mountPath:</span> <span class="string">/var/log/nginx</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">busybox</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">busybox:1.30</span></span><br><span class="line">    <span class="attr">command:</span> [<span class="string">&quot;/bin/sh&quot;</span>,<span class="string">&quot;-c&quot;</span>,<span class="string">&quot;tail -f /logs/access.log&quot;</span>]</span><br><span class="line">    <span class="attr">volumeMounts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">logs-volume</span></span><br><span class="line">      <span class="attr">mountPath:</span> <span class="string">/logs</span></span><br><span class="line">  <span class="attr">volumes:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">logs-volume</span></span><br><span class="line">    <span class="attr">hostPath:</span> </span><br><span class="line">      <span class="attr">path:</span> <span class="string">/root/logs</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">DirectoryOrCreate</span>  <span class="comment"># ç›®å½•å­˜åœ¨å°±ä½¿ç”¨ï¼Œä¸å­˜åœ¨å°±å…ˆåˆ›å»ºåä½¿ç”¨</span></span><br></pre></td></tr></table></figure><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">å…³äº<span class="variable">type</span>çš„å€¼çš„ä¸€ç‚¹è¯´æ˜ï¼š</span><br><span class="line">    <span class="variable">DirectoryOrCreate</span> ç›®å½•å­˜åœ¨å°±ä½¿ç”¨ï¼Œä¸å­˜åœ¨å°±å…ˆåˆ›å»ºåä½¿ç”¨</span><br><span class="line">    <span class="built_in">Directory</span>   ç›®å½•å¿…é¡»å­˜åœ¨</span><br><span class="line">    <span class="variable">FileOrCreate</span>  æ–‡ä»¶å­˜åœ¨å°±ä½¿ç”¨ï¼Œä¸å­˜åœ¨å°±å…ˆåˆ›å»ºåä½¿ç”¨</span><br><span class="line">    <span class="built_in">File</span> æ–‡ä»¶å¿…é¡»å­˜åœ¨ </span><br><span class="line">    <span class="built_in">Socket</span>  <span class="variable">unix</span>å¥—æ¥å­—å¿…é¡»å­˜åœ¨</span><br><span class="line">    <span class="variable">CharDevice</span>  å­—ç¬¦è®¾å¤‡å¿…é¡»å­˜åœ¨</span><br><span class="line">    <span class="variable">BlockDevice</span> å—è®¾å¤‡å¿…é¡»å­˜åœ¨</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºPod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f volume-hostpath.yaml</span><br><span class="line">pod/volume-hostpath created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹Pod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods volume-hostpath -n dev -o wide</span><br><span class="line">NAME                  READY   STATUS    RESTARTS   AGE   IP             NODE   ......</span><br><span class="line">pod-volume-hostpath   2/2     Running   0          16s   10.42.2.10     node1  ......</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">è®¿é—®nginx</span></span><br><span class="line">[root@k8s-master01 ~]# curl 10.42.2.10</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¥ä¸‹æ¥å°±å¯ä»¥å»hostçš„/root/logsç›®å½•ä¸‹æŸ¥çœ‹å­˜å‚¨çš„æ–‡ä»¶äº†</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">##  æ³¨æ„: ä¸‹é¢çš„æ“ä½œéœ€è¦åˆ°Podæ‰€åœ¨çš„èŠ‚ç‚¹è¿è¡Œï¼ˆæ¡ˆä¾‹ä¸­æ˜¯node1ï¼‰</span></span></span><br><span class="line">[root@node1 ~]# ls /root/logs/</span><br><span class="line">access.log  error.log</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒæ ·çš„é“ç†ï¼Œå¦‚æœåœ¨æ­¤ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œåˆ°å®¹å™¨ä¸­ä¹Ÿæ˜¯å¯ä»¥çœ‹åˆ°çš„</span></span><br></pre></td></tr></table></figure><h3 id="8-1-3-NFS"><a href="#8-1-3-NFS" class="headerlink" title="8.1.3 NFS"></a>8.1.3 NFS</h3><p>HostPathå¯ä»¥è§£å†³æ•°æ®æŒä¹…åŒ–çš„é—®é¢˜ï¼Œä½†æ˜¯ä¸€æ—¦NodeèŠ‚ç‚¹æ•…éšœäº†ï¼ŒPodå¦‚æœè½¬ç§»åˆ°äº†åˆ«çš„èŠ‚ç‚¹ï¼Œåˆä¼šå‡ºç°é—®é¢˜äº†ï¼Œæ­¤æ—¶éœ€è¦å‡†å¤‡å•ç‹¬çš„ç½‘ç»œå­˜å‚¨ç³»ç»Ÿï¼Œæ¯”è¾ƒå¸¸ç”¨çš„ç”¨NFSã€CIFSã€‚</p><p>NFSæ˜¯ä¸€ä¸ªç½‘ç»œæ–‡ä»¶å­˜å‚¨ç³»ç»Ÿï¼Œå¯ä»¥æ­å»ºä¸€å°NFSæœåŠ¡å™¨ï¼Œç„¶åå°†Podä¸­çš„å­˜å‚¨ç›´æ¥è¿æ¥åˆ°NFSç³»ç»Ÿä¸Šï¼Œè¿™æ ·çš„è¯ï¼Œæ— è®ºPodåœ¨èŠ‚ç‚¹ä¸Šæ€ä¹ˆè½¬ç§»ï¼Œåªè¦Nodeè·ŸNFSçš„å¯¹æ¥æ²¡é—®é¢˜ï¼Œæ•°æ®å°±å¯ä»¥æˆåŠŸè®¿é—®ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200413215133559.png" alt="img"></p><p>1ï¼‰é¦–å…ˆè¦å‡†å¤‡nfsçš„æœåŠ¡å™¨ï¼Œè¿™é‡Œä¸ºäº†ç®€å•ï¼Œç›´æ¥æ˜¯masterèŠ‚ç‚¹åšnfsæœåŠ¡å™¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœ¨nfsä¸Šå®‰è£…nfsæœåŠ¡</span></span><br><span class="line">[root@nfs ~]# yum install nfs-utils -y</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‡†å¤‡ä¸€ä¸ªå…±äº«ç›®å½•</span></span><br><span class="line">[root@nfs ~]# mkdir /root/data/nfs -pv</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†å…±äº«ç›®å½•ä»¥è¯»å†™æƒé™æš´éœ²ç»™192.168.5.0/24ç½‘æ®µä¸­çš„æ‰€æœ‰ä¸»æœº</span></span><br><span class="line">[root@nfs ~]# vim /etc/exports</span><br><span class="line">[root@nfs ~]# more /etc/exports</span><br><span class="line">/root/data/nfs     192.168.5.0/24(rw,no_root_squash)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯åŠ¨nfsæœåŠ¡</span></span><br><span class="line">[root@nfs ~]# systemctl restart nfs</span><br></pre></td></tr></table></figure><p>2ï¼‰æ¥ä¸‹æ¥ï¼Œè¦åœ¨çš„æ¯ä¸ªnodeèŠ‚ç‚¹ä¸Šéƒ½å®‰è£…ä¸‹nfsï¼Œè¿™æ ·çš„ç›®çš„æ˜¯ä¸ºäº†nodeèŠ‚ç‚¹å¯ä»¥é©±åŠ¨nfsè®¾å¤‡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœ¨nodeä¸Šå®‰è£…nfsæœåŠ¡ï¼Œæ³¨æ„ä¸éœ€è¦å¯åŠ¨</span></span><br><span class="line">[root@k8s-master01 ~]# yum install nfs-utils -y</span><br></pre></td></tr></table></figure><p>3ï¼‰æ¥ä¸‹æ¥ï¼Œå°±å¯ä»¥ç¼–å†™podçš„é…ç½®æ–‡ä»¶äº†ï¼Œåˆ›å»ºvolume-nfs.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">volume-nfs</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">80</span></span><br><span class="line">    <span class="attr">volumeMounts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">logs-volume</span></span><br><span class="line">      <span class="attr">mountPath:</span> <span class="string">/var/log/nginx</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">busybox</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">busybox:1.30</span></span><br><span class="line">    <span class="attr">command:</span> [<span class="string">&quot;/bin/sh&quot;</span>,<span class="string">&quot;-c&quot;</span>,<span class="string">&quot;tail -f /logs/access.log&quot;</span>] </span><br><span class="line">    <span class="attr">volumeMounts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">logs-volume</span></span><br><span class="line">      <span class="attr">mountPath:</span> <span class="string">/logs</span></span><br><span class="line">  <span class="attr">volumes:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">logs-volume</span></span><br><span class="line">    <span class="attr">nfs:</span></span><br><span class="line">      <span class="attr">server:</span> <span class="number">192.168</span><span class="number">.5</span><span class="number">.6</span>  <span class="comment">#nfsæœåŠ¡å™¨åœ°å€</span></span><br><span class="line">      <span class="attr">path:</span> <span class="string">/root/data/nfs</span> <span class="comment">#å…±äº«æ–‡ä»¶è·¯å¾„</span></span><br></pre></td></tr></table></figure><p>4ï¼‰æœ€åï¼Œè¿è¡Œä¸‹podï¼Œè§‚å¯Ÿç»“æœ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºpod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f volume-nfs.yaml</span><br><span class="line">pod/volume-nfs created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹pod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods volume-nfs -n dev</span><br><span class="line">NAME                  READY   STATUS    RESTARTS   AGE</span><br><span class="line">volume-nfs        2/2     Running   0          2m9s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹nfsæœåŠ¡å™¨ä¸Šçš„å…±äº«ç›®å½•ï¼Œå‘ç°å·²ç»æœ‰æ–‡ä»¶äº†</span></span><br><span class="line">[root@k8s-master01 ~]# ls /root/data/</span><br><span class="line">access.log  error.log</span><br></pre></td></tr></table></figure><h2 id="8-2-é«˜çº§å­˜å‚¨"><a href="#8-2-é«˜çº§å­˜å‚¨" class="headerlink" title="8.2 é«˜çº§å­˜å‚¨"></a>8.2 é«˜çº§å­˜å‚¨</h2><p>å‰é¢å·²ç»å­¦ä¹ äº†ä½¿ç”¨NFSæä¾›å­˜å‚¨ï¼Œæ­¤æ—¶å°±è¦æ±‚ç”¨æˆ·ä¼šæ­å»ºNFSç³»ç»Ÿï¼Œå¹¶ä¸”ä¼šåœ¨yamlé…ç½®nfsã€‚ç”±äºkubernetesæ”¯æŒçš„å­˜å‚¨ç³»ç»Ÿæœ‰å¾ˆå¤šï¼Œè¦æ±‚å®¢æˆ·å…¨éƒ½æŒæ¡ï¼Œæ˜¾ç„¶ä¸ç°å®ã€‚ä¸ºäº†èƒ½å¤Ÿå±è”½åº•å±‚å­˜å‚¨å®ç°çš„ç»†èŠ‚ï¼Œæ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨ï¼Œ kuberneteså¼•å…¥PVå’ŒPVCä¸¤ç§èµ„æºå¯¹è±¡ã€‚</p><p>PVï¼ˆPersistent Volumeï¼‰æ˜¯æŒä¹…åŒ–å·çš„æ„æ€ï¼Œæ˜¯å¯¹åº•å±‚çš„å…±äº«å­˜å‚¨çš„ä¸€ç§æŠ½è±¡ã€‚ä¸€èˆ¬æƒ…å†µä¸‹PVç”±kubernetesç®¡ç†å‘˜è¿›è¡Œåˆ›å»ºå’Œé…ç½®ï¼Œå®ƒä¸åº•å±‚å…·ä½“çš„å…±äº«å­˜å‚¨æŠ€æœ¯æœ‰å…³ï¼Œå¹¶é€šè¿‡æ’ä»¶å®Œæˆä¸å…±äº«å­˜å‚¨çš„å¯¹æ¥ã€‚</p><p>PVCï¼ˆPersistent Volume Claimï¼‰æ˜¯æŒä¹…å·å£°æ˜çš„æ„æ€ï¼Œæ˜¯ç”¨æˆ·å¯¹äºå­˜å‚¨éœ€æ±‚çš„ä¸€ç§å£°æ˜ã€‚æ¢å¥è¯è¯´ï¼ŒPVCå…¶å®å°±æ˜¯ç”¨æˆ·å‘kubernetesç³»ç»Ÿå‘å‡ºçš„ä¸€ç§èµ„æºéœ€æ±‚ç”³è¯·ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200514194111567.png" alt="img"></p><p>ä½¿ç”¨äº†PVå’ŒPVCä¹‹åï¼Œå·¥ä½œå¯ä»¥å¾—åˆ°è¿›ä¸€æ­¥çš„ç»†åˆ†ï¼š</p><ul><li>å­˜å‚¨ï¼šå­˜å‚¨å·¥ç¨‹å¸ˆç»´æŠ¤</li><li>PVï¼š kubernetesç®¡ç†å‘˜ç»´æŠ¤</li><li>PVCï¼škubernetesç”¨æˆ·ç»´æŠ¤</li></ul><h3 id="8-2-1-PV"><a href="#8-2-1-PV" class="headerlink" title="8.2.1 PV"></a>8.2.1 PV</h3><p>PVæ˜¯å­˜å‚¨èµ„æºçš„æŠ½è±¡ï¼Œä¸‹é¢æ˜¯èµ„æºæ¸…å•æ–‡ä»¶:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span>  </span><br><span class="line"><span class="attr">kind:</span> <span class="string">PersistentVolume</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pv2</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">nfs:</span> <span class="comment"># å­˜å‚¨ç±»å‹ï¼Œä¸åº•å±‚çœŸæ­£å­˜å‚¨å¯¹åº”</span></span><br><span class="line">  <span class="attr">capacity:</span>  <span class="comment"># å­˜å‚¨èƒ½åŠ›ï¼Œç›®å‰åªæ”¯æŒå­˜å‚¨ç©ºé—´çš„è®¾ç½®</span></span><br><span class="line">    <span class="attr">storage:</span> <span class="string">2Gi</span></span><br><span class="line">  <span class="attr">accessModes:</span>  <span class="comment"># è®¿é—®æ¨¡å¼</span></span><br><span class="line">  <span class="attr">storageClassName:</span> <span class="comment"># å­˜å‚¨ç±»åˆ«</span></span><br><span class="line">  <span class="attr">persistentVolumeReclaimPolicy:</span> <span class="comment"># å›æ”¶ç­–ç•¥</span></span><br></pre></td></tr></table></figure><p>PV çš„å…³é”®é…ç½®å‚æ•°è¯´æ˜ï¼š</p><ul><li><p><strong>å­˜å‚¨ç±»å‹</strong></p><p>åº•å±‚å®é™…å­˜å‚¨çš„ç±»å‹ï¼Œkubernetesæ”¯æŒå¤šç§å­˜å‚¨ç±»å‹ï¼Œæ¯ç§å­˜å‚¨ç±»å‹çš„é…ç½®éƒ½æœ‰æ‰€å·®å¼‚</p></li><li><p><strong>å­˜å‚¨èƒ½åŠ›ï¼ˆcapacityï¼‰</strong></p></li></ul><p>ç›®å‰åªæ”¯æŒå­˜å‚¨ç©ºé—´çš„è®¾ç½®( storage&#x3D;1Gi )ï¼Œä¸è¿‡æœªæ¥å¯èƒ½ä¼šåŠ å…¥IOPSã€ååé‡ç­‰æŒ‡æ ‡çš„é…ç½®</p><ul><li><p><strong>è®¿é—®æ¨¡å¼ï¼ˆaccessModesï¼‰</strong></p><p>ç”¨äºæè¿°ç”¨æˆ·åº”ç”¨å¯¹å­˜å‚¨èµ„æºçš„è®¿é—®æƒé™ï¼Œè®¿é—®æƒé™åŒ…æ‹¬ä¸‹é¢å‡ ç§æ–¹å¼ï¼š</p><ul><li>ReadWriteOnceï¼ˆRWOï¼‰ï¼šè¯»å†™æƒé™ï¼Œä½†æ˜¯åªèƒ½è¢«å•ä¸ªèŠ‚ç‚¹æŒ‚è½½</li><li>ReadOnlyManyï¼ˆROXï¼‰ï¼š åªè¯»æƒé™ï¼Œå¯ä»¥è¢«å¤šä¸ªèŠ‚ç‚¹æŒ‚è½½</li><li>ReadWriteManyï¼ˆRWXï¼‰ï¼šè¯»å†™æƒé™ï¼Œå¯ä»¥è¢«å¤šä¸ªèŠ‚ç‚¹æŒ‚è½½</li></ul><p><code>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåº•å±‚ä¸åŒçš„å­˜å‚¨ç±»å‹å¯èƒ½æ”¯æŒçš„è®¿é—®æ¨¡å¼ä¸åŒ</code></p></li><li><p><strong>å›æ”¶ç­–ç•¥ï¼ˆpersistentVolumeReclaimPolicyï¼‰</strong></p><p>å½“PVä¸å†è¢«ä½¿ç”¨äº†ä¹‹åï¼Œå¯¹å…¶çš„å¤„ç†æ–¹å¼ã€‚ç›®å‰æ”¯æŒä¸‰ç§ç­–ç•¥ï¼š</p><ul><li>Retain ï¼ˆä¿ç•™ï¼‰ ä¿ç•™æ•°æ®ï¼Œéœ€è¦ç®¡ç†å‘˜æ‰‹å·¥æ¸…ç†æ•°æ®</li><li>Recycleï¼ˆå›æ”¶ï¼‰ æ¸…é™¤ PV ä¸­çš„æ•°æ®ï¼Œæ•ˆæœç›¸å½“äºæ‰§è¡Œ rm -rf &#x2F;thevolume&#x2F;*</li><li>Delete ï¼ˆåˆ é™¤ï¼‰ ä¸ PV ç›¸è¿çš„åç«¯å­˜å‚¨å®Œæˆ volume çš„åˆ é™¤æ“ä½œï¼Œå½“ç„¶è¿™å¸¸è§äºäº‘æœåŠ¡å•†çš„å­˜å‚¨æœåŠ¡</li></ul><p><code>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåº•å±‚ä¸åŒçš„å­˜å‚¨ç±»å‹å¯èƒ½æ”¯æŒçš„å›æ”¶ç­–ç•¥ä¸åŒ</code></p></li><li><p><strong>å­˜å‚¨ç±»åˆ«</strong></p><p>PVå¯ä»¥é€šè¿‡storageClassNameå‚æ•°æŒ‡å®šä¸€ä¸ªå­˜å‚¨ç±»åˆ«</p><ul><li>å…·æœ‰ç‰¹å®šç±»åˆ«çš„PVåªèƒ½ä¸è¯·æ±‚äº†è¯¥ç±»åˆ«çš„PVCè¿›è¡Œç»‘å®š</li><li>æœªè®¾å®šç±»åˆ«çš„PVåˆ™åªèƒ½ä¸ä¸è¯·æ±‚ä»»ä½•ç±»åˆ«çš„PVCè¿›è¡Œç»‘å®š</li></ul></li><li><p><strong>çŠ¶æ€ï¼ˆstatusï¼‰</strong></p><p>ä¸€ä¸ª PV çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œå¯èƒ½ä¼šå¤„äº4ä¸­ä¸åŒçš„é˜¶æ®µï¼š</p><ul><li>Availableï¼ˆå¯ç”¨ï¼‰ï¼š è¡¨ç¤ºå¯ç”¨çŠ¶æ€ï¼Œè¿˜æœªè¢«ä»»ä½• PVC ç»‘å®š</li><li>Boundï¼ˆå·²ç»‘å®šï¼‰ï¼š è¡¨ç¤º PV å·²ç»è¢« PVC ç»‘å®š</li><li>Releasedï¼ˆå·²é‡Šæ”¾ï¼‰ï¼š è¡¨ç¤º PVC è¢«åˆ é™¤ï¼Œä½†æ˜¯èµ„æºè¿˜æœªè¢«é›†ç¾¤é‡æ–°å£°æ˜</li><li>Failedï¼ˆå¤±è´¥ï¼‰ï¼š è¡¨ç¤ºè¯¥ PV çš„è‡ªåŠ¨å›æ”¶å¤±è´¥</li></ul></li></ul><p><strong>å®éªŒ</strong></p><p>ä½¿ç”¨NFSä½œä¸ºå­˜å‚¨ï¼Œæ¥æ¼”ç¤ºPVçš„ä½¿ç”¨ï¼Œåˆ›å»º3ä¸ªPVï¼Œå¯¹åº”NFSä¸­çš„3ä¸ªæš´éœ²çš„è·¯å¾„ã€‚</p><ol><li>å‡†å¤‡NFSç¯å¢ƒ</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºç›®å½•</span></span><br><span class="line">[root@nfs ~]# mkdir /root/data/&#123;pv1,pv2,pv3&#125; -pv</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æš´éœ²æœåŠ¡</span></span><br><span class="line">[root@nfs ~]# more /etc/exports</span><br><span class="line">/root/data/pv1     192.168.5.0/24(rw,no_root_squash)</span><br><span class="line">/root/data/pv2     192.168.5.0/24(rw,no_root_squash)</span><br><span class="line">/root/data/pv3     192.168.5.0/24(rw,no_root_squash)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡å¯æœåŠ¡</span></span><br><span class="line">[root@nfs ~]#  systemctl restart nfs</span><br></pre></td></tr></table></figure><ol start="2"><li>åˆ›å»ºpv.yaml</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">PersistentVolume</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span>  <span class="string">pv1</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">capacity:</span> </span><br><span class="line">    <span class="attr">storage:</span> <span class="string">1Gi</span></span><br><span class="line">  <span class="attr">accessModes:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ReadWriteMany</span></span><br><span class="line">  <span class="attr">persistentVolumeReclaimPolicy:</span> <span class="string">Retain</span></span><br><span class="line">  <span class="attr">nfs:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/root/data/pv1</span></span><br><span class="line">    <span class="attr">server:</span> <span class="number">192.168</span><span class="number">.5</span><span class="number">.6</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">PersistentVolume</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span>  <span class="string">pv2</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">capacity:</span> </span><br><span class="line">    <span class="attr">storage:</span> <span class="string">2Gi</span></span><br><span class="line">  <span class="attr">accessModes:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ReadWriteMany</span></span><br><span class="line">  <span class="attr">persistentVolumeReclaimPolicy:</span> <span class="string">Retain</span></span><br><span class="line">  <span class="attr">nfs:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/root/data/pv2</span></span><br><span class="line">    <span class="attr">server:</span> <span class="number">192.168</span><span class="number">.5</span><span class="number">.6</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">PersistentVolume</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span>  <span class="string">pv3</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">capacity:</span> </span><br><span class="line">    <span class="attr">storage:</span> <span class="string">3Gi</span></span><br><span class="line">  <span class="attr">accessModes:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ReadWriteMany</span></span><br><span class="line">  <span class="attr">persistentVolumeReclaimPolicy:</span> <span class="string">Retain</span></span><br><span class="line">  <span class="attr">nfs:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/root/data/pv3</span></span><br><span class="line">    <span class="attr">server:</span> <span class="number">192.168</span><span class="number">.5</span><span class="number">.6</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»º pv</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pv.yaml</span><br><span class="line">persistentvolume/pv1 created</span><br><span class="line">persistentvolume/pv2 created</span><br><span class="line">persistentvolume/pv3 created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹pv</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pv -o wide</span><br><span class="line">NAME   CAPACITY   ACCESS MODES  RECLAIM POLICY  STATUS      AGE   VOLUMEMODE</span><br><span class="line">pv1    1Gi        RWX            Retain        Available    10s   Filesystem</span><br><span class="line">pv2    2Gi        RWX            Retain        Available    10s   Filesystem</span><br><span class="line">pv3    3Gi        RWX            Retain        Available    9s    Filesystem</span><br></pre></td></tr></table></figure><h3 id="8-2-2-PVC"><a href="#8-2-2-PVC" class="headerlink" title="8.2.2 PVC"></a>8.2.2 PVC</h3><p>PVCæ˜¯èµ„æºçš„ç”³è¯·ï¼Œç”¨æ¥å£°æ˜å¯¹å­˜å‚¨ç©ºé—´ã€è®¿é—®æ¨¡å¼ã€å­˜å‚¨ç±»åˆ«éœ€æ±‚ä¿¡æ¯ã€‚ä¸‹é¢æ˜¯èµ„æºæ¸…å•æ–‡ä»¶:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">PersistentVolumeClaim</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pvc</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">accessModes:</span> <span class="comment"># è®¿é—®æ¨¡å¼</span></span><br><span class="line">  <span class="attr">selector:</span> <span class="comment"># é‡‡ç”¨æ ‡ç­¾å¯¹PVé€‰æ‹©</span></span><br><span class="line">  <span class="attr">storageClassName:</span> <span class="comment"># å­˜å‚¨ç±»åˆ«</span></span><br><span class="line">  <span class="attr">resources:</span> <span class="comment"># è¯·æ±‚ç©ºé—´</span></span><br><span class="line">    <span class="attr">requests:</span></span><br><span class="line">      <span class="attr">storage:</span> <span class="string">5Gi</span></span><br></pre></td></tr></table></figure><p>PVC çš„å…³é”®é…ç½®å‚æ•°è¯´æ˜ï¼š</p><ul><li><strong>è®¿é—®æ¨¡å¼ï¼ˆaccessModesï¼‰</strong></li></ul><p>ç”¨äºæè¿°ç”¨æˆ·åº”ç”¨å¯¹å­˜å‚¨èµ„æºçš„è®¿é—®æƒé™</p><ul><li><p><strong>é€‰æ‹©æ¡ä»¶ï¼ˆselectorï¼‰</strong></p><p>é€šè¿‡Label Selectorçš„è®¾ç½®ï¼Œå¯ä½¿PVCå¯¹äºç³»ç»Ÿä¸­å·±å­˜åœ¨çš„PVè¿›è¡Œç­›é€‰</p></li><li><p><strong>å­˜å‚¨ç±»åˆ«ï¼ˆstorageClassNameï¼‰</strong></p><p>PVCåœ¨å®šä¹‰æ—¶å¯ä»¥è®¾å®šéœ€è¦çš„åç«¯å­˜å‚¨çš„ç±»åˆ«ï¼Œåªæœ‰è®¾ç½®äº†è¯¥classçš„pvæ‰èƒ½è¢«ç³»ç»Ÿé€‰å‡º</p></li><li><p><strong>èµ„æºè¯·æ±‚ï¼ˆResources ï¼‰</strong></p><p>æè¿°å¯¹å­˜å‚¨èµ„æºçš„è¯·æ±‚</p></li></ul><p><strong>å®éªŒ</strong></p><ol><li>åˆ›å»ºpvc.yamlï¼Œç”³è¯·pv</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">PersistentVolumeClaim</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pvc1</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">accessModes:</span> </span><br><span class="line">  <span class="bullet">-</span> <span class="string">ReadWriteMany</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">    <span class="attr">requests:</span></span><br><span class="line">      <span class="attr">storage:</span> <span class="string">1Gi</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">PersistentVolumeClaim</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pvc2</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">accessModes:</span> </span><br><span class="line">  <span class="bullet">-</span> <span class="string">ReadWriteMany</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">    <span class="attr">requests:</span></span><br><span class="line">      <span class="attr">storage:</span> <span class="string">1Gi</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">PersistentVolumeClaim</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pvc3</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">accessModes:</span> </span><br><span class="line">  <span class="bullet">-</span> <span class="string">ReadWriteMany</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">    <span class="attr">requests:</span></span><br><span class="line">      <span class="attr">storage:</span> <span class="string">1Gi</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºpvc</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pvc.yaml</span><br><span class="line">persistentvolumeclaim/pvc1 created</span><br><span class="line">persistentvolumeclaim/pvc2 created</span><br><span class="line">persistentvolumeclaim/pvc3 created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹pvc</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pvc  -n dev -o wide</span><br><span class="line">NAME   STATUS   VOLUME   CAPACITY   ACCESS MODES   STORAGECLASS   AGE   VOLUMEMODE</span><br><span class="line">pvc1   Bound    pv1      1Gi        RWX                           15s   Filesystem</span><br><span class="line">pvc2   Bound    pv2      2Gi        RWX                           15s   Filesystem</span><br><span class="line">pvc3   Bound    pv3      3Gi        RWX                           15s   Filesystem</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹pv</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pv -o wide</span><br><span class="line">NAME  CAPACITY ACCESS MODES  RECLAIM POLICY  STATUS    CLAIM       AGE     VOLUMEMODE</span><br><span class="line">pv1    1Gi        RWx        Retain          Bound    dev/pvc1    3h37m    Filesystem</span><br><span class="line">pv2    2Gi        RWX        Retain          Bound    dev/pvc2    3h37m    Filesystem</span><br><span class="line">pv3    3Gi        RWX        Retain          Bound    dev/pvc3    3h37m    Filesystem   </span><br></pre></td></tr></table></figure><ol start="2"><li>åˆ›å»ºpods.yaml, ä½¿ç”¨pv</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod1</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">busybox</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">busybox:1.30</span></span><br><span class="line">    <span class="attr">command:</span> [<span class="string">&quot;/bin/sh&quot;</span>,<span class="string">&quot;-c&quot;</span>,<span class="string">&quot;while true;do echo pod1 &gt;&gt; /root/out.txt; sleep 10; done;&quot;</span>]</span><br><span class="line">    <span class="attr">volumeMounts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">volume</span></span><br><span class="line">      <span class="attr">mountPath:</span> <span class="string">/root/</span></span><br><span class="line">  <span class="attr">volumes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">volume</span></span><br><span class="line">      <span class="attr">persistentVolumeClaim:</span></span><br><span class="line">        <span class="attr">claimName:</span> <span class="string">pvc1</span></span><br><span class="line">        <span class="attr">readOnly:</span> <span class="literal">false</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod2</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">busybox</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">busybox:1.30</span></span><br><span class="line">    <span class="attr">command:</span> [<span class="string">&quot;/bin/sh&quot;</span>,<span class="string">&quot;-c&quot;</span>,<span class="string">&quot;while true;do echo pod2 &gt;&gt; /root/out.txt; sleep 10; done;&quot;</span>]</span><br><span class="line">    <span class="attr">volumeMounts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">volume</span></span><br><span class="line">      <span class="attr">mountPath:</span> <span class="string">/root/</span></span><br><span class="line">  <span class="attr">volumes:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">volume</span></span><br><span class="line">      <span class="attr">persistentVolumeClaim:</span></span><br><span class="line">        <span class="attr">claimName:</span> <span class="string">pvc2</span></span><br><span class="line">        <span class="attr">readOnly:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºpod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pods.yaml</span><br><span class="line">pod/pod1 created</span><br><span class="line">pod/pod2 created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹pod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods -n dev -o wide</span><br><span class="line">NAME   READY   STATUS    RESTARTS   AGE   IP            NODE   </span><br><span class="line">pod1   1/1     Running   0          14s   10.244.1.69   node1   </span><br><span class="line">pod2   1/1     Running   0          14s   10.244.1.70   node1  </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹pvc</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pvc -n dev -o wide</span><br><span class="line">NAME   STATUS   VOLUME   CAPACITY   ACCESS MODES      AGE   VOLUMEMODE</span><br><span class="line">pvc1   Bound    pv1      1Gi        RWX               94m   Filesystem</span><br><span class="line">pvc2   Bound    pv2      2Gi        RWX               94m   Filesystem</span><br><span class="line">pvc3   Bound    pv3      3Gi        RWX               94m   Filesystem</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹pv</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pv -n dev -o wide</span><br><span class="line">NAME   CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS   CLAIM       AGE     VOLUMEMODE</span><br><span class="line">pv1    1Gi        RWX            Retain           Bound    dev/pvc1    5h11m   Filesystem</span><br><span class="line">pv2    2Gi        RWX            Retain           Bound    dev/pvc2    5h11m   Filesystem</span><br><span class="line">pv3    3Gi        RWX            Retain           Bound    dev/pvc3    5h11m   Filesystem</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹nfsä¸­çš„æ–‡ä»¶å­˜å‚¨</span></span><br><span class="line">[root@nfs ~]# more /root/data/pv1/out.txt</span><br><span class="line">node1</span><br><span class="line">node1</span><br><span class="line">[root@nfs ~]# more /root/data/pv2/out.txt</span><br><span class="line">node2</span><br><span class="line">node2</span><br></pre></td></tr></table></figure><h3 id="8-2-3-ç”Ÿå‘½å‘¨æœŸ"><a href="#8-2-3-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="8.2.3 ç”Ÿå‘½å‘¨æœŸ"></a>8.2.3 ç”Ÿå‘½å‘¨æœŸ</h3><p>PVCå’ŒPVæ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼ŒPVå’ŒPVCä¹‹é—´çš„ç›¸äº’ä½œç”¨éµå¾ªä»¥ä¸‹ç”Ÿå‘½å‘¨æœŸï¼š</p><ul><li><p><strong>èµ„æºä¾›åº”</strong>ï¼šç®¡ç†å‘˜æ‰‹åŠ¨åˆ›å»ºåº•å±‚å­˜å‚¨å’ŒPV</p></li><li><p><strong>èµ„æºç»‘å®š</strong>ï¼šç”¨æˆ·åˆ›å»ºPVCï¼Œkubernetesè´Ÿè´£æ ¹æ®PVCçš„å£°æ˜å»å¯»æ‰¾PVï¼Œå¹¶ç»‘å®š</p><p>åœ¨ç”¨æˆ·å®šä¹‰å¥½PVCä¹‹åï¼Œç³»ç»Ÿå°†æ ¹æ®PVCå¯¹å­˜å‚¨èµ„æºçš„è¯·æ±‚åœ¨å·²å­˜åœ¨çš„PVä¸­é€‰æ‹©ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„</p><ul><li>ä¸€æ—¦æ‰¾åˆ°ï¼Œå°±å°†è¯¥PVä¸ç”¨æˆ·å®šä¹‰çš„PVCè¿›è¡Œç»‘å®šï¼Œç”¨æˆ·çš„åº”ç”¨å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªPVCäº†</li><li>å¦‚æœæ‰¾ä¸åˆ°ï¼ŒPVCåˆ™ä¼šæ— é™æœŸå¤„äºPendingçŠ¶æ€ï¼Œç›´åˆ°ç­‰åˆ°ç³»ç»Ÿç®¡ç†å‘˜åˆ›å»ºäº†ä¸€ä¸ªç¬¦åˆå…¶è¦æ±‚çš„PV</li></ul><p>PVä¸€æ—¦ç»‘å®šåˆ°æŸä¸ªPVCä¸Šï¼Œå°±ä¼šè¢«è¿™ä¸ªPVCç‹¬å ï¼Œä¸èƒ½å†ä¸å…¶ä»–PVCè¿›è¡Œç»‘å®šäº†</p></li><li><p><strong>èµ„æºä½¿ç”¨</strong>ï¼šç”¨æˆ·å¯åœ¨podä¸­åƒvolumeä¸€æ ·ä½¿ç”¨pvc</p><p>Podä½¿ç”¨Volumeçš„å®šä¹‰ï¼Œå°†PVCæŒ‚è½½åˆ°å®¹å™¨å†…çš„æŸä¸ªè·¯å¾„è¿›è¡Œä½¿ç”¨ã€‚</p></li><li><p><strong>èµ„æºé‡Šæ”¾</strong>ï¼šç”¨æˆ·åˆ é™¤pvcæ¥é‡Šæ”¾pv</p><p>å½“å­˜å‚¨èµ„æºä½¿ç”¨å®Œæ¯•åï¼Œç”¨æˆ·å¯ä»¥åˆ é™¤PVCï¼Œä¸è¯¥PVCç»‘å®šçš„PVå°†ä¼šè¢«æ ‡è®°ä¸ºâ€œå·²é‡Šæ”¾â€ï¼Œä½†è¿˜ä¸èƒ½ç«‹åˆ»ä¸å…¶ä»–PVCè¿›è¡Œç»‘å®šã€‚é€šè¿‡ä¹‹å‰PVCå†™å…¥çš„æ•°æ®å¯èƒ½è¿˜è¢«ç•™åœ¨å­˜å‚¨è®¾å¤‡ä¸Šï¼Œåªæœ‰åœ¨æ¸…é™¤ä¹‹åè¯¥PVæ‰èƒ½å†æ¬¡ä½¿ç”¨ã€‚</p></li><li><p><strong>èµ„æºå›æ”¶</strong>ï¼škubernetesæ ¹æ®pvè®¾ç½®çš„å›æ”¶ç­–ç•¥è¿›è¡Œèµ„æºçš„å›æ”¶</p><p>å¯¹äºPVï¼Œç®¡ç†å‘˜å¯ä»¥è®¾å®šå›æ”¶ç­–ç•¥ï¼Œç”¨äºè®¾ç½®ä¸ä¹‹ç»‘å®šçš„PVCé‡Šæ”¾èµ„æºä¹‹åå¦‚ä½•å¤„ç†é—ç•™æ•°æ®çš„é—®é¢˜ã€‚åªæœ‰PVçš„å­˜å‚¨ç©ºé—´å®Œæˆå›æ”¶ï¼Œæ‰èƒ½ä¾›æ–°çš„PVCç»‘å®šå’Œä½¿ç”¨</p></li></ul><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200515002806726.png" alt="img"></p><h2 id="8-3-é…ç½®å­˜å‚¨"><a href="#8-3-é…ç½®å­˜å‚¨" class="headerlink" title="8.3 é…ç½®å­˜å‚¨"></a>8.3 é…ç½®å­˜å‚¨</h2><h3 id="8-3-1-ConfigMap"><a href="#8-3-1-ConfigMap" class="headerlink" title="8.3.1 ConfigMap"></a>8.3.1 ConfigMap</h3><p>ConfigMapæ˜¯ä¸€ç§æ¯”è¾ƒç‰¹æ®Šçš„å­˜å‚¨å·ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ç”¨æ¥å­˜å‚¨é…ç½®ä¿¡æ¯çš„ã€‚</p><p>åˆ›å»ºconfigmap.yamlï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">configmap</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">info:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    username:admin</span></span><br><span class="line"><span class="string">    password:123456</span></span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œä½¿ç”¨æ­¤é…ç½®æ–‡ä»¶åˆ›å»ºconfigmap</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºconfigmap</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f configmap.yaml</span><br><span class="line">configmap/configmap created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹configmapè¯¦æƒ…</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl describe cm configmap -n dev</span><br><span class="line">Name:         configmap</span><br><span class="line">Namespace:    dev</span><br><span class="line">Labels:       &lt;none&gt;</span><br><span class="line">Annotations:  &lt;none&gt;</span><br><span class="line"></span><br><span class="line">Data</span><br><span class="line">====</span><br><span class="line">info:</span><br><span class="line">----</span><br><span class="line">username:admin</span><br><span class="line">password:123456</span><br><span class="line"></span><br><span class="line">Events:  &lt;none&gt;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥åˆ›å»ºä¸€ä¸ªpod-configmap.yamlï¼Œå°†ä¸Šé¢åˆ›å»ºçš„configmapæŒ‚è½½è¿›å»</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-configmap</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">    <span class="attr">volumeMounts:</span> <span class="comment"># å°†configmapæŒ‚è½½åˆ°ç›®å½•</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">config</span></span><br><span class="line">      <span class="attr">mountPath:</span> <span class="string">/configmap/config</span></span><br><span class="line">  <span class="attr">volumes:</span> <span class="comment"># å¼•ç”¨configmap</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">config</span></span><br><span class="line">    <span class="attr">configMap:</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">configmap</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºpod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pod-configmap.yaml</span><br><span class="line">pod/pod-configmap created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹pod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pod pod-configmap -n dev</span><br><span class="line">NAME            READY   STATUS    RESTARTS   AGE</span><br><span class="line">pod-configmap   1/1     Running   0          6s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">è¿›å…¥å®¹å™¨</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl exec -it pod-configmap -n dev /bin/sh</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">cd</span> /configmap/config/</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">ls</span></span></span><br><span class="line">info</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">more info</span></span><br><span class="line">username:admin</span><br><span class="line">password:123456</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯ä»¥çœ‹åˆ°æ˜ å°„å·²ç»æˆåŠŸï¼Œæ¯ä¸ªconfigmapéƒ½æ˜ å°„æˆäº†ä¸€ä¸ªç›®å½•</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">key---&gt;æ–‡ä»¶     value----&gt;æ–‡ä»¶ä¸­çš„å†…å®¹</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ­¤æ—¶å¦‚æœæ›´æ–°configmapçš„å†…å®¹, å®¹å™¨ä¸­çš„å€¼ä¹Ÿä¼šåŠ¨æ€æ›´æ–°</span></span><br></pre></td></tr></table></figure><h3 id="8-3-2-Secret"><a href="#8-3-2-Secret" class="headerlink" title="8.3.2 Secret"></a>8.3.2 Secret</h3><p>åœ¨kubernetesä¸­ï¼Œè¿˜å­˜åœ¨ä¸€ç§å’ŒConfigMapéå¸¸ç±»ä¼¼çš„å¯¹è±¡ï¼Œç§°ä¸ºSecretå¯¹è±¡ã€‚å®ƒä¸»è¦ç”¨äºå­˜å‚¨æ•æ„Ÿä¿¡æ¯ï¼Œä¾‹å¦‚å¯†ç ã€ç§˜é’¥ã€è¯ä¹¦ç­‰ç­‰ã€‚</p><ol><li>é¦–å…ˆä½¿ç”¨base64å¯¹æ•°æ®è¿›è¡Œç¼–ç </li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@k8s-master01 ~]# echo -n &#x27;admin&#x27; | base64 #å‡†å¤‡username</span><br><span class="line">YWRtaW4=</span><br><span class="line">[root@k8s-master01 ~]# echo -n &#x27;123456&#x27; | base64 #å‡†å¤‡password</span><br><span class="line">MTIzNDU2</span><br></pre></td></tr></table></figure><ol start="2"><li>æ¥ä¸‹æ¥ç¼–å†™secret.yamlï¼Œå¹¶åˆ›å»ºSecret</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Secret</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">secret</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">Opaque</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">username:</span> <span class="string">YWRtaW4=</span></span><br><span class="line">  <span class="attr">password:</span> <span class="string">MTIzNDU2</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºsecret</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f secret.yaml</span><br><span class="line">secret/secret created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹secretè¯¦æƒ…</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl describe secret secret -n dev</span><br><span class="line">Name:         secret</span><br><span class="line">Namespace:    dev</span><br><span class="line">Labels:       &lt;none&gt;</span><br><span class="line">Annotations:  &lt;none&gt;</span><br><span class="line">Type:  Opaque</span><br><span class="line">Data</span><br><span class="line">====</span><br><span class="line">password:  6 bytes</span><br><span class="line">username:  5 bytes</span><br></pre></td></tr></table></figure><ol start="3"><li>åˆ›å»ºpod-secret.yamlï¼Œå°†ä¸Šé¢åˆ›å»ºçš„secretæŒ‚è½½è¿›å»ï¼š</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-secret</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">    <span class="attr">volumeMounts:</span> <span class="comment"># å°†secretæŒ‚è½½åˆ°ç›®å½•</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">config</span></span><br><span class="line">      <span class="attr">mountPath:</span> <span class="string">/secret/config</span></span><br><span class="line">  <span class="attr">volumes:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">config</span></span><br><span class="line">    <span class="attr">secret:</span></span><br><span class="line">      <span class="attr">secretName:</span> <span class="string">secret</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºpod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pod-secret.yaml</span><br><span class="line">pod/pod-secret created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹pod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pod pod-secret -n dev</span><br><span class="line">NAME            READY   STATUS    RESTARTS   AGE</span><br><span class="line">pod-secret      1/1     Running   0          2m28s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿›å…¥å®¹å™¨ï¼ŒæŸ¥çœ‹secretä¿¡æ¯ï¼Œå‘ç°å·²ç»è‡ªåŠ¨è§£ç äº†</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl exec -it pod-secret /bin/sh -n dev</span><br><span class="line">/ # ls /secret/config/</span><br><span class="line">password  username</span><br><span class="line">/ # more /secret/config/username</span><br><span class="line">admin</span><br><span class="line">/ # more /secret/config/password</span><br><span class="line">123456</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œå·²ç»å®ç°äº†åˆ©ç”¨secretå®ç°äº†ä¿¡æ¯çš„ç¼–ç ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Doc </category>
          
          <category> Kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kubernetes </tag>
            
            <tag> æ•™ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetesç¬”è®° 7</title>
      <link href="/2022/07/14/a099258d15af-q1jun/"/>
      <url>/2022/07/14/a099258d15af-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="7-Serviceè¯¦è§£"><a href="#7-Serviceè¯¦è§£" class="headerlink" title="7. Serviceè¯¦è§£"></a>7. Serviceè¯¦è§£</h1><h2 id="7-1-Serviceä»‹ç»"><a href="#7-1-Serviceä»‹ç»" class="headerlink" title="7.1 Serviceä»‹ç»"></a>7.1 Serviceä»‹ç»</h2><p>åœ¨kubernetesä¸­ï¼Œpodæ˜¯åº”ç”¨ç¨‹åºçš„è½½ä½“ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡podçš„ipæ¥è®¿é—®åº”ç”¨ç¨‹åºï¼Œä½†æ˜¯podçš„ipåœ°å€ä¸æ˜¯å›ºå®šçš„ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€ä¸æ–¹ä¾¿ç›´æ¥é‡‡ç”¨podçš„ipå¯¹æœåŠ¡è¿›è¡Œè®¿é—®ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œkubernetesæä¾›äº†Serviceèµ„æºï¼ŒServiceä¼šå¯¹æä¾›åŒä¸€ä¸ªæœåŠ¡çš„å¤šä¸ªpodè¿›è¡Œèšåˆï¼Œå¹¶ä¸”æä¾›ä¸€ä¸ªç»Ÿä¸€çš„å…¥å£åœ°å€ã€‚é€šè¿‡è®¿é—®Serviceçš„å…¥å£åœ°å€å°±èƒ½è®¿é—®åˆ°åé¢çš„podæœåŠ¡ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200408194716912-1626783758946-20220719083321829.png" alt="img"></p><p>Serviceåœ¨å¾ˆå¤šæƒ…å†µä¸‹åªæ˜¯ä¸€ä¸ªæ¦‚å¿µï¼ŒçœŸæ­£èµ·ä½œç”¨çš„å…¶å®æ˜¯kube-proxyæœåŠ¡è¿›ç¨‹ï¼Œæ¯ä¸ªNodeèŠ‚ç‚¹ä¸Šéƒ½è¿è¡Œç€ä¸€ä¸ªkube-proxyæœåŠ¡è¿›ç¨‹ã€‚å½“åˆ›å»ºServiceçš„æ—¶å€™ä¼šé€šè¿‡api-serverå‘etcdå†™å…¥åˆ›å»ºçš„serviceçš„ä¿¡æ¯ï¼Œè€Œkube-proxyä¼šåŸºäºç›‘å¬çš„æœºåˆ¶å‘ç°è¿™ç§Serviceçš„å˜åŠ¨ï¼Œç„¶å<strong>å®ƒä¼šå°†æœ€æ–°çš„Serviceä¿¡æ¯è½¬æ¢æˆå¯¹åº”çš„è®¿é—®è§„åˆ™</strong>ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200509121254425-20220719083321872.png" alt="img"></p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 10.97.97.97:80 æ˜¯serviceæä¾›çš„è®¿é—®å…¥å£</span></span><br><span class="line"><span class="comment"># å½“è®¿é—®è¿™ä¸ªå…¥å£çš„æ—¶å€™ï¼Œå¯ä»¥å‘ç°åé¢æœ‰ä¸‰ä¸ªpodçš„æœåŠ¡åœ¨ç­‰å¾…è°ƒç”¨ï¼Œ</span></span><br><span class="line"><span class="comment"># kube-proxyä¼šåŸºäºrrï¼ˆè½®è¯¢ï¼‰çš„ç­–ç•¥ï¼Œå°†è¯·æ±‚åˆ†å‘åˆ°å…¶ä¸­ä¸€ä¸ªpodä¸Šå»</span></span><br><span class="line"><span class="comment"># è¿™ä¸ªè§„åˆ™ä¼šåŒæ—¶åœ¨é›†ç¾¤å†…çš„æ‰€æœ‰èŠ‚ç‚¹ä¸Šéƒ½ç”Ÿæˆï¼Œæ‰€ä»¥åœ¨ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹ä¸Šè®¿é—®éƒ½å¯ä»¥ã€‚</span></span><br><span class="line">[root@node1 ~]<span class="comment"># ipvsadm -Ln</span></span><br><span class="line">IP Virtual Server version 1.2.1 (size=4096)</span><br><span class="line">Prot LocalAddress:Port Scheduler Flags</span><br><span class="line">  -&gt; RemoteAddress:Port           Forward Weight ActiveConn InActConn</span><br><span class="line">TCP  10.97.97.97:80 rr</span><br><span class="line">  -&gt; 10.244.1.39:80               Masq   <span class="number"> 1 </span>    <span class="number"> 0 </span>         0</span><br><span class="line">  -&gt; 10.244.1.40:80               Masq   <span class="number"> 1 </span>    <span class="number"> 0 </span>         0</span><br><span class="line">  -&gt; 10.244.2.33:80               Masq   <span class="number"> 1 </span>    <span class="number"> 0 </span>         0</span><br></pre></td></tr></table></figure><p>kube-proxyç›®å‰æ”¯æŒä¸‰ç§å·¥ä½œæ¨¡å¼:</p><p><strong>userspace æ¨¡å¼</strong></p><p>userspaceæ¨¡å¼ä¸‹ï¼Œkube-proxyä¼šä¸ºæ¯ä¸€ä¸ªServiceåˆ›å»ºä¸€ä¸ªç›‘å¬ç«¯å£ï¼Œå‘å‘Cluster IPçš„è¯·æ±‚è¢«Iptablesè§„åˆ™é‡å®šå‘åˆ°kube-proxyç›‘å¬çš„ç«¯å£ä¸Šï¼Œkube-proxyæ ¹æ®LBç®—æ³•é€‰æ‹©ä¸€ä¸ªæä¾›æœåŠ¡çš„Podå¹¶å’Œå…¶å»ºç«‹é“¾æ¥ï¼Œä»¥å°†è¯·æ±‚è½¬å‘åˆ°Podä¸Šã€‚  è¯¥æ¨¡å¼ä¸‹ï¼Œkube-proxyå……å½“äº†ä¸€ä¸ªå››å±‚è´Ÿè´£å‡è¡¡å™¨çš„è§’è‰²ã€‚ç”±äºkube-proxyè¿è¡Œåœ¨userspaceä¸­ï¼Œåœ¨è¿›è¡Œè½¬å‘å¤„ç†æ—¶ä¼šå¢åŠ å†…æ ¸å’Œç”¨æˆ·ç©ºé—´ä¹‹é—´çš„æ•°æ®æ‹·è´ï¼Œè™½ç„¶æ¯”è¾ƒç¨³å®šï¼Œä½†æ˜¯æ•ˆç‡æ¯”è¾ƒä½ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200509151424280-20220719083321961.png" alt="img"></p><p><strong>iptables æ¨¡å¼</strong></p><p>iptablesæ¨¡å¼ä¸‹ï¼Œkube-proxyä¸ºserviceåç«¯çš„æ¯ä¸ªPodåˆ›å»ºå¯¹åº”çš„iptablesè§„åˆ™ï¼Œç›´æ¥å°†å‘å‘Cluster IPçš„è¯·æ±‚é‡å®šå‘åˆ°ä¸€ä¸ªPod IPã€‚  è¯¥æ¨¡å¼ä¸‹kube-proxyä¸æ‰¿æ‹…å››å±‚è´Ÿè´£å‡è¡¡å™¨çš„è§’è‰²ï¼Œåªè´Ÿè´£åˆ›å»ºiptablesè§„åˆ™ã€‚è¯¥æ¨¡å¼çš„ä¼˜ç‚¹æ˜¯è¾ƒuserspaceæ¨¡å¼æ•ˆç‡æ›´é«˜ï¼Œä½†ä¸èƒ½æä¾›çµæ´»çš„LBç­–ç•¥ï¼Œå½“åç«¯Podä¸å¯ç”¨æ—¶ä¹Ÿæ— æ³•è¿›è¡Œé‡è¯•ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200509152947714-20220719083322027.png" alt="img"></p><p><strong>ipvs æ¨¡å¼</strong></p><p>ipvsæ¨¡å¼å’Œiptablesç±»ä¼¼ï¼Œkube-proxyç›‘æ§Podçš„å˜åŒ–å¹¶åˆ›å»ºç›¸åº”çš„ipvsè§„åˆ™ã€‚ipvsç›¸å¯¹iptablesè½¬å‘æ•ˆç‡æ›´é«˜ã€‚é™¤æ­¤ä»¥å¤–ï¼Œipvsæ”¯æŒæ›´å¤šçš„LBç®—æ³•ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200509153731363-20220719083322089.png" alt="img"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ­¤æ¨¡å¼å¿…é¡»å®‰è£…ipvså†…æ ¸æ¨¡å—ï¼Œå¦åˆ™ä¼šé™çº§ä¸ºiptables</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¼€å¯ipvs</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl edit cm kube-proxy -n kube-system</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹mode: <span class="string">&quot;ipvs&quot;</span></span></span><br><span class="line">[root@k8s-master01 ~]# kubectl delete pod -l k8s-app=kube-proxy -n kube-system</span><br><span class="line">[root@node1 ~]# ipvsadm -Ln</span><br><span class="line">IP Virtual Server version 1.2.1 (size=4096)</span><br><span class="line">Prot LocalAddress:Port Scheduler Flags</span><br><span class="line"><span class="meta prompt_">  -&gt; </span><span class="language-bash">RemoteAddress:Port           Forward Weight ActiveConn InActConn</span></span><br><span class="line">TCP  10.97.97.97:80 rr</span><br><span class="line"><span class="meta prompt_">  -&gt; </span><span class="language-bash">10.244.1.39:80               Masq    1      0          0</span></span><br><span class="line"><span class="meta prompt_">  -&gt; </span><span class="language-bash">10.244.1.40:80               Masq    1      0          0</span></span><br><span class="line"><span class="meta prompt_">  -&gt; </span><span class="language-bash">10.244.2.33:80               Masq    1      0          0</span></span><br></pre></td></tr></table></figure><h2 id="7-2-Serviceç±»å‹"><a href="#7-2-Serviceç±»å‹" class="headerlink" title="7.2 Serviceç±»å‹"></a>7.2 Serviceç±»å‹</h2><p>Serviceçš„èµ„æºæ¸…å•æ–‡ä»¶ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">kind:</span> <span class="string">Service</span>  <span class="comment"># èµ„æºç±»å‹</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span>  <span class="comment"># èµ„æºç‰ˆæœ¬</span></span><br><span class="line"><span class="attr">metadata:</span> <span class="comment"># å…ƒæ•°æ®</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">service</span> <span class="comment"># èµ„æºåç§°</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span> <span class="comment"># å‘½åç©ºé—´</span></span><br><span class="line"><span class="attr">spec:</span> <span class="comment"># æè¿°</span></span><br><span class="line">  <span class="attr">selector:</span> <span class="comment"># æ ‡ç­¾é€‰æ‹©å™¨ï¼Œç”¨äºç¡®å®šå½“å‰serviceä»£ç†å“ªäº›pod</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">nginx</span></span><br><span class="line">  <span class="attr">type:</span> <span class="comment"># Serviceç±»å‹ï¼ŒæŒ‡å®šserviceçš„è®¿é—®æ–¹å¼</span></span><br><span class="line">  <span class="attr">clusterIP:</span>  <span class="comment"># è™šæ‹ŸæœåŠ¡çš„ipåœ°å€</span></span><br><span class="line">  <span class="attr">sessionAffinity:</span> <span class="comment"># sessionäº²å’Œæ€§ï¼Œæ”¯æŒClientIPã€Noneä¸¤ä¸ªé€‰é¡¹</span></span><br><span class="line">  <span class="attr">ports:</span> <span class="comment"># ç«¯å£ä¿¡æ¯</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">protocol:</span> <span class="string">TCP</span> </span><br><span class="line">      <span class="attr">port:</span> <span class="number">3017</span>  <span class="comment"># serviceç«¯å£</span></span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">5003</span> <span class="comment"># podç«¯å£</span></span><br><span class="line">      <span class="attr">nodePort:</span> <span class="number">31122</span> <span class="comment"># ä¸»æœºç«¯å£</span></span><br></pre></td></tr></table></figure><ul><li>ClusterIPï¼šé»˜è®¤å€¼ï¼Œå®ƒæ˜¯Kubernetesç³»ç»Ÿè‡ªåŠ¨åˆ†é…çš„è™šæ‹ŸIPï¼Œåªèƒ½åœ¨é›†ç¾¤å†…éƒ¨è®¿é—®</li><li>NodePortï¼šå°†Serviceé€šè¿‡æŒ‡å®šçš„Nodeä¸Šçš„ç«¯å£æš´éœ²ç»™å¤–éƒ¨ï¼Œé€šè¿‡æ­¤æ–¹æ³•ï¼Œå°±å¯ä»¥åœ¨é›†ç¾¤å¤–éƒ¨è®¿é—®æœåŠ¡</li><li>LoadBalancerï¼šä½¿ç”¨å¤–æ¥è´Ÿè½½å‡è¡¡å™¨å®Œæˆåˆ°æœåŠ¡çš„è´Ÿè½½åˆ†å‘ï¼Œæ³¨æ„æ­¤æ¨¡å¼éœ€è¦å¤–éƒ¨äº‘ç¯å¢ƒæ”¯æŒ</li><li>ExternalNameï¼š æŠŠé›†ç¾¤å¤–éƒ¨çš„æœåŠ¡å¼•å…¥é›†ç¾¤å†…éƒ¨ï¼Œç›´æ¥ä½¿ç”¨</li></ul><h2 id="7-3-Serviceä½¿ç”¨"><a href="#7-3-Serviceä½¿ç”¨" class="headerlink" title="7.3 Serviceä½¿ç”¨"></a>7.3 Serviceä½¿ç”¨</h2><h3 id="7-3-1-å®éªŒç¯å¢ƒå‡†å¤‡"><a href="#7-3-1-å®éªŒç¯å¢ƒå‡†å¤‡" class="headerlink" title="7.3.1 å®éªŒç¯å¢ƒå‡†å¤‡"></a>7.3.1 å®éªŒç¯å¢ƒå‡†å¤‡</h3><p>åœ¨ä½¿ç”¨serviceä¹‹å‰ï¼Œé¦–å…ˆåˆ©ç”¨Deploymentåˆ›å»ºå‡º3ä¸ªpodï¼Œæ³¨æ„è¦ä¸ºpodè®¾ç½®<code>app=nginx-pod</code>çš„æ ‡ç­¾</p><p>åˆ›å»ºdeployment.yamlï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span>      </span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pc-deployment</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span> </span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">nginx-pod</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">nginx-pod</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">80</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@k8s-master01 ~]# kubectl create -f deployment.yaml</span><br><span class="line">deployment.apps/pc-deployment created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹podè¯¦æƒ…</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods -n dev -o wide --show-labels</span><br><span class="line">NAME                             READY   STATUS     IP            NODE     LABELS</span><br><span class="line">pc-deployment-66cb59b984-8p84h   1/1     Running    10.244.1.39   node1    app=nginx-pod</span><br><span class="line">pc-deployment-66cb59b984-vx8vx   1/1     Running    10.244.2.33   node2    app=nginx-pod</span><br><span class="line">pc-deployment-66cb59b984-wnncx   1/1     Running    10.244.1.40   node1    app=nginx-pod</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸ºäº†æ–¹ä¾¿åé¢çš„æµ‹è¯•ï¼Œä¿®æ”¹ä¸‹ä¸‰å°nginxçš„index.htmlé¡µé¢ï¼ˆä¸‰å°ä¿®æ”¹çš„IPåœ°å€ä¸ä¸€è‡´ï¼‰</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">kubectl <span class="built_in">exec</span> -it pc-deployment-66cb59b984-8p84h -n dev /bin/sh</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;10.244.1.39&quot;</span> &gt; /usr/share/nginx/html/index.html</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ä¿®æ”¹å®Œæ¯•ä¹‹åï¼Œè®¿é—®æµ‹è¯•</span></span><br><span class="line">[root@k8s-master01 ~]# curl 10.244.1.39</span><br><span class="line">10.244.1.39</span><br><span class="line">[root@k8s-master01 ~]# curl 10.244.2.33</span><br><span class="line">10.244.2.33</span><br><span class="line">[root@k8s-master01 ~]# curl 10.244.1.40</span><br><span class="line">10.244.1.40</span><br></pre></td></tr></table></figure><h3 id="7-3-2-ClusterIPç±»å‹çš„Service"><a href="#7-3-2-ClusterIPç±»å‹çš„Service" class="headerlink" title="7.3.2 ClusterIPç±»å‹çš„Service"></a>7.3.2 ClusterIPç±»å‹çš„Service</h3><p>åˆ›å»ºservice-clusterip.yamlæ–‡ä»¶</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">service-clusterip</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">nginx-pod</span></span><br><span class="line">  <span class="attr">clusterIP:</span> <span class="number">10.97</span><span class="number">.97</span><span class="number">.97</span> <span class="comment"># serviceçš„ipåœ°å€ï¼Œå¦‚æœä¸å†™ï¼Œé»˜è®¤ä¼šç”Ÿæˆä¸€ä¸ª</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">ClusterIP</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">80</span>  <span class="comment"># Serviceç«¯å£       </span></span><br><span class="line">    <span class="attr">targetPort:</span> <span class="number">80</span> <span class="comment"># podç«¯å£</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºservice</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f service-clusterip.yaml</span><br><span class="line">service/service-clusterip created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹service</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get svc -n dev -o wide</span><br><span class="line">NAME                TYPE        CLUSTER-IP    EXTERNAL-IP   PORT(S)   AGE   SELECTOR</span><br><span class="line">service-clusterip   ClusterIP   10.97.97.97   &lt;none&gt;        80/TCP    13s   app=nginx-pod</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹serviceçš„è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœ¨è¿™é‡Œæœ‰ä¸€ä¸ªEndpointsåˆ—è¡¨ï¼Œé‡Œé¢å°±æ˜¯å½“å‰serviceå¯ä»¥è´Ÿè½½åˆ°çš„æœåŠ¡å…¥å£</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl describe svc service-clusterip -n dev</span><br><span class="line">Name:              service-clusterip</span><br><span class="line">Namespace:         dev</span><br><span class="line">Labels:            &lt;none&gt;</span><br><span class="line">Annotations:       &lt;none&gt;</span><br><span class="line">Selector:          app=nginx-pod</span><br><span class="line">Type:              ClusterIP</span><br><span class="line">IP:                10.97.97.97</span><br><span class="line">Port:              &lt;unset&gt;  80/TCP</span><br><span class="line">TargetPort:        80/TCP</span><br><span class="line">Endpoints:         10.244.1.39:80,10.244.1.40:80,10.244.2.33:80</span><br><span class="line">Session Affinity:  None</span><br><span class="line">Events:            &lt;none&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ipvsçš„æ˜ å°„è§„åˆ™</span></span><br><span class="line">[root@k8s-master01 ~]# ipvsadm -Ln</span><br><span class="line">TCP  10.97.97.97:80 rr</span><br><span class="line"><span class="meta prompt_">  -&gt; </span><span class="language-bash">10.244.1.39:80               Masq    1      0          0</span></span><br><span class="line"><span class="meta prompt_">  -&gt; </span><span class="language-bash">10.244.1.40:80               Masq    1      0          0</span></span><br><span class="line"><span class="meta prompt_">  -&gt; </span><span class="language-bash">10.244.2.33:80               Masq    1      0          0</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¿é—®10.97.97.97:80è§‚å¯Ÿæ•ˆæœ</span></span><br><span class="line">[root@k8s-master01 ~]# curl 10.97.97.97:80</span><br><span class="line">10.244.2.33</span><br></pre></td></tr></table></figure><p><strong>Endpoint</strong></p><p>Endpointæ˜¯kubernetesä¸­çš„ä¸€ä¸ªèµ„æºå¯¹è±¡ï¼Œå­˜å‚¨åœ¨etcdä¸­ï¼Œç”¨æ¥è®°å½•ä¸€ä¸ªserviceå¯¹åº”çš„æ‰€æœ‰podçš„è®¿é—®åœ°å€ï¼Œå®ƒæ˜¯æ ¹æ®serviceé…ç½®æ–‡ä»¶ä¸­selectoræè¿°äº§ç”Ÿçš„ã€‚</p><p>ä¸€ä¸ªServiceç”±ä¸€ç»„Podç»„æˆï¼Œè¿™äº›Podé€šè¿‡Endpointsæš´éœ²å‡ºæ¥ï¼Œ<strong>Endpointsæ˜¯å®ç°å®é™…æœåŠ¡çš„ç«¯ç‚¹é›†åˆ</strong>ã€‚æ¢å¥è¯è¯´ï¼Œserviceå’Œpodä¹‹é—´çš„è”ç³»æ˜¯é€šè¿‡endpointså®ç°çš„ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200509191917069-20220719083322137.png" alt="image-20200509191917069"></p><p><strong>è´Ÿè½½åˆ†å‘ç­–ç•¥</strong></p><p>å¯¹Serviceçš„è®¿é—®è¢«åˆ†å‘åˆ°äº†åç«¯çš„Podä¸Šå»ï¼Œç›®å‰kubernetesæä¾›äº†ä¸¤ç§è´Ÿè½½åˆ†å‘ç­–ç•¥ï¼š</p><ul><li><p>å¦‚æœä¸å®šä¹‰ï¼Œé»˜è®¤ä½¿ç”¨kube-proxyçš„ç­–ç•¥ï¼Œæ¯”å¦‚éšæœºã€è½®è¯¢</p></li><li><p>åŸºäºå®¢æˆ·ç«¯åœ°å€çš„ä¼šè¯ä¿æŒæ¨¡å¼ï¼Œå³æ¥è‡ªåŒä¸€ä¸ªå®¢æˆ·ç«¯å‘èµ·çš„æ‰€æœ‰è¯·æ±‚éƒ½ä¼šè½¬å‘åˆ°å›ºå®šçš„ä¸€ä¸ªPodä¸Š</p><p>æ­¤æ¨¡å¼å¯ä»¥ä½¿åœ¨specä¸­æ·»åŠ <code>sessionAffinity:ClientIP</code>é€‰é¡¹</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ipvsçš„æ˜ å°„è§„åˆ™ã€rr è½®è¯¢ã€‘</span></span><br><span class="line">[root@k8s-master01 ~]# ipvsadm -Ln</span><br><span class="line">TCP  10.97.97.97:80 rr</span><br><span class="line"><span class="meta prompt_">  -&gt; </span><span class="language-bash">10.244.1.39:80               Masq    1      0          0</span></span><br><span class="line"><span class="meta prompt_">  -&gt; </span><span class="language-bash">10.244.1.40:80               Masq    1      0          0</span></span><br><span class="line"><span class="meta prompt_">  -&gt; </span><span class="language-bash">10.244.2.33:80               Masq    1      0          0</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¾ªç¯è®¿é—®æµ‹è¯•</span></span><br><span class="line">[root@k8s-master01 ~]# while true;do curl 10.97.97.97:80; sleep 5; done;</span><br><span class="line">10.244.1.40</span><br><span class="line">10.244.1.39</span><br><span class="line">10.244.2.33</span><br><span class="line">10.244.1.40</span><br><span class="line">10.244.1.39</span><br><span class="line">10.244.2.33</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹åˆ†å‘ç­–ç•¥----sessionAffinity:ClientIP</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ipvsè§„åˆ™ã€persistent ä»£è¡¨æŒä¹…ã€‘</span></span><br><span class="line">[root@k8s-master01 ~]# ipvsadm -Ln</span><br><span class="line">TCP  10.97.97.97:80 rr persistent 10800</span><br><span class="line"><span class="meta prompt_">  -&gt; </span><span class="language-bash">10.244.1.39:80               Masq    1      0          0</span></span><br><span class="line"><span class="meta prompt_">  -&gt; </span><span class="language-bash">10.244.1.40:80               Masq    1      0          0</span></span><br><span class="line"><span class="meta prompt_">  -&gt; </span><span class="language-bash">10.244.2.33:80               Masq    1      0          0</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¾ªç¯è®¿é—®æµ‹è¯•</span></span><br><span class="line">[root@k8s-master01 ~]# while true;do curl 10.97.97.97; sleep 5; done;</span><br><span class="line">10.244.2.33</span><br><span class="line">10.244.2.33</span><br><span class="line">10.244.2.33</span><br><span class="line"><span class="meta prompt_">  </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤service</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl delete -f service-clusterip.yaml</span><br><span class="line">service &quot;service-clusterip&quot; deleted</span><br></pre></td></tr></table></figure><h3 id="7-3-3-HeadLinessç±»å‹çš„Service"><a href="#7-3-3-HeadLinessç±»å‹çš„Service" class="headerlink" title="7.3.3 HeadLinessç±»å‹çš„Service"></a>7.3.3 HeadLinessç±»å‹çš„Service</h3><p>åœ¨æŸäº›åœºæ™¯ä¸­ï¼Œå¼€å‘äººå‘˜å¯èƒ½ä¸æƒ³ä½¿ç”¨Serviceæä¾›çš„è´Ÿè½½å‡è¡¡åŠŸèƒ½ï¼Œè€Œå¸Œæœ›è‡ªå·±æ¥æ§åˆ¶è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œé’ˆå¯¹è¿™ç§æƒ…å†µï¼Œkubernetesæä¾›äº†HeadLiness Serviceï¼Œè¿™ç±»Serviceä¸ä¼šåˆ†é…Cluster IPï¼Œå¦‚æœæƒ³è¦è®¿é—®serviceï¼Œåªèƒ½é€šè¿‡serviceçš„åŸŸåè¿›è¡ŒæŸ¥è¯¢ã€‚</p><p>åˆ›å»ºservice-headliness.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">service-headliness</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">nginx-pod</span></span><br><span class="line">  <span class="attr">clusterIP:</span> <span class="string">None</span> <span class="comment"># å°†clusterIPè®¾ç½®ä¸ºNoneï¼Œå³å¯åˆ›å»ºheadliness Service</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">ClusterIP</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">80</span>    </span><br><span class="line">    <span class="attr">targetPort:</span> <span class="number">80</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºservice</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f service-headliness.yaml</span><br><span class="line">service/service-headliness created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è·å–serviceï¼Œ å‘ç°CLUSTER-IPæœªåˆ†é…</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get svc service-headliness -n dev -o wide</span><br><span class="line">NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE   SELECTOR</span><br><span class="line">service-headliness   ClusterIP   None         &lt;none&gt;        80/TCP    11s   app=nginx-pod</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹serviceè¯¦æƒ…</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl describe svc service-headliness  -n dev</span><br><span class="line">Name:              service-headliness</span><br><span class="line">Namespace:         dev</span><br><span class="line">Labels:            &lt;none&gt;</span><br><span class="line">Annotations:       &lt;none&gt;</span><br><span class="line">Selector:          app=nginx-pod</span><br><span class="line">Type:              ClusterIP</span><br><span class="line">IP:                None</span><br><span class="line">Port:              &lt;unset&gt;  80/TCP</span><br><span class="line">TargetPort:        80/TCP</span><br><span class="line">Endpoints:         10.244.1.39:80,10.244.1.40:80,10.244.2.33:80</span><br><span class="line">Session Affinity:  None</span><br><span class="line">Events:            &lt;none&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹åŸŸåçš„è§£ææƒ…å†µ</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl exec -it pc-deployment-66cb59b984-8p84h -n dev /bin/sh</span><br><span class="line">/ # cat /etc/resolv.conf</span><br><span class="line">nameserver 10.96.0.10</span><br><span class="line">search dev.svc.cluster.local svc.cluster.local cluster.local</span><br><span class="line"></span><br><span class="line">[root@k8s-master01 ~]# dig @10.96.0.10 service-headliness.dev.svc.cluster.local</span><br><span class="line">service-headliness.dev.svc.cluster.local. 30 IN A 10.244.1.40</span><br><span class="line">service-headliness.dev.svc.cluster.local. 30 IN A 10.244.1.39</span><br><span class="line">service-headliness.dev.svc.cluster.local. 30 IN A 10.244.2.33</span><br></pre></td></tr></table></figure><h3 id="7-3-4-NodePortç±»å‹çš„Service"><a href="#7-3-4-NodePortç±»å‹çš„Service" class="headerlink" title="7.3.4 NodePortç±»å‹çš„Service"></a>7.3.4 NodePortç±»å‹çš„Service</h3><p>åœ¨ä¹‹å‰çš„æ ·ä¾‹ä¸­ï¼Œåˆ›å»ºçš„Serviceçš„ipåœ°å€åªæœ‰é›†ç¾¤å†…éƒ¨æ‰å¯ä»¥è®¿é—®ï¼Œå¦‚æœå¸Œæœ›å°†Serviceæš´éœ²ç»™é›†ç¾¤å¤–éƒ¨ä½¿ç”¨ï¼Œé‚£ä¹ˆå°±è¦ä½¿ç”¨åˆ°å¦å¤–ä¸€ç§ç±»å‹çš„Serviceï¼Œç§°ä¸ºNodePortç±»å‹ã€‚NodePortçš„å·¥ä½œåŸç†å…¶å®å°±æ˜¯<strong>å°†serviceçš„ç«¯å£æ˜ å°„åˆ°Nodeçš„ä¸€ä¸ªç«¯å£ä¸Š</strong>ï¼Œç„¶åå°±å¯ä»¥é€šè¿‡<code>NodeIp:NodePort</code>æ¥è®¿é—®serviceäº†ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200620175731338-20220719083322180.png" alt="img"></p><p>åˆ›å»ºservice-nodeport.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">service-nodeport</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">nginx-pod</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">NodePort</span> <span class="comment"># serviceç±»å‹</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line">    <span class="attr">nodePort:</span> <span class="number">30002</span> <span class="comment"># æŒ‡å®šç»‘å®šçš„nodeçš„ç«¯å£(é»˜è®¤çš„å–å€¼èŒƒå›´æ˜¯ï¼š30000-32767), å¦‚æœä¸æŒ‡å®šï¼Œä¼šé»˜è®¤åˆ†é…</span></span><br><span class="line">    <span class="attr">targetPort:</span> <span class="number">80</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºservice</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f service-nodeport.yaml</span><br><span class="line">service/service-nodeport created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹service</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get svc -n dev -o wide</span><br><span class="line">NAME               TYPE       CLUSTER-IP      EXTERNAL-IP   PORT(S)       SELECTOR</span><br><span class="line">service-nodeport   NodePort   10.105.64.191   &lt;none&gt;        80:30002/TCP  app=nginx-pod</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¥ä¸‹æ¥å¯ä»¥é€šè¿‡ç”µè„‘ä¸»æœºçš„æµè§ˆå™¨å»è®¿é—®é›†ç¾¤ä¸­ä»»æ„ä¸€ä¸ªnodeipçš„30002ç«¯å£ï¼Œå³å¯è®¿é—®åˆ°pod</span></span><br></pre></td></tr></table></figure><h3 id="7-3-5-LoadBalancerç±»å‹çš„Service"><a href="#7-3-5-LoadBalancerç±»å‹çš„Service" class="headerlink" title="7.3.5 LoadBalancerç±»å‹çš„Service"></a>7.3.5 LoadBalancerç±»å‹çš„Service</h3><p>LoadBalancerå’ŒNodePortå¾ˆç›¸ä¼¼ï¼Œç›®çš„éƒ½æ˜¯å‘å¤–éƒ¨æš´éœ²ä¸€ä¸ªç«¯å£ï¼ŒåŒºåˆ«åœ¨äºLoadBalancerä¼šåœ¨é›†ç¾¤çš„å¤–éƒ¨å†æ¥åšä¸€ä¸ªè´Ÿè½½å‡è¡¡è®¾å¤‡ï¼Œè€Œè¿™ä¸ªè®¾å¤‡éœ€è¦å¤–éƒ¨ç¯å¢ƒæ”¯æŒçš„ï¼Œå¤–éƒ¨æœåŠ¡å‘é€åˆ°è¿™ä¸ªè®¾å¤‡ä¸Šçš„è¯·æ±‚ï¼Œä¼šè¢«è®¾å¤‡è´Ÿè½½ä¹‹åè½¬å‘åˆ°é›†ç¾¤ä¸­ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200510103945494-20220719083322225.png" alt="img"></p><h3 id="7-3-6-ExternalNameç±»å‹çš„Service"><a href="#7-3-6-ExternalNameç±»å‹çš„Service" class="headerlink" title="7.3.6 ExternalNameç±»å‹çš„Service"></a>7.3.6 ExternalNameç±»å‹çš„Service</h3><p>ExternalNameç±»å‹çš„Serviceç”¨äºå¼•å…¥é›†ç¾¤å¤–éƒ¨çš„æœåŠ¡ï¼Œå®ƒé€šè¿‡<code>externalName</code>å±æ€§æŒ‡å®šå¤–éƒ¨ä¸€ä¸ªæœåŠ¡çš„åœ°å€ï¼Œç„¶ååœ¨é›†ç¾¤å†…éƒ¨è®¿é—®æ­¤serviceå°±å¯ä»¥è®¿é—®åˆ°å¤–éƒ¨çš„æœåŠ¡äº†ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200510113311209-20220719083322266.png" alt="img"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: v1</span><br><span class="line">kind: Service</span><br><span class="line">metadata:</span><br><span class="line">  name: service-externalname</span><br><span class="line">  namespace: dev</span><br><span class="line">spec:</span><br><span class="line">  type: ExternalName # serviceç±»å‹</span><br><span class="line">  externalName: www.baidu.com  #æ”¹æˆipåœ°å€ä¹Ÿå¯ä»¥</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºservice</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl  create -f service-externalname.yaml</span><br><span class="line">service/service-externalname created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŸŸåè§£æ</span></span><br><span class="line">[root@k8s-master01 ~]# dig @10.96.0.10 service-externalname.dev.svc.cluster.local</span><br><span class="line">service-externalname.dev.svc.cluster.local. 30 IN CNAME www.baidu.com.</span><br><span class="line">www.baidu.com.          30      IN      CNAME   www.a.shifen.com.</span><br><span class="line">www.a.shifen.com.       30      IN      A       39.156.66.18</span><br><span class="line">www.a.shifen.com.       30      IN      A       39.156.66.14</span><br></pre></td></tr></table></figure><h2 id="7-4-Ingressä»‹ç»"><a href="#7-4-Ingressä»‹ç»" class="headerlink" title="7.4 Ingressä»‹ç»"></a>7.4 Ingressä»‹ç»</h2><p>åœ¨å‰é¢è¯¾ç¨‹ä¸­å·²ç»æåˆ°ï¼ŒServiceå¯¹é›†ç¾¤ä¹‹å¤–æš´éœ²æœåŠ¡çš„ä¸»è¦æ–¹å¼æœ‰ä¸¤ç§ï¼šNotePortå’ŒLoadBalancerï¼Œä½†æ˜¯è¿™ä¸¤ç§æ–¹å¼ï¼Œéƒ½æœ‰ä¸€å®šçš„ç¼ºç‚¹ï¼š</p><ul><li>NodePortæ–¹å¼çš„ç¼ºç‚¹æ˜¯ä¼šå ç”¨å¾ˆå¤šé›†ç¾¤æœºå™¨çš„ç«¯å£ï¼Œé‚£ä¹ˆå½“é›†ç¾¤æœåŠ¡å˜å¤šçš„æ—¶å€™ï¼Œè¿™ä¸ªç¼ºç‚¹å°±æ„ˆå‘æ˜æ˜¾</li><li>LBæ–¹å¼çš„ç¼ºç‚¹æ˜¯æ¯ä¸ªserviceéœ€è¦ä¸€ä¸ªLBï¼Œæµªè´¹ã€éº»çƒ¦ï¼Œå¹¶ä¸”éœ€è¦kubernetesä¹‹å¤–è®¾å¤‡çš„æ”¯æŒ</li></ul><p>åŸºäºè¿™ç§ç°çŠ¶ï¼Œkubernetesæä¾›äº†Ingressèµ„æºå¯¹è±¡ï¼ŒIngressåªéœ€è¦ä¸€ä¸ªNodePortæˆ–è€…ä¸€ä¸ªLBå°±å¯ä»¥æ»¡è¶³æš´éœ²å¤šä¸ªServiceçš„éœ€æ±‚ã€‚å·¥ä½œæœºåˆ¶å¤§è‡´å¦‚ä¸‹å›¾è¡¨ç¤ºï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200623092808049-20220719083322319.png" alt="img"></p><p>å®é™…ä¸Šï¼ŒIngressç›¸å½“äºä¸€ä¸ª7å±‚çš„è´Ÿè½½å‡è¡¡å™¨ï¼Œæ˜¯kuberneteså¯¹åå‘ä»£ç†çš„ä¸€ä¸ªæŠ½è±¡ï¼Œå®ƒçš„å·¥ä½œåŸç†ç±»ä¼¼äºNginxï¼Œå¯ä»¥ç†è§£æˆåœ¨<strong>Ingressé‡Œå»ºç«‹è¯¸å¤šæ˜ å°„è§„åˆ™ï¼ŒIngress Controlleré€šè¿‡ç›‘å¬è¿™äº›é…ç½®è§„åˆ™å¹¶è½¬åŒ–æˆNginxçš„åå‘ä»£ç†é…ç½® , ç„¶åå¯¹å¤–éƒ¨æä¾›æœåŠ¡</strong>ã€‚åœ¨è¿™é‡Œæœ‰ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š</p><ul><li>ingressï¼škubernetesä¸­çš„ä¸€ä¸ªå¯¹è±¡ï¼Œä½œç”¨æ˜¯å®šä¹‰è¯·æ±‚å¦‚ä½•è½¬å‘åˆ°serviceçš„è§„åˆ™</li><li>ingress controllerï¼šå…·ä½“å®ç°åå‘ä»£ç†åŠè´Ÿè½½å‡è¡¡çš„ç¨‹åºï¼Œå¯¹ingresså®šä¹‰çš„è§„åˆ™è¿›è¡Œè§£æï¼Œæ ¹æ®é…ç½®çš„è§„åˆ™æ¥å®ç°è¯·æ±‚è½¬å‘ï¼Œå®ç°æ–¹å¼æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚Nginx, Contour, Haproxyç­‰ç­‰</li></ul><p>Ingressï¼ˆä»¥Nginxä¸ºä¾‹ï¼‰çš„å·¥ä½œåŸç†å¦‚ä¸‹ï¼š</p><ol><li>ç”¨æˆ·ç¼–å†™Ingressè§„åˆ™ï¼Œè¯´æ˜å“ªä¸ªåŸŸåå¯¹åº”kubernetesé›†ç¾¤ä¸­çš„å“ªä¸ªService</li><li>Ingressæ§åˆ¶å™¨åŠ¨æ€æ„ŸçŸ¥IngressæœåŠ¡è§„åˆ™çš„å˜åŒ–ï¼Œç„¶åç”Ÿæˆä¸€æ®µå¯¹åº”çš„Nginxåå‘ä»£ç†é…ç½®</li><li>Ingressæ§åˆ¶å™¨ä¼šå°†ç”Ÿæˆçš„Nginxé…ç½®å†™å…¥åˆ°ä¸€ä¸ªè¿è¡Œç€çš„NginxæœåŠ¡ä¸­ï¼Œå¹¶åŠ¨æ€æ›´æ–°</li><li>åˆ°æ­¤ä¸ºæ­¢ï¼Œå…¶å®çœŸæ­£åœ¨å·¥ä½œçš„å°±æ˜¯ä¸€ä¸ªNginxäº†ï¼Œå†…éƒ¨é…ç½®äº†ç”¨æˆ·å®šä¹‰çš„è¯·æ±‚è½¬å‘è§„åˆ™</li></ol><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200516112704764-20220719083322380.png" alt="img"></p><h2 id="7-5-Ingressä½¿ç”¨"><a href="#7-5-Ingressä½¿ç”¨" class="headerlink" title="7.5 Ingressä½¿ç”¨"></a>7.5 Ingressä½¿ç”¨</h2><h3 id="7-5-1-ç¯å¢ƒå‡†å¤‡"><a href="#7-5-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="7.5.1 ç¯å¢ƒå‡†å¤‡"></a>7.5.1 ç¯å¢ƒå‡†å¤‡</h3><p><strong>æ­å»ºingressç¯å¢ƒ</strong></p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºæ–‡ä»¶å¤¹</span></span><br><span class="line">[root<span class="meta">@k8s-master01</span> ~]<span class="comment"># mkdir ingress-controller</span></span><br><span class="line">[root<span class="meta">@k8s-master01</span> ~]<span class="comment"># cd ingress-controller/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–ingress-nginxï¼Œæœ¬æ¬¡æ¡ˆä¾‹ä½¿ç”¨çš„æ˜¯0.30ç‰ˆæœ¬</span></span><br><span class="line">[root<span class="meta">@k8s-master01</span> ingress-controller]<span class="comment"># wget https://raw.githubusercontent.com/kubernetes/ingress-nginx/nginx-0.30.0/deploy/static/mandatory.yaml</span></span><br><span class="line">[root<span class="meta">@k8s-master01</span> ingress-controller]<span class="comment"># wget https://raw.githubusercontent.com/kubernetes/ingress-nginx/nginx-0.30.0/deploy/static/provider/baremetal/service-nodeport.yaml</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹mandatory.yamlæ–‡ä»¶ä¸­çš„ä»“åº“</span></span><br><span class="line"><span class="comment"># ä¿®æ”¹quay.io/kubernetes-ingress-controller/nginx-ingress-controller:0.30.0</span></span><br><span class="line"><span class="comment"># ä¸ºquay-mirror.qiniu.com/kubernetes-ingress-controller/nginx-ingress-controller:0.30.0</span></span><br><span class="line"><span class="comment"># åˆ›å»ºingress-nginx</span></span><br><span class="line">[root<span class="meta">@k8s-master01</span> ingress-controller]<span class="comment"># kubectl apply -f ./</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ingress-nginx</span></span><br><span class="line">[root<span class="meta">@k8s-master01</span> ingress-controller]<span class="comment"># kubectl get pod -n ingress-nginx</span></span><br><span class="line">NAME                                           READY   STATUS    RESTARTS   AGE</span><br><span class="line">pod/nginx-ingress-controller-fbf967dd5-4qpbp   1/1     Running   0          12h</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹service</span></span><br><span class="line">[root<span class="meta">@k8s-master01</span> ingress-controller]<span class="comment"># kubectl get svc -n ingress-nginx</span></span><br><span class="line">NAME            TYPE       CLUSTER-IP     EXTERNAL-IP   PORT(S)                      AGE</span><br><span class="line">ingress-nginx   NodePort   10.98.75.163   <span class="variable">&lt;none&gt;</span>        80:32240/TCP,443:31335/TCP   11h</span><br></pre></td></tr></table></figure><p><strong>å‡†å¤‡serviceå’Œpod</strong></p><p>ä¸ºäº†åé¢çš„å®éªŒæ¯”è¾ƒæ–¹ä¾¿ï¼Œåˆ›å»ºå¦‚ä¸‹å›¾æ‰€ç¤ºçš„æ¨¡å‹</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200516102419998-20220719083322430.png" alt="img"></p><p>åˆ›å»ºtomcat-nginx.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nginx-deployment</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">nginx-pod</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">nginx-pod</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">80</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">tomcat-deployment</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">tomcat-pod</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">tomcat-pod</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">tomcat</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">tomcat:8.5-jre10-slim</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">8080</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nginx-service</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">nginx-pod</span></span><br><span class="line">  <span class="attr">clusterIP:</span> <span class="string">None</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">ClusterIP</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line">    <span class="attr">targetPort:</span> <span class="number">80</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">tomcat-service</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">tomcat-pod</span></span><br><span class="line">  <span class="attr">clusterIP:</span> <span class="string">None</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">ClusterIP</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line">    <span class="attr">targetPort:</span> <span class="number">8080</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»º</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f tomcat-nginx.yaml</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get svc -n dev</span><br><span class="line">NAME             TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)    AGE</span><br><span class="line">nginx-service    ClusterIP   None         &lt;none&gt;        80/TCP     48s</span><br><span class="line">tomcat-service   ClusterIP   None         &lt;none&gt;        8080/TCP   48s</span><br></pre></td></tr></table></figure><h3 id="7-5-2-Httpä»£ç†"><a href="#7-5-2-Httpä»£ç†" class="headerlink" title="7.5.2 Httpä»£ç†"></a>7.5.2 Httpä»£ç†</h3><p>åˆ›å»ºingress-http.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">extensions/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Ingress</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-http</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">host:</span> <span class="string">nginx.itheima.com</span></span><br><span class="line">    <span class="attr">http:</span></span><br><span class="line">      <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">/</span></span><br><span class="line">        <span class="attr">backend:</span></span><br><span class="line">          <span class="attr">serviceName:</span> <span class="string">nginx-service</span></span><br><span class="line">          <span class="attr">servicePort:</span> <span class="number">80</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">host:</span> <span class="string">tomcat.itheima.com</span></span><br><span class="line">    <span class="attr">http:</span></span><br><span class="line">      <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">/</span></span><br><span class="line">        <span class="attr">backend:</span></span><br><span class="line">          <span class="attr">serviceName:</span> <span class="string">tomcat-service</span></span><br><span class="line">          <span class="attr">servicePort:</span> <span class="number">8080</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»º</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f ingress-http.yaml</span><br><span class="line">ingress.extensions/ingress-http created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get ing ingress-http -n dev</span><br><span class="line">NAME           HOSTS                                  ADDRESS   PORTS   AGE</span><br><span class="line">ingress-http   nginx.itheima.com,tomcat.itheima.com             80      22s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹è¯¦æƒ…</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl describe ing ingress-http  -n dev</span><br><span class="line">...</span><br><span class="line">Rules:</span><br><span class="line">Host                Path  Backends</span><br><span class="line">----                ----  --------</span><br><span class="line">nginx.itheima.com   / nginx-service:80 (10.244.1.96:80,10.244.1.97:80,10.244.2.112:80)</span><br><span class="line">tomcat.itheima.com  / tomcat-service:8080(10.244.1.94:8080,10.244.1.95:8080,10.244.2.111:8080)</span><br><span class="line">...</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¥ä¸‹æ¥,åœ¨æœ¬åœ°ç”µè„‘ä¸Šé…ç½®hostæ–‡ä»¶,è§£æä¸Šé¢çš„ä¸¤ä¸ªåŸŸååˆ°192.168.109.100(master)ä¸Š</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç„¶å,å°±å¯ä»¥åˆ†åˆ«è®¿é—®tomcat.itheima.com:32240  å’Œ  nginx.itheima.com:32240 æŸ¥çœ‹æ•ˆæœäº†</span></span><br></pre></td></tr></table></figure><h3 id="7-5-3-Httpsä»£ç†"><a href="#7-5-3-Httpsä»£ç†" class="headerlink" title="7.5.3 Httpsä»£ç†"></a>7.5.3 Httpsä»£ç†</h3><p>åˆ›å»ºè¯ä¹¦</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç”Ÿæˆè¯ä¹¦</span></span><br><span class="line">openssl req -x509 -sha256 -nodes -days 365 -newkey rsa:2048 -keyout tls.key -out tls.crt -subj &quot;/C=CN/ST=BJ/L=BJ/O=nginx/CN=itheima.com&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºå¯†é’¥</span></span><br><span class="line">kubectl create secret tls tls-secret --key tls.key --cert tls.crt</span><br></pre></td></tr></table></figure><p>åˆ›å»ºingress-https.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">extensions/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Ingress</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">ingress-https</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">tls:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">hosts:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">nginx.itheima.com</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">tomcat.itheima.com</span></span><br><span class="line">      <span class="attr">secretName:</span> <span class="string">tls-secret</span> <span class="comment"># æŒ‡å®šç§˜é’¥</span></span><br><span class="line">  <span class="attr">rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">host:</span> <span class="string">nginx.itheima.com</span></span><br><span class="line">    <span class="attr">http:</span></span><br><span class="line">      <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">/</span></span><br><span class="line">        <span class="attr">backend:</span></span><br><span class="line">          <span class="attr">serviceName:</span> <span class="string">nginx-service</span></span><br><span class="line">          <span class="attr">servicePort:</span> <span class="number">80</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">host:</span> <span class="string">tomcat.itheima.com</span></span><br><span class="line">    <span class="attr">http:</span></span><br><span class="line">      <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">/</span></span><br><span class="line">        <span class="attr">backend:</span></span><br><span class="line">          <span class="attr">serviceName:</span> <span class="string">tomcat-service</span></span><br><span class="line">          <span class="attr">servicePort:</span> <span class="number">8080</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»º</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f ingress-https.yaml</span><br><span class="line">ingress.extensions/ingress-https created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get ing ingress-https -n dev</span><br><span class="line">NAME            HOSTS                                  ADDRESS         PORTS     AGE</span><br><span class="line">ingress-https   nginx.itheima.com,tomcat.itheima.com   10.104.184.38   80, 443   2m42s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹è¯¦æƒ…</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl describe ing ingress-https -n dev</span><br><span class="line">...</span><br><span class="line">TLS:</span><br><span class="line">  tls-secret terminates nginx.itheima.com,tomcat.itheima.com</span><br><span class="line">Rules:</span><br><span class="line">Host              Path Backends</span><br><span class="line">----              ---- --------</span><br><span class="line">nginx.itheima.com  /  nginx-service:80 (10.244.1.97:80,10.244.1.98:80,10.244.2.119:80)</span><br><span class="line">tomcat.itheima.com /  tomcat-service:8080(10.244.1.99:8080,10.244.2.117:8080,10.244.2.120:8080)</span><br><span class="line">...</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸‹é¢å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®https://nginx.itheima.com:31335 å’Œ https://tomcat.itheima.com:31335æ¥æŸ¥çœ‹äº†</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Doc </category>
          
          <category> Kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kubernetes </tag>
            
            <tag> æ•™ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetesç¬”è®° 6</title>
      <link href="/2022/07/13/287f8a7d1e24-q1jun/"/>
      <url>/2022/07/13/287f8a7d1e24-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="6-Podæ§åˆ¶å™¨è¯¦è§£"><a href="#6-Podæ§åˆ¶å™¨è¯¦è§£" class="headerlink" title="6. Podæ§åˆ¶å™¨è¯¦è§£"></a>6. Podæ§åˆ¶å™¨è¯¦è§£</h1><h2 id="6-1-Podæ§åˆ¶å™¨ä»‹ç»"><a href="#6-1-Podæ§åˆ¶å™¨ä»‹ç»" class="headerlink" title="6.1 Podæ§åˆ¶å™¨ä»‹ç»"></a>6.1 Podæ§åˆ¶å™¨ä»‹ç»</h2><p>Podæ˜¯kubernetesçš„æœ€å°ç®¡ç†å•å…ƒï¼Œåœ¨kubernetesä¸­ï¼ŒæŒ‰ç…§podçš„åˆ›å»ºæ–¹å¼å¯ä»¥å°†å…¶åˆ†ä¸ºä¸¤ç±»ï¼š</p><ul><li>è‡ªä¸»å¼podï¼škubernetesç›´æ¥åˆ›å»ºå‡ºæ¥çš„Podï¼Œè¿™ç§podåˆ é™¤åå°±æ²¡æœ‰äº†ï¼Œä¹Ÿä¸ä¼šé‡å»º</li><li>æ§åˆ¶å™¨åˆ›å»ºçš„podï¼škubernetesé€šè¿‡æ§åˆ¶å™¨åˆ›å»ºçš„podï¼Œè¿™ç§podåˆ é™¤äº†ä¹‹åè¿˜ä¼šè‡ªåŠ¨é‡å»º</li></ul><blockquote><p><strong><code>ä»€ä¹ˆæ˜¯Podæ§åˆ¶å™¨</code></strong></p><p>Podæ§åˆ¶å™¨æ˜¯ç®¡ç†podçš„ä¸­é—´å±‚ï¼Œä½¿ç”¨Podæ§åˆ¶å™¨ä¹‹åï¼Œåªéœ€è¦å‘Šè¯‰Podæ§åˆ¶å™¨ï¼Œæƒ³è¦å¤šå°‘ä¸ªä»€ä¹ˆæ ·çš„Podå°±å¯ä»¥äº†ï¼Œå®ƒä¼šåˆ›å»ºå‡ºæ»¡è¶³æ¡ä»¶çš„Podå¹¶ç¡®ä¿æ¯ä¸€ä¸ªPodèµ„æºå¤„äºç”¨æˆ·æœŸæœ›çš„ç›®æ ‡çŠ¶æ€ã€‚å¦‚æœPodèµ„æºåœ¨è¿è¡Œä¸­å‡ºç°æ•…éšœï¼Œå®ƒä¼šåŸºäºæŒ‡å®šç­–ç•¥é‡æ–°ç¼–æ’Podã€‚</p></blockquote><p>åœ¨kubernetesä¸­ï¼Œæœ‰å¾ˆå¤šç±»å‹çš„podæ§åˆ¶å™¨ï¼Œæ¯ç§éƒ½æœ‰è‡ªå·±çš„é€‚åˆçš„åœºæ™¯ï¼Œå¸¸è§çš„æœ‰ä¸‹é¢è¿™äº›ï¼š</p><ul><li>ReplicationControllerï¼šæ¯”è¾ƒåŸå§‹çš„podæ§åˆ¶å™¨ï¼Œå·²ç»è¢«åºŸå¼ƒï¼Œç”±ReplicaSetæ›¿ä»£</li><li>ReplicaSetï¼šä¿è¯å‰¯æœ¬æ•°é‡ä¸€ç›´ç»´æŒåœ¨æœŸæœ›å€¼ï¼Œå¹¶æ”¯æŒpodæ•°é‡æ‰©ç¼©å®¹ï¼Œé•œåƒç‰ˆæœ¬å‡çº§</li><li>Deploymentï¼šé€šè¿‡æ§åˆ¶ReplicaSetæ¥æ§åˆ¶Podï¼Œå¹¶æ”¯æŒæ»šåŠ¨å‡çº§ã€å›é€€ç‰ˆæœ¬</li><li>Horizontal Pod Autoscalerï¼šå¯ä»¥æ ¹æ®é›†ç¾¤è´Ÿè½½è‡ªåŠ¨æ°´å¹³è°ƒæ•´Podçš„æ•°é‡ï¼Œå®ç°å‰Šå³°å¡«è°·</li><li>DaemonSetï¼šåœ¨é›†ç¾¤ä¸­çš„æŒ‡å®šNodeä¸Šè¿è¡Œä¸”ä»…è¿è¡Œä¸€ä¸ªå‰¯æœ¬ï¼Œä¸€èˆ¬ç”¨äºå®ˆæŠ¤è¿›ç¨‹ç±»çš„ä»»åŠ¡</li><li>Jobï¼šå®ƒåˆ›å»ºå‡ºæ¥çš„podåªè¦å®Œæˆä»»åŠ¡å°±ç«‹å³é€€å‡ºï¼Œä¸éœ€è¦é‡å¯æˆ–é‡å»ºï¼Œç”¨äºæ‰§è¡Œä¸€æ¬¡æ€§ä»»åŠ¡</li><li>Cronjobï¼šå®ƒåˆ›å»ºçš„Podè´Ÿè´£å‘¨æœŸæ€§ä»»åŠ¡æ§åˆ¶ï¼Œä¸éœ€è¦æŒç»­åå°è¿è¡Œ</li><li>StatefulSetï¼šç®¡ç†æœ‰çŠ¶æ€åº”ç”¨</li></ul><h2 id="6-2-ReplicaSet-RS"><a href="#6-2-ReplicaSet-RS" class="headerlink" title="6.2 ReplicaSet(RS)"></a>6.2 ReplicaSet(RS)</h2><p>ReplicaSetçš„ä¸»è¦ä½œç”¨æ˜¯<strong>ä¿è¯ä¸€å®šæ•°é‡çš„podæ­£å¸¸è¿è¡Œ</strong>ï¼Œå®ƒä¼šæŒç»­ç›‘å¬è¿™äº›Podçš„è¿è¡ŒçŠ¶æ€ï¼Œä¸€æ—¦Podå‘ç”Ÿæ•…éšœï¼Œå°±ä¼šé‡å¯æˆ–é‡å»ºã€‚åŒæ—¶å®ƒè¿˜æ”¯æŒå¯¹podæ•°é‡çš„æ‰©ç¼©å®¹å’Œé•œåƒç‰ˆæœ¬çš„å‡é™çº§ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200612005334159.png" alt="img"></p><p>ReplicaSetçš„èµ„æºæ¸…å•æ–‡ä»¶ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span> <span class="comment"># ç‰ˆæœ¬å·</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ReplicaSet</span> <span class="comment"># ç±»å‹       </span></span><br><span class="line"><span class="attr">metadata:</span> <span class="comment"># å…ƒæ•°æ®</span></span><br><span class="line">  <span class="attr">name:</span> <span class="comment"># rsåç§° </span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="comment"># æ‰€å±å‘½åç©ºé—´ </span></span><br><span class="line">  <span class="attr">labels:</span> <span class="comment">#æ ‡ç­¾</span></span><br><span class="line">    <span class="attr">controller:</span> <span class="string">rs</span></span><br><span class="line"><span class="attr">spec:</span> <span class="comment"># è¯¦æƒ…æè¿°</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">3</span> <span class="comment"># å‰¯æœ¬æ•°é‡</span></span><br><span class="line">  <span class="attr">selector:</span> <span class="comment"># é€‰æ‹©å™¨ï¼Œé€šè¿‡å®ƒæŒ‡å®šè¯¥æ§åˆ¶å™¨ç®¡ç†å“ªäº›pod</span></span><br><span class="line">    <span class="attr">matchLabels:</span>      <span class="comment"># LabelsåŒ¹é…è§„åˆ™</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">nginx-pod</span></span><br><span class="line">    <span class="attr">matchExpressions:</span> <span class="comment"># ExpressionsåŒ¹é…è§„åˆ™</span></span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">key:</span> <span class="string">app</span>, <span class="attr">operator:</span> <span class="string">In</span>, <span class="attr">values:</span> [<span class="string">nginx-pod</span>]&#125;</span><br><span class="line">  <span class="attr">template:</span> <span class="comment"># æ¨¡æ¿ï¼Œå½“å‰¯æœ¬æ•°é‡ä¸è¶³æ—¶ï¼Œä¼šæ ¹æ®ä¸‹é¢çš„æ¨¡æ¿åˆ›å»ºpodå‰¯æœ¬</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">nginx-pod</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">80</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œé¢ï¼Œéœ€è¦æ–°äº†è§£çš„é…ç½®é¡¹å°±æ˜¯<code>spec</code>ä¸‹é¢å‡ ä¸ªé€‰é¡¹ï¼š</p><ul><li><p>replicasï¼šæŒ‡å®šå‰¯æœ¬æ•°é‡ï¼Œå…¶å®å°±æ˜¯å½“å‰rsåˆ›å»ºå‡ºæ¥çš„podçš„æ•°é‡ï¼Œé»˜è®¤ä¸º1</p></li><li><p>selectorï¼šé€‰æ‹©å™¨ï¼Œå®ƒçš„ä½œç”¨æ˜¯å»ºç«‹podæ§åˆ¶å™¨å’Œpodä¹‹é—´çš„å…³è”å…³ç³»ï¼Œé‡‡ç”¨çš„Label Selectoræœºåˆ¶</p><p>åœ¨podæ¨¡æ¿ä¸Šå®šä¹‰labelï¼Œåœ¨æ§åˆ¶å™¨ä¸Šå®šä¹‰é€‰æ‹©å™¨ï¼Œå°±å¯ä»¥è¡¨æ˜å½“å‰æ§åˆ¶å™¨èƒ½ç®¡ç†å“ªäº›podäº†</p></li><li><p>templateï¼šæ¨¡æ¿ï¼Œå°±æ˜¯å½“å‰æ§åˆ¶å™¨åˆ›å»ºpodæ‰€ä½¿ç”¨çš„æ¨¡æ¿æ¿ï¼Œé‡Œé¢å…¶å®å°±æ˜¯å‰ä¸€ç« å­¦è¿‡çš„podçš„å®šä¹‰</p></li></ul><p><strong>åˆ›å»ºReplicaSet</strong></p><p>åˆ›å»ºpc-replicaset.yamlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ReplicaSet</span>   </span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pc-replicaset</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">selector:</span> </span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">nginx-pod</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">nginx-pod</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºrs</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pc-replicaset.yaml</span><br><span class="line">replicaset.apps/pc-replicaset created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹rs</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">DESIRED:æœŸæœ›å‰¯æœ¬æ•°é‡</span>  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">CURRENT:å½“å‰å‰¯æœ¬æ•°é‡</span>  </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">READY:å·²ç»å‡†å¤‡å¥½æä¾›æœåŠ¡çš„å‰¯æœ¬æ•°é‡</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get rs pc-replicaset -n dev -o wide</span><br><span class="line">NAME          DESIRED   CURRENT READY AGE   CONTAINERS   IMAGES             SELECTOR</span><br><span class="line">pc-replicaset 3         3       3     22s   nginx        nginx:1.17.1       app=nginx-pod</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å½“å‰æ§åˆ¶å™¨åˆ›å»ºå‡ºæ¥çš„pod</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿™é‡Œå‘ç°æ§åˆ¶å™¨åˆ›å»ºå‡ºæ¥çš„podçš„åç§°æ˜¯åœ¨æ§åˆ¶å™¨åç§°åé¢æ‹¼æ¥äº†-xxxxxéšæœºç </span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pod -n dev</span><br><span class="line">NAME                          READY   STATUS    RESTARTS   AGE</span><br><span class="line">pc-replicaset-6vmvt   1/1     Running   0          54s</span><br><span class="line">pc-replicaset-fmb8f   1/1     Running   0          54s</span><br><span class="line">pc-replicaset-snrk2   1/1     Running   0          54s</span><br></pre></td></tr></table></figure><p><strong>æ‰©ç¼©å®¹</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¼–è¾‘rsçš„å‰¯æœ¬æ•°é‡ï¼Œä¿®æ”¹spec:replicas: 6å³å¯</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl edit rs pc-replicaset -n dev</span><br><span class="line">replicaset.apps/pc-replicaset edited</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹pod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods -n dev</span><br><span class="line">NAME                          READY   STATUS    RESTARTS   AGE</span><br><span class="line">pc-replicaset-6vmvt   1/1     Running   0          114m</span><br><span class="line">pc-replicaset-cftnp   1/1     Running   0          10s</span><br><span class="line">pc-replicaset-fjlm6   1/1     Running   0          10s</span><br><span class="line">pc-replicaset-fmb8f   1/1     Running   0          114m</span><br><span class="line">pc-replicaset-s2whj   1/1     Running   0          10s</span><br><span class="line">pc-replicaset-snrk2   1/1     Running   0          114m</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨å‘½ä»¤å®ç°</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä½¿ç”¨scaleå‘½ä»¤å®ç°æ‰©ç¼©å®¹ï¼Œ åé¢--replicas=nç›´æ¥æŒ‡å®šç›®æ ‡æ•°é‡å³å¯</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl scale rs pc-replicaset --replicas=2 -n dev</span><br><span class="line">replicaset.apps/pc-replicaset scaled</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‘½ä»¤è¿è¡Œå®Œæ¯•ï¼Œç«‹å³æŸ¥çœ‹ï¼Œå‘ç°å·²ç»æœ‰4ä¸ªå¼€å§‹å‡†å¤‡é€€å‡ºäº†</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods -n dev</span><br><span class="line">NAME                       READY   STATUS        RESTARTS   AGE</span><br><span class="line">pc-replicaset-6vmvt   0/1     Terminating   0          118m</span><br><span class="line">pc-replicaset-cftnp   0/1     Terminating   0          4m17s</span><br><span class="line">pc-replicaset-fjlm6   0/1     Terminating   0          4m17s</span><br><span class="line">pc-replicaset-fmb8f   1/1     Running       0          118m</span><br><span class="line">pc-replicaset-s2whj   0/1     Terminating   0          4m17s</span><br><span class="line">pc-replicaset-snrk2   1/1     Running       0          118m</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ç¨ç­‰ç‰‡åˆ»ï¼Œå°±åªå‰©ä¸‹2ä¸ªäº†</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods -n dev</span><br><span class="line">NAME                       READY   STATUS    RESTARTS   AGE</span><br><span class="line">pc-replicaset-fmb8f   1/1     Running   0          119m</span><br><span class="line">pc-replicaset-snrk2   1/1     Running   0          119m</span><br></pre></td></tr></table></figure><p><strong>é•œåƒå‡çº§</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¼–è¾‘rsçš„å®¹å™¨é•œåƒ - image: nginx:1.17.2</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl edit rs pc-replicaset -n dev</span><br><span class="line">replicaset.apps/pc-replicaset edited</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å†æ¬¡æŸ¥çœ‹ï¼Œå‘ç°é•œåƒç‰ˆæœ¬å·²ç»å˜æ›´äº†</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get rs -n dev -o wide</span><br><span class="line">NAME                DESIRED  CURRENT   READY   AGE    CONTAINERS   IMAGES        ...</span><br><span class="line">pc-replicaset       2        2         2       140m   nginx         nginx:1.17.2  ...</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŒæ ·çš„é“ç†ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤å®Œæˆè¿™ä¸ªå·¥ä½œ</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">kubectl <span class="built_in">set</span> image rs rsåç§° å®¹å™¨=é•œåƒç‰ˆæœ¬ -n namespace</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl set image rs pc-replicaset nginx=nginx:1.17.1  -n dev</span><br><span class="line">replicaset.apps/pc-replicaset image updated</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å†æ¬¡æŸ¥çœ‹ï¼Œå‘ç°é•œåƒç‰ˆæœ¬å·²ç»å˜æ›´äº†</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get rs -n dev -o wide</span><br><span class="line">NAME                 DESIRED  CURRENT   READY   AGE    CONTAINERS   IMAGES            ...</span><br><span class="line">pc-replicaset        2        2         2       145m   nginx        nginx:1.17.1 ... </span><br></pre></td></tr></table></figure><p><strong>åˆ é™¤ReplicaSet</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä½¿ç”¨kubectl deleteå‘½ä»¤ä¼šåˆ é™¤æ­¤RSä»¥åŠå®ƒç®¡ç†çš„Pod</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœ¨kubernetesåˆ é™¤RSå‰ï¼Œä¼šå°†RSçš„replicasclearè°ƒæ•´ä¸º0ï¼Œç­‰å¾…æ‰€æœ‰çš„Podè¢«åˆ é™¤åï¼Œåœ¨æ‰§è¡ŒRSå¯¹è±¡çš„åˆ é™¤</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl delete rs pc-replicaset -n dev</span><br><span class="line">replicaset.apps &quot;pc-replicaset&quot; deleted</span><br><span class="line">[root@k8s-master01 ~]# kubectl get pod -n dev -o wide</span><br><span class="line">No resources found in dev namespace.</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¦‚æœå¸Œæœ›ä»…ä»…åˆ é™¤RSå¯¹è±¡ï¼ˆä¿ç•™Podï¼‰ï¼Œå¯ä»¥ä½¿ç”¨kubectl deleteå‘½ä»¤æ—¶æ·»åŠ --cascade=<span class="literal">false</span>é€‰é¡¹ï¼ˆä¸æ¨èï¼‰ã€‚</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl delete rs pc-replicaset -n dev --cascade=false</span><br><span class="line">replicaset.apps &quot;pc-replicaset&quot; deleted</span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods -n dev</span><br><span class="line">NAME                  READY   STATUS    RESTARTS   AGE</span><br><span class="line">pc-replicaset-cl82j   1/1     Running   0          75s</span><br><span class="line">pc-replicaset-dslhb   1/1     Running   0          75s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¹Ÿå¯ä»¥ä½¿ç”¨yamlç›´æ¥åˆ é™¤(æ¨è)</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl delete -f pc-replicaset.yaml</span><br><span class="line">replicaset.apps &quot;pc-replicaset&quot; deleted</span><br></pre></td></tr></table></figure><h2 id="6-3-Deployment-Deploy"><a href="#6-3-Deployment-Deploy" class="headerlink" title="6.3 Deployment(Deploy)"></a>6.3 Deployment(Deploy)</h2><p>ä¸ºäº†æ›´å¥½çš„è§£å†³æœåŠ¡ç¼–æ’çš„é—®é¢˜ï¼Œkubernetesåœ¨V1.2ç‰ˆæœ¬å¼€å§‹ï¼Œå¼•å…¥äº†Deploymentæ§åˆ¶å™¨ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œè¿™ç§æ§åˆ¶å™¨å¹¶ä¸ç›´æ¥ç®¡ç†podï¼Œè€Œæ˜¯é€šè¿‡ç®¡ç†ReplicaSetæ¥ç®€ä»‹ç®¡ç†Podï¼Œå³ï¼šDeploymentç®¡ç†ReplicaSetï¼ŒReplicaSetç®¡ç†Podã€‚æ‰€ä»¥Deploymentæ¯”ReplicaSetåŠŸèƒ½æ›´åŠ å¼ºå¤§ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200612005524778.png" alt="img"></p><p>Deploymentä¸»è¦åŠŸèƒ½æœ‰ä¸‹é¢å‡ ä¸ªï¼š</p><ul><li>æ”¯æŒReplicaSetçš„æ‰€æœ‰åŠŸèƒ½</li><li>æ”¯æŒå‘å¸ƒçš„åœæ­¢ã€ç»§ç»­</li><li>æ”¯æŒæ»šåŠ¨å‡çº§å’Œå›æ»šç‰ˆæœ¬</li></ul><p>Deploymentçš„èµ„æºæ¸…å•æ–‡ä»¶ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span> <span class="comment"># ç‰ˆæœ¬å·</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span> <span class="comment"># ç±»å‹       </span></span><br><span class="line"><span class="attr">metadata:</span> <span class="comment"># å…ƒæ•°æ®</span></span><br><span class="line">  <span class="attr">name:</span> <span class="comment"># rsåç§° </span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="comment"># æ‰€å±å‘½åç©ºé—´ </span></span><br><span class="line">  <span class="attr">labels:</span> <span class="comment">#æ ‡ç­¾</span></span><br><span class="line">    <span class="attr">controller:</span> <span class="string">deploy</span></span><br><span class="line"><span class="attr">spec:</span> <span class="comment"># è¯¦æƒ…æè¿°</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">3</span> <span class="comment"># å‰¯æœ¬æ•°é‡</span></span><br><span class="line">  <span class="attr">revisionHistoryLimit:</span> <span class="number">3</span> <span class="comment"># ä¿ç•™å†å²ç‰ˆæœ¬</span></span><br><span class="line">  <span class="attr">paused:</span> <span class="literal">false</span> <span class="comment"># æš‚åœéƒ¨ç½²ï¼Œé»˜è®¤æ˜¯false</span></span><br><span class="line">  <span class="attr">progressDeadlineSeconds:</span> <span class="number">600</span> <span class="comment"># éƒ¨ç½²è¶…æ—¶æ—¶é—´ï¼ˆsï¼‰ï¼Œé»˜è®¤æ˜¯600</span></span><br><span class="line">  <span class="attr">strategy:</span> <span class="comment"># ç­–ç•¥</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">RollingUpdate</span> <span class="comment"># æ»šåŠ¨æ›´æ–°ç­–ç•¥</span></span><br><span class="line">    <span class="attr">rollingUpdate:</span> <span class="comment"># æ»šåŠ¨æ›´æ–°</span></span><br><span class="line">      <span class="attr">maxSurge:</span> <span class="number">30</span><span class="string">%</span> <span class="comment"># æœ€å¤§é¢å¤–å¯ä»¥å­˜åœ¨çš„å‰¯æœ¬æ•°ï¼Œå¯ä»¥ä¸ºç™¾åˆ†æ¯”ï¼Œä¹Ÿå¯ä»¥ä¸ºæ•´æ•°</span></span><br><span class="line">      <span class="attr">maxUnavailable:</span> <span class="number">30</span><span class="string">%</span> <span class="comment"># æœ€å¤§ä¸å¯ç”¨çŠ¶æ€çš„ Pod çš„æœ€å¤§å€¼ï¼Œå¯ä»¥ä¸ºç™¾åˆ†æ¯”ï¼Œä¹Ÿå¯ä»¥ä¸ºæ•´æ•°</span></span><br><span class="line">  <span class="attr">selector:</span> <span class="comment"># é€‰æ‹©å™¨ï¼Œé€šè¿‡å®ƒæŒ‡å®šè¯¥æ§åˆ¶å™¨ç®¡ç†å“ªäº›pod</span></span><br><span class="line">    <span class="attr">matchLabels:</span>      <span class="comment"># LabelsåŒ¹é…è§„åˆ™</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">nginx-pod</span></span><br><span class="line">    <span class="attr">matchExpressions:</span> <span class="comment"># ExpressionsåŒ¹é…è§„åˆ™</span></span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">key:</span> <span class="string">app</span>, <span class="attr">operator:</span> <span class="string">In</span>, <span class="attr">values:</span> [<span class="string">nginx-pod</span>]&#125;</span><br><span class="line">  <span class="attr">template:</span> <span class="comment"># æ¨¡æ¿ï¼Œå½“å‰¯æœ¬æ•°é‡ä¸è¶³æ—¶ï¼Œä¼šæ ¹æ®ä¸‹é¢çš„æ¨¡æ¿åˆ›å»ºpodå‰¯æœ¬</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">nginx-pod</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">80</span></span><br></pre></td></tr></table></figure><p><strong>åˆ›å»ºdeployment</strong></p><p>åˆ›å»ºpc-deployment.yamlï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span>      </span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pc-deployment</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span> </span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">nginx-pod</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">nginx-pod</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºdeployment</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pc-deployment.yaml --record=true</span><br><span class="line">deployment.apps/pc-deployment created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹deployment</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">UP-TO-DATE æœ€æ–°ç‰ˆæœ¬çš„podçš„æ•°é‡</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">AVAILABLE  å½“å‰å¯ç”¨çš„podçš„æ•°é‡</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get deploy pc-deployment -n dev</span><br><span class="line">NAME            READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">pc-deployment   3/3     3            3           15s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹rs</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‘ç°rsçš„åç§°æ˜¯åœ¨åŸæ¥deploymentçš„åå­—åé¢æ·»åŠ äº†ä¸€ä¸ª10ä½æ•°çš„éšæœºä¸²</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get rs -n dev</span><br><span class="line">NAME                       DESIRED   CURRENT   READY   AGE</span><br><span class="line">pc-deployment-6696798b78   3         3         3       23s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹pod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods -n dev</span><br><span class="line">NAME                             READY   STATUS    RESTARTS   AGE</span><br><span class="line">pc-deployment-6696798b78-d2c8n   1/1     Running   0          107s</span><br><span class="line">pc-deployment-6696798b78-smpvp   1/1     Running   0          107s</span><br><span class="line">pc-deployment-6696798b78-wvjd8   1/1     Running   0          107s</span><br></pre></td></tr></table></figure><p><strong>æ‰©ç¼©å®¹</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å˜æ›´å‰¯æœ¬æ•°é‡ä¸º5ä¸ª</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl scale deploy pc-deployment --replicas=5  -n dev</span><br><span class="line">deployment.apps/pc-deployment scaled</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹deployment</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get deploy pc-deployment -n dev</span><br><span class="line">NAME            READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">pc-deployment   5/5     5            5           2m</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹pod</span></span><br><span class="line">[root@k8s-master01 ~]#  kubectl get pods -n dev</span><br><span class="line">NAME                             READY   STATUS    RESTARTS   AGE</span><br><span class="line">pc-deployment-6696798b78-d2c8n   1/1     Running   0          4m19s</span><br><span class="line">pc-deployment-6696798b78-jxmdq   1/1     Running   0          94s</span><br><span class="line">pc-deployment-6696798b78-mktqv   1/1     Running   0          93s</span><br><span class="line">pc-deployment-6696798b78-smpvp   1/1     Running   0          4m19s</span><br><span class="line">pc-deployment-6696798b78-wvjd8   1/1     Running   0          4m19s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¼–è¾‘deploymentçš„å‰¯æœ¬æ•°é‡ï¼Œä¿®æ”¹spec:replicas: 4å³å¯</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl edit deploy pc-deployment -n dev</span><br><span class="line">deployment.apps/pc-deployment edited</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹pod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods -n dev</span><br><span class="line">NAME                             READY   STATUS    RESTARTS   AGE</span><br><span class="line">pc-deployment-6696798b78-d2c8n   1/1     Running   0          5m23s</span><br><span class="line">pc-deployment-6696798b78-jxmdq   1/1     Running   0          2m38s</span><br><span class="line">pc-deployment-6696798b78-smpvp   1/1     Running   0          5m23s</span><br><span class="line">pc-deployment-6696798b78-wvjd8   1/1     Running   0          5m23s</span><br></pre></td></tr></table></figure><p><strong>é•œåƒæ›´æ–°</strong></p><p>deploymentæ”¯æŒä¸¤ç§æ›´æ–°ç­–ç•¥:<code>é‡å»ºæ›´æ–°</code>å’Œ<code>æ»šåŠ¨æ›´æ–°</code>,å¯ä»¥é€šè¿‡<code>strategy</code>æŒ‡å®šç­–ç•¥ç±»å‹,æ”¯æŒä¸¤ä¸ªå±æ€§:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">strategyï¼šæŒ‡å®šæ–°çš„Podæ›¿æ¢æ—§çš„Podçš„ç­–ç•¥ï¼Œ</span> <span class="string">æ”¯æŒä¸¤ä¸ªå±æ€§ï¼š</span></span><br><span class="line">  <span class="string">typeï¼šæŒ‡å®šç­–ç•¥ç±»å‹ï¼Œæ”¯æŒä¸¤ç§ç­–ç•¥</span></span><br><span class="line">    <span class="string">Recreateï¼šåœ¨åˆ›å»ºå‡ºæ–°çš„Podä¹‹å‰ä¼šå…ˆæ€æ‰æ‰€æœ‰å·²å­˜åœ¨çš„Pod</span></span><br><span class="line">    <span class="string">RollingUpdateï¼šæ»šåŠ¨æ›´æ–°ï¼Œå°±æ˜¯æ€æ­»ä¸€éƒ¨åˆ†ï¼Œå°±å¯åŠ¨ä¸€éƒ¨åˆ†ï¼Œåœ¨æ›´æ–°è¿‡ç¨‹ä¸­ï¼Œå­˜åœ¨ä¸¤ä¸ªç‰ˆæœ¬Pod</span></span><br><span class="line">  <span class="string">rollingUpdateï¼šå½“typeä¸ºRollingUpdateæ—¶ç”Ÿæ•ˆï¼Œç”¨äºä¸ºRollingUpdateè®¾ç½®å‚æ•°ï¼Œæ”¯æŒä¸¤ä¸ªå±æ€§ï¼š</span></span><br><span class="line">    <span class="string">maxUnavailableï¼šç”¨æ¥æŒ‡å®šåœ¨å‡çº§è¿‡ç¨‹ä¸­ä¸å¯ç”¨Podçš„æœ€å¤§æ•°é‡ï¼Œé»˜è®¤ä¸º25%ã€‚</span></span><br><span class="line">    <span class="string">maxSurgeï¼š</span> <span class="string">ç”¨æ¥æŒ‡å®šåœ¨å‡çº§è¿‡ç¨‹ä¸­å¯ä»¥è¶…è¿‡æœŸæœ›çš„Podçš„æœ€å¤§æ•°é‡ï¼Œé»˜è®¤ä¸º25%ã€‚</span></span><br></pre></td></tr></table></figure><p>é‡å»ºæ›´æ–°</p><ol><li>ç¼–è¾‘pc-deployment.yaml,åœ¨specèŠ‚ç‚¹ä¸‹æ·»åŠ æ›´æ–°ç­–ç•¥</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">strategy:</span> <span class="comment"># ç­–ç•¥</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">Recreate</span> <span class="comment"># é‡å»ºæ›´æ–°</span></span><br></pre></td></tr></table></figure><ol start="2"><li>åˆ›å»ºdeployè¿›è¡ŒéªŒè¯</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å˜æ›´é•œåƒ</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl set image deployment pc-deployment nginx=nginx:1.17.2 -n dev</span><br><span class="line">deployment.apps/pc-deployment image updated</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è§‚å¯Ÿå‡çº§è¿‡ç¨‹</span></span><br><span class="line">[root@k8s-master01 ~]#  kubectl get pods -n dev -w</span><br><span class="line">NAME                             READY   STATUS    RESTARTS   AGE</span><br><span class="line">pc-deployment-5d89bdfbf9-65qcw   1/1     Running   0          31s</span><br><span class="line">pc-deployment-5d89bdfbf9-w5nzv   1/1     Running   0          31s</span><br><span class="line">pc-deployment-5d89bdfbf9-xpt7w   1/1     Running   0          31s</span><br><span class="line"></span><br><span class="line">pc-deployment-5d89bdfbf9-xpt7w   1/1     Terminating   0          41s</span><br><span class="line">pc-deployment-5d89bdfbf9-65qcw   1/1     Terminating   0          41s</span><br><span class="line">pc-deployment-5d89bdfbf9-w5nzv   1/1     Terminating   0          41s</span><br><span class="line"></span><br><span class="line">pc-deployment-675d469f8b-grn8z   0/1     Pending       0          0s</span><br><span class="line">pc-deployment-675d469f8b-hbl4v   0/1     Pending       0          0s</span><br><span class="line">pc-deployment-675d469f8b-67nz2   0/1     Pending       0          0s</span><br><span class="line"></span><br><span class="line">pc-deployment-675d469f8b-grn8z   0/1     ContainerCreating   0          0s</span><br><span class="line">pc-deployment-675d469f8b-hbl4v   0/1     ContainerCreating   0          0s</span><br><span class="line">pc-deployment-675d469f8b-67nz2   0/1     ContainerCreating   0          0s</span><br><span class="line"></span><br><span class="line">pc-deployment-675d469f8b-grn8z   1/1     Running             0          1s</span><br><span class="line">pc-deployment-675d469f8b-67nz2   1/1     Running             0          1s</span><br><span class="line">pc-deployment-675d469f8b-hbl4v   1/1     Running             0          2s</span><br></pre></td></tr></table></figure><p>æ»šåŠ¨æ›´æ–°</p><ol><li>ç¼–è¾‘pc-deployment.yaml,åœ¨specèŠ‚ç‚¹ä¸‹æ·»åŠ æ›´æ–°ç­–ç•¥</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">strategy:</span> <span class="comment"># ç­–ç•¥</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">RollingUpdate</span> <span class="comment"># æ»šåŠ¨æ›´æ–°ç­–ç•¥</span></span><br><span class="line">    <span class="attr">rollingUpdate:</span></span><br><span class="line">      <span class="attr">maxSurge:</span> <span class="number">25</span><span class="string">%</span> </span><br><span class="line">      <span class="attr">maxUnavailable:</span> <span class="number">25</span><span class="string">%</span></span><br></pre></td></tr></table></figure><ol start="2"><li>åˆ›å»ºdeployè¿›è¡ŒéªŒè¯</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å˜æ›´é•œåƒ</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl set image deployment pc-deployment nginx=nginx:1.17.3 -n dev </span><br><span class="line">deployment.apps/pc-deployment image updated</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è§‚å¯Ÿå‡çº§è¿‡ç¨‹</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods -n dev -w</span><br><span class="line">NAME                           READY   STATUS    RESTARTS   AGE</span><br><span class="line">pc-deployment-c848d767-8rbzt   1/1     Running   0          31m</span><br><span class="line">pc-deployment-c848d767-h4p68   1/1     Running   0          31m</span><br><span class="line">pc-deployment-c848d767-hlmz4   1/1     Running   0          31m</span><br><span class="line">pc-deployment-c848d767-rrqcn   1/1     Running   0          31m</span><br><span class="line"></span><br><span class="line">pc-deployment-966bf7f44-226rx   0/1     Pending             0          0s</span><br><span class="line">pc-deployment-966bf7f44-226rx   0/1     ContainerCreating   0          0s</span><br><span class="line">pc-deployment-966bf7f44-226rx   1/1     Running             0          1s</span><br><span class="line">pc-deployment-c848d767-h4p68    0/1     Terminating         0          34m</span><br><span class="line"></span><br><span class="line">pc-deployment-966bf7f44-cnd44   0/1     Pending             0          0s</span><br><span class="line">pc-deployment-966bf7f44-cnd44   0/1     ContainerCreating   0          0s</span><br><span class="line">pc-deployment-966bf7f44-cnd44   1/1     Running             0          2s</span><br><span class="line">pc-deployment-c848d767-hlmz4    0/1     Terminating         0          34m</span><br><span class="line"></span><br><span class="line">pc-deployment-966bf7f44-px48p   0/1     Pending             0          0s</span><br><span class="line">pc-deployment-966bf7f44-px48p   0/1     ContainerCreating   0          0s</span><br><span class="line">pc-deployment-966bf7f44-px48p   1/1     Running             0          0s</span><br><span class="line">pc-deployment-c848d767-8rbzt    0/1     Terminating         0          34m</span><br><span class="line"></span><br><span class="line">pc-deployment-966bf7f44-dkmqp   0/1     Pending             0          0s</span><br><span class="line">pc-deployment-966bf7f44-dkmqp   0/1     ContainerCreating   0          0s</span><br><span class="line">pc-deployment-966bf7f44-dkmqp   1/1     Running             0          2s</span><br><span class="line">pc-deployment-c848d767-rrqcn    0/1     Terminating         0          34m</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è‡³æ­¤ï¼Œæ–°ç‰ˆæœ¬çš„podåˆ›å»ºå®Œæ¯•ï¼Œå°±ç‰ˆæœ¬çš„podé”€æ¯å®Œæ¯•</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸­é—´è¿‡ç¨‹æ˜¯æ»šåŠ¨è¿›è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è¾¹é”€æ¯è¾¹åˆ›å»º</span></span><br></pre></td></tr></table></figure><p>æ»šåŠ¨æ›´æ–°çš„è¿‡ç¨‹ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200416140251491.png" alt="img"></p><p>é•œåƒæ›´æ–°ä¸­rsçš„å˜åŒ–</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹rs,å‘ç°åŸæ¥çš„rsçš„ä¾æ—§å­˜åœ¨ï¼Œåªæ˜¯podæ•°é‡å˜ä¸ºäº†0ï¼Œè€Œååˆæ–°äº§ç”Ÿäº†ä¸€ä¸ªrsï¼Œpodæ•°é‡ä¸º4</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å…¶å®è¿™å°±æ˜¯deploymentèƒ½å¤Ÿè¿›è¡Œç‰ˆæœ¬å›é€€çš„å¥¥å¦™æ‰€åœ¨ï¼Œåé¢ä¼šè¯¦ç»†è§£é‡Š</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get rs -n dev</span><br><span class="line">NAME                       DESIRED   CURRENT   READY   AGE</span><br><span class="line">pc-deployment-6696798b78   0         0         0       7m37s</span><br><span class="line">pc-deployment-6696798b11   0         0         0       5m37s</span><br><span class="line">pc-deployment-c848d76789   4         4         4       72s</span><br></pre></td></tr></table></figure><p><strong>ç‰ˆæœ¬å›é€€</strong></p><p>deploymentæ”¯æŒç‰ˆæœ¬å‡çº§è¿‡ç¨‹ä¸­çš„æš‚åœã€ç»§ç»­åŠŸèƒ½ä»¥åŠç‰ˆæœ¬å›é€€ç­‰è¯¸å¤šåŠŸèƒ½ï¼Œä¸‹é¢å…·ä½“æ¥çœ‹.</p><p>kubectl rolloutï¼š ç‰ˆæœ¬å‡çº§ç›¸å…³åŠŸèƒ½ï¼Œæ”¯æŒä¸‹é¢çš„é€‰é¡¹ï¼š</p><ul><li>status æ˜¾ç¤ºå½“å‰å‡çº§çŠ¶æ€</li><li>history æ˜¾ç¤º å‡çº§å†å²è®°å½•</li><li>pause æš‚åœç‰ˆæœ¬å‡çº§è¿‡ç¨‹</li><li>resume ç»§ç»­å·²ç»æš‚åœçš„ç‰ˆæœ¬å‡çº§è¿‡ç¨‹</li><li>restart é‡å¯ç‰ˆæœ¬å‡çº§è¿‡ç¨‹</li><li>undo å›æ»šåˆ°ä¸Šä¸€çº§ç‰ˆæœ¬ï¼ˆå¯ä»¥ä½¿ç”¨â€“to-revisionå›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬ï¼‰</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å½“å‰å‡çº§ç‰ˆæœ¬çš„çŠ¶æ€</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl rollout status deploy pc-deployment -n dev</span><br><span class="line">deployment &quot;pc-deployment&quot; successfully rolled out</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å‡çº§å†å²è®°å½•</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl rollout history deploy pc-deployment -n dev</span><br><span class="line">deployment.apps/pc-deployment</span><br><span class="line">REVISION  CHANGE-CAUSE</span><br><span class="line">1         kubectl create --filename=pc-deployment.yaml --record=true</span><br><span class="line">2         kubectl create --filename=pc-deployment.yaml --record=true</span><br><span class="line">3         kubectl create --filename=pc-deployment.yaml --record=true</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯ä»¥å‘ç°æœ‰ä¸‰æ¬¡ç‰ˆæœ¬è®°å½•ï¼Œè¯´æ˜å®Œæˆè¿‡ä¸¤æ¬¡å‡çº§</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç‰ˆæœ¬å›æ»š</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿™é‡Œç›´æ¥ä½¿ç”¨--to-revision=1å›æ»šåˆ°äº†1ç‰ˆæœ¬ï¼Œ å¦‚æœçœç•¥è¿™ä¸ªé€‰é¡¹ï¼Œå°±æ˜¯å›é€€åˆ°ä¸Šä¸ªç‰ˆæœ¬ï¼Œå°±æ˜¯2ç‰ˆæœ¬</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl rollout undo deployment pc-deployment --to-revision=1 -n dev</span><br><span class="line">deployment.apps/pc-deployment rolled back</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å‘ç°ï¼Œé€šè¿‡nginxé•œåƒç‰ˆæœ¬å¯ä»¥å‘ç°åˆ°äº†ç¬¬ä¸€ç‰ˆ</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get deploy -n dev -o wide</span><br><span class="line">NAME            READY   UP-TO-DATE   AVAILABLE   AGE   CONTAINERS   IMAGES         </span><br><span class="line">pc-deployment   4/4     4            4           74m   nginx        nginx:1.17.1   </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹rsï¼Œå‘ç°ç¬¬ä¸€ä¸ªrsä¸­æœ‰4ä¸ªpodè¿è¡Œï¼Œåé¢ä¸¤ä¸ªç‰ˆæœ¬çš„rsä¸­podä¸ºè¿è¡Œ</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å…¶å®deploymentä¹‹æ‰€ä»¥å¯æ˜¯å®ç°ç‰ˆæœ¬çš„å›æ»šï¼Œå°±æ˜¯é€šè¿‡è®°å½•ä¸‹å†å²rsæ¥å®ç°çš„ï¼Œ</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸€æ—¦æƒ³å›æ»šåˆ°å“ªä¸ªç‰ˆæœ¬ï¼Œåªéœ€è¦å°†å½“å‰ç‰ˆæœ¬podæ•°é‡é™ä¸º0ï¼Œç„¶åå°†å›æ»šç‰ˆæœ¬çš„podæå‡ä¸ºç›®æ ‡æ•°é‡å°±å¯ä»¥äº†</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get rs -n dev</span><br><span class="line">NAME                       DESIRED   CURRENT   READY   AGE</span><br><span class="line">pc-deployment-6696798b78   4         4         4       78m</span><br><span class="line">pc-deployment-966bf7f44    0         0         0       37m</span><br><span class="line">pc-deployment-c848d767     0         0         0       71m</span><br></pre></td></tr></table></figure><p><strong>é‡‘ä¸é›€å‘å¸ƒ</strong></p><p>Deploymentæ§åˆ¶å™¨æ”¯æŒæ§åˆ¶æ›´æ–°è¿‡ç¨‹ä¸­çš„æ§åˆ¶ï¼Œå¦‚â€œæš‚åœ(pause)â€æˆ–â€œç»§ç»­(resume)â€æ›´æ–°æ“ä½œã€‚</p><p>æ¯”å¦‚æœ‰ä¸€æ‰¹æ–°çš„Podèµ„æºåˆ›å»ºå®Œæˆåç«‹å³æš‚åœæ›´æ–°è¿‡ç¨‹ï¼Œæ­¤æ—¶ï¼Œä»…å­˜åœ¨ä¸€éƒ¨åˆ†æ–°ç‰ˆæœ¬çš„åº”ç”¨ï¼Œä¸»ä½“éƒ¨åˆ†è¿˜æ˜¯æ—§çš„ç‰ˆæœ¬ã€‚ç„¶åï¼Œå†ç­›é€‰ä¸€å°éƒ¨åˆ†çš„ç”¨æˆ·è¯·æ±‚è·¯ç”±åˆ°æ–°ç‰ˆæœ¬çš„Podåº”ç”¨ï¼Œç»§ç»­è§‚å¯Ÿèƒ½å¦ç¨³å®šåœ°æŒ‰æœŸæœ›çš„æ–¹å¼è¿è¡Œã€‚ç¡®å®šæ²¡é—®é¢˜ä¹‹åå†ç»§ç»­å®Œæˆä½™ä¸‹çš„Podèµ„æºæ»šåŠ¨æ›´æ–°ï¼Œå¦åˆ™ç«‹å³å›æ»šæ›´æ–°æ“ä½œã€‚è¿™å°±æ˜¯æ‰€è°“çš„é‡‘ä¸é›€å‘å¸ƒã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ›´æ–°deploymentçš„ç‰ˆæœ¬ï¼Œå¹¶é…ç½®æš‚åœdeployment</span></span><br><span class="line">[root@k8s-master01 ~]#  kubectl set image deploy pc-deployment nginx=nginx:1.17.4 -n dev &amp;&amp; kubectl rollout pause deployment pc-deployment  -n dev</span><br><span class="line">deployment.apps/pc-deployment image updated</span><br><span class="line">deployment.apps/pc-deployment paused</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">è§‚å¯Ÿæ›´æ–°çŠ¶æ€</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl rollout status deploy pc-deployment -n devã€€</span><br><span class="line">Waiting for deployment &quot;pc-deployment&quot; rollout to finish: 2 out of 4 new replicas have been updated...</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç›‘æ§æ›´æ–°çš„è¿‡ç¨‹ï¼Œå¯ä»¥çœ‹åˆ°å·²ç»æ–°å¢äº†ä¸€ä¸ªèµ„æºï¼Œä½†æ˜¯å¹¶æœªæŒ‰ç…§é¢„æœŸçš„çŠ¶æ€å»åˆ é™¤ä¸€ä¸ªæ—§çš„èµ„æºï¼Œå°±æ˜¯å› ä¸ºä½¿ç”¨äº†pauseæš‚åœå‘½ä»¤</span></span><br><span class="line"></span><br><span class="line">[root@k8s-master01 ~]# kubectl get rs -n dev -o wide</span><br><span class="line">NAME                       DESIRED   CURRENT   READY   AGE     CONTAINERS   IMAGES         </span><br><span class="line">pc-deployment-5d89bdfbf9   3         3         3       19m     nginx        nginx:1.17.1   </span><br><span class="line">pc-deployment-675d469f8b   0         0         0       14m     nginx        nginx:1.17.2   </span><br><span class="line">pc-deployment-6c9f56fcfb   2         2         2       3m16s   nginx        nginx:1.17.4   </span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods -n dev</span><br><span class="line">NAME                             READY   STATUS    RESTARTS   AGE</span><br><span class="line">pc-deployment-5d89bdfbf9-rj8sq   1/1     Running   0          7m33s</span><br><span class="line">pc-deployment-5d89bdfbf9-ttwgg   1/1     Running   0          7m35s</span><br><span class="line">pc-deployment-5d89bdfbf9-v4wvc   1/1     Running   0          7m34s</span><br><span class="line">pc-deployment-6c9f56fcfb-996rt   1/1     Running   0          3m31s</span><br><span class="line">pc-deployment-6c9f56fcfb-j2gtj   1/1     Running   0          3m31s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¡®ä¿æ›´æ–°çš„podæ²¡é—®é¢˜äº†ï¼Œç»§ç»­æ›´æ–°</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl rollout resume deploy pc-deployment -n dev</span><br><span class="line">deployment.apps/pc-deployment resumed</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æœ€åçš„æ›´æ–°æƒ…å†µ</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get rs -n dev -o wide</span><br><span class="line">NAME                       DESIRED   CURRENT   READY   AGE     CONTAINERS   IMAGES         </span><br><span class="line">pc-deployment-5d89bdfbf9   0         0         0       21m     nginx        nginx:1.17.1   </span><br><span class="line">pc-deployment-675d469f8b   0         0         0       16m     nginx        nginx:1.17.2   </span><br><span class="line">pc-deployment-6c9f56fcfb   4         4         4       5m11s   nginx        nginx:1.17.4   </span><br><span class="line"></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods -n dev</span><br><span class="line">NAME                             READY   STATUS    RESTARTS   AGE</span><br><span class="line">pc-deployment-6c9f56fcfb-7bfwh   1/1     Running   0          37s</span><br><span class="line">pc-deployment-6c9f56fcfb-996rt   1/1     Running   0          5m27s</span><br><span class="line">pc-deployment-6c9f56fcfb-j2gtj   1/1     Running   0          5m27s</span><br><span class="line">pc-deployment-6c9f56fcfb-rf84v   1/1     Running   0          37s</span><br></pre></td></tr></table></figure><p><strong>åˆ é™¤Deployment</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤deploymentï¼Œå…¶ä¸‹çš„rså’Œpodä¹Ÿå°†è¢«åˆ é™¤</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl delete -f pc-deployment.yaml</span><br><span class="line">deployment.apps &quot;pc-deployment&quot; deleted</span><br></pre></td></tr></table></figure><h2 id="6-4-Horizontal-Pod-Autoscaler-HPA"><a href="#6-4-Horizontal-Pod-Autoscaler-HPA" class="headerlink" title="6.4 Horizontal Pod Autoscaler(HPA)"></a>6.4 Horizontal Pod Autoscaler(HPA)</h2><p>åœ¨å‰é¢çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥å®ç°é€šè¿‡æ‰‹å·¥æ‰§è¡Œ<code>kubectl scale</code>å‘½ä»¤å®ç°Podæ‰©å®¹æˆ–ç¼©å®¹ï¼Œä½†æ˜¯è¿™æ˜¾ç„¶ä¸ç¬¦åˆKubernetesçš„å®šä½ç›®æ ‡â€“è‡ªåŠ¨åŒ–ã€æ™ºèƒ½åŒ–ã€‚ KubernetesæœŸæœ›å¯ä»¥å®ç°é€šè¿‡ç›‘æµ‹Podçš„ä½¿ç”¨æƒ…å†µï¼Œå®ç°podæ•°é‡çš„è‡ªåŠ¨è°ƒæ•´ï¼Œäºæ˜¯å°±äº§ç”Ÿäº†Horizontal Pod Autoscalerï¼ˆHPAï¼‰è¿™ç§æ§åˆ¶å™¨ã€‚</p><p>HPAå¯ä»¥è·å–æ¯ä¸ªPodåˆ©ç”¨ç‡ï¼Œç„¶åå’ŒHPAä¸­å®šä¹‰çš„æŒ‡æ ‡è¿›è¡Œå¯¹æ¯”ï¼ŒåŒæ—¶è®¡ç®—å‡ºéœ€è¦ä¼¸ç¼©çš„å…·ä½“å€¼ï¼Œæœ€åå®ç°Podçš„æ•°é‡çš„è°ƒæ•´ã€‚å…¶å®HPAä¸ä¹‹å‰çš„Deploymentä¸€æ ·ï¼Œä¹Ÿå±äºä¸€ç§Kubernetesèµ„æºå¯¹è±¡ï¼Œå®ƒé€šè¿‡è¿½è¸ªåˆ†æRCæ§åˆ¶çš„æ‰€æœ‰ç›®æ ‡Podçš„è´Ÿè½½å˜åŒ–æƒ…å†µï¼Œæ¥ç¡®å®šæ˜¯å¦éœ€è¦é’ˆå¯¹æ€§åœ°è°ƒæ•´ç›®æ ‡Podçš„å‰¯æœ¬æ•°ï¼Œè¿™æ˜¯HPAçš„å®ç°åŸç†ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200608155858271.png" alt="img"></p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥åšä¸€ä¸ªå®éªŒ</p><p><strong>1 å®‰è£…metrics-server</strong></p><p>metrics-serverå¯ä»¥ç”¨æ¥æ”¶é›†é›†ç¾¤ä¸­çš„èµ„æºä½¿ç”¨æƒ…å†µ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…git</span></span><br><span class="line">[root@k8s-master01 ~]# yum install git -y</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è·å–metrics-server, æ³¨æ„ä½¿ç”¨çš„ç‰ˆæœ¬</span></span><br><span class="line">[root@k8s-master01 ~]# git clone -b v0.3.6 https://github.com/kubernetes-incubator/metrics-server</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹deployment, æ³¨æ„ä¿®æ”¹çš„æ˜¯é•œåƒå’Œåˆå§‹åŒ–å‚æ•°</span></span><br><span class="line">[root@k8s-master01 ~]# cd /root/metrics-server/deploy/1.8+/</span><br><span class="line">[root@k8s-master01 1.8+]# vim metrics-server-deployment.yaml</span><br><span class="line">æŒ‰å›¾ä¸­æ·»åŠ ä¸‹é¢é€‰é¡¹</span><br><span class="line">hostNetwork: true</span><br><span class="line">image: registry.cn-hangzhou.aliyuncs.com/google_containers/metrics-server-amd64:v0.3.6</span><br><span class="line">args:</span><br><span class="line">- --kubelet-insecure-tls</span><br><span class="line">- --kubelet-preferred-address-types=InternalIP,Hostname,InternalDNS,ExternalDNS,ExternalIP</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200608163326496.png" alt="image-20200608163326496"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£…metrics-server</span></span><br><span class="line">[root@k8s-master01 1.8+]# kubectl apply -f ./</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹podè¿è¡Œæƒ…å†µ</span></span><br><span class="line">[root@k8s-master01 1.8+]# kubectl get pod -n kube-system</span><br><span class="line">metrics-server-6b976979db-2xwbj   1/1     Running   0          90s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä½¿ç”¨kubectl top node æŸ¥çœ‹èµ„æºä½¿ç”¨æƒ…å†µ</span></span><br><span class="line">[root@k8s-master01 1.8+]# kubectl top node</span><br><span class="line">NAME           CPU(cores)   CPU%   MEMORY(bytes)   MEMORY%</span><br><span class="line">k8s-master01   289m         14%    1582Mi          54%       </span><br><span class="line">k8s-node01     81m          4%     1195Mi          40%       </span><br><span class="line">k8s-node02     72m          3%     1211Mi          41%  </span><br><span class="line">[root@k8s-master01 1.8+]# kubectl top pod -n kube-system</span><br><span class="line">NAME                              CPU(cores)   MEMORY(bytes)</span><br><span class="line">coredns-6955765f44-7ptsb          3m           9Mi</span><br><span class="line">coredns-6955765f44-vcwr5          3m           8Mi</span><br><span class="line">etcd-master                       14m          145Mi</span><br><span class="line">...</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è‡³æ­¤,metrics-serverå®‰è£…å®Œæˆ</span></span><br></pre></td></tr></table></figure><p><strong>2 å‡†å¤‡deploymentå’Œservie</strong></p><p>åˆ›å»ºpc-hpa-pod.yamlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">strategy:</span> <span class="comment"># ç­–ç•¥</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">RollingUpdate</span> <span class="comment"># æ»šåŠ¨æ›´æ–°ç­–ç•¥</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">nginx-pod</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">nginx-pod</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">        <span class="attr">resources:</span> <span class="comment"># èµ„æºé…é¢</span></span><br><span class="line">          <span class="attr">limits:</span>  <span class="comment"># é™åˆ¶èµ„æºï¼ˆä¸Šé™ï¼‰</span></span><br><span class="line">            <span class="attr">cpu:</span> <span class="string">&quot;1&quot;</span> <span class="comment"># CPUé™åˆ¶ï¼Œå•ä½æ˜¯coreæ•°</span></span><br><span class="line">          <span class="attr">requests:</span> <span class="comment"># è¯·æ±‚èµ„æºï¼ˆä¸‹é™ï¼‰</span></span><br><span class="line">            <span class="attr">cpu:</span> <span class="string">&quot;100m&quot;</span>  <span class="comment"># CPUé™åˆ¶ï¼Œå•ä½æ˜¯coreæ•°</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºservice</span></span><br><span class="line">[root@k8s-master01 1.8+]# kubectl expose deployment nginx --type=NodePort --port=80 -n dev</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹</span></span><br><span class="line">[root@k8s-master01 1.8+]# kubectl get deployment,pod,svc -n dev</span><br><span class="line">NAME                    READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">deployment.apps/nginx   1/1     1            1           47s</span><br><span class="line"></span><br><span class="line">NAME                         READY   STATUS    RESTARTS   AGE</span><br><span class="line">pod/nginx-7df9756ccc-bh8dr   1/1     Running   0          47s</span><br><span class="line"></span><br><span class="line">NAME            TYPE       CLUSTER-IP      EXTERNAL-IP   PORT(S)        AGE</span><br><span class="line">service/nginx   NodePort   10.101.18.29   &lt;none&gt;        80:31830/TCP   35s</span><br></pre></td></tr></table></figure><p><strong>3 éƒ¨ç½²HPA</strong></p><p>åˆ›å»ºpc-hpa.yamlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">autoscaling/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">HorizontalPodAutoscaler</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pc-hpa</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">minReplicas:</span> <span class="number">1</span>  <span class="comment">#æœ€å°podæ•°é‡</span></span><br><span class="line">  <span class="attr">maxReplicas:</span> <span class="number">10</span> <span class="comment">#æœ€å¤§podæ•°é‡</span></span><br><span class="line">  <span class="attr">targetCPUUtilizationPercentage:</span> <span class="number">3</span> <span class="comment"># CPUä½¿ç”¨ç‡æŒ‡æ ‡</span></span><br><span class="line">  <span class="attr">scaleTargetRef:</span>   <span class="comment"># æŒ‡å®šè¦æ§åˆ¶çš„nginxä¿¡æ¯</span></span><br><span class="line">    <span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line">    <span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">nginx</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºhpa</span></span><br><span class="line">[root@k8s-master01 1.8+]# kubectl create -f pc-hpa.yaml</span><br><span class="line">horizontalpodautoscaler.autoscaling/pc-hpa created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹hpa</span></span><br><span class="line">    [root@k8s-master01 1.8+]# kubectl get hpa -n dev</span><br><span class="line">NAME     REFERENCE          TARGETS   MINPODS   MAXPODS   REPLICAS   AGE</span><br><span class="line">pc-hpa   Deployment/nginx   0%/3%     1         10        1          62s</span><br></pre></td></tr></table></figure><p><strong>4 æµ‹è¯•</strong></p><p>ä½¿ç”¨å‹æµ‹å·¥å…·å¯¹serviceåœ°å€<code>192.168.5.4:31830</code>è¿›è¡Œå‹æµ‹ï¼Œç„¶åé€šè¿‡æ§åˆ¶å°æŸ¥çœ‹hpaå’Œpodçš„å˜åŒ–</p><p>hpaå˜åŒ–</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@k8s-master01 ~]# kubectl get hpa -n dev -w</span><br><span class="line">NAME   REFERENCE      TARGETS  MINPODS  MAXPODS  REPLICAS  AGE</span><br><span class="line">pc-hpa  Deployment/nginx  0%/3%   1     10     1      4m11s</span><br><span class="line">pc-hpa  Deployment/nginx  0%/3%   1     10     1      5m19s</span><br><span class="line">pc-hpa  Deployment/nginx  22%/3%   1     10     1      6m50s</span><br><span class="line">pc-hpa  Deployment/nginx  22%/3%   1     10     4      7m5s</span><br><span class="line">pc-hpa  Deployment/nginx  22%/3%   1     10     8      7m21s</span><br><span class="line">pc-hpa  Deployment/nginx  6%/3%   1     10     8      7m51s</span><br><span class="line">pc-hpa  Deployment/nginx  0%/3%   1     10     8      9m6s</span><br><span class="line">pc-hpa  Deployment/nginx  0%/3%   1     10     8      13m</span><br><span class="line">pc-hpa  Deployment/nginx  0%/3%   1     10     1      14m</span><br></pre></td></tr></table></figure><p>deploymentå˜åŒ–</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@k8s-master01 ~]# kubectl get deployment -n dev -w</span><br><span class="line">NAME    READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">nginx   1/1     1            1           11m</span><br><span class="line">nginx   1/4     1            1           13m</span><br><span class="line">nginx   1/4     1            1           13m</span><br><span class="line">nginx   1/4     1            1           13m</span><br><span class="line">nginx   1/4     4            1           13m</span><br><span class="line">nginx   1/8     4            1           14m</span><br><span class="line">nginx   1/8     4            1           14m</span><br><span class="line">nginx   1/8     4            1           14m</span><br><span class="line">nginx   1/8     8            1           14m</span><br><span class="line">nginx   2/8     8            2           14m</span><br><span class="line">nginx   3/8     8            3           14m</span><br><span class="line">nginx   4/8     8            4           14m</span><br><span class="line">nginx   5/8     8            5           14m</span><br><span class="line">nginx   6/8     8            6           14m</span><br><span class="line">nginx   7/8     8            7           14m</span><br><span class="line">nginx   8/8     8            8           15m</span><br><span class="line">nginx   8/1     8            8           20m</span><br><span class="line">nginx   8/1     8            8           20m</span><br><span class="line">nginx   1/1     1            1           20m</span><br></pre></td></tr></table></figure><p>podå˜åŒ–</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">[root@k8s-master01 ~]# kubectl get pods -n dev -w</span><br><span class="line">NAME                     READY   STATUS    RESTARTS   AGE</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc-bh8dr   1/1     Running   0          11m</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc-cpgrv   0/1     Pending   0          0s</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc<span class="string">-8</span>zhwk   0/1     Pending   0          0s</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc-rr9bn   0/1     Pending   0          0s</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc-cpgrv   0/1     ContainerCreating   0          0s</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc<span class="string">-8</span>zhwk   0/1     ContainerCreating   0          0s</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc-rr9bn   0/1     ContainerCreating   0          0s</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc-m9gsj   0/1     Pending             0          0s</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc-g56qb   0/1     Pending             0          0s</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc-sl9c6   0/1     Pending             0          0s</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc-fgst7   0/1     Pending             0          0s</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc-g56qb   0/1     ContainerCreating   0          0s</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc-m9gsj   0/1     ContainerCreating   0          0s</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc-sl9c6   0/1     ContainerCreating   0          0s</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc-fgst7   0/1     ContainerCreating   0          0s</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc<span class="string">-8</span>zhwk   1/1     Running             0          19s</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc-rr9bn   1/1     Running             0          30s</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc-m9gsj   1/1     Running             0          21s</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc-cpgrv   1/1     Running             0          47s</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc-sl9c6   1/1     Running             0          33s</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc-g56qb   1/1     Running             0          48s</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc-fgst7   1/1     Running             0          66s</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc-fgst7   1/1     Terminating         0          6m50s</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc<span class="string">-8</span>zhwk   1/1     Terminating         0          7m5s</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc-cpgrv   1/1     Terminating         0          7m5s</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc-g56qb   1/1     Terminating         0          6m50s</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc-rr9bn   1/1     Terminating         0          7m5s</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc-m9gsj   1/1     Terminating         0          6m50s</span><br><span class="line">nginx<span class="string">-7</span>df9756ccc-sl9c6   1/1     Terminating         0          6m50s</span><br></pre></td></tr></table></figure><h2 id="6-5-DaemonSet-DS"><a href="#6-5-DaemonSet-DS" class="headerlink" title="6.5 DaemonSet(DS)"></a>6.5 DaemonSet(DS)</h2><p>DaemonSetç±»å‹çš„æ§åˆ¶å™¨å¯ä»¥ä¿è¯åœ¨é›†ç¾¤ä¸­çš„æ¯ä¸€å°ï¼ˆæˆ–æŒ‡å®šï¼‰èŠ‚ç‚¹ä¸Šéƒ½è¿è¡Œä¸€ä¸ªå‰¯æœ¬ã€‚ä¸€èˆ¬é€‚ç”¨äºæ—¥å¿—æ”¶é›†ã€èŠ‚ç‚¹ç›‘æ§ç­‰åœºæ™¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä¸€ä¸ªPodæä¾›çš„åŠŸèƒ½æ˜¯èŠ‚ç‚¹çº§åˆ«çš„ï¼ˆæ¯ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦ä¸”åªéœ€è¦ä¸€ä¸ªï¼‰ï¼Œé‚£ä¹ˆè¿™ç±»Podå°±é€‚åˆä½¿ç”¨DaemonSetç±»å‹çš„æ§åˆ¶å™¨åˆ›å»ºã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200612010223537.png" alt="img"></p><p>DaemonSetæ§åˆ¶å™¨çš„ç‰¹ç‚¹ï¼š</p><ul><li>æ¯å½“å‘é›†ç¾¤ä¸­æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼ŒæŒ‡å®šçš„ Pod å‰¯æœ¬ä¹Ÿå°†æ·»åŠ åˆ°è¯¥èŠ‚ç‚¹ä¸Š</li><li>å½“èŠ‚ç‚¹ä»é›†ç¾¤ä¸­ç§»é™¤æ—¶ï¼ŒPod ä¹Ÿå°±è¢«åƒåœ¾å›æ”¶äº†</li></ul><p>ä¸‹é¢å…ˆæ¥çœ‹ä¸‹DaemonSetçš„èµ„æºæ¸…å•æ–‡ä»¶</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span> <span class="comment"># ç‰ˆæœ¬å·</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">DaemonSet</span> <span class="comment"># ç±»å‹       </span></span><br><span class="line"><span class="attr">metadata:</span> <span class="comment"># å…ƒæ•°æ®</span></span><br><span class="line">  <span class="attr">name:</span> <span class="comment"># rsåç§° </span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="comment"># æ‰€å±å‘½åç©ºé—´ </span></span><br><span class="line">  <span class="attr">labels:</span> <span class="comment">#æ ‡ç­¾</span></span><br><span class="line">    <span class="attr">controller:</span> <span class="string">daemonset</span></span><br><span class="line"><span class="attr">spec:</span> <span class="comment"># è¯¦æƒ…æè¿°</span></span><br><span class="line">  <span class="attr">revisionHistoryLimit:</span> <span class="number">3</span> <span class="comment"># ä¿ç•™å†å²ç‰ˆæœ¬</span></span><br><span class="line">  <span class="attr">updateStrategy:</span> <span class="comment"># æ›´æ–°ç­–ç•¥</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">RollingUpdate</span> <span class="comment"># æ»šåŠ¨æ›´æ–°ç­–ç•¥</span></span><br><span class="line">    <span class="attr">rollingUpdate:</span> <span class="comment"># æ»šåŠ¨æ›´æ–°</span></span><br><span class="line">      <span class="attr">maxUnavailable:</span> <span class="number">1</span> <span class="comment"># æœ€å¤§ä¸å¯ç”¨çŠ¶æ€çš„ Pod çš„æœ€å¤§å€¼ï¼Œå¯ä»¥ä¸ºç™¾åˆ†æ¯”ï¼Œä¹Ÿå¯ä»¥ä¸ºæ•´æ•°</span></span><br><span class="line">  <span class="attr">selector:</span> <span class="comment"># é€‰æ‹©å™¨ï¼Œé€šè¿‡å®ƒæŒ‡å®šè¯¥æ§åˆ¶å™¨ç®¡ç†å“ªäº›pod</span></span><br><span class="line">    <span class="attr">matchLabels:</span>      <span class="comment"># LabelsåŒ¹é…è§„åˆ™</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">nginx-pod</span></span><br><span class="line">    <span class="attr">matchExpressions:</span> <span class="comment"># ExpressionsåŒ¹é…è§„åˆ™</span></span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">key:</span> <span class="string">app</span>, <span class="attr">operator:</span> <span class="string">In</span>, <span class="attr">values:</span> [<span class="string">nginx-pod</span>]&#125;</span><br><span class="line">  <span class="attr">template:</span> <span class="comment"># æ¨¡æ¿ï¼Œå½“å‰¯æœ¬æ•°é‡ä¸è¶³æ—¶ï¼Œä¼šæ ¹æ®ä¸‹é¢çš„æ¨¡æ¿åˆ›å»ºpodå‰¯æœ¬</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">nginx-pod</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">80</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºpc-daemonset.yamlï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">DaemonSet</span>      </span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pc-daemonset</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span> </span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">nginx-pod</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">nginx-pod</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºdaemonset</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f  pc-daemonset.yaml</span><br><span class="line">daemonset.apps/pc-daemonset created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹daemonset</span></span><br><span class="line">[root@k8s-master01 ~]#  kubectl get ds -n dev -o wide</span><br><span class="line">NAME        DESIRED  CURRENT  READY  UP-TO-DATE  AVAILABLE   AGE   CONTAINERS   IMAGES         </span><br><span class="line">pc-daemonset   2        2        2      2           2        24s   nginx        nginx:1.17.1   </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹pod,å‘ç°åœ¨æ¯ä¸ªNodeä¸Šéƒ½è¿è¡Œä¸€ä¸ªpod</span></span><br><span class="line">[root@k8s-master01 ~]#  kubectl get pods -n dev -o wide</span><br><span class="line">NAME                 READY   STATUS    RESTARTS   AGE   IP            NODE    </span><br><span class="line">pc-daemonset-9bck8   1/1     Running   0          37s   10.244.1.43   node1     </span><br><span class="line">pc-daemonset-k224w   1/1     Running   0          37s   10.244.2.74   node2      </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤daemonset</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl delete -f pc-daemonset.yaml</span><br><span class="line">daemonset.apps &quot;pc-daemonset&quot; deleted</span><br></pre></td></tr></table></figure><h2 id="6-6-Job"><a href="#6-6-Job" class="headerlink" title="6.6 Job"></a>6.6 Job</h2><p>Jobï¼Œä¸»è¦ç”¨äºè´Ÿè´£**æ‰¹é‡å¤„ç†(ä¸€æ¬¡è¦å¤„ç†æŒ‡å®šæ•°é‡ä»»åŠ¡)<strong>çŸ­æš‚çš„</strong>ä¸€æ¬¡æ€§(æ¯ä¸ªä»»åŠ¡ä»…è¿è¡Œä¸€æ¬¡å°±ç»“æŸ)**ä»»åŠ¡ã€‚Jobç‰¹ç‚¹å¦‚ä¸‹ï¼š</p><ul><li>å½“Jobåˆ›å»ºçš„podæ‰§è¡ŒæˆåŠŸç»“æŸæ—¶ï¼ŒJobå°†è®°å½•æˆåŠŸç»“æŸçš„podæ•°é‡</li><li>å½“æˆåŠŸç»“æŸçš„podè¾¾åˆ°æŒ‡å®šçš„æ•°é‡æ—¶ï¼ŒJobå°†å®Œæˆæ‰§è¡Œ</li></ul><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200618213054113.png" alt="img"></p><p>Jobçš„èµ„æºæ¸…å•æ–‡ä»¶ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">batch/v1</span> <span class="comment"># ç‰ˆæœ¬å·</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Job</span> <span class="comment"># ç±»å‹       </span></span><br><span class="line"><span class="attr">metadata:</span> <span class="comment"># å…ƒæ•°æ®</span></span><br><span class="line">  <span class="attr">name:</span> <span class="comment"># rsåç§° </span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="comment"># æ‰€å±å‘½åç©ºé—´ </span></span><br><span class="line">  <span class="attr">labels:</span> <span class="comment">#æ ‡ç­¾</span></span><br><span class="line">    <span class="attr">controller:</span> <span class="string">job</span></span><br><span class="line"><span class="attr">spec:</span> <span class="comment"># è¯¦æƒ…æè¿°</span></span><br><span class="line">  <span class="attr">completions:</span> <span class="number">1</span> <span class="comment"># æŒ‡å®šjobéœ€è¦æˆåŠŸè¿è¡ŒPodsçš„æ¬¡æ•°ã€‚é»˜è®¤å€¼: 1</span></span><br><span class="line">  <span class="attr">parallelism:</span> <span class="number">1</span> <span class="comment"># æŒ‡å®šjobåœ¨ä»»ä¸€æ—¶åˆ»åº”è¯¥å¹¶å‘è¿è¡ŒPodsçš„æ•°é‡ã€‚é»˜è®¤å€¼: 1</span></span><br><span class="line">  <span class="attr">activeDeadlineSeconds:</span> <span class="number">30</span> <span class="comment"># æŒ‡å®šjobå¯è¿è¡Œçš„æ—¶é—´æœŸé™ï¼Œè¶…è¿‡æ—¶é—´è¿˜æœªç»“æŸï¼Œç³»ç»Ÿå°†ä¼šå°è¯•è¿›è¡Œç»ˆæ­¢ã€‚</span></span><br><span class="line">  <span class="attr">backoffLimit:</span> <span class="number">6</span> <span class="comment"># æŒ‡å®šjobå¤±è´¥åè¿›è¡Œé‡è¯•çš„æ¬¡æ•°ã€‚é»˜è®¤æ˜¯6</span></span><br><span class="line">  <span class="attr">manualSelector:</span> <span class="literal">true</span> <span class="comment"># æ˜¯å¦å¯ä»¥ä½¿ç”¨selectoré€‰æ‹©å™¨é€‰æ‹©podï¼Œé»˜è®¤æ˜¯false</span></span><br><span class="line">  <span class="attr">selector:</span> <span class="comment"># é€‰æ‹©å™¨ï¼Œé€šè¿‡å®ƒæŒ‡å®šè¯¥æ§åˆ¶å™¨ç®¡ç†å“ªäº›pod</span></span><br><span class="line">    <span class="attr">matchLabels:</span>      <span class="comment"># LabelsåŒ¹é…è§„åˆ™</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">counter-pod</span></span><br><span class="line">    <span class="attr">matchExpressions:</span> <span class="comment"># ExpressionsåŒ¹é…è§„åˆ™</span></span><br><span class="line">      <span class="bullet">-</span> &#123;<span class="attr">key:</span> <span class="string">app</span>, <span class="attr">operator:</span> <span class="string">In</span>, <span class="attr">values:</span> [<span class="string">counter-pod</span>]&#125;</span><br><span class="line">  <span class="attr">template:</span> <span class="comment"># æ¨¡æ¿ï¼Œå½“å‰¯æœ¬æ•°é‡ä¸è¶³æ—¶ï¼Œä¼šæ ¹æ®ä¸‹é¢çš„æ¨¡æ¿åˆ›å»ºpodå‰¯æœ¬</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">counter-pod</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">restartPolicy:</span> <span class="string">Never</span> <span class="comment"># é‡å¯ç­–ç•¥åªèƒ½è®¾ç½®ä¸ºNeveræˆ–è€…OnFailure</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">counter</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">busybox:1.30</span></span><br><span class="line">        <span class="attr">command:</span> [<span class="string">&quot;bin/sh&quot;</span>,<span class="string">&quot;-c&quot;</span>,<span class="string">&quot;for i in 9 8 7 6 5 4 3 2 1; do echo $i;sleep 2;done&quot;</span>]</span><br></pre></td></tr></table></figure><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å…³äºé‡å¯ç­–ç•¥è®¾ç½®çš„è¯´æ˜ï¼š</span><br><span class="line">    å¦‚æœæŒ‡å®šä¸ºOnFailureï¼Œåˆ™<span class="keyword">job</span>ä¼šåœ¨podå‡ºç°æ•…éšœæ—¶é‡å¯å®¹å™¨ï¼Œè€Œä¸æ˜¯åˆ›å»ºpodï¼Œfailedæ¬¡æ•°ä¸å˜</span><br><span class="line">    å¦‚æœæŒ‡å®šä¸ºNeverï¼Œåˆ™<span class="keyword">job</span>ä¼šåœ¨podå‡ºç°æ•…éšœæ—¶åˆ›å»ºæ–°çš„podï¼Œå¹¶ä¸”æ•…éšœpodä¸ä¼šæ¶ˆå¤±ï¼Œä¹Ÿä¸ä¼šé‡å¯ï¼Œfailedæ¬¡æ•°åŠ <span class="number">1</span></span><br><span class="line">    å¦‚æœæŒ‡å®šä¸ºAlwaysçš„è¯ï¼Œå°±æ„å‘³ç€ä¸€ç›´é‡å¯ï¼Œæ„å‘³ç€<span class="keyword">job</span>ä»»åŠ¡ä¼šé‡å¤å»æ‰§è¡Œäº†ï¼Œå½“ç„¶ä¸å¯¹ï¼Œæ‰€ä»¥ä¸èƒ½è®¾ç½®ä¸ºAlways</span><br></pre></td></tr></table></figure><p>åˆ›å»ºpc-job.yamlï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">batch/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Job</span>      </span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pc-job</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">manualSelector:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">counter-pod</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">counter-pod</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">restartPolicy:</span> <span class="string">Never</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">counter</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">busybox:1.30</span></span><br><span class="line">        <span class="attr">command:</span> [<span class="string">&quot;bin/sh&quot;</span>,<span class="string">&quot;-c&quot;</span>,<span class="string">&quot;for i in 9 8 7 6 5 4 3 2 1; do echo $i;sleep 3;done&quot;</span>]</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºjob</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pc-job.yaml</span><br><span class="line">job.batch/pc-job created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹job</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get job -n dev -o wide  -w</span><br><span class="line">NAME     COMPLETIONS   DURATION   AGE   CONTAINERS   IMAGES         SELECTOR</span><br><span class="line">pc-job   0/1           21s        21s   counter      busybox:1.30   app=counter-pod</span><br><span class="line">pc-job   1/1           31s        79s   counter      busybox:1.30   app=counter-pod</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é€šè¿‡è§‚å¯ŸpodçŠ¶æ€å¯ä»¥çœ‹åˆ°ï¼Œpodåœ¨è¿è¡Œå®Œæ¯•ä»»åŠ¡åï¼Œå°±ä¼šå˜æˆCompletedçŠ¶æ€</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods -n dev -w</span><br><span class="line">NAME           READY   STATUS     RESTARTS      AGE</span><br><span class="line">pc-job-rxg96   1/1     Running     0            29s</span><br><span class="line">pc-job-rxg96   0/1     Completed   0            33s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¥ä¸‹æ¥ï¼Œè°ƒæ•´ä¸‹podè¿è¡Œçš„æ€»æ•°é‡å’Œå¹¶è¡Œæ•°é‡ å³ï¼šåœ¨specä¸‹è®¾ç½®ä¸‹é¢ä¸¤ä¸ªé€‰é¡¹</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> completions: 6 <span class="comment"># æŒ‡å®šjobéœ€è¦æˆåŠŸè¿è¡ŒPodsçš„æ¬¡æ•°ä¸º6</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> parallelism: 3 <span class="comment"># æŒ‡å®šjobå¹¶å‘è¿è¡ŒPodsçš„æ•°é‡ä¸º3</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> ç„¶åé‡æ–°è¿è¡Œjobï¼Œè§‚å¯Ÿæ•ˆæœï¼Œæ­¤æ—¶ä¼šå‘ç°ï¼Œjobä¼šæ¯æ¬¡è¿è¡Œ3ä¸ªpodï¼Œæ€»å…±æ‰§è¡Œäº†6ä¸ªpod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods -n dev -w</span><br><span class="line">NAME           READY   STATUS    RESTARTS   AGE</span><br><span class="line">pc-job-684ft   1/1     Running   0          5s</span><br><span class="line">pc-job-jhj49   1/1     Running   0          5s</span><br><span class="line">pc-job-pfcvh   1/1     Running   0          5s</span><br><span class="line">pc-job-684ft   0/1     Completed   0          11s</span><br><span class="line">pc-job-v7rhr   0/1     Pending     0          0s</span><br><span class="line">pc-job-v7rhr   0/1     Pending     0          0s</span><br><span class="line">pc-job-v7rhr   0/1     ContainerCreating   0          0s</span><br><span class="line">pc-job-jhj49   0/1     Completed           0          11s</span><br><span class="line">pc-job-fhwf7   0/1     Pending             0          0s</span><br><span class="line">pc-job-fhwf7   0/1     Pending             0          0s</span><br><span class="line">pc-job-pfcvh   0/1     Completed           0          11s</span><br><span class="line">pc-job-5vg2j   0/1     Pending             0          0s</span><br><span class="line">pc-job-fhwf7   0/1     ContainerCreating   0          0s</span><br><span class="line">pc-job-5vg2j   0/1     Pending             0          0s</span><br><span class="line">pc-job-5vg2j   0/1     ContainerCreating   0          0s</span><br><span class="line">pc-job-fhwf7   1/1     Running             0          2s</span><br><span class="line">pc-job-v7rhr   1/1     Running             0          2s</span><br><span class="line">pc-job-5vg2j   1/1     Running             0          3s</span><br><span class="line">pc-job-fhwf7   0/1     Completed           0          12s</span><br><span class="line">pc-job-v7rhr   0/1     Completed           0          12s</span><br><span class="line">pc-job-5vg2j   0/1     Completed           0          12s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤job</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl delete -f pc-job.yaml</span><br><span class="line">job.batch &quot;pc-job&quot; deleted</span><br></pre></td></tr></table></figure><h2 id="6-7-CronJob-CJ"><a href="#6-7-CronJob-CJ" class="headerlink" title="6.7 CronJob(CJ)"></a>6.7 CronJob(CJ)</h2><p>CronJobæ§åˆ¶å™¨ä»¥Jobæ§åˆ¶å™¨èµ„æºä¸ºå…¶ç®¡æ§å¯¹è±¡ï¼Œå¹¶å€ŸåŠ©å®ƒç®¡ç†podèµ„æºå¯¹è±¡ï¼ŒJobæ§åˆ¶å™¨å®šä¹‰çš„ä½œä¸šä»»åŠ¡åœ¨å…¶æ§åˆ¶å™¨èµ„æºåˆ›å»ºä¹‹åä¾¿ä¼šç«‹å³æ‰§è¡Œï¼Œä½†CronJobå¯ä»¥ä»¥ç±»ä¼¼äºLinuxæ“ä½œç³»ç»Ÿçš„å‘¨æœŸæ€§ä»»åŠ¡ä½œä¸šè®¡åˆ’çš„æ–¹å¼æ§åˆ¶å…¶è¿è¡Œ<strong>æ—¶é—´ç‚¹</strong>åŠ<strong>é‡å¤è¿è¡Œ</strong>çš„æ–¹å¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>CronJobå¯ä»¥åœ¨ç‰¹å®šçš„æ—¶é—´ç‚¹(åå¤çš„)å»è¿è¡Œjobä»»åŠ¡</strong>ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200618213149531.png" alt="img"></p><p>CronJobçš„èµ„æºæ¸…å•æ–‡ä»¶ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">batch/v1beta1</span> <span class="comment"># ç‰ˆæœ¬å·</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">CronJob</span> <span class="comment"># ç±»å‹       </span></span><br><span class="line"><span class="attr">metadata:</span> <span class="comment"># å…ƒæ•°æ®</span></span><br><span class="line">  <span class="attr">name:</span> <span class="comment"># rsåç§° </span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="comment"># æ‰€å±å‘½åç©ºé—´ </span></span><br><span class="line">  <span class="attr">labels:</span> <span class="comment">#æ ‡ç­¾</span></span><br><span class="line">    <span class="attr">controller:</span> <span class="string">cronjob</span></span><br><span class="line"><span class="attr">spec:</span> <span class="comment"># è¯¦æƒ…æè¿°</span></span><br><span class="line">  <span class="attr">schedule:</span> <span class="comment"># cronæ ¼å¼çš„ä½œä¸šè°ƒåº¦è¿è¡Œæ—¶é—´ç‚¹,ç”¨äºæ§åˆ¶ä»»åŠ¡åœ¨ä»€ä¹ˆæ—¶é—´æ‰§è¡Œ</span></span><br><span class="line">  <span class="attr">concurrencyPolicy:</span> <span class="comment"># å¹¶å‘æ‰§è¡Œç­–ç•¥ï¼Œç”¨äºå®šä¹‰å‰ä¸€æ¬¡ä½œä¸šè¿è¡Œå°šæœªå®Œæˆæ—¶æ˜¯å¦ä»¥åŠå¦‚ä½•è¿è¡Œåä¸€æ¬¡çš„ä½œä¸š</span></span><br><span class="line">  <span class="attr">failedJobHistoryLimit:</span> <span class="comment"># ä¸ºå¤±è´¥çš„ä»»åŠ¡æ‰§è¡Œä¿ç•™çš„å†å²è®°å½•æ•°ï¼Œé»˜è®¤ä¸º1</span></span><br><span class="line">  <span class="attr">successfulJobHistoryLimit:</span> <span class="comment"># ä¸ºæˆåŠŸçš„ä»»åŠ¡æ‰§è¡Œä¿ç•™çš„å†å²è®°å½•æ•°ï¼Œé»˜è®¤ä¸º3</span></span><br><span class="line">  <span class="attr">startingDeadlineSeconds:</span> <span class="comment"># å¯åŠ¨ä½œä¸šé”™è¯¯çš„è¶…æ—¶æ—¶é•¿</span></span><br><span class="line">  <span class="attr">jobTemplate:</span> <span class="comment"># jobæ§åˆ¶å™¨æ¨¡æ¿ï¼Œç”¨äºä¸ºcronjobæ§åˆ¶å™¨ç”Ÿæˆjobå¯¹è±¡;ä¸‹é¢å…¶å®å°±æ˜¯jobçš„å®šä¹‰</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">completions:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">parallelism:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">activeDeadlineSeconds:</span> <span class="number">30</span></span><br><span class="line">      <span class="attr">backoffLimit:</span> <span class="number">6</span></span><br><span class="line">      <span class="attr">manualSelector:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">selector:</span></span><br><span class="line">        <span class="attr">matchLabels:</span></span><br><span class="line">          <span class="attr">app:</span> <span class="string">counter-pod</span></span><br><span class="line">        <span class="attr">matchExpressions:</span> <span class="string">è§„åˆ™</span></span><br><span class="line">          <span class="bullet">-</span> &#123;<span class="attr">key:</span> <span class="string">app</span>, <span class="attr">operator:</span> <span class="string">In</span>, <span class="attr">values:</span> [<span class="string">counter-pod</span>]&#125;</span><br><span class="line">      <span class="attr">template:</span></span><br><span class="line">        <span class="attr">metadata:</span></span><br><span class="line">          <span class="attr">labels:</span></span><br><span class="line">            <span class="attr">app:</span> <span class="string">counter-pod</span></span><br><span class="line">        <span class="attr">spec:</span></span><br><span class="line">          <span class="attr">restartPolicy:</span> <span class="string">Never</span> </span><br><span class="line">          <span class="attr">containers:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">counter</span></span><br><span class="line">            <span class="attr">image:</span> <span class="string">busybox:1.30</span></span><br><span class="line">            <span class="attr">command:</span> [<span class="string">&quot;bin/sh&quot;</span>,<span class="string">&quot;-c&quot;</span>,<span class="string">&quot;for i in 9 8 7 6 5 4 3 2 1; do echo $i;sleep 20;done&quot;</span>]</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">éœ€è¦é‡ç‚¹è§£é‡Šçš„å‡ ä¸ªé€‰é¡¹ï¼š</span></span><br><span class="line"><span class="attr">schedule:</span> <span class="string">cronè¡¨è¾¾å¼ï¼Œç”¨äºæŒ‡å®šä»»åŠ¡çš„æ‰§è¡Œæ—¶é—´</span></span><br><span class="line">    <span class="string">*/1</span>    <span class="string">*</span>      <span class="string">*</span>    <span class="string">*</span>     <span class="string">*</span></span><br><span class="line">    <span class="string">&lt;åˆ†é’Ÿ&gt;</span> <span class="string">&lt;å°æ—¶&gt;</span> <span class="string">&lt;æ—¥&gt;</span> <span class="string">&lt;æœˆä»½&gt;</span> <span class="string">&lt;æ˜ŸæœŸ&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="string">åˆ†é’Ÿ</span> <span class="string">å€¼ä»</span> <span class="number">0</span> <span class="string">åˆ°</span> <span class="number">59</span><span class="string">.</span></span><br><span class="line">    <span class="string">å°æ—¶</span> <span class="string">å€¼ä»</span> <span class="number">0</span> <span class="string">åˆ°</span> <span class="number">23</span><span class="string">.</span></span><br><span class="line">    <span class="string">æ—¥</span> <span class="string">å€¼ä»</span> <span class="number">1</span> <span class="string">åˆ°</span> <span class="number">31</span><span class="string">.</span></span><br><span class="line">    <span class="string">æœˆ</span> <span class="string">å€¼ä»</span> <span class="number">1</span> <span class="string">åˆ°</span> <span class="number">12</span><span class="string">.</span></span><br><span class="line">    <span class="string">æ˜ŸæœŸ</span> <span class="string">å€¼ä»</span> <span class="number">0</span> <span class="string">åˆ°</span> <span class="number">6</span><span class="string">,</span> <span class="number">0</span> <span class="string">ä»£è¡¨æ˜ŸæœŸæ—¥</span></span><br><span class="line">    <span class="string">å¤šä¸ªæ—¶é—´å¯ä»¥ç”¨é€—å·éš”å¼€ï¼›</span> <span class="string">èŒƒå›´å¯ä»¥ç”¨è¿å­—ç¬¦ç»™å‡ºï¼›*å¯ä»¥ä½œä¸ºé€šé…ç¬¦ï¼›</span> <span class="string">/è¡¨ç¤ºæ¯...</span></span><br><span class="line"><span class="attr">concurrencyPolicy:</span></span><br><span class="line">    <span class="attr">Allow:</span>   <span class="string">å…è®¸Jobså¹¶å‘è¿è¡Œ(é»˜è®¤)</span></span><br><span class="line">    <span class="attr">Forbid:</span>  <span class="string">ç¦æ­¢å¹¶å‘è¿è¡Œï¼Œå¦‚æœä¸Šä¸€æ¬¡è¿è¡Œå°šæœªå®Œæˆï¼Œåˆ™è·³è¿‡ä¸‹ä¸€æ¬¡è¿è¡Œ</span></span><br><span class="line">    <span class="attr">Replace:</span> <span class="string">æ›¿æ¢ï¼Œå–æ¶ˆå½“å‰æ­£åœ¨è¿è¡Œçš„ä½œä¸šå¹¶ç”¨æ–°ä½œä¸šæ›¿æ¢å®ƒ</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºpc-cronjob.yamlï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">batch/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">CronJob</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pc-cronjob</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">controller:</span> <span class="string">cronjob</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">schedule:</span> <span class="string">&quot;*/1 * * * *&quot;</span></span><br><span class="line">  <span class="attr">jobTemplate:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">template:</span></span><br><span class="line">        <span class="attr">spec:</span></span><br><span class="line">          <span class="attr">restartPolicy:</span> <span class="string">Never</span></span><br><span class="line">          <span class="attr">containers:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">counter</span></span><br><span class="line">            <span class="attr">image:</span> <span class="string">busybox:1.30</span></span><br><span class="line">            <span class="attr">command:</span> [<span class="string">&quot;bin/sh&quot;</span>,<span class="string">&quot;-c&quot;</span>,<span class="string">&quot;for i in 9 8 7 6 5 4 3 2 1; do echo $i;sleep 3;done&quot;</span>]</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºcronjob</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pc-cronjob.yaml</span><br><span class="line">cronjob.batch/pc-cronjob created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹cronjob</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get cronjobs -n dev</span><br><span class="line">NAME         SCHEDULE      SUSPEND   ACTIVE   LAST SCHEDULE   AGE</span><br><span class="line">pc-cronjob   */1 * * * *   False     0        &lt;none&gt;          6s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹job</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get jobs -n dev</span><br><span class="line">NAME                    COMPLETIONS   DURATION   AGE</span><br><span class="line">pc-cronjob-1592587800   1/1           28s        3m26s</span><br><span class="line">pc-cronjob-1592587860   1/1           28s        2m26s</span><br><span class="line">pc-cronjob-1592587920   1/1           28s        86s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹pod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods -n dev</span><br><span class="line">pc-cronjob-1592587800-x4tsm   0/1     Completed   0          2m24s</span><br><span class="line">pc-cronjob-1592587860-r5gv4   0/1     Completed   0          84s</span><br><span class="line">pc-cronjob-1592587920-9dxxq   1/1     Running     0          24s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤cronjob</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl  delete -f pc-cronjob.yaml</span><br><span class="line">cronjob.batch &quot;pc-cronjob&quot; deleted</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Doc </category>
          
          <category> Kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kubernetes </tag>
            
            <tag> æ•™ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetesç¬”è®° 5</title>
      <link href="/2022/07/12/b5779fc47159-q1jun/"/>
      <url>/2022/07/12/b5779fc47159-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="5-Podè¯¦è§£"><a href="#5-Podè¯¦è§£" class="headerlink" title="5. Podè¯¦è§£"></a>5. Podè¯¦è§£</h1><h2 id="5-1-Podä»‹ç»"><a href="#5-1-Podä»‹ç»" class="headerlink" title="5.1 Podä»‹ç»"></a>5.1 Podä»‹ç»</h2><h3 id="5-1-1-Podç»“æ„"><a href="#5-1-1-Podç»“æ„" class="headerlink" title="5.1.1 Podç»“æ„"></a>5.1.1 Podç»“æ„</h3><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200407121501907-1626781151898.png" alt="image-20200407121501907"></p><p>æ¯ä¸ªPodä¸­éƒ½å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–è€…å¤šä¸ªå®¹å™¨ï¼Œè¿™äº›å®¹å™¨å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š</p><ul><li><p>ç”¨æˆ·ç¨‹åºæ‰€åœ¨çš„å®¹å™¨ï¼Œæ•°é‡å¯å¤šå¯å°‘</p></li><li><p>Pauseå®¹å™¨ï¼Œè¿™æ˜¯æ¯ä¸ªPodéƒ½ä¼šæœ‰çš„ä¸€ä¸ª<strong>æ ¹å®¹å™¨</strong>ï¼Œå®ƒçš„ä½œç”¨æœ‰ä¸¤ä¸ªï¼š</p><ul><li><p>å¯ä»¥ä»¥å®ƒä¸ºä¾æ®ï¼Œè¯„ä¼°æ•´ä¸ªPodçš„å¥åº·çŠ¶æ€</p></li><li><p>å¯ä»¥åœ¨æ ¹å®¹å™¨ä¸Šè®¾ç½®Ipåœ°å€ï¼Œå…¶å®ƒå®¹å™¨éƒ½æ­¤Ipï¼ˆPod IPï¼‰ï¼Œä»¥å®ç°Podå†…éƒ¨çš„ç½‘è·¯é€šä¿¡</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¿™é‡Œæ˜¯Podå†…éƒ¨çš„é€šè®¯ï¼ŒPodçš„ä¹‹é—´çš„é€šè®¯é‡‡ç”¨è™šæ‹ŸäºŒå±‚ç½‘ç»œæŠ€æœ¯æ¥å®ç°ï¼Œæˆ‘ä»¬å½“å‰ç¯å¢ƒç”¨çš„æ˜¯Flannel</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="5-1-2-Podå®šä¹‰"><a href="#5-1-2-Podå®šä¹‰" class="headerlink" title="5.1.2 Podå®šä¹‰"></a>5.1.2 Podå®šä¹‰</h3><p>ä¸‹é¢æ˜¯Podçš„èµ„æºæ¸…å•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">apiVersion: v1     #å¿…é€‰ï¼Œç‰ˆæœ¬å·ï¼Œä¾‹å¦‚v1</span><br><span class="line">kind: Pod       ã€€ #å¿…é€‰ï¼Œèµ„æºç±»å‹ï¼Œä¾‹å¦‚ Pod</span><br><span class="line">metadata:       ã€€ #å¿…é€‰ï¼Œå…ƒæ•°æ®</span><br><span class="line">  name: string     #å¿…é€‰ï¼ŒPodåç§°</span><br><span class="line">  namespace: string  #Podæ‰€å±çš„å‘½åç©ºé—´,é»˜è®¤ä¸º&quot;default&quot;</span><br><span class="line">  labels:       ã€€ã€€  #è‡ªå®šä¹‰æ ‡ç­¾åˆ—è¡¨</span><br><span class="line">    - name: string      ã€€          </span><br><span class="line">spec:  #å¿…é€‰ï¼ŒPodä¸­å®¹å™¨çš„è¯¦ç»†å®šä¹‰</span><br><span class="line">  containers:  #å¿…é€‰ï¼ŒPodä¸­å®¹å™¨åˆ—è¡¨</span><br><span class="line">  - name: string   #å¿…é€‰ï¼Œå®¹å™¨åç§°</span><br><span class="line">    image: string  #å¿…é€‰ï¼Œå®¹å™¨çš„é•œåƒåç§°</span><br><span class="line">    imagePullPolicy: [ Always|Never|IfNotPresent ]  #è·å–é•œåƒçš„ç­–ç•¥ </span><br><span class="line">    command: [string]   #å®¹å™¨çš„å¯åŠ¨å‘½ä»¤åˆ—è¡¨ï¼Œå¦‚ä¸æŒ‡å®šï¼Œä½¿ç”¨æ‰“åŒ…æ—¶ä½¿ç”¨çš„å¯åŠ¨å‘½ä»¤</span><br><span class="line">    args: [string]      #å®¹å™¨çš„å¯åŠ¨å‘½ä»¤å‚æ•°åˆ—è¡¨</span><br><span class="line">    workingDir: string  #å®¹å™¨çš„å·¥ä½œç›®å½•</span><br><span class="line">    volumeMounts:       #æŒ‚è½½åˆ°å®¹å™¨å†…éƒ¨çš„å­˜å‚¨å·é…ç½®</span><br><span class="line">    - name: string      #å¼•ç”¨podå®šä¹‰çš„å…±äº«å­˜å‚¨å·çš„åç§°ï¼Œéœ€ç”¨volumes[]éƒ¨åˆ†å®šä¹‰çš„çš„å·å</span><br><span class="line">      mountPath: string #å­˜å‚¨å·åœ¨å®¹å™¨å†…mountçš„ç»å¯¹è·¯å¾„ï¼Œåº”å°‘äº512å­—ç¬¦</span><br><span class="line">      readOnly: boolean #æ˜¯å¦ä¸ºåªè¯»æ¨¡å¼</span><br><span class="line">    ports: #éœ€è¦æš´éœ²çš„ç«¯å£åº“å·åˆ—è¡¨</span><br><span class="line">    - name: string        #ç«¯å£çš„åç§°</span><br><span class="line">      containerPort: int  #å®¹å™¨éœ€è¦ç›‘å¬çš„ç«¯å£å·</span><br><span class="line">      hostPort: int       #å®¹å™¨æ‰€åœ¨ä¸»æœºéœ€è¦ç›‘å¬çš„ç«¯å£å·ï¼Œé»˜è®¤ä¸Containerç›¸åŒ</span><br><span class="line">      protocol: string    #ç«¯å£åè®®ï¼Œæ”¯æŒTCPå’ŒUDPï¼Œé»˜è®¤TCP</span><br><span class="line">    env:   #å®¹å™¨è¿è¡Œå‰éœ€è®¾ç½®çš„ç¯å¢ƒå˜é‡åˆ—è¡¨</span><br><span class="line">    - name: string  #ç¯å¢ƒå˜é‡åç§°</span><br><span class="line">      value: string #ç¯å¢ƒå˜é‡çš„å€¼</span><br><span class="line">    resources: #èµ„æºé™åˆ¶å’Œè¯·æ±‚çš„è®¾ç½®</span><br><span class="line">      limits:  #èµ„æºé™åˆ¶çš„è®¾ç½®</span><br><span class="line">        cpu: string     #Cpuçš„é™åˆ¶ï¼Œå•ä½ä¸ºcoreæ•°ï¼Œå°†ç”¨äºdocker run --cpu-shareså‚æ•°</span><br><span class="line">        memory: string  #å†…å­˜é™åˆ¶ï¼Œå•ä½å¯ä»¥ä¸ºMib/Gibï¼Œå°†ç”¨äºdocker run --memoryå‚æ•°</span><br><span class="line">      requests: #èµ„æºè¯·æ±‚çš„è®¾ç½®</span><br><span class="line">        cpu: string    #Cpuè¯·æ±‚ï¼Œå®¹å™¨å¯åŠ¨çš„åˆå§‹å¯ç”¨æ•°é‡</span><br><span class="line">        memory: string #å†…å­˜è¯·æ±‚,å®¹å™¨å¯åŠ¨çš„åˆå§‹å¯ç”¨æ•°é‡</span><br><span class="line">    lifecycle: #ç”Ÿå‘½å‘¨æœŸé’©å­</span><br><span class="line">        postStart: #å®¹å™¨å¯åŠ¨åç«‹å³æ‰§è¡Œæ­¤é’©å­,å¦‚æœæ‰§è¡Œå¤±è´¥,ä¼šæ ¹æ®é‡å¯ç­–ç•¥è¿›è¡Œé‡å¯</span><br><span class="line">        preStop: #å®¹å™¨ç»ˆæ­¢å‰æ‰§è¡Œæ­¤é’©å­,æ— è®ºç»“æœå¦‚ä½•,å®¹å™¨éƒ½ä¼šç»ˆæ­¢</span><br><span class="line">    livenessProbe:  #å¯¹Podå†…å„å®¹å™¨å¥åº·æ£€æŸ¥çš„è®¾ç½®ï¼Œå½“æ¢æµ‹æ— å“åº”å‡ æ¬¡åå°†è‡ªåŠ¨é‡å¯è¯¥å®¹å™¨</span><br><span class="line">      exec:       ã€€ #å¯¹Podå®¹å™¨å†…æ£€æŸ¥æ–¹å¼è®¾ç½®ä¸ºexecæ–¹å¼</span><br><span class="line">        command: [string]  #execæ–¹å¼éœ€è¦åˆ¶å®šçš„å‘½ä»¤æˆ–è„šæœ¬</span><br><span class="line">      httpGet:       #å¯¹Podå†…ä¸ªå®¹å™¨å¥åº·æ£€æŸ¥æ–¹æ³•è®¾ç½®ä¸ºHttpGetï¼Œéœ€è¦åˆ¶å®šPathã€port</span><br><span class="line">        path: string</span><br><span class="line">        port: number</span><br><span class="line">        host: string</span><br><span class="line">        scheme: string</span><br><span class="line">        HttpHeaders:</span><br><span class="line">        - name: string</span><br><span class="line">          value: string</span><br><span class="line">      tcpSocket:     #å¯¹Podå†…ä¸ªå®¹å™¨å¥åº·æ£€æŸ¥æ–¹å¼è®¾ç½®ä¸ºtcpSocketæ–¹å¼</span><br><span class="line">         port: number</span><br><span class="line">       initialDelaySeconds: 0       #å®¹å™¨å¯åŠ¨å®Œæˆåé¦–æ¬¡æ¢æµ‹çš„æ—¶é—´ï¼Œå•ä½ä¸ºç§’</span><br><span class="line">       timeoutSeconds: 0    ã€€ã€€    #å¯¹å®¹å™¨å¥åº·æ£€æŸ¥æ¢æµ‹ç­‰å¾…å“åº”çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½ç§’ï¼Œé»˜è®¤1ç§’</span><br><span class="line">       periodSeconds: 0     ã€€ã€€    #å¯¹å®¹å™¨ç›‘æ§æ£€æŸ¥çš„å®šæœŸæ¢æµ‹æ—¶é—´è®¾ç½®ï¼Œå•ä½ç§’ï¼Œé»˜è®¤10ç§’ä¸€æ¬¡</span><br><span class="line">       successThreshold: 0</span><br><span class="line">       failureThreshold: 0</span><br><span class="line">       securityContext:</span><br><span class="line">         privileged: false</span><br><span class="line">  restartPolicy: [Always | Never | OnFailure]  #Podçš„é‡å¯ç­–ç•¥</span><br><span class="line">  nodeName: &lt;string&gt; #è®¾ç½®NodeNameè¡¨ç¤ºå°†è¯¥Podè°ƒåº¦åˆ°æŒ‡å®šåˆ°åç§°çš„nodeèŠ‚ç‚¹ä¸Š</span><br><span class="line">  nodeSelector: obeject #è®¾ç½®NodeSelectorè¡¨ç¤ºå°†è¯¥Podè°ƒåº¦åˆ°åŒ…å«è¿™ä¸ªlabelçš„nodeä¸Š</span><br><span class="line">  imagePullSecrets: #Pullé•œåƒæ—¶ä½¿ç”¨çš„secretåç§°ï¼Œä»¥keyï¼šsecretkeyæ ¼å¼æŒ‡å®š</span><br><span class="line">  - name: string</span><br><span class="line">  hostNetwork: false   #æ˜¯å¦ä½¿ç”¨ä¸»æœºç½‘ç»œæ¨¡å¼ï¼Œé»˜è®¤ä¸ºfalseï¼Œå¦‚æœè®¾ç½®ä¸ºtrueï¼Œè¡¨ç¤ºä½¿ç”¨å®¿ä¸»æœºç½‘ç»œ</span><br><span class="line">  volumes:   #åœ¨è¯¥podä¸Šå®šä¹‰å…±äº«å­˜å‚¨å·åˆ—è¡¨</span><br><span class="line">  - name: string    #å…±äº«å­˜å‚¨å·åç§° ï¼ˆvolumesç±»å‹æœ‰å¾ˆå¤šç§ï¼‰</span><br><span class="line">    emptyDir: &#123;&#125;       #ç±»å‹ä¸ºemtyDirçš„å­˜å‚¨å·ï¼Œä¸PodåŒç”Ÿå‘½å‘¨æœŸçš„ä¸€ä¸ªä¸´æ—¶ç›®å½•ã€‚ä¸ºç©ºå€¼</span><br><span class="line">    hostPath: string   #ç±»å‹ä¸ºhostPathçš„å­˜å‚¨å·ï¼Œè¡¨ç¤ºæŒ‚è½½Podæ‰€åœ¨å®¿ä¸»æœºçš„ç›®å½•</span><br><span class="line">      path: string      ã€€ã€€        #Podæ‰€åœ¨å®¿ä¸»æœºçš„ç›®å½•ï¼Œå°†è¢«ç”¨äºåŒæœŸä¸­mountçš„ç›®å½•</span><br><span class="line">    secret:       ã€€ã€€ã€€#ç±»å‹ä¸ºsecretçš„å­˜å‚¨å·ï¼ŒæŒ‚è½½é›†ç¾¤ä¸å®šä¹‰çš„secretå¯¹è±¡åˆ°å®¹å™¨å†…éƒ¨</span><br><span class="line">      scretname: string  </span><br><span class="line">      items:     </span><br><span class="line">      - key: string</span><br><span class="line">        path: string</span><br><span class="line">    configMap:         #ç±»å‹ä¸ºconfigMapçš„å­˜å‚¨å·ï¼ŒæŒ‚è½½é¢„å®šä¹‰çš„configMapå¯¹è±¡åˆ°å®¹å™¨å†…éƒ¨</span><br><span class="line">      name: string</span><br><span class="line">      items:</span><br><span class="line">      - key: string</span><br><span class="line">        path: string</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å°æç¤ºï¼š</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  åœ¨è¿™é‡Œï¼Œå¯é€šè¿‡ä¸€ä¸ªå‘½ä»¤æ¥æŸ¥çœ‹æ¯ç§èµ„æºçš„å¯é…ç½®é¡¹</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  kubectl explain èµ„æºç±»å‹         æŸ¥çœ‹æŸç§èµ„æºå¯ä»¥é…ç½®çš„ä¸€çº§å±æ€§</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  kubectl explain èµ„æºç±»å‹.å±æ€§     æŸ¥çœ‹å±æ€§çš„å­å±æ€§</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl explain pod</span><br><span class="line">KIND:     Pod</span><br><span class="line">VERSION:  v1</span><br><span class="line">FIELDS:</span><br><span class="line">   apiVersion   &lt;string&gt;</span><br><span class="line">   kind &lt;string&gt;</span><br><span class="line">   metadata     &lt;Object&gt;</span><br><span class="line">   spec &lt;Object&gt;</span><br><span class="line">   status       &lt;Object&gt;</span><br><span class="line"></span><br><span class="line">[root@k8s-master01 ~]# kubectl explain pod.metadata</span><br><span class="line">KIND:     Pod</span><br><span class="line">VERSION:  v1</span><br><span class="line">RESOURCE: metadata &lt;Object&gt;</span><br><span class="line">FIELDS:</span><br><span class="line">   annotations  &lt;map[string]string&gt;</span><br><span class="line">   clusterName  &lt;string&gt;</span><br><span class="line">   creationTimestamp    &lt;string&gt;</span><br><span class="line">   deletionGracePeriodSeconds   &lt;integer&gt;</span><br><span class="line">   deletionTimestamp    &lt;string&gt;</span><br><span class="line">   finalizers   &lt;[]string&gt;</span><br><span class="line">   generateName &lt;string&gt;</span><br><span class="line">   generation   &lt;integer&gt;</span><br><span class="line">   labels       &lt;map[string]string&gt;</span><br><span class="line">   managedFields        &lt;[]Object&gt;</span><br><span class="line">   name &lt;string&gt;</span><br><span class="line">   namespace    &lt;string&gt;</span><br><span class="line">   ownerReferences      &lt;[]Object&gt;</span><br><span class="line">   resourceVersion      &lt;string&gt;</span><br><span class="line">   selfLink     &lt;string&gt;</span><br><span class="line">   uid  &lt;string&gt;</span><br></pre></td></tr></table></figure><p>åœ¨kubernetesä¸­åŸºæœ¬æ‰€æœ‰èµ„æºçš„ä¸€çº§å±æ€§éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¸»è¦åŒ…å«5éƒ¨åˆ†ï¼š</p><ul><li>apiVersion <string> ç‰ˆæœ¬ï¼Œç”±kuberneteså†…éƒ¨å®šä¹‰ï¼Œç‰ˆæœ¬å·å¿…é¡»å¯ä»¥ç”¨ kubectl api-versions æŸ¥è¯¢åˆ°</li><li>kind <string> ç±»å‹ï¼Œç”±kuberneteså†…éƒ¨å®šä¹‰ï¼Œç‰ˆæœ¬å·å¿…é¡»å¯ä»¥ç”¨ kubectl api-resources æŸ¥è¯¢åˆ°</li><li>metadata <Object> å…ƒæ•°æ®ï¼Œä¸»è¦æ˜¯èµ„æºæ ‡è¯†å’Œè¯´æ˜ï¼Œå¸¸ç”¨çš„æœ‰nameã€namespaceã€labelsç­‰</li><li>spec <Object> æè¿°ï¼Œè¿™æ˜¯é…ç½®ä¸­æœ€é‡è¦çš„ä¸€éƒ¨åˆ†ï¼Œé‡Œé¢æ˜¯å¯¹å„ç§èµ„æºé…ç½®çš„è¯¦ç»†æè¿°</li><li>status <Object> çŠ¶æ€ä¿¡æ¯ï¼Œé‡Œé¢çš„å†…å®¹ä¸éœ€è¦å®šä¹‰ï¼Œç”±kubernetesè‡ªåŠ¨ç”Ÿæˆ</li></ul><p>åœ¨ä¸Šé¢çš„å±æ€§ä¸­ï¼Œspecæ˜¯æ¥ä¸‹æ¥ç ”ç©¶çš„é‡ç‚¹ï¼Œç»§ç»­çœ‹ä¸‹å®ƒçš„å¸¸è§å­å±æ€§:</p><ul><li>containers &lt;[]Object&gt; å®¹å™¨åˆ—è¡¨ï¼Œç”¨äºå®šä¹‰å®¹å™¨çš„è¯¦ç»†ä¿¡æ¯</li><li>nodeName <String> æ ¹æ®nodeNameçš„å€¼å°†podè°ƒåº¦åˆ°æŒ‡å®šçš„NodeèŠ‚ç‚¹ä¸Š</li><li>nodeSelector &lt;map[]&gt; æ ¹æ®NodeSelectorä¸­å®šä¹‰çš„ä¿¡æ¯é€‰æ‹©å°†è¯¥Podè°ƒåº¦åˆ°åŒ…å«è¿™äº›labelçš„Node ä¸Š</li><li>hostNetwork <boolean> æ˜¯å¦ä½¿ç”¨ä¸»æœºç½‘ç»œæ¨¡å¼ï¼Œé»˜è®¤ä¸ºfalseï¼Œå¦‚æœè®¾ç½®ä¸ºtrueï¼Œè¡¨ç¤ºä½¿ç”¨å®¿ä¸»æœºç½‘ç»œ</li><li>volumes &lt;[]Object&gt; å­˜å‚¨å·ï¼Œç”¨äºå®šä¹‰Podä¸Šé¢æŒ‚åœ¨çš„å­˜å‚¨ä¿¡æ¯</li><li>restartPolicy <string> é‡å¯ç­–ç•¥ï¼Œè¡¨ç¤ºPodåœ¨é‡åˆ°æ•…éšœçš„æ—¶å€™çš„å¤„ç†ç­–ç•¥</li></ul><h2 id="5-2-Podé…ç½®"><a href="#5-2-Podé…ç½®" class="headerlink" title="5.2 Podé…ç½®"></a>5.2 Podé…ç½®</h2><p>æœ¬å°èŠ‚ä¸»è¦æ¥ç ”ç©¶<code>pod.spec.containers</code>å±æ€§ï¼Œè¿™ä¹Ÿæ˜¯podé…ç½®ä¸­æœ€ä¸ºå…³é”®çš„ä¸€é¡¹é…ç½®ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@k8s-master01 ~]# kubectl explain pod.spec.containers</span><br><span class="line">KIND:     Pod</span><br><span class="line">VERSION:  v1</span><br><span class="line">RESOURCE: containers &lt;[]Object&gt;   # æ•°ç»„ï¼Œä»£è¡¨å¯ä»¥æœ‰å¤šä¸ªå®¹å™¨</span><br><span class="line">FIELDS:</span><br><span class="line">   name  &lt;string&gt;     # å®¹å™¨åç§°</span><br><span class="line">   image &lt;string&gt;     # å®¹å™¨éœ€è¦çš„é•œåƒåœ°å€</span><br><span class="line">   imagePullPolicy  &lt;string&gt; # é•œåƒæ‹‰å–ç­–ç•¥ </span><br><span class="line">   command  &lt;[]string&gt; # å®¹å™¨çš„å¯åŠ¨å‘½ä»¤åˆ—è¡¨ï¼Œå¦‚ä¸æŒ‡å®šï¼Œä½¿ç”¨æ‰“åŒ…æ—¶ä½¿ç”¨çš„å¯åŠ¨å‘½ä»¤</span><br><span class="line">   args     &lt;[]string&gt; # å®¹å™¨çš„å¯åŠ¨å‘½ä»¤éœ€è¦çš„å‚æ•°åˆ—è¡¨</span><br><span class="line">   env      &lt;[]Object&gt; # å®¹å™¨ç¯å¢ƒå˜é‡çš„é…ç½®</span><br><span class="line">   ports    &lt;[]Object&gt;     # å®¹å™¨éœ€è¦æš´éœ²çš„ç«¯å£å·åˆ—è¡¨</span><br><span class="line">   resources &lt;Object&gt;      # èµ„æºé™åˆ¶å’Œèµ„æºè¯·æ±‚çš„è®¾ç½®</span><br></pre></td></tr></table></figure><h3 id="5-2-1-åŸºæœ¬é…ç½®"><a href="#5-2-1-åŸºæœ¬é…ç½®" class="headerlink" title="5.2.1 åŸºæœ¬é…ç½®"></a>5.2.1 åŸºæœ¬é…ç½®</h3><p>åˆ›å»ºpod-base.yamlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-base</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">user:</span> <span class="string">heima</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">busybox</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">busybox:1.30</span></span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20210617223823675-1626781695411.png" alt="image-20210617223823675"></p><p>ä¸Šé¢å®šä¹‰äº†ä¸€ä¸ªæ¯”è¾ƒç®€å•Podçš„é…ç½®ï¼Œé‡Œé¢æœ‰ä¸¤ä¸ªå®¹å™¨ï¼š</p><ul><li>nginxï¼šç”¨1.17.1ç‰ˆæœ¬çš„nginxé•œåƒåˆ›å»ºï¼Œï¼ˆnginxæ˜¯ä¸€ä¸ªè½»é‡çº§webå®¹å™¨ï¼‰</li><li>busyboxï¼šç”¨1.30ç‰ˆæœ¬çš„busyboxé•œåƒåˆ›å»ºï¼Œï¼ˆbusyboxæ˜¯ä¸€ä¸ªå°å·§çš„linuxå‘½ä»¤é›†åˆï¼‰</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºPod</span></span><br><span class="line">[root@k8s-master01 pod]# kubectl apply -f pod-base.yaml</span><br><span class="line">pod/pod-base created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹PodçŠ¶å†µ</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">READY 1/2 : è¡¨ç¤ºå½“å‰Podä¸­æœ‰2ä¸ªå®¹å™¨ï¼Œå…¶ä¸­1ä¸ªå‡†å¤‡å°±ç»ªï¼Œ1ä¸ªæœªå°±ç»ª</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">RESTARTS  : é‡å¯æ¬¡æ•°ï¼Œå› ä¸ºæœ‰1ä¸ªå®¹å™¨æ•…éšœäº†ï¼ŒPodä¸€ç›´åœ¨é‡å¯è¯•å›¾æ¢å¤å®ƒ</span></span><br><span class="line">[root@k8s-master01 pod]# kubectl get pod -n dev</span><br><span class="line">NAME       READY   STATUS    RESTARTS   AGE</span><br><span class="line">pod-base   1/2     Running   4          95s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯ä»¥é€šè¿‡describeæŸ¥çœ‹å†…éƒ¨çš„è¯¦æƒ…</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ­¤æ—¶å·²ç»è¿è¡Œèµ·æ¥äº†ä¸€ä¸ªåŸºæœ¬çš„Podï¼Œè™½ç„¶å®ƒæš‚æ—¶æœ‰é—®é¢˜</span></span><br><span class="line">[root@k8s-master01 pod]# kubectl describe pod pod-base -n dev</span><br></pre></td></tr></table></figure><h3 id="5-2-2-é•œåƒæ‹‰å–"><a href="#5-2-2-é•œåƒæ‹‰å–" class="headerlink" title="5.2.2 é•œåƒæ‹‰å–"></a>5.2.2 é•œåƒæ‹‰å–</h3><p>åˆ›å»ºpod-imagepullpolicy.yamlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-imagepullpolicy</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">    <span class="attr">imagePullPolicy:</span> <span class="string">Never</span> <span class="comment"># ç”¨äºè®¾ç½®é•œåƒæ‹‰å–ç­–ç•¥</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">busybox</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">busybox:1.30</span></span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20210617223923659.png" alt="image-20210617223923659"></p><p>imagePullPolicyï¼Œç”¨äºè®¾ç½®é•œåƒæ‹‰å–ç­–ç•¥ï¼Œkubernetesæ”¯æŒé…ç½®ä¸‰ç§æ‹‰å–ç­–ç•¥ï¼š</p><ul><li>Alwaysï¼šæ€»æ˜¯ä»è¿œç¨‹ä»“åº“æ‹‰å–é•œåƒï¼ˆä¸€ç›´è¿œç¨‹ä¸‹è½½ï¼‰</li><li>IfNotPresentï¼šæœ¬åœ°æœ‰åˆ™ä½¿ç”¨æœ¬åœ°é•œåƒï¼Œæœ¬åœ°æ²¡æœ‰åˆ™ä»è¿œç¨‹ä»“åº“æ‹‰å–é•œåƒï¼ˆæœ¬åœ°æœ‰å°±æœ¬åœ° æœ¬åœ°æ²¡è¿œç¨‹ä¸‹è½½ï¼‰</li><li>Neverï¼šåªä½¿ç”¨æœ¬åœ°é•œåƒï¼Œä»ä¸å»è¿œç¨‹ä»“åº“æ‹‰å–ï¼Œæœ¬åœ°æ²¡æœ‰å°±æŠ¥é”™ ï¼ˆä¸€ç›´ä½¿ç”¨æœ¬åœ°ï¼‰</li></ul><blockquote><p>é»˜è®¤å€¼è¯´æ˜ï¼š</p><p>å¦‚æœé•œåƒtagä¸ºå…·ä½“ç‰ˆæœ¬å·ï¼Œ é»˜è®¤ç­–ç•¥æ˜¯ï¼šIfNotPresent</p><p>å¦‚æœé•œåƒtagä¸ºï¼šlatestï¼ˆæœ€ç»ˆç‰ˆæœ¬ï¼‰ ï¼Œé»˜è®¤ç­–ç•¥æ˜¯always</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºPod</span></span><br><span class="line">[root@k8s-master01 pod]# kubectl create -f pod-imagepullpolicy.yaml</span><br><span class="line">pod/pod-imagepullpolicy created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹Podè¯¦æƒ…</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ­¤æ—¶æ˜æ˜¾å¯ä»¥çœ‹åˆ°nginxé•œåƒæœ‰ä¸€æ­¥Pulling image <span class="string">&quot;nginx:1.17.1&quot;</span>çš„è¿‡ç¨‹</span></span><br><span class="line">[root@k8s-master01 pod]# kubectl describe pod pod-imagepullpolicy -n dev</span><br><span class="line">......</span><br><span class="line">Events:</span><br><span class="line">  Type     Reason     Age               From               Message</span><br><span class="line">  ----     ------     ----              ----               -------</span><br><span class="line">  Normal   Scheduled  &lt;unknown&gt;         default-scheduler  Successfully assigned dev/pod-imagePullPolicy to node1</span><br><span class="line">  Normal   Pulling    32s               kubelet, node1     Pulling image &quot;nginx:1.17.1&quot;</span><br><span class="line">  Normal   Pulled     26s               kubelet, node1     Successfully pulled image &quot;nginx:1.17.1&quot;</span><br><span class="line">  Normal   Created    26s               kubelet, node1     Created container nginx</span><br><span class="line">  Normal   Started    25s               kubelet, node1     Started container nginx</span><br><span class="line">  Normal   Pulled     7s (x3 over 25s)  kubelet, node1     Container image &quot;busybox:1.30&quot; already present on machine</span><br><span class="line">  Normal   Created    7s (x3 over 25s)  kubelet, node1     Created container busybox</span><br><span class="line">  Normal   Started    7s (x3 over 25s)  kubelet, node1     Started container busybox</span><br></pre></td></tr></table></figure><h3 id="5-2-3-å¯åŠ¨å‘½ä»¤"><a href="#5-2-3-å¯åŠ¨å‘½ä»¤" class="headerlink" title="5.2.3 å¯åŠ¨å‘½ä»¤"></a>5.2.3 å¯åŠ¨å‘½ä»¤</h3><p>åœ¨å‰é¢çš„æ¡ˆä¾‹ä¸­ï¼Œä¸€ç›´æœ‰ä¸€ä¸ªé—®é¢˜æ²¡æœ‰è§£å†³ï¼Œå°±æ˜¯çš„busyboxå®¹å™¨ä¸€ç›´æ²¡æœ‰æˆåŠŸè¿è¡Œï¼Œé‚£ä¹ˆåˆ°åº•æ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´è¿™ä¸ªå®¹å™¨çš„æ•…éšœå‘¢ï¼Ÿ</p><p>åŸæ¥busyboxå¹¶ä¸æ˜¯ä¸€ä¸ªç¨‹åºï¼Œè€Œæ˜¯ç±»ä¼¼äºä¸€ä¸ªå·¥å…·ç±»çš„é›†åˆï¼Œkubernetesé›†ç¾¤å¯åŠ¨ç®¡ç†åï¼Œå®ƒä¼šè‡ªåŠ¨å…³é—­ã€‚è§£å†³æ–¹æ³•å°±æ˜¯è®©å…¶ä¸€ç›´åœ¨è¿è¡Œï¼Œè¿™å°±ç”¨åˆ°äº†commandé…ç½®ã€‚</p><p>åˆ›å»ºpod-command.yamlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-command</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">busybox</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">busybox:1.30</span></span><br><span class="line">    <span class="attr">command:</span> [<span class="string">&quot;/bin/sh&quot;</span>,<span class="string">&quot;-c&quot;</span>,<span class="string">&quot;touch /tmp/hello.txt;while true;do /bin/echo $(date +%T) &gt;&gt; /tmp/hello.txt; sleep 3; done;&quot;</span>]</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20210617224457945.png" alt="image-20210617224457945"></p><p>commandï¼Œç”¨äºåœ¨podä¸­çš„å®¹å™¨åˆå§‹åŒ–å®Œæ¯•ä¹‹åè¿è¡Œä¸€ä¸ªå‘½ä»¤ã€‚</p><blockquote><p>ç¨å¾®è§£é‡Šä¸‹ä¸Šé¢å‘½ä»¤çš„æ„æ€ï¼š</p><p>â€œ&#x2F;bin&#x2F;shâ€,â€-câ€, ä½¿ç”¨shæ‰§è¡Œå‘½ä»¤</p><p>touch &#x2F;tmp&#x2F;hello.txt; åˆ›å»ºä¸€ä¸ª&#x2F;tmp&#x2F;hello.txt æ–‡ä»¶</p><p>while true;do &#x2F;bin&#x2F;echo $(date +%T) &gt;&gt; &#x2F;tmp&#x2F;hello.txt; sleep 3; done; æ¯éš”3ç§’å‘æ–‡ä»¶ä¸­å†™å…¥å½“å‰æ—¶é—´</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºPod</span></span><br><span class="line">[root@k8s-master01 pod]# kubectl create  -f pod-command.yaml</span><br><span class="line">pod/pod-command created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹PodçŠ¶æ€</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ­¤æ—¶å‘ç°ä¸¤ä¸ªpodéƒ½æ­£å¸¸è¿è¡Œäº†</span></span><br><span class="line">[root@k8s-master01 pod]# kubectl get pods pod-command -n dev</span><br><span class="line">NAME          READY   STATUS   RESTARTS   AGE</span><br><span class="line">pod-command   2/2     Runing   0          2s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿›å…¥podä¸­çš„busyboxå®¹å™¨ï¼ŒæŸ¥çœ‹æ–‡ä»¶å†…å®¹</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¡¥å……ä¸€ä¸ªå‘½ä»¤: kubectl <span class="built_in">exec</span>  podåç§° -n å‘½åç©ºé—´ -it -c å®¹å™¨åç§° /bin/sh  åœ¨å®¹å™¨å†…éƒ¨æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä½¿ç”¨è¿™ä¸ªå‘½ä»¤å°±å¯ä»¥è¿›å…¥æŸä¸ªå®¹å™¨çš„å†…éƒ¨ï¼Œç„¶åè¿›è¡Œç›¸å…³æ“ä½œäº†</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¯”å¦‚ï¼Œå¯ä»¥æŸ¥çœ‹txtæ–‡ä»¶çš„å†…å®¹</span></span><br><span class="line">[root@k8s-master01 pod]# kubectl exec pod-command -n dev -it -c busybox /bin/sh</span><br><span class="line">/ # tail -f /tmp/hello.txt</span><br><span class="line">14:44:19</span><br><span class="line">14:44:22</span><br><span class="line">14:44:25</span><br></pre></td></tr></table></figure><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ç‰¹åˆ«è¯´æ˜ï¼š</span><br><span class="line">    é€šè¿‡ä¸Šé¢å‘ç°<span class="keyword">command</span>å·²ç»å¯ä»¥å®Œæˆå¯åŠ¨å‘½ä»¤å’Œä¼ é€’å‚æ•°çš„åŠŸèƒ½ï¼Œä¸ºä»€ä¹ˆè¿™é‡Œè¿˜è¦æä¾›ä¸€ä¸ª<span class="keyword">args</span>é€‰é¡¹ï¼Œç”¨äºä¼ é€’å‚æ•°å‘¢?è¿™å…¶å®è·Ÿdockeræœ‰ç‚¹å…³ç³»ï¼Œkubernetesä¸­çš„<span class="keyword">command</span>ã€<span class="keyword">args</span>ä¸¤é¡¹å…¶å®æ˜¯å®ç°è¦†ç›–Dockerfileä¸­ENTRYPOINTçš„åŠŸèƒ½ã€‚</span><br><span class="line"> <span class="number">1</span> å¦‚æœ<span class="keyword">command</span>å’Œ<span class="keyword">args</span>å‡æ²¡æœ‰å†™ï¼Œé‚£ä¹ˆç”¨Dockerfileçš„é…ç½®ã€‚</span><br><span class="line"> <span class="number">2</span> å¦‚æœ<span class="keyword">command</span>å†™äº†ï¼Œä½†<span class="keyword">args</span>æ²¡æœ‰å†™ï¼Œé‚£ä¹ˆDockerfileé»˜è®¤çš„é…ç½®ä¼šè¢«å¿½ç•¥ï¼Œæ‰§è¡Œè¾“å…¥çš„<span class="keyword">command</span></span><br><span class="line"> <span class="number">3</span> å¦‚æœ<span class="keyword">command</span>æ²¡å†™ï¼Œä½†<span class="keyword">args</span>å†™äº†ï¼Œé‚£ä¹ˆDockerfileä¸­é…ç½®çš„ENTRYPOINTçš„å‘½ä»¤ä¼šè¢«æ‰§è¡Œï¼Œä½¿ç”¨å½“å‰<span class="keyword">args</span>çš„å‚æ•°</span><br><span class="line"> <span class="number">4</span> å¦‚æœ<span class="keyword">command</span>å’Œ<span class="keyword">args</span>éƒ½å†™äº†ï¼Œé‚£ä¹ˆDockerfileçš„é…ç½®è¢«å¿½ç•¥ï¼Œæ‰§è¡Œ<span class="keyword">command</span>å¹¶è¿½åŠ ä¸Š<span class="keyword">args</span>å‚æ•°</span><br></pre></td></tr></table></figure><h3 id="5-2-4-ç¯å¢ƒå˜é‡"><a href="#5-2-4-ç¯å¢ƒå˜é‡" class="headerlink" title="5.2.4 ç¯å¢ƒå˜é‡"></a>5.2.4 ç¯å¢ƒå˜é‡</h3><p>åˆ›å»ºpod-env.yamlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-env</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">busybox</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">busybox:1.30</span></span><br><span class="line">    <span class="attr">command:</span> [<span class="string">&quot;/bin/sh&quot;</span>,<span class="string">&quot;-c&quot;</span>,<span class="string">&quot;while true;do /bin/echo $(date +%T);sleep 60; done;&quot;</span>]</span><br><span class="line">    <span class="attr">env:</span> <span class="comment"># è®¾ç½®ç¯å¢ƒå˜é‡åˆ—è¡¨</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&quot;username&quot;</span></span><br><span class="line">      <span class="attr">value:</span> <span class="string">&quot;admin&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">&quot;password&quot;</span></span><br><span class="line">      <span class="attr">value:</span> <span class="string">&quot;123456&quot;</span></span><br></pre></td></tr></table></figure><p>envï¼Œç¯å¢ƒå˜é‡ï¼Œç”¨äºåœ¨podä¸­çš„å®¹å™¨è®¾ç½®ç¯å¢ƒå˜é‡ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºPod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pod-env.yaml</span><br><span class="line">pod/pod-env created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿›å…¥å®¹å™¨ï¼Œè¾“å‡ºç¯å¢ƒå˜é‡</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl exec pod-env -n dev -c busybox -it /bin/sh</span><br><span class="line">/ # echo $username</span><br><span class="line">admin</span><br><span class="line">/ # echo $password</span><br><span class="line">123456</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼ä¸æ˜¯å¾ˆæ¨èï¼Œæ¨èå°†è¿™äº›é…ç½®å•ç‹¬å­˜å‚¨åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œè¿™ç§æ–¹å¼å°†åœ¨åé¢ä»‹ç»ã€‚</p><h3 id="5-2-5-ç«¯å£è®¾ç½®"><a href="#5-2-5-ç«¯å£è®¾ç½®" class="headerlink" title="5.2.5 ç«¯å£è®¾ç½®"></a>5.2.5 ç«¯å£è®¾ç½®</h3><p>æœ¬å°èŠ‚æ¥ä»‹ç»å®¹å™¨çš„ç«¯å£è®¾ç½®ï¼Œä¹Ÿå°±æ˜¯containersçš„portsé€‰é¡¹ã€‚</p><p>é¦–å…ˆçœ‹ä¸‹portsæ”¯æŒçš„å­é€‰é¡¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@k8s-master01 ~]# kubectl explain pod.spec.containers.ports</span><br><span class="line">KIND:     Pod</span><br><span class="line">VERSION:  v1</span><br><span class="line">RESOURCE: ports &lt;[]Object&gt;</span><br><span class="line">FIELDS:</span><br><span class="line">   name         &lt;string&gt;  # ç«¯å£åç§°ï¼Œå¦‚æœæŒ‡å®šï¼Œå¿…é¡»ä¿è¯nameåœ¨podä¸­æ˜¯å”¯ä¸€çš„</span><br><span class="line">   containerPort&lt;integer&gt; # å®¹å™¨è¦ç›‘å¬çš„ç«¯å£(0&lt;x&lt;65536)</span><br><span class="line">   hostPort     &lt;integer&gt; # å®¹å™¨è¦åœ¨ä¸»æœºä¸Šå…¬å¼€çš„ç«¯å£ï¼Œå¦‚æœè®¾ç½®ï¼Œä¸»æœºä¸Šåªèƒ½è¿è¡Œå®¹å™¨çš„ä¸€ä¸ªå‰¯æœ¬(ä¸€èˆ¬çœç•¥) </span><br><span class="line">   hostIP       &lt;string&gt;  # è¦å°†å¤–éƒ¨ç«¯å£ç»‘å®šåˆ°çš„ä¸»æœºIP(ä¸€èˆ¬çœç•¥)</span><br><span class="line">   protocol     &lt;string&gt;  # ç«¯å£åè®®ã€‚å¿…é¡»æ˜¯UDPã€TCPæˆ–SCTPã€‚é»˜è®¤ä¸ºâ€œTCPâ€ã€‚</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œç¼–å†™ä¸€ä¸ªæµ‹è¯•æ¡ˆä¾‹ï¼Œåˆ›å»ºpod-ports.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-ports</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">    <span class="attr">ports:</span> <span class="comment"># è®¾ç½®å®¹å™¨æš´éœ²çš„ç«¯å£åˆ—è¡¨</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx-port</span></span><br><span class="line">      <span class="attr">containerPort:</span> <span class="number">80</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">TCP</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºPod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pod-ports.yaml</span><br><span class="line">pod/pod-ports created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹pod</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœ¨ä¸‹é¢å¯ä»¥æ˜æ˜¾çœ‹åˆ°é…ç½®ä¿¡æ¯</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pod pod-ports -n dev -o yaml</span><br><span class="line">......</span><br><span class="line">spec:</span><br><span class="line">  containers:</span><br><span class="line">  - image: nginx:1.17.1</span><br><span class="line">    imagePullPolicy: IfNotPresent</span><br><span class="line">    name: nginx</span><br><span class="line">    ports:</span><br><span class="line">    - containerPort: 80</span><br><span class="line">      name: nginx-port</span><br><span class="line">      protocol: TCP</span><br><span class="line">......</span><br></pre></td></tr></table></figure><p>è®¿é—®å®¹å™¨ä¸­çš„ç¨‹åºéœ€è¦ä½¿ç”¨çš„æ˜¯<code>Podip:containerPort</code></p><h3 id="5-2-6-èµ„æºé…é¢"><a href="#5-2-6-èµ„æºé…é¢" class="headerlink" title="5.2.6 èµ„æºé…é¢"></a>5.2.6 èµ„æºé…é¢</h3><p>å®¹å™¨ä¸­çš„ç¨‹åºè¦è¿è¡Œï¼Œè‚¯å®šæ˜¯è¦å ç”¨ä¸€å®šèµ„æºçš„ï¼Œæ¯”å¦‚cpuå’Œå†…å­˜ç­‰ï¼Œå¦‚æœä¸å¯¹æŸä¸ªå®¹å™¨çš„èµ„æºåšé™åˆ¶ï¼Œé‚£ä¹ˆå®ƒå°±å¯èƒ½åƒæ‰å¤§é‡èµ„æºï¼Œå¯¼è‡´å…¶å®ƒå®¹å™¨æ— æ³•è¿è¡Œã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œkubernetesæä¾›äº†å¯¹å†…å­˜å’Œcpuçš„èµ„æºè¿›è¡Œé…é¢çš„æœºåˆ¶ï¼Œè¿™ç§æœºåˆ¶ä¸»è¦é€šè¿‡resourcesé€‰é¡¹å®ç°ï¼Œä»–æœ‰ä¸¤ä¸ªå­é€‰é¡¹ï¼š</p><ul><li>limitsï¼šç”¨äºé™åˆ¶è¿è¡Œæ—¶å®¹å™¨çš„æœ€å¤§å ç”¨èµ„æºï¼Œå½“å®¹å™¨å ç”¨èµ„æºè¶…è¿‡limitsæ—¶ä¼šè¢«ç»ˆæ­¢ï¼Œå¹¶è¿›è¡Œé‡å¯</li><li>requests ï¼šç”¨äºè®¾ç½®å®¹å™¨éœ€è¦çš„æœ€å°èµ„æºï¼Œå¦‚æœç¯å¢ƒèµ„æºä¸å¤Ÿï¼Œå®¹å™¨å°†æ— æ³•å¯åŠ¨</li></ul><p>å¯ä»¥é€šè¿‡ä¸Šé¢ä¸¤ä¸ªé€‰é¡¹è®¾ç½®èµ„æºçš„ä¸Šä¸‹é™ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œç¼–å†™ä¸€ä¸ªæµ‹è¯•æ¡ˆä¾‹ï¼Œåˆ›å»ºpod-resources.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-resources</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">    <span class="attr">resources:</span> <span class="comment"># èµ„æºé…é¢</span></span><br><span class="line">      <span class="attr">limits:</span>  <span class="comment"># é™åˆ¶èµ„æºï¼ˆä¸Šé™ï¼‰</span></span><br><span class="line">        <span class="attr">cpu:</span> <span class="string">&quot;2&quot;</span> <span class="comment"># CPUé™åˆ¶ï¼Œå•ä½æ˜¯coreæ•°</span></span><br><span class="line">        <span class="attr">memory:</span> <span class="string">&quot;10Gi&quot;</span> <span class="comment"># å†…å­˜é™åˆ¶</span></span><br><span class="line">      <span class="attr">requests:</span> <span class="comment"># è¯·æ±‚èµ„æºï¼ˆä¸‹é™ï¼‰</span></span><br><span class="line">        <span class="attr">cpu:</span> <span class="string">&quot;1&quot;</span>  <span class="comment"># CPUé™åˆ¶ï¼Œå•ä½æ˜¯coreæ•°</span></span><br><span class="line">        <span class="attr">memory:</span> <span class="string">&quot;10Mi&quot;</span>  <span class="comment"># å†…å­˜é™åˆ¶</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™å¯¹cpuå’Œmemoryçš„å•ä½åšä¸€ä¸ªè¯´æ˜ï¼š</p><ul><li>cpuï¼šcoreæ•°ï¼Œå¯ä»¥ä¸ºæ•´æ•°æˆ–å°æ•°</li><li>memoryï¼š å†…å­˜å¤§å°ï¼Œå¯ä»¥ä½¿ç”¨Giã€Miã€Gã€Mç­‰å½¢å¼</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿è¡ŒPod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create  -f pod-resources.yaml</span><br><span class="line">pod/pod-resources created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å‘ç°podè¿è¡Œæ­£å¸¸</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pod pod-resources -n dev</span><br><span class="line">NAME            READY   STATUS    RESTARTS   AGE  </span><br><span class="line">pod-resources   1/1     Running   0          39s   </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¥ä¸‹æ¥ï¼Œåœæ­¢Pod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl delete  -f pod-resources.yaml</span><br><span class="line">pod &quot;pod-resources&quot; deleted</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¼–è¾‘podï¼Œä¿®æ”¹resources.requests.memoryçš„å€¼ä¸º10Gi</span></span><br><span class="line">[root@k8s-master01 ~]# vim pod-resources.yaml</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å†æ¬¡å¯åŠ¨pod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create  -f pod-resources.yaml</span><br><span class="line">pod/pod-resources created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹PodçŠ¶æ€ï¼Œå‘ç°Podå¯åŠ¨å¤±è´¥</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pod pod-resources -n dev -o wide</span><br><span class="line">NAME            READY   STATUS    RESTARTS   AGE          </span><br><span class="line">pod-resources   0/1     Pending   0          20s    </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹podè¯¦æƒ…ä¼šå‘ç°ï¼Œå¦‚ä¸‹æç¤º</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl describe pod pod-resources -n dev</span><br><span class="line">......</span><br><span class="line">Warning  FailedScheduling  35s   default-scheduler  0/3 nodes are available: 1 node(s) had taint &#123;node-role.kubernetes.io/master: &#125;, that the pod didn&#x27;t tolerate, 2 Insufficient memory.(å†…å­˜ä¸è¶³)</span><br></pre></td></tr></table></figure><h2 id="5-3-Podç”Ÿå‘½å‘¨æœŸ"><a href="#5-3-Podç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="5.3 Podç”Ÿå‘½å‘¨æœŸ"></a>5.3 Podç”Ÿå‘½å‘¨æœŸ</h2><p>æˆ‘ä»¬ä¸€èˆ¬å°†podå¯¹è±¡ä»åˆ›å»ºè‡³ç»ˆçš„è¿™æ®µæ—¶é—´èŒƒå›´ç§°ä¸ºpodçš„ç”Ÿå‘½å‘¨æœŸï¼Œå®ƒä¸»è¦åŒ…å«ä¸‹é¢çš„è¿‡ç¨‹ï¼š</p><ul><li>podåˆ›å»ºè¿‡ç¨‹</li><li>è¿è¡Œåˆå§‹åŒ–å®¹å™¨ï¼ˆinit containerï¼‰è¿‡ç¨‹</li><li>è¿è¡Œä¸»å®¹å™¨ï¼ˆmain containerï¼‰<ul><li>å®¹å™¨å¯åŠ¨åé’©å­ï¼ˆpost startï¼‰ã€å®¹å™¨ç»ˆæ­¢å‰é’©å­ï¼ˆpre stopï¼‰</li><li>å®¹å™¨çš„å­˜æ´»æ€§æ¢æµ‹ï¼ˆliveness probeï¼‰ã€å°±ç»ªæ€§æ¢æµ‹ï¼ˆreadiness probeï¼‰</li></ul></li><li>podç»ˆæ­¢è¿‡ç¨‹</li></ul><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200412111402706-1626782188724.png" alt="image-20200412111402706"></p><p>åœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ï¼ŒPodä¼šå‡ºç°5ç§<strong>çŠ¶æ€</strong>ï¼ˆ<strong>ç›¸ä½</strong>ï¼‰ï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š</p><ul><li>æŒ‚èµ·ï¼ˆPendingï¼‰ï¼šapiserverå·²ç»åˆ›å»ºäº†podèµ„æºå¯¹è±¡ï¼Œä½†å®ƒå°šæœªè¢«è°ƒåº¦å®Œæˆæˆ–è€…ä»å¤„äºä¸‹è½½é•œåƒçš„è¿‡ç¨‹ä¸­</li><li>è¿è¡Œä¸­ï¼ˆRunningï¼‰ï¼špodå·²ç»è¢«è°ƒåº¦è‡³æŸèŠ‚ç‚¹ï¼Œå¹¶ä¸”æ‰€æœ‰å®¹å™¨éƒ½å·²ç»è¢«kubeletåˆ›å»ºå®Œæˆ</li><li>æˆåŠŸï¼ˆSucceededï¼‰ï¼špodä¸­çš„æ‰€æœ‰å®¹å™¨éƒ½å·²ç»æˆåŠŸç»ˆæ­¢å¹¶ä¸”ä¸ä¼šè¢«é‡å¯</li><li>å¤±è´¥ï¼ˆFailedï¼‰ï¼šæ‰€æœ‰å®¹å™¨éƒ½å·²ç»ç»ˆæ­¢ï¼Œä½†è‡³å°‘æœ‰ä¸€ä¸ªå®¹å™¨ç»ˆæ­¢å¤±è´¥ï¼Œå³å®¹å™¨è¿”å›äº†é0å€¼çš„é€€å‡ºçŠ¶æ€</li><li>æœªçŸ¥ï¼ˆUnknownï¼‰ï¼šapiserveræ— æ³•æ­£å¸¸è·å–åˆ°podå¯¹è±¡çš„çŠ¶æ€ä¿¡æ¯ï¼Œé€šå¸¸ç”±ç½‘ç»œé€šä¿¡å¤±è´¥æ‰€å¯¼è‡´</li></ul><h3 id="5-3-1-åˆ›å»ºå’Œç»ˆæ­¢"><a href="#5-3-1-åˆ›å»ºå’Œç»ˆæ­¢" class="headerlink" title="5.3.1 åˆ›å»ºå’Œç»ˆæ­¢"></a>5.3.1 åˆ›å»ºå’Œç»ˆæ­¢</h3><p><strong>podçš„åˆ›å»ºè¿‡ç¨‹</strong></p><ol><li><p>ç”¨æˆ·é€šè¿‡kubectlæˆ–å…¶ä»–apiå®¢æˆ·ç«¯æäº¤éœ€è¦åˆ›å»ºçš„podä¿¡æ¯ç»™apiServer</p></li><li><p>apiServerå¼€å§‹ç”Ÿæˆpodå¯¹è±¡çš„ä¿¡æ¯ï¼Œå¹¶å°†ä¿¡æ¯å­˜å…¥etcdï¼Œç„¶åè¿”å›ç¡®è®¤ä¿¡æ¯è‡³å®¢æˆ·ç«¯</p></li><li><p>apiServerå¼€å§‹åæ˜ etcdä¸­çš„podå¯¹è±¡çš„å˜åŒ–ï¼Œå…¶å®ƒç»„ä»¶ä½¿ç”¨watchæœºåˆ¶æ¥è·Ÿè¸ªæ£€æŸ¥apiServerä¸Šçš„å˜åŠ¨</p></li><li><p>schedulerå‘ç°æœ‰æ–°çš„podå¯¹è±¡è¦åˆ›å»ºï¼Œå¼€å§‹ä¸ºPodåˆ†é…ä¸»æœºå¹¶å°†ç»“æœä¿¡æ¯æ›´æ–°è‡³apiServer</p></li><li><p>nodeèŠ‚ç‚¹ä¸Šçš„kubeletå‘ç°æœ‰podè°ƒåº¦è¿‡æ¥ï¼Œå°è¯•è°ƒç”¨dockerå¯åŠ¨å®¹å™¨ï¼Œå¹¶å°†ç»“æœå›é€è‡³apiServer</p></li><li><p>apiServerå°†æ¥æ”¶åˆ°çš„podçŠ¶æ€ä¿¡æ¯å­˜å…¥etcdä¸­</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200406184656917-1626782168787.png" alt="image-20200406184656917"></p></li></ol><p><strong>podçš„ç»ˆæ­¢è¿‡ç¨‹</strong></p><ol><li>ç”¨æˆ·å‘apiServerå‘é€åˆ é™¤podå¯¹è±¡çš„å‘½ä»¤</li><li>apiServcerä¸­çš„podå¯¹è±¡ä¿¡æ¯ä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œæ›´æ–°ï¼Œåœ¨å®½é™æœŸå†…ï¼ˆé»˜è®¤30sï¼‰ï¼Œpodè¢«è§†ä¸ºdead</li><li>å°†podæ ‡è®°ä¸ºterminatingçŠ¶æ€</li><li>kubeletåœ¨ç›‘æ§åˆ°podå¯¹è±¡è½¬ä¸ºterminatingçŠ¶æ€çš„åŒæ—¶å¯åŠ¨podå…³é—­è¿‡ç¨‹</li><li>ç«¯ç‚¹æ§åˆ¶å™¨ç›‘æ§åˆ°podå¯¹è±¡çš„å…³é—­è¡Œä¸ºæ—¶å°†å…¶ä»æ‰€æœ‰åŒ¹é…åˆ°æ­¤ç«¯ç‚¹çš„serviceèµ„æºçš„ç«¯ç‚¹åˆ—è¡¨ä¸­ç§»é™¤</li><li>å¦‚æœå½“å‰podå¯¹è±¡å®šä¹‰äº†preStopé’©å­å¤„ç†å™¨ï¼Œåˆ™åœ¨å…¶æ ‡è®°ä¸ºterminatingåå³ä¼šä»¥åŒæ­¥çš„æ–¹å¼å¯åŠ¨æ‰§è¡Œ</li><li>podå¯¹è±¡ä¸­çš„å®¹å™¨è¿›ç¨‹æ”¶åˆ°åœæ­¢ä¿¡å·</li><li>å®½é™æœŸç»“æŸåï¼Œè‹¥podä¸­è¿˜å­˜åœ¨ä»åœ¨è¿è¡Œçš„è¿›ç¨‹ï¼Œé‚£ä¹ˆpodå¯¹è±¡ä¼šæ”¶åˆ°ç«‹å³ç»ˆæ­¢çš„ä¿¡å·</li><li>kubeletè¯·æ±‚apiServerå°†æ­¤podèµ„æºçš„å®½é™æœŸè®¾ç½®ä¸º0ä»è€Œå®Œæˆåˆ é™¤æ“ä½œï¼Œæ­¤æ—¶podå¯¹äºç”¨æˆ·å·²ä¸å¯è§</li></ol><h3 id="5-3-2-åˆå§‹åŒ–å®¹å™¨"><a href="#5-3-2-åˆå§‹åŒ–å®¹å™¨" class="headerlink" title="5.3.2 åˆå§‹åŒ–å®¹å™¨"></a>5.3.2 åˆå§‹åŒ–å®¹å™¨</h3><p>åˆå§‹åŒ–å®¹å™¨æ˜¯åœ¨podçš„ä¸»å®¹å™¨å¯åŠ¨ä¹‹å‰è¦è¿è¡Œçš„å®¹å™¨ï¼Œä¸»è¦æ˜¯åšä¸€äº›ä¸»å®¹å™¨çš„å‰ç½®å·¥ä½œï¼Œå®ƒå…·æœ‰ä¸¤å¤§ç‰¹å¾ï¼š</p><ol><li>åˆå§‹åŒ–å®¹å™¨å¿…é¡»è¿è¡Œå®Œæˆç›´è‡³ç»“æŸï¼Œè‹¥æŸåˆå§‹åŒ–å®¹å™¨è¿è¡Œå¤±è´¥ï¼Œé‚£ä¹ˆkuberneteséœ€è¦é‡å¯å®ƒç›´åˆ°æˆåŠŸå®Œæˆ</li><li>åˆå§‹åŒ–å®¹å™¨å¿…é¡»æŒ‰ç…§å®šä¹‰çš„é¡ºåºæ‰§è¡Œï¼Œå½“ä¸”ä»…å½“å‰ä¸€ä¸ªæˆåŠŸä¹‹åï¼Œåé¢çš„ä¸€ä¸ªæ‰èƒ½è¿è¡Œ</li></ol><p>åˆå§‹åŒ–å®¹å™¨æœ‰å¾ˆå¤šçš„åº”ç”¨åœºæ™¯ï¼Œä¸‹é¢åˆ—å‡ºçš„æ˜¯æœ€å¸¸è§çš„å‡ ä¸ªï¼š</p><ul><li>æä¾›ä¸»å®¹å™¨é•œåƒä¸­ä¸å…·å¤‡çš„å·¥å…·ç¨‹åºæˆ–è‡ªå®šä¹‰ä»£ç </li><li>åˆå§‹åŒ–å®¹å™¨è¦å…ˆäºåº”ç”¨å®¹å™¨ä¸²è¡Œå¯åŠ¨å¹¶è¿è¡Œå®Œæˆï¼Œå› æ­¤å¯ç”¨äºå»¶ååº”ç”¨å®¹å™¨çš„å¯åŠ¨ç›´è‡³å…¶ä¾èµ–çš„æ¡ä»¶å¾—åˆ°æ»¡è¶³</li></ul><p>æ¥ä¸‹æ¥åšä¸€ä¸ªæ¡ˆä¾‹ï¼Œæ¨¡æ‹Ÿä¸‹é¢è¿™ä¸ªéœ€æ±‚ï¼š</p><p>å‡è®¾è¦ä»¥ä¸»å®¹å™¨æ¥è¿è¡Œnginxï¼Œä½†æ˜¯è¦æ±‚åœ¨è¿è¡Œnginxä¹‹å‰å…ˆè¦èƒ½å¤Ÿè¿æ¥ä¸Šmysqlå’Œredisæ‰€åœ¨æœåŠ¡å™¨</p><p>ä¸ºäº†ç®€åŒ–æµ‹è¯•ï¼Œäº‹å…ˆè§„å®šå¥½mysql<code>(192.168.5.4)</code>å’Œredis<code>(192.168.5.5)</code>æœåŠ¡å™¨çš„åœ°å€</p><p>åˆ›å»ºpod-initcontainer.yamlï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-initcontainer</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">main-container</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">    <span class="attr">ports:</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx-port</span></span><br><span class="line">      <span class="attr">containerPort:</span> <span class="number">80</span></span><br><span class="line">  <span class="attr">initContainers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">test-mysql</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">busybox:1.30</span></span><br><span class="line">    <span class="attr">command:</span> [<span class="string">&#x27;sh&#x27;</span>, <span class="string">&#x27;-c&#x27;</span>, <span class="string">&#x27;until ping 192.168.5.14 -c 1 ; do echo waiting for mysql...; sleep 2; done;&#x27;</span>]</span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">test-redis</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">busybox:1.30</span></span><br><span class="line">    <span class="attr">command:</span> [<span class="string">&#x27;sh&#x27;</span>, <span class="string">&#x27;-c&#x27;</span>, <span class="string">&#x27;until ping 192.168.5.15 -c 1 ; do echo waiting for reids...; sleep 2; done;&#x27;</span>]</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºpod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pod-initcontainer.yaml</span><br><span class="line">pod/pod-initcontainer created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹podçŠ¶æ€</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‘ç°podå¡åœ¨å¯åŠ¨ç¬¬ä¸€ä¸ªåˆå§‹åŒ–å®¹å™¨è¿‡ç¨‹ä¸­ï¼Œåé¢çš„å®¹å™¨ä¸ä¼šè¿è¡Œ</span></span><br><span class="line">root@k8s-master01 ~]# kubectl describe pod  pod-initcontainer -n dev</span><br><span class="line">........</span><br><span class="line">Events:</span><br><span class="line">  Type    Reason     Age   From               Message</span><br><span class="line">  ----    ------     ----  ----               -------</span><br><span class="line">  Normal  Scheduled  49s   default-scheduler  Successfully assigned dev/pod-initcontainer to node1</span><br><span class="line">  Normal  Pulled     48s   kubelet, node1     Container image &quot;busybox:1.30&quot; already present on machine</span><br><span class="line">  Normal  Created    48s   kubelet, node1     Created container test-mysql</span><br><span class="line">  Normal  Started    48s   kubelet, node1     Started container test-mysql</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŠ¨æ€æŸ¥çœ‹pod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods pod-initcontainer -n dev -w</span><br><span class="line">NAME                             READY   STATUS     RESTARTS   AGE</span><br><span class="line">pod-initcontainer                0/1     Init:0/2   0          15s</span><br><span class="line">pod-initcontainer                0/1     Init:1/2   0          52s</span><br><span class="line">pod-initcontainer                0/1     Init:1/2   0          53s</span><br><span class="line">pod-initcontainer                0/1     PodInitializing   0          89s</span><br><span class="line">pod-initcontainer                1/1     Running           0          90s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¥ä¸‹æ¥æ–°å¼€ä¸€ä¸ªshellï¼Œä¸ºå½“å‰æœåŠ¡å™¨æ–°å¢ä¸¤ä¸ªipï¼Œè§‚å¯Ÿpodçš„å˜åŒ–</span></span><br><span class="line">[root@k8s-master01 ~]# ifconfig ens33:1 192.168.5.14 netmask 255.255.255.0 up</span><br><span class="line">[root@k8s-master01 ~]# ifconfig ens33:2 192.168.5.15 netmask 255.255.255.0 up</span><br></pre></td></tr></table></figure><h3 id="5-3-3-é’©å­å‡½æ•°"><a href="#5-3-3-é’©å­å‡½æ•°" class="headerlink" title="5.3.3 é’©å­å‡½æ•°"></a>5.3.3 é’©å­å‡½æ•°</h3><p>é’©å­å‡½æ•°èƒ½å¤Ÿæ„ŸçŸ¥è‡ªèº«ç”Ÿå‘½å‘¨æœŸä¸­çš„äº‹ä»¶ï¼Œå¹¶åœ¨ç›¸åº”çš„æ—¶åˆ»åˆ°æ¥æ—¶è¿è¡Œç”¨æˆ·æŒ‡å®šçš„ç¨‹åºä»£ç ã€‚</p><p>kubernetesåœ¨ä¸»å®¹å™¨çš„å¯åŠ¨ä¹‹åå’Œåœæ­¢ä¹‹å‰æä¾›äº†ä¸¤ä¸ªé’©å­å‡½æ•°ï¼š</p><ul><li>post startï¼šå®¹å™¨åˆ›å»ºä¹‹åæ‰§è¡Œï¼Œå¦‚æœå¤±è´¥äº†ä¼šé‡å¯å®¹å™¨</li><li>pre stop ï¼šå®¹å™¨ç»ˆæ­¢ä¹‹å‰æ‰§è¡Œï¼Œæ‰§è¡Œå®Œæˆä¹‹åå®¹å™¨å°†æˆåŠŸç»ˆæ­¢ï¼Œåœ¨å…¶å®Œæˆä¹‹å‰ä¼šé˜»å¡åˆ é™¤å®¹å™¨çš„æ“ä½œ</li></ul><p>é’©å­å¤„ç†å™¨æ”¯æŒä½¿ç”¨ä¸‹é¢ä¸‰ç§æ–¹å¼å®šä¹‰åŠ¨ä½œï¼š</p><ul><li><p>Execå‘½ä»¤ï¼šåœ¨å®¹å™¨å†…æ‰§è¡Œä¸€æ¬¡å‘½ä»¤</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">â€¦â€¦</span></span><br><span class="line">  <span class="attr">lifecycle:</span></span><br><span class="line">    <span class="attr">postStart:</span> </span><br><span class="line">      <span class="attr">exec:</span></span><br><span class="line">        <span class="attr">command:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">cat</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">/tmp/healthy</span></span><br><span class="line"><span class="string">â€¦â€¦</span></span><br></pre></td></tr></table></figure></li><li><p>TCPSocketï¼šåœ¨å½“å‰å®¹å™¨å°è¯•è®¿é—®æŒ‡å®šçš„socket</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">â€¦â€¦</span>      </span><br><span class="line">  <span class="attr">lifecycle:</span></span><br><span class="line">    <span class="attr">postStart:</span></span><br><span class="line">      <span class="attr">tcpSocket:</span></span><br><span class="line">        <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line"><span class="string">â€¦â€¦</span></span><br></pre></td></tr></table></figure></li><li><p>HTTPGetï¼šåœ¨å½“å‰å®¹å™¨ä¸­å‘æŸurlå‘èµ·httpè¯·æ±‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">â€¦â€¦</span></span><br><span class="line">  <span class="attr">lifecycle:</span></span><br><span class="line">    <span class="attr">postStart:</span></span><br><span class="line">      <span class="attr">httpGet:</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">/</span> <span class="comment">#URIåœ°å€</span></span><br><span class="line">        <span class="attr">port:</span> <span class="number">80</span> <span class="comment">#ç«¯å£å·</span></span><br><span class="line">        <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.5</span><span class="number">.3</span> <span class="comment">#ä¸»æœºåœ°å€</span></span><br><span class="line">        <span class="attr">scheme:</span> <span class="string">HTTP</span> <span class="comment">#æ”¯æŒçš„åè®®ï¼Œhttpæˆ–è€…https</span></span><br><span class="line"><span class="string">â€¦â€¦</span></span><br></pre></td></tr></table></figure></li></ul><p>æ¥ä¸‹æ¥ï¼Œä»¥execæ–¹å¼ä¸ºä¾‹ï¼Œæ¼”ç¤ºä¸‹é’©å­å‡½æ•°çš„ä½¿ç”¨ï¼Œåˆ›å»ºpod-hook-exec.yamlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-hook-exec</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">main-container</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx-port</span></span><br><span class="line">      <span class="attr">containerPort:</span> <span class="number">80</span></span><br><span class="line">    <span class="attr">lifecycle:</span></span><br><span class="line">      <span class="attr">postStart:</span> </span><br><span class="line">        <span class="attr">exec:</span> <span class="comment"># åœ¨å®¹å™¨å¯åŠ¨çš„æ—¶å€™æ‰§è¡Œä¸€ä¸ªå‘½ä»¤ï¼Œä¿®æ”¹æ‰nginxçš„é»˜è®¤é¦–é¡µå†…å®¹</span></span><br><span class="line">          <span class="attr">command:</span> [<span class="string">&quot;/bin/sh&quot;</span>, <span class="string">&quot;-c&quot;</span>, <span class="string">&quot;echo postStart... &gt; /usr/share/nginx/html/index.html&quot;</span>]</span><br><span class="line">      <span class="attr">preStop:</span></span><br><span class="line">        <span class="attr">exec:</span> <span class="comment"># åœ¨å®¹å™¨åœæ­¢ä¹‹å‰åœæ­¢nginxæœåŠ¡</span></span><br><span class="line">          <span class="attr">command:</span> [<span class="string">&quot;/usr/sbin/nginx&quot;</span>,<span class="string">&quot;-s&quot;</span>,<span class="string">&quot;quit&quot;</span>]</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºpod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pod-hook-exec.yaml</span><br><span class="line">pod/pod-hook-exec created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹pod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods  pod-hook-exec -n dev -o wide</span><br><span class="line">NAME           READY   STATUS     RESTARTS   AGE    IP            NODE    </span><br><span class="line">pod-hook-exec  1/1     Running    0          29s    10.244.2.48   node2   </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¿é—®pod</span></span><br><span class="line">[root@k8s-master01 ~]# curl 10.244.2.48</span><br><span class="line">postStart...</span><br></pre></td></tr></table></figure><h3 id="5-3-4-å®¹å™¨æ¢æµ‹"><a href="#5-3-4-å®¹å™¨æ¢æµ‹" class="headerlink" title="5.3.4 å®¹å™¨æ¢æµ‹"></a>5.3.4 å®¹å™¨æ¢æµ‹</h3><p>å®¹å™¨æ¢æµ‹ç”¨äºæ£€æµ‹å®¹å™¨ä¸­çš„åº”ç”¨å®ä¾‹æ˜¯å¦æ­£å¸¸å·¥ä½œï¼Œæ˜¯ä¿éšœä¸šåŠ¡å¯ç”¨æ€§çš„ä¸€ç§ä¼ ç»Ÿæœºåˆ¶ã€‚å¦‚æœç»è¿‡æ¢æµ‹ï¼Œå®ä¾‹çš„çŠ¶æ€ä¸ç¬¦åˆé¢„æœŸï¼Œé‚£ä¹ˆkuberneteså°±ä¼šæŠŠè¯¥é—®é¢˜å®ä¾‹â€ æ‘˜é™¤ â€œï¼Œä¸æ‰¿æ‹…ä¸šåŠ¡æµé‡ã€‚kubernetesæä¾›äº†ä¸¤ç§æ¢é’ˆæ¥å®ç°å®¹å™¨æ¢æµ‹ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul><li>liveness probesï¼šå­˜æ´»æ€§æ¢é’ˆï¼Œç”¨äºæ£€æµ‹åº”ç”¨å®ä¾‹å½“å‰æ˜¯å¦å¤„äºæ­£å¸¸è¿è¡ŒçŠ¶æ€ï¼Œå¦‚æœä¸æ˜¯ï¼Œk8sä¼šé‡å¯å®¹å™¨</li><li>readiness probesï¼šå°±ç»ªæ€§æ¢é’ˆï¼Œç”¨äºæ£€æµ‹åº”ç”¨å®ä¾‹å½“å‰æ˜¯å¦å¯ä»¥æ¥æ”¶è¯·æ±‚ï¼Œå¦‚æœä¸èƒ½ï¼Œk8sä¸ä¼šè½¬å‘æµé‡</li></ul><blockquote><p>livenessProbe å†³å®šæ˜¯å¦é‡å¯å®¹å™¨ï¼ŒreadinessProbe å†³å®šæ˜¯å¦å°†è¯·æ±‚è½¬å‘ç»™å®¹å™¨ã€‚</p></blockquote><p>ä¸Šé¢ä¸¤ç§æ¢é’ˆç›®å‰å‡æ”¯æŒä¸‰ç§æ¢æµ‹æ–¹å¼ï¼š</p><ul><li><p>Execå‘½ä»¤ï¼šåœ¨å®¹å™¨å†…æ‰§è¡Œä¸€æ¬¡å‘½ä»¤ï¼Œå¦‚æœå‘½ä»¤æ‰§è¡Œçš„é€€å‡ºç ä¸º0ï¼Œåˆ™è®¤ä¸ºç¨‹åºæ­£å¸¸ï¼Œå¦åˆ™ä¸æ­£å¸¸</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">â€¦â€¦</span></span><br><span class="line">  <span class="attr">livenessProbe:</span></span><br><span class="line">    <span class="attr">exec:</span></span><br><span class="line">      <span class="attr">command:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">cat</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/tmp/healthy</span></span><br><span class="line"><span class="string">â€¦â€¦</span></span><br></pre></td></tr></table></figure></li><li><p>TCPSocketï¼šå°†ä¼šå°è¯•è®¿é—®ä¸€ä¸ªç”¨æˆ·å®¹å™¨çš„ç«¯å£ï¼Œå¦‚æœèƒ½å¤Ÿå»ºç«‹è¿™æ¡è¿æ¥ï¼Œåˆ™è®¤ä¸ºç¨‹åºæ­£å¸¸ï¼Œå¦åˆ™ä¸æ­£å¸¸</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">â€¦â€¦</span>      </span><br><span class="line">  <span class="attr">livenessProbe:</span></span><br><span class="line">    <span class="attr">tcpSocket:</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line"><span class="string">â€¦â€¦</span></span><br></pre></td></tr></table></figure></li><li><p>HTTPGetï¼šè°ƒç”¨å®¹å™¨å†…Webåº”ç”¨çš„URLï¼Œå¦‚æœè¿”å›çš„çŠ¶æ€ç åœ¨200å’Œ399ä¹‹é—´ï¼Œåˆ™è®¤ä¸ºç¨‹åºæ­£å¸¸ï¼Œå¦åˆ™ä¸æ­£å¸¸</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">â€¦â€¦</span></span><br><span class="line">  <span class="attr">livenessProbe:</span></span><br><span class="line">    <span class="attr">httpGet:</span></span><br><span class="line">      <span class="attr">path:</span> <span class="string">/</span> <span class="comment">#URIåœ°å€</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">80</span> <span class="comment">#ç«¯å£å·</span></span><br><span class="line">      <span class="attr">host:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> <span class="comment">#ä¸»æœºåœ°å€</span></span><br><span class="line">      <span class="attr">scheme:</span> <span class="string">HTTP</span> <span class="comment">#æ”¯æŒçš„åè®®ï¼Œhttpæˆ–è€…https</span></span><br><span class="line"><span class="string">â€¦â€¦</span></span><br></pre></td></tr></table></figure></li></ul><p>ä¸‹é¢ä»¥liveness probesä¸ºä¾‹ï¼Œåšå‡ ä¸ªæ¼”ç¤ºï¼š</p><p><strong>æ–¹å¼ä¸€ï¼šExec</strong></p><p>åˆ›å»ºpod-liveness-exec.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-liveness-exec</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">    <span class="attr">ports:</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx-port</span></span><br><span class="line">      <span class="attr">containerPort:</span> <span class="number">80</span></span><br><span class="line">    <span class="attr">livenessProbe:</span></span><br><span class="line">      <span class="attr">exec:</span></span><br><span class="line">        <span class="attr">command:</span> [<span class="string">&quot;/bin/cat&quot;</span>,<span class="string">&quot;/tmp/hello.txt&quot;</span>] <span class="comment"># æ‰§è¡Œä¸€ä¸ªæŸ¥çœ‹æ–‡ä»¶çš„å‘½ä»¤</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºpodï¼Œè§‚å¯Ÿæ•ˆæœ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºPod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pod-liveness-exec.yaml</span><br><span class="line">pod/pod-liveness-exec created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹Podè¯¦æƒ…</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl describe pods pod-liveness-exec -n dev</span><br><span class="line">......</span><br><span class="line">  Normal   Created    20s (x2 over 50s)  kubelet, node1     Created container nginx</span><br><span class="line">  Normal   Started    20s (x2 over 50s)  kubelet, node1     Started container nginx</span><br><span class="line">  Normal   Killing    20s                kubelet, node1     Container nginx failed liveness probe, will be restarted</span><br><span class="line">  Warning  Unhealthy  0s (x5 over 40s)   kubelet, node1     Liveness probe failed: cat: can&#x27;t open &#x27;/tmp/hello11.txt&#x27;: No such file or directory</span><br><span class="line"><span class="meta prompt_">  </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è§‚å¯Ÿä¸Šé¢çš„ä¿¡æ¯å°±ä¼šå‘ç°nginxå®¹å™¨å¯åŠ¨ä¹‹åå°±è¿›è¡Œäº†å¥åº·æ£€æŸ¥</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ£€æŸ¥å¤±è´¥ä¹‹åï¼Œå®¹å™¨è¢«<span class="built_in">kill</span>æ‰ï¼Œç„¶åå°è¯•è¿›è¡Œé‡å¯ï¼ˆè¿™æ˜¯é‡å¯ç­–ç•¥çš„ä½œç”¨ï¼Œåé¢è®²è§£ï¼‰</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¨ç­‰ä¸€ä¼šä¹‹åï¼Œå†è§‚å¯Ÿpodä¿¡æ¯ï¼Œå°±å¯ä»¥çœ‹åˆ°RESTARTSä¸å†æ˜¯0ï¼Œè€Œæ˜¯ä¸€ç›´å¢é•¿</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods pod-liveness-exec -n dev</span><br><span class="line">NAME                READY   STATUS             RESTARTS   AGE</span><br><span class="line">pod-liveness-exec   0/1     CrashLoopBackOff   2          3m19s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å½“ç„¶æ¥ä¸‹æ¥ï¼Œå¯ä»¥ä¿®æ”¹æˆä¸€ä¸ªå­˜åœ¨çš„æ–‡ä»¶ï¼Œæ¯”å¦‚/tmp/hello.txtï¼Œå†è¯•ï¼Œç»“æœå°±æ­£å¸¸äº†......</span></span><br></pre></td></tr></table></figure><p><strong>æ–¹å¼äºŒï¼šTCPSocket</strong></p><p>åˆ›å»ºpod-liveness-tcpsocket.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-liveness-tcpsocket</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">    <span class="attr">ports:</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx-port</span></span><br><span class="line">      <span class="attr">containerPort:</span> <span class="number">80</span></span><br><span class="line">    <span class="attr">livenessProbe:</span></span><br><span class="line">      <span class="attr">tcpSocket:</span></span><br><span class="line">        <span class="attr">port:</span> <span class="number">8080</span> <span class="comment"># å°è¯•è®¿é—®8080ç«¯å£</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºpodï¼Œè§‚å¯Ÿæ•ˆæœ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºPod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pod-liveness-tcpsocket.yaml</span><br><span class="line">pod/pod-liveness-tcpsocket created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹Podè¯¦æƒ…</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl describe pods pod-liveness-tcpsocket -n dev</span><br><span class="line">......</span><br><span class="line">  Normal   Scheduled  31s                            default-scheduler  Successfully assigned dev/pod-liveness-tcpsocket to node2</span><br><span class="line">  Normal   Pulled     &lt;invalid&gt;                      kubelet, node2     Container image &quot;nginx:1.17.1&quot; already present on machine</span><br><span class="line">  Normal   Created    &lt;invalid&gt;                      kubelet, node2     Created container nginx</span><br><span class="line">  Normal   Started    &lt;invalid&gt;                      kubelet, node2     Started container nginx</span><br><span class="line">  Warning  Unhealthy  &lt;invalid&gt; (x2 over &lt;invalid&gt;)  kubelet, node2     Liveness probe failed: dial tcp 10.244.2.44:8080: connect: connection refused</span><br><span class="line"><span class="meta prompt_">  </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è§‚å¯Ÿä¸Šé¢çš„ä¿¡æ¯ï¼Œå‘ç°å°è¯•è®¿é—®8080ç«¯å£,ä½†æ˜¯å¤±è´¥äº†</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¨ç­‰ä¸€ä¼šä¹‹åï¼Œå†è§‚å¯Ÿpodä¿¡æ¯ï¼Œå°±å¯ä»¥çœ‹åˆ°RESTARTSä¸å†æ˜¯0ï¼Œè€Œæ˜¯ä¸€ç›´å¢é•¿</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods pod-liveness-tcpsocket  -n dev</span><br><span class="line">NAME                     READY   STATUS             RESTARTS   AGE</span><br><span class="line">pod-liveness-tcpsocket   0/1     CrashLoopBackOff   2          3m19s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å½“ç„¶æ¥ä¸‹æ¥ï¼Œå¯ä»¥ä¿®æ”¹æˆä¸€ä¸ªå¯ä»¥è®¿é—®çš„ç«¯å£ï¼Œæ¯”å¦‚80ï¼Œå†è¯•ï¼Œç»“æœå°±æ­£å¸¸äº†......</span></span><br></pre></td></tr></table></figure><p><strong>æ–¹å¼ä¸‰ï¼šHTTPGet</strong></p><p>åˆ›å»ºpod-liveness-httpget.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-liveness-httpget</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx-port</span></span><br><span class="line">      <span class="attr">containerPort:</span> <span class="number">80</span></span><br><span class="line">    <span class="attr">livenessProbe:</span></span><br><span class="line">      <span class="attr">httpGet:</span>  <span class="comment"># å…¶å®å°±æ˜¯è®¿é—®http://127.0.0.1:80/hello  </span></span><br><span class="line">        <span class="attr">scheme:</span> <span class="string">HTTP</span> <span class="comment">#æ”¯æŒçš„åè®®ï¼Œhttpæˆ–è€…https</span></span><br><span class="line">        <span class="attr">port:</span> <span class="number">80</span> <span class="comment">#ç«¯å£å·</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">/hello</span> <span class="comment">#URIåœ°å€</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºpodï¼Œè§‚å¯Ÿæ•ˆæœ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºPod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pod-liveness-httpget.yaml</span><br><span class="line">pod/pod-liveness-httpget created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹Podè¯¦æƒ…</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl describe pod pod-liveness-httpget -n dev</span><br><span class="line">.......</span><br><span class="line">  Normal   Pulled     6s (x3 over 64s)  kubelet, node1     Container image &quot;nginx:1.17.1&quot; already present on machine</span><br><span class="line">  Normal   Created    6s (x3 over 64s)  kubelet, node1     Created container nginx</span><br><span class="line">  Normal   Started    6s (x3 over 63s)  kubelet, node1     Started container nginx</span><br><span class="line">  Warning  Unhealthy  6s (x6 over 56s)  kubelet, node1     Liveness probe failed: HTTP probe failed with statuscode: 404</span><br><span class="line">  Normal   Killing    6s (x2 over 36s)  kubelet, node1     Container nginx failed liveness probe, will be restarted</span><br><span class="line"><span class="meta prompt_">  </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è§‚å¯Ÿä¸Šé¢ä¿¡æ¯ï¼Œå°è¯•è®¿é—®è·¯å¾„ï¼Œä½†æ˜¯æœªæ‰¾åˆ°,å‡ºç°404é”™è¯¯</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¨ç­‰ä¸€ä¼šä¹‹åï¼Œå†è§‚å¯Ÿpodä¿¡æ¯ï¼Œå°±å¯ä»¥çœ‹åˆ°RESTARTSä¸å†æ˜¯0ï¼Œè€Œæ˜¯ä¸€ç›´å¢é•¿</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pod pod-liveness-httpget -n dev</span><br><span class="line">NAME                   READY   STATUS    RESTARTS   AGE</span><br><span class="line">pod-liveness-httpget   1/1     Running   5          3m17s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å½“ç„¶æ¥ä¸‹æ¥ï¼Œå¯ä»¥ä¿®æ”¹æˆä¸€ä¸ªå¯ä»¥è®¿é—®çš„è·¯å¾„pathï¼Œæ¯”å¦‚/ï¼Œå†è¯•ï¼Œç»“æœå°±æ­£å¸¸äº†......</span></span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œå·²ç»ä½¿ç”¨liveness Probeæ¼”ç¤ºäº†ä¸‰ç§æ¢æµ‹æ–¹å¼ï¼Œä½†æ˜¯æŸ¥çœ‹livenessProbeçš„å­å±æ€§ï¼Œä¼šå‘ç°é™¤äº†è¿™ä¸‰ç§æ–¹å¼ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„é…ç½®ï¼Œåœ¨è¿™é‡Œä¸€å¹¶è§£é‡Šä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@k8s-master01 ~]# kubectl explain pod.spec.containers.livenessProbe</span><br><span class="line">FIELDS:</span><br><span class="line">   exec &lt;Object&gt;  </span><br><span class="line">   tcpSocket    &lt;Object&gt;</span><br><span class="line">   httpGet      &lt;Object&gt;</span><br><span class="line">   initialDelaySeconds  &lt;integer&gt;  # å®¹å™¨å¯åŠ¨åç­‰å¾…å¤šå°‘ç§’æ‰§è¡Œç¬¬ä¸€æ¬¡æ¢æµ‹</span><br><span class="line">   timeoutSeconds       &lt;integer&gt;  # æ¢æµ‹è¶…æ—¶æ—¶é—´ã€‚é»˜è®¤1ç§’ï¼Œæœ€å°1ç§’</span><br><span class="line">   periodSeconds        &lt;integer&gt;  # æ‰§è¡Œæ¢æµ‹çš„é¢‘ç‡ã€‚é»˜è®¤æ˜¯10ç§’ï¼Œæœ€å°1ç§’</span><br><span class="line">   failureThreshold     &lt;integer&gt;  # è¿ç»­æ¢æµ‹å¤±è´¥å¤šå°‘æ¬¡æ‰è¢«è®¤å®šä¸ºå¤±è´¥ã€‚é»˜è®¤æ˜¯3ã€‚æœ€å°å€¼æ˜¯1</span><br><span class="line">   successThreshold     &lt;integer&gt;  # è¿ç»­æ¢æµ‹æˆåŠŸå¤šå°‘æ¬¡æ‰è¢«è®¤å®šä¸ºæˆåŠŸã€‚é»˜è®¤æ˜¯1</span><br></pre></td></tr></table></figure><p>ä¸‹é¢ç¨å¾®é…ç½®ä¸¤ä¸ªï¼Œæ¼”ç¤ºä¸‹æ•ˆæœå³å¯ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">root@k8s-master01</span> <span class="string">~</span>]<span class="comment"># more pod-liveness-httpget.yaml</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-liveness-httpget</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx-port</span></span><br><span class="line">      <span class="attr">containerPort:</span> <span class="number">80</span></span><br><span class="line">    <span class="attr">livenessProbe:</span></span><br><span class="line">      <span class="attr">httpGet:</span></span><br><span class="line">        <span class="attr">scheme:</span> <span class="string">HTTP</span></span><br><span class="line">        <span class="attr">port:</span> <span class="number">80</span> </span><br><span class="line">        <span class="attr">path:</span> <span class="string">/</span></span><br><span class="line">      <span class="attr">initialDelaySeconds:</span> <span class="number">30</span> <span class="comment"># å®¹å™¨å¯åŠ¨å30så¼€å§‹æ¢æµ‹</span></span><br><span class="line">      <span class="attr">timeoutSeconds:</span> <span class="number">5</span> <span class="comment"># æ¢æµ‹è¶…æ—¶æ—¶é—´ä¸º5s</span></span><br></pre></td></tr></table></figure><h3 id="5-3-5-é‡å¯ç­–ç•¥"><a href="#5-3-5-é‡å¯ç­–ç•¥" class="headerlink" title="5.3.5 é‡å¯ç­–ç•¥"></a>5.3.5 é‡å¯ç­–ç•¥</h3><p>åœ¨ä¸Šä¸€èŠ‚ä¸­ï¼Œä¸€æ—¦å®¹å™¨æ¢æµ‹å‡ºç°äº†é—®é¢˜ï¼Œkuberneteså°±ä¼šå¯¹å®¹å™¨æ‰€åœ¨çš„Podè¿›è¡Œé‡å¯ï¼Œå…¶å®è¿™æ˜¯ç”±podçš„é‡å¯ç­–ç•¥å†³å®šçš„ï¼Œpodçš„é‡å¯ç­–ç•¥æœ‰ 3 ç§ï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š</p><ul><li>Always ï¼šå®¹å™¨å¤±æ•ˆæ—¶ï¼Œè‡ªåŠ¨é‡å¯è¯¥å®¹å™¨ï¼Œè¿™ä¹Ÿæ˜¯é»˜è®¤å€¼ã€‚</li><li>OnFailure ï¼š å®¹å™¨ç»ˆæ­¢è¿è¡Œä¸”é€€å‡ºç ä¸ä¸º0æ—¶é‡å¯</li><li>Never ï¼š ä¸è®ºçŠ¶æ€ä¸ºä½•ï¼Œéƒ½ä¸é‡å¯è¯¥å®¹å™¨</li></ul><p>é‡å¯ç­–ç•¥é€‚ç”¨äºpodå¯¹è±¡ä¸­çš„æ‰€æœ‰å®¹å™¨ï¼Œé¦–æ¬¡éœ€è¦é‡å¯çš„å®¹å™¨ï¼Œå°†åœ¨å…¶éœ€è¦æ—¶ç«‹å³è¿›è¡Œé‡å¯ï¼Œéšåå†æ¬¡éœ€è¦é‡å¯çš„æ“ä½œå°†ç”±kubeletå»¶è¿Ÿä¸€æ®µæ—¶é—´åè¿›è¡Œï¼Œä¸”åå¤çš„é‡å¯æ“ä½œçš„å»¶è¿Ÿæ—¶é•¿ä»¥æ­¤ä¸º10sã€20sã€40sã€80sã€160så’Œ300sï¼Œ300sæ˜¯æœ€å¤§å»¶è¿Ÿæ—¶é•¿ã€‚</p><p>åˆ›å»ºpod-restartpolicy.yamlï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-restartpolicy</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx-port</span></span><br><span class="line">      <span class="attr">containerPort:</span> <span class="number">80</span></span><br><span class="line">    <span class="attr">livenessProbe:</span></span><br><span class="line">      <span class="attr">httpGet:</span></span><br><span class="line">        <span class="attr">scheme:</span> <span class="string">HTTP</span></span><br><span class="line">        <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">/hello</span></span><br><span class="line">  <span class="attr">restartPolicy:</span> <span class="string">Never</span> <span class="comment"># è®¾ç½®é‡å¯ç­–ç•¥ä¸ºNever</span></span><br></pre></td></tr></table></figure><p>è¿è¡ŒPodæµ‹è¯•</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºPod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pod-restartpolicy.yaml</span><br><span class="line">pod/pod-restartpolicy created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹Podè¯¦æƒ…ï¼Œå‘ç°nginxå®¹å™¨å¤±è´¥</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl  describe pods pod-restartpolicy  -n dev</span><br><span class="line">......</span><br><span class="line">  Warning  Unhealthy  15s (x3 over 35s)  kubelet, node1     Liveness probe failed: HTTP probe failed with statuscode: 404</span><br><span class="line">  Normal   Killing    15s                kubelet, node1     Container nginx failed liveness probe</span><br><span class="line"><span class="meta prompt_">  </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¤šç­‰ä¸€ä¼šï¼Œå†è§‚å¯Ÿpodçš„é‡å¯æ¬¡æ•°ï¼Œå‘ç°ä¸€ç›´æ˜¯0ï¼Œå¹¶æœªé‡å¯</span>   </span><br><span class="line">[root@k8s-master01 ~]# kubectl  get pods pod-restartpolicy -n dev</span><br><span class="line">NAME                   READY   STATUS    RESTARTS   AGE</span><br><span class="line">pod-restartpolicy      0/1     Running   0          5min42s</span><br></pre></td></tr></table></figure><h2 id="5-4-Podè°ƒåº¦"><a href="#5-4-Podè°ƒåº¦" class="headerlink" title="5.4 Podè°ƒåº¦"></a>5.4 Podè°ƒåº¦</h2><p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ä¸ªPodåœ¨å“ªä¸ªNodeèŠ‚ç‚¹ä¸Šè¿è¡Œï¼Œæ˜¯ç”±Schedulerç»„ä»¶é‡‡ç”¨ç›¸åº”çš„ç®—æ³•è®¡ç®—å‡ºæ¥çš„ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯ä¸å—äººå·¥æ§åˆ¶çš„ã€‚ä½†æ˜¯åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œè¿™å¹¶ä¸æ»¡è¶³çš„éœ€æ±‚ï¼Œå› ä¸ºå¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æƒ³æ§åˆ¶æŸäº›Podåˆ°è¾¾æŸäº›èŠ‚ç‚¹ä¸Šï¼Œé‚£ä¹ˆåº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿè¿™å°±è¦æ±‚äº†è§£kuberneteså¯¹Podçš„è°ƒåº¦è§„åˆ™ï¼Œkubernetesæä¾›äº†å››å¤§ç±»è°ƒåº¦æ–¹å¼ï¼š</p><ul><li>è‡ªåŠ¨è°ƒåº¦ï¼šè¿è¡Œåœ¨å“ªä¸ªèŠ‚ç‚¹ä¸Šå®Œå…¨ç”±Schedulerç»è¿‡ä¸€ç³»åˆ—çš„ç®—æ³•è®¡ç®—å¾—å‡º</li><li>å®šå‘è°ƒåº¦ï¼šNodeNameã€NodeSelector</li><li>äº²å’Œæ€§è°ƒåº¦ï¼šNodeAffinityã€PodAffinityã€PodAntiAffinity</li><li>æ±¡ç‚¹ï¼ˆå®¹å¿ï¼‰è°ƒåº¦ï¼šTaintsã€Toleration</li></ul><h3 id="5-4-1-å®šå‘è°ƒåº¦"><a href="#5-4-1-å®šå‘è°ƒåº¦" class="headerlink" title="5.4.1 å®šå‘è°ƒåº¦"></a>5.4.1 å®šå‘è°ƒåº¦</h3><p>å®šå‘è°ƒåº¦ï¼ŒæŒ‡çš„æ˜¯åˆ©ç”¨åœ¨podä¸Šå£°æ˜nodeNameæˆ–è€…nodeSelectorï¼Œä»¥æ­¤å°†Podè°ƒåº¦åˆ°æœŸæœ›çš„nodeèŠ‚ç‚¹ä¸Šã€‚æ³¨æ„ï¼Œè¿™é‡Œçš„è°ƒåº¦æ˜¯å¼ºåˆ¶çš„ï¼Œè¿™å°±æ„å‘³ç€å³ä½¿è¦è°ƒåº¦çš„ç›®æ ‡Nodeä¸å­˜åœ¨ï¼Œä¹Ÿä¼šå‘ä¸Šé¢è¿›è¡Œè°ƒåº¦ï¼Œåªä¸è¿‡podè¿è¡Œå¤±è´¥è€Œå·²ã€‚</p><p><strong>NodeName</strong></p><p>NodeNameç”¨äºå¼ºåˆ¶çº¦æŸå°†Podè°ƒåº¦åˆ°æŒ‡å®šçš„Nameçš„NodeèŠ‚ç‚¹ä¸Šã€‚è¿™ç§æ–¹å¼ï¼Œå…¶å®æ˜¯ç›´æ¥è·³è¿‡Schedulerçš„è°ƒåº¦é€»è¾‘ï¼Œç›´æ¥å°†Podè°ƒåº¦åˆ°æŒ‡å®šåç§°çš„èŠ‚ç‚¹ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œå®éªŒä¸€ä¸‹ï¼šåˆ›å»ºä¸€ä¸ªpod-nodename.yamlæ–‡ä»¶</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-nodename</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">  <span class="attr">nodeName:</span> <span class="string">node1</span> <span class="comment"># æŒ‡å®šè°ƒåº¦åˆ°node1èŠ‚ç‚¹ä¸Š</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åˆ›å»ºPod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pod-nodename.yaml</span><br><span class="line">pod/pod-nodename created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æŸ¥çœ‹Podè°ƒåº¦åˆ°NODEå±æ€§ï¼Œç¡®å®æ˜¯è°ƒåº¦åˆ°äº†node1èŠ‚ç‚¹ä¸Š</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods pod-nodename -n dev -o wide</span><br><span class="line">NAME           READY   STATUS    RESTARTS   AGE   IP            NODE      ......</span><br><span class="line">pod-nodename   1/1     Running   0          56s   10.244.1.87   node1     ......   </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¥ä¸‹æ¥ï¼Œåˆ é™¤podï¼Œä¿®æ”¹nodeNameçš„å€¼ä¸ºnode3ï¼ˆå¹¶æ²¡æœ‰node3èŠ‚ç‚¹ï¼‰</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl delete -f pod-nodename.yaml</span><br><span class="line">pod &quot;pod-nodename&quot; deleted</span><br><span class="line">[root@k8s-master01 ~]# vim pod-nodename.yaml</span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pod-nodename.yaml</span><br><span class="line">pod/pod-nodename created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å†æ¬¡æŸ¥çœ‹ï¼Œå‘ç°å·²ç»å‘Node3èŠ‚ç‚¹è°ƒåº¦ï¼Œä½†æ˜¯ç”±äºä¸å­˜åœ¨node3èŠ‚ç‚¹ï¼Œæ‰€ä»¥podæ— æ³•æ­£å¸¸è¿è¡Œ</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods pod-nodename -n dev -o wide</span><br><span class="line">NAME           READY   STATUS    RESTARTS   AGE   IP       NODE    ......</span><br><span class="line">pod-nodename   0/1     Pending   0          6s    &lt;none&gt;   node3   ......           </span><br></pre></td></tr></table></figure><p><strong>NodeSelector</strong></p><p>NodeSelectorç”¨äºå°†podè°ƒåº¦åˆ°æ·»åŠ äº†æŒ‡å®šæ ‡ç­¾çš„nodeèŠ‚ç‚¹ä¸Šã€‚å®ƒæ˜¯é€šè¿‡kubernetesçš„label-selectoræœºåˆ¶å®ç°çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨podåˆ›å»ºä¹‹å‰ï¼Œä¼šç”±schedulerä½¿ç”¨MatchNodeSelectorè°ƒåº¦ç­–ç•¥è¿›è¡ŒlabelåŒ¹é…ï¼Œæ‰¾å‡ºç›®æ ‡nodeï¼Œç„¶åå°†podè°ƒåº¦åˆ°ç›®æ ‡èŠ‚ç‚¹ï¼Œè¯¥åŒ¹é…è§„åˆ™æ˜¯å¼ºåˆ¶çº¦æŸã€‚</p><p>æ¥ä¸‹æ¥ï¼Œå®éªŒä¸€ä¸‹ï¼š</p><p>1 é¦–å…ˆåˆ†åˆ«ä¸ºnodeèŠ‚ç‚¹æ·»åŠ æ ‡ç­¾</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@k8s-master01 ~]# kubectl label nodes node1 nodeenv=pro</span><br><span class="line">node/node2 labeled</span><br><span class="line">[root@k8s-master01 ~]# kubectl label nodes node2 nodeenv=test</span><br><span class="line">node/node2 labeled</span><br></pre></td></tr></table></figure><p>2 åˆ›å»ºä¸€ä¸ªpod-nodeselector.yamlæ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨å®ƒåˆ›å»ºPod</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-nodeselector</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">  <span class="attr">nodeSelector:</span> </span><br><span class="line">    <span class="attr">nodeenv:</span> <span class="string">pro</span> <span class="comment"># æŒ‡å®šè°ƒåº¦åˆ°å…·æœ‰nodeenv=proæ ‡ç­¾çš„èŠ‚ç‚¹ä¸Š</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åˆ›å»ºPod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pod-nodeselector.yaml</span><br><span class="line">pod/pod-nodeselector created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æŸ¥çœ‹Podè°ƒåº¦åˆ°NODEå±æ€§ï¼Œç¡®å®æ˜¯è°ƒåº¦åˆ°äº†node1èŠ‚ç‚¹ä¸Š</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods pod-nodeselector -n dev -o wide</span><br><span class="line">NAME               READY   STATUS    RESTARTS   AGE     IP          NODE    ......</span><br><span class="line">pod-nodeselector   1/1     Running   0          47s   10.244.1.87   node1   ......</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¥ä¸‹æ¥ï¼Œåˆ é™¤podï¼Œä¿®æ”¹nodeSelectorçš„å€¼ä¸ºnodeenv: xxxxï¼ˆä¸å­˜åœ¨æ‰“æœ‰æ­¤æ ‡ç­¾çš„èŠ‚ç‚¹ï¼‰</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl delete -f pod-nodeselector.yaml</span><br><span class="line">pod &quot;pod-nodeselector&quot; deleted</span><br><span class="line">[root@k8s-master01 ~]# vim pod-nodeselector.yaml</span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pod-nodeselector.yaml</span><br><span class="line">pod/pod-nodeselector created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å†æ¬¡æŸ¥çœ‹ï¼Œå‘ç°podæ— æ³•æ­£å¸¸è¿è¡Œ,Nodeçš„å€¼ä¸ºnone</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods -n dev -o wide</span><br><span class="line">NAME               READY   STATUS    RESTARTS   AGE     IP       NODE    </span><br><span class="line">pod-nodeselector   0/1     Pending   0          2m20s   &lt;none&gt;   &lt;none&gt;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹è¯¦æƒ…,å‘ç°node selectoråŒ¹é…å¤±è´¥çš„æç¤º</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl describe pods pod-nodeselector -n dev</span><br><span class="line">.......</span><br><span class="line">Events:</span><br><span class="line">  Type     Reason            Age        From               Message</span><br><span class="line">  ----     ------            ----       ----               -------</span><br><span class="line">  Warning  FailedScheduling  &lt;unknown&gt;  default-scheduler  0/3 nodes are available: 3 node(s) didn&#x27;t match node selector.</span><br></pre></td></tr></table></figure><h3 id="5-4-2-äº²å’Œæ€§è°ƒåº¦"><a href="#5-4-2-äº²å’Œæ€§è°ƒåº¦" class="headerlink" title="5.4.2 äº²å’Œæ€§è°ƒåº¦"></a>5.4.2 äº²å’Œæ€§è°ƒåº¦</h3><p>ä¸Šä¸€èŠ‚ï¼Œä»‹ç»äº†ä¸¤ç§å®šå‘è°ƒåº¦çš„æ–¹å¼ï¼Œä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€å®šçš„é—®é¢˜ï¼Œé‚£å°±æ˜¯å¦‚æœæ²¡æœ‰æ»¡è¶³æ¡ä»¶çš„Nodeï¼Œé‚£ä¹ˆPodå°†ä¸ä¼šè¢«è¿è¡Œï¼Œå³ä½¿åœ¨é›†ç¾¤ä¸­è¿˜æœ‰å¯ç”¨Nodeåˆ—è¡¨ä¹Ÿä¸è¡Œï¼Œè¿™å°±é™åˆ¶äº†å®ƒçš„ä½¿ç”¨åœºæ™¯ã€‚</p><p>åŸºäºä¸Šé¢çš„é—®é¢˜ï¼Œkubernetesè¿˜æä¾›äº†ä¸€ç§äº²å’Œæ€§è°ƒåº¦ï¼ˆAffinityï¼‰ã€‚å®ƒåœ¨NodeSelectorçš„åŸºç¡€ä¹‹ä¸Šçš„è¿›è¡Œäº†æ‰©å±•ï¼Œå¯ä»¥é€šè¿‡é…ç½®çš„å½¢å¼ï¼Œå®ç°ä¼˜å…ˆé€‰æ‹©æ»¡è¶³æ¡ä»¶çš„Nodeè¿›è¡Œè°ƒåº¦ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä¹Ÿå¯ä»¥è°ƒåº¦åˆ°ä¸æ»¡è¶³æ¡ä»¶çš„èŠ‚ç‚¹ä¸Šï¼Œä½¿è°ƒåº¦æ›´åŠ çµæ´»ã€‚</p><p>Affinityä¸»è¦åˆ†ä¸ºä¸‰ç±»ï¼š</p><ul><li>nodeAffinity(nodeäº²å’Œæ€§ï¼‰: ä»¥nodeä¸ºç›®æ ‡ï¼Œè§£å†³podå¯ä»¥è°ƒåº¦åˆ°å“ªäº›nodeçš„é—®é¢˜</li><li>podAffinity(podäº²å’Œæ€§) : ä»¥podä¸ºç›®æ ‡ï¼Œè§£å†³podå¯ä»¥å’Œå“ªäº›å·²å­˜åœ¨çš„podéƒ¨ç½²åœ¨åŒä¸€ä¸ªæ‹“æ‰‘åŸŸä¸­çš„é—®é¢˜</li><li>podAntiAffinity(podåäº²å’Œæ€§) : ä»¥podä¸ºç›®æ ‡ï¼Œè§£å†³podä¸èƒ½å’Œå“ªäº›å·²å­˜åœ¨podéƒ¨ç½²åœ¨åŒä¸€ä¸ªæ‹“æ‰‘åŸŸä¸­çš„é—®é¢˜</li></ul><blockquote><p>å…³äºäº²å’Œæ€§(åäº²å’Œæ€§)ä½¿ç”¨åœºæ™¯çš„è¯´æ˜ï¼š</p><p><strong>äº²å’Œæ€§</strong>ï¼šå¦‚æœä¸¤ä¸ªåº”ç”¨é¢‘ç¹äº¤äº’ï¼Œé‚£å°±æœ‰å¿…è¦åˆ©ç”¨äº²å’Œæ€§è®©ä¸¤ä¸ªåº”ç”¨çš„å°½å¯èƒ½çš„é è¿‘ï¼Œè¿™æ ·å¯ä»¥å‡å°‘å› ç½‘ç»œé€šä¿¡è€Œå¸¦æ¥çš„æ€§èƒ½æŸè€—ã€‚</p><p><strong>åäº²å’Œæ€§</strong>ï¼šå½“åº”ç”¨çš„é‡‡ç”¨å¤šå‰¯æœ¬éƒ¨ç½²æ—¶ï¼Œæœ‰å¿…è¦é‡‡ç”¨åäº²å’Œæ€§è®©å„ä¸ªåº”ç”¨å®ä¾‹æ‰“æ•£åˆ†å¸ƒåœ¨å„ä¸ªnodeä¸Šï¼Œè¿™æ ·å¯ä»¥æé«˜æœåŠ¡çš„é«˜å¯ç”¨æ€§ã€‚</p></blockquote><p><strong>NodeAffinity</strong></p><p>é¦–å…ˆæ¥çœ‹ä¸€ä¸‹<code>NodeAffinity</code>çš„å¯é…ç½®é¡¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">pod.spec.affinity.nodeAffinity</span><br><span class="line">  requiredDuringSchedulingIgnoredDuringExecution  NodeèŠ‚ç‚¹å¿…é¡»æ»¡è¶³æŒ‡å®šçš„æ‰€æœ‰è§„åˆ™æ‰å¯ä»¥ï¼Œç›¸å½“äºç¡¬é™åˆ¶</span><br><span class="line">    nodeSelectorTerms  èŠ‚ç‚¹é€‰æ‹©åˆ—è¡¨</span><br><span class="line">      matchFields   æŒ‰èŠ‚ç‚¹å­—æ®µåˆ—å‡ºçš„èŠ‚ç‚¹é€‰æ‹©å™¨è¦æ±‚åˆ—è¡¨</span><br><span class="line">      matchExpressions   æŒ‰èŠ‚ç‚¹æ ‡ç­¾åˆ—å‡ºçš„èŠ‚ç‚¹é€‰æ‹©å™¨è¦æ±‚åˆ—è¡¨(æ¨è)</span><br><span class="line">        key    é”®</span><br><span class="line">        values å€¼</span><br><span class="line">        operator å…³ç³»ç¬¦ æ”¯æŒExists, DoesNotExist, In, NotIn, Gt, Lt</span><br><span class="line">  preferredDuringSchedulingIgnoredDuringExecution ä¼˜å…ˆè°ƒåº¦åˆ°æ»¡è¶³æŒ‡å®šçš„è§„åˆ™çš„Nodeï¼Œç›¸å½“äºè½¯é™åˆ¶ (å€¾å‘)</span><br><span class="line">    preference   ä¸€ä¸ªèŠ‚ç‚¹é€‰æ‹©å™¨é¡¹ï¼Œä¸ç›¸åº”çš„æƒé‡ç›¸å…³è”</span><br><span class="line">      matchFields   æŒ‰èŠ‚ç‚¹å­—æ®µåˆ—å‡ºçš„èŠ‚ç‚¹é€‰æ‹©å™¨è¦æ±‚åˆ—è¡¨</span><br><span class="line">      matchExpressions   æŒ‰èŠ‚ç‚¹æ ‡ç­¾åˆ—å‡ºçš„èŠ‚ç‚¹é€‰æ‹©å™¨è¦æ±‚åˆ—è¡¨(æ¨è)</span><br><span class="line">        key    é”®</span><br><span class="line">        values å€¼</span><br><span class="line">        operator å…³ç³»ç¬¦ æ”¯æŒIn, NotIn, Exists, DoesNotExist, Gt, Lt</span><br><span class="line">weight å€¾å‘æƒé‡ï¼Œåœ¨èŒƒå›´1-100ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">å…³ç³»ç¬¦çš„ä½¿ç”¨è¯´æ˜:</span><br><span class="line"></span><br><span class="line">- matchExpressions:</span><br><span class="line">  - key: nodeenv              # åŒ¹é…å­˜åœ¨æ ‡ç­¾çš„keyä¸ºnodeenvçš„èŠ‚ç‚¹</span><br><span class="line">    operator: Exists</span><br><span class="line">  - key: nodeenv              # åŒ¹é…æ ‡ç­¾çš„keyä¸ºnodeenv,ä¸”valueæ˜¯&quot;xxx&quot;æˆ–&quot;yyy&quot;çš„èŠ‚ç‚¹</span><br><span class="line">    operator: In</span><br><span class="line">    values: [&quot;xxx&quot;,&quot;yyy&quot;]</span><br><span class="line">  - key: nodeenv              # åŒ¹é…æ ‡ç­¾çš„keyä¸ºnodeenv,ä¸”valueå¤§äº&quot;xxx&quot;çš„èŠ‚ç‚¹</span><br><span class="line">    operator: Gt</span><br><span class="line">    values: &quot;xxx&quot;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥é¦–å…ˆæ¼”ç¤ºä¸€ä¸‹<code>requiredDuringSchedulingIgnoredDuringExecution</code> ,</p><p>åˆ›å»ºpod-nodeaffinity-required.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-nodeaffinity-required</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">  <span class="attr">affinity:</span>  <span class="comment">#äº²å’Œæ€§è®¾ç½®</span></span><br><span class="line">    <span class="attr">nodeAffinity:</span> <span class="comment">#è®¾ç½®nodeäº²å’Œæ€§</span></span><br><span class="line">      <span class="attr">requiredDuringSchedulingIgnoredDuringExecution:</span> <span class="comment"># ç¡¬é™åˆ¶</span></span><br><span class="line">        <span class="attr">nodeSelectorTerms:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">matchExpressions:</span> <span class="comment"># åŒ¹é…envçš„å€¼åœ¨[&quot;xxx&quot;,&quot;yyy&quot;]ä¸­çš„æ ‡ç­¾</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">key:</span> <span class="string">nodeenv</span></span><br><span class="line">            <span class="attr">operator:</span> <span class="string">In</span></span><br><span class="line">            <span class="attr">values:</span> [<span class="string">&quot;xxx&quot;</span>,<span class="string">&quot;yyy&quot;</span>]</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºpod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pod-nodeaffinity-required.yaml</span><br><span class="line">pod/pod-nodeaffinity-required created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹podçŠ¶æ€ ï¼ˆè¿è¡Œå¤±è´¥ï¼‰</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods pod-nodeaffinity-required -n dev -o wide</span><br><span class="line">NAME                        READY   STATUS    RESTARTS   AGE   IP       NODE    ...... </span><br><span class="line">pod-nodeaffinity-required   0/1     Pending   0          16s   &lt;none&gt;   &lt;none&gt;  ......</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹Podçš„è¯¦æƒ…</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‘ç°è°ƒåº¦å¤±è´¥ï¼Œæç¤ºnodeé€‰æ‹©å¤±è´¥</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl describe pod pod-nodeaffinity-required -n dev</span><br><span class="line">......</span><br><span class="line">  Warning  FailedScheduling  &lt;unknown&gt;  default-scheduler  0/3 nodes are available: 3 node(s) didn&#x27;t match node selector.</span><br><span class="line">  Warning  FailedScheduling  &lt;unknown&gt;  default-scheduler  0/3 nodes are available: 3 node(s) didn&#x27;t match node selector.</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ¥ä¸‹æ¥ï¼Œåœæ­¢pod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl delete -f pod-nodeaffinity-required.yaml</span><br><span class="line">pod &quot;pod-nodeaffinity-required&quot; deleted</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¿®æ”¹æ–‡ä»¶ï¼Œå°†values: [<span class="string">&quot;xxx&quot;</span>,<span class="string">&quot;yyy&quot;</span>]------&gt; [<span class="string">&quot;pro&quot;</span>,<span class="string">&quot;yyy&quot;</span>]</span></span><br><span class="line">[root@k8s-master01 ~]# vim pod-nodeaffinity-required.yaml</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å†æ¬¡å¯åŠ¨</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pod-nodeaffinity-required.yaml</span><br><span class="line">pod/pod-nodeaffinity-required created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ­¤æ—¶æŸ¥çœ‹ï¼Œå‘ç°è°ƒåº¦æˆåŠŸï¼Œå·²ç»å°†podè°ƒåº¦åˆ°äº†node1ä¸Š</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods pod-nodeaffinity-required -n dev -o wide</span><br><span class="line">NAME                        READY   STATUS    RESTARTS   AGE   IP            NODE  ...... </span><br><span class="line">pod-nodeaffinity-required   1/1     Running   0          11s   10.244.1.89   node1 ......</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å†æ¼”ç¤ºä¸€ä¸‹<code>requiredDuringSchedulingIgnoredDuringExecution</code> ,</p><p>åˆ›å»ºpod-nodeaffinity-preferred.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-nodeaffinity-preferred</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">  <span class="attr">affinity:</span>  <span class="comment">#äº²å’Œæ€§è®¾ç½®</span></span><br><span class="line">    <span class="attr">nodeAffinity:</span> <span class="comment">#è®¾ç½®nodeäº²å’Œæ€§</span></span><br><span class="line">      <span class="attr">preferredDuringSchedulingIgnoredDuringExecution:</span> <span class="comment"># è½¯é™åˆ¶</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">weight:</span> <span class="number">1</span></span><br><span class="line">        <span class="attr">preference:</span></span><br><span class="line">          <span class="attr">matchExpressions:</span> <span class="comment"># åŒ¹é…envçš„å€¼åœ¨[&quot;xxx&quot;,&quot;yyy&quot;]ä¸­çš„æ ‡ç­¾(å½“å‰ç¯å¢ƒæ²¡æœ‰)</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">key:</span> <span class="string">nodeenv</span></span><br><span class="line">            <span class="attr">operator:</span> <span class="string">In</span></span><br><span class="line">            <span class="attr">values:</span> [<span class="string">&quot;xxx&quot;</span>,<span class="string">&quot;yyy&quot;</span>]</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºpod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pod-nodeaffinity-preferred.yaml</span><br><span class="line">pod/pod-nodeaffinity-preferred created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹podçŠ¶æ€ ï¼ˆè¿è¡ŒæˆåŠŸï¼‰</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pod pod-nodeaffinity-preferred -n dev</span><br><span class="line">NAME                         READY   STATUS    RESTARTS   AGE</span><br><span class="line">pod-nodeaffinity-preferred   1/1     Running   0          40s</span><br></pre></td></tr></table></figure><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NodeAffinityè§„åˆ™è®¾ç½®çš„æ³¨æ„äº‹é¡¹ï¼š</span><br><span class="line">    <span class="number">1</span> å¦‚æœåŒæ—¶å®šä¹‰äº†nodeSelectorå’ŒnodeAffinityï¼Œé‚£ä¹ˆå¿…é¡»ä¸¤ä¸ªæ¡ä»¶éƒ½å¾—åˆ°æ»¡è¶³ï¼ŒPodæ‰èƒ½è¿è¡Œåœ¨æŒ‡å®šçš„<span class="keyword">Node</span><span class="title">ä¸Š</span></span><br><span class="line"><span class="title">    2</span> å¦‚æœnodeAffinityæŒ‡å®šäº†å¤šä¸ªnodeSelectorTermsï¼Œé‚£ä¹ˆåªéœ€è¦å…¶ä¸­ä¸€ä¸ªèƒ½å¤ŸåŒ¹é…æˆåŠŸå³å¯</span><br><span class="line">    <span class="number">3</span> å¦‚æœä¸€ä¸ªnodeSelectorTermsä¸­æœ‰å¤šä¸ªmatchExpressions ï¼Œåˆ™ä¸€ä¸ªèŠ‚ç‚¹å¿…é¡»æ»¡è¶³æ‰€æœ‰çš„æ‰èƒ½åŒ¹é…æˆåŠŸ</span><br><span class="line">    <span class="number">4</span> å¦‚æœä¸€ä¸ªpodæ‰€åœ¨çš„<span class="keyword">Node</span><span class="title">åœ¨Pod</span>è¿è¡ŒæœŸé—´å…¶æ ‡ç­¾å‘ç”Ÿäº†æ”¹å˜ï¼Œä¸å†ç¬¦åˆè¯¥Podçš„èŠ‚ç‚¹äº²å’Œæ€§éœ€æ±‚ï¼Œåˆ™ç³»ç»Ÿå°†å¿½ç•¥æ­¤å˜åŒ–</span><br></pre></td></tr></table></figure><p><strong>PodAffinity</strong></p><p>PodAffinityä¸»è¦å®ç°ä»¥è¿è¡Œçš„Podä¸ºå‚ç…§ï¼Œå®ç°è®©æ–°åˆ›å»ºçš„Podè·Ÿå‚ç…§podåœ¨ä¸€ä¸ªåŒºåŸŸçš„åŠŸèƒ½ã€‚</p><p>é¦–å…ˆæ¥çœ‹ä¸€ä¸‹<code>PodAffinity</code>çš„å¯é…ç½®é¡¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">pod.spec.affinity.podAffinity</span><br><span class="line">  requiredDuringSchedulingIgnoredDuringExecution  ç¡¬é™åˆ¶</span><br><span class="line">    namespaces       æŒ‡å®šå‚ç…§podçš„namespace</span><br><span class="line">    topologyKey      æŒ‡å®šè°ƒåº¦ä½œç”¨åŸŸ</span><br><span class="line">    labelSelector    æ ‡ç­¾é€‰æ‹©å™¨</span><br><span class="line">      matchExpressions  æŒ‰èŠ‚ç‚¹æ ‡ç­¾åˆ—å‡ºçš„èŠ‚ç‚¹é€‰æ‹©å™¨è¦æ±‚åˆ—è¡¨(æ¨è)</span><br><span class="line">        key    é”®</span><br><span class="line">        values å€¼</span><br><span class="line">        operator å…³ç³»ç¬¦ æ”¯æŒIn, NotIn, Exists, DoesNotExist.</span><br><span class="line">      matchLabels    æŒ‡å¤šä¸ªmatchExpressionsæ˜ å°„çš„å†…å®¹</span><br><span class="line">  preferredDuringSchedulingIgnoredDuringExecution è½¯é™åˆ¶</span><br><span class="line">    podAffinityTerm  é€‰é¡¹</span><br><span class="line">      namespaces      </span><br><span class="line">      topologyKey</span><br><span class="line">      labelSelector</span><br><span class="line">        matchExpressions  </span><br><span class="line">          key    é”®</span><br><span class="line">          values å€¼</span><br><span class="line">          operator</span><br><span class="line">        matchLabels </span><br><span class="line">    weight å€¾å‘æƒé‡ï¼Œåœ¨èŒƒå›´1-100</span><br></pre></td></tr></table></figure><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">topologyKeyç”¨äºæŒ‡å®šè°ƒåº¦æ—¶ä½œç”¨åŸŸ,ä¾‹å¦‚:</span><br><span class="line">    å¦‚æœæŒ‡å®šä¸ºkubernetes.io/hostnameï¼Œé‚£å°±æ˜¯ä»¥<span class="keyword">Node</span><span class="title">èŠ‚ç‚¹ä¸ºåŒºåˆ†èŒƒå›´</span></span><br><span class="line"><span class="title">å¦‚æœæŒ‡å®šä¸ºbeta</span>.kubernetes.io/os,åˆ™ä»¥<span class="keyword">Node</span><span class="title">èŠ‚ç‚¹çš„æ“ä½œç³»ç»Ÿç±»å‹æ¥åŒºåˆ†</span></span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œæ¼”ç¤ºä¸‹<code>requiredDuringSchedulingIgnoredDuringExecution</code>,</p><p>1ï¼‰é¦–å…ˆåˆ›å»ºä¸€ä¸ªå‚ç…§Podï¼Œpod-podaffinity-target.yamlï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-podaffinity-target</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">podenv:</span> <span class="string">pro</span> <span class="comment">#è®¾ç½®æ ‡ç­¾</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">  <span class="attr">nodeName:</span> <span class="string">node1</span> <span class="comment"># å°†ç›®æ ‡podåç¡®æŒ‡å®šåˆ°node1ä¸Š</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯åŠ¨ç›®æ ‡pod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pod-podaffinity-target.yaml</span><br><span class="line">pod/pod-podaffinity-target created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹podçŠ¶å†µ</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods  pod-podaffinity-target -n dev</span><br><span class="line">NAME                     READY   STATUS    RESTARTS   AGE</span><br><span class="line">pod-podaffinity-target   1/1     Running   0          4s</span><br></pre></td></tr></table></figure><p>2ï¼‰åˆ›å»ºpod-podaffinity-required.yamlï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-podaffinity-required</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">  <span class="attr">affinity:</span>  <span class="comment">#äº²å’Œæ€§è®¾ç½®</span></span><br><span class="line">    <span class="attr">podAffinity:</span> <span class="comment">#è®¾ç½®podäº²å’Œæ€§</span></span><br><span class="line">      <span class="attr">requiredDuringSchedulingIgnoredDuringExecution:</span> <span class="comment"># ç¡¬é™åˆ¶</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">labelSelector:</span></span><br><span class="line">          <span class="attr">matchExpressions:</span> <span class="comment"># åŒ¹é…envçš„å€¼åœ¨[&quot;xxx&quot;,&quot;yyy&quot;]ä¸­çš„æ ‡ç­¾</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">key:</span> <span class="string">podenv</span></span><br><span class="line">            <span class="attr">operator:</span> <span class="string">In</span></span><br><span class="line">            <span class="attr">values:</span> [<span class="string">&quot;xxx&quot;</span>,<span class="string">&quot;yyy&quot;</span>]</span><br><span class="line">        <span class="attr">topologyKey:</span> <span class="string">kubernetes.io/hostname</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢é…ç½®è¡¨è¾¾çš„æ„æ€æ˜¯ï¼šæ–°Podå¿…é¡»è¦ä¸æ‹¥æœ‰æ ‡ç­¾nodeenv&#x3D;xxxæˆ–è€…nodeenv&#x3D;yyyçš„podåœ¨åŒä¸€Nodeä¸Šï¼Œæ˜¾ç„¶ç°åœ¨æ²¡æœ‰è¿™æ ·podï¼Œæ¥ä¸‹æ¥ï¼Œè¿è¡Œæµ‹è¯•ä¸€ä¸‹ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯åŠ¨pod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pod-podaffinity-required.yaml</span><br><span class="line">pod/pod-podaffinity-required created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹podçŠ¶æ€ï¼Œå‘ç°æœªè¿è¡Œ</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods pod-podaffinity-required -n dev</span><br><span class="line">NAME                       READY   STATUS    RESTARTS   AGE</span><br><span class="line">pod-podaffinity-required   0/1     Pending   0          9s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl describe pods pod-podaffinity-required  -n dev</span><br><span class="line">......</span><br><span class="line">Events:</span><br><span class="line">  Type     Reason            Age        From               Message</span><br><span class="line">  ----     ------            ----       ----               -------</span><br><span class="line">  Warning  FailedScheduling  &lt;unknown&gt;  default-scheduler  0/3 nodes are available: 2 node(s) didn&#x27;t match pod affinity rules, 1 node(s) had taints that the pod didn&#x27;t tolerate.</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¥ä¸‹æ¥ä¿®æ”¹  values: [<span class="string">&quot;xxx&quot;</span>,<span class="string">&quot;yyy&quot;</span>]-----&gt;values:[<span class="string">&quot;pro&quot;</span>,<span class="string">&quot;yyy&quot;</span>]</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ„æ€æ˜¯ï¼šæ–°Podå¿…é¡»è¦ä¸æ‹¥æœ‰æ ‡ç­¾nodeenv=xxxæˆ–è€…nodeenv=yyyçš„podåœ¨åŒä¸€Nodeä¸Š</span></span><br><span class="line">[root@k8s-master01 ~]# vim pod-podaffinity-required.yaml</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç„¶åé‡æ–°åˆ›å»ºpodï¼ŒæŸ¥çœ‹æ•ˆæœ</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl delete -f  pod-podaffinity-required.yaml</span><br><span class="line">pod &quot;pod-podaffinity-required&quot; deleted</span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pod-podaffinity-required.yaml</span><br><span class="line">pod/pod-podaffinity-required created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‘ç°æ­¤æ—¶Podè¿è¡Œæ­£å¸¸</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods pod-podaffinity-required -n dev</span><br><span class="line">NAME                       READY   STATUS    RESTARTS   AGE   LABELS</span><br><span class="line">pod-podaffinity-required   1/1     Running   0          6s    &lt;none&gt;</span><br></pre></td></tr></table></figure><p>å…³äº<code>PodAffinity</code>çš„ <code>preferredDuringSchedulingIgnoredDuringExecution</code>ï¼Œè¿™é‡Œä¸å†æ¼”ç¤ºã€‚</p><p><strong>PodAntiAffinity</strong></p><p>PodAntiAffinityä¸»è¦å®ç°ä»¥è¿è¡Œçš„Podä¸ºå‚ç…§ï¼Œè®©æ–°åˆ›å»ºçš„Podè·Ÿå‚ç…§podä¸åœ¨ä¸€ä¸ªåŒºåŸŸä¸­çš„åŠŸèƒ½ã€‚</p><p>å®ƒçš„é…ç½®æ–¹å¼å’Œé€‰é¡¹è·ŸPodAffintyæ˜¯ä¸€æ ·çš„ï¼Œè¿™é‡Œä¸å†åšè¯¦ç»†è§£é‡Šï¼Œç›´æ¥åšä¸€ä¸ªæµ‹è¯•æ¡ˆä¾‹ã€‚</p><p>1ï¼‰ç»§ç»­ä½¿ç”¨ä¸Šä¸ªæ¡ˆä¾‹ä¸­ç›®æ ‡pod</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@k8s-master01 ~]# kubectl get pods -n dev -o wide --show-labels</span><br><span class="line">NAME                     READY   STATUS    RESTARTS   AGE     IP            NODE    LABELS</span><br><span class="line">pod-podaffinity-required 1/1     Running   0          3m29s   10.244.1.38   node1   &lt;none&gt;     </span><br><span class="line">pod-podaffinity-target   1/1     Running   0          9m25s   10.244.1.37   node1   podenv=pro</span><br></pre></td></tr></table></figure><p>2ï¼‰åˆ›å»ºpod-podantiaffinity-required.yamlï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-podantiaffinity-required</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">  <span class="attr">affinity:</span>  <span class="comment">#äº²å’Œæ€§è®¾ç½®</span></span><br><span class="line">    <span class="attr">podAntiAffinity:</span> <span class="comment">#è®¾ç½®podäº²å’Œæ€§</span></span><br><span class="line">      <span class="attr">requiredDuringSchedulingIgnoredDuringExecution:</span> <span class="comment"># ç¡¬é™åˆ¶</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">labelSelector:</span></span><br><span class="line">          <span class="attr">matchExpressions:</span> <span class="comment"># åŒ¹é…podenvçš„å€¼åœ¨[&quot;pro&quot;]ä¸­çš„æ ‡ç­¾</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">key:</span> <span class="string">podenv</span></span><br><span class="line">            <span class="attr">operator:</span> <span class="string">In</span></span><br><span class="line">            <span class="attr">values:</span> [<span class="string">&quot;pro&quot;</span>]</span><br><span class="line">        <span class="attr">topologyKey:</span> <span class="string">kubernetes.io/hostname</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢é…ç½®è¡¨è¾¾çš„æ„æ€æ˜¯ï¼šæ–°Podå¿…é¡»è¦ä¸æ‹¥æœ‰æ ‡ç­¾nodeenv&#x3D;proçš„podä¸åœ¨åŒä¸€Nodeä¸Šï¼Œè¿è¡Œæµ‹è¯•ä¸€ä¸‹ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºpod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl create -f pod-podantiaffinity-required.yaml</span><br><span class="line">pod/pod-podantiaffinity-required created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹pod</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‘ç°è°ƒåº¦åˆ°äº†node2ä¸Š</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods pod-podantiaffinity-required -n dev -o wide</span><br><span class="line">NAME                           READY   STATUS    RESTARTS   AGE   IP            NODE   .. </span><br><span class="line">pod-podantiaffinity-required   1/1     Running   0          30s   10.244.1.96   node2  ..</span><br></pre></td></tr></table></figure><h3 id="5-4-3-æ±¡ç‚¹å’Œå®¹å¿"><a href="#5-4-3-æ±¡ç‚¹å’Œå®¹å¿" class="headerlink" title="5.4.3 æ±¡ç‚¹å’Œå®¹å¿"></a>5.4.3 æ±¡ç‚¹å’Œå®¹å¿</h3><p><strong>æ±¡ç‚¹ï¼ˆTaintsï¼‰</strong></p><p>å‰é¢çš„è°ƒåº¦æ–¹å¼éƒ½æ˜¯ç«™åœ¨Podçš„è§’åº¦ä¸Šï¼Œé€šè¿‡åœ¨Podä¸Šæ·»åŠ å±æ€§ï¼Œæ¥ç¡®å®šPodæ˜¯å¦è¦è°ƒåº¦åˆ°æŒ‡å®šçš„Nodeä¸Šï¼Œå…¶å®æˆ‘ä»¬ä¹Ÿå¯ä»¥ç«™åœ¨Nodeçš„è§’åº¦ä¸Šï¼Œé€šè¿‡åœ¨Nodeä¸Šæ·»åŠ <strong>æ±¡ç‚¹</strong>å±æ€§ï¼Œæ¥å†³å®šæ˜¯å¦å…è®¸Podè°ƒåº¦è¿‡æ¥ã€‚</p><p>Nodeè¢«è®¾ç½®ä¸Šæ±¡ç‚¹ä¹‹åå°±å’ŒPodä¹‹é—´å­˜åœ¨äº†ä¸€ç§ç›¸æ–¥çš„å…³ç³»ï¼Œè¿›è€Œæ‹’ç»Podè°ƒåº¦è¿›æ¥ï¼Œç”šè‡³å¯ä»¥å°†å·²ç»å­˜åœ¨çš„Podé©±é€å‡ºå»ã€‚</p><p>æ±¡ç‚¹çš„æ ¼å¼ä¸ºï¼š<code>key=value:effect</code>, keyå’Œvalueæ˜¯æ±¡ç‚¹çš„æ ‡ç­¾ï¼Œeffectæè¿°æ±¡ç‚¹çš„ä½œç”¨ï¼Œæ”¯æŒå¦‚ä¸‹ä¸‰ä¸ªé€‰é¡¹ï¼š</p><ul><li>PreferNoScheduleï¼škuberneteså°†å°½é‡é¿å…æŠŠPodè°ƒåº¦åˆ°å…·æœ‰è¯¥æ±¡ç‚¹çš„Nodeä¸Šï¼Œé™¤éæ²¡æœ‰å…¶ä»–èŠ‚ç‚¹å¯è°ƒåº¦</li><li>NoScheduleï¼škuberneteså°†ä¸ä¼šæŠŠPodè°ƒåº¦åˆ°å…·æœ‰è¯¥æ±¡ç‚¹çš„Nodeä¸Šï¼Œä½†ä¸ä¼šå½±å“å½“å‰Nodeä¸Šå·²å­˜åœ¨çš„Pod</li><li>NoExecuteï¼škuberneteså°†ä¸ä¼šæŠŠPodè°ƒåº¦åˆ°å…·æœ‰è¯¥æ±¡ç‚¹çš„Nodeä¸Šï¼ŒåŒæ—¶ä¹Ÿä¼šå°†Nodeä¸Šå·²å­˜åœ¨çš„Podé©±ç¦»</li></ul><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200605021831545.png" alt="image-20200605021606508"></p><p>ä½¿ç”¨kubectlè®¾ç½®å’Œå»é™¤æ±¡ç‚¹çš„å‘½ä»¤ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®æ±¡ç‚¹</span></span><br><span class="line">kubectl taint nodes node1 key=value:effect</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å»é™¤æ±¡ç‚¹</span></span><br><span class="line">kubectl taint nodes node1 key:effect-</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å»é™¤æ‰€æœ‰æ±¡ç‚¹</span></span><br><span class="line">kubectl taint nodes node1 key-</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œæ¼”ç¤ºä¸‹æ±¡ç‚¹çš„æ•ˆæœï¼š</p><ol><li>å‡†å¤‡èŠ‚ç‚¹node1ï¼ˆä¸ºäº†æ¼”ç¤ºæ•ˆæœæ›´åŠ æ˜æ˜¾ï¼Œæš‚æ—¶åœæ­¢node2èŠ‚ç‚¹ï¼‰</li><li>ä¸ºnode1èŠ‚ç‚¹è®¾ç½®ä¸€ä¸ªæ±¡ç‚¹: <code>tag=heima:PreferNoSchedule</code>ï¼›ç„¶ååˆ›å»ºpod1( pod1 å¯ä»¥ )</li><li>ä¿®æ”¹ä¸ºnode1èŠ‚ç‚¹è®¾ç½®ä¸€ä¸ªæ±¡ç‚¹: <code>tag=heima:NoSchedule</code>ï¼›ç„¶ååˆ›å»ºpod2( pod1 æ­£å¸¸ pod2 å¤±è´¥ )</li><li>ä¿®æ”¹ä¸ºnode1èŠ‚ç‚¹è®¾ç½®ä¸€ä¸ªæ±¡ç‚¹: <code>tag=heima:NoExecute</code>ï¼›ç„¶ååˆ›å»ºpod3 ( 3ä¸ªpodéƒ½å¤±è´¥ )</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸ºnode1è®¾ç½®æ±¡ç‚¹(PreferNoSchedule)</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl taint nodes node1 tag=heima:PreferNoSchedule</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºpod1</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl run taint1 --image=nginx:1.17.1 -n dev</span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods -n dev -o wide</span><br><span class="line">NAME                      READY   STATUS    RESTARTS   AGE     IP           NODE   </span><br><span class="line">taint1-7665f7fd85-574h4   1/1     Running   0          2m24s   10.244.1.59   node1    </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸ºnode1è®¾ç½®æ±¡ç‚¹(å–æ¶ˆPreferNoScheduleï¼Œè®¾ç½®NoSchedule)</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl taint nodes node1 tag:PreferNoSchedule-</span><br><span class="line">[root@k8s-master01 ~]# kubectl taint nodes node1 tag=heima:NoSchedule</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºpod2</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl run taint2 --image=nginx:1.17.1 -n dev</span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods taint2 -n dev -o wide</span><br><span class="line">NAME                      READY   STATUS    RESTARTS   AGE     IP            NODE</span><br><span class="line">taint1-7665f7fd85-574h4   1/1     Running   0          2m24s   10.244.1.59   node1 </span><br><span class="line">taint2-544694789-6zmlf    0/1     Pending   0          21s     &lt;none&gt;        &lt;none&gt;   </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸ºnode1è®¾ç½®æ±¡ç‚¹(å–æ¶ˆNoScheduleï¼Œè®¾ç½®NoExecute)</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl taint nodes node1 tag:NoSchedule-</span><br><span class="line">[root@k8s-master01 ~]# kubectl taint nodes node1 tag=heima:NoExecute</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºpod3</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl run taint3 --image=nginx:1.17.1 -n dev</span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods -n dev -o wide</span><br><span class="line">NAME                      READY   STATUS    RESTARTS   AGE   IP       NODE     NOMINATED </span><br><span class="line">taint1-7665f7fd85-htkmp   0/1     Pending   0          35s   &lt;none&gt;   &lt;none&gt;   &lt;none&gt;    </span><br><span class="line">taint2-544694789-bn7wb    0/1     Pending   0          35s   &lt;none&gt;   &lt;none&gt;   &lt;none&gt;     </span><br><span class="line">taint3-6d78dbd749-tktkq   0/1     Pending   0          6s    &lt;none&gt;   &lt;none&gt;   &lt;none&gt;     </span><br></pre></td></tr></table></figure><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å°æç¤ºï¼š</span><br><span class="line">    ä½¿ç”¨kubeadmæ­å»ºçš„é›†ç¾¤ï¼Œé»˜è®¤å°±ä¼šç»™<span class="literal">master</span>èŠ‚ç‚¹æ·»åŠ ä¸€ä¸ªæ±¡ç‚¹æ ‡è®°,æ‰€ä»¥podå°±ä¸ä¼šè°ƒåº¦åˆ°<span class="literal">master</span>èŠ‚ç‚¹ä¸Š.</span><br></pre></td></tr></table></figure><p><strong>å®¹å¿ï¼ˆTolerationï¼‰</strong></p><p>ä¸Šé¢ä»‹ç»äº†æ±¡ç‚¹çš„ä½œç”¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨nodeä¸Šæ·»åŠ æ±¡ç‚¹ç”¨äºæ‹’ç»podè°ƒåº¦ä¸Šæ¥ï¼Œä½†æ˜¯å¦‚æœå°±æ˜¯æƒ³å°†ä¸€ä¸ªpodè°ƒåº¦åˆ°ä¸€ä¸ªæœ‰æ±¡ç‚¹çš„nodeä¸Šå»ï¼Œè¿™æ—¶å€™åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿè¿™å°±è¦ä½¿ç”¨åˆ°<strong>å®¹å¿</strong>ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200514095913741.png" alt="image-20200514095913741"></p><blockquote><p>æ±¡ç‚¹å°±æ˜¯æ‹’ç»ï¼Œå®¹å¿å°±æ˜¯å¿½ç•¥ï¼ŒNodeé€šè¿‡æ±¡ç‚¹æ‹’ç»podè°ƒåº¦ä¸Šå»ï¼ŒPodé€šè¿‡å®¹å¿å¿½ç•¥æ‹’ç»</p></blockquote><p>ä¸‹é¢å…ˆé€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹çœ‹ä¸‹æ•ˆæœï¼š</p><ol><li>ä¸Šä¸€å°èŠ‚ï¼Œå·²ç»åœ¨node1èŠ‚ç‚¹ä¸Šæ‰“ä¸Šäº†<code>NoExecute</code>çš„æ±¡ç‚¹ï¼Œæ­¤æ—¶podæ˜¯è°ƒåº¦ä¸ä¸Šå»çš„</li><li>æœ¬å°èŠ‚ï¼Œå¯ä»¥é€šè¿‡ç»™podæ·»åŠ å®¹å¿ï¼Œç„¶åå°†å…¶è°ƒåº¦ä¸Šå»</li></ol><p>åˆ›å»ºpod-toleration.yaml,å†…å®¹å¦‚ä¸‹</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">pod-toleration</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:1.17.1</span></span><br><span class="line">  <span class="attr">tolerations:</span>      <span class="comment"># æ·»åŠ å®¹å¿</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">key:</span> <span class="string">&quot;tag&quot;</span>        <span class="comment"># è¦å®¹å¿çš„æ±¡ç‚¹çš„key</span></span><br><span class="line">    <span class="attr">operator:</span> <span class="string">&quot;Equal&quot;</span> <span class="comment"># æ“ä½œç¬¦</span></span><br><span class="line">    <span class="attr">value:</span> <span class="string">&quot;heima&quot;</span>    <span class="comment"># å®¹å¿çš„æ±¡ç‚¹çš„value</span></span><br><span class="line">    <span class="attr">effect:</span> <span class="string">&quot;NoExecute&quot;</span>   <span class="comment"># æ·»åŠ å®¹å¿çš„è§„åˆ™ï¼Œè¿™é‡Œå¿…é¡»å’Œæ ‡è®°çš„æ±¡ç‚¹è§„åˆ™ç›¸åŒ</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ·»åŠ å®¹å¿ä¹‹å‰çš„pod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods -n dev -o wide</span><br><span class="line">NAME             READY   STATUS    RESTARTS   AGE   IP       NODE     NOMINATED </span><br><span class="line">pod-toleration   0/1     Pending   0          3s    &lt;none&gt;   &lt;none&gt;   &lt;none&gt;           </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ·»åŠ å®¹å¿ä¹‹åçš„pod</span></span><br><span class="line">[root@k8s-master01 ~]# kubectl get pods -n dev -o wide</span><br><span class="line">NAME             READY   STATUS    RESTARTS   AGE   IP            NODE    NOMINATED</span><br><span class="line">pod-toleration   1/1     Running   0          3s    10.244.1.62   node1   &lt;none&gt;        </span><br></pre></td></tr></table></figure><p>ä¸‹é¢çœ‹ä¸€ä¸‹å®¹å¿çš„è¯¦ç»†é…ç½®:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@k8s-master01 ~]# kubectl explain pod.spec.tolerations</span><br><span class="line">......</span><br><span class="line">FIELDS:</span><br><span class="line">   key       # å¯¹åº”ç€è¦å®¹å¿çš„æ±¡ç‚¹çš„é”®ï¼Œç©ºæ„å‘³ç€åŒ¹é…æ‰€æœ‰çš„é”®</span><br><span class="line">   value     # å¯¹åº”ç€è¦å®¹å¿çš„æ±¡ç‚¹çš„å€¼</span><br><span class="line">   operator  # key-valueçš„è¿ç®—ç¬¦ï¼Œæ”¯æŒEqualå’ŒExistsï¼ˆé»˜è®¤ï¼‰</span><br><span class="line">   effect    # å¯¹åº”æ±¡ç‚¹çš„effectï¼Œç©ºæ„å‘³ç€åŒ¹é…æ‰€æœ‰å½±å“</span><br><span class="line">   tolerationSeconds   # å®¹å¿æ—¶é—´, å½“effectä¸ºNoExecuteæ—¶ç”Ÿæ•ˆï¼Œè¡¨ç¤ºpodåœ¨Nodeä¸Šçš„åœç•™æ—¶é—´</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Doc </category>
          
          <category> Kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kubernetes </tag>
            
            <tag> æ•™ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetesç¬”è®° 4</title>
      <link href="/2022/07/11/ef971b367edb-q1jun/"/>
      <url>/2022/07/11/ef971b367edb-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="4-å®æˆ˜å…¥é—¨"><a href="#4-å®æˆ˜å…¥é—¨" class="headerlink" title="4. å®æˆ˜å…¥é—¨"></a>4. å®æˆ˜å…¥é—¨</h1><p>æœ¬ç« èŠ‚å°†ä»‹ç»å¦‚ä½•åœ¨kubernetesé›†ç¾¤ä¸­éƒ¨ç½²ä¸€ä¸ªnginxæœåŠ¡ï¼Œå¹¶ä¸”èƒ½å¤Ÿå¯¹å…¶è¿›è¡Œè®¿é—®ã€‚</p><h2 id="4-1-Namespace"><a href="#4-1-Namespace" class="headerlink" title="4.1 Namespace"></a>4.1 Namespace</h2><p>Namespaceæ˜¯kubernetesç³»ç»Ÿä¸­çš„ä¸€ç§éå¸¸é‡è¦èµ„æºï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ç”¨æ¥å®ç°<strong>å¤šå¥—ç¯å¢ƒçš„èµ„æºéš”ç¦»</strong>æˆ–è€…<strong>å¤šç§Ÿæˆ·çš„èµ„æºéš”ç¦»</strong>ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œkubernetesé›†ç¾¤ä¸­çš„æ‰€æœ‰çš„Podéƒ½æ˜¯å¯ä»¥ç›¸äº’è®¿é—®çš„ã€‚ä½†æ˜¯åœ¨å®é™…ä¸­ï¼Œå¯èƒ½ä¸æƒ³è®©ä¸¤ä¸ªPodä¹‹é—´è¿›è¡Œäº’ç›¸çš„è®¿é—®ï¼Œé‚£æ­¤æ—¶å°±å¯ä»¥å°†ä¸¤ä¸ªPodåˆ’åˆ†åˆ°ä¸åŒçš„namespaceä¸‹ã€‚kubernetesé€šè¿‡å°†é›†ç¾¤å†…éƒ¨çš„èµ„æºåˆ†é…åˆ°ä¸åŒçš„Namespaceä¸­ï¼Œå¯ä»¥å½¢æˆé€»è¾‘ä¸Šçš„â€ç»„â€ï¼Œä»¥æ–¹ä¾¿ä¸åŒçš„ç»„çš„èµ„æºè¿›è¡Œéš”ç¦»ä½¿ç”¨å’Œç®¡ç†ã€‚</p><p>å¯ä»¥é€šè¿‡kubernetesçš„æˆæƒæœºåˆ¶ï¼Œå°†ä¸åŒçš„namespaceäº¤ç»™ä¸åŒç§Ÿæˆ·è¿›è¡Œç®¡ç†ï¼Œè¿™æ ·å°±å®ç°äº†å¤šç§Ÿæˆ·çš„èµ„æºéš”ç¦»ã€‚æ­¤æ—¶è¿˜èƒ½ç»“åˆkubernetesçš„èµ„æºé…é¢æœºåˆ¶ï¼Œé™å®šä¸åŒç§Ÿæˆ·èƒ½å ç”¨çš„èµ„æºï¼Œä¾‹å¦‚CPUä½¿ç”¨é‡ã€å†…å­˜ä½¿ç”¨é‡ç­‰ç­‰ï¼Œæ¥å®ç°ç§Ÿæˆ·å¯ç”¨èµ„æºçš„ç®¡ç†ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200407100850484.png" alt="image-20200407100850484"></p><p>kubernetesåœ¨é›†ç¾¤å¯åŠ¨ä¹‹åï¼Œä¼šé»˜è®¤åˆ›å»ºå‡ ä¸ªnamespace</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl  get namespace</span><br><span class="line">NAME              STATUS   AGE</span><br><span class="line">default           Active   45h     #  æ‰€æœ‰æœªæŒ‡å®šNamespaceçš„å¯¹è±¡éƒ½ä¼šè¢«åˆ†é…åœ¨defaultå‘½åç©ºé—´</span><br><span class="line">kube-node-lease   Active   45h     #  é›†ç¾¤èŠ‚ç‚¹ä¹‹é—´çš„å¿ƒè·³ç»´æŠ¤ï¼Œv1.13å¼€å§‹å¼•å…¥</span><br><span class="line">kube-public       Active   45h     #  æ­¤å‘½åç©ºé—´ä¸‹çš„èµ„æºå¯ä»¥è¢«æ‰€æœ‰äººè®¿é—®ï¼ˆåŒ…æ‹¬æœªè®¤è¯ç”¨æˆ·ï¼‰</span><br><span class="line">kube-system       Active   45h     #  æ‰€æœ‰ç”±Kubernetesç³»ç»Ÿåˆ›å»ºçš„èµ„æºéƒ½å¤„äºè¿™ä¸ªå‘½åç©ºé—´</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ¥çœ‹namespaceèµ„æºçš„å…·ä½“æ“ä½œï¼š</p><p><strong>æŸ¥çœ‹</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1 æŸ¥çœ‹æ‰€æœ‰çš„ns  å‘½ä»¤ï¼škubectl get ns</span></span><br><span class="line">[root@master ~]# kubectl get ns</span><br><span class="line">NAME              STATUS   AGE</span><br><span class="line">default           Active   45h</span><br><span class="line">kube-node-lease   Active   45h</span><br><span class="line">kube-public       Active   45h     </span><br><span class="line">kube-system       Active   45h     </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2 æŸ¥çœ‹æŒ‡å®šçš„ns   å‘½ä»¤ï¼škubectl get ns nsåç§°</span></span><br><span class="line">[root@master ~]# kubectl get ns default</span><br><span class="line">NAME      STATUS   AGE</span><br><span class="line">default   Active   45h</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">3 æŒ‡å®šè¾“å‡ºæ ¼å¼  å‘½ä»¤ï¼škubectl get ns nsåç§°  -o æ ¼å¼å‚æ•°</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">kubernetesæ”¯æŒçš„æ ¼å¼æœ‰å¾ˆå¤šï¼Œæ¯”è¾ƒå¸¸è§çš„æ˜¯wideã€jsonã€yaml</span></span><br><span class="line">[root@master ~]# kubectl get ns default -o yaml</span><br><span class="line">apiVersion: v1</span><br><span class="line">kind: Namespace</span><br><span class="line">metadata:</span><br><span class="line">  creationTimestamp: &quot;2021-05-08T04:44:16Z&quot;</span><br><span class="line">  name: default</span><br><span class="line">  resourceVersion: &quot;151&quot;</span><br><span class="line">  selfLink: /api/v1/namespaces/default</span><br><span class="line">  uid: 7405f73a-e486-43d4-9db6-145f1409f090</span><br><span class="line">spec:</span><br><span class="line">  finalizers:</span><br><span class="line">  - kubernetes</span><br><span class="line">status:</span><br><span class="line">  phase: Active</span><br><span class="line"><span class="meta prompt_">  </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">4 æŸ¥çœ‹nsè¯¦æƒ…  å‘½ä»¤ï¼škubectl describe ns nsåç§°</span></span><br><span class="line">[root@master ~]# kubectl describe ns default</span><br><span class="line">Name:         default</span><br><span class="line">Labels:       &lt;none&gt;</span><br><span class="line">Annotations:  &lt;none&gt;</span><br><span class="line">Status:       Active  # Active å‘½åç©ºé—´æ­£åœ¨ä½¿ç”¨ä¸­  Terminating æ­£åœ¨åˆ é™¤å‘½åç©ºé—´</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ResourceQuota é’ˆå¯¹namespaceåšçš„èµ„æºé™åˆ¶</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">LimitRangeé’ˆå¯¹namespaceä¸­çš„æ¯ä¸ªç»„ä»¶åšçš„èµ„æºé™åˆ¶</span></span><br><span class="line">No resource quota.</span><br><span class="line">No LimitRange resource.</span><br></pre></td></tr></table></figure><p><strong>åˆ›å»º</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºnamespace</span></span><br><span class="line">[root@master ~]# kubectl create ns dev</span><br><span class="line">namespace/dev created</span><br></pre></td></tr></table></figure><p><strong>åˆ é™¤</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤namespace</span></span><br><span class="line">[root@master ~]# kubectl delete ns dev</span><br><span class="line">namespace &quot;dev&quot; deleted</span><br></pre></td></tr></table></figure><p><strong>é…ç½®æ–¹å¼</strong></p><p>é¦–å…ˆå‡†å¤‡ä¸€ä¸ªyamlæ–‡ä»¶ï¼šns-dev.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Namespace</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">dev</span></span><br></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥æ‰§è¡Œå¯¹åº”çš„åˆ›å»ºå’Œåˆ é™¤å‘½ä»¤äº†ï¼š</p><p>åˆ›å»ºï¼škubectl create -f ns-dev.yaml</p><p>åˆ é™¤ï¼škubectl delete -f ns-dev.yaml</p><h2 id="4-2-Pod"><a href="#4-2-Pod" class="headerlink" title="4.2 Pod"></a>4.2 Pod</h2><p>Podæ˜¯kubernetesé›†ç¾¤è¿›è¡Œç®¡ç†çš„æœ€å°å•å…ƒï¼Œç¨‹åºè¦è¿è¡Œå¿…é¡»éƒ¨ç½²åœ¨å®¹å™¨ä¸­ï¼Œè€Œå®¹å™¨å¿…é¡»å­˜åœ¨äºPodä¸­ã€‚</p><p>Podå¯ä»¥è®¤ä¸ºæ˜¯å®¹å™¨çš„å°è£…ï¼Œä¸€ä¸ªPodä¸­å¯ä»¥å­˜åœ¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªå®¹å™¨ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200407121501907.png" alt="image-20200407121501907"></p><p>kubernetesåœ¨é›†ç¾¤å¯åŠ¨ä¹‹åï¼Œé›†ç¾¤ä¸­çš„å„ä¸ªç»„ä»¶ä¹Ÿéƒ½æ˜¯ä»¥Podæ–¹å¼è¿è¡Œçš„ã€‚å¯ä»¥é€šè¿‡ä¸‹é¢å‘½ä»¤æŸ¥çœ‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl get pod -n kube-system</span><br><span class="line">NAMESPACE     NAME                             READY   STATUS    RESTARTS   AGE</span><br><span class="line">kube-system   coredns-6955765f44-68g6v         1/1     Running   0          2d1h</span><br><span class="line">kube-system   coredns-6955765f44-cs5r8         1/1     Running   0          2d1h</span><br><span class="line">kube-system   etcd-master                      1/1     Running   0          2d1h</span><br><span class="line">kube-system   kube-apiserver-master            1/1     Running   0          2d1h</span><br><span class="line">kube-system   kube-controller-manager-master   1/1     Running   0          2d1h</span><br><span class="line">kube-system   kube-flannel-ds-amd64-47r25      1/1     Running   0          2d1h</span><br><span class="line">kube-system   kube-flannel-ds-amd64-ls5lh      1/1     Running   0          2d1h</span><br><span class="line">kube-system   kube-proxy-685tk                 1/1     Running   0          2d1h</span><br><span class="line">kube-system   kube-proxy-87spt                 1/1     Running   0          2d1h</span><br><span class="line">kube-system   kube-scheduler-master            1/1     Running   0          2d1h</span><br></pre></td></tr></table></figure><p><strong>åˆ›å»ºå¹¶è¿è¡Œ</strong></p><p>kubernetesæ²¡æœ‰æä¾›å•ç‹¬è¿è¡ŒPodçš„å‘½ä»¤ï¼Œéƒ½æ˜¯é€šè¿‡Podæ§åˆ¶å™¨æ¥å®ç°çš„</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‘½ä»¤æ ¼å¼ï¼š kubectl run (podæ§åˆ¶å™¨åç§°) [å‚æ•°]</span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--image  æŒ‡å®šPodçš„é•œåƒ</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--port   æŒ‡å®šç«¯å£</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--namespace  æŒ‡å®šnamespace</span></span><br><span class="line">[root@master ~]# kubectl run nginx --image=nginx:latest --port=80 --namespace dev </span><br><span class="line">deployment.apps/nginx created</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹podä¿¡æ¯</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹PodåŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">[root@master ~]# kubectl get pods -n dev</span><br><span class="line">NAME    READY   STATUS    RESTARTS   AGE</span><br><span class="line">nginx   1/1     Running   0          43s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹Podçš„è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">[root@master ~]# kubectl describe pod nginx -n dev</span><br><span class="line">Name:         nginx</span><br><span class="line">Namespace:    dev</span><br><span class="line">Priority:     0</span><br><span class="line">Node:         node1/192.168.5.4</span><br><span class="line">Start Time:   Wed, 08 May 2021 09:29:24 +0800</span><br><span class="line">Labels:       pod-template-hash=5ff7956ff6</span><br><span class="line">              run=nginx</span><br><span class="line">Annotations:  &lt;none&gt;</span><br><span class="line">Status:       Running</span><br><span class="line">IP:           10.244.1.23</span><br><span class="line">IPs:</span><br><span class="line">  IP:           10.244.1.23</span><br><span class="line">Controlled By:  ReplicaSet/nginx</span><br><span class="line">Containers:</span><br><span class="line">  nginx:</span><br><span class="line">    Container ID:   docker://4c62b8c0648d2512380f4ffa5da2c99d16e05634979973449c98e9b829f6253c</span><br><span class="line">    Image:          nginx:latest</span><br><span class="line">    Image ID:       docker-pullable://nginx@sha256:485b610fefec7ff6c463ced9623314a04ed67e3945b9c08d7e53a47f6d108dc7</span><br><span class="line">    Port:           80/TCP</span><br><span class="line">    Host Port:      0/TCP</span><br><span class="line">    State:          Running</span><br><span class="line">      Started:      Wed, 08 May 2021 09:30:01 +0800</span><br><span class="line">    Ready:          True</span><br><span class="line">    Restart Count:  0</span><br><span class="line">    Environment:    &lt;none&gt;</span><br><span class="line">    Mounts:</span><br><span class="line">      /var/run/secrets/kubernetes.io/serviceaccount from default-token-hwvvw (ro)</span><br><span class="line">Conditions:</span><br><span class="line">  Type              Status</span><br><span class="line">  Initialized       True</span><br><span class="line">  Ready             True</span><br><span class="line">  ContainersReady   True</span><br><span class="line">  PodScheduled      True</span><br><span class="line">Volumes:</span><br><span class="line">  default-token-hwvvw:</span><br><span class="line">    Type:        Secret (a volume populated by a Secret)</span><br><span class="line">    SecretName:  default-token-hwvvw</span><br><span class="line">    Optional:    false</span><br><span class="line">QoS Class:       BestEffort</span><br><span class="line">Node-Selectors:  &lt;none&gt;</span><br><span class="line">Tolerations:     node.kubernetes.io/not-ready:NoExecute for 300s</span><br><span class="line">                 node.kubernetes.io/unreachable:NoExecute for 300s</span><br><span class="line">Events:</span><br><span class="line">  Type    Reason     Age        From               Message</span><br><span class="line">  ----    ------     ----       ----               -------</span><br><span class="line">  Normal  Scheduled  &lt;unknown&gt;  default-scheduler  Successfully assigned dev/nginx-5ff7956ff6-fg2db to node1</span><br><span class="line">  Normal  Pulling    4m11s      kubelet, node1     Pulling image &quot;nginx:latest&quot;</span><br><span class="line">  Normal  Pulled     3m36s      kubelet, node1     Successfully pulled image &quot;nginx:latest&quot;</span><br><span class="line">  Normal  Created    3m36s      kubelet, node1     Created container nginx</span><br><span class="line">  Normal  Started    3m36s      kubelet, node1     Started container nginx</span><br></pre></td></tr></table></figure><p><strong>è®¿é—®Pod</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è·å–podIP</span></span><br><span class="line">[root@master ~]# kubectl get pods -n dev -o wide</span><br><span class="line">NAME    READY   STATUS    RESTARTS   AGE    IP             NODE    ... </span><br><span class="line">nginx   1/1     Running   0          190s   10.244.1.23   node1   ...</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">è®¿é—®POD</span></span><br><span class="line">[root@master ~]# curl http://10.244.1.23:80</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;Welcome to nginx!&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p><strong>åˆ é™¤æŒ‡å®šPod</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤æŒ‡å®šPod</span></span><br><span class="line">[root@master ~]# kubectl delete pod nginx -n dev</span><br><span class="line">pod &quot;nginx&quot; deleted</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ­¤æ—¶ï¼Œæ˜¾ç¤ºåˆ é™¤PodæˆåŠŸï¼Œä½†æ˜¯å†æŸ¥è¯¢ï¼Œå‘ç°åˆæ–°äº§ç”Ÿäº†ä¸€ä¸ª</span> </span><br><span class="line">[root@master ~]# kubectl get pods -n dev</span><br><span class="line">NAME    READY   STATUS    RESTARTS   AGE</span><br><span class="line">nginx   1/1     Running   0          21s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿™æ˜¯å› ä¸ºå½“å‰Podæ˜¯ç”±Podæ§åˆ¶å™¨åˆ›å»ºçš„ï¼Œæ§åˆ¶å™¨ä¼šç›‘æ§PodçŠ¶å†µï¼Œä¸€æ—¦å‘ç°Podæ­»äº¡ï¼Œä¼šç«‹å³é‡å»º</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ­¤æ—¶è¦æƒ³åˆ é™¤Podï¼Œå¿…é¡»åˆ é™¤Podæ§åˆ¶å™¨</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å…ˆæ¥æŸ¥è¯¢ä¸€ä¸‹å½“å‰namespaceä¸‹çš„Podæ§åˆ¶å™¨</span></span><br><span class="line">[root@master ~]# kubectl get deploy -n  dev</span><br><span class="line">NAME    READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">nginx   1/1     1            1           9m7s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¥ä¸‹æ¥ï¼Œåˆ é™¤æ­¤PodPodæ§åˆ¶å™¨</span></span><br><span class="line">[root@master ~]# kubectl delete deploy nginx -n dev</span><br><span class="line">deployment.apps &quot;nginx&quot; deleted</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¨ç­‰ç‰‡åˆ»ï¼Œå†æŸ¥è¯¢Podï¼Œå‘ç°Podè¢«åˆ é™¤äº†</span></span><br><span class="line">[root@master ~]# kubectl get pods -n dev</span><br><span class="line">No resources found in dev namespace.</span><br></pre></td></tr></table></figure><p><strong>é…ç½®æ“ä½œ</strong></p><p>åˆ›å»ºä¸€ä¸ªpod-nginx.yamlï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">image:</span> <span class="string">nginx:latest</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">pod</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx-port</span></span><br><span class="line">      <span class="attr">containerPort:</span> <span class="number">80</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">TCP</span></span><br></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥æ‰§è¡Œå¯¹åº”çš„åˆ›å»ºå’Œåˆ é™¤å‘½ä»¤äº†ï¼š</p><p>åˆ›å»ºï¼škubectl create -f pod-nginx.yaml</p><p>åˆ é™¤ï¼škubectl delete -f pod-nginx.yaml</p><h2 id="4-3-Label"><a href="#4-3-Label" class="headerlink" title="4.3 Label"></a>4.3 Label</h2><p>Labelæ˜¯kubernetesç³»ç»Ÿä¸­çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µã€‚å®ƒçš„ä½œç”¨å°±æ˜¯åœ¨èµ„æºä¸Šæ·»åŠ æ ‡è¯†ï¼Œç”¨æ¥å¯¹å®ƒä»¬è¿›è¡ŒåŒºåˆ†å’Œé€‰æ‹©ã€‚</p><p>Labelçš„ç‰¹ç‚¹ï¼š</p><ul><li>ä¸€ä¸ªLabelä¼šä»¥key&#x2F;valueé”®å€¼å¯¹çš„å½¢å¼é™„åŠ åˆ°å„ç§å¯¹è±¡ä¸Šï¼Œå¦‚Nodeã€Podã€Serviceç­‰ç­‰</li><li>ä¸€ä¸ªèµ„æºå¯¹è±¡å¯ä»¥å®šä¹‰ä»»æ„æ•°é‡çš„Label ï¼ŒåŒä¸€ä¸ªLabelä¹Ÿå¯ä»¥è¢«æ·»åŠ åˆ°ä»»æ„æ•°é‡çš„èµ„æºå¯¹è±¡ä¸Šå»</li><li>Labelé€šå¸¸åœ¨èµ„æºå¯¹è±¡å®šä¹‰æ—¶ç¡®å®šï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åœ¨å¯¹è±¡åˆ›å»ºååŠ¨æ€æ·»åŠ æˆ–è€…åˆ é™¤</li></ul><p>å¯ä»¥é€šè¿‡Labelå®ç°èµ„æºçš„å¤šç»´åº¦åˆ†ç»„ï¼Œä»¥ä¾¿çµæ´»ã€æ–¹ä¾¿åœ°è¿›è¡Œèµ„æºåˆ†é…ã€è°ƒåº¦ã€é…ç½®ã€éƒ¨ç½²ç­‰ç®¡ç†å·¥ä½œã€‚</p><blockquote><p>ä¸€äº›å¸¸ç”¨çš„Label ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><ul><li>ç‰ˆæœ¬æ ‡ç­¾ï¼šâ€versionâ€:â€releaseâ€, â€œversionâ€:â€stableâ€â€¦â€¦</li><li>ç¯å¢ƒæ ‡ç­¾ï¼šâ€environmentâ€:â€devâ€ï¼Œâ€environmentâ€:â€testâ€ï¼Œâ€environmentâ€:â€proâ€</li><li>æ¶æ„æ ‡ç­¾ï¼šâ€tierâ€:â€frontendâ€ï¼Œâ€tierâ€:â€backendâ€</li></ul></blockquote><p>æ ‡ç­¾å®šä¹‰å®Œæ¯•ä¹‹åï¼Œè¿˜è¦è€ƒè™‘åˆ°æ ‡ç­¾çš„é€‰æ‹©ï¼Œè¿™å°±è¦ä½¿ç”¨åˆ°Label Selectorï¼Œå³ï¼š</p><p>Labelç”¨äºç»™æŸä¸ªèµ„æºå¯¹è±¡å®šä¹‰æ ‡è¯†</p><p>Label Selectorç”¨äºæŸ¥è¯¢å’Œç­›é€‰æ‹¥æœ‰æŸäº›æ ‡ç­¾çš„èµ„æºå¯¹è±¡</p><p>å½“å‰æœ‰ä¸¤ç§Label Selectorï¼š</p><ul><li><p>åŸºäºç­‰å¼çš„Label Selector</p><p>name &#x3D; slave: é€‰æ‹©æ‰€æœ‰åŒ…å«Labelä¸­key&#x3D;â€nameâ€ä¸”value&#x3D;â€slaveâ€çš„å¯¹è±¡</p><p>env !&#x3D; production: é€‰æ‹©æ‰€æœ‰åŒ…æ‹¬Labelä¸­çš„key&#x3D;â€envâ€ä¸”valueä¸ç­‰äºâ€productionâ€çš„å¯¹è±¡</p></li><li><p>åŸºäºé›†åˆçš„Label Selector</p><p>name in (master, slave): é€‰æ‹©æ‰€æœ‰åŒ…å«Labelä¸­çš„key&#x3D;â€nameâ€ä¸”value&#x3D;â€masterâ€æˆ–â€slaveâ€çš„å¯¹è±¡</p><p>name not in (frontend): é€‰æ‹©æ‰€æœ‰åŒ…å«Labelä¸­çš„key&#x3D;â€nameâ€ä¸”valueä¸ç­‰äºâ€frontendâ€çš„å¯¹è±¡</p></li></ul><p>æ ‡ç­¾çš„é€‰æ‹©æ¡ä»¶å¯ä»¥ä½¿ç”¨å¤šä¸ªï¼Œæ­¤æ—¶å°†å¤šä¸ªLabel Selectorè¿›è¡Œç»„åˆï¼Œä½¿ç”¨é€—å·â€,â€è¿›è¡Œåˆ†éš”å³å¯ã€‚ä¾‹å¦‚ï¼š</p><p>name&#x3D;slaveï¼Œenv!&#x3D;production</p><p>name not in (frontend)ï¼Œenv!&#x3D;production</p><p><strong>å‘½ä»¤æ–¹å¼</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸ºpodèµ„æºæ‰“æ ‡ç­¾</span></span><br><span class="line">[root@master ~]# kubectl label pod nginx-pod version=1.0 -n dev</span><br><span class="line">pod/nginx-pod labeled</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸ºpodèµ„æºæ›´æ–°æ ‡ç­¾</span></span><br><span class="line">[root@master ~]# kubectl label pod nginx-pod version=2.0 -n dev --overwrite</span><br><span class="line">pod/nginx-pod labeled</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æ ‡ç­¾</span></span><br><span class="line">[root@master ~]# kubectl get pod nginx-pod  -n dev --show-labels</span><br><span class="line">NAME        READY   STATUS    RESTARTS   AGE   LABELS</span><br><span class="line">nginx-pod   1/1     Running   0          10m   version=2.0</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç­›é€‰æ ‡ç­¾</span></span><br><span class="line">[root@master ~]# kubectl get pod -n dev -l version=2.0  --show-labels</span><br><span class="line">NAME        READY   STATUS    RESTARTS   AGE   LABELS</span><br><span class="line">nginx-pod   1/1     Running   0          17m   version=2.0</span><br><span class="line">[root@master ~]# kubectl get pod -n dev -l version!=2.0 --show-labels</span><br><span class="line">No resources found in dev namespace.</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">åˆ é™¤æ ‡ç­¾</span></span><br><span class="line">[root@master ~]# kubectl label pod nginx-pod version- -n dev</span><br><span class="line">pod/nginx-pod labeled</span><br></pre></td></tr></table></figure><p><strong>é…ç½®æ–¹å¼</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">version:</span> <span class="string">&quot;3.0&quot;</span> </span><br><span class="line">    <span class="attr">env:</span> <span class="string">&quot;test&quot;</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">image:</span> <span class="string">nginx:latest</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">pod</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx-port</span></span><br><span class="line">      <span class="attr">containerPort:</span> <span class="number">80</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">TCP</span></span><br></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥æ‰§è¡Œå¯¹åº”çš„æ›´æ–°å‘½ä»¤äº†ï¼škubectl apply -f pod-nginx.yaml</p><h2 id="4-4-Deployment"><a href="#4-4-Deployment" class="headerlink" title="4.4 Deployment"></a>4.4 Deployment</h2><p>åœ¨kubernetesä¸­ï¼ŒPodæ˜¯æœ€å°çš„æ§åˆ¶å•å…ƒï¼Œä½†æ˜¯kuberneteså¾ˆå°‘ç›´æ¥æ§åˆ¶Podï¼Œä¸€èˆ¬éƒ½æ˜¯é€šè¿‡Podæ§åˆ¶å™¨æ¥å®Œæˆçš„ã€‚Podæ§åˆ¶å™¨ç”¨äºpodçš„ç®¡ç†ï¼Œç¡®ä¿podèµ„æºç¬¦åˆé¢„æœŸçš„çŠ¶æ€ï¼Œå½“podçš„èµ„æºå‡ºç°æ•…éšœæ—¶ï¼Œä¼šå°è¯•è¿›è¡Œé‡å¯æˆ–é‡å»ºpodã€‚</p><p>åœ¨kubernetesä¸­Podæ§åˆ¶å™¨çš„ç§ç±»æœ‰å¾ˆå¤šï¼Œæœ¬ç« èŠ‚åªä»‹ç»ä¸€ç§ï¼šDeploymentã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200408193950807.png" alt="image-20200408193950807"></p><p><strong>å‘½ä»¤æ“ä½œ</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‘½ä»¤æ ¼å¼: kubectl create deployment åç§°  [å‚æ•°]</span> </span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--image  æŒ‡å®špodçš„é•œåƒ</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--port   æŒ‡å®šç«¯å£</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--replicas  æŒ‡å®šåˆ›å»ºpodæ•°é‡</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">--namespace  æŒ‡å®šnamespace</span></span><br><span class="line">[root@master ~]# kubectl create deploy nginx --image=nginx:latest --port=80 --replicas=3 -n dev</span><br><span class="line">deployment.apps/nginx created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹åˆ›å»ºçš„Pod</span></span><br><span class="line">[root@master ~]# kubectl get pods -n dev</span><br><span class="line">NAME                     READY   STATUS    RESTARTS   AGE</span><br><span class="line">nginx-5ff7956ff6-6k8cb   1/1     Running   0          19s</span><br><span class="line">nginx-5ff7956ff6-jxfjt   1/1     Running   0          19s</span><br><span class="line">nginx-5ff7956ff6-v6jqw   1/1     Running   0          19s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹deploymentçš„ä¿¡æ¯</span></span><br><span class="line">[root@master ~]# kubectl get deploy -n dev</span><br><span class="line">NAME    READY   UP-TO-DATE   AVAILABLE   AGE</span><br><span class="line">nginx   3/3     3            3           2m42s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">UP-TO-DATEï¼šæˆåŠŸå‡çº§çš„å‰¯æœ¬æ•°é‡</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">AVAILABLEï¼šå¯ç”¨å‰¯æœ¬çš„æ•°é‡</span></span><br><span class="line">[root@master ~]# kubectl get deploy -n dev -o wide</span><br><span class="line">NAME    READY UP-TO-DATE  AVAILABLE   AGE     CONTAINERS   IMAGES              SELECTOR</span><br><span class="line">nginx   3/3     3         3           2m51s   nginx        nginx:latest        run=nginx</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹deploymentçš„è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">[root@master ~]# kubectl describe deploy nginx -n dev</span><br><span class="line">Name:                   nginx</span><br><span class="line">Namespace:              dev</span><br><span class="line">CreationTimestamp:      Wed, 08 May 2021 11:14:14 +0800</span><br><span class="line">Labels:                 run=nginx</span><br><span class="line">Annotations:            deployment.kubernetes.io/revision: 1</span><br><span class="line">Selector:               run=nginx</span><br><span class="line">Replicas:               3 desired | 3 updated | 3 total | 3 available | 0 unavailable</span><br><span class="line">StrategyType:           RollingUpdate</span><br><span class="line">MinReadySeconds:        0</span><br><span class="line">RollingUpdateStrategy:  25% max unavailable, 25% max surge</span><br><span class="line">Pod Template:</span><br><span class="line">  Labels:  run=nginx</span><br><span class="line">  Containers:</span><br><span class="line">   nginx:</span><br><span class="line">    Image:        nginx:latest</span><br><span class="line">    Port:         80/TCP</span><br><span class="line">    Host Port:    0/TCP</span><br><span class="line">    Environment:  &lt;none&gt;</span><br><span class="line">    Mounts:       &lt;none&gt;</span><br><span class="line">  Volumes:        &lt;none&gt;</span><br><span class="line">Conditions:</span><br><span class="line">  Type           Status  Reason</span><br><span class="line">  ----           ------  ------</span><br><span class="line">  Available      True    MinimumReplicasAvailable</span><br><span class="line">  Progressing    True    NewReplicaSetAvailable</span><br><span class="line">OldReplicaSets:  &lt;none&gt;</span><br><span class="line">NewReplicaSet:   nginx-5ff7956ff6 (3/3 replicas created)</span><br><span class="line">Events:</span><br><span class="line">  Type    Reason             Age    From                   Message</span><br><span class="line">  ----    ------             ----   ----                   -------</span><br><span class="line">  Normal  ScalingReplicaSet  5m43s  deployment-controller  Scaled up replicaset nginx-5ff7956ff6 to 3</span><br><span class="line"><span class="meta prompt_">  </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤</span> </span><br><span class="line">[root@master ~]# kubectl delete deploy nginx -n dev</span><br><span class="line">deployment.apps &quot;nginx&quot; deleted</span><br></pre></td></tr></table></figure><p><strong>é…ç½®æ“ä½œ</strong></p><p>åˆ›å»ºä¸€ä¸ªdeploy-nginx.yamlï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">nginx</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">image:</span> <span class="string">nginx:latest</span></span><br><span class="line">        <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">80</span></span><br><span class="line">          <span class="attr">protocol:</span> <span class="string">TCP</span></span><br></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥æ‰§è¡Œå¯¹åº”çš„åˆ›å»ºå’Œåˆ é™¤å‘½ä»¤äº†ï¼š</p><p>åˆ›å»ºï¼škubectl create -f deploy-nginx.yaml</p><p>åˆ é™¤ï¼škubectl delete -f deploy-nginx.yaml</p><h2 id="4-5-Service"><a href="#4-5-Service" class="headerlink" title="4.5 Service"></a>4.5 Service</h2><p>é€šè¿‡ä¸ŠèŠ‚è¯¾çš„å­¦ä¹ ï¼Œå·²ç»èƒ½å¤Ÿåˆ©ç”¨Deploymentæ¥åˆ›å»ºä¸€ç»„Podæ¥æä¾›å…·æœ‰é«˜å¯ç”¨æ€§çš„æœåŠ¡ã€‚</p><p>è™½ç„¶æ¯ä¸ªPodéƒ½ä¼šåˆ†é…ä¸€ä¸ªå•ç‹¬çš„Pod IPï¼Œç„¶è€Œå´å­˜åœ¨å¦‚ä¸‹ä¸¤é—®é¢˜ï¼š</p><ul><li>Pod IP ä¼šéšç€Podçš„é‡å»ºäº§ç”Ÿå˜åŒ–</li><li>Pod IP ä»…ä»…æ˜¯é›†ç¾¤å†…å¯è§çš„è™šæ‹ŸIPï¼Œå¤–éƒ¨æ— æ³•è®¿é—®</li></ul><p>è¿™æ ·å¯¹äºè®¿é—®è¿™ä¸ªæœåŠ¡å¸¦æ¥äº†éš¾åº¦ã€‚å› æ­¤ï¼Œkubernetesè®¾è®¡äº†Serviceæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>Serviceå¯ä»¥çœ‹ä½œæ˜¯ä¸€ç»„åŒç±»Pod<strong>å¯¹å¤–çš„è®¿é—®æ¥å£</strong>ã€‚å€ŸåŠ©Serviceï¼Œåº”ç”¨å¯ä»¥æ–¹ä¾¿åœ°å®ç°æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200408194716912.png" alt="image-20200408194716912"></p><p><strong>æ“ä½œä¸€ï¼šåˆ›å»ºé›†ç¾¤å†…éƒ¨å¯è®¿é—®çš„Service</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æš´éœ²Service</span></span><br><span class="line">[root@master ~]# kubectl expose deploy nginx --name=svc-nginx1 --type=ClusterIP --port=80 --target-port=80 -n dev</span><br><span class="line">service/svc-nginx1 exposed</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹service</span></span><br><span class="line">[root@master ~]# kubectl get svc svc-nginx1 -n dev -o wide</span><br><span class="line">NAME         TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)   AGE     SELECTOR</span><br><span class="line">svc-nginx1   ClusterIP   10.109.179.231   &lt;none&gt;        80/TCP    3m51s   run=nginx</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¿™é‡Œäº§ç”Ÿäº†ä¸€ä¸ªCLUSTER-IPï¼Œè¿™å°±æ˜¯serviceçš„IPï¼Œåœ¨Serviceçš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œè¿™ä¸ªåœ°å€æ˜¯ä¸ä¼šå˜åŠ¨çš„</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¯ä»¥é€šè¿‡è¿™ä¸ªIPè®¿é—®å½“å‰serviceå¯¹åº”çš„POD</span></span><br><span class="line">[root@master ~]# curl 10.109.179.231:80</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;Welcome to nginx!&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;</span><br><span class="line">.......</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p><strong>æ“ä½œäºŒï¼šåˆ›å»ºé›†ç¾¤å¤–éƒ¨ä¹Ÿå¯è®¿é—®çš„Service</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸Šé¢åˆ›å»ºçš„Serviceçš„<span class="built_in">type</span>ç±»å‹ä¸ºClusterIPï¼Œè¿™ä¸ªipåœ°å€åªç”¨é›†ç¾¤å†…éƒ¨å¯è®¿é—®</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¦‚æœéœ€è¦åˆ›å»ºå¤–éƒ¨ä¹Ÿå¯ä»¥è®¿é—®çš„Serviceï¼Œéœ€è¦ä¿®æ”¹<span class="built_in">type</span>ä¸ºNodePort</span></span><br><span class="line">[root@master ~]# kubectl expose deploy nginx --name=svc-nginx2 --type=NodePort --port=80 --target-port=80 -n dev</span><br><span class="line">service/svc-nginx2 exposed</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ­¤æ—¶æŸ¥çœ‹ï¼Œä¼šå‘ç°å‡ºç°äº†NodePortç±»å‹çš„Serviceï¼Œè€Œä¸”æœ‰ä¸€å¯¹Portï¼ˆ80:31928/TCï¼‰</span></span><br><span class="line">[root@master ~]# kubectl get svc  svc-nginx2  -n dev -o wide</span><br><span class="line">NAME          TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)        AGE    SELECTOR</span><br><span class="line">svc-nginx2    NodePort    10.100.94.0      &lt;none&gt;        80:31928/TCP   9s     run=nginx</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ¥ä¸‹æ¥å°±å¯ä»¥é€šè¿‡é›†ç¾¤å¤–çš„ä¸»æœºè®¿é—® èŠ‚ç‚¹IP:31928è®¿é—®æœåŠ¡äº†</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¾‹å¦‚åœ¨çš„ç”µè„‘ä¸»æœºä¸Šé€šè¿‡æµè§ˆå™¨è®¿é—®ä¸‹é¢çš„åœ°å€</span></span><br><span class="line">http://192.168.5.4:31928/</span><br></pre></td></tr></table></figure><p><strong>åˆ é™¤Service</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl delete svc svc-nginx-1 -n dev service &quot;svc-nginx-1&quot; deleted</span><br></pre></td></tr></table></figure><p><strong>é…ç½®æ–¹å¼</strong></p><p>åˆ›å»ºä¸€ä¸ªsvc-nginx.yamlï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">svc-nginx</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">clusterIP:</span> <span class="number">10.109</span><span class="number">.179</span><span class="number">.231</span> <span class="comment">#å›ºå®šsvcçš„å†…ç½‘ip</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">TCP</span></span><br><span class="line">    <span class="attr">targetPort:</span> <span class="number">80</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">run:</span> <span class="string">nginx</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">ClusterIP</span></span><br></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥æ‰§è¡Œå¯¹åº”çš„åˆ›å»ºå’Œåˆ é™¤å‘½ä»¤äº†ï¼š</p><p>åˆ›å»ºï¼škubectl create -f svc-nginx.yaml</p><p>åˆ é™¤ï¼škubectl delete -f svc-nginx.yaml</p><blockquote><p><strong>å°ç»“</strong></p><p>è‡³æ­¤ï¼Œå·²ç»æŒæ¡äº†Namespaceã€Podã€Deploymentã€Serviceèµ„æºçš„åŸºæœ¬æ“ä½œï¼Œæœ‰äº†è¿™äº›æ“ä½œï¼Œå°±å¯ä»¥åœ¨kubernetesé›†ç¾¤ä¸­å®ç°ä¸€ä¸ªæœåŠ¡çš„ç®€å•éƒ¨ç½²å’Œè®¿é—®äº†ï¼Œä½†æ˜¯å¦‚æœæƒ³è¦æ›´å¥½çš„ä½¿ç”¨kubernetesï¼Œå°±éœ€è¦æ·±å…¥å­¦ä¹ è¿™å‡ ç§èµ„æºçš„ç»†èŠ‚å’ŒåŸç†ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Doc </category>
          
          <category> Kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kubernetes </tag>
            
            <tag> æ•™ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetesç¬”è®° 3</title>
      <link href="/2022/07/10/4da150d363da-q1jun/"/>
      <url>/2022/07/10/4da150d363da-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="3-èµ„æºç®¡ç†"><a href="#3-èµ„æºç®¡ç†" class="headerlink" title="3. èµ„æºç®¡ç†"></a>3. èµ„æºç®¡ç†</h1><h2 id="3-1-èµ„æºç®¡ç†ä»‹ç»"><a href="#3-1-èµ„æºç®¡ç†ä»‹ç»" class="headerlink" title="3.1 èµ„æºç®¡ç†ä»‹ç»"></a>3.1 èµ„æºç®¡ç†ä»‹ç»</h2><p>åœ¨kubernetesä¸­ï¼Œæ‰€æœ‰çš„å†…å®¹éƒ½æŠ½è±¡ä¸ºèµ„æºï¼Œç”¨æˆ·éœ€è¦é€šè¿‡æ“ä½œèµ„æºæ¥ç®¡ç†kubernetesã€‚</p><blockquote><p>kubernetesçš„æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªé›†ç¾¤ç³»ç»Ÿï¼Œç”¨æˆ·å¯ä»¥åœ¨é›†ç¾¤ä¸­éƒ¨ç½²å„ç§æœåŠ¡ï¼Œæ‰€è°“çš„éƒ¨ç½²æœåŠ¡ï¼Œå…¶å®å°±æ˜¯åœ¨kubernetesé›†ç¾¤ä¸­è¿è¡Œä¸€ä¸ªä¸ªçš„å®¹å™¨ï¼Œå¹¶å°†æŒ‡å®šçš„ç¨‹åºè·‘åœ¨å®¹å™¨ä¸­ã€‚</p><p>kubernetesçš„æœ€å°ç®¡ç†å•å…ƒæ˜¯podè€Œä¸æ˜¯å®¹å™¨ï¼Œæ‰€ä»¥åªèƒ½å°†å®¹å™¨æ”¾åœ¨<code>Pod</code>ä¸­ï¼Œè€Œkubernetesä¸€èˆ¬ä¹Ÿä¸ä¼šç›´æ¥ç®¡ç†Podï¼Œè€Œæ˜¯é€šè¿‡<code>Podæ§åˆ¶å™¨</code>æ¥ç®¡ç†Podçš„ã€‚</p><p>Podå¯ä»¥æä¾›æœåŠ¡ä¹‹åï¼Œå°±è¦è€ƒè™‘å¦‚ä½•è®¿é—®Podä¸­æœåŠ¡ï¼Œkubernetesæä¾›äº†<code>Service</code>èµ„æºå®ç°è¿™ä¸ªåŠŸèƒ½ã€‚</p><p>å½“ç„¶ï¼Œå¦‚æœPodä¸­ç¨‹åºçš„æ•°æ®éœ€è¦æŒä¹…åŒ–ï¼Œkubernetesè¿˜æä¾›äº†å„ç§<code>å­˜å‚¨</code>ç³»ç»Ÿã€‚</p></blockquote><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200406225334627.png" alt="image-20200406225334627"></p><blockquote><p>å­¦ä¹ kubernetesçš„æ ¸å¿ƒï¼Œå°±æ˜¯å­¦ä¹ å¦‚ä½•å¯¹é›†ç¾¤ä¸Šçš„<code>Podã€Podæ§åˆ¶å™¨ã€Serviceã€å­˜å‚¨</code>ç­‰å„ç§èµ„æºè¿›è¡Œæ“ä½œ</p></blockquote><h2 id="3-2-YAMLè¯­è¨€ä»‹ç»"><a href="#3-2-YAMLè¯­è¨€ä»‹ç»" class="headerlink" title="3.2 YAMLè¯­è¨€ä»‹ç»"></a>3.2 YAMLè¯­è¨€ä»‹ç»</h2><p>YAMLæ˜¯ä¸€ä¸ªç±»ä¼¼ XMLã€JSON çš„æ ‡è®°æ€§è¯­è¨€ã€‚å®ƒå¼ºè°ƒä»¥<strong>æ•°æ®</strong>ä¸ºä¸­å¿ƒï¼Œå¹¶ä¸æ˜¯ä»¥æ ‡è¯†è¯­è¨€ä¸ºé‡ç‚¹ã€‚å› è€ŒYAMLæœ¬èº«çš„å®šä¹‰æ¯”è¾ƒç®€å•ï¼Œå·ç§°â€ä¸€ç§äººæ€§åŒ–çš„æ•°æ®æ ¼å¼è¯­è¨€â€ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">heima</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">age</span>&gt;</span>15<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">address</span>&gt;</span>Beijing<span class="tag">&lt;/<span class="name">address</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">heima</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">heima:</span></span><br><span class="line"><span class="symbol">  age:</span> <span class="number">15</span></span><br><span class="line"><span class="symbol">  address:</span> Beijing</span><br></pre></td></tr></table></figure><p>YAMLçš„è¯­æ³•æ¯”è¾ƒç®€å•ï¼Œä¸»è¦æœ‰ä¸‹é¢å‡ ä¸ªï¼š</p><ul><li>å¤§å°å†™æ•æ„Ÿ</li><li>ä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»</li><li>ç¼©è¿›ä¸å…è®¸ä½¿ç”¨tabï¼Œåªå…è®¸ç©ºæ ¼( ä½ç‰ˆæœ¬é™åˆ¶ )</li><li>ç¼©è¿›çš„ç©ºæ ¼æ•°ä¸é‡è¦ï¼Œåªè¦ç›¸åŒå±‚çº§çš„å…ƒç´ å·¦å¯¹é½å³å¯</li><li>â€˜#â€™è¡¨ç¤ºæ³¨é‡Š</li></ul><p>YAMLæ”¯æŒä»¥ä¸‹å‡ ç§æ•°æ®ç±»å‹ï¼š</p><ul><li>çº¯é‡ï¼šå•ä¸ªçš„ã€ä¸å¯å†åˆ†çš„å€¼</li><li>å¯¹è±¡ï¼šé”®å€¼å¯¹çš„é›†åˆï¼Œåˆç§°ä¸ºæ˜ å°„ï¼ˆmappingï¼‰&#x2F; å“ˆå¸Œï¼ˆhashï¼‰ &#x2F; å­—å…¸ï¼ˆdictionaryï¼‰</li><li>æ•°ç»„ï¼šä¸€ç»„æŒ‰æ¬¡åºæ’åˆ—çš„å€¼ï¼Œåˆç§°ä¸ºåºåˆ—ï¼ˆsequenceï¼‰ &#x2F; åˆ—è¡¨ï¼ˆlistï¼‰</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># çº¯é‡, å°±æ˜¯æŒ‡çš„ä¸€ä¸ªç®€å•çš„å€¼ï¼Œå­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ã€æ•´æ•°ã€æµ®ç‚¹æ•°ã€Nullã€æ—¶é—´ã€æ—¥æœŸ</span></span><br><span class="line"><span class="comment"># 1 å¸ƒå°”ç±»å‹</span></span><br><span class="line"><span class="attr">c1:</span> <span class="literal">true</span> <span class="string">(æˆ–è€…True)</span></span><br><span class="line"><span class="comment"># 2 æ•´å‹</span></span><br><span class="line"><span class="attr">c2:</span> <span class="number">234</span></span><br><span class="line"><span class="comment"># 3 æµ®ç‚¹å‹</span></span><br><span class="line"><span class="attr">c3:</span> <span class="number">3.14</span></span><br><span class="line"><span class="comment"># 4 nullç±»å‹ </span></span><br><span class="line"><span class="attr">c4:</span> <span class="string">~</span>  <span class="comment"># ä½¿ç”¨~è¡¨ç¤ºnull</span></span><br><span class="line"><span class="comment"># 5 æ—¥æœŸç±»å‹</span></span><br><span class="line"><span class="attr">c5:</span> <span class="number">2018-02-17</span>    <span class="comment"># æ—¥æœŸå¿…é¡»ä½¿ç”¨ISO 8601æ ¼å¼ï¼Œå³yyyy-MM-dd</span></span><br><span class="line"><span class="comment"># 6 æ—¶é—´ç±»å‹</span></span><br><span class="line"><span class="attr">c6:</span> <span class="number">2018-02-17T15:02:31+08:00</span>  <span class="comment"># æ—¶é—´ä½¿ç”¨ISO 8601æ ¼å¼ï¼Œæ—¶é—´å’Œæ—¥æœŸä¹‹é—´ä½¿ç”¨Tè¿æ¥ï¼Œæœ€åä½¿ç”¨+ä»£è¡¨æ—¶åŒº</span></span><br><span class="line"><span class="comment"># 7 å­—ç¬¦ä¸²ç±»å‹</span></span><br><span class="line"><span class="attr">c7:</span> <span class="string">heima</span>     <span class="comment"># ç®€å•å†™æ³•ï¼Œç›´æ¥å†™å€¼ , å¦‚æœå­—ç¬¦ä¸²ä¸­é—´æœ‰ç‰¹æ®Šå­—ç¬¦ï¼Œå¿…é¡»ä½¿ç”¨åŒå¼•å·æˆ–è€…å•å¼•å·åŒ…è£¹ </span></span><br><span class="line"><span class="attr">c8:</span> <span class="string">line1</span></span><br><span class="line">    <span class="string">line2</span>     <span class="comment"># å­—ç¬¦ä¸²è¿‡å¤šçš„æƒ…å†µå¯ä»¥æ‹†æˆå¤šè¡Œï¼Œæ¯ä¸€è¡Œä¼šè¢«è½¬åŒ–æˆä¸€ä¸ªç©ºæ ¼</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¹è±¡</span></span><br><span class="line"><span class="comment"># å½¢å¼ä¸€(æ¨è):</span></span><br><span class="line"><span class="attr">heima:</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">15</span></span><br><span class="line">  <span class="attr">address:</span> <span class="string">Beijing</span></span><br><span class="line"><span class="comment"># å½¢å¼äºŒ(äº†è§£):</span></span><br><span class="line"><span class="attr">heima:</span> &#123;<span class="attr">age:</span> <span class="number">15</span>,<span class="attr">address:</span> <span class="string">Beijing</span>&#125;</span><br></pre></td></tr></table></figure><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ•°ç»„</span></span><br><span class="line"><span class="comment"># å½¢å¼ä¸€(æ¨è):</span></span><br><span class="line"><span class="attribute">address</span><span class="punctuation">:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">é¡ºä¹‰</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">æ˜Œå¹³  </span></span><br><span class="line"><span class="comment"># å½¢å¼äºŒ(äº†è§£):</span></span><br><span class="line"><span class="attribute">address</span><span class="punctuation">:</span> <span class="string">[é¡ºä¹‰,æ˜Œå¹³]</span></span><br></pre></td></tr></table></figure><blockquote><p>å°æç¤ºï¼š</p><p>1 ä¹¦å†™yamlåˆ‡è®°<code>:</code> åé¢è¦åŠ ä¸€ä¸ªç©ºæ ¼</p><p>2 å¦‚æœéœ€è¦å°†å¤šæ®µyamlé…ç½®æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œä¸­é—´è¦ä½¿ç”¨<code>---</code>åˆ†éš”</p><p>3 ä¸‹é¢æ˜¯ä¸€ä¸ªyamlè½¬jsonçš„ç½‘ç«™ï¼Œå¯ä»¥é€šè¿‡å®ƒéªŒè¯yamlæ˜¯å¦ä¹¦å†™æ­£ç¡®</p><p><a target="_blank" rel="noopener" href="https://www.json2yaml.com/convert-yaml-to-json">https://www.json2yaml.com/convert-yaml-to-json</a></p></blockquote><h2 id="3-3-èµ„æºç®¡ç†æ–¹å¼"><a href="#3-3-èµ„æºç®¡ç†æ–¹å¼" class="headerlink" title="3.3 èµ„æºç®¡ç†æ–¹å¼"></a>3.3 èµ„æºç®¡ç†æ–¹å¼</h2><ul><li><p>å‘½ä»¤å¼å¯¹è±¡ç®¡ç†ï¼šç›´æ¥ä½¿ç”¨å‘½ä»¤å»æ“ä½œkubernetesèµ„æº</p><p><code>kubectl run nginx-pod --image=nginx:1.17.1 --port=80</code></p></li><li><p>å‘½ä»¤å¼å¯¹è±¡é…ç½®ï¼šé€šè¿‡å‘½ä»¤é…ç½®å’Œé…ç½®æ–‡ä»¶å»æ“ä½œkubernetesèµ„æº</p><p><code>kubectl create/patch -f nginx-pod.yaml</code></p></li><li><p>å£°æ˜å¼å¯¹è±¡é…ç½®ï¼šé€šè¿‡applyå‘½ä»¤å’Œé…ç½®æ–‡ä»¶å»æ“ä½œkubernetesèµ„æº</p><p><code>kubectl apply -f nginx-pod.yaml</code></p></li></ul><table><thead><tr><th align="left">ç±»å‹</th><th align="left">æ“ä½œå¯¹è±¡</th><th align="left">é€‚ç”¨ç¯å¢ƒ</th><th align="left">ä¼˜ç‚¹</th><th align="left">ç¼ºç‚¹</th></tr></thead><tbody><tr><td align="left">å‘½ä»¤å¼å¯¹è±¡ç®¡ç†</td><td align="left">å¯¹è±¡</td><td align="left">æµ‹è¯•</td><td align="left">ç®€å•</td><td align="left">åªèƒ½æ“ä½œæ´»åŠ¨å¯¹è±¡ï¼Œæ— æ³•å®¡è®¡ã€è·Ÿè¸ª</td></tr><tr><td align="left">å‘½ä»¤å¼å¯¹è±¡é…ç½®</td><td align="left">æ–‡ä»¶</td><td align="left">å¼€å‘</td><td align="left">å¯ä»¥å®¡è®¡ã€è·Ÿè¸ª</td><td align="left">é¡¹ç›®å¤§æ—¶ï¼Œé…ç½®æ–‡ä»¶å¤šï¼Œæ“ä½œéº»çƒ¦</td></tr><tr><td align="left">å£°æ˜å¼å¯¹è±¡é…ç½®</td><td align="left">ç›®å½•</td><td align="left">å¼€å‘</td><td align="left">æ”¯æŒç›®å½•æ“ä½œ</td><td align="left">æ„å¤–æƒ…å†µä¸‹éš¾ä»¥è°ƒè¯•</td></tr></tbody></table><h3 id="3-3-1-å‘½ä»¤å¼å¯¹è±¡ç®¡ç†"><a href="#3-3-1-å‘½ä»¤å¼å¯¹è±¡ç®¡ç†" class="headerlink" title="3.3.1 å‘½ä»¤å¼å¯¹è±¡ç®¡ç†"></a>3.3.1 å‘½ä»¤å¼å¯¹è±¡ç®¡ç†</h3><p><strong>kubectlå‘½ä»¤</strong></p><p>kubectlæ˜¯kubernetesé›†ç¾¤çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œé€šè¿‡å®ƒèƒ½å¤Ÿå¯¹é›†ç¾¤æœ¬èº«è¿›è¡Œç®¡ç†ï¼Œå¹¶èƒ½å¤Ÿåœ¨é›†ç¾¤ä¸Šè¿›è¡Œå®¹å™¨åŒ–åº”ç”¨çš„å®‰è£…éƒ¨ç½²ã€‚kubectlå‘½ä»¤çš„è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl <span class="selector-attr">[command]</span> <span class="selector-attr">[type]</span> <span class="selector-attr">[name]</span> <span class="selector-attr">[flags]</span></span><br></pre></td></tr></table></figure><p><strong>comand</strong>ï¼šæŒ‡å®šè¦å¯¹èµ„æºæ‰§è¡Œçš„æ“ä½œï¼Œä¾‹å¦‚createã€getã€delete</p><p><strong>type</strong>ï¼šæŒ‡å®šèµ„æºç±»å‹ï¼Œæ¯”å¦‚deploymentã€podã€service</p><p><strong>name</strong>ï¼šæŒ‡å®šèµ„æºçš„åç§°ï¼Œåç§°å¤§å°å†™æ•æ„Ÿ</p><p><strong>flags</strong>ï¼šæŒ‡å®šé¢å¤–çš„å¯é€‰å‚æ•°</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æ‰€æœ‰pod</span></span><br><span class="line">kubectl get pod </span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æŸä¸ªpod</span></span><br><span class="line">kubectl get pod pod_name</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æŸä¸ªpod,ä»¥yamlæ ¼å¼å±•ç¤ºç»“æœ</span></span><br><span class="line">kubectl get pod pod_name -o yaml</span><br></pre></td></tr></table></figure><p><strong>èµ„æºç±»å‹</strong></p><p>kubernetesä¸­æ‰€æœ‰çš„å†…å®¹éƒ½æŠ½è±¡ä¸ºèµ„æºï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤è¿›è¡ŒæŸ¥çœ‹:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">kubectl api-resources</span></span><br></pre></td></tr></table></figure><p>ç»å¸¸ä½¿ç”¨çš„èµ„æºæœ‰ä¸‹é¢è¿™äº›ï¼š</p><table><thead><tr><th align="left">èµ„æºåˆ†ç±»</th><th align="left">èµ„æºåç§°</th><th align="left">ç¼©å†™</th><th align="left">èµ„æºä½œç”¨</th></tr></thead><tbody><tr><td align="left">é›†ç¾¤çº§åˆ«èµ„æº</td><td align="left">nodes</td><td align="left">no</td><td align="left">é›†ç¾¤ç»„æˆéƒ¨åˆ†</td></tr><tr><td align="left">namespaces</td><td align="left">ns</td><td align="left">éš”ç¦»Pod</td><td align="left"></td></tr><tr><td align="left">podèµ„æº</td><td align="left">pods</td><td align="left">po</td><td align="left">è£…è½½å®¹å™¨</td></tr><tr><td align="left">podèµ„æºæ§åˆ¶å™¨</td><td align="left">replicationcontrollers</td><td align="left">rc</td><td align="left">æ§åˆ¶podèµ„æº</td></tr><tr><td align="left"></td><td align="left">replicasets</td><td align="left">rs</td><td align="left">æ§åˆ¶podèµ„æº</td></tr><tr><td align="left"></td><td align="left">deployments</td><td align="left">deploy</td><td align="left">æ§åˆ¶podèµ„æº</td></tr><tr><td align="left"></td><td align="left">daemonsets</td><td align="left">ds</td><td align="left">æ§åˆ¶podèµ„æº</td></tr><tr><td align="left"></td><td align="left">jobs</td><td align="left"></td><td align="left">æ§åˆ¶podèµ„æº</td></tr><tr><td align="left"></td><td align="left">cronjobs</td><td align="left">cj</td><td align="left">æ§åˆ¶podèµ„æº</td></tr><tr><td align="left"></td><td align="left">horizontalpodautoscalers</td><td align="left">hpa</td><td align="left">æ§åˆ¶podèµ„æº</td></tr><tr><td align="left"></td><td align="left">statefulsets</td><td align="left">sts</td><td align="left">æ§åˆ¶podèµ„æº</td></tr><tr><td align="left">æœåŠ¡å‘ç°èµ„æº</td><td align="left">services</td><td align="left">svc</td><td align="left">ç»Ÿä¸€podå¯¹å¤–æ¥å£</td></tr><tr><td align="left"></td><td align="left">ingress</td><td align="left">ing</td><td align="left">ç»Ÿä¸€podå¯¹å¤–æ¥å£</td></tr><tr><td align="left">å­˜å‚¨èµ„æº</td><td align="left">volumeattachments</td><td align="left"></td><td align="left">å­˜å‚¨</td></tr><tr><td align="left"></td><td align="left">persistentvolumes</td><td align="left">pv</td><td align="left">å­˜å‚¨</td></tr><tr><td align="left"></td><td align="left">persistentvolumeclaims</td><td align="left">pvc</td><td align="left">å­˜å‚¨</td></tr><tr><td align="left">é…ç½®èµ„æº</td><td align="left">configmaps</td><td align="left">cm</td><td align="left">é…ç½®</td></tr><tr><td align="left"></td><td align="left">secrets</td><td align="left"></td><td align="left">é…ç½®</td></tr></tbody></table><p><strong>æ“ä½œ</strong></p><p>kuberneteså…è®¸å¯¹èµ„æºè¿›è¡Œå¤šç§æ“ä½œï¼Œå¯ä»¥é€šè¿‡â€“helpæŸ¥çœ‹è¯¦ç»†çš„æ“ä½œå‘½ä»¤</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl <span class="comment">--help</span></span><br></pre></td></tr></table></figure><p>ç»å¸¸ä½¿ç”¨çš„æ“ä½œæœ‰ä¸‹é¢è¿™äº›ï¼š</p><table><thead><tr><th align="left">å‘½ä»¤åˆ†ç±»</th><th align="left">å‘½ä»¤</th><th align="left">ç¿»è¯‘</th><th align="left">å‘½ä»¤ä½œç”¨</th></tr></thead><tbody><tr><td align="left">åŸºæœ¬å‘½ä»¤</td><td align="left">create</td><td align="left">åˆ›å»º</td><td align="left">åˆ›å»ºä¸€ä¸ªèµ„æº</td></tr><tr><td align="left"></td><td align="left">edit</td><td align="left">ç¼–è¾‘</td><td align="left">ç¼–è¾‘ä¸€ä¸ªèµ„æº</td></tr><tr><td align="left"></td><td align="left">get</td><td align="left">è·å–</td><td align="left">è·å–ä¸€ä¸ªèµ„æº</td></tr><tr><td align="left"></td><td align="left">patch</td><td align="left">æ›´æ–°</td><td align="left">æ›´æ–°ä¸€ä¸ªèµ„æº</td></tr><tr><td align="left"></td><td align="left">delete</td><td align="left">åˆ é™¤</td><td align="left">åˆ é™¤ä¸€ä¸ªèµ„æº</td></tr><tr><td align="left"></td><td align="left">explain</td><td align="left">è§£é‡Š</td><td align="left">å±•ç¤ºèµ„æºæ–‡æ¡£</td></tr><tr><td align="left">è¿è¡Œå’Œè°ƒè¯•</td><td align="left">run</td><td align="left">è¿è¡Œ</td><td align="left">åœ¨é›†ç¾¤ä¸­è¿è¡Œä¸€ä¸ªæŒ‡å®šçš„é•œåƒ</td></tr><tr><td align="left"></td><td align="left">expose</td><td align="left">æš´éœ²</td><td align="left">æš´éœ²èµ„æºä¸ºService</td></tr><tr><td align="left"></td><td align="left">describe</td><td align="left">æè¿°</td><td align="left">æ˜¾ç¤ºèµ„æºå†…éƒ¨ä¿¡æ¯</td></tr><tr><td align="left"></td><td align="left">logs</td><td align="left">æ—¥å¿—è¾“å‡ºå®¹å™¨åœ¨ pod ä¸­çš„æ—¥å¿—</td><td align="left">è¾“å‡ºå®¹å™¨åœ¨ pod ä¸­çš„æ—¥å¿—</td></tr><tr><td align="left"></td><td align="left">attach</td><td align="left">ç¼ ç»•è¿›å…¥è¿è¡Œä¸­çš„å®¹å™¨</td><td align="left">è¿›å…¥è¿è¡Œä¸­çš„å®¹å™¨</td></tr><tr><td align="left"></td><td align="left">exec</td><td align="left">æ‰§è¡Œå®¹å™¨ä¸­çš„ä¸€ä¸ªå‘½ä»¤</td><td align="left">æ‰§è¡Œå®¹å™¨ä¸­çš„ä¸€ä¸ªå‘½ä»¤</td></tr><tr><td align="left"></td><td align="left">cp</td><td align="left">å¤åˆ¶</td><td align="left">åœ¨Podå†…å¤–å¤åˆ¶æ–‡ä»¶</td></tr><tr><td align="left"></td><td align="left">rollout</td><td align="left">é¦–æ¬¡å±•ç¤º</td><td align="left">ç®¡ç†èµ„æºçš„å‘å¸ƒ</td></tr><tr><td align="left"></td><td align="left">scale</td><td align="left">è§„æ¨¡</td><td align="left">æ‰©(ç¼©)å®¹Podçš„æ•°é‡</td></tr><tr><td align="left"></td><td align="left">autoscale</td><td align="left">è‡ªåŠ¨è°ƒæ•´</td><td align="left">è‡ªåŠ¨è°ƒæ•´Podçš„æ•°é‡</td></tr><tr><td align="left">é«˜çº§å‘½ä»¤</td><td align="left">apply</td><td align="left">rc</td><td align="left">é€šè¿‡æ–‡ä»¶å¯¹èµ„æºè¿›è¡Œé…ç½®</td></tr><tr><td align="left"></td><td align="left">label</td><td align="left">æ ‡ç­¾</td><td align="left">æ›´æ–°èµ„æºä¸Šçš„æ ‡ç­¾</td></tr><tr><td align="left">å…¶ä»–å‘½ä»¤</td><td align="left">cluster-info</td><td align="left">é›†ç¾¤ä¿¡æ¯</td><td align="left">æ˜¾ç¤ºé›†ç¾¤ä¿¡æ¯</td></tr><tr><td align="left"></td><td align="left">version</td><td align="left">ç‰ˆæœ¬</td><td align="left">æ˜¾ç¤ºå½“å‰Serverå’ŒClientçš„ç‰ˆæœ¬</td></tr></tbody></table><p>ä¸‹é¢ä»¥ä¸€ä¸ªnamespace &#x2F; podçš„åˆ›å»ºå’Œåˆ é™¤ç®€å•æ¼”ç¤ºä¸‹å‘½ä»¤çš„ä½¿ç”¨ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ›å»ºä¸€ä¸ªnamespace</span></span><br><span class="line">[root@master ~]# kubectl create namespace dev</span><br><span class="line">namespace/dev created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è·å–namespace</span></span><br><span class="line">[root@master ~]# kubectl get ns</span><br><span class="line">NAME              STATUS   AGE</span><br><span class="line">default           Active   21h</span><br><span class="line">dev               Active   21s</span><br><span class="line">kube-node-lease   Active   21h</span><br><span class="line">kube-public       Active   21h</span><br><span class="line">kube-system       Active   21h</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœ¨æ­¤namespaceä¸‹åˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªnginxçš„Pod</span></span><br><span class="line">[root@master ~]# kubectl run pod --image=nginx:latest -n dev</span><br><span class="line">kubectl run --generator=deployment/apps.v1 is DEPRECATED and will be removed in a future version. Use kubectl run --generator=run-pod/v1 or kubectl create instead.</span><br><span class="line">deployment.apps/pod created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æ–°åˆ›å»ºçš„pod</span></span><br><span class="line">[root@master ~]# kubectl get pod -n dev</span><br><span class="line">NAME  READY   STATUS    RESTARTS   AGE</span><br><span class="line">pod   1/1     Running   0          21s</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤æŒ‡å®šçš„pod</span></span><br><span class="line">[root@master ~]# kubectl delete pod pod-864f9875b9-pcw7x</span><br><span class="line">pod &quot;pod&quot; deleted</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆ é™¤æŒ‡å®šçš„namespace</span></span><br><span class="line">[root@master ~]# kubectl delete ns dev</span><br><span class="line">namespace &quot;dev&quot; deleted</span><br></pre></td></tr></table></figure><h3 id="3-3-2-å‘½ä»¤å¼å¯¹è±¡é…ç½®"><a href="#3-3-2-å‘½ä»¤å¼å¯¹è±¡é…ç½®" class="headerlink" title="3.3.2 å‘½ä»¤å¼å¯¹è±¡é…ç½®"></a>3.3.2 å‘½ä»¤å¼å¯¹è±¡é…ç½®</h3><p>å‘½ä»¤å¼å¯¹è±¡é…ç½®å°±æ˜¯ä½¿ç”¨å‘½ä»¤é…åˆé…ç½®æ–‡ä»¶ä¸€èµ·æ¥æ“ä½œkubernetesèµ„æºã€‚</p><p>1ï¼‰ åˆ›å»ºä¸€ä¸ªnginxpod.yamlï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Namespace</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">dev</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Pod</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nginxpod</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">containers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx-containers</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx:latest</span></span><br></pre></td></tr></table></figure><p>2ï¼‰æ‰§è¡Œcreateå‘½ä»¤ï¼Œåˆ›å»ºèµ„æºï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">root@master</span> <span class="string">~</span>]<span class="comment"># kubectl create -f nginxpod.yaml</span></span><br><span class="line"><span class="string">namespace/dev</span> <span class="string">created</span></span><br><span class="line"><span class="string">pod/nginxpod</span> <span class="string">created</span></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å‘ç°åˆ›å»ºäº†ä¸¤ä¸ªèµ„æºå¯¹è±¡ï¼Œåˆ†åˆ«æ˜¯namespaceå’Œpod</p><p>3ï¼‰æ‰§è¡Œgetå‘½ä»¤ï¼ŒæŸ¥çœ‹èµ„æºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]#  kubectl get -f nginxpod.yaml</span><br><span class="line">NAME            STATUS   AGE</span><br><span class="line">namespace/dev   Active   18s</span><br><span class="line"></span><br><span class="line">NAME            READY   STATUS    RESTARTS   AGE</span><br><span class="line">pod/nginxpod    1/1     Running   0          17s</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±æ˜¾ç¤ºäº†ä¸¤ä¸ªèµ„æºå¯¹è±¡çš„ä¿¡æ¯</p><p>4ï¼‰æ‰§è¡Œdeleteå‘½ä»¤ï¼Œåˆ é™¤èµ„æºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@master ~]# kubectl delete -f nginxpod.yaml</span><br><span class="line">namespace &quot;dev&quot; deleted</span><br><span class="line">pod &quot;nginxpod&quot; deleted</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å‘ç°ä¸¤ä¸ªèµ„æºå¯¹è±¡è¢«åˆ é™¤äº†</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">æ€»ç»“:</span></span><br><span class="line">    å‘½ä»¤å¼å¯¹è±¡é…ç½®çš„æ–¹å¼æ“ä½œèµ„æºï¼Œå¯ä»¥ç®€å•çš„è®¤ä¸ºï¼šå‘½ä»¤  +  yamlé…ç½®æ–‡ä»¶ï¼ˆé‡Œé¢æ˜¯å‘½ä»¤éœ€è¦çš„å„ç§å‚æ•°ï¼‰</span><br></pre></td></tr></table></figure><h3 id="3-3-3-å£°æ˜å¼å¯¹è±¡é…ç½®"><a href="#3-3-3-å£°æ˜å¼å¯¹è±¡é…ç½®" class="headerlink" title="3.3.3 å£°æ˜å¼å¯¹è±¡é…ç½®"></a>3.3.3 å£°æ˜å¼å¯¹è±¡é…ç½®</h3><p>å£°æ˜å¼å¯¹è±¡é…ç½®è·Ÿå‘½ä»¤å¼å¯¹è±¡é…ç½®å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯å®ƒåªæœ‰ä¸€ä¸ªå‘½ä»¤applyã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é¦–å…ˆæ‰§è¡Œä¸€æ¬¡kubectl apply -f yamlæ–‡ä»¶ï¼Œå‘ç°åˆ›å»ºäº†èµ„æº</span></span><br><span class="line">[root@master ~]#  kubectl apply -f nginxpod.yaml</span><br><span class="line">namespace/dev created</span><br><span class="line">pod/nginxpod created</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å†æ¬¡æ‰§è¡Œä¸€æ¬¡kubectl apply -f yamlæ–‡ä»¶ï¼Œå‘ç°è¯´èµ„æºæ²¡æœ‰å˜åŠ¨</span></span><br><span class="line">[root@master ~]#  kubectl apply -f nginxpod.yaml</span><br><span class="line">namespace/dev unchanged</span><br><span class="line">pod/nginxpod unchanged</span><br></pre></td></tr></table></figure><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ€»ç»“:</span><br><span class="line">    å…¶å®å£°æ˜å¼å¯¹è±¡é…ç½®å°±æ˜¯ä½¿ç”¨<span class="built_in">apply</span>æè¿°ä¸€ä¸ªèµ„æºæœ€ç»ˆçš„çŠ¶æ€ï¼ˆåœ¨yamlä¸­å®šä¹‰çŠ¶æ€ï¼‰</span><br><span class="line">    ä½¿ç”¨<span class="built_in">apply</span>æ“ä½œèµ„æºï¼š</span><br><span class="line">        å¦‚æœèµ„æºä¸å­˜åœ¨ï¼Œå°±åˆ›å»ºï¼Œç›¸å½“äº kubectl create</span><br><span class="line">        å¦‚æœèµ„æºå·²å­˜åœ¨ï¼Œå°±æ›´æ–°ï¼Œç›¸å½“äº kubectl patch</span><br></pre></td></tr></table></figure><blockquote><p>æ‰©å±•ï¼škubectlå¯ä»¥åœ¨nodeèŠ‚ç‚¹ä¸Šè¿è¡Œå— ?</p></blockquote><p>kubectlçš„è¿è¡Œæ˜¯éœ€è¦è¿›è¡Œé…ç½®çš„ï¼Œå®ƒçš„é…ç½®æ–‡ä»¶æ˜¯$HOME&#x2F;.kubeï¼Œå¦‚æœæƒ³è¦åœ¨nodeèŠ‚ç‚¹è¿è¡Œæ­¤å‘½ä»¤ï¼Œéœ€è¦å°†masterä¸Šçš„.kubeæ–‡ä»¶å¤åˆ¶åˆ°nodeèŠ‚ç‚¹ä¸Šï¼Œå³åœ¨masterèŠ‚ç‚¹ä¸Šæ‰§è¡Œä¸‹é¢æ“ä½œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp  -r  HOME/.kube   node1: HOME/</span><br></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨æ¨è: ä¸‰ç§æ–¹å¼åº”è¯¥æ€ä¹ˆç”¨ ?</p></blockquote><p>åˆ›å»º&#x2F;æ›´æ–°èµ„æº ä½¿ç”¨å£°æ˜å¼å¯¹è±¡é…ç½® kubectl apply -f XXX.yaml</p><p>åˆ é™¤èµ„æº ä½¿ç”¨å‘½ä»¤å¼å¯¹è±¡é…ç½® kubectl delete -f XXX.yaml</p><p>æŸ¥è¯¢èµ„æº ä½¿ç”¨å‘½ä»¤å¼å¯¹è±¡ç®¡ç† kubectl get(describe) èµ„æºåç§°</p>]]></content>
      
      
      <categories>
          
          <category> Doc </category>
          
          <category> Kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kubernetes </tag>
            
            <tag> æ•™ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetesç¬”è®° 2</title>
      <link href="/2022/07/09/542779142553-q1jun/"/>
      <url>/2022/07/09/542779142553-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="2-kubernetesé›†ç¾¤ç¯å¢ƒæ­å»º"><a href="#2-kubernetesé›†ç¾¤ç¯å¢ƒæ­å»º" class="headerlink" title="2. kubernetesé›†ç¾¤ç¯å¢ƒæ­å»º"></a>2. kubernetesé›†ç¾¤ç¯å¢ƒæ­å»º</h1><h2 id="2-1-å‰ç½®çŸ¥è¯†ç‚¹"><a href="#2-1-å‰ç½®çŸ¥è¯†ç‚¹" class="headerlink" title="2.1 å‰ç½®çŸ¥è¯†ç‚¹"></a>2.1 å‰ç½®çŸ¥è¯†ç‚¹</h2><p>ç›®å‰ç”Ÿäº§éƒ¨ç½²Kubernetes é›†ç¾¤ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><p><strong>kubeadm</strong></p><p>Kubeadm æ˜¯ä¸€ä¸ªK8s éƒ¨ç½²å·¥å…·ï¼Œæä¾›kubeadm init å’Œkubeadm joinï¼Œç”¨äºå¿«é€Ÿéƒ¨ç½²Kubernetes é›†ç¾¤ã€‚</p><p>å®˜æ–¹åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm/">https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm/</a></p><p><strong>äºŒè¿›åˆ¶åŒ…</strong></p><p>ä»github ä¸‹è½½å‘è¡Œç‰ˆçš„äºŒè¿›åˆ¶åŒ…ï¼Œæ‰‹åŠ¨éƒ¨ç½²æ¯ä¸ªç»„ä»¶ï¼Œç»„æˆKubernetes é›†ç¾¤ã€‚</p><p>Kubeadm é™ä½éƒ¨ç½²é—¨æ§›ï¼Œä½†å±è”½äº†å¾ˆå¤šç»†èŠ‚ï¼Œé‡åˆ°é—®é¢˜å¾ˆéš¾æ’æŸ¥ã€‚å¦‚æœæƒ³æ›´å®¹æ˜“å¯æ§ï¼Œæ¨èä½¿ç”¨äºŒè¿›åˆ¶åŒ…éƒ¨ç½²Kubernetes é›†ç¾¤ï¼Œè™½ç„¶æ‰‹åŠ¨éƒ¨ç½²éº»çƒ¦ç‚¹ï¼ŒæœŸé—´å¯ä»¥å­¦ä¹ å¾ˆå¤šå·¥ä½œåŸç†ï¼Œä¹Ÿåˆ©äºåæœŸç»´æŠ¤ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200404094800622.png" alt="image-20200404094800622"></p><h2 id="2-2-kubeadm-éƒ¨ç½²æ–¹å¼ä»‹ç»"><a href="#2-2-kubeadm-éƒ¨ç½²æ–¹å¼ä»‹ç»" class="headerlink" title="2.2 kubeadm éƒ¨ç½²æ–¹å¼ä»‹ç»"></a>2.2 kubeadm éƒ¨ç½²æ–¹å¼ä»‹ç»</h2><p>kubeadm æ˜¯å®˜æ–¹ç¤¾åŒºæ¨å‡ºçš„ä¸€ä¸ªç”¨äºå¿«é€Ÿéƒ¨ç½²kubernetes é›†ç¾¤çš„å·¥å…·ï¼Œè¿™ä¸ªå·¥å…·èƒ½é€šè¿‡ä¸¤æ¡æŒ‡ä»¤å®Œæˆä¸€ä¸ªkubernetes é›†ç¾¤çš„éƒ¨ç½²ï¼š</p><ul><li>åˆ›å»ºä¸€ä¸ªMaster èŠ‚ç‚¹kubeadm init</li><li>å°†Node èŠ‚ç‚¹åŠ å…¥åˆ°å½“å‰é›†ç¾¤ä¸­$ kubeadm join &lt;Master èŠ‚ç‚¹çš„IP å’Œç«¯å£&gt;</li></ul><h2 id="2-3-å®‰è£…è¦æ±‚"><a href="#2-3-å®‰è£…è¦æ±‚" class="headerlink" title="2.3 å®‰è£…è¦æ±‚"></a>2.3 å®‰è£…è¦æ±‚</h2><p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œéƒ¨ç½²Kubernetes é›†ç¾¤æœºå™¨éœ€è¦æ»¡è¶³ä»¥ä¸‹å‡ ä¸ªæ¡ä»¶ï¼š</p><ul><li>ä¸€å°æˆ–å¤šå°æœºå™¨ï¼Œæ“ä½œç³»ç»ŸCentOS7.x-86_x64</li><li>ç¡¬ä»¶é…ç½®ï¼š2GB æˆ–æ›´å¤šRAMï¼Œ2 ä¸ªCPU æˆ–æ›´å¤šCPUï¼Œç¡¬ç›˜30GB æˆ–æ›´å¤š</li><li>é›†ç¾¤ä¸­æ‰€æœ‰æœºå™¨ä¹‹é—´ç½‘ç»œäº’é€š</li><li>å¯ä»¥è®¿é—®å¤–ç½‘ï¼Œéœ€è¦æ‹‰å–é•œåƒ</li><li>ç¦æ­¢swap åˆ†åŒº</li></ul><h2 id="2-4-æœ€ç»ˆç›®æ ‡"><a href="#2-4-æœ€ç»ˆç›®æ ‡" class="headerlink" title="2.4 æœ€ç»ˆç›®æ ‡"></a>2.4 æœ€ç»ˆç›®æ ‡</h2><ul><li>åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šå®‰è£…Docker å’Œkubeadm</li><li>éƒ¨ç½²Kubernetes Master</li><li>éƒ¨ç½²å®¹å™¨ç½‘ç»œæ’ä»¶</li><li>éƒ¨ç½²Kubernetes Nodeï¼Œå°†èŠ‚ç‚¹åŠ å…¥Kubernetes é›†ç¾¤ä¸­</li><li>éƒ¨ç½²Dashboard Web é¡µé¢ï¼Œå¯è§†åŒ–æŸ¥çœ‹Kubernetes èµ„æº</li></ul><h2 id="2-5-å‡†å¤‡ç¯å¢ƒ"><a href="#2-5-å‡†å¤‡ç¯å¢ƒ" class="headerlink" title="2.5 å‡†å¤‡ç¯å¢ƒ"></a>2.5 å‡†å¤‡ç¯å¢ƒ</h2><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20210609000002940.png" alt="image-20210609000002940"></p><table><thead><tr><th align="left">è§’è‰²</th><th align="left">IPåœ°å€</th><th align="left">ç»„ä»¶</th></tr></thead><tbody><tr><td align="left">k8s-master01</td><td align="left">192.168.5.3</td><td align="left">dockerï¼Œkubectlï¼Œkubeadmï¼Œkubelet</td></tr><tr><td align="left">k8s-node01</td><td align="left">192.168.5.4</td><td align="left">dockerï¼Œkubectlï¼Œkubeadmï¼Œkubelet</td></tr><tr><td align="left">k8s-node02</td><td align="left">192.168.5.5</td><td align="left">dockerï¼Œkubectlï¼Œkubeadmï¼Œkubelet</td></tr></tbody></table><h2 id="2-6-ç³»ç»Ÿåˆå§‹åŒ–"><a href="#2-6-ç³»ç»Ÿåˆå§‹åŒ–" class="headerlink" title="2.6 ç³»ç»Ÿåˆå§‹åŒ–"></a>2.6 ç³»ç»Ÿåˆå§‹åŒ–</h2><h3 id="2-6-1-è®¾ç½®ç³»ç»Ÿä¸»æœºåä»¥åŠ-Host-æ–‡ä»¶çš„ç›¸äº’è§£æ"><a href="#2-6-1-è®¾ç½®ç³»ç»Ÿä¸»æœºåä»¥åŠ-Host-æ–‡ä»¶çš„ç›¸äº’è§£æ" class="headerlink" title="2.6.1 è®¾ç½®ç³»ç»Ÿä¸»æœºåä»¥åŠ Host æ–‡ä»¶çš„ç›¸äº’è§£æ"></a>2.6.1 è®¾ç½®ç³»ç»Ÿä¸»æœºåä»¥åŠ Host æ–‡ä»¶çš„ç›¸äº’è§£æ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hostnamectl set-hostname k8s-master01 &amp;&amp; bash</span><br><span class="line">hostnamectl set-hostname k8s-node01 &amp;&amp; bash</span><br><span class="line">hostnamectl set-hostname k8s-node02 &amp;&amp; bash</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt;EOF&gt;&gt; /etc/hosts</span><br><span class="line">192.168.5.3     k8s-master01</span><br><span class="line">192.168.5.4     k8s-node01</span><br><span class="line">192.168.5.5     k8s-node02</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scp /etc/hosts root@192.168.5.4:/etc/hosts </span><br><span class="line">scp /etc/hosts root@192.168.5.5:/etc/hosts </span><br></pre></td></tr></table></figure><h3 id="2-6-2-å®‰è£…ä¾èµ–æ–‡ä»¶ï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰"><a href="#2-6-2-å®‰è£…ä¾èµ–æ–‡ä»¶ï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰" class="headerlink" title="2.6.2 å®‰è£…ä¾èµ–æ–‡ä»¶ï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰"></a>2.6.2 å®‰è£…ä¾èµ–æ–‡ä»¶ï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y conntrack ntpdate ntp ipvsadm ipset jq iptables curl sysstat libseccomp wget vim net-tools git</span><br></pre></td></tr></table></figure><h3 id="2-6-3-è®¾ç½®é˜²ç«å¢™ä¸º-Iptables-å¹¶è®¾ç½®ç©ºè§„åˆ™ï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰"><a href="#2-6-3-è®¾ç½®é˜²ç«å¢™ä¸º-Iptables-å¹¶è®¾ç½®ç©ºè§„åˆ™ï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰" class="headerlink" title="2.6.3 è®¾ç½®é˜²ç«å¢™ä¸º Iptables å¹¶è®¾ç½®ç©ºè§„åˆ™ï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰"></a>2.6.3 è®¾ç½®é˜²ç«å¢™ä¸º Iptables å¹¶è®¾ç½®ç©ºè§„åˆ™ï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld &amp;&amp; systemctl disable firewalld</span><br><span class="line"></span><br><span class="line">yum -y install iptables-services &amp;&amp; systemctl start iptables &amp;&amp; systemctl enable iptables &amp;&amp; iptables -F &amp;&amp; service iptables save</span><br></pre></td></tr></table></figure><h3 id="2-6-4-å…³é—­-SELINUXï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰"><a href="#2-6-4-å…³é—­-SELINUXï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰" class="headerlink" title="2.6.4 å…³é—­ SELINUXï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰"></a>2.6.4 å…³é—­ SELINUXï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">swapoff -a &amp;&amp; sed -i &#x27;/ swap / s/^\(.*\)$/#\1/g&#x27; /etc/fstab</span><br><span class="line"></span><br><span class="line">setenforce 0 &amp;&amp; sed -i &#x27;s/^SELINUX=.*/SELINUX=disabled/&#x27; /etc/selinux/config</span><br></pre></td></tr></table></figure><h3 id="2-6-5-è°ƒæ•´å†…æ ¸å‚æ•°ï¼Œå¯¹äº-K8Sï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰"><a href="#2-6-5-è°ƒæ•´å†…æ ¸å‚æ•°ï¼Œå¯¹äº-K8Sï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰" class="headerlink" title="2.6.5 è°ƒæ•´å†…æ ¸å‚æ•°ï¼Œå¯¹äº K8Sï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰"></a>2.6.5 è°ƒæ•´å†…æ ¸å‚æ•°ï¼Œå¯¹äº K8Sï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">modprobe br_netfilter</span><br><span class="line"></span><br><span class="line">cat &lt;&lt;EOF&gt; kubernetes.conf </span><br><span class="line">net.bridge.bridge-nf-call-iptables=1</span><br><span class="line">net.bridge.bridge-nf-call-ip6tables=1</span><br><span class="line">net.ipv4.ip_forward=1</span><br><span class="line">net.ipv4.tcp_tw_recycle=0</span><br><span class="line">vm.swappiness=0 # ç¦æ­¢ä½¿ç”¨ swap ç©ºé—´ï¼Œåªæœ‰å½“ç³»ç»Ÿ OOM æ—¶æ‰å…è®¸ä½¿ç”¨å®ƒ</span><br><span class="line">vm.overcommit_memory=1 # ä¸æ£€æŸ¥ç‰©ç†å†…å­˜æ˜¯å¦å¤Ÿç”¨</span><br><span class="line">vm.panic_on_oom=0 # å¼€å¯ OOM</span><br><span class="line">fs.inotify.max_user_instances=8192</span><br><span class="line">fs.inotify.max_user_watches=1048576</span><br><span class="line">fs.file-max=52706963</span><br><span class="line">fs.nr_open=52706963</span><br><span class="line">net.ipv6.conf.all.disable_ipv6=1</span><br><span class="line">net.netfilter.nf_conntrack_max=2310720</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">cp kubernetes.conf /etc/sysctl.d/kubernetes.conf</span><br><span class="line"></span><br><span class="line">sysctl -p /etc/sysctl.d/kubernetes.conf</span><br></pre></td></tr></table></figure><h3 id="2-6-6-è°ƒæ•´ç³»ç»Ÿæ—¶åŒºï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰"><a href="#2-6-6-è°ƒæ•´ç³»ç»Ÿæ—¶åŒºï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰" class="headerlink" title="2.6.6 è°ƒæ•´ç³»ç»Ÿæ—¶åŒºï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰"></a>2.6.6 è°ƒæ•´ç³»ç»Ÿæ—¶åŒºï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®ç³»ç»Ÿæ—¶åŒºä¸º ä¸­å›½/ä¸Šæµ·</span></span><br><span class="line">timedatectl set-timezone Asia/Shanghai</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°†å½“å‰çš„ UTC æ—¶é—´å†™å…¥ç¡¬ä»¶æ—¶é’Ÿ</span></span><br><span class="line">timedatectl set-local-rtc 0</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡å¯ä¾èµ–äºç³»ç»Ÿæ—¶é—´çš„æœåŠ¡</span></span><br><span class="line">systemctl restart rsyslog</span><br><span class="line">systemctl restart crond</span><br></pre></td></tr></table></figure><h3 id="2-6-7-è®¾ç½®-rsyslogd-å’Œ-systemd-journaldï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰"><a href="#2-6-7-è®¾ç½®-rsyslogd-å’Œ-systemd-journaldï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰" class="headerlink" title="2.6.7 è®¾ç½® rsyslogd å’Œ systemd journaldï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰"></a>2.6.7 è®¾ç½® rsyslogd å’Œ systemd journaldï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŒä¹…åŒ–ä¿å­˜æ—¥å¿—çš„ç›®å½•</span></span><br><span class="line">mkdir /var/log/journal </span><br><span class="line">mkdir /etc/systemd/journald.conf.d</span><br><span class="line">cat &gt; /etc/systemd/journald.conf.d/99-prophet.conf &lt;&lt;EOF</span><br><span class="line">[Journal]</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŒä¹…åŒ–ä¿å­˜åˆ°ç£ç›˜</span></span><br><span class="line">Storage=persistent</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å‹ç¼©å†å²æ—¥å¿—</span></span><br><span class="line">Compress=yes</span><br><span class="line"></span><br><span class="line">SyncIntervalSec=5m</span><br><span class="line">RateLimitInterval=30s</span><br><span class="line">RateLimitBurst=1000</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æœ€å¤§å ç”¨ç©ºé—´ 10G</span></span><br><span class="line">SystemMaxUse=10G</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å•æ—¥å¿—æ–‡ä»¶æœ€å¤§ 200M</span></span><br><span class="line">SystemMaxFileSize=200M</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ—¥å¿—ä¿å­˜æ—¶é—´ 2 å‘¨</span></span><br><span class="line">MaxRetentionSec=2week</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸å°†æ—¥å¿—è½¬å‘åˆ° syslog</span></span><br><span class="line">ForwardToSyslog=no</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">systemctl restart systemd-journald</span><br></pre></td></tr></table></figure><h3 id="2-6-8-kube-proxyå¼€å¯ipvsçš„å‰ç½®æ¡ä»¶ï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰"><a href="#2-6-8-kube-proxyå¼€å¯ipvsçš„å‰ç½®æ¡ä»¶ï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰" class="headerlink" title="2.6.8 kube-proxyå¼€å¯ipvsçš„å‰ç½®æ¡ä»¶ï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰"></a>2.6.8 kube-proxyå¼€å¯ipvsçš„å‰ç½®æ¡ä»¶ï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt;EOF&gt; /etc/sysconfig/modules/ipvs.modules </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">modprobe -- ip_vs</span><br><span class="line">modprobe -- ip_vs_rr</span><br><span class="line">modprobe -- ip_vs_wrr</span><br><span class="line">modprobe -- ip_vs_sh</span><br><span class="line">modprobe -- nf_conntrack_ipv4</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">chmod 755 /etc/sysconfig/modules/ipvs.modules &amp;&amp; bash /etc/sysconfig/modules/ipvs.modules &amp;&amp; lsmod | grep -e ip_vs -e nf_conntrack_ipv4</span><br></pre></td></tr></table></figure><h3 id="2-6-9-å®‰è£…-Docker-è½¯ä»¶ï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰"><a href="#2-6-9-å®‰è£…-Docker-è½¯ä»¶ï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰" class="headerlink" title="2.6.9 å®‰è£… Docker è½¯ä»¶ï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰"></a>2.6.9 å®‰è£… Docker è½¯ä»¶ï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class="line"></span><br><span class="line">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line"></span><br><span class="line">yum install -y docker-ce</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># åˆ›å»º /etc/docker ç›®å½•</span></span></span><br><span class="line">mkdir /etc/docker</span><br><span class="line"></span><br><span class="line">cat &gt; /etc/docker/daemon.json &lt;&lt;EOF</span><br><span class="line">&#123;</span><br><span class="line">&quot;exec-opts&quot;: [&quot;native.cgroupdriver=systemd&quot;],</span><br><span class="line">&quot;log-driver&quot;: &quot;json-file&quot;,</span><br><span class="line">&quot;log-opts&quot;: &#123;</span><br><span class="line">&quot;max-size&quot;: &quot;100m&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">mkdir -p /etc/systemd/system/docker.service.d</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡å¯dockeræœåŠ¡</span></span><br><span class="line">systemctl daemon-reload &amp;&amp; systemctl restart docker &amp;&amp; systemctl enable docker</span><br></pre></td></tr></table></figure><p>ä¸Šä¼ æ–‡ä»¶åˆ°<code>/etc/yum.repos.d/</code>ç›®å½•ä¸‹ï¼Œä¹Ÿå¯ä»¥ ä»£æ›¿ <code>yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</code> å‘½ä»¤</p><p>docker-ce.repo</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">[docker-ce-stable]</span><br><span class="line">name=Docker CE Stable - $basearch</span><br><span class="line">baseurl=https://mirrors.aliyun.com/docker-ce/linux/centos/$releasever/$basearch/stable</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=https://mirrors.aliyun.com/docker-ce/linux/centos/gpg</span><br><span class="line"></span><br><span class="line">[docker-ce-stable-debuginfo]</span><br><span class="line">name=Docker CE Stable - Debuginfo $basearch</span><br><span class="line">baseurl=https://mirrors.aliyun.com/docker-ce/linux/centos/$releasever/debug-$basearch/stable</span><br><span class="line">enabled=0</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=https://mirrors.aliyun.com/docker-ce/linux/centos/gpg</span><br><span class="line"></span><br><span class="line">[docker-ce-stable-source]</span><br><span class="line">name=Docker CE Stable - Sources</span><br><span class="line">baseurl=https://mirrors.aliyun.com/docker-ce/linux/centos/$releasever/source/stable</span><br><span class="line">enabled=0</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=https://mirrors.aliyun.com/docker-ce/linux/centos/gpg</span><br><span class="line"></span><br><span class="line">[docker-ce-test]</span><br><span class="line">name=Docker CE Test - $basearch</span><br><span class="line">baseurl=https://mirrors.aliyun.com/docker-ce/linux/centos/$releasever/$basearch/test</span><br><span class="line">enabled=0</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=https://mirrors.aliyun.com/docker-ce/linux/centos/gpg</span><br><span class="line"></span><br><span class="line">[docker-ce-test-debuginfo]</span><br><span class="line">name=Docker CE Test - Debuginfo $basearch</span><br><span class="line">baseurl=https://mirrors.aliyun.com/docker-ce/linux/centos/$releasever/debug-$basearch/test</span><br><span class="line">enabled=0</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=https://mirrors.aliyun.com/docker-ce/linux/centos/gpg</span><br><span class="line"></span><br><span class="line">[docker-ce-test-source]</span><br><span class="line">name=Docker CE Test - Sources</span><br><span class="line">baseurl=https://mirrors.aliyun.com/docker-ce/linux/centos/$releasever/source/test</span><br><span class="line">enabled=0</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=https://mirrors.aliyun.com/docker-ce/linux/centos/gpg</span><br><span class="line"></span><br><span class="line">[docker-ce-nightly]</span><br><span class="line">name=Docker CE Nightly - $basearch</span><br><span class="line">baseurl=https://mirrors.aliyun.com/docker-ce/linux/centos/$releasever/$basearch/nightly</span><br><span class="line">enabled=0</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=https://mirrors.aliyun.com/docker-ce/linux/centos/gpg</span><br><span class="line"></span><br><span class="line">[docker-ce-nightly-debuginfo]</span><br><span class="line">name=Docker CE Nightly - Debuginfo $basearch</span><br><span class="line">baseurl=https://mirrors.aliyun.com/docker-ce/linux/centos/$releasever/debug-$basearch/nightly</span><br><span class="line">enabled=0</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=https://mirrors.aliyun.com/docker-ce/linux/centos/gpg</span><br><span class="line"></span><br><span class="line">[docker-ce-nightly-source]</span><br><span class="line">name=Docker CE Nightly - Sources</span><br><span class="line">baseurl=https://mirrors.aliyun.com/docker-ce/linux/centos/$releasever/source/nightly</span><br><span class="line">enabled=0</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=https://mirrors.aliyun.com/docker-ce/linux/centos/gpg</span><br></pre></td></tr></table></figure><h3 id="2-6-10-å®‰è£…-Kubeadm-ï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰"><a href="#2-6-10-å®‰è£…-Kubeadm-ï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰" class="headerlink" title="2.6.10 å®‰è£… Kubeadm ï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰"></a>2.6.10 å®‰è£… Kubeadm ï¼ˆæ‰€æœ‰èŠ‚ç‚¹éƒ½è¦æ“ä½œï¼‰</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt;EOF &gt; /etc/yum.repos.d/kubernetes.repo</span><br><span class="line">[kubernetes]</span><br><span class="line">name=Kubernetes</span><br><span class="line">baseurl=http://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">repo_gpgcheck=0</span><br><span class="line">gpgkey=http://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg</span><br><span class="line">http://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg</span><br><span class="line">EOF</span><br><span class="line"></span><br><span class="line">yum install -y kubelet kubeadm kubectl &amp;&amp; systemctl enable kubelet</span><br></pre></td></tr></table></figure><h2 id="2-7-éƒ¨ç½²Kubernetes-Master"><a href="#2-7-éƒ¨ç½²Kubernetes-Master" class="headerlink" title="2.7 éƒ¨ç½²Kubernetes Master"></a>2.7 éƒ¨ç½²Kubernetes Master</h2><h3 id="2-7-1-åˆå§‹åŒ–ä¸»èŠ‚ç‚¹ï¼ˆä¸»èŠ‚ç‚¹æ“ä½œï¼‰"><a href="#2-7-1-åˆå§‹åŒ–ä¸»èŠ‚ç‚¹ï¼ˆä¸»èŠ‚ç‚¹æ“ä½œï¼‰" class="headerlink" title="2.7.1 åˆå§‹åŒ–ä¸»èŠ‚ç‚¹ï¼ˆä¸»èŠ‚ç‚¹æ“ä½œï¼‰"></a>2.7.1 åˆå§‹åŒ–ä¸»èŠ‚ç‚¹ï¼ˆä¸»èŠ‚ç‚¹æ“ä½œï¼‰</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">kubeadm init --apiserver-advertise-address=192.168.5.3 --image-repository registry.aliyuncs.com/google_containers --kubernetes-version v1.21.1 --service-cidr=10.96.0.0/12 --pod-network-cidr=10.244.0.0/16</span><br><span class="line"></span><br><span class="line">mkdir -p $HOME/.kube</span><br><span class="line"></span><br><span class="line">sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config</span><br><span class="line"></span><br><span class="line">sudo chown $(id -u):$(id -g) $HOME/.kube/config</span><br></pre></td></tr></table></figure><h3 id="2-7-2-åŠ å…¥ä¸»èŠ‚ç‚¹ä»¥åŠå…¶ä½™å·¥ä½œèŠ‚ç‚¹"><a href="#2-7-2-åŠ å…¥ä¸»èŠ‚ç‚¹ä»¥åŠå…¶ä½™å·¥ä½œèŠ‚ç‚¹" class="headerlink" title="2.7.2 åŠ å…¥ä¸»èŠ‚ç‚¹ä»¥åŠå…¶ä½™å·¥ä½œèŠ‚ç‚¹"></a>2.7.2 åŠ å…¥ä¸»èŠ‚ç‚¹ä»¥åŠå…¶ä½™å·¥ä½œèŠ‚ç‚¹</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kubeadm join 192.168.5.3:6443 --token h0uelc.l46qp29nxscke7f7 \</span><br><span class="line">        --discovery-token-ca-cert-hash sha256:abc807778e24bff73362ceeb783cc7f6feec96f20b4fd707c3f8e8312294e28f </span><br></pre></td></tr></table></figure><h3 id="2-7-3-éƒ¨ç½²ç½‘ç»œ"><a href="#2-7-3-éƒ¨ç½²ç½‘ç»œ" class="headerlink" title="2.7.3 éƒ¨ç½²ç½‘ç»œ"></a>2.7.3 éƒ¨ç½²ç½‘ç»œ</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml</span><br></pre></td></tr></table></figure><p>ä¸‹è¾¹æ˜¯æ–‡ä»¶</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">policy/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">PodSecurityPolicy</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">psp.flannel.unprivileged</span></span><br><span class="line">  <span class="attr">annotations:</span></span><br><span class="line">    <span class="attr">seccomp.security.alpha.kubernetes.io/allowedProfileNames:</span> <span class="string">docker/default</span></span><br><span class="line">    <span class="attr">seccomp.security.alpha.kubernetes.io/defaultProfileName:</span> <span class="string">docker/default</span></span><br><span class="line">    <span class="attr">apparmor.security.beta.kubernetes.io/allowedProfileNames:</span> <span class="string">runtime/default</span></span><br><span class="line">    <span class="attr">apparmor.security.beta.kubernetes.io/defaultProfileName:</span> <span class="string">runtime/default</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">privileged:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">volumes:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">configMap</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">secret</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">emptyDir</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hostPath</span></span><br><span class="line">  <span class="attr">allowedHostPaths:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">pathPrefix:</span> <span class="string">&quot;/etc/cni/net.d&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">pathPrefix:</span> <span class="string">&quot;/etc/kube-flannel&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">pathPrefix:</span> <span class="string">&quot;/run/flannel&quot;</span></span><br><span class="line">  <span class="attr">readOnlyRootFilesystem:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Users and groups</span></span><br><span class="line">  <span class="attr">runAsUser:</span></span><br><span class="line">    <span class="attr">rule:</span> <span class="string">RunAsAny</span></span><br><span class="line">  <span class="attr">supplementalGroups:</span></span><br><span class="line">    <span class="attr">rule:</span> <span class="string">RunAsAny</span></span><br><span class="line">  <span class="attr">fsGroup:</span></span><br><span class="line">    <span class="attr">rule:</span> <span class="string">RunAsAny</span></span><br><span class="line">  <span class="comment"># Privilege Escalation</span></span><br><span class="line">  <span class="attr">allowPrivilegeEscalation:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">defaultAllowPrivilegeEscalation:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Capabilities</span></span><br><span class="line">  <span class="attr">allowedCapabilities:</span> [<span class="string">&#x27;NET_ADMIN&#x27;</span>, <span class="string">&#x27;NET_RAW&#x27;</span>]</span><br><span class="line">  <span class="attr">defaultAddCapabilities:</span> []</span><br><span class="line">  <span class="attr">requiredDropCapabilities:</span> []</span><br><span class="line">  <span class="comment"># Host namespaces</span></span><br><span class="line">  <span class="attr">hostPID:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">hostIPC:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">hostNetwork:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">hostPorts:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">min:</span> <span class="number">0</span></span><br><span class="line">    <span class="attr">max:</span> <span class="number">65535</span></span><br><span class="line">  <span class="comment"># SELinux</span></span><br><span class="line">  <span class="attr">seLinux:</span></span><br><span class="line">    <span class="comment"># SELinux is unused in CaaSP</span></span><br><span class="line">    <span class="attr">rule:</span> <span class="string">&#x27;RunAsAny&#x27;</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">flannel</span></span><br><span class="line"><span class="attr">rules:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span> [<span class="string">&#x27;extensions&#x27;</span>]</span><br><span class="line">  <span class="attr">resources:</span> [<span class="string">&#x27;podsecuritypolicies&#x27;</span>]</span><br><span class="line">  <span class="attr">verbs:</span> [<span class="string">&#x27;use&#x27;</span>]</span><br><span class="line">  <span class="attr">resourceNames:</span> [<span class="string">&#x27;psp.flannel.unprivileged&#x27;</span>]</span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">pods</span></span><br><span class="line">  <span class="attr">verbs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">get</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">nodes</span></span><br><span class="line">  <span class="attr">verbs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">list</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">watch</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">apiGroups:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;&quot;</span></span><br><span class="line">  <span class="attr">resources:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">nodes/status</span></span><br><span class="line">  <span class="attr">verbs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">patch</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ClusterRoleBinding</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">rbac.authorization.k8s.io/v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">flannel</span></span><br><span class="line"><span class="attr">roleRef:</span></span><br><span class="line">  <span class="attr">apiGroup:</span> <span class="string">rbac.authorization.k8s.io</span></span><br><span class="line">  <span class="attr">kind:</span> <span class="string">ClusterRole</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">flannel</span></span><br><span class="line"><span class="attr">subjects:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">flannel</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">kube-system</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">flannel</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">kube-system</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">kube-flannel-cfg</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">kube-system</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">tier:</span> <span class="string">node</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">flannel</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">cni-conf.json:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">      &quot;name&quot;: &quot;cbr0&quot;,</span></span><br><span class="line"><span class="string">      &quot;cniVersion&quot;: &quot;0.3.1&quot;,</span></span><br><span class="line"><span class="string">      &quot;plugins&quot;: [</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">          &quot;type&quot;: &quot;flannel&quot;,</span></span><br><span class="line"><span class="string">          &quot;delegate&quot;: &#123;</span></span><br><span class="line"><span class="string">            &quot;hairpinMode&quot;: true,</span></span><br><span class="line"><span class="string">            &quot;isDefaultGateway&quot;: true</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">          &quot;type&quot;: &quot;portmap&quot;,</span></span><br><span class="line"><span class="string">          &quot;capabilities&quot;: &#123;</span></span><br><span class="line"><span class="string">            &quot;portMappings&quot;: true</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      ]</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string"></span>  <span class="attr">net-conf.json:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">      &quot;Network&quot;: &quot;10.244.0.0/16&quot;,</span></span><br><span class="line"><span class="string">      &quot;Backend&quot;: &#123;</span></span><br><span class="line"><span class="string">        &quot;Type&quot;: &quot;vxlan&quot;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string"></span><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">DaemonSet</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">kube-flannel-ds</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">kube-system</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">tier:</span> <span class="string">node</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">flannel</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">flannel</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">tier:</span> <span class="string">node</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">flannel</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">affinity:</span></span><br><span class="line">        <span class="attr">nodeAffinity:</span></span><br><span class="line">          <span class="attr">requiredDuringSchedulingIgnoredDuringExecution:</span></span><br><span class="line">            <span class="attr">nodeSelectorTerms:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="attr">matchExpressions:</span></span><br><span class="line">              <span class="bullet">-</span> <span class="attr">key:</span> <span class="string">kubernetes.io/os</span></span><br><span class="line">                <span class="attr">operator:</span> <span class="string">In</span></span><br><span class="line">                <span class="attr">values:</span></span><br><span class="line">                <span class="bullet">-</span> <span class="string">linux</span></span><br><span class="line">      <span class="attr">hostNetwork:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">priorityClassName:</span> <span class="string">system-node-critical</span></span><br><span class="line">      <span class="attr">tolerations:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">operator:</span> <span class="string">Exists</span></span><br><span class="line">        <span class="attr">effect:</span> <span class="string">NoSchedule</span></span><br><span class="line">      <span class="attr">serviceAccountName:</span> <span class="string">flannel</span></span><br><span class="line">      <span class="attr">initContainers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">install-cni</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">quay.io/coreos/flannel:v0.14.0</span></span><br><span class="line">        <span class="attr">command:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">cp</span></span><br><span class="line">        <span class="attr">args:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">-f</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">/etc/kube-flannel/cni-conf.json</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">/etc/cni/net.d/10-flannel.conflist</span></span><br><span class="line">        <span class="attr">volumeMounts:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">cni</span></span><br><span class="line">          <span class="attr">mountPath:</span> <span class="string">/etc/cni/net.d</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">flannel-cfg</span></span><br><span class="line">          <span class="attr">mountPath:</span> <span class="string">/etc/kube-flannel/</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">kube-flannel</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">quay.io/coreos/flannel:v0.14.0</span></span><br><span class="line">        <span class="attr">command:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">/opt/bin/flanneld</span></span><br><span class="line">        <span class="attr">args:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--ip-masq</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">--kube-subnet-mgr</span></span><br><span class="line">        <span class="attr">resources:</span></span><br><span class="line">          <span class="attr">requests:</span></span><br><span class="line">            <span class="attr">cpu:</span> <span class="string">&quot;100m&quot;</span></span><br><span class="line">            <span class="attr">memory:</span> <span class="string">&quot;50Mi&quot;</span></span><br><span class="line">          <span class="attr">limits:</span></span><br><span class="line">            <span class="attr">cpu:</span> <span class="string">&quot;100m&quot;</span></span><br><span class="line">            <span class="attr">memory:</span> <span class="string">&quot;50Mi&quot;</span></span><br><span class="line">        <span class="attr">securityContext:</span></span><br><span class="line">          <span class="attr">privileged:</span> <span class="literal">false</span></span><br><span class="line">          <span class="attr">capabilities:</span></span><br><span class="line">            <span class="attr">add:</span> [<span class="string">&quot;NET_ADMIN&quot;</span>, <span class="string">&quot;NET_RAW&quot;</span>]</span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">POD_NAME</span></span><br><span class="line">          <span class="attr">valueFrom:</span></span><br><span class="line">            <span class="attr">fieldRef:</span></span><br><span class="line">              <span class="attr">fieldPath:</span> <span class="string">metadata.name</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">POD_NAMESPACE</span></span><br><span class="line">          <span class="attr">valueFrom:</span></span><br><span class="line">            <span class="attr">fieldRef:</span></span><br><span class="line">              <span class="attr">fieldPath:</span> <span class="string">metadata.namespace</span></span><br><span class="line">        <span class="attr">volumeMounts:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">run</span></span><br><span class="line">          <span class="attr">mountPath:</span> <span class="string">/run/flannel</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">flannel-cfg</span></span><br><span class="line">          <span class="attr">mountPath:</span> <span class="string">/etc/kube-flannel/</span></span><br><span class="line">      <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">run</span></span><br><span class="line">        <span class="attr">hostPath:</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">/run/flannel</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">cni</span></span><br><span class="line">        <span class="attr">hostPath:</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">/etc/cni/net.d</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">flannel-cfg</span></span><br><span class="line">        <span class="attr">configMap:</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">kube-flannel-cfg</span></span><br></pre></td></tr></table></figure><h2 id="2-8-æµ‹è¯•kubernetes-é›†ç¾¤"><a href="#2-8-æµ‹è¯•kubernetes-é›†ç¾¤" class="headerlink" title="2.8 æµ‹è¯•kubernetes é›†ç¾¤"></a>2.8 æµ‹è¯•kubernetes é›†ç¾¤</h2><h3 id="2-8-1-éƒ¨ç½²nginx-æµ‹è¯•"><a href="#2-8-1-éƒ¨ç½²nginx-æµ‹è¯•" class="headerlink" title="2.8.1 éƒ¨ç½²nginx æµ‹è¯•"></a>2.8.1 éƒ¨ç½²nginx æµ‹è¯•</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kubectl create deployment nginx --image=nginx</span><br><span class="line"></span><br><span class="line">kubectl expose deployment nginx --port=80 --type=NodePort</span><br><span class="line"></span><br><span class="line">kubectl get pod,svc</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Doc </category>
          
          <category> Kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kubernetes </tag>
            
            <tag> æ•™ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kubernetesç¬”è®° 1</title>
      <link href="/2022/07/08/7b9731ed4624-q1jun/"/>
      <url>/2022/07/08/7b9731ed4624-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="1-Kubernetesä»‹ç»"><a href="#1-Kubernetesä»‹ç»" class="headerlink" title="1. Kubernetesä»‹ç»"></a>1. Kubernetesä»‹ç»</h1><h2 id="1-1-åº”ç”¨éƒ¨ç½²æ–¹å¼æ¼”å˜"><a href="#1-1-åº”ç”¨éƒ¨ç½²æ–¹å¼æ¼”å˜" class="headerlink" title="1.1 åº”ç”¨éƒ¨ç½²æ–¹å¼æ¼”å˜"></a>1.1 åº”ç”¨éƒ¨ç½²æ–¹å¼æ¼”å˜</h2><p>åœ¨éƒ¨ç½²åº”ç”¨ç¨‹åºçš„æ–¹å¼ä¸Šï¼Œä¸»è¦ç»å†äº†ä¸‰ä¸ªæ—¶ä»£ï¼š</p><ul><li><p><strong>ä¼ ç»Ÿéƒ¨ç½²</strong>ï¼šäº’è”ç½‘æ—©æœŸï¼Œä¼šç›´æ¥å°†åº”ç”¨ç¨‹åºéƒ¨ç½²åœ¨ç‰©ç†æœºä¸Š</p><blockquote><p>ä¼˜ç‚¹ï¼šç®€å•ï¼Œä¸éœ€è¦å…¶å®ƒæŠ€æœ¯çš„å‚ä¸</p><p>ç¼ºç‚¹ï¼šä¸èƒ½ä¸ºåº”ç”¨ç¨‹åºå®šä¹‰èµ„æºä½¿ç”¨è¾¹ç•Œï¼Œå¾ˆéš¾åˆç†åœ°åˆ†é…è®¡ç®—èµ„æºï¼Œè€Œä¸”ç¨‹åºä¹‹é—´å®¹æ˜“äº§ç”Ÿå½±å“</p></blockquote></li><li><p><strong>è™šæ‹ŸåŒ–éƒ¨ç½²</strong>ï¼šå¯ä»¥åœ¨ä¸€å°ç‰©ç†æœºä¸Šè¿è¡Œå¤šä¸ªè™šæ‹Ÿæœºï¼Œæ¯ä¸ªè™šæ‹Ÿæœºéƒ½æ˜¯ç‹¬ç«‹çš„ä¸€ä¸ªç¯å¢ƒ</p><blockquote><p>ä¼˜ç‚¹ï¼šç¨‹åºç¯å¢ƒä¸ä¼šç›¸äº’äº§ç”Ÿå½±å“ï¼Œæä¾›äº†ä¸€å®šç¨‹åº¦çš„å®‰å…¨æ€§</p><p>ç¼ºç‚¹ï¼šå¢åŠ äº†æ“ä½œç³»ç»Ÿï¼Œæµªè´¹äº†éƒ¨åˆ†èµ„æº</p></blockquote></li><li><p><strong>å®¹å™¨åŒ–éƒ¨ç½²</strong>ï¼šä¸è™šæ‹ŸåŒ–ç±»ä¼¼ï¼Œä½†æ˜¯å…±äº«äº†æ“ä½œç³»ç»Ÿ</p><blockquote><p>ä¼˜ç‚¹ï¼š</p><p>å¯ä»¥ä¿è¯æ¯ä¸ªå®¹å™¨æ‹¥æœ‰è‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿã€CPUã€å†…å­˜ã€è¿›ç¨‹ç©ºé—´ç­‰</p><p>è¿è¡Œåº”ç”¨ç¨‹åºæ‰€éœ€è¦çš„èµ„æºéƒ½è¢«å®¹å™¨åŒ…è£…ï¼Œå¹¶å’Œåº•å±‚åŸºç¡€æ¶æ„è§£è€¦</p><p>å®¹å™¨åŒ–çš„åº”ç”¨ç¨‹åºå¯ä»¥è·¨äº‘æœåŠ¡å•†ã€è·¨Linuxæ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆè¿›è¡Œéƒ¨ç½²</p></blockquote></li></ul><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200505183738289-20220719082713508.png" alt="image-20200505183738289"></p><p>å®¹å™¨åŒ–éƒ¨ç½²æ–¹å¼ç»™å¸¦æ¥å¾ˆå¤šçš„ä¾¿åˆ©ï¼Œä½†æ˜¯ä¹Ÿä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚è¯´ï¼š</p><ul><li>ä¸€ä¸ªå®¹å™¨æ•…éšœåœæœºäº†ï¼Œæ€ä¹ˆæ ·è®©å¦å¤–ä¸€ä¸ªå®¹å™¨ç«‹åˆ»å¯åŠ¨å»æ›¿è¡¥åœæœºçš„å®¹å™¨</li><li>å½“å¹¶å‘è®¿é—®é‡å˜å¤§çš„æ—¶å€™ï¼Œæ€ä¹ˆæ ·åšåˆ°æ¨ªå‘æ‰©å±•å®¹å™¨æ•°é‡</li></ul><p>è¿™äº›å®¹å™¨ç®¡ç†çš„é—®é¢˜ç»Ÿç§°ä¸º<strong>å®¹å™¨ç¼–æ’</strong>é—®é¢˜ï¼Œä¸ºäº†è§£å†³è¿™äº›å®¹å™¨ç¼–æ’é—®é¢˜ï¼Œå°±äº§ç”Ÿäº†ä¸€äº›å®¹å™¨ç¼–æ’çš„è½¯ä»¶ï¼š</p><ul><li><strong>Swarm</strong>ï¼šDockerè‡ªå·±çš„å®¹å™¨ç¼–æ’å·¥å…·</li><li><strong>Mesos</strong>ï¼šApacheçš„ä¸€ä¸ªèµ„æºç»Ÿä¸€ç®¡æ§çš„å·¥å…·ï¼Œéœ€è¦å’ŒMarathonç»“åˆä½¿ç”¨</li><li><strong>Kubernetes</strong>ï¼šGoogleå¼€æºçš„çš„å®¹å™¨ç¼–æ’å·¥å…·</li></ul><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200524150339551.png" alt="image-20200524150339551"></p><h2 id="1-2-kubernetesç®€ä»‹"><a href="#1-2-kubernetesç®€ä»‹" class="headerlink" title="1.2 kubernetesç®€ä»‹"></a>1.2 kubernetesç®€ä»‹</h2><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200406232838722.png" alt="image-20200406232838722"></p><p>kubernetesï¼Œæ˜¯ä¸€ä¸ªå…¨æ–°çš„åŸºäºå®¹å™¨æŠ€æœ¯çš„åˆ†å¸ƒå¼æ¶æ„é¢†å…ˆæ–¹æ¡ˆï¼Œæ˜¯è°·æ­Œä¸¥æ ¼ä¿å¯†åå‡ å¹´çš„ç§˜å¯†æ­¦å™¨â€”-Borgç³»ç»Ÿçš„ä¸€ä¸ªå¼€æºç‰ˆæœ¬ï¼Œäº2014å¹´9æœˆå‘å¸ƒç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œ2015å¹´7æœˆå‘å¸ƒç¬¬ä¸€ä¸ªæ­£å¼ç‰ˆæœ¬ã€‚</p><p>kubernetesçš„æœ¬è´¨æ˜¯<strong>ä¸€ç»„æœåŠ¡å™¨é›†ç¾¤</strong>ï¼Œå®ƒå¯ä»¥åœ¨é›†ç¾¤çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œç‰¹å®šçš„ç¨‹åºï¼Œæ¥å¯¹èŠ‚ç‚¹ä¸­çš„å®¹å™¨è¿›è¡Œç®¡ç†ã€‚ç›®çš„æ˜¯å®ç°èµ„æºç®¡ç†çš„è‡ªåŠ¨åŒ–ï¼Œä¸»è¦æä¾›äº†å¦‚ä¸‹çš„ä¸»è¦åŠŸèƒ½ï¼š</p><ul><li><strong>è‡ªæˆ‘ä¿®å¤</strong>ï¼šä¸€æ—¦æŸä¸€ä¸ªå®¹å™¨å´©æºƒï¼Œèƒ½å¤Ÿåœ¨1ç§’ä¸­å·¦å³è¿…é€Ÿå¯åŠ¨æ–°çš„å®¹å™¨</li><li><strong>å¼¹æ€§ä¼¸ç¼©</strong>ï¼šå¯ä»¥æ ¹æ®éœ€è¦ï¼Œè‡ªåŠ¨å¯¹é›†ç¾¤ä¸­æ­£åœ¨è¿è¡Œçš„å®¹å™¨æ•°é‡è¿›è¡Œè°ƒæ•´</li><li><strong>æœåŠ¡å‘ç°</strong>ï¼šæœåŠ¡å¯ä»¥é€šè¿‡è‡ªåŠ¨å‘ç°çš„å½¢å¼æ‰¾åˆ°å®ƒæ‰€ä¾èµ–çš„æœåŠ¡</li><li><strong>è´Ÿè½½å‡è¡¡</strong>ï¼šå¦‚æœä¸€ä¸ªæœåŠ¡èµ·åŠ¨äº†å¤šä¸ªå®¹å™¨ï¼Œèƒ½å¤Ÿè‡ªåŠ¨å®ç°è¯·æ±‚çš„è´Ÿè½½å‡è¡¡</li><li><strong>ç‰ˆæœ¬å›é€€</strong>ï¼šå¦‚æœå‘ç°æ–°å‘å¸ƒçš„ç¨‹åºç‰ˆæœ¬æœ‰é—®é¢˜ï¼Œå¯ä»¥ç«‹å³å›é€€åˆ°åŸæ¥çš„ç‰ˆæœ¬</li><li><strong>å­˜å‚¨ç¼–æ’</strong>ï¼šå¯ä»¥æ ¹æ®å®¹å™¨è‡ªèº«çš„éœ€æ±‚è‡ªåŠ¨åˆ›å»ºå­˜å‚¨å·</li></ul><h2 id="1-3-kubernetesç»„ä»¶"><a href="#1-3-kubernetesç»„ä»¶" class="headerlink" title="1.3 kubernetesç»„ä»¶"></a>1.3 kubernetesç»„ä»¶</h2><p>ä¸€ä¸ªkubernetesé›†ç¾¤ä¸»è¦æ˜¯ç”±**æ§åˆ¶èŠ‚ç‚¹(master)<strong>ã€</strong>å·¥ä½œèŠ‚ç‚¹(node)**æ„æˆï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½ä¼šå®‰è£…ä¸åŒçš„ç»„ä»¶ã€‚</p><p><strong>masterï¼šé›†ç¾¤çš„æ§åˆ¶å¹³é¢ï¼Œè´Ÿè´£é›†ç¾¤çš„å†³ç­– ( ç®¡ç† )</strong></p><blockquote><p><strong>ApiServer</strong> : èµ„æºæ“ä½œçš„å”¯ä¸€å…¥å£ï¼Œæ¥æ”¶ç”¨æˆ·è¾“å…¥çš„å‘½ä»¤ï¼Œæä¾›è®¤è¯ã€æˆæƒã€APIæ³¨å†Œå’Œå‘ç°ç­‰æœºåˆ¶</p><p><strong>Scheduler</strong> : è´Ÿè´£é›†ç¾¤èµ„æºè°ƒåº¦ï¼ŒæŒ‰ç…§é¢„å®šçš„è°ƒåº¦ç­–ç•¥å°†Podè°ƒåº¦åˆ°ç›¸åº”çš„nodeèŠ‚ç‚¹ä¸Š</p><p><strong>ControllerManager</strong> : è´Ÿè´£ç»´æŠ¤é›†ç¾¤çš„çŠ¶æ€ï¼Œæ¯”å¦‚ç¨‹åºéƒ¨ç½²å®‰æ’ã€æ•…éšœæ£€æµ‹ã€è‡ªåŠ¨æ‰©å±•ã€æ»šåŠ¨æ›´æ–°ç­‰</p><p><strong>Etcd</strong> ï¼šè´Ÿè´£å­˜å‚¨é›†ç¾¤ä¸­å„ç§èµ„æºå¯¹è±¡çš„ä¿¡æ¯</p></blockquote><p><strong>nodeï¼šé›†ç¾¤çš„æ•°æ®å¹³é¢ï¼Œè´Ÿè´£ä¸ºå®¹å™¨æä¾›è¿è¡Œç¯å¢ƒ ( å¹²æ´» )</strong></p><blockquote><p><strong>Kubelet</strong> : è´Ÿè´£ç»´æŠ¤å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸï¼Œå³é€šè¿‡æ§åˆ¶dockerï¼Œæ¥åˆ›å»ºã€æ›´æ–°ã€é”€æ¯å®¹å™¨</p><p><strong>KubeProxy</strong> : è´Ÿè´£æä¾›é›†ç¾¤å†…éƒ¨çš„æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡</p><p><strong>Docker</strong> : è´Ÿè´£èŠ‚ç‚¹ä¸Šå®¹å™¨çš„å„ç§æ“ä½œ</p></blockquote><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20200406184656917.png" alt="image-20200406184656917"></p><p>ä¸‹é¢ï¼Œä»¥éƒ¨ç½²ä¸€ä¸ªnginxæœåŠ¡æ¥è¯´æ˜kubernetesç³»ç»Ÿå„ä¸ªç»„ä»¶è°ƒç”¨å…³ç³»ï¼š</p><ol><li><p>é¦–å…ˆè¦æ˜ç¡®ï¼Œä¸€æ—¦kubernetesç¯å¢ƒå¯åŠ¨ä¹‹åï¼Œmasterå’Œnodeéƒ½ä¼šå°†è‡ªèº«çš„ä¿¡æ¯å­˜å‚¨åˆ°etcdæ•°æ®åº“ä¸­</p></li><li><p>ä¸€ä¸ªnginxæœåŠ¡çš„å®‰è£…è¯·æ±‚ä¼šé¦–å…ˆè¢«å‘é€åˆ°masterèŠ‚ç‚¹çš„apiServerç»„ä»¶</p></li><li><p>apiServerç»„ä»¶ä¼šè°ƒç”¨schedulerç»„ä»¶æ¥å†³å®šåˆ°åº•åº”è¯¥æŠŠè¿™ä¸ªæœåŠ¡å®‰è£…åˆ°å“ªä¸ªnodeèŠ‚ç‚¹ä¸Š</p><p>åœ¨æ­¤æ—¶ï¼Œå®ƒä¼šä»etcdä¸­è¯»å–å„ä¸ªnodeèŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œç„¶åæŒ‰ç…§ä¸€å®šçš„ç®—æ³•è¿›è¡Œé€‰æ‹©ï¼Œå¹¶å°†ç»“æœå‘ŠçŸ¥apiServer</p></li><li><p>apiServerè°ƒç”¨controller-managerå»è°ƒåº¦NodeèŠ‚ç‚¹å®‰è£…nginxæœåŠ¡</p></li><li><p>kubeletæ¥æ”¶åˆ°æŒ‡ä»¤åï¼Œä¼šé€šçŸ¥dockerï¼Œç„¶åç”±dockeræ¥å¯åŠ¨ä¸€ä¸ªnginxçš„pod</p><p>podæ˜¯kubernetesçš„æœ€å°æ“ä½œå•å…ƒï¼Œå®¹å™¨å¿…é¡»è·‘åœ¨podä¸­è‡³æ­¤ï¼Œ</p></li><li><p>ä¸€ä¸ªnginxæœåŠ¡å°±è¿è¡Œäº†ï¼Œå¦‚æœéœ€è¦è®¿é—®nginxï¼Œå°±éœ€è¦é€šè¿‡kube-proxyæ¥å¯¹podäº§ç”Ÿè®¿é—®çš„ä»£ç†</p></li></ol><p>è¿™æ ·ï¼Œå¤–ç•Œç”¨æˆ·å°±å¯ä»¥è®¿é—®é›†ç¾¤ä¸­çš„nginxæœåŠ¡äº†</p><h2 id="1-4-kubernetesæ¦‚å¿µ"><a href="#1-4-kubernetesæ¦‚å¿µ" class="headerlink" title="1.4 kubernetesæ¦‚å¿µ"></a>1.4 kubernetesæ¦‚å¿µ</h2><p><strong>Master</strong>ï¼šé›†ç¾¤æ§åˆ¶èŠ‚ç‚¹ï¼Œæ¯ä¸ªé›†ç¾¤éœ€è¦è‡³å°‘ä¸€ä¸ªmasterèŠ‚ç‚¹è´Ÿè´£é›†ç¾¤çš„ç®¡æ§</p><p><strong>Node</strong>ï¼šå·¥ä½œè´Ÿè½½èŠ‚ç‚¹ï¼Œç”±masteråˆ†é…å®¹å™¨åˆ°è¿™äº›nodeå·¥ä½œèŠ‚ç‚¹ä¸Šï¼Œç„¶ånodeèŠ‚ç‚¹ä¸Šçš„dockerè´Ÿè´£å®¹å™¨çš„è¿è¡Œ</p><p><strong>Pod</strong>ï¼škubernetesçš„æœ€å°æ§åˆ¶å•å…ƒï¼Œå®¹å™¨éƒ½æ˜¯è¿è¡Œåœ¨podä¸­çš„ï¼Œä¸€ä¸ªpodä¸­å¯ä»¥æœ‰1ä¸ªæˆ–è€…å¤šä¸ªå®¹å™¨</p><p><strong>Controller</strong>ï¼šæ§åˆ¶å™¨ï¼Œé€šè¿‡å®ƒæ¥å®ç°å¯¹podçš„ç®¡ç†ï¼Œæ¯”å¦‚å¯åŠ¨podã€åœæ­¢podã€ä¼¸ç¼©podçš„æ•°é‡ç­‰ç­‰</p><p><strong>Service</strong>ï¼špodå¯¹å¤–æœåŠ¡çš„ç»Ÿä¸€å…¥å£ï¼Œä¸‹é¢å¯ä»¥ç»´æŠ¤è€…åŒä¸€ç±»çš„å¤šä¸ªpod</p><p><strong>Label</strong>ï¼šæ ‡ç­¾ï¼Œç”¨äºå¯¹podè¿›è¡Œåˆ†ç±»ï¼ŒåŒä¸€ç±»podä¼šæ‹¥æœ‰ç›¸åŒçš„æ ‡ç­¾</p><p><strong>NameSpace</strong>ï¼šå‘½åç©ºé—´ï¼Œç”¨æ¥éš”ç¦»podçš„è¿è¡Œç¯å¢ƒ</p>]]></content>
      
      
      <categories>
          
          <category> Doc </category>
          
          <category> Kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kubernetes </tag>
            
            <tag> æ•™ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[èŠ±æ¤’ç”Ÿå­˜]ä½¿ç”¨IPV6è¿›å…¥èŠ±æ¤’ç”Ÿå­˜æœåŠ¡å™¨</title>
      <link href="/2022/07/07/fca546aa028a-q1jun/"/>
      <url>/2022/07/07/fca546aa028a-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="ä½¿ç”¨IPV6è¿›å…¥èŠ±æ¤’ç”Ÿå­˜æœåŠ¡å™¨"><a href="#ä½¿ç”¨IPV6è¿›å…¥èŠ±æ¤’ç”Ÿå­˜æœåŠ¡å™¨" class="headerlink" title="ä½¿ç”¨IPV6è¿›å…¥èŠ±æ¤’ç”Ÿå­˜æœåŠ¡å™¨"></a>ä½¿ç”¨IPV6è¿›å…¥èŠ±æ¤’ç”Ÿå­˜æœåŠ¡å™¨</h1><blockquote><p>æœåŠ¡å™¨IPv4åœ°å€ï¼šmc.q1jun.cn</p><p>æœåŠ¡å™¨IPv6åœ°å€ï¼šv6.q1jun.cn</p><p>æœåŠ¡å™¨QQäº¤æµç¾¤ï¼š912457864</p><p>æœåŠ¡å™¨å¼€xé»‘å•¦ï¼š<a target="_blank" rel="noopener" href="https://kook.top/V0aEIh">https://kook.top/V0aEIh</a></p></blockquote><h2 id="0x01-ä»€ä¹ˆæ˜¯IPv6"><a href="#0x01-ä»€ä¹ˆæ˜¯IPv6" class="headerlink" title="0x01 ä»€ä¹ˆæ˜¯IPv6"></a>0x01 ä»€ä¹ˆæ˜¯IPv6</h2><p>å…¶å®ï¼ŒIPv6å¹¶ä¸æ˜¯ä¸€ä¸ªæ–°é²œäº‹ç‰©ã€‚æ—©åœ¨ä¸Šä¸ªä¸–çºª90å¹´ä»£ï¼Œå®ƒå°±å·²ç»è¯ç”Ÿäº†ã€‚æˆ‘ç›¸ä¿¡å¤§éƒ¨åˆ†çš„å°ä¼™ä¼´æˆ–å¤šæˆ–å°‘å¬è¯´è¿‡å®ƒã€‚</p><p><code>IPv6</code>çš„å…¨ç§°æ˜¯<strong>Internet Protocol version 6</strong>ã€‚å…¶ä¸­ï¼ŒInternet Protocolè¯‘ä¸ºâ€œäº’è”ç½‘åè®®â€ã€‚æ‰€ä»¥ï¼ŒIPv6å°±æ˜¯<strong>äº’è”ç½‘åè®®ç¬¬6ç‰ˆ</strong>ã€‚</p><p>æ—¢ç„¶IPv6æ˜¯ç¬¬6ç‰ˆï¼ˆVersion 6ï¼‰ï¼Œè¯´æ˜åœ¨å®ƒä¹‹å‰æœ‰æ›´è€çš„ç‰ˆæœ¬ã€‚æˆ‘ä»¬ç°åœ¨å¹¿æ³›ä½¿ç”¨çš„ï¼Œå°±æ˜¯<code>IPv4</code>ï¼Œä¹Ÿå°±æ˜¯ç¬¬4ç‰ˆï¼ˆVersion 4ï¼‰ã€‚</p><h2 id="0x02-ä¸ºä»€ä¹ˆè¦ç”¨IPv6"><a href="#0x02-ä¸ºä»€ä¹ˆè¦ç”¨IPv6" class="headerlink" title="0x02 ä¸ºä»€ä¹ˆè¦ç”¨IPv6"></a>0x02 ä¸ºä»€ä¹ˆè¦ç”¨IPv6</h2><p>IPv4è¿„ä»Šä¸ºæ­¢å·²ç»ä½¿ç”¨äº†30å¤šå¹´ã€‚æœ€æ—©æœŸçš„æ—¶å€™ï¼Œäº’è”ç½‘åªæ˜¯è®¾è®¡ç»™ç¾å›½å†›æ–¹ç”¨çš„ï¼Œæ ¹æœ¬æ²¡æœ‰è€ƒè™‘åˆ°å®ƒä¼šå˜å¾—å¦‚æ­¤åºå¤§ï¼Œæˆä¸ºå…¨çƒç½‘ç»œã€‚</p><p>å°¤å…¶æ˜¯è¿›å…¥21ä¸–çºªåï¼Œéšç€è®¡ç®—æœºå’Œæ™ºèƒ½æ‰‹æœºçš„è¿…é€Ÿæ™®åŠï¼Œäº’è”ç½‘å¼€å§‹çˆ†å‘æ€§å‘å±•ï¼Œè¶Šæ¥è¶Šå¤šçš„ä¸Šç½‘è®¾å¤‡å‡ºç°ï¼Œè¶Šæ¥è¶Šå¤šçš„äººå¼€å§‹è¿æ¥äº’è”ç½‘ã€‚è¿™å°±æ„å‘³ç€ï¼Œéœ€è¦è¶Šæ¥è¶Šå¤šçš„IPåœ°å€ã€‚</p><p>IPv4åˆ°åº•ä¸€å…±æœ‰å¤šå°‘ä¸ªIPåœ°å€å‘¢ï¼Ÿç­”æ¡ˆæ˜¯2çš„32æ¬¡æ–¹ï¼Œä¹Ÿå°±æ˜¯çº¦<code>42.9äº¿ä¸ª</code>ã€‚</p><p>æ‰€ä»¥è¯´ï¼ŒIPv4åœ°å€æ± æ¥è¿‘æ¯ç«­ï¼Œæ ¹æœ¬æ— æ³•æ»¡è¶³äº’è”ç½‘å‘å±•çš„éœ€è¦ã€‚äººä»¬è¿«åˆ‡éœ€è¦æ›´é«˜ç‰ˆæœ¬çš„IPåè®®ï¼Œæ›´å¤§æ•°é‡çš„IPåœ°å€æ± ã€‚ï¼ˆæœ‰ç‚¹åƒå›ºå®šç”µè¯å·ç å‡ä½ã€‚ï¼‰</p><p>IPv4çš„åœ°å€æ± æ˜¯çº¦42.9äº¿ï¼ŒIPv6èƒ½è¾¾åˆ°å¤šå°‘å‘¢ï¼Ÿ</p><p>æ•°é‡å¦‚ä¸‹â€”â€”</p><p><code>340282366920938463463374607431768211456</code>ä¸ªâ€¦</p><p>ä¸ç”¨æ•°äº†ï¼Œæ•°åˆ°åé¢è„‘å­å°±ä¼šç§€é€—äº†â€¦</p><p>ç®€å•è¯´ï¼Œæ˜¯<code>2çš„128</code>æ¬¡æ–¹ã€‚</p><p>è¿™ä¸ªæ•°é‡ï¼Œå³ä½¿æ˜¯ç»™åœ°çƒä¸Šæ¯ä¸€é¢—æ²™å­éƒ½åˆ†é…ä¸€ä¸ªIPï¼Œä¹Ÿæ˜¯å¦¥å¦¥å¤Ÿç”¨çš„ã€‚</p><p>ä¸‹é¢è¿™æ ·çš„ï¼Œå°±æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ã€åˆæ³•çš„IPv6åœ°å€ç¤ºä¾‹ï¼š</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2001:0db8:85a3:08d3:1319:8a2e:0370:7344</span><br></pre></td></tr></table></figure><p>ä¸è¿‡è¿™è°è®°å¾—ä½å•Šï¼Œä¸ç”¨æ‹…å¿ƒï¼ŒIPv6ä¹Ÿå¯ä»¥é€šè¿‡DNSè¿›è¡Œè§£ææˆåŸŸåï¼š</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v6.q1jun.cn</span><br></pre></td></tr></table></figure><blockquote><p>é™¤äº†åœ°å€æ•°é‡ä¹‹å¤–ï¼ŒIPv6è¿˜æœ‰å¾ˆå¤šä¼˜ç‚¹ï¼Œä¾‹å¦‚ï¼š</p><p>1ã€IPv6ä½¿ç”¨æ›´å°çš„è·¯ç”±è¡¨ã€‚ä½¿å¾—è·¯ç”±å™¨è½¬å‘æ•°æ®åŒ…çš„é€Ÿåº¦æ›´å¿«ã€‚</p><p>2ã€IPv6å¢åŠ äº†å¢å¼ºçš„ç»„æ’­æ”¯æŒä»¥åŠå¯¹æµçš„æ§åˆ¶ï¼Œå¯¹å¤šåª’ä½“åº”ç”¨å¾ˆæœ‰åˆ©ï¼Œå¯¹æœåŠ¡è´¨é‡ï¼ˆQoSï¼‰æ§åˆ¶ä¹Ÿå¾ˆæœ‰åˆ©ã€‚</p><p>3ã€IPv6åŠ å…¥äº†å¯¹è‡ªåŠ¨é…ç½®çš„æ”¯æŒã€‚è¿™æ˜¯å¯¹DHCPåè®®çš„æ”¹è¿›å’Œæ‰©å±•ï¼Œä½¿å¾—ç½‘ç»œï¼ˆå°¤å…¶æ˜¯å±€åŸŸç½‘ï¼‰çš„ç®¡ç†æ›´åŠ æ–¹ä¾¿å’Œå¿«æ·ã€‚</p><p>4ã€IPv6å…·æœ‰æ›´é«˜çš„å®‰å…¨æ€§ã€‚ç”¨æˆ·å¯ä»¥å¯¹ç½‘ç»œå±‚çš„æ•°æ®è¿›è¡ŒåŠ å¯†å¹¶å¯¹IPæŠ¥æ–‡è¿›è¡Œæ ¡éªŒï¼Œæå¤§åœ°å¢å¼ºäº†ç½‘ç»œçš„å®‰å…¨æ€§ã€‚</p><p>5ã€IPv6å…·æœ‰æ›´å¥½çš„æ‰©å®¹èƒ½åŠ›ã€‚å¦‚æœæ–°çš„æŠ€æœ¯æˆ–åº”ç”¨éœ€è¦æ—¶ï¼ŒIPV6å…è®¸åè®®è¿›è¡Œæ‰©å……ã€‚</p><p>6ã€IPv6å…·æœ‰æ›´å¥½çš„å¤´éƒ¨æ ¼å¼ã€‚IPV6ä½¿ç”¨æ–°çš„å¤´éƒ¨æ ¼å¼ï¼Œå°±ç®€åŒ–å’ŒåŠ é€Ÿäº†è·¯ç”±é€‰æ‹©è¿‡ç¨‹ï¼Œæé«˜äº†æ•ˆç‡ã€‚</p></blockquote><h2 id="0x03-æµ‹è¯•IPv6æ˜¯å¦å¯ç”¨"><a href="#0x03-æµ‹è¯•IPv6æ˜¯å¦å¯ç”¨" class="headerlink" title="0x03 æµ‹è¯•IPv6æ˜¯å¦å¯ç”¨"></a>0x03 æµ‹è¯•IPv6æ˜¯å¦å¯ç”¨</h2><p>æŸ¥çœ‹å½“å‰ç”µè„‘æ˜¯å¦èƒ½é€šè¿‡IPv6ä¸Šç½‘å¯ä»¥åœ¨æµè§ˆå™¨æ‰“å¼€ä»¥ä¸‹ç½‘å€ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://testipv6.cn</span><br></pre></td></tr></table></figure><p>ç­‰å¾…æµ‹è¯•ç»“æœå³å¯ã€‚</p><h2 id="0x04-ä½¿ç”¨è¿›å…¥MC"><a href="#0x04-ä½¿ç”¨è¿›å…¥MC" class="headerlink" title="0x04 ä½¿ç”¨è¿›å…¥MC"></a>0x04 ä½¿ç”¨è¿›å…¥MC</h2><p>åœ¨mcçš„<code>å¤šäººæ¸¸æˆ</code>ä¸­ç‚¹å‡»<kbd>æ·»åŠ æœåŠ¡å™¨</kbd></p><p>è¾“å…¥è§£æåçš„IPv6åŸŸåï¼š<code>v6.q1jun.cn</code>å³å¯ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220707225625000.png" alt="image-20220707225625000"></p><p>ç‚¹å‡»<kbd>å®Œæˆ</kbd>åè¿”å›æœåŠ¡å™¨åˆ—è¡¨å°±å¯ä»¥çœ‹åˆ°<code>æ–°æ·»åŠ çš„æœåŠ¡å™¨</code>äº†ã€‚</p><p>æœ€ååŒå‡»è¿›å…¥ï¼å¼€å§‹ç‹‚æ¬¢å§ï¼</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220707225830279.png" alt="image-20220707225830279"></p>]]></content>
      
      
      <categories>
          
          <category> Doc </category>
          
          <category> èŠ±æ¤’ç”Ÿå­˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•™ç¨‹ </tag>
            
            <tag> Minecraft </tag>
            
            <tag> æˆ‘çš„ä¸–ç•Œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¡ç®—å±…æ°‘èº«ä»½è¯æ ¡éªŒç </title>
      <link href="/2022/07/03/cbac55735a57-q1jun/"/>
      <url>/2022/07/03/cbac55735a57-q1jun/</url>
      
        <content type="html"><![CDATA[<h2 id="è®¡ç®—æ ¡éªŒä½"><a href="#è®¡ç®—æ ¡éªŒä½" class="headerlink" title="è®¡ç®—æ ¡éªŒä½"></a>è®¡ç®—æ ¡éªŒä½</h2><p>è®°å½•ä¸€ä¸ªè®¡ç®—ç¬¬äºŒä»£å±…æ°‘èº«ä»½è¯æœ€åä¸€ä½<code>æ ¡éªŒä½</code>çš„ç®—æ³•ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">calc</span>(<span class="params">str</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> coeff = [<span class="number">7</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">5</span>,<span class="number">8</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">6</span>,<span class="number">3</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">5</span>,<span class="number">8</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">1</span>];</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> suffix = [<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;0&#x27;</span>,<span class="string">&#x27;Ã—&#x27;</span>,<span class="string">&#x27;9&#x27;</span>,<span class="string">&#x27;8&#x27;</span>,<span class="string">&#x27;7&#x27;</span>,<span class="string">&#x27;6&#x27;</span>,<span class="string">&#x27;5&#x27;</span>,<span class="string">&#x27;4&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;2&#x27;</span>];</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> sum = <span class="number">0</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i &lt; <span class="number">17</span>;i++)&#123;</span></span><br><span class="line"><span class="language-javascript">                sum += coeff[i] * <span class="built_in">parseInt</span>(str.<span class="title function_">charCodeAt</span>(i)-<span class="number">48</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            sum %= <span class="number">11</span>;</span></span><br><span class="line"><span class="language-javascript">            str = str.<span class="title function_">substr</span>(<span class="number">0</span>,<span class="number">17</span>) + suffix[sum];</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> str;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;alert(calc(prompt(&#x27;è¯·è¾“å…¥å¾…è®¡ç®—çš„èº«ä»½è¯å·(å‰åä¸ƒä½)&#x27;)))&quot;</span>&gt;</span>è®¡ç®—<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>åœ¨è¾“å…¥æ¡†è¾“å…¥å¾…æ ¡éªŒçš„èº«ä»½è¯å‰17ä½ï¼ˆèº«ä»½è¯å…±æœ‰18ä½ï¼‰ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220703220416610.png" alt="image-20220703220416610"></p><p>ç‚¹å‡»<kbd>ç¡®å®š</kbd>ï¼Œè¡¥å…¨èº«ä»½è¯æœ€åä¸€ä½<code>æ ¡éªŒä½</code>ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220703220609589.png" alt="image-20220703220609589"></p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[æ•°æ®ç»“æ„]æ ˆ</title>
      <link href="/2022/06/23/757c5c7e8603-q1jun/"/>
      <url>/2022/06/23/757c5c7e8603-q1jun/</url>
      
        <content type="html"><![CDATA[<h2 id="æ ˆçš„åŸºæœ¬æ¦‚å¿µ"><a href="#æ ˆçš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="æ ˆçš„åŸºæœ¬æ¦‚å¿µ"></a>æ ˆçš„åŸºæœ¬æ¦‚å¿µ</h2><blockquote><p>æ•°æ®ç»“æ„çš„ä¸‰è¦ç´  â€“ é€»è¾‘ç»“æ„ã€æ•°æ®è¿ç®—ã€å­˜å‚¨ç»“æ„ ã€‚<br>(å­˜å‚¨ç»“æ„å­˜å‚¨ç»“æ„ä¸åŒï¼Œè¿ç®—çš„å®ç°æ–¹å¼ä¸åŒã€‚)</p></blockquote><p><strong>æ ˆ</strong> ï¼ˆStackï¼‰æ˜¯åªå…è®¸åœ¨ä¸€ç«¯è¿›è¡Œæ’å…¥æˆ–åˆ é™¤æ“ä½œçš„<code>çº¿æ€§è¡¨</code>ã€‚å³æ ˆæ˜¯ä¸€ç§çº¿æ€§è¡¨ï¼Œä½†é™å®šè¿™ç§çº¿æ€§è¡¨åªèƒ½åœ¨æŸä¸€ç«¯è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œã€‚</p><p><code>æ ˆé¡¶</code>ï¼ˆTopï¼‰ï¼šçº¿æ€§è¡¨å…è®¸æ’å…¥åˆ é™¤çš„é‚£ä¸€ç«¯ã€‚</p><p><code>æ ˆåº•</code>ï¼ˆBottomï¼‰ï¼šå›ºå®šçš„ï¼Œä¸å…è®¸è¿›è¡Œæ’å…¥å’Œåˆ é™¤çš„ä¸€ç«¯ã€‚</p><p><code>ç©ºæ ˆ</code>ï¼šä¸åŒ…å«ä»»ä½•å…ƒç´ çš„æ ˆã€‚</p><p><code>æ ˆé“æ“ä½œç‰¹æ€§</code>ï¼šåè¿›å…ˆå‡ºï¼ˆLast In First Outï¼ŒLIFOï¼‰ã€‚</p><p><code>æ ˆçš„æ•°å­¦æ€§è´¨</code>ï¼š $n$ä¸ªä¸åŒå…ƒç´ è¿›æ ˆï¼Œå‡ºæ ˆå…ƒç´ ä¸åŒæ’åˆ—çš„ä¸ªæ•°ä¸º$\frac1{n+1}C^n_{2n}$ã€‚ä¸Šè¿°å…¬å¼ç§°ä¸ºå¡ç‰¹å…°ï¼ˆCatalanï¼‰æ•°ï¼Œå¯é‡‡ç”¨æ•°å­¦å½’çº³æ³•è¯æ˜ã€‚</p><hr><p>æ ˆé“åŸºæœ¬æ“ä½œï¼š</p><ul><li><code>InitStack(&amp;S)</code>ï¼šåˆå§‹åŒ–æ ˆã€‚æ„é€ ä¸€ä¸ªç©ºæ ˆSï¼Œåˆ†é…å†…å­˜ç©ºé—´ã€‚</li><li><code>DestroyStack(&amp;S)</code>ï¼šé”€æ¯æ ˆï¼Œå¹¶é‡Šæ”¾æ ˆSæ‰€å ç”¨çš„å†…å­˜ç©ºé—´ã€‚</li><li><code>Push(&amp;S, x)</code>ï¼š<strong>è¿›æ ˆ</strong>ï¼Œè‹¥æ ˆSæœªæ»¡ï¼Œåˆ™å°†xåŠ å…¥ä½¿ä¹‹æˆä¸ºæ–°æ ˆé¡¶ã€‚</li><li><code>Pop(&amp;S, &amp;x)</code>ï¼š<strong>å‡ºæ ˆ</strong>ï¼Œè‹¥æ ˆSéç©ºï¼Œåˆ™å¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œå¹¶å°†xè¿”å›ã€‚</li><li><code>GetTop(S, &amp;x)</code>ï¼šè¯»å–æ ˆé¡¶å…ƒç´ ã€‚è‹¥æ ˆSéç©ºï¼Œåˆ™ç”¨xè¿”å›æ ˆé¡¶å…ƒç´ ã€‚</li><li><code>StackEmpty(S)</code>ï¼šåˆ¤æ–­æ ˆSæ˜¯å¦ä¸ºç©ºã€‚è‹¥Sä¸ºç©ºï¼Œåˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›false</li></ul><h2 id="é¡ºåºæ ˆçš„å®šä¹‰"><a href="#é¡ºåºæ ˆçš„å®šä¹‰" class="headerlink" title="é¡ºåºæ ˆçš„å®šä¹‰"></a>é¡ºåºæ ˆçš„å®šä¹‰</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> MaxSize 10 <span class="comment">//æ ˆä¸­å…ƒç´ æœ€å¤§ä¸ªæ•°</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> &#123;</span><br><span class="line">    <span class="type">int</span> data[MaxSize]; <span class="comment">//é™æ€æ•°ç»„å­˜æ”¾æ ˆä¸­å…ƒç´ </span></span><br><span class="line">    <span class="type">int</span> top; <span class="comment">//æ ˆé¡¶</span></span><br><span class="line">&#125;SequenceStack;</span><br></pre></td></tr></table></figure><p>æ ˆçš„åˆå§‹åŒ–ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: åˆå§‹åŒ–æ ˆ</span></span><br><span class="line"><span class="comment"> * @param &#123;SequenceStack&amp;&#125; S è¾“å…¥æ ˆ</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">InitStack</span><span class="params">(SequenceStack&amp; S)</span> </span>&#123;</span><br><span class="line">    S.top = <span class="number">-1</span>; <span class="comment">//åˆå§‹åŒ–æ ˆé¡¶</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ ˆçš„åˆ¤ç©ºï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: æ ˆåˆ¤ç©º</span></span><br><span class="line"><span class="comment"> * @param &#123;SequenceStack&#125; S</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">isEmpty</span><span class="params">(SequenceStack S)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (S.top = <span class="number">-1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¥æ ˆï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: å…¥æ ˆæ“ä½œ</span></span><br><span class="line"><span class="comment"> * @param &#123;SequenceStack&amp;&#125; S é¡ºåºæ ˆ</span></span><br><span class="line"><span class="comment"> * @param &#123;int&#125; e å…¥æ ˆå…ƒç´ </span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Push</span><span class="params">(SequenceStack&amp; S, <span class="type">int</span> e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (S.top == MaxSize - <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;æ ˆå·²æ»¡&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    S.top += <span class="number">1</span>; <span class="comment">//è°ƒæ•´æ ˆé¡¶ä½ç½®</span></span><br><span class="line">    S.data[S.top] = e; <span class="comment">//æ–°å…ƒç´ å…¥æ ˆ</span></span><br><span class="line">    <span class="comment">//ç­‰ä»·äº S.data[++S.top] = e;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡ºæ ˆï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: å‡ºæ ˆ</span></span><br><span class="line"><span class="comment"> * @param &#123;SequenceStack&amp;&#125; S é¡ºåºæ ˆ</span></span><br><span class="line"><span class="comment"> * @param &#123;int&amp;&#125; e å‡ºæ ˆå…ƒç´ </span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Pop</span><span class="params">(SequenceStack&amp; S, <span class="type">int</span>&amp; e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (S.top = <span class="number">-1</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;æ ˆå·²ç©ºï¼Œæ— å…ƒç´ è¿”å›&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    e = S.data[S.top]; <span class="comment">//æ ˆé¡¶å…ƒç´ å…ˆå‡ºæ ˆ</span></span><br><span class="line">    S.top -= <span class="number">1</span>; <span class="comment">//è°ƒæ•´æ ˆé¡¶ä½ç½®</span></span><br><span class="line">    <span class="comment">//ç­‰ä»·äº e = S.data[S.top--];</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è·å–æ ˆé¡¶å…ƒç´ ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: è·å–æ ˆé¡¶å…ƒç´ </span></span><br><span class="line"><span class="comment"> * @param &#123;SequenceStack&#125; S é¡ºåºæ ˆ</span></span><br><span class="line"><span class="comment"> * @param &#123;int&amp;&#125; e æ ˆé¡¶å…ƒç´ </span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">GetTop</span><span class="params">(SequenceStack S, <span class="type">int</span>&amp; e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (S.top == <span class="number">-1</span>) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;æ ˆå·²ç©ºï¼Œæ— å…ƒç´ è¿”å›&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    e = S.data[S.top]; <span class="comment">//è¿”å›æ ˆé¡¶å…ƒç´ </span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç”±é™æ€æ•°ç»„å®šä¹‰çš„æ ˆç©ºé—´ï¼Œä½¿ç”¨ç»“æŸåç³»ç»Ÿä¼šè‡ªåŠ¨å›æ”¶ã€‚</p></blockquote><h2 id="å…±äº«æ ˆçš„å®šä¹‰"><a href="#å…±äº«æ ˆçš„å®šä¹‰" class="headerlink" title="å…±äº«æ ˆçš„å®šä¹‰"></a>å…±äº«æ ˆçš„å®šä¹‰</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> MaxSize 10 <span class="comment">//æ ˆå®¹é‡</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> &#123;</span><br><span class="line">    <span class="type">int</span> data[MaxSize];</span><br><span class="line">    <span class="type">int</span> top0; <span class="comment">//0å·æ ˆé¡¶</span></span><br><span class="line">    <span class="type">int</span> top1; <span class="comment">//1å·æ ˆé¡¶</span></span><br><span class="line">&#125;ShareStack;</span><br></pre></td></tr></table></figure><p>å…±äº«æ ˆçš„åˆå§‹åŒ–ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: åˆå§‹åŒ–å…±äº«æ ˆ</span></span><br><span class="line"><span class="comment"> * @param &#123;ShareStack&amp;&#125; S</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">InitStack</span><span class="params">(ShareStack&amp; S)</span> </span>&#123;</span><br><span class="line">    S.top0 = <span class="number">-1</span>; <span class="comment">//åˆå§‹åŒ–0å·æ ˆé¡¶</span></span><br><span class="line">    S.top1 = MaxSize; <span class="comment">//åˆå§‹åŒ–1å·æ ˆé¡¶</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…±äº«æ ˆåˆ¤ç©º:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: å…±äº«æ ˆåˆ¤ç©º</span></span><br><span class="line"><span class="comment"> * @param &#123;ShareStack&#125; S å…±äº«æ ˆ</span></span><br><span class="line"><span class="comment"> * @param &#123;int&#125; type å…±äº«æ ˆç±»å‹(0å·è¿˜æ˜¯1å·)</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">isEmpty</span><span class="params">(ShareStack S, <span class="type">int</span> type)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (type == <span class="number">0</span>) &#123; <span class="comment">//0å·æ ˆ</span></span><br><span class="line">        <span class="keyword">if</span> (S.top0 == <span class="number">-1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (type == <span class="number">1</span>) &#123; <span class="comment">//1å·æ ˆ</span></span><br><span class="line">        <span class="keyword">if</span> (S.top1 == MaxSize) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…±äº«æ ˆå…¥æ ˆ:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: å…±äº«æ ˆå…¥æ ˆ</span></span><br><span class="line"><span class="comment"> * @param &#123;ShareStack&amp;&#125; S å…±äº«æ ˆ</span></span><br><span class="line"><span class="comment"> * @param &#123;int&#125; type å…±äº«æ ˆç±»å‹</span></span><br><span class="line"><span class="comment"> * @param &#123;int&#125; e å…¥æ ˆå…ƒç´ </span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Push</span><span class="params">(ShareStack&amp; S,<span class="type">int</span> type, <span class="type">int</span> e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (type == <span class="number">0</span>) &#123; <span class="comment">//0å·æ ˆ</span></span><br><span class="line">        <span class="keyword">if</span> (S.top0 + <span class="number">1</span> == S.top1 ) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;å…±äº«æ ˆå·²æ»¡&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        S.top0++;</span><br><span class="line">        S.data[S.top0] = e;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (type == <span class="number">1</span>) &#123; <span class="comment">//1å·æ ˆ</span></span><br><span class="line">        <span class="keyword">if</span> (S.top0 + <span class="number">1</span> == S.top1 ) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;å…±äº«æ ˆå·²æ»¡&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        S.data[S.top1] = e;</span><br><span class="line">        S.top1--;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…±äº«æ ˆå‡ºæ ˆ:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: å…±äº«æ ˆå‡ºæ ˆ</span></span><br><span class="line"><span class="comment"> * @param &#123;ShareStack&amp;&#125; S å…±äº«æ ˆ</span></span><br><span class="line"><span class="comment"> * @param &#123;int&#125; type å…±äº«æ ˆç±»å‹</span></span><br><span class="line"><span class="comment"> * @param &#123;int&amp;&#125; e å‡ºæ ˆå…ƒç´ </span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">Pop</span><span class="params">(ShareStack&amp; S, <span class="type">int</span> type, <span class="type">int</span>&amp; e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (type == <span class="number">0</span>) &#123; <span class="comment">//0å·æ ˆ</span></span><br><span class="line">        <span class="keyword">if</span> (S.top0 == <span class="number">-1</span> ) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;å…±äº«æ ˆä¸ºç©º&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        e = S.data[S.top0];</span><br><span class="line">        S.top0--;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (type == <span class="number">1</span>) &#123; <span class="comment">//1å·æ ˆ</span></span><br><span class="line">        <span class="keyword">if</span> (S.top1 == MaxSize) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;å…±äº«æ ˆä¸ºç©º&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        e = S.data[--S.top1];</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç”±é™æ€æ•°ç»„å®šä¹‰çš„æ ˆç©ºé—´ï¼Œä½¿ç”¨ç»“æŸåç³»ç»Ÿä¼šè‡ªåŠ¨å›æ”¶ã€‚</p></blockquote><h2 id="é“¾å¼å­˜å‚¨çš„æ ˆ"><a href="#é“¾å¼å­˜å‚¨çš„æ ˆ" class="headerlink" title="é“¾å¼å­˜å‚¨çš„æ ˆ"></a>é“¾å¼å­˜å‚¨çš„æ ˆ</h2><p>â€‹    é‡‡ç”¨é“¾å¼å­˜å‚¨çš„æ ˆç§°ä¸º<code>é“¾æ ˆ</code>ï¼Œé“¾æ ˆçš„æœ‰ç‚¹æ˜¯ä¾¿äºå¤šä¸ªæ ˆå…±äº«å­˜å‚¨ç©ºé—´å’Œæé«˜å…¶æ•ˆç‡ï¼Œä¸”ä¸å­˜åœ¨æ ˆæ»¡ä¸Šæº¢çš„æƒ…å†µã€‚é€šå¸¸é‡‡ç”¨å•é“¾è¡¨å®ç°ï¼Œå¹¶è§„å®šæ‰€æœ‰æ“ä½œéƒ½æ˜¯åœ¨å•é“¾è¡¨çš„è¡¨å¤´è¿›è¡Œçš„ã€‚è¿™è§„å®šé“¾æ ˆæ²¡æœ‰å¤´èŠ‚ç‚¹ï¼ŒLHeadæŒ‡å‘æ ˆé¡¶å…ƒç´ ã€‚</p><p>é“¾æ ˆçš„å®šä¹‰:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">Linknode</span>&#123;</span><br><span class="line">  <span class="type">int</span> data;</span><br><span class="line">  <span class="keyword">struct</span> <span class="title class_">Linknode</span> *next;</span><br><span class="line">&#125;*LinkStack;</span><br></pre></td></tr></table></figure><blockquote><p>é‡‡ç”¨é“¾å¼å­˜å‚¨ï¼Œä¾¿äºç»“ç‚¹çš„æ’å…¥ä¸åˆ é™¤ã€‚é“¾æ ˆé“æ“ä½œä¸é“¾è¡¨ç±»ä¼¼ï¼Œå…¥æ ˆå’Œå‡ºæ ˆçš„æ“ä½œéƒ½åœ¨é“¾è¡¨çš„è¡¨å¤´è¿›è¡Œï¼ˆå¤´æ’æ³•ï¼‰ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ä¸å¸¦å¤´èŠ‚ç‚¹å’Œå¸¦å¤´èŠ‚ç‚¹çš„é“¾æ ˆé“å…·ä½“å®ç°ä¼šæœ‰æ‰€ä¸åŒã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
            <tag> ç®—æ³• </tag>
            
            <tag> Cè¯­è¨€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…¨å¹³å°ç§‘å­¦ä¸Šç½‘æ•™ç¨‹</title>
      <link href="/2022/06/21/bb111db7b763-q1jun/"/>
      <url>/2022/06/21/bb111db7b763-q1jun/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="å¯†ç é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥" data-whm="è¿™äº›è§£å¯†çš„å†…å®¹æ— æ³•éªŒè¯ï¼Œä½†æ‚¨ä»ç„¶å¯ä»¥æŸ¥çœ‹ã€‚">  <script id="hbeData" type="hbeData" data-hmacdigest="70249779da82ac75ef2f884af5f0c4ddd4e4d55cc2cb356a738cff23241e9c90">3ae7cb78b13cde442a4226c6b7ccd0877604af2eff4b78ea83de849e4ff6ecb8678da0350ab6e238c80cd536fb72f22f67e90eb1fe248b364212c67570407f005d684ef47cd9ae11ba750f508c6447b2b141d2e9d5b5415f43047209859c54bec58eee4bd4ded32ff474997f01b6097b3295a2a19cc49575f1a787018f84b0aaa83d4d64de1ec3fc63197d2bb138dd26aecb54e22e60dc6267b1024c0fb28a146f30d9e889d19cf309bb103dfe430a498fb6be6a4333cff1403ef5524460b7766d83f1e727f0234951fca2b4b1e9b26fa82342e719ad4dac463bf52fabb1c7733824e42daea0500c1734048b86d2983400cd6080faf38305f4c52f7433d4acc65a131981b9a8a484192635aecd9e9227bbc7ba9f097c731011c75557c6e2d546e30e2ad09a5a4f972a120b40aa024a45baa2037adb67b56ba8db98c55edf81139f23d87277dc479384f1177bce6863dd1d0d2cefe7e1cd3412818d3a565ef28cdfc530e5ac35df5821fe35b3746a8d6242d211f60299ce2a6e01b89eb8e723f5743e54d817525ff8ebeb7ccf25f8e1b62409fd16bfe9f9a553a00d21cdf6849c54ca61204ac8a43cc8ec040e58218fa26b135073e0efd0ceb814e7c248efc496c35c865609efa1de125243974c394338f21c72ae375048f8d63fcad6b310bda5c8822713cdbd7d707c2c0ff7e9befc740af997a82c18ee71428fcd6916029c0c8a6d3ff36ea3ee7b8139272eb4387d0409d2c06eaac0425a9125bce353098660fe1ca83fe44b9011715a658660101f5822f8e12d916d595eb3989fb39582f480df6d8d7c002889bad485321e1117f30e54bfc2defd825492d8cdb0647337d439912cb857128e67186f9d2d235d49f9a0944ea70e0eb4b72a7571f5ef6b763296d34c727db61b6a76e9ddd78181e65482e637c3178994879bdb20b00c2edc9e100c0e75f599cd02b0bb64b8b82cb6943c20a91c57767e34cf1417866c15a2f8e1af6f6304a733c38c8e3df3736145813dc52e5a9dd6aee7f4094a7cbdd830c69addabaf089837f5ff515a5216a7194e26d79666818e8f794962a33bbb770b5a72e7333ff5b910cb8760f0bf857af79233e124bf0a1fc7f7d43885e250a79a249ad3081e011466aa7ce7fb2aa0182846a3ac1742292a9d80b794ecba89356e1854c3798849171934267c01ac60aa5d4f32edb157db75f51d2f2cbf10e52544f6130d72b0d243bd80cf18c0c89cc4471c7ffad8b1df19629c277058823082b95030a924bf23a4eac732caca988d5f9997feca9fc9fe6fa9aace3b9643f3afc0202fa8faa381f569bb2d389d5c525fce59b5965894135dcc102937b5f7177934ebd1f3ef370ef4e6fd86c524c010c8644b0c02381132dff206149e099c0719e61c0e51b7757aabe175c1b65c9e3effbd0d37beb0e30a13433668c64e8363049f661fe3c45d553607772ae349f1119bf5cf09a8beacd2858740bc900327f5e97c6d7749346d07f69d1dcbe165f13036aa2f7c62b7a0ef37b9efab3fad2db701c7d16f06f9d6cd429b1402f161e01ab32084d6a87138154d3844cf609e6bd567b3af5089075b1c0eefb35d329af57418a8b1bf0e099338387a7de4631de66d96c31e47d8a4d22aeecea3b7ffe371d33e1ecdd9ac74e359bba36ef9aa23cae0208d8d18411188039cd7a99056be8760efdac09770d440c14f6d20cdbe3a4daf1713ef54ebe246796a83f0d44b83e8f3c45a15536f175a06825a5656959750b63766cc169d58cdb1ab032f8aacd1c97dd8a7ed8da7a54786b8fec5d9b7a5ea2f2d1deeb9991fcc74d96fd0f03d4312b8efd21ee77bbb6e65384af4212c1c8ab946dbad3ad7a20d426c22f4210955cbd91a7bff5ad5f4c5d878f699e3fdc420cf1cdba9031793a0b949ba3b2b0e7bddbbf27b66f98586f5eb61d897ea0b4a989d16ffa4d0bdd8887b66bb0dc30dc342fe57a38ae5ab894cebde329cd953ef1574e05f2d3a7a2d5a77d6dab7af3e26008c663c2e349935dcfb9f8f87991d0cc587528aaac537ef623ef49598938552259fe4b1ff94ed4cf3325e92a52fb063207f292b31e9269a7f5fa96596f79324884ee6ebcd0457c0bb0e95e96dc1d2539474f34a687db17a8ecf707b645c721db3a8e5133f039df1c49be5063dbfac03cac05dc24feed7e9f9c77cfe47c1db45e96b9d89dc3934c3ad0da16e2e0c386b9b2d98dd35d8fddb8454d1ecf46121980c56c765c67940778bca21b9925d94018ebba2455e05c0590087653905eaa852ab47fa8ee734017a747246bb20ebc3354a630b7a5c256d9c94714a51958da98c4ac4882ee129ab3b869151ab52f6490e26211f65732f6f6225472c06a74cdcd2b2d86c6f453375c2978027a85d13843a5853663b86c175f72b9c60f4c5fc5195c01dfa743c8e900e4e39324d1867625ae40486c4abec523377e810cef6add4541f0e9a924f25b572a9844f6c3cfe8834995d43b8246a8b5cf8f62e7e3344623dbd979f350e57f642cb6e7d2fa33da6548720655644bad3d5f0cad3bd176b383c9de0ea2c844d07db9dd78a1590a60904308fa2700da15ba4f1b0ab5b6226560b25dd32dcbfc135b424ae1147c6865158db41dacd71169ca32e62e752e6c97ff0a485094c4d78a1651b07a9595b66fd0801704eaa67cdf3b60a255a6e3ce7042a0920631e77ebbe64f9699fa813d760b1d8482291df328ab40e2167d5f381c301bac39abd7aca170b36f852560a227fbd3bcd2f214a2adbc46be7c6a551bc9c725ba1751cd2d63f97e3f6aec816e315cd9a4a7e611b2db4d89b29792b6a806c82fceab2b9eac72f18ffd0b40b68b5af575b069042c48a3d07f3401037b23d6140a51f566ab6c8bdf25fe9d17c49e86cc740dfea54eed7d77a554dd14a22d79c311846038a3ea547e9dd2a0b7c21335238c9ba857cfc254cea2ea9f3fb00fe2d2694bd7e586a5e8d5efb09dead6bda8439622e100cfacda85515b85674cae4e3a9cbd79e29f196c48209d981fd994ba3abe8ea4619a14f22da9e84b92b2ebc08502a26854c7ea9f8acddfdf1edcdb7c9ff70dc595d1406057e093ffede0e48d62a65d2d70ddf41331e0c86a532d9cff66f6b171077ef43f0d0ebac2adfa942d8ada37a7891ae658a160e72c441921e9c81ce932f85e75b05b3ddad6585898ea8f71886c2be722fc157d834c1a64295d955d66daf8aa1d3730a1661c250feea5b3c3d11a6a3a2ef2186b315e19b49e7a93e2e101ec91871bab4bfd49c3d491cd464b800c2aa9b704c857e7ebe8f6cdb030d51ffc85c2ccf9f6c8c728e9d08df2aa68f7ae98226dee94e29592428cc858d2010942fc6ed84e40dc19eba2e93c724189b259ecd53c6dae967196b4affacbe4558de87cfaec1b6f1fa4d37785cc0ddd589cfb3e8247ddfb373d6297e5fd81d1d05ad93cf722b91379350117c02899a5c35deb13109ac8093e8250607076a10b6424ac68d543f8008ec6b0a806cd93b674c3f2ecd55b47404a3c050dd3447e9262813bde3c49a89400af7c9effe3d4ef5491dc5d12e063ab3402ae5fed6db45256c324de03907c8ffdff9412850d56dc813a41691890c36f5b9103b59f4c2c8fb3bb3ce79511a9f9c6da32cc2e6f8a866a1c9ae8a485ec9271106e59aaa14830e6c7ec0e1da9a3cca9903e46513c0793d2c4f592de7525a0d9d8eb04e711605910d484782da131431ca3bbdab7f348ff374548c06d75c1d16a64f249b3ef1a3e509e5d785447a3c285828453c082fe302f7c81afb3bec844a9b293f492762a74da11c16ef1d76fb078aaef1718c29a08261d96a9b4b8231725b70426988212ecbc20c769b3240e54be59bf247a7d60ec36e97aab8108746cc3443e0077961920af822ee488fb8a84ec0fe7a888f1538908fc5f4974de74dfcd0c6ca28c4f34e33e3e7f1dc497d14c0a85bae747b7d0ee7c6352d1e03a3e7ffd82eabde313f387f434722a5dfae7633382fcbb328766e72f55a192f3ce1d974af06e72951ce755e5b94715530b483f26140d6186339799b6a746ec61bd78857926a5123caebe5058660a55c4c211b0844041ff11fa2db7c8e4f6b5bbf879ca7d8f41c3cf04d2a81e1bc5eefd6e2ca8e3c991911d4b0f8a7cf146d50412b3b3d024462c575c24c0c8b7fd17f1f60ddef0fcecec424e4f5ad3806a10a7863cfa4c559945eaef6bd18922c80c424f918fc24c41db3ccdb323314efb0ff63cffb39ca90814141548f8045358db77138c2d0c7be1cac8980c6eeb1d5566fd9121028335833c59051ef1e458935b5fa3b487a42d65348ac4adb374aee72bdcec87355ef409ccf1bda192ee9dcb8fc26065c9e0c75f9e2de9e73aef59a26bafb011989aba560f301350bcbc95c79589db462f32230cb54be87f4c06775798d352f9ca8c429115726a2c1853ce99dad41959057247906090bda63979c76b544fa44cc3982d7b171304b799542f408fb1c13a8805b90a2982bea88f6c399aa7b14ec5f78b24f86ec69d1c6b33c883565aaa6aa4e30e6278b401170833f36f1202274ec508365620a8f13a097d90c4a9222ea913721b1679df4525f61500e108c1e56f44fc18756c2077a479ee6ec783be61de92d3c3a0e392a7cd57a4187371073c9513b8cee925a0781e47f5c2f21afbcb06f3b4abfc1ca6456f9f57b2885dc1b4711bfc60f2b7f22573600658d50590ea49a175f9c3e43c3c9d3d44a6a240c7207d4e455d5eeee85ce25e8d23010df6997750b4721ef5eab426673b8b7b4b9a40141d9fc1d94698ce39e25de37e46d32d59d98b41b386ad56a5b1455526523607e8fb690d895c1adb2f75f9f1008dfacf64171241bd1b119645885dda9e711619b39c93d2c8d12a72115cf4ed977f473342d12640f20a90f903e1e7e35ab0b96189efd16a4daec5f6ceedffab68203d66ad2dde0ef5fa44f18c2b6a87217b5b3a44f141c6e1cfe900f534306469f9272bbfdda43ad8c367ea776bc7f823883b29f1777fb97306dd27ed5df841b144bf2655431e4c7adde5fe1721e0748436a4de37116965ba114a74eceff2997f1ed450483e63d8f2b42afb329e42a958076049af7248ec9c00a6e863f4bb9b91868fb00389239afd49c3332f958ed39ce8b1bbbd88e4f9445417e945a179f94524ebe17fa41b8cbcd211ac6607d16a09d554abf09d7d219dc0270aa50e186f89003bfeb157ca42373c527e60bcb307b02c05ead369e3ff9019819f20001d305639161bb8d5fbcf32f88b141b6973accd99c758973ddf593c3589582e0c0dcc6215c53cbd8093f05e5d334802b3ccfc54efb0351ddee2bbd483840f72e0a3baf97e121878b4b2002cd130d199e2da2899561cbcefd8cf651e3516e3bea45b613ba5e128b77079add5d82f3612af5447730e7645face1b285e6dd19a30bb3f16d92355f6593c81c51fd4626402cf406d1dbd6593008c59e001963b1f31a891f1f072df561a21d101dc90ff09183a55c360b8cddc4a614aadf05e40f668b0d19277bae2270cbb671c379451fff06b47c0a64358d6ea374de3eb326900a2a9a057aecd002a49231f120dd5b92ace3a194a990d03253db4fa1b48c95a03248ab0308ce659111edf75a736e709dcd686b21d0ac930560ef0daf52f2b6f2b7edee7259b5e9e5d3454af03ea859c28270b36bdaab477b6a82fa274dc3fb1d425641021ea92588c94a0fa131e77da41a4b4ec6c73bda27f2b9ac64b701a39ff2b5eaac3182dabe20ee3ef51b80e9f470ca3f6fba16de47a1a99f20a0c03b6bdc7ced324cd5f36a1d7902ee439467f357c0ff602c1be0609eb00f4147af9173a0ca3f19afef9265787e4ad78485d8929bc123899e6d80798a0247c5e441138f2e8f0c9df9bb9d619a9d792766dcdb23986c03542ffc50ac26cf3b627bf609c59c76a93f20b08c58490e5125d410f25fa2a0bd588ff48880f678dae5006a9d9cdf09977d19192835afe4a688b36555e566b3a020ed04182d218f37e91bc06d34280aec7f3a05b539c817c8b6f21fc95965fd823a88270ecafa42717bab2e807829c3d60755fbf09e63914b5767ecec7fa1de38f4592d0b165eefc473791fd18a2c78e87d542487d816071f3ad731a09805d0b54cecd513cc824d4eca26aa546f1c5cd7136bf6ae85ebea4ab22ab58d3769fd0e47a8cdc3d54e1314a06e378d5aff53ff6ba1db8b20f450f238b7c4d6538239220e37bb11bde31de7c46bd37f82e8f3d45622f96ec05d689297cab65f69e637b3db6da52507482bf8d010b352e3d6f22e26a2d132acd5b212330d2845f4a9025d5f06b133e7c10d10862395fd49bb169116dfd95420924a9d7274682b2f1ded4b168fe2cc49cd38e8248cb43ed1eb2f2cb2cef59245c51f29e1abdef3b448d062952331d5c99aff44b4fc7d647c045661fb1e6909e6e0638416ef9fde3d2ba58e160aacc57b88c895a3cbe82ad9f54a0124da6fbd3d4ed6b48934e497c5e19d4640106652f2cdfbf64b4c3c8e8d67595afb92881daaf086328d8042eb63f6387c7a86a405d4730a2621f30613496c9f5ae049340bb9c4bcff245f0aa402f14393d4022ca25fd4742849671e50fcd5bf920b52ff1d185992f5e42f735a859052047dad61b7b83d618e4a9a91383d4b4feba400f42b5219d5caadcda005188557c2beec8c989c4a0d7880c9ece3c20cc2e254351276917a6ac09d26deca4f778b21f332fa374d2dfff7b71c0bfd51907b2c2208b0062a1e5f93f2d19bcc2aa9019bb4a3f95908c195f1bad08510b66beb4c1cd5d50f6b9565454709c0ff8678af0aa0ed290335c313ce90ca0ce00f0d0fd512cc5d08244bf133dca2b5c72c9a959d724b8bfc1c65d233c623b48f44fffdae7da18f9976444001cf5d1d2a02bce36e0dae8cc8f340e615bd54f4884b02ec5f885ffd84b085f5a0678b401ae22791aee8d69ae582c33f3faf8361ccefe6d35f4b247586124663096bb3f05c0f5b693fe9dbfdc8dc992c5badb1c65c7dc200216eb1bbe29fbd795d9d63b3b015ecde2102ce326d878d21d4dcb80526095d4cda5b52a8c7220492ae1f6499966e572d66b339e56da966b8160399dc8ce3ce497e48eec3ab44d3a04bfae45f2d22b9be3aedde878c103c3ce62f33914345ec6c15b2186a2ce79cdb8c7d3179c9e3c08660988c66d3df505e9f64c2fe339421e73f3031f8f205f82455bd9f48d960c4a1e5260cc533900c75a91fabd165f6a44757265f031d2d2f74e9a258c8a1a57a243e97c1cb616db177553717232038c72054f2a2e912b2c802d877ef8e114e81a1f8b635ad232b6aff171d79bc9733197c9a33bd4b44d7397c1d61282d49934dd3cfafa50e243bd07e5caaba1999f57e2bf0a847e216a8b978418e72df3fe4c1d589584ddc4ac3541377bec609961a15d411ecb156cad9b5526154cebc36d7f7c6cdb9deb0bf60f30978bdb1ce6844d00540a0e1b9700393f81bfeae7b35d83db2d4efec0484f4ae316688cddde6fbfb0fed6b6aa16ec30701179a063280687d6af162ba2007f82ff0ae356eee0c0a67514cdef8e0d3c06b6f411349e662eb5c2b17c2c6d56d732d32d9761622ca3291542eb5a9142c45d35a73f5b606bb28a4dc190269b431f14341c3dc0d08f50b8f788cc41ab2d2a0239042920f2fd791bff8c5a8c5a24ba495fa9cd26142d979ca06ca275de2b3a8750fdb4af039c5755b724c72bcb5905530cfc3fd127d96b1ad5dfd8aa2f1bdb7690e005a9b3fe20a597c5337fe551f523f85e0910b7ae493d39fd8a27c0ba934fa2cb736da54c5022cbb271adfa5c3f30ac7ac9a939f2aacf3fe4417b26fc58e0fb4df686f3b8e8dd3fc7b7ce660014d57005f844c6ccfb39922f2852c57d2927abcc94dcf486be1c28d6b0ba96e1a77e7dac4e755dc7f3e0059ed5b02e667580936a147ee7f6d6df3a04226cf1545f55ac05cc20832657a75444240f242cff833fe85584b5b345c78284c804d530f27a0fda47358b559939b1472b807d27ca6d1d50ebf5a6f186d68ba0f083ae601d74c7489af33f8ca6a57432b2e162075907bf9cdf36fbe41c2e5db5d83cbc83ca2347caddc7535d7523af05d47fb3aaed72b50965c02aba5ecaf37040626aa49dca671b101fdc48626706107389ff6da154a1ebdc5bb55613ae0655ae95a220bf7c43938854071e68e7d29b94f3417962d19aa38a37a67e08681da7132c91b6016094353042e48f46feac6b4b7194e7610c9072fbaa8fc6f7f6318a6c1ec31e01efa71f9495a88d82f569ab54a93b5854a25eb16671b0022e3def13c79c19b794ff111e165be71fb044c2356b92b4830474660b3af84c02dc986cf8fb99432aaadc47ff439e85a92fa15f5684dd04cabbfcd25ab88d7b4e7fe9a0245395d83e1a5e5bd331a90a6124ee42219a16c55c12810d2948d390c69e7b7d95025846a14030bc034a559a08fb62fd80c9df1ada10e1bf94a2a9d340fe888efd2d581fa84e4f0e41b7fbd24f38bc8fc790b3819def2493257926744e72abf7e3c9deb8852b44ac5e865a10d678645ec4fd7e913affa6e486c2cdb54985b3930fece28a2e5cb4e519bef5cd9f9bab75c02d0e81af1daf642e8521dbfd716b6e7a7206b3c8594d5793f42153e1238639f06faa89e99d45ca2ec55f68c2726de90a873fbc31663cf238a7fb5d47a2312622d39f5775335492cc2584c96d5a87784bb0eba043982c2e2f6007eaf22096aec10eda7f1f89670e03aa7f7dd75c888ec9a9b205a6dbf6cd1f2b202972c3a91369fb1a0e5528031842918c8e444f48e2aaa963b293401ca8440e21a03a0a2467119d689ce49d8ba72457c5e243e2175b5430082a2dcdeca9d0ab46ad561d802562c5829c221bfc58fef6246dbba86d56b3f27d6111d059560a7c876c7c48223033ce202711c751402374932898c2eaa9128a92120c4f2fbbaa466e7ae297bcc1e62511a9e6d89032527c38a5c224446dbbd505c1377ecfa93bd790f49486d252356b6c444cb911eda8fdaf176d2c155c1975746056a0cd6462d9ebb407d92190b2bee2c696254fb8b25054d303219ee7084c54d55ce2260a5fac695fcf982450591503b6e25be451f68fb2104fc958b88c51bc71e8efe4f06a797b6f25c761f2ee2b29c66084724e5294f30c7c624ab6a1843b732cdfd9aa96651f6869831a8243771b470813e18fd691ef14bc39bf33721f905eb1fa747734713878df47a10cc0665616f2a715be0b2d971bef3552ee1cd5f74d3acdfbbba0a73fe659916507918f59219e73ad387b2445a5099c7b4be0213978d52db4408e7d9defe62a2e30c00306fed4aa7de791dcafa14906ec3d1f2164f68e27caa9198d4b4e1aff1a3d8e8305ed3c6117a92a6147368550295eb01204b8c7b9f6f71928168804038ad2ad5734a581050ae43a7efeebc1d12e2a68aa957745fa2d47ddc421af3174d41496fbc26f0c6431499bebe69bf801f7e207a115fc2cfcfd2faab238ee474bb04df38c90b1766ae6bd56cf274d2edd86d006d4ed7ee78e653d15a999379e4a9bfdee4317ce50ebc8c06b97fae03aabf6a5019327d2155ef800bf3c6a018c3648df009e49b7e6a334df58f45eca04817ef4e71944ac88a3f0afd9ac69257cffdced82bd1feb704adb8cc223f64a7e0cafc91cf4c83e86dadd49c736badb2e30718dcb8cf6d81d02bda84379c2a6a84d2fc00aa7eea7e81762cf222d7a0a826f9e64678a6483c4af37d680321b0592c66f6d9e623684886181917e8be4a7fdad5c79e6349aea99375fae08c80dc8ecd8e02c07ca86db829c8e4e390ec783a857cfeb401f8292bab96bfeda65557d493b252884a50356764d58406dff0394beec2c1947e14fb552445d2715182a7a303904d2c0395ffd0658f010df8f7d1b41627e3f6efacb76c103cc30fc81752f4cf81511a3b0b0ee8348050136bce7a719e1e18deba51244542e66db3d3516e1e2b9269d7833b785c0bef94547e819a81f446fc993e8ced93d818cea8dbb144a6101a5a9b7213969bf69a7a9539d4e8189a0b6a0f53c2e1e63d27f8b0ec135ad56c62abbb5a8dd039c93d5c8abe5af7e1150ec47794ea1318cf2e91101abaa73a70a77731b7e4161a70083c55d42588e648c4d4e58df7a9fcea9d2fd418d1061092b0e89dfd38a88c004605287df04e78d2bc7a4293c05664373e67856dc780c2be7897676827b123c893dfd3c468e5530e8ac0de36d7bc6ad62b5446efbdab05ee4e4d757b17876d33bc58204d30cc870703124512e1fb40a2bb9f9cf4de36800fc12ac2517e5f347d7e74346df6415680a87192ba2861e28d180af457683c16bf805ea881db0114453ba802c7b5b00f2bf39c629e78e5a6c4b03dd2eb98b7434df462b748d5db373330f0eb37a51a0ddcf8b949889269525db036fdfe404bbea9909e20e8bb66a5a6d64a8a2ead6e4d4048da3d19f5b8b49c89d9fc4f4c67d9647cabc616ea60b4527542d43c595973c04570b5afa0092de9476c339b3bf4f0e63e302667c919446b38efea21663943c9c459933cd47d434a6a23547dca496f4748a136185d0339a4e81bbe31aa11ba26ce7d67aabe9c23ff6b274d7303025362536fbdaaa70583aa1ec6806c4f0a19c2905eed4a9ef35ac0965fd885e87db3e07c00f9517ba773498bdd8ac8a8c03a2d14888c625b2d685712fc3e2f37e477317aa40fb1a2aaaff65b45eef9b7345ccdfc8feca9471bdee2f7e9c6928b5ed5047ea0c0e1af06f79fc935c113684e3775f3c4b30dc7527e1acad5201e41dc1c8281c5a2edfcc8d1731c26b6990df78e56aa93f37901921cd19ee13f343eda5fb43c47608534576ce730575265e2b204c3b858e830da848a85db0fbe314acca1c8a28b5d24be2e0e8567747e83104c18ee0a572bb6ea0d3df07763d1a7c6198d85289db99e7fe024ed805fcad11d6a2109bc0fe241a6986b94ab3d09c944d168fcdeeee494ce3a4b9f040a4ff63247b15dd98655d62db8584aaacd3c54663b4d2ffff8ea0ff289628ea6781f72db9ce29d82328512c6b2a1a2acdc88f283ac044b11ac04838f280f84a904328dcf5792b74adcd9b6672a4ee995f2aca8a47d3c47272addfea5141dcd1e876d477d802f0c7f5a325cef29b17d2a87db602e927b5eea6d42f1384fda0025028435bafe9e1da0e9fdae4a962776c1fb963fe55eb85f3f7f8a018c379c864a02ba8bcfa07f3c0ddc6ffac46f8ab2fbc0e7974a37e27c5ce56fc30ab3db9f5c2ff235ceb62be1b113ab1a560e8c2828f8f49ead1a5c515d30dba6a73c78e4a732852d1b213842a24d5a280330496597ad360777f9ddf6439a385d9519add66bace0c06d4a33ec0a0cef5e8fb64cb5b70139b7d4caea17325af8fe31a223cd0c404c7db2cfabf4782b65a5bfbcbc952355a0e692cefd2962fef28ff72cafebaa2544faae0bd8af23f6736fbe9f6fb1c357c93fdcc65affae966c5f98cc0c8eb5771fbb6fa5fb7be700a267367300dfb02cac8e3a3eed40c3d1aac40a11b4cb8994da864c4ac99f087f66705227237a5aad423789b5f4eb810352e66e6e0e771619605a601c08d39cd7bf9c83245383a57593ba0ee840f68ccc376720a2d3892c1344e305ef3deb183c9b824811ece11b4f7caff8e805c175fa4f90300af32c98bd9dc45232bb8c304d8915233afd8898ac51694987d89bb94f9e82a5a1d646eb88bb35c47a9850b06c39b1475913123844a07e9f19ebf33db23c72c43b980ff23792e0958908745aee2d864674ffdf99e5f053c1ae3b81dc341d4072d6af5777ca5ba505a24c1bd9bf4faa8b93728f56b0dc1b21382a9239eb730001375c5ec05fb6be3c3b8554d562d82917ca9192a36b9e5ba10be5ec1994e8ca170867ea9c5eda7ce91d54ce761a92137db8b4d5fab1e20cec5a2ae20b8f71416f839cf9c40f1f1d431dede85a2387867ce4e09d891abf7e6ca7c40af5560538ad611d2e5ec2a6fe8d00ef8064b70395aa8d56a258723a329897e4ed9b2e772806ac274ba6d7c78dc6ffbd8f73244e6bcc2bb692a6839a092cae0bbc957b6230087f58e196549005941d26069f75a237394b037b5c3f148c92dbf8a069ede6a98d358fc4b7f462a3bc6a0bf3b3f148af3b80c624e01cf963b024cb8077fd1eb4c3ff259eac2b6a89909da2987eb0b103ed7826407f6071bfb2e742e31b405f3bdb15409d68146ce00e951af5f5466f385f68363612009fee3eb8aec2973b650258ddf1735b9773c2ac541da105e3195bf0525cacc278c6a8a0983cb7c4bf21413ceced7d9054d6bbc31537c340b2c0b0079dcd7cfbd8d9292c3da60aeb77c1cbed75253633275c8642b9534d94f3eece5a0eda27e7ef031bd1f277de3c7be8041713d9232a355f2f528b7e459a2da548da77628a48f28db55776d92ef191663e26384732103399180e2ca04855dbca5c47285e866f1d05cef237a0248c1e7b0e4a361bec1cfc42259acd8f67910504df190201afa79886b82ac96f63143476edd3ddcebd273391be6f100566dc03371c1b3963593276e194f4a212dede21197b85d3e45d1d4d461e19094f659d2904c3bfae7f723301e3a9c357576def95c0c09dc8a940869c02cf37b55f1900b3298299f360548713fbc983bb55b812aac56c898c1ae1ca6c2e7d7c9e9c8627c7384b2225b3cafa52ce3f88096a5d1fa238a3e0a89a2744d54edf694a938993ffd9654b5175defad6e9f5852ce8ba210bf30b29731bfc85ddcb89303ebe8f0d13c6caa22d1eb1cbf08c74cd77c14228f85d48a5b67b2a22d350909b4bae92e42511c6d13f97d5341baa7731a973cc03e5196cd2a2aedcde6d008a9a7c3571a542c23b1d2d1dfd4a175c6690fc2ffb777393deb17d5e8381a5088bf1ab8616dd777a1de5e88a106841b5ef18a6eb3de7ebf1d3497d87317dc27d3177863ca1753905eec86bf12819a9ca0208855a057eaef5c0c333d830b8e550b41df7560e8a2cad27f8ba17739d3081d6eac21271870b37eb366dd250340506159bb3eb3f13c1096a76bdce32cdef732644e75f97e747695724d677aaa8f20d56758e633479b35e903a0d1344c47eae0092e9e18a03e3d09b405dfe7d4da29a922f6260f1a55022049cd06349d14d</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">è¯·è¾“å…¥å¯†ç æ¥é˜…è¯»è¯¥æ–‡ç« </span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> Doc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•™ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[æ•°æ®ç»“æ„]é¡ºåºè¡¨å’Œé“¾è¡¨çš„æ¯”è¾ƒ</title>
      <link href="/2022/06/20/10484c918977-q1jun/"/>
      <url>/2022/06/20/10484c918977-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="é¡ºåºè¡¨å’Œé“¾è¡¨çš„æ¯”è¾ƒ"><a href="#é¡ºåºè¡¨å’Œé“¾è¡¨çš„æ¯”è¾ƒ" class="headerlink" title="é¡ºåºè¡¨å’Œé“¾è¡¨çš„æ¯”è¾ƒ"></a>é¡ºåºè¡¨å’Œé“¾è¡¨çš„æ¯”è¾ƒ</h1><h2 id="0x01-å­˜å–-x2F-è¯»å†™æ–¹å¼"><a href="#0x01-å­˜å–-x2F-è¯»å†™æ–¹å¼" class="headerlink" title="0x01 å­˜å–&#x2F;è¯»å†™æ–¹å¼"></a>0x01 å­˜å–&#x2F;è¯»å†™æ–¹å¼</h2><h3 id="é¡ºåºè¡¨"><a href="#é¡ºåºè¡¨" class="headerlink" title="é¡ºåºè¡¨"></a>é¡ºåºè¡¨</h3><p>å¯ä»¥é¡ºåºå­˜å–ï¼Œä¹Ÿå¯ä»¥éšæœºå­˜å–ï¼Œåªéœ€è¦è®¿é—®ä¸€æ¬¡ã€‚æ—¶é—´å¤æ‚åº¦ï¼š$O(1)$</p><h3 id="é“¾è¡¨"><a href="#é“¾è¡¨" class="headerlink" title="é“¾è¡¨"></a>é“¾è¡¨</h3><p>åªèƒ½ä»å¤´é¡ºåºè¯»å–å…ƒç´ ã€‚æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$</p><h2 id="0x02-é€»è¾‘ç»“æ„å’Œç‰©ç†ç»“æ„"><a href="#0x02-é€»è¾‘ç»“æ„å’Œç‰©ç†ç»“æ„" class="headerlink" title="0x02 é€»è¾‘ç»“æ„å’Œç‰©ç†ç»“æ„"></a>0x02 é€»è¾‘ç»“æ„å’Œç‰©ç†ç»“æ„</h2><h3 id="é¡ºåºè¡¨-1"><a href="#é¡ºåºè¡¨-1" class="headerlink" title="é¡ºåºè¡¨"></a>é¡ºåºè¡¨</h3><p>é‡‡ç”¨<code>é¡ºåºç»“æ„</code>ï¼Œé€»è¾‘ä¸Šç›¸é‚»çš„å…ƒç´ ï¼Œå¯¹åº”çš„ç‰©ç†å­˜å‚¨ä½ç½®ä¹Ÿç›¸é‚»ã€‚</p><h3 id="é“¾è¡¨-1"><a href="#é“¾è¡¨-1" class="headerlink" title="é“¾è¡¨"></a>é“¾è¡¨</h3><p>é‡‡ç”¨<code>é“¾å¼ç»“æ„</code>ï¼Œé€»è¾‘ç»“æ„ä¸Šç›¸é‚»çš„å…ƒç´ ï¼Œç‰©ç†ä½ç½®ä¸ä¸€å®šä¸ä¸€å®šç›¸é‚»ï¼Œå¯¹åº”çš„é€»è¾‘å…³ç³»æ˜¯ç”¨æŒ‡é’ˆæ¥è¡¨ç¤ºçš„ã€‚</p><h2 id="0x03-CRUDæ“ä½œ"><a href="#0x03-CRUDæ“ä½œ" class="headerlink" title="0x03 CRUDæ“ä½œ"></a>0x03 CRUDæ“ä½œ</h2><h3 id="é¡ºåºè¡¨-2"><a href="#é¡ºåºè¡¨-2" class="headerlink" title="é¡ºåºè¡¨"></a>é¡ºåºè¡¨</h3><p>å¯¹äº<code>æŒ‰å€¼</code>æŸ¥æ‰¾ï¼Œé¡ºåºè¡¨æ— åºæ—¶æ—¶é—´å¤æ‚åº¦ï¼š$O(n)$ï¼Œæœ‰åºæ—¶å¯ç”¨æŠ˜åŠ&#x2F;äºŒåˆ†æŸ¥æ‰¾ï¼Œæ—¶é—´å¤æ‚åº¦ï¼š$O(log_2n)$ï¼›</p><p>å¯¹äº<code>æŒ‰ä½</code>æŸ¥æ‰¾ï¼Œé¡ºåºè¡¨æ”¯æŒéšæœºå­˜å–ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºï¼š$O(1)$;</p><h3 id="é“¾è¡¨-2"><a href="#é“¾è¡¨-2" class="headerlink" title="é“¾è¡¨"></a>é“¾è¡¨</h3><p>å¯¹äº<code>æŒ‰å€¼</code>æŸ¥æ‰¾ï¼Œé“¾è¡¨çš„æ—¶é—´å¤æ‚åº¦ä¸ºï¼š$O(n)$;</p><p>å¯¹äº<code>æŒ‰ä½</code>æŸ¥æ‰¾ï¼Œé“¾è¡¨çš„æ—¶é—´å¤æ‚åº¦ä¹Ÿä¸ºï¼š$O(n)$ï¼›</p><blockquote><p>ç”±äºé¡ºåºè¡¨åœ¨<code>ç‰©ç†ç»“æ„</code>ä¸Šä¹Ÿæ˜¯è¿ç»­å­˜æ”¾çš„ï¼Œåœ¨è¿›è¡Œ<code>æ’å…¥</code>å’Œ<code>åˆ é™¤</code>æ“ä½œæ—¶éœ€è¦æŒªåŠ¨å¤§é‡æ•°æ®ï¼Œé€ æˆæ‰§è¡Œæ•ˆç‡ä½ä¸‹ã€‚</p><p>æ‰€ä»¥åœ¨å¤§é‡æ•°æ®çš„æƒ…å†µä¸‹é€‚åˆä½¿ç”¨é“¾è¡¨è¿›è¡Œå­˜å‚¨ã€‚</p></blockquote><h2 id="0x04-ç©ºé—´åˆ†é…"><a href="#0x04-ç©ºé—´åˆ†é…" class="headerlink" title="0x04 ç©ºé—´åˆ†é…"></a>0x04 ç©ºé—´åˆ†é…</h2><p>  é¡ºåºå­˜å‚¨åœ¨é™æ€å­˜å‚¨åˆ†é…æƒ…å½¢ä¸‹ï¼Œä¸€æ—¦å­˜å‚¨ç©ºé—´è£…æ»¡å°±ä¸èƒ½æ‰©å……ï¼Œè‹¥å†åŠ å…¥æ–°å…ƒç´ ï¼Œåˆ™ä¼šå‡ºç°å†…å­˜æº¢å‡ºï¼Œå› æ­¤éœ€è¦é¢„å…ˆåˆ†é…è¶³å¤Ÿå¤§çš„å­˜å‚¨ç©ºé—´ã€‚é¢„å…ˆåˆ†é…è¿‡å¤§ï¼Œå¯èƒ½ä¼šå¯¼è‡´é¡ºåºè¡¨åéƒ¨å¤§é‡é—²ç½®ï¼›é¢„å…ˆåˆ†é…è¿‡å°ï¼Œåˆä¼šé€ æˆæº¢å‡ºã€‚åŠ¨æ€å­˜å‚¨åˆ†é…è™½ç„¶å­˜å‚¨ç©ºé—´å¯ä»¥æ‰©å……ï¼Œä½†éœ€è¦ç§»åŠ¨å¤§é‡å…ƒç´ ï¼Œå¯¼è‡´æ“ä½œæ•ˆç‡é™ä½ï¼Œè€Œä¸”è‹¥å†…å­˜ä¸­æ²¡æœ‰æ›´å¤§å—çš„è¿ç»­å­˜å‚¨ç©ºé—´ï¼Œåˆ™ä¼šå¯¼è‡´åˆ†é…å¤±è´¥ã€‚é“¾å¼å­˜å‚¨çš„ç»“ç‚¹ç©ºé—´å€¼åœ¨éœ€è¦æ—¶ç”³è¯·åˆ†é…ï¼Œåªè¦å†…å­˜æœ‰ç©ºé—´å°±å¯ä»¥åˆ†é…ï¼Œæ“ä½œçµæ´»ã€é«˜æ•ˆã€‚</p><blockquote><p>åœ¨å®é™…ä¸­éœ€è¦è€ƒè™‘çš„å› ç´ ï¼š</p><ul><li>åŸºäº<code>å­˜å‚¨</code>çš„è€ƒè™‘ï¼š<ul><li>éš¾ä»¥ä¼°è®¡çº¿æ€§è¡¨çš„é•¿åº¦æˆ–å­˜å‚¨è§„æ¨¡æ—¶ï¼Œä¸å®œé‡‡ç”¨é¡ºåºè¡¨ã€‚</li><li>é“¾è¡¨ä¸ç”¨äº‹å…ˆä¼°è®¡å­˜å‚¨è§„æ¨¡ï¼Œä½†é“¾è¡¨çš„å­˜å‚¨å¯†åº¦è¾ƒä½ï¼Œæ˜¾ç„¶é“¾å¼å­˜å‚¨ç»“æ„çš„å­˜å‚¨å¯†åº¦æ—¶å°äº1çš„ã€‚</li></ul></li><li>åŸºäº<code>è¿ç®—</code>çš„è€ƒè™‘ï¼š<ul><li>åœ¨é¡ºåºè¡¨ä¸­æŒ‰åºå·è®¿é—®$a_i$çš„æ—¶é—´å¤æ‚åº¦ä¸º$O(1)$,è€Œé“¾è¡¨ä¸­æŒ‰åºå·è®¿é—®çš„æ—¶é—´å¤æ‚åº¦ä¸º$O(n)$ï¼Œå› æ­¤è‹¥ç»å¸¸åšçš„è¿ç®—æ—¶æŒ‰åºå·è®¿é—®æ•°æ®å…ƒç´ ï¼Œåˆ™æ˜¾ç„¶é¡ºåºè¡¨ä¼˜äºé“¾è¡¨ã€‚</li><li>åœ¨é¡ºåºè¡¨ä¸­è¿›è¡Œæ’å…¥ã€åˆ é™¤æ“ä½œæ—¶ï¼Œå¹³å‡ç§»åŠ¨è¡¨ä¸­ä¸€åŠçš„å…ƒç´ ï¼Œå½“æ•°æ®å…ƒç´ çš„ä¿¡æ¯é‡è¾ƒå¤§ä¸”è¡¨è¾ƒé•¿æ—¶ï¼Œè¿™ä¸€ç‚¹æ˜¯ä¸åº”è¯¥å¿½è§†çš„ã€‚</li><li>åœ¨é“¾è¡¨ä¸­è¿›è¡Œæ’å…¥ã€åˆ é™¤æ“ä½œæ—¶ï¼Œè™½ç„¶ä¹Ÿè¦æ‰¾æ’å…¥ä½ç½®ï¼Œä½†æ“ä½œä¸»è¦è¿˜æ˜¯æ¯”è¾ƒæ“ä½œï¼Œä»è¿™ä¸ªè§’åº¦è€ƒè™‘æ˜¾ç„¶é“¾è¡¨ä¼˜äºé¡ºåºè¡¨ã€‚</li></ul></li><li>åŸºäº<code>ç¯å¢ƒ</code>çš„è€ƒè™‘ï¼š<ul><li>é¡ºåºè¡¨å®¹æ˜“å®ç°ï¼Œä»»ä½•é«˜çº§è¯­è¨€ä¸­éƒ½æœ‰æ•°ç»„ç±»å‹ã€‚</li><li>é“¾è¡¨çš„æ“ä½œæ—¶åŸºäºæŒ‡é’ˆçš„ï¼Œç›¸å¯¹æ¥è®²ï¼Œå‰è€…å®ç°è¾ƒä¸ºç®€å•ã€‚</li></ul></li></ul><blockquote><p>é€šå¸¸è¾ƒ<code>ç¨³å®š</code>çš„çº¿æ€§è¡¨é€‰æ‹©é¡ºåºå­˜å‚¨ï¼Œé¢‘ç¹<code>æ’å…¥ã€åˆ é™¤</code>çš„çº¿æ€§è¡¨é€‰æ‹©é“¾å¼å­˜å‚¨ã€‚</p></blockquote></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
            <tag> ç®—æ³• </tag>
            
            <tag> Cè¯­è¨€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[èŠ±æ¤’ç”Ÿå­˜]è¿›å…¥æœåŠ¡å™¨èŒæ–°æ•™ç¨‹</title>
      <link href="/2022/06/08/4bb38b6bcdc4-q1jun/"/>
      <url>/2022/06/08/4bb38b6bcdc4-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="èŠ±æ¤’ç”Ÿå­˜èŒæ–°æ•™ç¨‹"><a href="#èŠ±æ¤’ç”Ÿå­˜èŒæ–°æ•™ç¨‹" class="headerlink" title="èŠ±æ¤’ç”Ÿå­˜èŒæ–°æ•™ç¨‹"></a>èŠ±æ¤’ç”Ÿå­˜èŒæ–°æ•™ç¨‹</h1><blockquote><p>æœåŠ¡å™¨åœ°å€ï¼šmc.q1jun.cn</p><p>æœåŠ¡å™¨äº¤æµç¾¤: 912457864</p><p>æœåŠ¡å™¨è¯­éŸ³: <a target="_blank" rel="noopener" href="https://kaihei.co/V0aEIh">https://kaihei.co/V0aEIh</a></p></blockquote><h2 id="0x01-å®‰è£…æˆ‘çš„ä¸–ç•Œ"><a href="#0x01-å®‰è£…æˆ‘çš„ä¸–ç•Œ" class="headerlink" title="0x01 å®‰è£…æˆ‘çš„ä¸–ç•Œ"></a>0x01 å®‰è£…æˆ‘çš„ä¸–ç•Œ</h2><blockquote><p>å¦‚æœä½ å·²ç»å®‰è£…äº†æˆ‘çš„ä¸–ç•Œ(Java)1.18.1ç‰ˆæœ¬åˆ™å¯ä»¥è·³è¿‡è¿™æ­¥ã€‚</p></blockquote><h3 id="0x0101-é…ç½®Java-17ç¯å¢ƒ"><a href="#0x0101-é…ç½®Java-17ç¯å¢ƒ" class="headerlink" title="0x0101 é…ç½®Java 17ç¯å¢ƒ"></a>0x0101 é…ç½®Java 17ç¯å¢ƒ</h3><p>æˆ‘çš„ä¸–ç•Œ<code>1.18.1</code>ç‰ˆæœ¬æ˜¯åœ¨<code>Java 17</code>ç¯å¢ƒä¸‹è¿è¡Œçš„ï¼Œå¦‚<code>Java 16</code>ã€<code>Java 8</code>ç­‰éƒ½ä¸èƒ½è¿è¡Œã€‚</p><p><strong>æŸ¥çœ‹Javaç‰ˆæœ¬çš„æ–¹æ³•ï¼š</strong></p><p><kbd>Win</kbd>+<kbd>R</kbd>è¾“å…¥cmdï¼Œæ‰“å¼€å‘½ä»¤è¡Œç•Œé¢è¾“å…¥ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure><p>å›è½¦ï¼Œè‹¥æ˜¾ç¤ºå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">java version &quot;17.0.1&quot; 2021-10-19 LTS</span><br><span class="line">Java(TM) SE Runtime Environment (build 17.0.1+12-LTS-39)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 17.0.1+12-LTS-39, mixed mode, sharing)</span><br></pre></td></tr></table></figure><p>åˆ™è¯´æ˜æ˜¯<code>Java 17.0.1</code>ï¼Œæ­å–œä½ ï¼Œå¯ä»¥è¿è¡Œ<code>1.18.1</code>ç‰ˆæœ¬ï¼</p><p>å¦‚æœä¸æ˜¯Java 17ï¼Œåˆ™éœ€è¦é‡æ–°å®‰è£…Javaç¯å¢ƒï¼Œæˆ–è€…é€šè¿‡å…¶ä»–MCå¯åŠ¨å™¨è¾…åŠ©å®‰è£…ï¼ˆç•¥ï¼Œå‚è€ƒæœç´¢å¼•æ“ï¼‰ã€‚</p><blockquote><p>Java 17ä¸‹è½½åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://www.oracle.com/java/technologies/downloads/#jdk17-windows">https://www.oracle.com/java/technologies/downloads/#jdk17-windows</a></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220610125122802.png" alt="image-20220610125122802"></p></blockquote><h3 id="0x0102-è¿è¡Œæˆ‘çš„ä¸–ç•Œ"><a href="#0x0102-è¿è¡Œæˆ‘çš„ä¸–ç•Œ" class="headerlink" title="0x0102 è¿è¡Œæˆ‘çš„ä¸–ç•Œ"></a>0x0102 è¿è¡Œæˆ‘çš„ä¸–ç•Œ</h3><h4 id="1-æ–°å»ºæ–‡ä»¶å¤¹"><a href="#1-æ–°å»ºæ–‡ä»¶å¤¹" class="headerlink" title="1. æ–°å»ºæ–‡ä»¶å¤¹"></a>1. æ–°å»ºæ–‡ä»¶å¤¹</h4><p>æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜æ”¾æˆ‘çš„ä¸–ç•Œæ¸¸æˆï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220608165233355.png" alt="image-20220608165233355"></p><h4 id="2-ä¸‹è½½å¯åŠ¨å™¨"><a href="#2-ä¸‹è½½å¯åŠ¨å™¨" class="headerlink" title="2. ä¸‹è½½å¯åŠ¨å™¨"></a>2. ä¸‹è½½å¯åŠ¨å™¨</h4><blockquote><p>å¯ä»¥ä½¿ç”¨å®˜æ–¹å¯åŠ¨å™¨ï¼Œä½†æ˜¯å®˜æ–¹å¯åŠ¨å™¨ç»å¸¸æ›´æ–°ï¼Œä¸”å¯¹ç½‘ç»œç¯å¢ƒè¦æ±‚è¾ƒé«˜ï¼ˆæ ¡å›­ç½‘å°±ä¸è¦æƒ³äº†ï¼‰ã€‚</p></blockquote><p>å»ºè®®ä½¿ç”¨<code>HMCL</code>(ç¾¤æ–‡ä»¶è‡ªå–)ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–çš„å¯åŠ¨å™¨å¦‚<code>PCL</code>ã€‚</p><p>å°†å¯åŠ¨å™¨ä¸¢å…¥æ–°å»ºçš„æ–‡ä»¶å¤¹ä¸­ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220608165609230.png" alt="image-20220608165609230"></p><h4 id="3-æ–°å»ºè§’è‰²"><a href="#3-æ–°å»ºè§’è‰²" class="headerlink" title="3. æ–°å»ºè§’è‰²"></a>3. æ–°å»ºè§’è‰²</h4><p>ç‚¹å‡»å·¦ä¸Šè§’çš„è´¦æˆ·ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220608165652456.png" alt="image-20220608165652456"></p><p>æ·»åŠ ä¸€ä¸ªIDï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220608165705985.png" alt="image-20220608165705985"></p><blockquote><p>å¦‚æœæ²¡æœ‰æ­£ç‰ˆè¯·é€‰æ‹©ç¦»çº¿æ¨¡å¼ï¼Œæœ‰æ­£ç‰ˆé€‰æ‹©Mojangç™»å…¥æˆ–è€…å¾®è½¯ç™»å…¥ã€‚</p><p>2022å¹´6æœˆ7æ—¥å¼€å§‹Javaå’ŒåŸºå²©ç‰ˆæ†ç»‘é”€å”®ï¼ŒåŸæ¥æœ‰å…¶ä¸­ä¸€ä¸ªç‰ˆæœ¬å°†å…è´¹è·å¾—å¦ä¸€ä¸ªç‰ˆæœ¬ï¼Œä¸”å”®ä»·é™ä½å¾ˆå¤šï¼Œå»ºè®®è´­ä¹°æ­£ç‰ˆæ”¯æŒæˆ‘çš„ä¸–ç•Œã€‚</p><p>ç¦»çº¿ç”¨æˆ·æ— æ³•è‡ªå·±æ›´æ¢çš®è‚¤ã€‚</p><p>ç¦»çº¿ç”¨æˆ·çš„ç”¨æˆ·åè¯·ä¸è¦ä½¿ç”¨ä¸­æ–‡ï¼Œ3-16ä¸ªè‹±æ–‡å­—ç¬¦å³å¯ï¼Œå¯åŒ…æ‹¬ä¸‹åˆ’çº¿ã€‚</p></blockquote><p>è®¾ç½®ä½ çš„æ¸¸æˆåï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220608170005967.png" alt="image-20220608170005967"></p><h4 id="4-åˆ›å»º1-18-1æ¸¸æˆç‰ˆæœ¬"><a href="#4-åˆ›å»º1-18-1æ¸¸æˆç‰ˆæœ¬" class="headerlink" title="4. åˆ›å»º1.18.1æ¸¸æˆç‰ˆæœ¬"></a>4. åˆ›å»º1.18.1æ¸¸æˆç‰ˆæœ¬</h4><p>è¿”å›å¯åŠ¨å™¨ä¸»é¡µï¼Œç‚¹å‡»ä¸‹è½½æ¸¸æˆç‰ˆæœ¬ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220608170059353.png" alt="image-20220608170059353"></p><p>é€‰æ‹©<code>1.18.1</code>ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220608170112912.png" alt="image-20220608170112912"></p><p>é€‰æ‹©æ‹“å±•åŒ…ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220608170124552.png" alt="image-20220608170124552"></p><blockquote><p>å¦‚æœæƒ³è¦æ·»åŠ modå¯ä»¥é€‰æ‹©å®‰è£…Forgeæˆ–è€…Fabricï¼ŒæœåŠ¡å™¨ä¸éœ€è¦modï¼Œæ‰€ä»¥å¯ä»¥ä¸é€‰ã€‚</p><p>å»ºè®®å‹¾é€‰OptiFineï¼Œå¯ä»¥å¢åŠ æ¸¸æˆä½“éªŒï¼ˆæ˜¾ç¤ºæ›´æ¸…æ™°ï¼Œå¯æ·»åŠ å…‰å½±ï¼‰ã€‚</p></blockquote><p>ç‚¹å‡»å¼€å§‹å®‰è£…ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220608170252474.png" alt="image-20220608170252474"></p><p>ç­‰å¾…å¯åŠ¨å™¨ä¸‹è½½å®Œæˆï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220608170305448.png" alt="image-20220608170305448"></p><h4 id="5-æ¸¸æˆè®¾ç½®"><a href="#5-æ¸¸æˆè®¾ç½®" class="headerlink" title="5. æ¸¸æˆè®¾ç½®"></a>5. æ¸¸æˆè®¾ç½®</h4><p>è¿”å›å¯åŠ¨å™¨ä¸»é¡µï¼Œç‚¹å‡»<code>è®¾ç½®</code>ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220608170355214.png" alt="image-20220608170355214"></p><p>é€‰æ‹©Javaç‰ˆæœ¬ï¼Œç¡®è®¤æ˜¯<code>Java 17</code>ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220608170417567.png" alt="image-20220608170417567"></p><blockquote><p>ä¹Ÿå¯ä»¥æ ¹æ®ç”µè„‘æƒ…å†µè®¾ç½®ç»™æ¸¸æˆåˆ†é…çš„å†…å­˜ã€‚</p><p>å¦‚æœå†…å­˜åˆ†é…å¤ªå°ä¼šå¯¼è‡´é—ªé€€ã€æ— æ³•å¯åŠ¨çš„æƒ…å†µã€‚</p></blockquote><h4 id="6-å¯åŠ¨æ¸¸æˆ"><a href="#6-å¯åŠ¨æ¸¸æˆ" class="headerlink" title="6. å¯åŠ¨æ¸¸æˆ"></a>6. å¯åŠ¨æ¸¸æˆ</h4><p>è¿”å›å¯åŠ¨å™¨ä¸»é¡µï¼Œç‚¹å‡»å¯åŠ¨æ¸¸æˆ(æ³¨æ„ä¸‹æ–¹æ˜¯å¦ä¸º<code>1.18.1</code>)ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220608170532131.png" alt="image-20220608170532131"></p><p>ç­‰å¾…å®ƒå¯åŠ¨å°±å¥½å•¦ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220608170734507.png" alt="image-20220608170734507"></p><h2 id="0x02-è¿›å…¥æœåŠ¡å™¨"><a href="#0x02-è¿›å…¥æœåŠ¡å™¨" class="headerlink" title="0x02 è¿›å…¥æœåŠ¡å™¨"></a>0x02 è¿›å…¥æœåŠ¡å™¨</h2><blockquote><p>ç­‰å¾…æ¸¸æˆå¯åŠ¨æˆåŠŸä¹‹åå°±æ˜¯è¿›å…¥<code>èŠ±æ¤’ç”Ÿå­˜</code>æœåŠ¡å™¨å•¦ï¼ŒæœåŠ¡å™¨IPåœ°å€:<code>mc.q1jun.cn</code>ã€‚</p></blockquote><p>ç‚¹å‡»å¤šäººæ¸¸æˆï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220608170906573.png" alt="image-20220608170906573"></p><p>é€‰æ‹©<code>æ·»åŠ æœåŠ¡å™¨</code>ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220608170949533.png" alt="image-20220608170949533"></p><p>è¾“å…¥æˆ‘ä»¬æœåŠ¡å™¨çš„åœ°å€<code>mc.q1jun.cn</code>:</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220608171012235.png" alt="image-20220608171012235"></p><p>ç‚¹å‡»<code>å®Œæˆ</code>:</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220608171027851.png" alt="image-20220608171027851"></p><p>åŒå‡»å³å¯è¿›å…¥æœåŠ¡å™¨å•¦ï¼</p><h4 id="0x0201-æ³¨å†Œè´¦å·"><a href="#0x0201-æ³¨å†Œè´¦å·" class="headerlink" title="0x0201 æ³¨å†Œè´¦å·"></a>0x0201 æ³¨å†Œè´¦å·</h4><blockquote><p>è¿›å…¥æœåŠ¡å™¨ä¹‹åä½ è¿˜æ— æ³•èµ°åŠ¨ï¼Œå› ä¸ºä½ éœ€è¦ç»™ä½ çš„æ¸¸æˆç”¨æˆ·åè®¾ç½®ä¸€ä¸ªå¯†ç ã€‚</p></blockquote><p>ç¬¬ä¸€æ¬¡ç™»å…¥éœ€è¦ <strong>æ³¨å†Œ</strong> ï¼š</p><p>æŒ‰é”®ç›˜ä¸­çš„<kbd>T</kbd>æˆ–è€…<kbd>/</kbd>æ‰“å¼€èŠå¤©è¾“å…¥æ¡†ï¼Œè¾“å…¥ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/register &lt;ä½ çš„å¯†ç &gt; &lt;ç¡®è®¤å¯†ç &gt;</span><br></pre></td></tr></table></figure><p>æˆ–è€…:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/reg &lt;ä½ çš„å¯†ç &gt; &lt;ç¡®è®¤å¯†ç &gt;</span><br></pre></td></tr></table></figure><p><code>/reg</code>æ˜¯<code>/register</code>çš„ç®€å†™ï¼Œæ•ˆæœç›¸åŒã€‚</p><p>æ³¨å†ŒæˆåŠŸä¹‹åå¦‚æœä½ å†è¿›å…¥æœåŠ¡å™¨åˆ™ä¸éœ€è¦å†æ³¨å†Œäº†ï¼Œè€Œæ˜¯éœ€è¦ <strong>ç™»å…¥</strong> ï¼š</p><p>æŒ‰é”®ç›˜ä¸­çš„<kbd>T</kbd>æˆ–è€…<kbd>/</kbd>æ‰“å¼€èŠå¤©è¾“å…¥æ¡†ï¼Œè¾“å…¥ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/login &lt;ä½ çš„å¯†ç &gt;</span><br></pre></td></tr></table></figure><p>æˆ–è€…:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/l &lt;ä½ çš„å¯†ç &gt;</span><br></pre></td></tr></table></figure><p>ç™»å…¥æˆåŠŸç•Œé¢ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220608171758797.png" alt="image-20220608171758797"></p><h4 id="0x0202-é¢†å–æ–°æ‰‹ç¤¼åŒ…"><a href="#0x0202-é¢†å–æ–°æ‰‹ç¤¼åŒ…" class="headerlink" title="0x0202 é¢†å–æ–°æ‰‹ç¤¼åŒ…"></a>0x0202 é¢†å–æ–°æ‰‹ç¤¼åŒ…</h4><p>ç¬¬ä¸€æ¬¡è¿›å…¥æœåŠ¡å™¨å¯ä»¥é¢†å–<code>æ–°æ‰‹ç¤¼åŒ…</code>,åœ¨ä¸»åŸå³é”®â€œå®ƒâ€å°±å¯ä»¥äº†ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220608171933527.png" alt="image-20220608171933527"></p><p>åœ¨è·å¾—çš„ç‰©å“ä¸­ä¼šæœ‰ä¸€ä¸ª<code>æœåŠ¡å™¨èœå•</code>ï¼Œæ‹¿åœ¨æ‰‹ä¸Šå³é”®å¯ä»¥æ‰“å¼€èœå•ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220608172024321.png" alt="image-20220608172024321"></p><blockquote><p>èœå•æä¾›ï¼š</p><ul><li>ä¼ é€èœå•</li><li>ç»“å©šåŠŸèƒ½</li><li>ç§°å·åŠŸèƒ½</li><li>é»æ¶²ç§‘æŠ€(å¥½ç©çš„æ’ä»¶)</li><li>å…¨çƒå¸‚åœº(å…¨æœäº¤æ˜“ç‰©å“)</li><li>åœ°çš®ç³»ç»Ÿ</li><li>å® ç‰©ç³»ç»Ÿ</li><li>ç­‰ç­‰â€¦â€¦</li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> Doc </category>
          
          <category> èŠ±æ¤’ç”Ÿå­˜ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•™ç¨‹ </tag>
            
            <tag> Minecraft </tag>
            
            <tag> æˆ‘çš„ä¸–ç•Œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaæ¥å£å®ç°æ’å…¥å’Œå†’æ³¡æ’åº</title>
      <link href="/2022/05/27/40979a038876-q1jun/"/>
      <url>/2022/05/27/40979a038876-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="Javaæ¥å£å®ç°æ’å…¥å’Œå†’æ³¡æ’åº"><a href="#Javaæ¥å£å®ç°æ’å…¥å’Œå†’æ³¡æ’åº" class="headerlink" title="Javaæ¥å£å®ç°æ’å…¥å’Œå†’æ³¡æ’åº"></a>Javaæ¥å£å®ç°æ’å…¥å’Œå†’æ³¡æ’åº</h1><h2 id="0x01-è¦æ±‚"><a href="#0x01-è¦æ±‚" class="headerlink" title="0x01 è¦æ±‚"></a>0x01 è¦æ±‚</h2><p>å¯¹æ•´å‹æ•°ç»„æ’åºçš„é™æ€æ–¹æ³•ä»£ç å¦‚ä¸‹ï¼š</p><blockquote><p>class SortedInts {</p><p>  public static void newsort(int[] numbers, SortMethod s) {    </p><p>â€‹    s.sort(numbers);</p><p>â€‹    for (int n : numbers) {</p><p>â€‹      System.out.printf(â€œ%d â€œ, n);</p><p>â€‹    }</p><p>â€‹    System.out.println();</p><p>  }</p><p>}</p></blockquote><p>å…¶ä¸­SortMethodæ˜¯ä¸€ä¸ªæ¥å£ï¼Œè¯·å®šä¹‰è¯¥æ¥å£ï¼Œå¹¶å®šä¹‰2ä¸ªç±»InsertSortå’ŒBubbleSortå®ç°è¯¥æ¥å£ï¼Œåˆ†åˆ«åœ¨è¿™ä¸¤ä¸ªå®ç°ç±»ä¸­ä½¿ç”¨ç›´æ¥æ’å…¥æ’åºå’Œå†’æ³¡æ’åºå®ç° sort æ–¹æ³•ã€‚</p><p>å¯¹æ•°ç»„ a è¿›è¡Œç›´æ¥æ’å…¥æ’åºçš„ç®—æ³•å¦‚ä¸‹ï¼š</p><blockquote><p>for (int i &#x3D; 1; i &lt; a.length; i++) {  </p><p>â€‹    int key &#x3D; a[i];</p><p>â€‹    int j &#x3D; i - 1;</p><p>â€‹    while (j &gt;&#x3D; 0 &amp;&amp; a[j] &gt; key) {</p><p>â€‹      a[j+1] &#x3D; a[j];</p><p>â€‹      jâ€“;</p><p>â€‹    }</p><p>â€‹    a[j+1] &#x3D; key;</p><p>}</p></blockquote><p>å¯¹æ•°ç»„ a è¿›è¡Œå†’æ³¡æ’åºçš„ç®—æ³•å¦‚ä¸‹ï¼š</p><blockquote><p>for (int i &#x3D; 0; i &lt; a.length - 1; i++) {</p><p>â€‹    for (int j &#x3D; 0; j &lt; a.length - 1 - i; j++) {</p><p>â€‹      if (a[j] &gt; a[j + 1]) {</p><p>â€‹        int temp;</p><p>â€‹        temp &#x3D; a[j];</p><p>â€‹        a[j] &#x3D; a[j + 1];</p><p>â€‹        a[j + 1] &#x3D; temp;</p><p>â€‹      }</p><p>â€‹    }</p><p>}</p></blockquote><p>ç„¶ååœ¨mainæ–¹æ³•ä¸­è¾“å…¥ä¸€ä¸ªé•¿åº¦ä¸º8çš„æ•°ç»„ï¼Œåˆ†åˆ«ç”¨ä¸¤ä¸ªå®ç°ç±»çš„å¯¹è±¡ä½œä¸ºå®é™…å‚æ•°è°ƒç”¨newsortæ–¹æ³•è¿›è¡Œæ’åºã€‚ä¾‹å¦‚ï¼š</p><blockquote><p>public class Main {</p><p>  public static void main(String[] args) {</p><p>â€‹    int[] ns &#x3D; new int[8];</p><p>â€‹    â€¦â€¦  &#x2F;&#x2F; è¾“å…¥æ•°ç»„</p><p>â€‹    InsertSort is &#x3D; new InsertSort();</p><p>â€‹    SortedInts.newsort(ns, is);</p><p>â€‹    BubbleSort bs &#x3D; new BubbleSort();</p><p>â€‹    SortedInts.newsort(ns, bs);    </p><p>  }</p><p>}</p></blockquote><p>è¾“å…¥æ ·ä¾‹ï¼š</p><blockquote><p>9 3 5 2 1 7 23 8 </p></blockquote><p>è¾“å‡ºæ ·ä¾‹ï¼š</p><blockquote><p>1 2 3 5 7 8 9 23</p><p>1 2 3 5 7 8 9 23</p></blockquote><p>æç¤ºï¼šæœ¬æ¬¡ä¸Šæœºéœ€è¦å®šä¹‰1ä¸ªæ¥å£ï¼Œ4ä¸ªç±»ã€‚å¿…é¡»å°†ç±» Main å®šä¹‰ä¸º public å¹¶æ”¾åœ¨æœ€å‰é¢ï¼Œå…¶ä»–ç±»å’Œæ¥å£ä¸èƒ½å®šä¹‰ä¸º publicã€‚ç±» SortedInts çš„ä»£ç ä¸èƒ½æ›´æ”¹ã€‚</p><h2 id="0x02-ä»£ç "><a href="#0x02-ä»£ç " class="headerlink" title="0x02 ä»£ç "></a>0x02 ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] ns = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">8</span>];</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; ns.length; i++) &#123;</span><br><span class="line">            ns[i] = scanner.nextInt();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">InsertSort</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InsertSort</span>();</span><br><span class="line">        SortedInts.newsort(ns, is);</span><br><span class="line"></span><br><span class="line">        <span class="type">BubbleSort</span> <span class="variable">bs</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BubbleSort</span>();</span><br><span class="line">        SortedInts.newsort(ns, bs);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">SortMethod</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] numbers)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SortedInts</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">newsort</span><span class="params">(<span class="type">int</span>[] numbers, SortMethod s)</span> &#123;</span><br><span class="line"></span><br><span class="line">        s.sort(numbers);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> n : numbers) &#123;</span><br><span class="line"></span><br><span class="line">            System.out.printf(<span class="string">&quot;%d &quot;</span>, n);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">InsertSort</span> <span class="keyword">implements</span> <span class="title class_">SortMethod</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] a)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; a.length; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">key</span> <span class="operator">=</span> a[i];</span><br><span class="line">            <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span> (j &gt;= <span class="number">0</span> &amp;&amp; a[j] &gt; key) &#123;</span><br><span class="line">                a[j + <span class="number">1</span>] = a[j];</span><br><span class="line">                j--;</span><br><span class="line">            &#125;</span><br><span class="line">            a[j + <span class="number">1</span>] = key;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BubbleSort</span> <span class="keyword">implements</span> <span class="title class_">SortMethod</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] a)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; a.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; a.length - <span class="number">1</span> - i; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (a[j] &gt; a[j + <span class="number">1</span>]) &#123;</span><br><span class="line">                    <span class="type">int</span> temp;</span><br><span class="line">                    temp = a[j];</span><br><span class="line">                    a[j] = a[j + <span class="number">1</span>];</span><br><span class="line">                    a[j + <span class="number">1</span>] = temp;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
            <tag> ç®—æ³• </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java å®ç°åˆ†æ•°çš„ç›¸åŠ ç›¸ä¹˜åŒ–ç®€</title>
      <link href="/2022/05/27/b5acf6b71caa-q1jun/"/>
      <url>/2022/05/27/b5acf6b71caa-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="Java-å®ç°åˆ†æ•°çš„ç›¸åŠ ç›¸ä¹˜åŒ–ç®€"><a href="#Java-å®ç°åˆ†æ•°çš„ç›¸åŠ ç›¸ä¹˜åŒ–ç®€" class="headerlink" title="Java å®ç°åˆ†æ•°çš„ç›¸åŠ ç›¸ä¹˜åŒ–ç®€"></a>Java å®ç°åˆ†æ•°çš„ç›¸åŠ ç›¸ä¹˜åŒ–ç®€</h1><h2 id="0x01-è¦æ±‚ï¼š"><a href="#0x01-è¦æ±‚ï¼š" class="headerlink" title="0x01 è¦æ±‚ï¼š"></a>0x01 è¦æ±‚ï¼š</h2><p>è®¾è®¡ä¸€ä¸ªè¡¨ç¤ºåˆ†æ•°çš„ç±»Fractionã€‚è¿™ä¸ªç±»ç”¨ä¸¤ä¸ªintç±»å‹çš„å˜é‡åˆ†åˆ«è¡¨ç¤ºåˆ†å­å’Œåˆ†æ¯ã€‚è¿™ä¸ªç±»çš„æ„é€ æ–¹æ³•æ˜¯ï¼š</p><p><code>Fraction(int a, int b)</code>Â  Â  æ„é€ ä¸€ä¸ªa&#x2F;bçš„åˆ†æ•°ã€‚</p><p>è¿™ä¸ªç±»è¦æä¾›ä»¥ä¸‹çš„åŠŸèƒ½ï¼š</p><p><code>double toDouble();Â </code> Â  å°†åˆ†æ•°è½¬æ¢ä¸ºdouble</p><p><code>Fraction plus(Fraction r);</code></p><p>å°†è‡ªèº«å’Œrçš„åˆ†æ•°ç›¸åŠ ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„Fractionçš„å¯¹è±¡ã€‚æ³¨æ„å°å­¦äº”å¹´çº§å­¦è¿‡ä¸¤ä¸ªåˆ†æ•°å¦‚ä½•ç›¸åŠ ã€‚</p><p><code>Fraction multiply(Fraction r);</code></p><p>å°†è‡ªèº«å’Œrçš„åˆ†æ•°ç›¸ä¹˜ï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„Fractionçš„å¯¹è±¡ã€‚</p><p><code>void print();</code></p><p>å°†è‡ªèº«ä»¥â€œåˆ†å­&#x2F;åˆ†æ¯â€çš„å½¢å¼è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºï¼Œå¹¶å¸¦æœ‰å›è½¦æ¢è¡Œã€‚</p><blockquote><p>éœ€è¦è€ƒè™‘ä»¥ä¸‹æƒ…å†µï¼š</p><p>å½“åˆ†æ¯ä¸º0æ—¶ï¼Œæ˜¾ç¤ºâ€œé”™è¯¯ï¼Œåˆ†æ¯ä¸èƒ½ä¸º0â€ã€‚</p><p>å½“åˆ†å­ä¸º0æ—¶ï¼Œæ˜¾ç¤º0</p><p>å½“åˆ†æ¯ä¸º1æ—¶ï¼Œç›´æ¥æ˜¾ç¤ºåˆ†å­</p><p>åˆ†æ•°ä¸ºè´Ÿæ•°æ—¶ï¼Œè´Ÿå·æ˜¾ç¤ºåœ¨æœ€å‰é¢</p><p>åˆ†æ•°æ˜¾ç¤ºä¸ºæœ€ç®€å½¢å¼ã€‚å¦‚2&#x2F;4åº”è¯¥è¢«çº¦åˆ†ä¸º1&#x2F;2ã€‚</p></blockquote><p>ç±» Fraction ä¸­å¯ä»¥ç”¨ä»¥ä¸‹æ–¹æ³•è¿›è¡Œçº¦åˆ†å’Œè°ƒæ•´è´Ÿå·</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Â  Â <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">yuefen</span><span class="params">()</span> &#123;</span><br><span class="line">Â  Â  Â  Â  <span class="type">int</span> <span class="variable">aa</span> <span class="operator">=</span> (<span class="type">int</span>) Math.abs(a);</span><br><span class="line">Â  Â  Â  Â  <span class="type">int</span> <span class="variable">ab</span> <span class="operator">=</span> (<span class="type">int</span>) Math.abs(b);</span><br><span class="line">Â  Â  Â  Â  <span class="keyword">if</span> (a * b &gt;= <span class="number">0</span>) &#123;Â Â Â Â <span class="comment">// è°ƒæ•´è´Ÿå·</span></span><br><span class="line">Â  Â  Â  Â  Â  Â  a = aa;</span><br><span class="line">Â  Â  Â  Â  Â  Â  b = ab;</span><br><span class="line">Â  Â  Â  Â  &#125;</span><br><span class="line">Â Â Â Â Â Â Â Â <span class="keyword">else</span> &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  a = -aa;</span><br><span class="line">Â  Â  Â  Â  Â  Â  b = ab;</span><br><span class="line">Â  Â  Â  Â  &#125;</span><br><span class="line">Â  Â  Â  Â  <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> ((aa &lt; ab) ? aa : ab); i &gt; <span class="number">1</span>; i--) &#123;Â Â Â Â <span class="comment">// æ±‚æœ€å¤§å…¬å› æ•°ï¼Œå¹¶çº¦åˆ†</span></span><br><span class="line">Â  Â  Â  Â  Â  Â  <span class="keyword">if</span> (a % i == <span class="number">0</span> &amp;&amp; b % i == <span class="number">0</span>) &#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  a /= i;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  b /= i;</span><br><span class="line">Â  Â  Â  Â  Â  Â  Â  Â  <span class="keyword">break</span>;</span><br><span class="line">Â  Â  Â  Â  Â  Â  &#125;</span><br><span class="line">Â  Â  Â  Â  &#125;</span><br><span class="line">Â  Â  &#125;</span><br></pre></td></tr></table></figure><p>å®ŒæˆFractionç±»å®šä¹‰åï¼Œä½¿ç”¨ä»¥ä¸‹mainå‡½æ•°ï¼ˆè¯·å‹¿ä¿®æ”¹ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line"></span><br><span class="line">Â Â Â Â Â <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â Â <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">Â Â Â Â Â Â Â Â Â <span class="type">Fraction</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Fraction</span>(in.nextInt(), in.nextInt());</span><br><span class="line">Â Â Â Â Â Â Â Â Â <span class="type">Fraction</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Fraction</span>(in.nextInt(),in.nextInt());</span><br><span class="line">Â Â Â Â Â Â Â Â Â a.print();</span><br><span class="line">Â Â Â Â Â Â Â Â Â b.print();</span><br><span class="line">Â Â Â Â Â Â Â Â Â a.plus(b).print();</span><br><span class="line">Â Â Â Â Â Â Â Â Â a.multiply(b).plus(<span class="keyword">new</span> <span class="title class_">Fraction</span>(<span class="number">5</span>,<span class="number">6</span>)).print();</span><br><span class="line">Â Â Â Â Â Â Â Â Â a.print();</span><br><span class="line">Â Â Â Â Â Â Â Â Â b.print();</span><br><span class="line">Â Â Â Â Â Â Â Â Â in.close();</span><br><span class="line">Â Â Â Â Â &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œä½ çš„ç±»çš„å®šä¹‰åº”è¯¥è¿™æ ·å¼€å§‹ï¼š</p><p>class Fraction {</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä½ çš„ç±»çš„classå‰é¢ä¸è¦æœ‰publicã€‚</p><p>è¾“å…¥æ ¼å¼ï¼šç¨‹åºè¿è¡Œæ—¶ä¼šè¾“å…¥4ä¸ªæ•°å­—ï¼Œåˆ†åˆ«æ„æˆä¸¤ä¸ªåˆ†æ•°ï¼Œä¾æ¬¡æ˜¯åˆ†å­å’Œåˆ†æ¯ã€‚</p><p>è¾“å‡ºæ ¼å¼ï¼šè¾“å‡ºç”±ä¸Šé¢çš„ main å‡½æ•°å®Œæˆï¼Œä¸éœ€è¦é¢å¤–ç¼–å†™ä»£ç ã€‚</p><p>è¾“å…¥æ ·ä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2 4 1 3</span><br></pre></td></tr></table></figure><p>è¾“å‡ºæ ·ä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1/2</span><br><span class="line"></span><br><span class="line">1/3</span><br><span class="line"></span><br><span class="line">5/6</span><br><span class="line"></span><br><span class="line">1</span><br><span class="line"></span><br><span class="line">1/2</span><br><span class="line"></span><br><span class="line">1/3</span><br></pre></td></tr></table></figure><h2 id="0x02-ä»£ç ï¼š"><a href="#0x02-ä»£ç ï¼š" class="headerlink" title="0x02 ä»£ç ï¼š"></a>0x02 ä»£ç ï¼š</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Fraction</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> a; <span class="comment">//åˆ†å­</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> b; <span class="comment">//åˆ†æ¯</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Fraction</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.a = a;</span><br><span class="line">        <span class="built_in">this</span>.b = b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Fraction</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (a == b &amp;&amp; a !=<span class="number">0</span>)&#123; <span class="comment">//åˆ†å­ç­‰äºåˆ†æ¯</span></span><br><span class="line">            System.out.println(<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (b == <span class="number">1</span>)&#123; <span class="comment">//åˆ†å­ç­‰äº1</span></span><br><span class="line">            System.out.println(a);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (b == <span class="number">0</span>)&#123; <span class="comment">//åˆ†å­ä¸º0</span></span><br><span class="line">            System.out.println(<span class="string">&quot;é”™è¯¯ï¼Œåˆ†æ¯ä¸èƒ½ä¸º0&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.yueFen();</span><br><span class="line">        System.out.println(a+<span class="string">&quot;/&quot;</span>+b); <span class="comment">//æ­£å¸¸è¾“å‡ºåˆ†æ•°</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">toDouble</span><span class="params">()</span>&#123; <span class="comment">//è½¬æ¢åˆ†æ•°ä¸ºdouble</span></span><br><span class="line">        <span class="keyword">return</span> (<span class="type">double</span>) a/(<span class="type">double</span>) b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Fraction <span class="title function_">plus</span><span class="params">(Fraction fraction)</span> &#123; <span class="comment">//åˆ†æ•°ç›¸åŠ </span></span><br><span class="line">        <span class="type">Fraction</span> <span class="variable">fraction1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Fraction</span>(); <span class="comment">//éœ€è¦è¿”å›çš„ç»“æœ 2/4+6/5 = [(2*5)+(6*4)]/20</span></span><br><span class="line">        fraction1.b = <span class="built_in">this</span>.b * fraction.b; <span class="comment">// 4*5 = 20</span></span><br><span class="line">        fraction1.b = fraction1.b/GCD(<span class="built_in">this</span>.b, fraction.b);  <span class="comment">//GCD = 1</span></span><br><span class="line"><span class="comment">//        System.out.println(this.a +&quot; &quot;+this.b+&quot; &quot; + fraction.a+&quot; &quot; + fraction.b);</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;gcd=&quot;+GCD(this.b, fraction.b));</span></span><br><span class="line">        fraction1.a = ((<span class="built_in">this</span>.a* fraction.b)+(fraction.a*<span class="built_in">this</span>.b))/GCD(<span class="built_in">this</span>.b, fraction.b);</span><br><span class="line"><span class="comment">//        System.out.println(&quot;fraction1.a=&quot;+fraction1.a);</span></span><br><span class="line"><span class="comment">//        System.out.println(&quot;fraction1.b=&quot;+fraction1.b);</span></span><br><span class="line">        <span class="keyword">return</span> fraction1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Fraction <span class="title function_">multiply</span><span class="params">(Fraction fraction)</span> &#123; <span class="comment">//åˆ†æ•°ç›¸ä¹˜</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Fraction</span>((<span class="built_in">this</span>.a* fraction.a),(<span class="built_in">this</span>.b* fraction.b));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">GCD</span> <span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> a&lt;b?a:b;</span><br><span class="line">        <span class="type">int</span> <span class="variable">gcd</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> min;i &gt;= <span class="number">1</span>;i --) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a%i == <span class="number">0</span> &amp;&amp; b%i == <span class="number">0</span>) &#123;</span><br><span class="line">                gcd = i;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> gcd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">yueFen</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">aa</span> <span class="operator">=</span> (<span class="type">int</span>) Math.abs(a);</span><br><span class="line">        <span class="type">int</span> <span class="variable">bb</span> <span class="operator">=</span> (<span class="type">int</span>) Math.abs(b);</span><br><span class="line">        <span class="keyword">if</span> (a*b &gt;=<span class="number">0</span>)&#123; <span class="comment">//è°ƒæ•´è´Ÿå·åˆ°åˆ†å­</span></span><br><span class="line">            a = aa;</span><br><span class="line">            b = bb;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            a = -aa;</span><br><span class="line">            b = bb;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> (Math.min(aa, bb)); i &gt;<span class="number">1</span> ; i--)&#123; <span class="comment">//æ±‚æœ€å¤§å…¬å› æ•°ï¼Œçº¦åˆ†</span></span><br><span class="line">            <span class="keyword">if</span>(a % i ==<span class="number">0</span>&amp;&amp;b%i==<span class="number">0</span>)&#123;</span><br><span class="line">                a/=i;</span><br><span class="line">                b/=i;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="type">Fraction</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Fraction</span>(in.nextInt(),in.nextInt());</span><br><span class="line">        <span class="type">Fraction</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Fraction</span>(in.nextInt(),in.nextInt());</span><br><span class="line">        a.print();</span><br><span class="line">        b.print();</span><br><span class="line">        a.plus(b).print();</span><br><span class="line">        a.multiply(b).plus(<span class="keyword">new</span> <span class="title class_">Fraction</span>(<span class="number">5</span>,<span class="number">6</span>)).print();</span><br><span class="line">        a.print();</span><br><span class="line">        b.print();</span><br><span class="line">        in.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
            <tag> ç®—æ³• </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•ç”¨Pythonçˆ¬å–Bç«™å¯çˆ±çš„è¡¨æƒ…åŒ…</title>
      <link href="/2022/05/17/96ea04ad9183-q1jun/"/>
      <url>/2022/05/17/96ea04ad9183-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="å¦‚ä½•ç”¨Pythonçˆ¬å–Bç«™å¯çˆ±çš„è¡¨æƒ…åŒ…"><a href="#å¦‚ä½•ç”¨Pythonçˆ¬å–Bç«™å¯çˆ±çš„è¡¨æƒ…åŒ…" class="headerlink" title="å¦‚ä½•ç”¨Pythonçˆ¬å–Bç«™å¯çˆ±çš„è¡¨æƒ…åŒ…"></a>å¦‚ä½•ç”¨Pythonçˆ¬å–Bç«™å¯çˆ±çš„è¡¨æƒ…åŒ…</h1><h2 id="0x01-å‰è¨€"><a href="#0x01-å‰è¨€" class="headerlink" title="0x01 å‰è¨€"></a>0x01 å‰è¨€</h2><p>æœ€è¿‘åœ¨é€›Bç«™çš„æ—¶å€™å‘ç°äº†ä¸€å¥—æˆ‘å¯»æ‰¾å·²ä¹…çš„<strong>çŒ«äººè¡¨æƒ…åŒ…</strong>ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/QQ20220517-090317-HD.gif" alt="QQ20220517-090317-HD"></p><p>ä½†æ˜¯å½“æˆ‘ç‚¹è¿›å»ä¹‹åï¼Œçœ‹åˆ°äº†ç°è‰²çš„ä¸‹è½½æŒ‰é’®<del>é€æ¸èµ·äº†æ€å¿ƒ</del></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220517090548240.png" alt="image-20220517090548240"></p><p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ä¸è®©ä½ ä¸‹è½½ï¼Œåªèƒ½ä¸‹è½½è¿™ä¸ª<code>å¿…å‰ª</code>APPæ‰èƒ½ä½¿ç”¨ï¼Œæ— å¥ˆè¿™ä¸ªå‰ªè¾‘è½¯ä»¶å¹¶ä¸é€‚é…MacOSç³»ç»Ÿï¼å¯æ¶</p><p>ä½†æ˜¯è¿™å¹¶ä¸å½±å“æˆ‘ä¸‹è½½ï¼Œåªè¦æŒ‰ä¸‹æ­£ä¹‰çš„<kbd>F12</kbd>ï¼Œé€‰æ‹©å…ƒç´ ï¼Œæ‰¾åˆ°é“¾æ¥ï¼Œç„¶åå³é”®ä¿å­˜ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220517091128168.png" alt="image-20220517091128168"></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220517091150031.png" alt="image-20220517091150031"></p><p>ç‚¹å‡»è¿™ä¸ª<code>ç›´æ¥é“¾æ¥</code>ä¹‹åå³é”®å°±èƒ½ä¸‹è½½åˆ°æœ¬åœ°ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220517091316618.png" alt="image-20220517091316618"></p><p><strong>Butï¼</strong>ï¼Œè¿™æ ·è™½ç„¶å¯ä»¥ä¸‹è½½äº†ï¼Œä½†æ˜¯æ¯ä¸ªè¡¨æƒ…éƒ½è¦ç‚¹è¿›å»æŒ‰<kbd>F12</kbd>ï¼Œä¸€å…±æœ‰228å¼ è¡¨æƒ…ï¼Œå²‚ä¸æ˜¯è¦é‡å¤228æ¬¡ï¼Ÿ</p><p>é‚£æˆ‘ä»¬åªå¥½å†™ä¸€ä¸ª<del>æ­£ä¹‰çš„</del>çˆ¬è™«æ¥å¸®æˆ‘ä¸‹è½½äº†ã€‚</p><h2 id="0x02-æ€è·¯1"><a href="#0x02-æ€è·¯1" class="headerlink" title="0x02 æ€è·¯1"></a>0x02 æ€è·¯1</h2><p>ç”±äºè¿™ä¸ªç½‘ç«™æ˜¯åŠ¨æ€åŠ è½½çš„ï¼Œæˆ‘ä»¬éœ€è¦åšæ›´å¤šçš„æ“ä½œã€‚</p><p>åˆ©ç”¨<code>selenium</code>å’Œ<code>BeautifulSoup4</code>æ¥æ¨¡æ‹Ÿæµè§ˆå™¨æ“ä½œï¼Œè·å–è¯¥é¡µé¢æ‰€æœ‰æˆ‘ä»¬éœ€è¦çš„æ•°æ®</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium.webdriver.common.keys <span class="keyword">import</span> Keys <span class="comment">#æ¨¡ä»¿é”®ç›˜,æ“ä½œä¸‹æ‹‰æ¡†çš„</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup    <span class="comment">#è§£æhtmlçš„</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver    <span class="comment">#æ¨¡ä»¿æµè§ˆå™¨çš„</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä½¿ç”¨çš„æ˜¯<code>Chrome</code>æµè§ˆå™¨ï¼Œéœ€è¦å»ä¸‹è½½<code>selenium</code>æ‰€éœ€è¦çš„å¯¹åº”çš„æµè§ˆå™¨é©±åŠ¨ï¼Œä¸‹è½½åœ°å€å¦‚ä¸‹:<br><a target="_blank" rel="noopener" href="https://chromedriver.chromium.org/downloads">https://chromedriver.chromium.org/downloads</a></p><p>æˆ‘ä½¿ç”¨çš„Chromeç‰ˆæœ¬æ˜¯101ï¼Œæ‰€ä»¥ç‚¹å‡»å¦‚ä¸‹å›¾æ‰€ç¤ºçš„åœ°æ–¹è¿›å…¥ä¸‹è½½ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220517092500840.png" alt="image-20220517092500840"></p><blockquote><p>å¦‚æœé©±åŠ¨æŠ¥é”™å°±è¦çœ‹æŠ¥é”™ä¿¡æ¯ï¼Œè¿™é‡Œæˆ‘å°±æ˜¯å› ä¸ºç‰ˆæœ¬ä¸å…¼å®¹æŠ¥é”™çš„ï¼Œæ‰€ä»¥æˆ‘æ ¼å¤–è¯´ä¸€ä¸‹ğŸ˜¢</p></blockquote><p>å…·ä½“å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium.webdriver.common.keys <span class="keyword">import</span> Keys <span class="comment">#æ¨¡ä»¿é”®ç›˜,æ“ä½œä¸‹æ‹‰æ¡†çš„</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup    <span class="comment">#è§£æhtmlçš„</span></span><br><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver    <span class="comment">#æ¨¡ä»¿æµè§ˆå™¨çš„</span></span><br><span class="line"></span><br><span class="line">driver = webdriver.Chrome(executable_path=<span class="string">&quot;/Users/q1jun/chromedriver&quot;</span>)</span><br><span class="line">driver.get(<span class="string">&#x27;https://cool.bilibili.com/x/co-create/user/material_list?ps=15&amp;pn=1&amp;mid=1445996044&amp;up_from=1&amp;biz_from=3&amp;material_type=7&amp;t=1652707801269&#x27;</span>)</span><br><span class="line">driver.maximize_window() <span class="comment">#æœ€å¤§åŒ–é¡µé¢</span></span><br><span class="line"><span class="comment">#æŠŠä¸‹æ‹‰æ¡å¾€ä¸‹æ‹‰..</span></span><br><span class="line">driver.find_element_by_xpath(<span class="string">&#x27;//input[@class=&quot;readerImg&quot;]&#x27;</span>).send_keys(Keys.DOWN)</span><br><span class="line"></span><br><span class="line"><span class="comment">#driver.page_sourceæ˜¯è¿”å›é¡µé¢çš„å†…å®¹.è¿™é‡Œä½ éœ€è¦è§£æä¸‹html.ç”¨åˆ°çš„æ˜¯BeautifulSoup.è®°å¾—å€’åŒ…</span></span><br><span class="line">html = BeautifulSoup(driver.page_source)</span><br><span class="line"><span class="built_in">print</span>(html)</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ<code>driver.find_element_by_xpath</code>è¿™ä¸ªå‡½æ•°å·²ç»è¢«å¼ƒç”¨äº†ï¼Œå¯¼è‡´æœ€åè·å¾—çš„æ•°æ®å¹¶ä¸å®Œå…¨ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220516214249267.png" alt="image-20220516214249267"></p><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220516214318031.png" alt="image-20220516214318031"></p><p>æ‰è¿™ä¹ˆå‡ æ¡æ•°æ®ï¼Œè‚¯å®šä¸æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ä¸¤ç™¾å¤šä¸ªè¡¨æƒ…åŒ…ï¼å¯æ¶ï¼Œå¯åŠ¨<strong>Plan B</strong>!</p><h2 id="0x03-æ€è·¯2"><a href="#0x03-æ€è·¯2" class="headerlink" title="0x03 æ€è·¯2"></a>0x03 æ€è·¯2</h2><p>é€šè¿‡åˆ†æé¡µé¢çš„è¯·æ±‚ç½‘å€ï¼ŒæŸ¥çœ‹Bç«™æ˜¯å¦‚ä½•è¯·æ±‚æ•°æ®çš„ï¼Œæˆ‘ä»¬ä»”æ¨¡ä»¿è¿™ä¸ªè¯·æ±‚ä¸å°±è¡Œäº†ï¼Ÿç†è®ºå­˜åœ¨ï¼Œå®è·µå¼€å§‹ï¼</p><p>é¦–å…ˆè¿˜æ˜¯ä¸€ä¸ªæ­£ä¹‰çš„<kbd>F12</kbd>ï¼Œé€‰æ‹©ç½‘ç»œ-&gt;è¿‡æ»¤XDR</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220517093257540.png" alt="image-20220517093257540"></p><p>ç„¶åæˆ‘ä»¬ä¸€ç›´å‘ä¸‹åˆ’ï¼Œè®©å‰ç«¯é¡µé¢ä¸€ç›´å‘é€è¯·æ±‚å•¦å–åå°æ•°æ®ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220516214516357.png" alt="image-20220516214516357"></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220516214542568.png" alt="image-20220516214542568"></p><p>å¯ä»¥çœ‹åˆ°æˆ‘æ ‡è®°çš„ä¸¤ä¸ªå˜é‡<code>pn</code>å’Œ<code>t</code>ï¼Œåªæœ‰è¿™ä¸¤ä¸ªå˜é‡æ˜¯ä¸€ç›´åœ¨å˜åŒ–çš„ (å…¶ä»–çš„å›ºå®šå‚æ•°å¯ä»¥å…ˆä¸ç”¨ç®¡)ã€‚</p><blockquote><p>å¾ˆæ˜¾ç„¶<code>pn</code>åº”è¯¥æ˜¯PageNumberçš„ç¼©å†™ï¼Œæ ‡è¯†è¯·æ±‚çš„é¡µæ•°ï¼Œé‚£<code>t</code>å’Œè¿™ä¸²æ•°å­—<code>1652708159004</code>æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ</p></blockquote><p>å¦‚æœè®¤è¯†æ—¶é—´æˆ³çš„åŒå­¦è‚¯å®šä¸€çœ¼<del>é’‰çœŸ</del>å°±çœ‹å‡ºæ¥äº†ï¼Œè¿™å°±æ˜¯<code>æ—¶é—´æˆ³</code>å•Šï¼Œå¯ä»¥ç”¨Pythonçš„<code>time</code>åŒ…éªŒè¯ä¸€ä¸‹ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220516214442786.png" alt="image-20220516214442786"></p><p>(å› ä¸ºä¸æ˜¯åŒæ—¶åŠ è½½çš„ï¼Œæ‰€ä»¥ç•¥æœ‰ä¸åŒ)</p><p>çŸ¥é“è¯·æ±‚å‚æ•°ï¼Œé‚£å°±å¥½åŠäº†ï¼Œç›´æ¥ç”¨<code>requests</code>è·å–æ•°æ®æ‰“å°å‡ºæ¥ï¼Œä»£ç å¦‚ä¸‹:</p><blockquote><p>è¿™é‡Œåªè®¾ç½®äº†<code>pn=2</code>ï¼Œæš‚æ—¶å¤„ç†ä¸€éƒ¨åˆ†æ•°æ®ï¼Œå¦‚æœä¸€æ¬¡å–å¤ªå¤šæ•°æ®äº†ä¸å¥½åˆ†æã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">     <span class="string">&#x27;Accept&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">pn = <span class="number">2</span> <span class="comment">#æµ‹è¯•åªæŠ“å–ä¸€éƒ¨åˆ†</span></span><br><span class="line">url = <span class="string">f&#x27;https://cool.bilibili.com/x/co-create/user/material_list?ps=15&amp;pn=<span class="subst">&#123;pn&#125;</span>&amp;mid=1445996044&amp;up_from=1&amp;biz_from=3&amp;material_type=7&amp;t=<span class="subst">&#123;time.time()&#125;</span>&#x27;</span></span><br><span class="line">html=requests.get(url,headers=headers);</span><br><span class="line"><span class="keyword">if</span> html.status_code == <span class="number">200</span>:</span><br><span class="line">     html_bytes = html.content;</span><br><span class="line">     html_str = html_bytes.decode();</span><br><span class="line"><span class="built_in">print</span>(html_str)</span><br></pre></td></tr></table></figure><p>è·å–çš„ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;code&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;message&quot;</span><span class="punctuation">:</span><span class="string">&quot;0&quot;</span><span class="punctuation">,</span><span class="attr">&quot;ttl&quot;</span><span class="punctuation">:</span><span class="number">1</span><span class="punctuation">,</span><span class="attr">&quot;data&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;material_list&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="attr">&quot;material_id&quot;</span><span class="punctuation">:</span><span class="number">822876</span><span class="punctuation">,</span><span class="attr">&quot;material_type&quot;</span><span class="punctuation">:</span><span class="number">7</span><span class="punctuation">,</span><span class="attr">&quot;sid&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;title&quot;</span><span class="punctuation">:</span><span class="string">&quot;ä¸€çŒ«äºº-çœŸç›¸.gif&quot;</span><span class="punctuation">,</span><span class="attr">&quot;cover&quot;</span><span class="punctuation">:</span><span class="string">&quot;https://i0.hdslb.com/bfs/material_up/7165468d675fa4df192ec861403e7997e9303c34.gif&quot;</span><span class="punctuation">,</span><span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;musicians&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;categories&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;used_count&quot;</span><span class="punctuation">:</span><span class="number">233</span><span class="punctuation">,</span><span class="attr">&quot;videopre_url&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;material_id&quot;</span><span class="punctuation">:</span><span class="number">961278</span><span class="punctuation">,</span><span class="attr">&quot;material_type&quot;</span><span class="punctuation">:</span><span class="number">7</span><span class="punctuation">,</span><span class="attr">&quot;sid&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;title&quot;</span><span class="punctuation">:</span><span class="string">&quot;ä¸€çŒ«äºº-ä¸–ä¿—çš„æ¬²æœ›1&quot;</span><span class="punctuation">,</span><span class="attr">&quot;cover&quot;</span><span class="punctuation">:</span><span class="string">&quot;https://i0.hdslb.com/bfs/material_up/0b0b9aaa63617ef602f33cea0a83f5e730f4402f.jpg&quot;</span><span class="punctuation">,</span><span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;musicians&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;categories&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;used_count&quot;</span><span class="punctuation">:</span><span class="number">223</span><span class="punctuation">,</span><span class="attr">&quot;videopre_url&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;material_id&quot;</span><span class="punctuation">:</span><span class="number">832071</span><span class="punctuation">,</span><span class="attr">&quot;material_type&quot;</span><span class="punctuation">:</span><span class="number">7</span><span class="punctuation">,</span><span class="attr">&quot;sid&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;title&quot;</span><span class="punctuation">:</span><span class="string">&quot;ä¸€çŒ«äºº-ä¸Šç­.gif&quot;</span><span class="punctuation">,</span><span class="attr">&quot;cover&quot;</span><span class="punctuation">:</span><span class="string">&quot;https://i0.hdslb.com/bfs/material_up/46376cc652e9113945f9213c2a3a561287d1851b.gif&quot;</span><span class="punctuation">,</span><span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;musicians&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;categories&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;used_count&quot;</span><span class="punctuation">:</span><span class="number">216</span><span class="punctuation">,</span><span class="attr">&quot;videopre_url&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;material_id&quot;</span><span class="punctuation">:</span><span class="number">940356</span><span class="punctuation">,</span><span class="attr">&quot;material_type&quot;</span><span class="punctuation">:</span><span class="number">7</span><span class="punctuation">,</span><span class="attr">&quot;sid&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;title&quot;</span><span class="punctuation">:</span><span class="string">&quot;ä¸€çŒ«äºº-ä¸­ç§‹å¿«ä¹.j&quot;</span><span class="punctuation">,</span><span class="attr">&quot;cover&quot;</span><span class="punctuation">:</span><span class="string">&quot;https://i0.hdslb.com/bfs/material_up/70e1ca54f83da61532f333b0bf5abfe81ac51686.jpg&quot;</span><span class="punctuation">,</span><span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;musicians&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;categories&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;used_count&quot;</span><span class="punctuation">:</span><span class="number">205</span><span class="punctuation">,</span><span class="attr">&quot;videopre_url&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;material_id&quot;</span><span class="punctuation">:</span><span class="number">891899</span><span class="punctuation">,</span><span class="attr">&quot;material_type&quot;</span><span class="punctuation">:</span><span class="number">7</span><span class="punctuation">,</span><span class="attr">&quot;sid&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;title&quot;</span><span class="punctuation">:</span><span class="string">&quot;ä¸€çŒ«äºº-æ£’.gif&quot;</span><span class="punctuation">,</span><span class="attr">&quot;cover&quot;</span><span class="punctuation">:</span><span class="string">&quot;https://i0.hdslb.com/bfs/material_up/a49e0c6c8c61bd0db039264e1301d7d53e83534e.gif&quot;</span><span class="punctuation">,</span><span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;musicians&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;categories&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;used_count&quot;</span><span class="punctuation">:</span><span class="number">172</span><span class="punctuation">,</span><span class="attr">&quot;videopre_url&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;material_id&quot;</span><span class="punctuation">:</span><span class="number">894317</span><span class="punctuation">,</span><span class="attr">&quot;material_type&quot;</span><span class="punctuation">:</span><span class="number">7</span><span class="punctuation">,</span><span class="attr">&quot;sid&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;title&quot;</span><span class="punctuation">:</span><span class="string">&quot;ä¸€çŒ«äºº-é£æœº.gif&quot;</span><span class="punctuation">,</span><span class="attr">&quot;cover&quot;</span><span class="punctuation">:</span><span class="string">&quot;https://i0.hdslb.com/bfs/material_up/85a2ff51879f8b6c89938145a28f0d599336fe0a.gif&quot;</span><span class="punctuation">,</span><span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;musicians&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;categories&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;used_count&quot;</span><span class="punctuation">:</span><span class="number">162</span><span class="punctuation">,</span><span class="attr">&quot;videopre_url&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;material_id&quot;</span><span class="punctuation">:</span><span class="number">931391</span><span class="punctuation">,</span><span class="attr">&quot;material_type&quot;</span><span class="punctuation">:</span><span class="number">7</span><span class="punctuation">,</span><span class="attr">&quot;sid&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;title&quot;</span><span class="punctuation">:</span><span class="string">&quot;ä¸€çŒ«äºº-å°ä¸‘.png&quot;</span><span class="punctuation">,</span><span class="attr">&quot;cover&quot;</span><span class="punctuation">:</span><span class="string">&quot;https://i0.hdslb.com/bfs/material_up/b68b50d6d739d713c152e493924363f3b72f6f6e.png&quot;</span><span class="punctuation">,</span><span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;musicians&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;categories&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;used_count&quot;</span><span class="punctuation">:</span><span class="number">157</span><span class="punctuation">,</span><span class="attr">&quot;videopre_url&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;material_id&quot;</span><span class="punctuation">:</span><span class="number">972898</span><span class="punctuation">,</span><span class="attr">&quot;material_type&quot;</span><span class="punctuation">:</span><span class="number">7</span><span class="punctuation">,</span><span class="attr">&quot;sid&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;title&quot;</span><span class="punctuation">:</span><span class="string">&quot;ä¸€çŒ«äºº-æ–¯è±ç‰¹æ—.p&quot;</span><span class="punctuation">,</span><span class="attr">&quot;cover&quot;</span><span class="punctuation">:</span><span class="string">&quot;https://i0.hdslb.com/bfs/material_up/3d78bd013a0a820d01985dc29ff832a39b0d8944.png&quot;</span><span class="punctuation">,</span><span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;musicians&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;categories&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;used_count&quot;</span><span class="punctuation">:</span><span class="number">153</span><span class="punctuation">,</span><span class="attr">&quot;videopre_url&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;material_id&quot;</span><span class="punctuation">:</span><span class="number">830663</span><span class="punctuation">,</span><span class="attr">&quot;material_type&quot;</span><span class="punctuation">:</span><span class="number">7</span><span class="punctuation">,</span><span class="attr">&quot;sid&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;title&quot;</span><span class="punctuation">:</span><span class="string">&quot;ä¸€çŒ«äºº-å¸….gif&quot;</span><span class="punctuation">,</span><span class="attr">&quot;cover&quot;</span><span class="punctuation">:</span><span class="string">&quot;https://i0.hdslb.com/bfs/material_up/644bf254c17b733653425db528b3b39553599e1a.gif&quot;</span><span class="punctuation">,</span><span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;musicians&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;categories&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;used_count&quot;</span><span class="punctuation">:</span><span class="number">140</span><span class="punctuation">,</span><span class="attr">&quot;videopre_url&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;material_id&quot;</span><span class="punctuation">:</span><span class="number">822879</span><span class="punctuation">,</span><span class="attr">&quot;material_type&quot;</span><span class="punctuation">:</span><span class="number">7</span><span class="punctuation">,</span><span class="attr">&quot;sid&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;title&quot;</span><span class="punctuation">:</span><span class="string">&quot;ä¸€çŒ«äºº-å†².gif&quot;</span><span class="punctuation">,</span><span class="attr">&quot;cover&quot;</span><span class="punctuation">:</span><span class="string">&quot;https://i0.hdslb.com/bfs/material_up/7be99b8651dd69cc0664bed583a3256f873e20cb.gif&quot;</span><span class="punctuation">,</span><span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;musicians&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;categories&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;used_count&quot;</span><span class="punctuation">:</span><span class="number">123</span><span class="punctuation">,</span><span class="attr">&quot;videopre_url&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;material_id&quot;</span><span class="punctuation">:</span><span class="number">867832</span><span class="punctuation">,</span><span class="attr">&quot;material_type&quot;</span><span class="punctuation">:</span><span class="number">7</span><span class="punctuation">,</span><span class="attr">&quot;sid&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;title&quot;</span><span class="punctuation">:</span><span class="string">&quot;ä¸€çŒ«äºº-å¸…é†’.png&quot;</span><span class="punctuation">,</span><span class="attr">&quot;cover&quot;</span><span class="punctuation">:</span><span class="string">&quot;https://i0.hdslb.com/bfs/material_up/61dbe0163a0c545892f195d53d8ba001d394751e.png&quot;</span><span class="punctuation">,</span><span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;musicians&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;categories&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;used_count&quot;</span><span class="punctuation">:</span><span class="number">122</span><span class="punctuation">,</span><span class="attr">&quot;videopre_url&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;material_id&quot;</span><span class="punctuation">:</span><span class="number">961783</span><span class="punctuation">,</span><span class="attr">&quot;material_type&quot;</span><span class="punctuation">:</span><span class="number">7</span><span class="punctuation">,</span><span class="attr">&quot;sid&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;title&quot;</span><span class="punctuation">:</span><span class="string">&quot;ä¸€çŒ«äºº-JOJOæ‰¿å¤ª&quot;</span><span class="punctuation">,</span><span class="attr">&quot;cover&quot;</span><span class="punctuation">:</span><span class="string">&quot;https://i0.hdslb.com/bfs/material_up/451c9d93008bf50dd0005443c74e45dd72b71128.png&quot;</span><span class="punctuation">,</span><span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;musicians&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;categories&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;used_count&quot;</span><span class="punctuation">:</span><span class="number">121</span><span class="punctuation">,</span><span class="attr">&quot;videopre_url&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;material_id&quot;</span><span class="punctuation">:</span><span class="number">860578</span><span class="punctuation">,</span><span class="attr">&quot;material_type&quot;</span><span class="punctuation">:</span><span class="number">7</span><span class="punctuation">,</span><span class="attr">&quot;sid&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;title&quot;</span><span class="punctuation">:</span><span class="string">&quot;ä¸€çŒ«äºº-è·³èˆ.gif&quot;</span><span class="punctuation">,</span><span class="attr">&quot;cover&quot;</span><span class="punctuation">:</span><span class="string">&quot;https://i0.hdslb.com/bfs/material_up/d4072bef4bd47bedc6051916d93beb256f7c8c6a.gif&quot;</span><span class="punctuation">,</span><span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;musicians&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;categories&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;used_count&quot;</span><span class="punctuation">:</span><span class="number">121</span><span class="punctuation">,</span><span class="attr">&quot;videopre_url&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;material_id&quot;</span><span class="punctuation">:</span><span class="number">942980</span><span class="punctuation">,</span><span class="attr">&quot;material_type&quot;</span><span class="punctuation">:</span><span class="number">7</span><span class="punctuation">,</span><span class="attr">&quot;sid&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;title&quot;</span><span class="punctuation">:</span><span class="string">&quot;ä¸€çŒ«äºº-èµ«å¥‡å¸•å¥‡.j&quot;</span><span class="punctuation">,</span><span class="attr">&quot;cover&quot;</span><span class="punctuation">:</span><span class="string">&quot;https://i0.hdslb.com/bfs/material_up/88ce5ab9891d8a42133c41bdab538e2414b31f2b.jpg&quot;</span><span class="punctuation">,</span><span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;musicians&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;categories&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;used_count&quot;</span><span class="punctuation">:</span><span class="number">119</span><span class="punctuation">,</span><span class="attr">&quot;videopre_url&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;material_id&quot;</span><span class="punctuation">:</span><span class="number">972899</span><span class="punctuation">,</span><span class="attr">&quot;material_type&quot;</span><span class="punctuation">:</span><span class="number">7</span><span class="punctuation">,</span><span class="attr">&quot;sid&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;title&quot;</span><span class="punctuation">:</span><span class="string">&quot;ä¸€çŒ«äºº-æ‹‰æ–‡å…‹åŠ³.p&quot;</span><span class="punctuation">,</span><span class="attr">&quot;cover&quot;</span><span class="punctuation">:</span><span class="string">&quot;https://i0.hdslb.com/bfs/material_up/92ed49143c4301c9e8e5af86b85458c0b6675ac5.png&quot;</span><span class="punctuation">,</span><span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span><span class="attr">&quot;musicians&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;categories&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;used_count&quot;</span><span class="punctuation">:</span><span class="number">115</span><span class="punctuation">,</span><span class="attr">&quot;videopre_url&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">,</span><span class="attr">&quot;pager&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;total&quot;</span><span class="punctuation">:</span><span class="number">228</span><span class="punctuation">,</span><span class="attr">&quot;pn&quot;</span><span class="punctuation">:</span><span class="number">2</span><span class="punctuation">,</span><span class="attr">&quot;ps&quot;</span><span class="punctuation">:</span><span class="number">15</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>åˆ†ææˆ‘ä»¬å–åˆ°çš„æ•°æ®ï¼Œæ‰¾åˆ°æˆ‘ä»¬éœ€è¦çš„ä¸œè¥¿ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220516215701036.png" alt="image-20220516215701036"></p><p>é€šè¿‡å‰é¢æµè§ˆå™¨è°ƒè¯•é¡µé¢çš„<code>Accept: application/json</code>å¾—çŸ¥è¯·æ±‚åˆ°çš„æ•°æ®æ˜¯Jsonæ•°æ®ã€‚</p><p> ç„¶åä½¿ç”¨<code>json</code>åŒ…å¤„ç†ä¸€ä¸‹å¾—åˆ°çš„æ•°æ® (<em>ä»ç¬¬17è¡Œå¼€å§‹</em>):</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"><span class="keyword">from</span> multiprocessing.dummy <span class="keyword">import</span> Pool</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">     <span class="string">&#x27;Accept&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">pn = <span class="number">2</span></span><br><span class="line">url = <span class="string">f&#x27;https://cool.bilibili.com/x/co-create/user/material_list?ps=15&amp;pn=<span class="subst">&#123;pn&#125;</span>&amp;mid=1445996044&amp;up_from=1&amp;biz_from=3&amp;material_type=7&amp;t=<span class="subst">&#123;time.time()&#125;</span>&#x27;</span></span><br><span class="line">html=requests.get(url,headers=headers);</span><br><span class="line"><span class="keyword">if</span> html.status_code == <span class="number">200</span>:</span><br><span class="line">     html_bytes = html.content;</span><br><span class="line">     html_str = html_bytes.decode();</span><br><span class="line"><span class="comment"># print(html_str)</span></span><br><span class="line">data = json.loads(html_str);</span><br><span class="line">all_items=data[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;material_list&#x27;</span>]</span><br><span class="line">pic_content=[];</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> all_items:</span><br><span class="line">     title = item[<span class="string">&#x27;title&#x27;</span>];</span><br><span class="line">     material_id = item[<span class="string">&#x27;material_id&#x27;</span>]</span><br><span class="line">     uri = item[<span class="string">&#x27;cover&#x27;</span>]</span><br><span class="line">     used_count = item[<span class="string">&#x27;used_count&#x27;</span>]</span><br><span class="line">     pic_content.append(&#123;<span class="string">&#x27;åç§°&#x27;</span>: title, <span class="string">&#x27;ID&#x27;</span>: material_id, <span class="string">&#x27;ä½¿ç”¨æ¬¡æ•°&#x27;</span>:used_count, <span class="string">&#x27;URI&#x27;</span>:uri&#125;);</span><br><span class="line"><span class="keyword">for</span> pic <span class="keyword">in</span> pic_content:</span><br><span class="line">     <span class="built_in">print</span>(pic)</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/bin/python3<span class="number">.9</span> /Users/q1jun/Desktop/pythonProject/scraper.py</span><br><span class="line"><span class="punctuation">&#123;</span>&#x27;åç§°&#x27;<span class="punctuation">:</span> &#x27;ä¸€çŒ«äºº-çœŸç›¸.gif&#x27;<span class="punctuation">,</span> &#x27;ID&#x27;<span class="punctuation">:</span> <span class="number">822876</span><span class="punctuation">,</span> &#x27;ä½¿ç”¨æ¬¡æ•°&#x27;<span class="punctuation">:</span> <span class="number">233</span><span class="punctuation">,</span> &#x27;URI&#x27;<span class="punctuation">:</span> &#x27;https<span class="punctuation">:</span><span class="comment">//i0.hdslb.com/bfs/material_up/7165468d675fa4df192ec861403e7997e9303c34.gif&#x27;&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span>&#x27;åç§°&#x27;<span class="punctuation">:</span> &#x27;ä¸€çŒ«äºº-ä¸–ä¿—çš„æ¬²æœ›<span class="number">1</span>&#x27;<span class="punctuation">,</span> &#x27;ID&#x27;<span class="punctuation">:</span> <span class="number">961278</span><span class="punctuation">,</span> &#x27;ä½¿ç”¨æ¬¡æ•°&#x27;<span class="punctuation">:</span> <span class="number">223</span><span class="punctuation">,</span> &#x27;URI&#x27;<span class="punctuation">:</span> &#x27;https<span class="punctuation">:</span><span class="comment">//i0.hdslb.com/bfs/material_up/0b0b9aaa63617ef602f33cea0a83f5e730f4402f.jpg&#x27;&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span>&#x27;åç§°&#x27;<span class="punctuation">:</span> &#x27;ä¸€çŒ«äºº-ä¸Šç­.gif&#x27;<span class="punctuation">,</span> &#x27;ID&#x27;<span class="punctuation">:</span> <span class="number">832071</span><span class="punctuation">,</span> &#x27;ä½¿ç”¨æ¬¡æ•°&#x27;<span class="punctuation">:</span> <span class="number">216</span><span class="punctuation">,</span> &#x27;URI&#x27;<span class="punctuation">:</span> &#x27;https<span class="punctuation">:</span><span class="comment">//i0.hdslb.com/bfs/material_up/46376cc652e9113945f9213c2a3a561287d1851b.gif&#x27;&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span>&#x27;åç§°&#x27;<span class="punctuation">:</span> &#x27;ä¸€çŒ«äºº-ä¸­ç§‹å¿«ä¹.j&#x27;<span class="punctuation">,</span> &#x27;ID&#x27;<span class="punctuation">:</span> <span class="number">940356</span><span class="punctuation">,</span> &#x27;ä½¿ç”¨æ¬¡æ•°&#x27;<span class="punctuation">:</span> <span class="number">205</span><span class="punctuation">,</span> &#x27;URI&#x27;<span class="punctuation">:</span> &#x27;https<span class="punctuation">:</span><span class="comment">//i0.hdslb.com/bfs/material_up/70e1ca54f83da61532f333b0bf5abfe81ac51686.jpg&#x27;&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span>&#x27;åç§°&#x27;<span class="punctuation">:</span> &#x27;ä¸€çŒ«äºº-æ£’.gif&#x27;<span class="punctuation">,</span> &#x27;ID&#x27;<span class="punctuation">:</span> <span class="number">891899</span><span class="punctuation">,</span> &#x27;ä½¿ç”¨æ¬¡æ•°&#x27;<span class="punctuation">:</span> <span class="number">172</span><span class="punctuation">,</span> &#x27;URI&#x27;<span class="punctuation">:</span> &#x27;https<span class="punctuation">:</span><span class="comment">//i0.hdslb.com/bfs/material_up/a49e0c6c8c61bd0db039264e1301d7d53e83534e.gif&#x27;&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span>&#x27;åç§°&#x27;<span class="punctuation">:</span> &#x27;ä¸€çŒ«äºº-é£æœº.gif&#x27;<span class="punctuation">,</span> &#x27;ID&#x27;<span class="punctuation">:</span> <span class="number">894317</span><span class="punctuation">,</span> &#x27;ä½¿ç”¨æ¬¡æ•°&#x27;<span class="punctuation">:</span> <span class="number">162</span><span class="punctuation">,</span> &#x27;URI&#x27;<span class="punctuation">:</span> &#x27;https<span class="punctuation">:</span><span class="comment">//i0.hdslb.com/bfs/material_up/85a2ff51879f8b6c89938145a28f0d599336fe0a.gif&#x27;&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span>&#x27;åç§°&#x27;<span class="punctuation">:</span> &#x27;ä¸€çŒ«äºº-å°ä¸‘.png&#x27;<span class="punctuation">,</span> &#x27;ID&#x27;<span class="punctuation">:</span> <span class="number">931391</span><span class="punctuation">,</span> &#x27;ä½¿ç”¨æ¬¡æ•°&#x27;<span class="punctuation">:</span> <span class="number">157</span><span class="punctuation">,</span> &#x27;URI&#x27;<span class="punctuation">:</span> &#x27;https<span class="punctuation">:</span><span class="comment">//i0.hdslb.com/bfs/material_up/b68b50d6d739d713c152e493924363f3b72f6f6e.png&#x27;&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span>&#x27;åç§°&#x27;<span class="punctuation">:</span> &#x27;ä¸€çŒ«äºº-æ–¯è±ç‰¹æ—.p&#x27;<span class="punctuation">,</span> &#x27;ID&#x27;<span class="punctuation">:</span> <span class="number">972898</span><span class="punctuation">,</span> &#x27;ä½¿ç”¨æ¬¡æ•°&#x27;<span class="punctuation">:</span> <span class="number">153</span><span class="punctuation">,</span> &#x27;URI&#x27;<span class="punctuation">:</span> &#x27;https<span class="punctuation">:</span><span class="comment">//i0.hdslb.com/bfs/material_up/3d78bd013a0a820d01985dc29ff832a39b0d8944.png&#x27;&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span>&#x27;åç§°&#x27;<span class="punctuation">:</span> &#x27;ä¸€çŒ«äºº-å¸….gif&#x27;<span class="punctuation">,</span> &#x27;ID&#x27;<span class="punctuation">:</span> <span class="number">830663</span><span class="punctuation">,</span> &#x27;ä½¿ç”¨æ¬¡æ•°&#x27;<span class="punctuation">:</span> <span class="number">140</span><span class="punctuation">,</span> &#x27;URI&#x27;<span class="punctuation">:</span> &#x27;https<span class="punctuation">:</span><span class="comment">//i0.hdslb.com/bfs/material_up/644bf254c17b733653425db528b3b39553599e1a.gif&#x27;&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span>&#x27;åç§°&#x27;<span class="punctuation">:</span> &#x27;ä¸€çŒ«äºº-å†².gif&#x27;<span class="punctuation">,</span> &#x27;ID&#x27;<span class="punctuation">:</span> <span class="number">822879</span><span class="punctuation">,</span> &#x27;ä½¿ç”¨æ¬¡æ•°&#x27;<span class="punctuation">:</span> <span class="number">123</span><span class="punctuation">,</span> &#x27;URI&#x27;<span class="punctuation">:</span> &#x27;https<span class="punctuation">:</span><span class="comment">//i0.hdslb.com/bfs/material_up/7be99b8651dd69cc0664bed583a3256f873e20cb.gif&#x27;&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span>&#x27;åç§°&#x27;<span class="punctuation">:</span> &#x27;ä¸€çŒ«äºº-å¸…é†’.png&#x27;<span class="punctuation">,</span> &#x27;ID&#x27;<span class="punctuation">:</span> <span class="number">867832</span><span class="punctuation">,</span> &#x27;ä½¿ç”¨æ¬¡æ•°&#x27;<span class="punctuation">:</span> <span class="number">122</span><span class="punctuation">,</span> &#x27;URI&#x27;<span class="punctuation">:</span> &#x27;https<span class="punctuation">:</span><span class="comment">//i0.hdslb.com/bfs/material_up/61dbe0163a0c545892f195d53d8ba001d394751e.png&#x27;&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span>&#x27;åç§°&#x27;<span class="punctuation">:</span> &#x27;ä¸€çŒ«äºº-JOJOæ‰¿å¤ª&#x27;<span class="punctuation">,</span> &#x27;ID&#x27;<span class="punctuation">:</span> <span class="number">961783</span><span class="punctuation">,</span> &#x27;ä½¿ç”¨æ¬¡æ•°&#x27;<span class="punctuation">:</span> <span class="number">121</span><span class="punctuation">,</span> &#x27;URI&#x27;<span class="punctuation">:</span> &#x27;https<span class="punctuation">:</span><span class="comment">//i0.hdslb.com/bfs/material_up/451c9d93008bf50dd0005443c74e45dd72b71128.png&#x27;&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span>&#x27;åç§°&#x27;<span class="punctuation">:</span> &#x27;ä¸€çŒ«äºº-è·³èˆ.gif&#x27;<span class="punctuation">,</span> &#x27;ID&#x27;<span class="punctuation">:</span> <span class="number">860578</span><span class="punctuation">,</span> &#x27;ä½¿ç”¨æ¬¡æ•°&#x27;<span class="punctuation">:</span> <span class="number">121</span><span class="punctuation">,</span> &#x27;URI&#x27;<span class="punctuation">:</span> &#x27;https<span class="punctuation">:</span><span class="comment">//i0.hdslb.com/bfs/material_up/d4072bef4bd47bedc6051916d93beb256f7c8c6a.gif&#x27;&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span>&#x27;åç§°&#x27;<span class="punctuation">:</span> &#x27;ä¸€çŒ«äºº-èµ«å¥‡å¸•å¥‡.j&#x27;<span class="punctuation">,</span> &#x27;ID&#x27;<span class="punctuation">:</span> <span class="number">942980</span><span class="punctuation">,</span> &#x27;ä½¿ç”¨æ¬¡æ•°&#x27;<span class="punctuation">:</span> <span class="number">119</span><span class="punctuation">,</span> &#x27;URI&#x27;<span class="punctuation">:</span> &#x27;https<span class="punctuation">:</span><span class="comment">//i0.hdslb.com/bfs/material_up/88ce5ab9891d8a42133c41bdab538e2414b31f2b.jpg&#x27;&#125;</span></span><br><span class="line"><span class="punctuation">&#123;</span>&#x27;åç§°&#x27;<span class="punctuation">:</span> &#x27;ä¸€çŒ«äºº-æ‹‰æ–‡å…‹åŠ³.p&#x27;<span class="punctuation">,</span> &#x27;ID&#x27;<span class="punctuation">:</span> <span class="number">972899</span><span class="punctuation">,</span> &#x27;ä½¿ç”¨æ¬¡æ•°&#x27;<span class="punctuation">:</span> <span class="number">115</span><span class="punctuation">,</span> &#x27;URI&#x27;<span class="punctuation">:</span> &#x27;https<span class="punctuation">:</span><span class="comment">//i0.hdslb.com/bfs/material_up/92ed49143c4301c9e8e5af86b85458c0b6675ac5.png&#x27;&#125;</span></span><br></pre></td></tr></table></figure><p>å¥½ï¼æ²¡æœ‰é—®é¢˜ï¼</p><p>æµè§ˆå™¨ä¸­ç›´æ¥åˆ’åˆ°æœ€ä¸‹é¢ï¼Œçœ‹çœ‹æœ‰<del>å¤šæ·±</del>å¤šå°‘é¡µã€‚</p><p>æŸ¥çœ‹æœ€åä¸€å¼ ï¼Œä¸€å…±æœ‰16é¡µï¼Œæœ€åä¸€å¼ æ˜¯<code>ç«ç®­é˜Ÿ.pn</code>ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220516223755327.png" alt="image-20220516223755327"></p><blockquote><p>çœ‹åˆ°è¿™é‡Œè‚¯å®šæœ‰äººå¾ˆå¥‡æ€ªï¼Œå•Šä¸ºä»€ä¹ˆæ˜¯<code>ç«ç®­é˜Ÿ.pn</code>ä¸æ˜¯<code>ç«ç®­é˜Ÿ.png</code>ï¼Ÿï¼Ÿ</p><p>è¿™å°±æ˜¯å¦ä¸€ä¸ªé—®é¢˜äº†ï¼Œé€šè¿‡æŸ¥çœ‹æµè§ˆå™¨ä¸­å…¶ä»–æ•°æ®å¯ä»¥çœ‹åˆ°è¡¨æƒ…åŒ…çš„æ ¼å¼æœ‰<code>.png .jpg .gif</code>ï¼Œ</p><p>ä½†æ˜¯ï¼å¯èƒ½ç”±äºBç«™çš„APIè‡ªèº«ç¼˜æ•…åœ¨è·å¾—<code>title</code>è¿™ä¸ªå…ƒç´ çš„æ—¶å€™æ–‡ä»¶åç¼€æœ‰å¯èƒ½å°‘ä¸€ç‚¹ï¼Œ</p><p>äºæ˜¯å‡ºç°äº†è¿™ç§æ®‹ç¼ºåç¼€:</p><p><code>.j</code>,<code>.jp</code>,<code>.jpg</code>è¿˜æœ‰<code>.</code>å’Œç›´æ¥çœç•¥çš„!</p><p>ä¸ºäº†ä¿è¯è·å–çš„è¡¨æƒ…åŒ…å…·æœ‰å¯è¯»æ€§ï¼Œæ–‡ä»¶åæ˜¯ä¸€ä¸ªé‡è¦çš„ä¸œè¥¿ï¼Œæ‰€ä»¥å°±éœ€è¦å¤„ç†ä¸€ä¸‹è¿™ä¸ªtitleäº†ã€‚</p></blockquote><p>å¤„ç†æ–‡ä»¶ååç¼€çš„æ–¹æ³•å¦‚ä¸‹:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name = title.replace(<span class="string">&#x27;ä¸€çŒ«äºº-&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;.png&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;.pn&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;.p&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;.gif&#x27;</span>,<span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;.gi&#x27;</span>,<span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;.g&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;.&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;.jpg&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;.jp&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;.j&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure><p>å¤§åŠŸå‘Šæˆï¼Œæ¥ä¸‹æ¥å°±æ˜¯çˆ¬å–æ‰€æœ‰è¡¨æƒ…åŒ…äº†ã€‚</p><p>çˆ¬å–æ‰€æœ‰é¡µé¢<code>pn=0-16</code>ï¼ˆä¹Ÿè®¸æœ‰ç¬¬0é¡µï¼Œä¸è¿‡æ²¡å…³ç³»ï¼‰çš„ä»£ç :</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">     <span class="string">&#x27;Accept&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">pic_content = []</span><br><span class="line"><span class="keyword">for</span> pn <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="number">17</span>):</span><br><span class="line">     url = <span class="string">f&#x27;https://cool.bilibili.com/x/co-create/user/material_list?ps=15&amp;pn=<span class="subst">&#123;pn&#125;</span>&amp;mid=1445996044&amp;up_from=1&amp;biz_from=3&amp;material_type=7&amp;t=<span class="subst">&#123;time.time()&#125;</span>&#x27;</span></span><br><span class="line">     html = requests.get(url, headers=headers)</span><br><span class="line">     <span class="comment"># print(f&#x27;start=&#123;time.ctime()&#125;&#x27;)</span></span><br><span class="line">     <span class="comment"># time.sleep(2)</span></span><br><span class="line">     <span class="comment"># print(f&#x27;end=&#123;time.ctime()&#125;&#x27;)</span></span><br><span class="line">     <span class="built_in">print</span>(<span class="string">f&#x27;uri = <span class="subst">&#123;url&#125;</span>&#x27;</span>)</span><br><span class="line">     <span class="keyword">if</span> html.status_code == <span class="number">200</span>:</span><br><span class="line">          html_bytes = html.content</span><br><span class="line">          html_str = html_bytes.decode()</span><br><span class="line">     <span class="comment"># print(html_str)</span></span><br><span class="line">     data = json.loads(html_str)</span><br><span class="line">     all_items = data[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;material_list&#x27;</span>]</span><br><span class="line">     <span class="keyword">for</span> item <span class="keyword">in</span> all_items:</span><br><span class="line">          title = item[<span class="string">&#x27;title&#x27;</span>]</span><br><span class="line">          material_id = item[<span class="string">&#x27;material_id&#x27;</span>]</span><br><span class="line">          uri = item[<span class="string">&#x27;cover&#x27;</span>]</span><br><span class="line">          used_count = item[<span class="string">&#x27;used_count&#x27;</span>]</span><br><span class="line">          pic_content.append(&#123;<span class="string">&#x27;åç§°&#x27;</span>: title, <span class="string">&#x27;ID&#x27;</span>: material_id, <span class="string">&#x27;ä½¿ç”¨æ¬¡æ•°&#x27;</span>: used_count, <span class="string">&#x27;URI&#x27;</span>: uri&#125;)</span><br><span class="line"><span class="keyword">for</span> pic <span class="keyword">in</span> pic_content:</span><br><span class="line">     <span class="built_in">print</span>(pic)</span><br></pre></td></tr></table></figure><blockquote><p>æœ€åé€šè¿‡<code>os</code>åŒ…æ“ä½œä¸‹è½½åˆ°æœ¬åœ°çš„å½“å‰ç›®å½•çš„<code>source</code>æ–‡ä»¶å¤¹ã€‚</p></blockquote><p>æœ€ç»ˆä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>(<span class="params">url: <span class="built_in">str</span>, dst_dir: <span class="built_in">str</span>, title: <span class="built_in">str</span></span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(dst_dir):</span><br><span class="line">        os.makedirs(dst_dir)</span><br><span class="line"></span><br><span class="line">    name = title.replace(<span class="string">&#x27;ä¸€çŒ«äºº-&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;.png&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;.pn&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;.p&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;.gif&#x27;</span>,</span><br><span class="line">                                                                                                      <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;.gi&#x27;</span>,</span><br><span class="line">                                                                                                                  <span class="string">&#x27;&#x27;</span>).replace(</span><br><span class="line">        <span class="string">&#x27;.g&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;.&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;.jpg&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;.jp&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;.j&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    filename = url.split(<span class="string">&#x27;/&#x27;</span>)[-<span class="number">1</span>].replace(<span class="string">&quot; &quot;</span>, <span class="string">&quot;_&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;.png&#x27;</span> <span class="keyword">in</span> filename:</span><br><span class="line">        filename = name + <span class="string">&quot;.png&quot;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;.gif&#x27;</span> <span class="keyword">in</span> filename:</span><br><span class="line">        filename = name + <span class="string">&quot;.gif&quot;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;.jpg&#x27;</span> <span class="keyword">in</span> filename:</span><br><span class="line">        filename = name + <span class="string">&quot;.jpg&quot;</span></span><br><span class="line">    file_path = os.path.join(dst_dir, filename)</span><br><span class="line">    r = requests.get(url, stream=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> r.ok:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;saving to&quot;</span>, os.path.abspath(file_path))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_path, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">for</span> chunk <span class="keyword">in</span> r.iter_content(chunk_size=<span class="number">1024</span> * <span class="number">8</span>):</span><br><span class="line">            <span class="keyword">if</span> chunk:</span><br><span class="line">                f.write(chunk)</span><br><span class="line">                f.flush()</span><br><span class="line">                os.fsync(f.fileno())</span><br><span class="line">            <span class="keyword">else</span>:  <span class="comment"># HTTP status code 4XX/5XX</span></span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;Download failed: status code &#123;&#125;\n&#123;&#125;&quot;</span>.<span class="built_in">format</span>(r.status_code, r.text))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;Accept&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">url_list = []</span><br><span class="line">pic_content = []</span><br><span class="line"><span class="keyword">for</span> pn <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">17</span>):</span><br><span class="line">    url = <span class="string">f&#x27;https://cool.bilibili.com/x/co-create/user/material_list?ps=15&amp;pn=<span class="subst">&#123;pn&#125;</span>&amp;mid=1445996044&amp;up_from=1&amp;biz_from=3&amp;material_type=7&amp;t=<span class="subst">&#123;time.time()&#125;</span>&#x27;</span></span><br><span class="line">    html = requests.get(url, headers=headers)</span><br><span class="line">    <span class="comment"># print(f&#x27;start=&#123;time.ctime()&#125;&#x27;)</span></span><br><span class="line">    <span class="comment"># time.sleep(2)</span></span><br><span class="line">    <span class="comment"># print(f&#x27;end=&#123;time.ctime()&#125;&#x27;)</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;uri = <span class="subst">&#123;url&#125;</span>&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> html.status_code == <span class="number">200</span>:</span><br><span class="line">        html_bytes = html.content</span><br><span class="line">        html_str = html_bytes.decode()</span><br><span class="line">    <span class="comment"># print(html_str)</span></span><br><span class="line">    data = json.loads(html_str)</span><br><span class="line">    all_items = data[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;material_list&#x27;</span>]</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> all_items:</span><br><span class="line">        title = item[<span class="string">&#x27;title&#x27;</span>]</span><br><span class="line">        material_id = item[<span class="string">&#x27;material_id&#x27;</span>]</span><br><span class="line">        uri = item[<span class="string">&#x27;cover&#x27;</span>]</span><br><span class="line">        used_count = item[<span class="string">&#x27;used_count&#x27;</span>]</span><br><span class="line">        pic_content.append(&#123;<span class="string">&#x27;åç§°&#x27;</span>: title, <span class="string">&#x27;ID&#x27;</span>: material_id, <span class="string">&#x27;ä½¿ç”¨æ¬¡æ•°&#x27;</span>: used_count, <span class="string">&#x27;URI&#x27;</span>: uri&#125;)</span><br><span class="line">        url_list.append(uri)</span><br><span class="line">        download(uri, dst_dir=<span class="string">&quot;source&quot;</span>, title=title)</span><br><span class="line"><span class="keyword">for</span> pic <span class="keyword">in</span> pic_content:</span><br><span class="line">    <span class="built_in">print</span>(pic)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æœ€ç»ˆæ•ˆæœæˆªå›¾: </p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220516233421550.png" alt="image-20220516233421550"></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220516233544162.png" alt="image-20220516233544162"></p><blockquote><p>ä¸€å…±227å¼ çŒ«äººè¡¨æƒ…ï¼åˆå¯ä»¥ç‹ ç‹ çš„æ°´ç¾¤äº†ï¼ğŸ¥°</p></blockquote><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/%E5%B8%A6%E8%96%AA%E7%BE%A4%E8%81%8A.png" alt="å¸¦è–ªç¾¤èŠ"></p><blockquote><p>ä¸‹è½½çš„è¡¨æƒ…åŒ…</p><ul><li><p>æˆ‘è‡ªå·±çš„äº‘ï¼š <a target="_blank" rel="noopener" href="http://cloud.q1jun.cn/s/8GuV">http://cloud.q1jun.cn/s/8GuV</a> ï¼ˆå¯é¢„è§ˆ</p></li><li><p>ç™¾åº¦äº‘: <a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1gPQPjmaAEQodEBGYP_lYvQ">https://pan.baidu.com/s/1gPQPjmaAEQodEBGYP_lYvQ</a> æå–ç : tnoi</p></li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå®‰å…¨ </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Web </tag>
            
            <tag> bs4 </tag>
            
            <tag> çˆ¬è™« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>0512å®è®­ä½œä¸š</title>
      <link href="/2022/05/12/a01aa4c60e18-q1jun/"/>
      <url>/2022/05/12/a01aa4c60e18-q1jun/</url>
      
        <content type="html"><![CDATA[<h3 id="0x01-ç™»å…¥æ¨¡å—ä»£ç å®ç°"><a href="#0x01-ç™»å…¥æ¨¡å—ä»£ç å®ç°" class="headerlink" title="0x01 ç™»å…¥æ¨¡å—ä»£ç å®ç°"></a>0x01 ç™»å…¥æ¨¡å—ä»£ç å®ç°</h3><ol><li>åˆ›å»ºUserå®ä½“ç±»</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ruanko.newspublish.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Users</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> uid;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Users</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Users</span><span class="params">(<span class="type">int</span> uid, String username, String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.uid = uid;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getUid</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> uid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUid</span><span class="params">(<span class="type">int</span> uid)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.uid = uid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPassword</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPassword</span><span class="params">(String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Users&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;uid=&quot;</span> + uid +</span><br><span class="line">                <span class="string">&quot;, username=&#x27;&quot;</span> + username + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, password=&#x27;&quot;</span> + password + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="2"><li>åˆ›å»ºå­˜æ”¾Useræ•°æ®çš„æ•°æ®åº“table</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for users</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `users`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `users` (</span><br><span class="line">  `uid` <span class="type">int</span> unsigned <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `username` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`uid`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">2</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb4 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8mb4_0900_ai_ci;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of users</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">BEGIN</span>;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `users` <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;admin&#x27;</span>, <span class="string">&#x27;21232f297a57a5a743894a0e4a801fc3&#x27;</span>);</span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure><ol start="3"><li>åˆ›å»ºlogin.jspæ–‡ä»¶</li></ol><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: q1jun</span><br><span class="line">  Date: <span class="number">2022</span>/<span class="number">5</span>/<span class="number">11</span></span><br><span class="line">  Time: <span class="number">17</span>:<span class="number">19</span></span><br><span class="line">  To change <span class="built_in">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> request.getContextPath();</span><br><span class="line">    <span class="type">String</span> <span class="variable">basePath</span> <span class="operator">=</span> request.getScheme()+<span class="string">&quot;://&quot;</span>+request.getServerName()+<span class="string">&quot;:&quot;</span>+request.getServerPort()+path+<span class="string">&quot;/&quot;</span>;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;base href=<span class="string">&quot;&lt;%=basePath%&gt;&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;ç™»å…¥&lt;/title&gt;</span><br><span class="line">    &lt;script type=<span class="string">&quot;text/javascript&quot;</span> src=<span class="string">&quot;js/weui.min.js&quot;</span> language=<span class="string">&quot;JavaScript&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">    &lt;link href=<span class="string">&quot;css/weui.css&quot;</span> type=<span class="string">&quot;text/css&quot;</span> rel=<span class="string">&quot;stylesheet&quot;</span>&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body data-weui-theme=<span class="string">&quot;light&quot;</span>&gt;</span><br><span class="line">&lt;form class=<span class="string">&quot;weui-cells&quot;</span> action=<span class="string">&quot;login&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;label <span class="keyword">for</span>=<span class="string">&quot;js_input1&quot;</span> class=<span class="string">&quot;weui-cell weui-cell_active&quot;</span>&gt;</span><br><span class="line">        &lt;div class=<span class="string">&quot;weui-cell__hd&quot;</span>&gt;&lt;span class=<span class="string">&quot;weui-label&quot;</span>&gt;ç”¨æˆ·å&lt;/span&gt;&lt;/div&gt;</span><br><span class="line">        &lt;div class=<span class="string">&quot;weui-cell__bd&quot;</span>&gt;</span><br><span class="line">            &lt;input name=<span class="string">&quot;username&quot;</span> id=<span class="string">&quot;js_input1&quot;</span> class=<span class="string">&quot;weui-input&quot;</span> placeholder=<span class="string">&quot;å¡«å†™ç”¨æˆ·å&quot;</span>&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/label&gt;</span><br><span class="line">    &lt;label <span class="keyword">for</span>=<span class="string">&quot;js_input2&quot;</span> class=<span class="string">&quot;weui-cell weui-cell_active&quot;</span>&gt;</span><br><span class="line">        &lt;div class=<span class="string">&quot;weui-cell__hd&quot;</span>&gt;&lt;span class=<span class="string">&quot;weui-label&quot;</span>&gt;å¯†ç &lt;/span&gt;&lt;/div&gt;</span><br><span class="line">        &lt;div class=<span class="string">&quot;weui-cell__bd&quot;</span>&gt;</span><br><span class="line">            &lt;input name=<span class="string">&quot;password&quot;</span> id=<span class="string">&quot;js_input2&quot;</span> type=<span class="string">&quot;password&quot;</span> class=<span class="string">&quot;weui-input&quot;</span> placeholder=<span class="string">&quot;å¡«å†™å¯†ç &quot;</span>&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/label&gt;</span><br><span class="line">    &lt;p style=<span class="string">&quot;color: red&quot;</span>&gt;</span><br><span class="line">        &lt;%</span><br><span class="line">            <span class="keyword">if</span>(request.getAttribute(<span class="string">&quot;message&quot;</span>)!=<span class="literal">null</span>)&#123;</span><br><span class="line">                out.println(request.getAttribute(<span class="string">&quot;message&quot;</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        %&gt;</span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">    &lt;input role=<span class="string">&quot;button&quot;</span> class=<span class="string">&quot;weui-btn weui-btn_primary&quot;</span> wah-hotarea=<span class="string">&quot;click&quot;</span> type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;ç¡®å®š&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="4"><li>ä¿®æ”¹Web.xmlæ–‡ä»¶ï¼Œæ·»åŠ servletæ ‡ç­¾</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>login<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>ruanko.newspublish.action.login.login<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>login<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/login<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>login.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="5"><li>åˆ›å»ºå¤„ç†ç™»å…¥çš„DAOå±‚ä»£ç </li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ruanko.newspublish.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ruanko.newspublish.entity.Article;</span><br><span class="line"><span class="keyword">import</span> ruanko.newspublish.entity.Users;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UsersDao</span> <span class="keyword">extends</span> <span class="title class_">BaseDao</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">register</span><span class="params">(Users users)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;INSERT INTO users(username, password) VALUES(&#x27;&quot;</span>+</span><br><span class="line">                users.getUsername() +</span><br><span class="line">                <span class="string">&quot;&#x27;,&#x27;&quot;</span>+</span><br><span class="line">                users.getPassword() +</span><br><span class="line">                <span class="string">&quot;&#x27;)&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;SQL =&#123;&quot;</span>+sql+<span class="string">&quot;&#125;&quot;</span>);</span><br><span class="line">        executeUpdate(sql);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Users <span class="title function_">login</span><span class="params">(String username)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT * FROM users WHERE username= &#x27;&quot;</span> + username+<span class="string">&quot;&#x27;;&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;SQL = &#123;&quot;</span>+sql+<span class="string">&quot;&#125;&quot;</span>);</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> getConnection();</span><br><span class="line">        Statement statement;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            statement = connection.createStatement();</span><br><span class="line">            <span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> statement.executeQuery(sql);</span><br><span class="line">            <span class="keyword">if</span> (resultSet.next()) &#123;</span><br><span class="line">                <span class="type">Users</span> <span class="variable">users1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Users</span>();</span><br><span class="line">                users1.setUid(resultSet.getInt(<span class="string">&quot;uid&quot;</span>));</span><br><span class="line">                users1.setUsername(resultSet.getString(<span class="string">&quot;username&quot;</span>));</span><br><span class="line">                users1.setPassword(resultSet.getString(<span class="string">&quot;password&quot;</span>));</span><br><span class="line">                closeAll(connection, statement, resultSet);</span><br><span class="line">                <span class="keyword">return</span> users1;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.out.println(<span class="string">&quot;[mysql]æŸ¥è¯¢ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updatePassword</span><span class="params">(Users users)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;UPDATE users SET password = &#x27;&quot;</span>+ users.getPassword()+<span class="string">&quot;&#x27; WHERE username = &#x27;&quot;</span> +</span><br><span class="line">                users.getUsername() + <span class="string">&quot;&#x27;;&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;SQL =&#123;&quot;</span>+sql+<span class="string">&quot;&#125;&quot;</span>);</span><br><span class="line">        executeUpdate(sql);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol start="6"><li>åˆ›å»ºå¤„ç†ç™»å…¥çš„Serviveå±‚ä»£ç </li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ruanko.newspublish.biz;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ruanko.newspublish.dao.UsersDao;</span><br><span class="line"><span class="keyword">import</span> ruanko.newspublish.entity.Users;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UsersBiz</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> UsersDao usersDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UsersBiz</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.usersDao = <span class="keyword">new</span> <span class="title class_">UsersDao</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">register</span><span class="params">(Users users)</span>&#123;</span><br><span class="line">        usersDao.register(users);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Users <span class="title function_">login</span><span class="params">(String username)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> usersDao.login(username);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updatePassword</span><span class="params">(Users users)</span>&#123;</span><br><span class="line">        usersDao.updatePassword(users);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="7"><li>åˆ›å»ºå¤„ç†ç™»å…¥æ“ä½œçš„Servletä»£ç </li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ruanko.newspublish.action.login;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ruanko.newspublish.biz.UsersBiz;</span><br><span class="line"><span class="keyword">import</span> ruanko.newspublish.entity.Users;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.math.BigInteger;</span><br><span class="line"><span class="keyword">import</span> java.security.MessageDigest;</span><br><span class="line"><span class="keyword">import</span> java.security.NoSuchAlgorithmException;</span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">login</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        <span class="type">Users</span> <span class="variable">users</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Users</span>();</span><br><span class="line">        users.setUsername(request.getParameter(<span class="string">&quot;username&quot;</span>));</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"><span class="comment">//        System.out.println(password);</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">hashPassword</span> <span class="operator">=</span> md5(password);</span><br><span class="line"><span class="comment">//        System.out.println(&quot;MD5 = &quot;+hashPassword);</span></span><br><span class="line">        users.setPassword(hashPassword);</span><br><span class="line"></span><br><span class="line">        <span class="type">UsersBiz</span> <span class="variable">usersBiz</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UsersBiz</span>();</span><br><span class="line">        <span class="keyword">if</span> (usersBiz.login(users.getUsername())!=<span class="literal">null</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;MysqlPasswordMd5 = &quot;</span>+usersBiz.login(users.getUsername()).getPassword());</span><br><span class="line">            <span class="keyword">if</span> (Objects.equals(usersBiz.login(users.getUsername()).getPassword(), hashPassword))&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;ç™»å…¥æˆåŠŸ,è·³è½¬é¡µé¢è‡³ index.jsp&quot;</span>);</span><br><span class="line">                request.getRequestDispatcher(<span class="string">&quot;index.jsp&quot;</span>).forward(request,response);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ç™»å…¥å¤±è´¥ï¼Œè¿”å›login.jsp&quot;</span>);</span><br><span class="line">            request.setAttribute(<span class="string">&quot;message&quot;</span>,<span class="string">&quot;ç™»å…¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡®!&quot;</span>);</span><br><span class="line">            request.getRequestDispatcher(<span class="string">&quot;login.jsp&quot;</span>).forward(request,response);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">md5</span><span class="params">(String str)</span>&#123;</span><br><span class="line">        <span class="type">MessageDigest</span> <span class="variable">messageDigest</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            messageDigest = MessageDigest.getInstance(<span class="string">&quot;MD5&quot;</span>); <span class="comment">//ç”Ÿæˆmd5è®¡ç®—æ‘˜è¦</span></span><br><span class="line">            messageDigest.update(str.getBytes()); <span class="comment">//è®¡ç®—md5</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BigInteger</span>(<span class="number">1</span>,messageDigest.digest()).toString(<span class="number">16</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchAlgorithmException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="0x02-ç™»å…¥æ¨¡å—æ“ä½œæˆªå›¾"><a href="#0x02-ç™»å…¥æ¨¡å—æ“ä½œæˆªå›¾" class="headerlink" title="0x02 ç™»å…¥æ¨¡å—æ“ä½œæˆªå›¾"></a>0x02 ç™»å…¥æ¨¡å—æ“ä½œæˆªå›¾</h3><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220512163230794.png" alt="image-20220512163230794"></p><blockquote><p>ç™»å…¥æˆåŠŸï¼Œè·³è½¬åˆ°<code>index.jsp</code>ä¸»ç•Œé¢</p></blockquote><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220512163310688.png" alt="image-20220512163310688"></p><blockquote><p>ç™»å…¥å¤±è´¥ï¼Œæç¤ºé”™è¯¯ä¿¡æ¯</p></blockquote><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220512163408848.png" alt="image-20220512163408848"></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Servlet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç³»ç»Ÿé‡è£…ä¿å§†çº§æ•™ç¨‹</title>
      <link href="/2022/04/18/5ede1c3809e8-q1jun/"/>
      <url>/2022/04/18/5ede1c3809e8-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="ç³»ç»Ÿé‡è£…ä¿å§†çº§æ•™ç¨‹"><a href="#ç³»ç»Ÿé‡è£…ä¿å§†çº§æ•™ç¨‹" class="headerlink" title="ç³»ç»Ÿé‡è£…ä¿å§†çº§æ•™ç¨‹"></a>ç³»ç»Ÿé‡è£…ä¿å§†çº§æ•™ç¨‹</h1><blockquote><p>å†™ç»™è¿˜ä¸ä¼šè£…æœºçš„äººï¼š å¯¹äºæ²¡æœ‰æ¥è§¦è¿‡ç³»ç»Ÿé‡è£…çš„äººæ¥è¯´ï¼Œè£…ç³»ç»Ÿæ˜¯ä¸€ä¸ªå¾ˆé«˜ç«¯å¾ˆéš¾çš„äº‹æƒ…ã€‚äº‹å®ä¸Šï¼Œè£…æœºçœŸçš„ç®€å•åˆ°ä¸å¾—äº†ï¼Œæˆ‘ä»¬åªæ˜¯æŠŠå‰äººçš„åŠ³åŠ¨æˆæœç…§æ¬è€Œå·²ï¼Œ<strong>æ‰€æœ‰è£…æœºç”¨åˆ°çš„ä¸œè¥¿ï¼Œéƒ½ä¸æ˜¯æˆ‘ä»¬è‡ªå·±åˆ›ä½œçš„ï¼Œæˆ‘ä»¬åªæ˜¯å­¦ä¼šå¦‚ä½•ç”¨è€Œå·²</strong>ã€‚</p><p>å› ä¸ºç¡¬ç›˜åˆ†åŒºè¡¨æ ¼å¼çš„ä¸åŒï¼Œä»¥åŠå…¶ä»–å„ç§åŸå› ï¼Œ<strong>å¦‚æœä¸å»è®¾ç½®ï¼ŒWin7åªèƒ½é‡è£…Win7ï¼ŒWin10åªèƒ½é‡è£…Win10</strong>ã€‚é‰´äºè¿™æ˜¯ä¸€ç¯‡å‚»ç“œå¼æ•™ç¨‹ï¼Œæ€ä¹ˆä¿®æ”¹BIOSä»¥åŠç¡¬ç›˜åˆ†åŒºè¡¨æ ¼å¼ç­‰ç­‰è¿™æ¬¡æš‚æ—¶ä¸æ•™ï¼Œå…ˆå­¦ä¼šé‡è£…ã€‚<strong>å¦‚æœä½ çœŸçš„å¾ˆéœ€è¦ï¼Œç™¾åº¦æœ‰å…¨é¢çš„æ•™ç¨‹ï¼Œç…§åšä¸€èˆ¬æ²¡å•¥é—®é¢˜</strong>ã€‚</p><p>å¦‚æœä½ åªæ˜¯æƒ³é‡ç½®ç³»ç»Ÿï¼Œè¯·ç»§ç»­å¾€ä¸‹ç¿»ã€‚</p><p>å¦‚æœä½ æƒ³ä¿ç•™ä¸ªäººæ•°æ®è€Œä¸æ˜¯é‡è£…ä¸€ä¸ªç³»ç»Ÿï¼Œæˆ–è€…ç”µè„‘å‡ºäº†é—®é¢˜ä»¥ä¸‹æ–¹æ³•ä¸é€‚ç”¨ï¼Œè¯·å¾€ä¸‹ç¿»å‚ç…§ï¼š<strong>ã€æ•™ç¨‹äº”ã€‘Win10ä¸‡èƒ½æ¢å¤</strong> åŸºæœ¬ä¸Šå¯ä»¥è§£å†³æ“ä½œç³»ç»Ÿç³»ç»Ÿå¸¦æ¥çš„å„ç§é—®é¢˜ä»¥åŠç»å¤§éƒ¨åˆ†__è“å±__ã€‚</p></blockquote><h2 id="ã€æ•™ç¨‹ä¸€ã€‘Windowsç³»ç»Ÿé‡è£…"><a href="#ã€æ•™ç¨‹ä¸€ã€‘Windowsç³»ç»Ÿé‡è£…" class="headerlink" title="ã€æ•™ç¨‹ä¸€ã€‘Windowsç³»ç»Ÿé‡è£…"></a>ã€æ•™ç¨‹ä¸€ã€‘Windowsç³»ç»Ÿé‡è£…</h2><h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><h4 id="ä¸€èˆ¬æ¥è¯´ï¼Œæœ‰3ç§è£…æœºæ–¹å¼"><a href="#ä¸€èˆ¬æ¥è¯´ï¼Œæœ‰3ç§è£…æœºæ–¹å¼" class="headerlink" title="ä¸€èˆ¬æ¥è¯´ï¼Œæœ‰3ç§è£…æœºæ–¹å¼"></a>ä¸€èˆ¬æ¥è¯´ï¼Œæœ‰3ç§è£…æœºæ–¹å¼</h4><ol><li><p>ä½¿ç”¨PEç›˜å®‰è£…ï¼Œç”¨åˆ¶ä½œå·¥å…·å°†Uç›˜é‡Œè£…å…¥ä¸€ä¸ªPEç³»ç»Ÿï¼ˆç²¾ç®€ç‰ˆWindowsï¼‰ï¼Œç„¶åé‡å¯ç”µè„‘è¿›å…¥Uç›˜ï¼Œç”¨PEç³»ç»Ÿé‡Œè‡ªå¸¦çš„å·¥å…·ï¼Œæ¥å®Œæˆé‡è£…ã€‚</p><ul><li><p>ç›¸æ¯”èµ·å…¶ä»–æ–¹å¼ï¼ŒPE Uç›˜è£…æœºçš„å¥½å¤„æ˜¯å¯ä»¥éšæ—¶éšåœ°ç»™ä»»ä½•ç”µè„‘è£…æœºï¼Œå¯ä»¥é€šè¿‡PEç³»ç»Ÿé‡Œçš„å·¥å…·è¿›è¡Œåˆ†åŒºã€å¼•å¯¼ä¿®å¤ã€å¯†ç æ¸…é™¤ç­‰ç­‰ï¼ŒåŒæ—¶å› ä¸ºå¯ä»¥è®¿é—®ç¡¬ç›˜ï¼Œåœ¨ä½ ç³»ç»Ÿå´©æºƒçš„æ—¶å€™ï¼ŒæŠ¢æ•‘å‡ºåŸç³»ç»Ÿé‡Œçš„æ–‡ä»¶ã€‚</p></li><li><p>å¸¸ç”¨çš„PEåˆ¶ä½œå·¥å…·æœ‰ï¼š</p><ul><li>æ— å¹¿å‘Šæ— æ†ç»‘çš„ï¼šå¾®PEï¼Œä¼˜å¯é€šï¼›</li><li>æœ‰å¹¿å‘Šæœ‰æ†ç»‘ä½†å¯ä»¥å…³é—­çš„ï¼šç”µè„‘åº—ï¼›</li><li>æœ‰å¹¿å‘Šæœ‰æ†ç»‘çš„ï¼šå¤§ç™½èœè€æ¯›æ¡ƒç­‰ç­‰</li></ul></li><li><p>PEç›˜çš„åˆ¶ä½œè¿‡ç¨‹ä¸­ä¼šæ ¼å¼åŒ–Uç›˜ï¼Œæ‰€ä»¥å»ºè®®é€‰ä¸€ä¸ªç©ºç™½Uç›˜ï¼Œæˆ–è€…å…ˆå°†Uç›˜æ–‡ä»¶æ‹·å‡ºï¼Œåˆ¶ä½œå®Œæˆä¹‹åå†æ‹·å…¥ã€‚<strong>åˆ¶ä½œå®Œæˆçš„PEç›˜å®Œå…¨å¯ä»¥å½“æ™®é€šUç›˜æ¥ä½¿ç”¨ã€‚</strong></p></li><li><p><strong>æ¨èç›´æ¥ä½¿ç”¨å¾®PEï¼Œå…¬è®¤çš„æœ€å¥½ç”¨çš„PEç³»ç»Ÿ</strong></p></li></ul></li><li><p>ç”¨UltraISOç­‰å·¥å…·ï¼Œå°†Windowsé•œåƒæ–‡ä»¶(ISOæ ¼å¼)åˆ»å½•åˆ°Uç›˜ï¼›æˆ–è€…ä½¿ç”¨å¾®è½¯å®˜ç½‘æä¾›çš„å·¥å…·åˆ»å½•Uç›˜ã€‚ä¹‹åä¾ç„¶æ˜¯é‡å¯ç”µè„‘è¿›å…¥Uç›˜ï¼Œè¿™ç§æ–¹æ³•åŸæ±åŸå‘³ï¼Œå®‰è£…è¿‡ç¨‹å’Œä¹°åˆ°çš„æ­£ç‰ˆWindowså…‰ç›˜çš„å®‰è£…æ–¹æ³•å®Œå…¨ä¸€æ ·ï¼Œç¼ºç‚¹æ˜¯æ²¡æœ‰å„ç§PEå·¥å…·ï¼Œä¹Ÿ<strong>ä¸èƒ½æ‹¯æ•‘ç”µè„‘é‡Œçš„æ–‡ä»¶</strong>ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331170928.png"></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331170934.png"></p></li><li><p>é€šè¿‡ç¡¬ç›˜å®‰è£…ï¼Œå³é€šè¿‡â€œå°ç™½ä¸€é”®é‡è£…ç³»ç»Ÿâ€ç­‰ç±»ä¼¼å·¥å…·ï¼Œåªéœ€è¦ç”µè„‘èƒ½å¼€æœºå°±å¯ä»¥å®‰è£…ç³»ç»Ÿã€‚æœ€ä¸æ¨èçš„æ–¹å¼ï¼Œå› ä¸º<strong>ä¸€æ—¦å‡ºç°é—®é¢˜ï¼Œç”µè„‘å¼€ä¸äº†æœºï¼Œä½ å°±åªèƒ½å»ç½‘å§æˆ–è€…æ‰¾åˆ«çš„ç”µè„‘ï¼Œåˆ¶ä½œUç›˜æ¥æ‹¯æ•‘ã€‚</strong></p></li></ol><h4 id="é‡è£…å®Œçš„ç³»ç»Ÿè¿˜æ˜¯æ­£ç‰ˆå—ï¼Ÿ-x2F-æˆ‘å®‰è£…çš„ç³»ç»Ÿæ˜¯æ­£ç‰ˆå—ï¼Ÿ"><a href="#é‡è£…å®Œçš„ç³»ç»Ÿè¿˜æ˜¯æ­£ç‰ˆå—ï¼Ÿ-x2F-æˆ‘å®‰è£…çš„ç³»ç»Ÿæ˜¯æ­£ç‰ˆå—ï¼Ÿ" class="headerlink" title="é‡è£…å®Œçš„ç³»ç»Ÿè¿˜æ˜¯æ­£ç‰ˆå—ï¼Ÿ&#x2F;æˆ‘å®‰è£…çš„ç³»ç»Ÿæ˜¯æ­£ç‰ˆå—ï¼Ÿ"></a>é‡è£…å®Œçš„ç³»ç»Ÿè¿˜æ˜¯æ­£ç‰ˆå—ï¼Ÿ&#x2F;æˆ‘å®‰è£…çš„ç³»ç»Ÿæ˜¯æ­£ç‰ˆå—ï¼Ÿ</h4><ol><li><p>é¦–å…ˆè¦æ˜ç¡®ä»€ä¹ˆæ˜¯æ­£ç‰ˆï¼šè®©å¼€å‘è€…è·å¾—ä»–è®¤åŒçš„ã€åˆæ³•çš„æ”¶ç›Šï¼Œä½ è·å¾—çš„è½¯ä»¶æœåŠ¡æ‰æ˜¯æ­£ç‰ˆã€‚</p></li><li><p>æ˜ç¡®äº†ä»€ä¹ˆæ˜¯æ­£ç‰ˆï¼Œé‚£å°±æ¸…æ¥šäº†ï¼šé™¤äº†è‡ªå·±å’Œå…¬å¸è´­ä¹°çš„ç³»ç»Ÿï¼Œæˆ–è€…ä¹°å›çš„ç”µè„‘è‡ªå¸¦çš„ç³»ç»Ÿæ˜¯æ­£ç‰ˆï¼Œå…¶ä»–çš„éƒ½æ˜¯ç›—ç‰ˆç³»ç»Ÿï¼ŒåŒ…æ‹¬æŸå®æŸå¤šå¤šä¹°çš„ï¼Œä¹Ÿæ˜¯ç›—ç‰ˆç³»ç»Ÿã€‚</p></li><li><p>å¸¸è§çš„æ¿€æ´»æ–¹æ³•</p><ul><li>å¦‚æœä½ çš„ç”µè„‘è‡ªå¸¦<strong>å®¶åº­ç‰ˆ</strong>Win10ï¼Œé‚£ä¹ˆä½ é‡è£…äº†<strong>å®¶åº­ç‰ˆ</strong>ä¹‹ååªè¦è”ç½‘ï¼Œå°±å¯ä»¥è‡ªåŠ¨æ¿€æ´»ï¼Œ<strong>ä¸“ä¸šç‰ˆå’Œå…¶ä»–ç‰ˆæœ¬åŒç†ï¼Œåªè¦å®‰è£…åŒä¸€ç‰ˆæœ¬å°±èƒ½è‡ªåŠ¨æ¿€æ´»</strong>ï¼›</li><li>é€šè¿‡<strong>Win10æ•°å­—æƒåˆ©æ¿€æ´»å·¥å…·</strong>æ¿€æ´»çš„ç³»ç»Ÿï¼Œå¯ä»¥è·å¾—å’Œæ­£ç‰ˆä¸€æ¨¡ä¸€æ ·çš„æœåŠ¡ï¼Œæ¯”å¦‚é‡è£…ä¹‹åè”ç½‘è‡ªåŠ¨æ¿€æ´»ã€æ›´æ–°ç³»ç»Ÿç­‰ç­‰ï¼Œä¸é€‚ç”¨äºWin7ï¼›</li><li>é€šè¿‡<strong>KMSæ¿€æ´»å·¥å…·</strong>æ¿€æ´»çš„ç³»ç»Ÿï¼Œä¸å¯ä»¥é‡è£…æ¿€æ´»ï¼Œä¸”æ¿€æ´»æ—¶é—´ä¸€èˆ¬ä¸º180å¤©ï¼Œå¤§éƒ¨åˆ†å·¥å…·ä¼šåœ¨180åç»­æ¿€æ´»ï¼Œå¦‚æœä½ çš„ç”µè„‘åœ¨180å¤©ä»¥å†…æ²¡æœ‰è”ç½‘ï¼ŒKMSæ— æ³•ç»­æ¿€æ´»æˆåŠŸï¼Œé‚£ä¹ˆä½ çš„ç³»ç»Ÿå°±å´©äº†ã€‚Win7åªèƒ½ç”¨KMSæ¿€æ´»ï¼›</li><li>é€šè¿‡æŸå®&#x2F;æŸå¤šå¤šè´­ä¹°çš„å¯†é’¥æ¿€æ´»çš„ç³»ç»Ÿï¼Œä¾¿å®œçš„ä¸å¯ä»¥é‡è£…ï¼Œè´µä¸€äº›çš„å¯ä»¥é‡è£…ï¼Œä¸€å®šè¦é—®æ¸…æ¥šå–å®¶ã€‚ï¼ˆå‹æƒ…æç¤ºï¼šç¿»çœ‹å®è´çš„è¯„è®ºåŒºï¼ŒæŸ¥çœ‹è¯„è®ºåŒºçš„å›¾ç‰‡ï¼Œå¤§æ¦‚ç‡å¯ä»¥ç™½å«–åˆ°æ¿€æ´»å¯†é’¥ï¼‰</li></ul><p><strong>è°¨ä¸€æ¨èçš„å³ä¸ºæ•°å­—æƒåˆ©æ¿€æ´»æ–¹å¼ï¼Œè™½ç„¶æ˜¯ç›—ç‰ˆï¼Œä½†æ˜¯å’Œæ­£ç‰ˆå®Œå…¨ä¸€æ ·ï¼Œå¤§å®¶å¯ä»¥æ”¾å¿ƒä½¿ç”¨ã€‚</strong></p></li></ol><hr><h3 id="ä¸€ã€ä¸‹è½½è£…æœºæ‰€éœ€æ–‡ä»¶"><a href="#ä¸€ã€ä¸‹è½½è£…æœºæ‰€éœ€æ–‡ä»¶" class="headerlink" title="ä¸€ã€ä¸‹è½½è£…æœºæ‰€éœ€æ–‡ä»¶"></a>ä¸€ã€ä¸‹è½½è£…æœºæ‰€éœ€æ–‡ä»¶</h3><h4 id="1-Windowsç³»ç»Ÿ"><a href="#1-Windowsç³»ç»Ÿ" class="headerlink" title="1. Windowsç³»ç»Ÿ"></a>1. Windowsç³»ç»Ÿ</h4><p>åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://msdn.itellyou.cn/">msdn.itellyou.cn</a><br>è¿›å»ä¹‹åä»å·¦è¾¹çš„åˆ—è¡¨é‡Œé€‰æ‹©**â€æ“ä½œç³»ç»Ÿâ€**ï¼Œç„¶åæ‰¾åˆ°æœ€æ–°ç‰ˆä¸‹è½½å³å¯<br>æ¯”å¦‚æˆ‘ç°åœ¨Win10çš„é€‰æ‹©ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331170940.jpg"></p><ul><li><p>consumer editionsä¸ºæ¶ˆè´¹è€…ç‰ˆé•œåƒï¼ŒåŒ…å«å®¶åº­ç‰ˆå’Œä¸“ä¸šç‰ˆç­‰å¤šä¸ªç‰ˆæœ¬ï¼›business editionsä¸ºå•†ä¸šç‰ˆé•œåƒï¼Œä¸åŒ…å«å®¶åº­ç‰ˆï¼ŒåŒ…å«ä¼ä¸šç‰ˆå’Œä¸“ä¸šç‰ˆç­‰å¤šä¸ªç‰ˆæœ¬ï¼›è¿™ä¸¤ä¸ªç‰ˆæœ¬å…¶å®éƒ½å¯ä»¥ï¼Œä¸€èˆ¬å¤§å®¶ä¼šä¸‹è½½æ¶ˆè´¹è€…ç‰ˆã€‚</p></li><li><p>é•œåƒæ–‡ä»¶åé‡Œçš„ï¼ˆx64ï¼‰è¡¨ç¤ºé€‚ç”¨äº64ä½ç”µè„‘ï¼Œå»ºè®®4Gå†…å­˜ä»¥ä¸Šï¼Œé…ç½®è¾ƒå¥½çš„ç”µè„‘ä½¿ç”¨ï¼Œï¼ˆx84ï¼‰é€‚ç”¨äº32ä½ç”µè„‘ï¼Œ4Gå†…å­˜ä»¥ä¸‹ï¼Œé…ç½®è¾ƒå·®ã€è€ç”µè„‘ã€‚</p></li><li><p>ed2k:&#x2F;&#x2F;å¼€å¤´çš„å³ä¸ºç”µé©´ä¸‹è½½é“¾æ¥ï¼Œå¯ä»¥ä½¿ç”¨è¿…é›·ä¸‹è½½ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç™¾åº¦ç½‘ç›˜ç¦»çº¿ä¸‹è½½åŠŸèƒ½ç¦»çº¿åˆ°ç½‘ç›˜é‡Œï¼Œå†ç”¨ç½‘ç›˜ä¸‹è½½</p></li></ul><p>  Win7çš„é€‰æ‹©ï¼šä¸€èˆ¬å¤§å®¶ä½¿ç”¨çš„Win7éƒ½æ˜¯å¸¦SP1è¡¥ä¸çš„æ——èˆ°ç‰ˆï¼Œå¦‚å›¾ä¸­æ‰€ç¤ºï¼š<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331170946.jpg"></p><p>   Xpçš„é€‰æ‹©ï¼šå› ä¸ºåŸç‰ˆXpè£…æœºè¿‡äºç¹çï¼Œä¸€èˆ¬éƒ½ä½¿ç”¨Ghostç³»ç»Ÿï¼Œé©±åŠ¨å’Œæ¿€æ´»éƒ½èƒ½å¾ˆå¥½çš„è§£å†³ã€‚ä½¿ç”¨æ·±åº¦æŠ€æœ¯ã€ç•ªèŒ„èŠ±å›­ã€é›¨æ—æœ¨é£ç­‰ç­‰çš„<strong>çº¯å‡€ç‰ˆ</strong>Ghost Xpå‡å¯ã€‚</p><blockquote><p>æ³¨æ„ï¼š<br>MSDN2020å¹´å¯èƒ½ä¼šå¯ç”¨æ–°ç«™**<a target="_blank" rel="noopener" href="https://next.itellyou.cn/">next.itellyou.cn</a>**ï¼Œæ–°ç«™çš„ç•Œé¢æ›´å¥½çœ‹ï¼Œä½†ä½¿ç”¨æ–¹æ³•åº”è¯¥æ˜¯ç±»ä¼¼çš„ï¼Œå¤§å®¶çµæ´»è¿ç”¨å³å¯</p><p><strong>éå¸¸ä¸æ¨èå¤§å®¶ä½¿ç”¨Ghostç³»ç»Ÿ</strong>ï¼Œå³ç½‘ä¸Šéšå¤„å¯è§çš„çº¯å‡€ç‰ˆã€è£…æœºç‰ˆã€å¿«é€Ÿå®‰è£…ç‰ˆç­‰ç­‰ï¼Œè‡³äºä¸ºä»€ä¹ˆå¤§å®¶å¯ä»¥è‡ªè¡Œç™¾åº¦â€œGhostç³»ç»Ÿçš„åå¤„â€ï¼Œ<strong>è®°ä½ä¸€ç‚¹ï¼šç”¨åŸç‰ˆç³»ç»Ÿå°±æ˜¯æœ€å®‰å…¨çš„ï¼Œæœ€å¥½ç”¨çš„ï¼</strong></p></blockquote><h4 id="2-ä¸‹è½½å¾®PEåˆ»å½•å·¥å…·"><a href="#2-ä¸‹è½½å¾®PEåˆ»å½•å·¥å…·" class="headerlink" title="2. ä¸‹è½½å¾®PEåˆ»å½•å·¥å…·"></a>2. ä¸‹è½½å¾®PEåˆ»å½•å·¥å…·</h4><p>å¾®PEï¼š<a target="_blank" rel="noopener" href="http://www.wepe.com.cn/download.html">www.wepe.com.cn</a></p><p>åœ¨2017å¹´çš„2.0ç‰ˆæœ¬ä¹‹åï¼Œå¾®PEç»ˆäºæœ‰äº†2.1ç‰ˆæœ¬æ›´æ–°ï¼Œæ‰€æœ‰è€æ—§çš„å·¥å…·éƒ½æœ‰äº†æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå¾ˆå¤šä¹‹å‰æ²¡æœ‰çš„åŠŸèƒ½ä¹Ÿå¾—åˆ°äº†è¡¥å……ï¼Œå†æ¬¡åå›äº†PEç³»ç»Ÿçš„å¤´æŠŠäº¤æ¤…ï¼Œæœ€åä¸€ä¸ªä¸ç”¨å¾®PEçš„ç†ç”±ä¹Ÿæ²¡äº†ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ç°åœ¨å¾®PEçš„å®˜ç½‘éœ€è¦æ‰“èµæ‰èƒ½æ˜¾ç¤ºåœ°å€ï¼Œä»·æ ¼ä¸¤å…ƒèµ·ï¼Œ<strong>ä¸è¿‡ä½œè€…æä¾›äº†â€œå·²æèµ ï¼ŒæŸ¥çœ‹ä¸‹è½½åœ°å€â€çš„æŒ‰é’®ï¼Œæ‰€ä»¥å¤§å®¶æ‡‚å¾—ã€‚</strong>ä¸è¿‡ç»´æŠ¤ä¸€ä¸ªå…è´¹ï¼Œæ— å¹¿å‘Šçš„å·¥å…·è¿˜æ˜¯æŒºè€—å¿ƒæ€çš„ï¼Œå¤§å®¶æœ‰æ¡ä»¶çš„å°±å¯ä»¥éšä¾¿æ‰“èµä¸€ä¸‹ï¼Œé¥¿æ­»å¼€å‘è€…æœ€ç»ˆåƒäºçš„è¿˜æ˜¯æˆ‘ä»¬ç”¨æˆ·ã€‚<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200812204134.png"></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200812204128.png"></p><h4 id="3-ä¸‹è½½æ˜¾å¡é©±åŠ¨"><a href="#3-ä¸‹è½½æ˜¾å¡é©±åŠ¨" class="headerlink" title="3. ä¸‹è½½æ˜¾å¡é©±åŠ¨"></a>3. ä¸‹è½½æ˜¾å¡é©±åŠ¨</h4><p><strong>éå¸¸ä¸æ¨èé«˜æ€§èƒ½ç‹¬æ˜¾ä½¿ç”¨Win10è‡ªåŠ¨å®‰è£…çš„é©±åŠ¨ï¼Œç‰ˆæœ¬ä½ï¼Œè¿˜ä¼šæœ‰å„ç§å¥‡æ€ªçš„é—®é¢˜ï¼Œé™¤æ˜¾å¡å¤–å…¶ä»–é©±åŠ¨å¯ä»¥ä¸ç”¨åœ¨æ„</strong></p><p><strong>Nvdiaè‹±ä¼Ÿè¾¾æ˜¾å¡</strong>ï¼š<a target="_blank" rel="noopener" href="https://www.nvidia.cn/Download/Find.aspx?lang=cn">www.nvidia.cn/Download/Find.aspx?lang=cn</a></p><ul><li><p><strong>ç›®å‰Nvdiaå®˜ç½‘å’ŒWin10æä¾›çš„é©±åŠ¨éƒ½æ˜¯DCHé©±åŠ¨</strong>ï¼Œå³ä¸å¸¦Nvdiaæ§åˆ¶é¢æ¿ï¼Œéœ€è¦è‡ªè¡Œåˆ°Win10åº”ç”¨å•†åº—ä¸‹è½½ï¼Œ<strong>ä¸å»ä¸‹è½½å®‰è£…å°±ä¼šä¸€ç›´å¼¹çª—</strong>ï¼ŒåŒæ—¶ä¹Ÿæ„å‘³ç€Win7ä¸èƒ½å®‰è£…è¯¥é©±åŠ¨ã€‚ç›®æµ‹è¿™ä¹ˆå¹²æ˜¯ä¸ºäº†åŠé€€Win7ç”¨æˆ·ï¼Œå¢åŠ Win10åº”ç”¨å•†åº—æ´»è·ƒåº¦ã€‚<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331171302.png"></p></li><li><p>æ ‡å‡†ç‰ˆé©±åŠ¨ï¼ˆå¸¦Nvdiaæ§åˆ¶é¢æ¿ï¼‰çš„ä¸‹è½½å…¥å£ç›®å‰åªæœ‰è¿™ä¸ªï¼Œè¯·å¤§å®¶æ”¶è—ä¸Šé¢çš„ç½‘å€ï¼š<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331170957.jpg"></p></li></ul><p> <strong>AMDæ˜¾å¡</strong>ï¼š<a target="_blank" rel="noopener" href="https://www.amd.com/zh-hans/support">www.amd.com/zh-hans/support</a></p><h4 id="4-ä¸‹è½½é©±åŠ¨å·¥å…·"><a href="#4-ä¸‹è½½é©±åŠ¨å·¥å…·" class="headerlink" title="4. ä¸‹è½½é©±åŠ¨å·¥å…·"></a>4. ä¸‹è½½é©±åŠ¨å·¥å…·</h4><p>360é©±åŠ¨å¤§å¸ˆï¼š<a target="_blank" rel="noopener" href="http://weishi.360.cn/qudongdashi/">weishi.360.cn&#x2F;qudongdashi</a><br>æ¯”èµ·é©±åŠ¨ç²¾çµé©±åŠ¨äººç”Ÿç­‰ç­‰ï¼Œè¿™ä¸ªè‡³å°‘æ²¡å¹¿å‘Šå’Œæ†ç»‘è½¯ä»¶ï¼Œç®—æ˜¯å¯ä»¥ç”¨ä¸€ç”¨ï¼Œ<strong>ä½†åœ¨ç”¨ä¹‹å‰è¯·ä½ çœ‹å®Œ</strong>ï¼š</p><ul><li>å¦‚æœä½ æ˜¯å“ç‰Œç¬”è®°æœ¬ï¼Œä¸€èˆ¬éƒ½æœ‰å¯¹åº”çš„é©±åŠ¨å·¥å…·æˆ–è€…é©±åŠ¨ä¸‹è½½åœ°å€ï¼Œæ¯”å¦‚è”æƒ³ç”µè„‘éƒ½å¯ä»¥ç”¨è”æƒ³é©±åŠ¨ç®¡ç†è½¯ä»¶ï¼Œæˆ´å°”ç”µè„‘å¯ä»¥å»æˆ´å°”å®˜ç½‘æŒ‰æœºå‹æŸ¥è¯¢é©±åŠ¨ã€‚<strong>æˆ‘ä»¬æ¨èä½ ä½¿ç”¨å“ç‰Œæ–¹æä¾›çš„é©±åŠ¨ï¼Œå› ä¸ºè¿™å’Œä½ çš„ç”µè„‘æœ€ä¸ºå¥‘åˆ</strong></li><li>å¦‚æœæ˜¯é‡è£…Win10ï¼ŒWin10ä¼šè‡ªåŠ¨åœ¨è”ç½‘æ—¶è‡ªåŠ¨å¸®ä½ è¡¥é½é©±åŠ¨ï¼Œåªè¦ç­‰å¾…ä¸€ä¼šå°±å¯ä»¥ã€‚</li><li>å¦‚æœæ˜¯é‡è£…Win7ï¼ŒWin7æ˜¯æ— æ³•è‡ªåŠ¨è¡¥é½é©±åŠ¨çš„ï¼Œæ‰€ä»¥ä¸€å®šè¦<strong>æå‰ä¸‹è½½ç½‘å¡ç‰ˆé©±åŠ¨å¤§å¸ˆ</strong>ã€‚<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331171002.png"></li></ul><hr><h3 id="äºŒã€åˆ¶ä½œPEç›˜"><a href="#äºŒã€åˆ¶ä½œPEç›˜" class="headerlink" title="äºŒã€åˆ¶ä½œPEç›˜"></a>äºŒã€åˆ¶ä½œPEç›˜</h3><ol><li><p>åˆ°<a target="_blank" rel="noopener" href="http://www.wepe.com.cn/download.html">å¾®PEå®˜ç½‘</a>ä¸‹è½½å¥½å¾®PEä¹‹åæ’å…¥Uç›˜ï¼Œè¿è¡Œå¾®PEï¼Œç‚¹å‡»å³ä¸‹è§’çš„å®‰è£…åˆ°Uç›˜<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331171102.png"></p></li><li><p>ä¹‹åçš„è®¾ç½®ç›´æ¥é»˜è®¤å³å¯ï¼Œå…¨èƒ½ä¸‰åˆ†åŒºæ–¹å¼åŸºæœ¬å¯ä»¥æ”¯æŒæ‰€æœ‰çš„ç”µè„‘ï¼Œ<strong>åˆ¶ä½œè¿‡ç¨‹ä¸­ä¼šæ ¼å¼åŒ–Uç›˜</strong>ï¼Œæ‰€ä»¥å»ºè®®é€‰ä¸€ä¸ªç©ºç™½Uç›˜ï¼Œæˆ–è€…å…ˆå°†Uç›˜æ–‡ä»¶æ‹·å‡ºï¼Œåˆ¶ä½œå®Œæˆä¹‹åå†æ‹·å…¥ã€‚<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331171106.png"></p></li><li><p>å¦‚æœä½ åªæ˜¯ä¸ºä¸€å°ç”µè„‘é‡è£…ç³»ç»Ÿï¼Œç³»ç»Ÿé•œåƒæ–‡ä»¶ä¸ç”¨æ”¾å…¥Uç›˜ï¼Œæ”¾åˆ°éCç›˜å³å¯ï¼Œå¦‚æœä½ æƒ³ä¸ºå…¶ä»–ç”µè„‘é‡è£…ï¼Œåœ¨åˆ¶ä½œå®ŒæˆåæŠŠé•œåƒæ–‡ä»¶æ”¾å…¥Uç›˜ï¼Œå°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä¸ºä»–äººé‡è£…ç³»ç»Ÿï¼Œ<strong>å‰ææ˜¯Uç›˜ç©ºé—´å¤Ÿå¤§</strong>ã€‚</p></li><li><p>å¦‚æœä½ ä¸éœ€è¦å¾®PE Uç›˜äº†ï¼Œå› ä¸ºæœ‰ä¸‰ä¸ªåˆ†åŒºï¼Œç›´æ¥æ ¼å¼åŒ–å¯èƒ½ä¼šæœ‰é—®é¢˜ï¼Œä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ–¹æ³•æ˜¯<strong>å…ˆç”¨å¾®PEé‡Œçš„å•åˆ†åŒºæ–¹å¼å†åˆ¶ä½œä¸€æ¬¡ï¼Œç„¶åå†æ ¼å¼åŒ–</strong>ï¼Œå°±å¯ä»¥å®Œç¾è¿˜åŸã€‚</p></li></ol><hr><h3 id="ä¸‰ã€è¿›å…¥Uç›˜-PEç³»ç»Ÿ"><a href="#ä¸‰ã€è¿›å…¥Uç›˜-PEç³»ç»Ÿ" class="headerlink" title="ä¸‰ã€è¿›å…¥Uç›˜ PEç³»ç»Ÿ"></a>ä¸‰ã€è¿›å…¥Uç›˜ PEç³»ç»Ÿ</h3><p>å¼€æœºä¹‹åï¼Œåœ¨çœ‹åˆ°ç”µè„‘å“ç‰ŒLOGOæ˜¯ç«‹å³è¿ç»­ä¸æ–­çš„æ•²å‡»F12ï¼Œè¿›å…¥F12 å¿«é€Ÿé€‰æ‹©ç•Œé¢ï¼ˆå„å‹å·ç”µè„‘è¿›å…¥æ–¹å¼ä¸åŒï¼Œè¯·è‡ªè¡Œç™¾åº¦<strong>â€œç”µè„‘å‹å·&#x2F;ä¸»æ¿å‹å·+è®¾ç½®Uç›˜ç¬¬ä¸€å¯åŠ¨ï¼‰</strong>ï¼Œé€‰æ‹©è‡ªå·±çš„Uç›˜ï¼Œä¸€èˆ¬æœ‰<strong>â€œUSBâ€å­—æ ·æˆ–è€…æ˜¯Uç›˜å“ç‰Œ</strong>ï¼š</p><p>æ¯”å¦‚æˆ‘è¿™é‡Œé€‰çš„æ˜¯æˆ‘çš„é‡‘å£«é¡¿Kingston Uç›˜ï¼š<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331171111.jpg"></p><hr><h3 id="å››ã€å¼€å§‹é‡è£…ç³»ç»Ÿ"><a href="#å››ã€å¼€å§‹é‡è£…ç³»ç»Ÿ" class="headerlink" title="å››ã€å¼€å§‹é‡è£…ç³»ç»Ÿ"></a>å››ã€å¼€å§‹é‡è£…ç³»ç»Ÿ</h3><ol><li>åœ¨PEç³»ç»Ÿé‡Œç‚¹å‡»<strong>â€œCGIå¤‡ä»½è¿˜åŸâ€</strong>ï¼Œç„¶ååœ¨ç¬¬äºŒé¡¹é‡Œé€‰æ‹©è‡ªå·±è¦è£…ç³»ç»Ÿçš„ç›˜ï¼Œè¯·æ ¹æ®å¤§å°æ¥åˆ¤æ–­å“ªä¸ªæ˜¯ä½ çš„Cç›˜ï¼Œä¸è¦æ ¹æ®ç›˜ç¬¦æ¥åˆ¤æ–­ï¼š</li></ol><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331171118.jpg"></p><ol start="2"><li>åœ¨CGIå¤‡ä»½è¿˜åŸçš„ç¬¬ä¸‰é¡¹é‡Œé€‰æ‹©è‡ªå·±ä¸‹è½½çš„ç³»ç»Ÿé•œåƒæ–‡ä»¶ï¼Œç„¶åä¼šå¼¹å‡ºç³»ç»Ÿç‰ˆæœ¬é€‰æ‹©ç•Œé¢ï¼ŒHomeå³ä¸ºå®¶åº­ç‰ˆï¼Œä¸€èˆ¬é€‰æ‹©Proä¸“ä¸šç‰ˆï¼Œå¤§å®¶æŒ‰éœ€é€‰æ‹©ï¼š</li></ol><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331171122.jpg"></p><ol start="3"><li><p>ç„¶åå°±å¯ä»¥ç‚¹å‡»æ‰§è¡Œï¼Œåœ¨è¿›åº¦æ¡ç»“æŸä¹‹åï¼Œæ‹”æ‰Uç›˜ï¼Œé‡å¯ç”µè„‘ï¼Œå°±å¯ä»¥è¿›å…¥æ–°ç³»ç»Ÿï¼Œé‡è£…å®Œæˆã€‚<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331171126.jpg"></p></li><li><p>å¦‚æœä½ è°ƒæ•´æˆ–åˆ é™¤äº†ç³»ç»Ÿç›˜çš„éšè—åˆ†åŒºï¼Œæ¯”å¦‚å¾ˆå¤šäººä¸ºäº†å¹²å‡€ï¼Œä¼šé€‰æ‹©åˆ é™¤æ‰€æœ‰åˆ†åŒºï¼Œæˆ–è€…ä½¿ç”¨äº†æ–°çš„æ²¡æœ‰å®‰è£…è¿‡ç³»ç»Ÿçš„ç¡¬ç›˜ï¼Œå¯èƒ½ä¼šé‡åˆ°é‡å¯ä¹‹åæ— æ³•è¿›å»ç³»ç»Ÿçš„æƒ…å†µï¼Œè¯·å¾€ä¸‹ç¿»å‚ç…§ï¼š<strong>ã€æ•™ç¨‹å››ã€‘æ— æ³•å¼•å¯¼ç³»ç»Ÿè§£å†³åŠæ³•</strong></p></li><li><p>Xpç³»ç»Ÿå› ä¸ºæ¨èä½¿ç”¨çº¯å‡€ç‰ˆGhostç³»ç»Ÿï¼Œåœ¨å®‰è£…ç³»ç»Ÿæ—¶è¯·é€‰æ‹©<strong>â€œGhostå¤‡ä»½è¿˜åŸâ€</strong>ï¼Œå…¶ä½™æ“ä½œä¸ä¸Šé¢çš„æ­¥éª¤æ˜¯ç±»ä¼¼çš„ã€‚</p></li></ol><hr><h3 id="äº”ã€ç³»ç»Ÿæ¿€æ´»"><a href="#äº”ã€ç³»ç»Ÿæ¿€æ´»" class="headerlink" title="äº”ã€ç³»ç»Ÿæ¿€æ´»"></a>äº”ã€ç³»ç»Ÿæ¿€æ´»</h3><ol><li><p>å¼€å¤´çš„å‰è¨€é‡Œæˆ‘ä»¬è®²æ˜ç™½äº†æ­£ç‰ˆç›—ç‰ˆçš„é—®é¢˜ï¼Œå’Œå„ç§æ¿€æ´»æ–¹å¼çš„ä¸åŒï¼Œ<strong>æ²¡ä»”ç»†çœ‹çš„åŒå­¦è¯·åˆ°å‰è¨€é‡Œä»”ç»†çœ‹ã€‚å¦‚æœä½ æ˜¯è‡ªå¸¦çš„Win10å®¶åº­ç‰ˆä¸”é‡è£…çš„ä¹Ÿæ˜¯å®¶åº­ç‰ˆï¼Œè”ç½‘ç­‰ä¸€ä¼šå°±å¯ä»¥è‡ªåŠ¨æ¿€æ´»ã€‚</strong></p></li><li><p>Win10æ•°å­—æƒåˆ©æ¿€æ´»å·¥å…·å’ŒKMSå·¥å…·ï¼ˆæ”¯æŒWin7ï¼‰æˆ‘å·²ç»ä¸Šä¼ åˆ°äº†ç½‘ç›˜é‡Œï¼Œå¤§å®¶è‡ªå·±ä¸‹è½½ä½¿ç”¨å³å¯ã€‚<strong>ä½†æ˜¯åœ¨ä½¿ç”¨å‰è¯·å…ˆçœ‹ã€æ•™ç¨‹äºŒã€‘ç¬¬ä¸€æ­¥â€œæš‚æ—¶å…³é—­Defenderâ€ï¼Œå¦åˆ™ä½ çš„å·¥å…·ä¼šåœ¨è§£å‹åæ¶ˆå¤±ä¸è§ï¼Œåªç•™ä¸‹ä¸€ä¸ªç©ºæ–‡ä»¶å¤¹</strong></p><p>åº¦ç›˜ï¼š<br>é“¾æ¥: <a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1QmPmeEJeyW--bvGJngA3pQ">pan.baidu.com&#x2F;s&#x2F;1QmPmeEJeyWâ€“bvGJngA3pQ</a><br>å¯†ç : f898</p><p>è“å¥äº‘ï¼š<br>é“¾æ¥: <a target="_blank" rel="noopener" href="https://www.lanzoux.com/b034r543c">www.lanzoux.com/b034r543c</a><br>å¯†ç : 6o1w</p></li><li><p>Win10æ¿€æ´»çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™å·¥å…·ä¼šæç¤ºâ€œ<strong>Windowså¤„äºé€šçŸ¥æ¨¡å¼</strong>â€ï¼Œå…·ä½“åŸå› è°¨ä¸€ä¹Ÿæ²¡ç»†ç ”ç©¶è¿‡ï¼Œä¸è¿‡ç™¾åº¦å¯ä»¥æ‰¾åˆ°è§£å†³åŠæ³•ï¼Œå«Œéº»çƒ¦çš„åŒå­¦å¯ä»¥åˆ°æŸå®&#x2F;æŸå¤šå¤šç›´æ¥è´­ä¹°æ¿€æ´»å¯†é’¥ï¼Œå¤šçœ‹è¯„è®ºåŒºçš„å›¾ç‰‡è¿˜æœ‰æœºä¼šç™½å«–ã€‚</p></li><li><p>æ£€éªŒæ¿€æ´»çŠ¶æ€<br>æ­¤æ–¹æ³•é€‚ç”¨äºWin10å’ŒWin7</p><ul><li><p>æŒ‰ä¸‹Winé”®+Rï¼Œæ‰“å¼€è¿è¡Œï¼ˆæ‰“å¼€è¿è¡Œçš„æ–¹æ³•å¾ˆå¤šéšä¾¿ä½ ç”¨å“ªä¸ªï¼‰</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331180206.png"></p></li><li><p>è¾“å…¥å¼•å·é‡Œçš„ä»£ç ï¼Œæ³¨æ„vbså’Œ-ä¹‹é—´æœ‰ä¸€ä¸ªç©ºæ ¼ï¼š<strong>â€œslmgr.vbs -xprâ€</strong></p></li><li><p>Win10ä½¿ç”¨äº†æ•°å­—æƒåˆ©å·¥å…·ã€ä½¿ç”¨äº†è´­ä¹°çš„å¯†é’¥ã€Win7ä½¿ç”¨äº†è´­ä¹°çš„å¯†é’¥ï¼Œä¼šæç¤º<strong>â€œè®¡ç®—æœºå·²æ°¸ä¹…æ¿€æ´»â€œ</strong><br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331180213.png"></p></li><li><p>Win10æˆ–Win7ä½¿ç”¨äº†KMSæ¿€æ´»å·¥å…·ï¼Œä¼šæç¤ºâ€œæ‰¹é‡æ¿€æ´»å°†äºXXXè¿‡æœŸâ€ï¼Œä¸è¿‡ä¼šæœ‰è‡ªåŠ¨ç»­æ¿€æ´»ï¼Œä¹Ÿå°±æ˜¯åªè¦ä¸€ç›´è”ç½‘å°±å¯ä»¥ä¸€ç›´æ¿€æ´»çŠ¶æ€ã€‚<strong>åœ¨ç”¨ç¬¬ä¸‰æ–¹å·¥å…·å…³é—­å¯åŠ¨é¡¹çš„æ—¶å€™æ³¨æ„ä¸è¦å…³é—­å’ŒKMSæœ‰å…³çš„è®¡åˆ’ä»»åŠ¡ã€‚</strong></p></li></ul></li></ol><hr><h3 id="å…­ã€é©±åŠ¨å®‰è£…"><a href="#å…­ã€é©±åŠ¨å®‰è£…" class="headerlink" title="å…­ã€é©±åŠ¨å®‰è£…"></a>å…­ã€é©±åŠ¨å®‰è£…</h3><h4 id="1-Win10"><a href="#1-Win10" class="headerlink" title="1. Win10"></a>1. Win10</h4><ul><li><p>è¿›å…¥ç³»ç»Ÿä¹‹åä¸€èˆ¬åªå®‰è£…æ˜¾å¡é©±åŠ¨å°±å¥½äº†ï¼Œå…¶ä»–é©±åŠ¨å¯ä»¥ç­‰è”ç½‘çŠ¶æ€è‡ªå·±å®‰è£…ï¼Œä¹Ÿå¯ä»¥ç”¨å“ç‰Œæ–¹çš„å·¥å…·å®‰è£…ï¼Œä¸å»ºè®®ä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…·å®‰è£…ã€‚</p></li><li><p><strong>Nå¡ç”¨æˆ·è¯·çœ‹</strong>ï¼šå¦‚æœå› ä¸ºç½‘é€Ÿè¿‡å¿«ï¼ŒWin10å·²ç»å®‰è£…å®Œäº†ç‹¬æ˜¾DCHé©±åŠ¨ï¼Œè¿™æ—¶å€™ä½ æ¯æ¬¡å¼€æœºéƒ½ä¼šåœ¨å³ä¸‹è§’å¼¹çª—â€œ<strong>NVDIA Control Panel is not found</strong>â€</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331171302.png"></p><p> <strong>è§£å†³åŠæ³•æœ‰ä¸‰ï¼š</strong></p><ul><li>æ‰“å¼€Win10åº”ç”¨å•†åº—ï¼Œç™»é™†å¾®è½¯è´¦æˆ·ï¼Œæœç´¢â€œ<strong>NVDIA Control Panel</strong>â€å®‰è£…å³å¯è§£å†³ã€‚</li><li>å…ˆæ–­å¼€ç½‘ç»œï¼Œåœ¨æ§åˆ¶é¢æ¿-å¸è½½ç¨‹åº æˆ–è€… è®¾ç½®-åº”ç”¨ é‡Œï¼Œé€‰ä¸­NVDIAç›¸å…³çš„è½¯ä»¶å…¨éƒ¨å¸è½½ã€‚é‡å¯ä¹‹åå®‰è£…<strong>ç¬¬ä¸‰æ­¥ç¬¬3æ¡</strong>é‡Œä¸‹è½½çš„æ ‡å‡†ç‰ˆæ˜¾å¡é©±åŠ¨ï¼Œå°±è§£å†³äº†ï¼Œä¹‹åå¯ä»¥è”ç½‘ã€‚</li><li>åœ¨ç³»ç»Ÿè£…å®Œï¼Œ<strong>å¼€å§‹é…ç½®ç³»ç»Ÿè¿˜æœªè¿›å…¥æ¡Œé¢æ—¶</strong>ï¼Œæ‹”å‡ºç½‘çº¿ä¸è¦è¿Wi-Fiï¼ŒWin10å°±ä¸ä¼šè£…é©±åŠ¨ï¼Œè£…å®Œæ ‡å‡†ç‰ˆé©±åŠ¨å†è”ç½‘å®‰è£…å…¶ä»–é©±åŠ¨ã€‚</li></ul></li></ul><h4 id="2-Win7"><a href="#2-Win7" class="headerlink" title="2. Win7"></a>2. Win7</h4><p>Win7ä¸ä¼šè‡ªåŠ¨å®‰è£…é©±åŠ¨ï¼Œä½†ä¹Ÿæ„å‘³ç€ä¸ä¼šè‡ªåŠ¨å®‰è£…ç½‘å¡é©±åŠ¨ï¼Œå°±æ˜¯ä¸èƒ½ä¸Šç½‘ï¼Œæ‰€ä»¥ä¸€å®šè¦æå‰å°†<strong>ç¬¬ä¸‰æ­¥ç¬¬3æ¡</strong>é‡Œä¸‹è½½çš„æ˜¾å¡é©±åŠ¨å’Œä¸‡èƒ½ç½‘å¡ç‰ˆé©±åŠ¨å¤§å¸ˆæ”¾åˆ°Uç›˜é‡Œã€‚</p><h2 id="ã€æ•™ç¨‹äºŒã€‘ç³»ç»Ÿåˆæ­¥ä¼˜åŒ–"><a href="#ã€æ•™ç¨‹äºŒã€‘ç³»ç»Ÿåˆæ­¥ä¼˜åŒ–" class="headerlink" title="ã€æ•™ç¨‹äºŒã€‘ç³»ç»Ÿåˆæ­¥ä¼˜åŒ–"></a>ã€æ•™ç¨‹äºŒã€‘ç³»ç»Ÿåˆæ­¥ä¼˜åŒ–</h2><p><strong>å¾ˆå¤šäººå–œæ¬¢Ghostç³»ç»Ÿçš„åŸå› ä¹‹ä¸€æ˜¯Ghostç³»ç»Ÿåšäº†æ‰€è°“çš„ä¼˜åŒ–ï¼Œä½†äº‹å®ä¸Šå¹¶ä¸ä¸€å®šï¼ŒGhostä½œè€…å¹¶ä¸çŸ¥é“ä½ çš„å…·ä½“é…ç½®ï¼Œä»–ç”šè‡³æ— æ³•çŸ¥é“ä½ ç”¨çš„æ˜¯Nå¡è¿˜æ˜¯Aå¡ï¼Œåˆä½•æ¥ä¼˜åŒ–ä¸€è¯´ã€‚</strong></p><p>ç³»ç»Ÿä¼˜åŒ–è¿™ä»¶äº‹å…¶å®æ ¸å¿ƒå°±ä¸€ä¸ªï¼šç¬¦åˆè‡ªå·±çš„éœ€æ±‚ï¼Œå› æ­¤ä¸‹é¢çš„æ•™ç¨‹åŸºæœ¬éƒ½æ˜¯å¿…åšé¡¹ï¼Œä¸å®Œæ•´ä½†æ˜¯æŒºæœ‰ç”¨ã€‚<strong>å¦‚æœä½ æ˜¯å¤§ä½¬ï¼Œè¯·ç›´æ¥å¿½ç•¥æœ¬æ•™ç¨‹äºŒï¼Œå¦‚æœä½ å¯¹ç”µè„‘ä¸ç†Ÿæ‚‰ï¼Œå¯ä»¥è·Ÿç€åšä¸€åšã€‚</strong></p><h3 id="ä¸€ã€æš‚æ—¶å…³é—­Defender"><a href="#ä¸€ã€æš‚æ—¶å…³é—­Defender" class="headerlink" title="ä¸€ã€æš‚æ—¶å…³é—­Defender"></a>ä¸€ã€æš‚æ—¶å…³é—­Defender</h3><p>Windows Defenderæ˜¯Win10è‡ªå¸¦çš„æ€æ¯’è½¯ä»¶ï¼Œ<strong>æ¯”èµ·å„ç§å…è´¹çš„æ€æ¯’è½¯ä»¶ï¼Œåœ¨ä¿æŠ¤ç”µè„‘å®‰å…¨ä¸Šå®ƒé è°±çš„å¤š</strong>ï¼Œæ¯•ç«Ÿæ˜¯å¾®è½¯è‡ªå®¶çš„ç³»ç»Ÿï¼Œè‡ªå®¶çš„æ€æ¯’è½¯ä»¶ã€‚è¿™ä¸€ç‚¹å¤§å®¶å¯ä»¥è‡ªè¡Œç™¾åº¦ã€‚æˆ‘ä»¬å…³é—­DFçš„åŸå› å¾ˆç®€å•ï¼š<strong>å®ƒä¼šåˆ é™¤æˆ‘ä»¬çš„ç³»ç»Ÿæ¿€æ´»å·¥å…·ï¼Œè½¯ä»¶ç ´è§£å·¥å…·ç­‰ç­‰</strong>ï¼Œå¯¹äºä¸€ä¸ªå¤©æœäººæ¥è¯´å®ƒå¹¶ä¸æ˜¯é‚£ä¹ˆçš„å‹å¥½ã€‚</p><ul><li>å¦‚æœä½ ä¸éœ€è¦ç”¨åˆ°å„ç§ç ´è§£è½¯ä»¶ï¼Œå®Œå…¨å¯ä»¥å†æ¿€æ´»ç³»ç»Ÿåé‡æ–°æ‰“å¼€å®ƒï¼Œä¸éœ€è¦å†å®‰è£…å…¶ä»–å…è´¹çš„æ€æ¯’è½¯ä»¶ã€‚Defenderå®Œå…¨å¤Ÿç”¨ï¼å¦‚æœä¸å¤Ÿç”¨è¯´æ˜ä½ çœ‹ç‰‡å¤ªå¤šäº†ï¼ŒèŠ‚åˆ¶ä¸€ç‚¹ã€‚</li><li>å¦‚æœä½ æ¥å—ä¸äº†è¯¯åˆ ä½ çš„æ–‡ä»¶ï¼Œæˆ–è€…ç»å¸¸æ¥è§¦å±é™©æ–‡ä»¶ã€‚å¯ä»¥å…³é—­ä¹‹åä½¿ç”¨ç«ç»’ã€å°çº¢ä¼Aviraã€Avastã€å¡å·´æ–¯åŸºå…è´¹ç‰ˆç­‰ç­‰ã€‚</li><li><strong>å¯¹ç—…æ¯’æœ€å¥½çš„é˜²èŒƒä¸æ˜¯å®‰è£…å¥½çš„æ€æ¯’è½¯ä»¶ï¼Œè€Œæ˜¯ä¸ä¸‹è½½å±é™©æ–‡ä»¶ã€‚</strong></li></ul><h4 id="å…³é—­æ–¹æ³•ï¼š"><a href="#å…³é—­æ–¹æ³•ï¼š" class="headerlink" title="å…³é—­æ–¹æ³•ï¼š"></a>å…³é—­æ–¹æ³•ï¼š</h4><ol><li><p>æ‰“å¼€è®¾ç½®-æ›´æ–°å’Œå®‰å…¨-Windowså®‰å…¨ä¸­å¿ƒ-ç—…æ¯’å’Œå¨èƒé˜²æŠ¤</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331171134.png"></p></li><li><p>ç‚¹å‡»ç—…æ¯’å’Œå¨èƒé˜²æŠ¤è®¾ç½®ä¸‹æ–¹çš„â€œç®¡ç†è®¾ç½®â€</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331171139.png"></p></li><li><p>å°†æ‰€æœ‰çš„å¼€å…³éƒ½å…³é—­ï¼ŒDefenderå°±ä¸ä¼šå†è¯¯åˆ ä½ çš„æ–‡ä»¶ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331171143.png"></p></li></ol><h3 id="äºŒã€æ‰¾å‡ºæ¡Œé¢å›¾æ ‡"><a href="#äºŒã€æ‰¾å‡ºæ¡Œé¢å›¾æ ‡" class="headerlink" title="äºŒã€æ‰¾å‡ºæ¡Œé¢å›¾æ ‡"></a>äºŒã€æ‰¾å‡ºæ¡Œé¢å›¾æ ‡</h3><p>è¿™ç®€ç›´æ˜¯æœ€ç®€å•çš„ä¸€æ­¥ï¼Œä½†å´æ˜¯å¾ˆå¤šäººéƒ½å›°æ‰°çš„ä¸€æ­¥ï¼Œå› ä¸ºé‡è£…å®Œæˆä¹‹åè‡ªå·±çš„æ¡Œé¢ä¸Šå°±ä¸€ä¸ªå›æ”¶ç«™ï¼Ÿï¼Ÿï¼Ÿ</p><ol><li><p>å³å‡»æ¡Œé¢-ä¸ªæ€§åŒ–</p></li><li><p>é€‰æ‹©ä¸»é¢˜-æ¡Œé¢å›¾æ ‡è®¾ç½®ï¼š<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331171147.png"></p></li><li><p>å‹¾é€‰ä½ éœ€è¦çš„å›¾æ ‡ï¼Œåº”ç”¨ä¹‹åæ¡Œé¢ä¸Šå°±ä¼šå‡ºç°äº†</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331171152.png"></p></li></ol><h3 id="ä¸‰ã€é‡Šæ”¾ç”µè„‘æ€§èƒ½"><a href="#ä¸‰ã€é‡Šæ”¾ç”µè„‘æ€§èƒ½" class="headerlink" title="ä¸‰ã€é‡Šæ”¾ç”µè„‘æ€§èƒ½"></a>ä¸‰ã€é‡Šæ”¾ç”µè„‘æ€§èƒ½</h3><p>è¯·åŠ¡å¿…åœ¨è·‘åˆ†ä¹‹ååˆ é™¤é²å¤§å¸ˆä¹‹ç±»çš„è½¯ä»¶ï¼Œä½ èŠ±äº†é’±ä¹°å›æ¥çš„ç”µè„‘ä¸æ˜¯è¦èŠ‚èƒ½æ¨¡å¼çœç”µçš„ï¼Œ<strong>è€Œæ˜¯è¦åœ¨ä¸æŸä¼¤ç¡¬ä»¶çš„å‰æä¸‹äº«å—å®ƒçš„æ€§èƒ½çš„</strong>ã€‚</p><p>å¦‚æœä½ å®åœ¨æƒ³ç”¨é²å¤§å¸ˆæ£€æµ‹è¿è¡Œæ¸¸æˆæ—¶ç”µè„‘çš„çŠ¶æ€ï¼Œæ¸©åº¦å¸§æ•°ç­‰ç­‰ï¼ŒGamePPï¼ˆæ¸¸æˆåŠ åŠ ï¼‰æ˜¯ä¸ªå¥½é€‰æ‹©</p><h4 id="1-CPUå†…å­˜è¶…é¢‘ï¼ˆç¬”è®°æœ¬ç”µè„‘è¯·å¿½ç•¥ï¼‰"><a href="#1-CPUå†…å­˜è¶…é¢‘ï¼ˆç¬”è®°æœ¬ç”µè„‘è¯·å¿½ç•¥ï¼‰" class="headerlink" title="1. CPUå†…å­˜è¶…é¢‘ï¼ˆç¬”è®°æœ¬ç”µè„‘è¯·å¿½ç•¥ï¼‰"></a>1. CPUå†…å­˜è¶…é¢‘ï¼ˆç¬”è®°æœ¬ç”µè„‘è¯·å¿½ç•¥ï¼‰</h4><p>è¿™ä¸€éƒ¨åˆ†æˆ‘ä¸ä¼šè¯¦ç»†æ•™ï¼Œå› ä¸ºæ¯ä¸ªä¸»æ¿çš„è®¾ç½®æ–¹æ³•éƒ½ä¸ä¸€æ ·ï¼Œå¤§å®¶è‡ªå·±æœç´¢â€œå“ç‰Œ+CPUè¶…é¢‘è®¾ç½®â€ã€â€œå“ç‰Œ+å†…å­˜è¶…é¢‘è®¾ç½®â€æ…¢æ…¢å­¦ä¹ ã€‚</p><p>è¿™é‡Œæˆ‘åªæä¾›ä¸€ä¸‹æ€è·¯ï¼š</p><ul><li>å…ˆæŸ¥ä¸€ä¸‹ä½ çš„CPUå‹å·å¤§å®¶éƒ½èƒ½è¶…é¢‘åˆ°å¤šå°‘ç¨³å®šï¼Œé€‚å½“é™0.1-0.2ï¼Œæ¯”å¦‚å¤§å®¶éƒ½èƒ½è¶…åˆ°4.9Ghzç¨³å®šï¼Œé‚£ä½ è¶…åˆ°4.8ã€4.7å°±æ²¡å•¥é—®é¢˜ã€‚</li><li>ç°åœ¨çš„CPUè¶…é¢‘å¤§å¤šæ•°æ˜¯åªæ”¹å€é¢‘ï¼Œå¤–é¢‘é»˜è®¤100Mhzä¸åŠ¨ï¼Œæ¯”å¦‚å€é¢‘48å°±æ˜¯CPU4.8Ghzã€‚</li><li>å¤§éƒ¨åˆ†å†…å­˜éƒ½å¯ä»¥å‡ä¸€ä¸ªæ¡£æ¬¡æˆ–ä¸¤ä¸ªæ¡£æ¬¡ï¼Œä½“è´¨å¥½çš„å¯ä»¥å‡ä¸‰ä¸ªæ¡£æ¬¡ï¼Œæ¯”å¦‚ç°åœ¨DDR4çš„å†…å­˜é¢‘ç‡ä¸€èˆ¬éƒ½æ˜¯2133ã€2400ã€2666ã€3000ã€3200ç­‰ç­‰ï¼Œé¢—ç²’è¶Šå¥½èƒ½è¶…çš„è¶Šå¤šã€‚</li><li>å¦‚æœä½ ä¹°çš„å†…å­˜é¢‘ç‡æ˜¯é«˜äº2666çš„ï¼Œæ’åˆ°ç”µè„‘ä¸Šä¹Ÿåªæ˜¯é»˜è®¤2666ï¼Œéœ€è¦ä½ é€‰æ‹©X.M.Pé…ç½®æ–‡ä»¶æˆ–è€…è‡ªå·±è¶…åˆ°é«˜é¢‘ç‡ï¼Œå¦åˆ™åªä¼šä»¥2666é¢‘ç‡è¿è¡Œã€‚</li></ul><p><strong>éå¸¸ä¸å»ºè®®ç¬”è®°æœ¬è¿›è¡Œè¶…é¢‘ï¼Œå³ä¾¿ä½ çš„CPUå¯ä»¥è¶…ã€‚å› ä¸ºç¬”è®°æœ¬æ€§èƒ½çš„ç“¶é¢ˆæ˜¯æ•£çƒ­é—®é¢˜ï¼Œè¶…é¢‘å¯èƒ½ä¼šå¯¼è‡´æ¸©åº¦å‹ä¸ä½ï¼Œé€ æˆä¸å¯æŒ½å›çš„æŸå¤±ã€‚</strong></p><h4 id="2-å…³é—­ä¸»æ¿èŠ‚èƒ½æ¨¡å¼"><a href="#2-å…³é—­ä¸»æ¿èŠ‚èƒ½æ¨¡å¼" class="headerlink" title="2. å…³é—­ä¸»æ¿èŠ‚èƒ½æ¨¡å¼"></a>2. å…³é—­ä¸»æ¿èŠ‚èƒ½æ¨¡å¼</h4><p>ç¬”è®°æœ¬ç”µè„‘ä¸€èˆ¬æ²¡æœ‰è¿™ä¸ªé€‰é¡¹ã€‚</p><p>å„ä¸ªä¸»æ¿çš„è®¾ç½®æ–¹æ³•ä¸ä¸€æ ·ï¼ŒAMDå¹³å°ä¸€èˆ¬éƒ½æœ‰ï¼ŒIntelå¹³å°è¾ƒå°‘ï¼Œå¤§å®¶è‡ªå·±æŸ¥æ‰¾å³å¯ã€‚</p><p>å¦‚æœä½ è¿›è¡Œäº†è¶…é¢‘ï¼Œè®°å¾—è¿›è¡Œâ€œ<strong>é˜²æ‰å‹è®¾ç½®</strong>â€ã€‚</p><h4 id="3-æ‰“å¼€ç³»ç»Ÿé«˜æ€§èƒ½æ¨¡å¼"><a href="#3-æ‰“å¼€ç³»ç»Ÿé«˜æ€§èƒ½æ¨¡å¼" class="headerlink" title="3. æ‰“å¼€ç³»ç»Ÿé«˜æ€§èƒ½æ¨¡å¼"></a>3. æ‰“å¼€ç³»ç»Ÿé«˜æ€§èƒ½æ¨¡å¼</h4><ul><li><p>æ‰“å¼€æ§åˆ¶é¢æ¿ï¼Œåœ¨å³ä¸Šè§’å°†æŸ¥çœ‹æ–¹å¼æ”¹ä¸ºå°å›¾æ ‡</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331171155.png"></p></li><li><p>æ‰¾åˆ°ç”µæºé€‰é¡¹</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331171159.png"></p></li><li><p>ç‚¹å‡»å³è¾¹çš„ä¸‹æ‹‰ç®­å¤´æ‰“å¼€éšè—é™„åŠ è®¡åˆ’ï¼Œé€‰æ‹©â€œé«˜æ€§èƒ½â€œï¼Œ<strong>å¦‚æœè¿™é‡Œæ²¡æœ‰é«˜æ€§èƒ½é€‰é¡¹ä¹Ÿå¯ä»¥åˆ°å·¦è¾¹â€åˆ›å»ºç”µæºè®¡åˆ’â€œè‡ªå·±åˆ›å»ºä¸€ä¸ª</strong></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331171205.png"></p></li><li><p>å¦‚æœä½ æ˜¯Nå¡ï¼šå³å‡»æ¡Œé¢-NVDIAæ§åˆ¶é¢æ¿-å°†â€œ<strong>è®¾ç½®PhysXé…ç½®</strong>â€é€‰æ‹©ä¸ºä½ çš„ç‹¬ç«‹æ˜¾å¡ï¼Œç„¶åå³ä¸‹è§’ç‚¹å‡»åº”ç”¨ï¼›<strong>å¦‚æœä½ æ˜¯Nå¡ç¬”è®°æœ¬ï¼Œè¿˜éœ€è¦åœ¨â€œç®¡ç†3Dè®¾ç½®â€é‡Œå°†é¦–é€‰å›¾å½¢å¤„ç†å™¨é€‰ä¸ºâ€œé«˜æ€§èƒ½NVDIAå¤„ç†å™¨â€</strong>ï¼Œç„¶åå³ä¸‹è§’ç‚¹å‡»åº”ç”¨ã€‚</p></li></ul><h3 id="å››ã€å…³é—­å¯åŠ¨é¡¹"><a href="#å››ã€å…³é—­å¯åŠ¨é¡¹" class="headerlink" title="å››ã€å…³é—­å¯åŠ¨é¡¹"></a>å››ã€å…³é—­å¯åŠ¨é¡¹</h3><p><strong>ä½ å¯ä»¥å…ˆå®‰è£…ä½ è¦ç”¨çš„è½¯ä»¶ï¼Œå®‰è£…å·®ä¸å¤šäº†å†æ¥å…³é—­å¯åŠ¨é¡¹ã€‚</strong></p><p>å…³é—­ä½ ä¸éœ€è¦çš„å¯åŠ¨é¡¹ä¸ä»…å¯ä»¥é˜²æ­¢ä¸€å¼€æœºå°±å¼¹å‡ºä¸€å¤§å †åº”ç”¨ï¼Œè¿˜èƒ½åŠ é€Ÿå¼€æœºæ—¶é—´ï¼Œå‡å°‘ç”µè„‘å¼€æœºæ—¶å€™çš„å¡é¡¿æƒ…å†µã€‚</p><p>æ‰“å¼€æ§åˆ¶é¢æ¿ï¼Œåˆ°â€œå¯åŠ¨â€è¿™ä¸€é¡µé‡Œå°±å¯ä»¥å…³é—­ä½ ä¸éœ€è¦çš„å¯åŠ¨é¡¹ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨ç¬¬ä¸‰æ–¹è½¯ä»¶æ¥ç®¡ç†å¯åŠ¨é¡¹ï¼š<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331171209.png"></p><h3 id="äº”ã€å…³é—­å¼¹çª—"><a href="#äº”ã€å…³é—­å¼¹çª—" class="headerlink" title="äº”ã€å…³é—­å¼¹çª—"></a>äº”ã€å…³é—­å¼¹çª—</h3><p>ç›®å‰é’ˆå¯¹å¼¹çª—æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«å¥½çš„å®Œå…¨æ¸…ç†æ–¹æ³•ï¼Œåªèƒ½åšåˆ°æ‹¦æˆªã€‚</p><ul><li><p>å¦‚æœæ˜¯åœ¨å±å¹•æ­£ä¸­å‡ºç°çš„å¹¿å‘Šå¼¹çª—ï¼Œä¸€èˆ¬å¼¹çª—é‡Œä¼šæœ‰è®¾ç½®æŒ‰é’®æˆ–è€…ä¸‰é“æ æŒ‰é’®ï¼Œç‚¹å¼€é‡Œé¢ä¼šæœ‰â€œä¸å†å¼¹å‡ºâ€â€œæ°¸ä¹…å…³é—­â€ç­‰é€‰é¡¹ã€‚</p></li><li><p>å¦‚æœæ˜¯åœ¨å³ä¸‹è§’å‡ºç°çš„å¹¿å‘Šå¼¹çª—ï¼Œä¸€èˆ¬ä¼šæœ‰â€œä¸å†æç¤ºâ€å¯ä»¥å‹¾é€‰ï¼Œå‹¾é€‰åå…³é—­å°±ä¸ä¼šå†å¼¹å‡ºã€‚</p></li><li><p>çˆ±å¥‡è‰ºä¼˜é…·ç­‰ç­‰çš„å¹¿å‘Šï¼Œåœ¨è½¯ä»¶è®¾ç½®é‡Œå¯ä»¥å…³é—­å¼¹çª—ã€‚</p></li><li><p>ç«ç»’ç­‰å®‰å…¨è½¯ä»¶ä¼šæœ‰å¼¹çª—æ‹¦æˆªå°å·¥å…·ï¼Œç”¨èµ·æ¥æ•ˆæœè¿˜ç®—ä¸é”™ã€‚</p></li></ul><h2 id="ã€æ•™ç¨‹ä¸‰ã€‘ç³»ç»Ÿå¤‡ä»½ä¸è¿˜åŸ"><a href="#ã€æ•™ç¨‹ä¸‰ã€‘ç³»ç»Ÿå¤‡ä»½ä¸è¿˜åŸ" class="headerlink" title="ã€æ•™ç¨‹ä¸‰ã€‘ç³»ç»Ÿå¤‡ä»½ä¸è¿˜åŸ"></a>ã€æ•™ç¨‹ä¸‰ã€‘ç³»ç»Ÿå¤‡ä»½ä¸è¿˜åŸ</h2><p><strong>æ¯ä¸€æ¬¡é‡è£…éƒ½å¾ˆéº»çƒ¦ï¼Œè¦è®¾ç½®å¾ˆå¤šä¸œè¥¿ï¼Œæœ€å¥½çš„æ–¹æ³•å°±æ˜¯åœ¨é‡è£…å®Œæ¯•ï¼Œä¼˜åŒ–å®Œæ¯•ä¹‹åï¼Œç›´æ¥è¿›è¡Œä¸€æ¬¡å¤‡ä»½ï¼Œå¦‚æœä»¥åæœ‰ä»€ä¹ˆé—®é¢˜ï¼Œç›´æ¥è¿˜åŸå°±å¯ä»¥äº†ã€‚</strong></p><h3 id="ä¸€ã€å¤‡ä»½"><a href="#ä¸€ã€å¤‡ä»½" class="headerlink" title="ä¸€ã€å¤‡ä»½"></a>ä¸€ã€å¤‡ä»½</h3><p>æˆ‘ä»¬è¿™é‡Œä¸ä½¿ç”¨Windowsè‡ªå¸¦çš„å¤‡ä»½è¿˜åŸï¼Œå› ä¸ºæœ‰æ›´åŠ æ–¹ä¾¿å¿«æ·çœäº‹çš„æ–¹å¼</p><ol><li><p>ä¸‹è½½è½¯ä»¶Dism++ï¼š<a target="_blank" rel="noopener" href="https://www.chuyu.me/zh-Hans/index.html">www.chuyu.me/zh-Hans/index.html</a></p></li><li><p>è§£å‹è¿è¡Œï¼Œ64ä½ç³»ç»Ÿè¿è¡Œâ€œDism++x64â€ï¼Œ32ä½ç³»ç»Ÿè¿è¡Œâ€œDism++x86â€</p></li><li><p>æ‰“å¼€è½¯ä»¶åé€‰æ‹©å·¥å…·ç®±-ç³»ç»Ÿå¤‡ä»½</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331171214.png"></p></li><li><p>ç‚¹å‡»â€œæµè§ˆâ€ï¼Œé€‰æ‹©ç”Ÿæˆçš„å¤‡ä»½æ–‡ä»¶çš„å­˜æ”¾è·¯å¾„ï¼ˆç¡®ä¿è¿™ä¸ªè·¯å¾„çš„ç©ºé—´è¦æ¯”ä½ ç°åœ¨Cç›˜çš„å·²ä½¿ç”¨ç©ºé—´è¦å¤§ï¼‰ï¼Œç„¶ååœ¨æ–‡ä»¶åä¸€æ é‡Œç»™å¤‡ä»½æ–‡ä»¶èµ·ä¸€ä¸ªåå­—ï¼Œå»ºè®®ä»¥æ—¶é—´ä¸ºå‘½åæ–¹å¼</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331173803.png"></p></li><li><p>ç‚¹å‡»ä¿å­˜ã€ç¡®å®šä¹‹åå°±ä¼šå¼€å§‹å¤‡ä»½ï¼Œå¯ä»¥çœ‹åˆ°è¿›åº¦æ¡ã€‚å¤‡ä»½é€Ÿåº¦æ˜¯å…ˆæ…¢åå¿«çš„ï¼ŒCç›˜è¶Šå¤§è¶Šæ…¢ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331171218.png"></p></li><li><p>å¤‡ä»½å®Œæˆä¼šç”Ÿæˆä¸€ä¸ª.wimæ ¼å¼çš„æ–‡ä»¶ï¼Œä½ å¯ä»¥æŠŠæ­¤æ–‡ä»¶æ”¾åˆ°Cç›˜ä»¥å¤–çš„å…¶ä»–ç›˜æˆ–è€…ç§»åŠ¨ç¡¬ç›˜å®‰å…¨ä¿å­˜ã€‚</p></li></ol><h3 id="äºŒã€è¿˜åŸ"><a href="#äºŒã€è¿˜åŸ" class="headerlink" title="äºŒã€è¿˜åŸ"></a>äºŒã€è¿˜åŸ</h3><p>ä¸Šé¢ç”Ÿæˆçš„wimæ–‡ä»¶æ—¢å¯ä»¥ç»™ä½ çš„ç”µè„‘è¿˜åŸï¼Œä¹Ÿå¯ä»¥ç»™å…¶ä»–ç”µè„‘ï¼ˆä½†æ˜¯ä¸å»ºè®®ï¼Œé™¤éé…ç½®ä¸€æ ·ï¼‰</p><ol><li><p>æ’å…¥å¾®PE Uç›˜ï¼Œä»Uç›˜å¯åŠ¨ç”µè„‘ã€‚</p></li><li><p>æ‰“å¼€CGIå¤‡ä»½è¿˜åŸï¼Œé€‰æ‹©ä½ çš„ç³»ç»Ÿç›˜ï¼Œé•œåƒæ–‡ä»¶é€‰æ‹©ä½ çš„wimæ ¼å¼çš„å¤‡ä»½æ–‡ä»¶ï¼Œæ•´ä¸ªæ­¥éª¤å’Œé‡è£…ç³»ç»Ÿæ˜¯ä¸€æ ·çš„ï¼Œå…·ä½“è¯·æŸ¥çœ‹ã€æ•™ç¨‹ä¸€ã€‘ç¬¬å››æ­¥ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331171221.jpg"></p></li><li><p>è¿˜åŸå®Œæˆé‡å¯è¿›å…¥ç”µè„‘ï¼Œä½ ä¼šå‘ç°Cç›˜è¢«æ¢å¤åˆ°äº†å¤‡ä»½æ—¶å€™çš„æ ·å­ï¼Œæ–‡ä»¶å¸ƒå±€ã€å„ç§è®¾ç½®éƒ½ä¸€æ¨¡ä¸€æ ·ã€‚</p></li></ol><h2 id="ã€æ•™ç¨‹å››ã€‘æ— æ³•å¼•å¯¼ç³»ç»Ÿè§£å†³åŠæ³•"><a href="#ã€æ•™ç¨‹å››ã€‘æ— æ³•å¼•å¯¼ç³»ç»Ÿè§£å†³åŠæ³•" class="headerlink" title="ã€æ•™ç¨‹å››ã€‘æ— æ³•å¼•å¯¼ç³»ç»Ÿè§£å†³åŠæ³•"></a>ã€æ•™ç¨‹å››ã€‘æ— æ³•å¼•å¯¼ç³»ç»Ÿè§£å†³åŠæ³•</h2><p>å¦‚æœè°ƒæ•´æˆ–åˆ é™¤äº†ç³»ç»Ÿç›˜çš„éšè—åˆ†åŒºï¼Œæ¯”å¦‚å¾ˆå¤šäººä¸ºäº†å¹²å‡€ï¼Œä¼šé€‰æ‹©åˆ é™¤æ‰€æœ‰åˆ†åŒºï¼Œæˆ–è€…ä½¿ç”¨äº†æ–°çš„æ²¡æœ‰å®‰è£…è¿‡ç³»ç»Ÿçš„ç¡¬ç›˜ï¼Œå¯èƒ½ä¼šé‡åˆ°é‡å¯ä¹‹åæ— æ³•è¿›å»ç³»ç»Ÿçš„æƒ…å†µã€‚</p><p>è¿™æ—¶å€™æœ‰ä¸¤ä¸ªæ–¹æ³•æ¥è§£å†³ï¼š</p><h3 id="ä¸€ã€è‡ªåŠ©å»ºç«‹ESPå’ŒMSRåˆ†åŒº"><a href="#ä¸€ã€è‡ªåŠ©å»ºç«‹ESPå’ŒMSRåˆ†åŒº" class="headerlink" title="ä¸€ã€è‡ªåŠ©å»ºç«‹ESPå’ŒMSRåˆ†åŒº"></a>ä¸€ã€è‡ªåŠ©å»ºç«‹ESPå’ŒMSRåˆ†åŒº</h3><ol><li><p>åœ¨PEç›˜é‡Œæ‰“å¼€åˆ†åŒºåŠ©æ‰‹ï¼Œæ‰¾åˆ°ç³»ç»Ÿç›˜å¯¹åº”çš„é‚£å—ç¡¬ç›˜ï¼Œå…ˆåˆ é™¤æ‰€æœ‰åˆ†åŒºï¼Œä¼šå˜ä¸ºä¸€å—æœªåˆ†é…çš„ç©ºé—´ï¼Œç„¶åå†å»ºç«‹ä¸€ä¸ªæ–°åˆ†åŒºï¼Œç‚¹å·¦ä¸Šè§’æäº¤ï¼ˆ<strong>åˆ†åŒºåŠ©æ‰‹é‡Œå¿…é¡»æäº¤æ‰èƒ½ç”Ÿæ•ˆ</strong>ï¼‰</p></li><li><p>ç‚¹å‡»åˆ†åŒºåŠ©æ‰‹ä¸Šæ–¹çš„â€œå¿«é€Ÿåˆ†åŒºâ€ï¼Œæ ¹æ®è‡ªå·±çš„éœ€è¦é€‰æ‹©åˆ†åŒºæ•°é‡å’Œå„ä¸ªåŒºçš„å¤§å°ï¼Œä¸æƒ³åˆ†åŒºå°±åœ¨åˆ†åŒºæ•°ç›®é‡Œé€‰æ‹©â€œ1â€</p></li><li><p><strong>åœ¨â€œç£ç›˜çš„ç±»å‹â€é‡Œé€‰æ‹©â€œGPTâ€ï¼Œå‹¾é€‰â€œåˆ›å»ºESPå’ŒMSRåˆ†åŒºâ€ï¼Œé€‰æ‹©åˆ†åŒºå¯¹é½åˆ°â€œ4096æ‰‡åŒºâ€</strong>ï¼Œç„¶åå¼€å§‹æ‰§è¡Œåˆ†åŒºï¼Œä¸€èˆ¬æ¥è¯´åˆ†åŒºå®Œæˆä¹‹åå°±å¯ä»¥æ­£å¸¸å®‰è£…ç³»ç»Ÿï¼Œ<strong>å¦‚æœè¿˜æ˜¯ä¸è¡Œï¼Œè¯·å°è¯•æ–¹æ³•äºŒ</strong><br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331171225.jpg"></p></li></ol><h3 id="äºŒã€ä½¿ç”¨ä¼ ç»ŸWindowså®‰è£…æ–¹æ³•è‡ªåŠ¨å»ºç«‹"><a href="#äºŒã€ä½¿ç”¨ä¼ ç»ŸWindowså®‰è£…æ–¹æ³•è‡ªåŠ¨å»ºç«‹" class="headerlink" title="äºŒã€ä½¿ç”¨ä¼ ç»ŸWindowså®‰è£…æ–¹æ³•è‡ªåŠ¨å»ºç«‹"></a>äºŒã€ä½¿ç”¨ä¼ ç»ŸWindowså®‰è£…æ–¹æ³•è‡ªåŠ¨å»ºç«‹</h3><p><strong>å¦‚æœä½ ä½¿ç”¨äº†ã€æ•™ç¨‹ä¸€ã€‘å‰è¨€é‡Œç³»ç»Ÿé‡è£…æ–¹æ³•äºŒï¼Œè¯·ç›´æ¥ä»ç¬¬3æ­¥å¼€å§‹çœ‹</strong></p><ol><li><p>åœ¨PEç›˜é‡Œæ‰¾åˆ°ä½ çš„ç³»ç»Ÿé•œåƒæ–‡ä»¶ï¼Œå³å‡»â€œåŠ è½½ImDiskè™šæ‹Ÿå…‰é©±â€ï¼ŒåŠ è½½è®¾ç½®ç›´æ¥é»˜è®¤å°±è¡Œï¼Œç„¶åPEç³»ç»Ÿçš„æ­¤ç”µè„‘é‡Œå°±ä¼šå¤šå‡ºä¸€ä¸ªCDé©±åŠ¨å™¨ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331171230.jpg"></p></li><li><p>æ‰“å¼€CDé©±åŠ¨å™¨ï¼Œè¿è¡Œâ€œsetup.exeâ€ï¼Œå°±å¯ä»¥å¼€å§‹ä¼ ç»Ÿçš„Windowså®‰è£…æ–¹å¼ï¼š<br> <img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331171234.jpg"></p></li><li><p>è¿™ä¸€æ­¥ç‚¹å‡»ä¸‹æ–¹çš„<strong>â€œæˆ‘æ²¡æœ‰äº§å“å¯†é’¥â€</strong>å°±å¯ä»¥è·³è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç³»ç»Ÿå®‰è£…å®Œæˆä¹‹åå†ç”¨å·¥å…·æ¿€æ´»ã€‚<br> <img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331171238.jpg"></p></li><li><p>è¿™ä¸€æ­¥è¯·åŠ¡å¿…é€‰æ‹©<strong>â€œè‡ªå®šä¹‰ï¼šä»…å®‰è£…Windowsâ€</strong>ï¼Œå›¾ç‰‡é‡Œçš„æ¡†è¯·å¿½è§†ï¼š<br> <img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331171242.jpg"></p></li><li><p>è¿™ä¸€æ­¥è¯·å…ˆå°†æ‰€æœ‰çš„ç£ç›˜éƒ½åˆ é™¤ï¼Œæ“ä½œæ–¹æ³•ï¼šæŒ¨ä¸ªé€‰ä¸­ç£ç›˜ï¼Œç‚¹å‡»â€œ<strong>åˆ é™¤</strong>â€ï¼Œç›´åˆ°ç£ç›˜å˜æˆä¸€å—æœªåˆ†é…çš„ç©ºé—´ï¼Œç„¶åç‚¹å‡»â€œ<strong>æ–°å»º</strong>â€ï¼Œé»˜è®¤å¤§å°å³å¯ï¼Œç³»ç»Ÿä¼šæç¤ºâ€œ<strong>è‹¥ç¡®ä¿Windosæ‰€æœ‰åŠŸèƒ½éƒ½æ­£å¸¸ï¼ŒWindowså¯èƒ½è¦ä¸ºç³»ç»Ÿæ–‡ä»¶åˆ›å»ºé¢å¤–çš„åˆ†åŒº</strong>â€ï¼Œå³åˆ›å»ºESPå’ŒMSRåˆ†åŒºï¼Œç¡®å®šå³å¯</p><p> <img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/20200331171247.jpg"></p></li><li><p>ç„¶åé€‰æ‹©è¦å®‰è£…ç³»ç»Ÿçš„ç›˜ï¼Œå°±å¯ä»¥æ­£å¸¸å®‰è£…äº†ï¼Œå®‰è£…å®Œæˆé‡å¯ä¼šè¿›å…¥æ–°ç³»ç»Ÿã€‚</p></li></ol><h2 id="ã€æ•™ç¨‹äº”ã€‘Win10ä¸‡èƒ½æ¢å¤"><a href="#ã€æ•™ç¨‹äº”ã€‘Win10ä¸‡èƒ½æ¢å¤" class="headerlink" title="ã€æ•™ç¨‹äº”ã€‘Win10ä¸‡èƒ½æ¢å¤"></a>ã€æ•™ç¨‹äº”ã€‘Win10ä¸‡èƒ½æ¢å¤</h2><p>é™¤å»å‰é¢è®²çš„æ­£å¸¸è£…æœºå¤–ï¼Œè¿˜æœ‰ä¸€ç§è£…æœºæ–¹æ³•ï¼Œå¯ä»¥å¿½ç•¥ç¡¬ç›˜æ ¼å¼ï¼ŒBIOSè®¾ç½®ç­‰ç­‰ï¼Œç®€å•å¿«é€Ÿçš„è®©ç”µè„‘æ¢å¤åˆ°ä¸€ä¸ªå…¨æ–°çš„Win10ç³»ç»Ÿï¼Œå¹¶ä¸”ä¸éœ€è¦Uç›˜ä½œä¸ºPEç³»ç»Ÿè¾…åŠ©è£…æœºã€‚</p><p>ä»£ä»·ï¼š</p><ul><li>ç³»ç»Ÿç›˜ä¸­çš„è½¯ä»¶é‡ç½®ï¼Œæ‰€æœ‰è£…åœ¨Cç›˜çš„åº”ç”¨è½¯ä»¶ä¸¢å¤±ï¼Œå…¶ä»–åˆ†åŒº(å¦‚Dç›˜ã€Eç›˜ç­‰éç³»ç»Ÿç›˜)æš‚æ— å½±å“ã€‚</li><li>åªæ”¯æŒWindows10ç³»ç»Ÿ, ä¸”å¹¶éæ‰€æœ‰å“ç‰Œæœºå‹é€‚ç”¨(å› ä¸ºé‡åˆ°è¿‡æœ‰å‚å•†ç›´æ¥å–æ¶ˆäº†è¿™ä¸€æ–¹æ³•)ã€‚</li></ul><p><strong>ä½¿ç”¨æ­¤æ–¹æ³•ä¸éœ€è¦ä»»ä½•çš„è®¾ç½®ï¼Œä½ åªéœ€æŒ‰ç…§ä¸€ä¸‹æ­¥éª¤å°±èƒ½é‡ç½®ç³»ç»Ÿ</strong>ï¼Œåªè¦ä½ çš„ç”µè„‘ç¡¬ä»¶æ²¡é—®é¢˜ã€‚</p><h3 id="æ–¹æ³•1-é€šè¿‡Windowsè®¾å®šä¸­çš„é‡ç½®é€‰é¡¹æ‰§è¡Œé‡æ–°å®‰è£…Windows"><a href="#æ–¹æ³•1-é€šè¿‡Windowsè®¾å®šä¸­çš„é‡ç½®é€‰é¡¹æ‰§è¡Œé‡æ–°å®‰è£…Windows" class="headerlink" title="æ–¹æ³•1: é€šè¿‡Windowsè®¾å®šä¸­çš„é‡ç½®é€‰é¡¹æ‰§è¡Œé‡æ–°å®‰è£…Windows"></a>æ–¹æ³•1: é€šè¿‡Windowsè®¾å®šä¸­çš„é‡ç½®é€‰é¡¹æ‰§è¡Œé‡æ–°å®‰è£…Windows</h3><h4 id="Windows-11-æ“ä½œç³»ç»Ÿ"><a href="#Windows-11-æ“ä½œç³»ç»Ÿ" class="headerlink" title="Windows 11 æ“ä½œç³»ç»Ÿ"></a>Windows 11 æ“ä½œç³»ç»Ÿ</h4><ol><li>åœ¨Windowsæœå¯»æ è¾“å…¥<code>[é‡ç½®æ­¤ç”µè„‘]</code>â‘ ï¼Œç„¶åç‚¹é€‰<code>[æ‰“å¼€]</code>â‘¡ã€‚</li></ol><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220418120745179.png" alt="image-20220418120745179"><br>2. åœ¨é‡ç½®æ­¤ç”µè„‘é€‰é¡¹ä¸­ï¼Œç‚¹å‡»<code>[åˆå§‹åŒ–ç”µè„‘]</code>â‘¢ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/2671e366-8991-4180-81ed-b8af7a379764.jpg" alt="img"><br>3. ç‚¹é€‰<code>[ä¿ç•™æˆ‘çš„æ–‡ä»¶]</code>â‘£<br>   <img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/9457f1fa-1d95-4a69-bc97-22a5d76831c3.jpg" alt="img"></p><ol start="4"><li>ç‚¹é€‰<code>[æœ¬æœºé‡æ–°å®‰è£…]</code>â‘¤ã€‚</li></ol><blockquote><p>æ³¨: å¦‚æœæ— æ³•é€šè¿‡æœ¬æœºé‡æ–°å®‰è£…Windowsæˆ–æ˜¯å‡ºç°ä»»ä½•é”™è¯¯ï¼Œæ‚¨å¯ä»¥é€‰æ‹©äº‘ç«¯ä¸‹è½½ä»¥é‡æ–°å®‰è£…Windowsã€‚(è‹¥é€‰æ‹©äº‘ç«¯ä¸‹è½½ï¼Œé¡»å°†æ‚¨çš„ç”µè„‘ç½®äºå¯ç”¨çš„internetç½‘ç»œè¿æ¥åŒºåŸŸ)</p></blockquote><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/290d6633-e6c5-483d-8ef5-272b49b45746-20220418121209646.jpg" alt="img"></p><ol start="5"><li>ç‚¹é€‰<code>[æ›´æ”¹è®¾ç½®]</code>â‘¥ã€‚</li></ol><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/f9995594-cf33-4c26-a711-87c28a97e178.jpg" alt="img"></p><ol start="6"><li>å°†[è¿˜åŸé¢„å®‰è£…çš„åº”ç”¨]è®¾å®šä¸ºå¼€å¯â‘¦ï¼Œç„¶åç‚¹é€‰<code>[ç¡®è®¤]</code>â‘§ã€‚<blockquote><p>è¯·æ³¨æ„: å¦‚æœæ‚¨çš„ç”µè„‘è´­ä¹°æ—¶å·²æœ‰å®‰è£…Windowsæ“ä½œç³»ç»Ÿï¼Œå½“æ‚¨å°†[è¿˜åŸé¢„å®‰è£…çš„åº”ç”¨]è®¾ç½®ä¸ºå…³é—­æ—¶ï¼Œå°†ä¼šåˆ é™¤å‡ºå‚æ‰€é¢„å®‰è£…çš„æ‰€æœ‰ASUSåº”ç”¨ç¨‹åºä¸è®¾ç½®ã€‚</p></blockquote></li></ol><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/da8ceca4-6936-4fb2-9d1a-717c8f3bda98.jpg" alt="img"></p><ol start="7"><li>ç¡®è®¤å®Œè®¾ç½®åï¼Œè¯·ç‚¹é€‰<code>[ä¸‹ä¸€æ­¥]</code>â‘¨ ã€‚<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/66e54334-4d88-4880-91ad-c2af91d9c513.jpg" alt="img"></li></ol><p>8.æ‚¨å¯èƒ½ä¼šæ”¶åˆ°æ›´æ–°è®¯æ¯ï¼Œç‚¹é€‰<code>[ä¸‹ä¸€æ­¥]</code>ä»¥ç»§ç»­è¿˜åŸç¨‹åºã€‚</p><p>9.ç‚¹å‡»<code>[æŸ¥çœ‹å°†åˆ é™¤çš„åº”ç”¨]</code>â‘©ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/49ed739e-311d-4a87-8fd1-52a404deae18.jpg" alt="img"></p><p>10.é‡ç½®ç”µè„‘æ—¶ï¼Œå°†ä¼šåˆ é™¤æ‚¨çš„åº”ç”¨ç¨‹åºã€‚ä»¥ä¸‹å°†ä¼šåˆ—å‡ºæ— æ³•é€šè¿‡Microsoft Storeé‡æ–°å®‰è£…çš„åº”ç”¨ç¨‹åºåˆ—è¡¨ï¼Œæ‚¨éœ€è¦ä»ç½‘ç»œæˆ–æ˜¯å®‰è£…å…‰ç›˜é‡æ–°å®‰è£…ä¸‹åˆ—åº”ç”¨ç¨‹åºã€‚è¯·ç‚¹é€‰<code>[åé€€]</code>â‘ªå¹¶ç»§ç»­ä¸‹ä¸€ä¸ªæ­¥éª¤ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/f903568c-0fe7-4d8f-8382-1434def02e4a.jpg" alt="img"></p><p>11.ç‚¹é€‰<code>[é‡ç½®]</code>â‘«ã€‚ç³»ç»Ÿå°†ä¼šå¼€å§‹é‡æ–°å®‰è£…Windows 11ï¼Œå®‰è£…å®Œæˆå°†ä¼šé‡æ–°å¯åŠ¨ã€‚</p><blockquote><p>æ³¨æ„: é‡ç½®è¿‡ç¨‹ä¸­è¯·ç¡®ä¿ç”µè„‘æœ‰æ¥ä¸Šç”µæºä¸”ä¸è¦å¼ºåˆ¶å…³æœºï¼Œä»¥é¿å…å‘ç”Ÿå¼‚å¸¸é—®é¢˜ã€‚</p></blockquote><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/59aa86b6-e37b-4590-a557-10179c7e3211.jpg" alt="img"></p><h4 id="Windows10-æ“ä½œç³»ç»Ÿ"><a href="#Windows10-æ“ä½œç³»ç»Ÿ" class="headerlink" title="Windows10 æ“ä½œç³»ç»Ÿ"></a>Windows10 æ“ä½œç³»ç»Ÿ</h4><ol><li>å¼€å§‹<br>ç‚¹å‡»<code> &quot;å¼€å§‹&quot;</code> èœå•.</li></ol><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/4EED1061-E944-481E-8921-C8EACEE31ABB.png" alt="4EED1061-E944-481E-8921-C8EACEE31ABB"></p><ol start="2"><li>ç‚¹å‡»<code> &quot;è®¾ç½®&quot;</code>.</li></ol><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/9CBC7CF8-FB28-4431-A1CF-568568E1870C.png" alt="9CBC7CF8-FB28-4431-A1CF-568568E1870C"></p><ol start="3"><li>ç‚¹å‡» <code>&quot;æ›´æ–°å’Œå®‰å…¨&quot;</code>.</li></ol><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/482E5682-49B6-4B20-95C2-278378327C6E.png" alt="482E5682-49B6-4B20-95C2-278378327C6E"></p><p>4. </p><ul><li>ç‚¹å‡»<code> &quot;æ¢å¤&quot;</code>ï¼Œé€‰æ‹©é‡ç½®æ­¤ç”µè„‘ </li><li>ç‚¹å‡» <code>&quot;å¼€å§‹&quot;</code>.</li></ul><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/98CE778E-772A-49B4-A7E1-D023637ED7E5.png" alt="98CE778E-772A-49B4-A7E1-D023637ED7E5"></p><ol start="5"><li>é€‰æ‹©<code> &quot;ä¿ç•™æˆ‘çš„æ–‡ä»¶&quot;</code>.</li></ol><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/C4C0914C-4428-4CB8-8D04-2CF88199FBF6.png" alt="C4C0914C-4428-4CB8-8D04-2CF88199FBF6"></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/75F681C1-9560-45E2-B4EA-C720FB0B42F4.png" alt="75F681C1-9560-45E2-B4EA-C720FB0B42F4"></p><ol start="6"><li>ç‚¹å‡» <code>&quot;ä¸‹ä¸€æ­¥&quot;</code>.</li></ol><p>åœ¨æ­¤é¡µé¢æ‚¨éœ€è¦ç¡®è®¤æ‚¨å·²çŸ¥æ™“æ¢å¤å‡ºå‚åç¨‹åºéƒ½å°†è¢«åˆ é™¤</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/1197DFCF-2F3C-42A2-A545-855B5B0CF7A3.png" alt="1197DFCF-2F3C-42A2-A545-855B5B0CF7A3"></p><ol start="7"><li>ç‚¹å‡» <code>&quot;é‡ç½®&quot;</code>.</li></ol><p>è¿™æ˜¯å¼€å§‹æ¢å¤å‰çš„æœ€åä¸€æ­¥ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/A3609854-571B-45F1-87D3-735F94B2FF3E.png" alt="A3609854-571B-45F1-87D3-735F94B2FF3E"></p><h3 id="æ–¹æ³•2-é€šè¿‡Windowsä¿®å¤ç¯å¢ƒ-WinRE-æ‰§è¡Œé‡æ–°å®‰è£…Windows"><a href="#æ–¹æ³•2-é€šè¿‡Windowsä¿®å¤ç¯å¢ƒ-WinRE-æ‰§è¡Œé‡æ–°å®‰è£…Windows" class="headerlink" title="æ–¹æ³•2: é€šè¿‡Windowsä¿®å¤ç¯å¢ƒ(WinRE)æ‰§è¡Œé‡æ–°å®‰è£…Windows"></a>æ–¹æ³•2: é€šè¿‡Windowsä¿®å¤ç¯å¢ƒ(WinRE)æ‰§è¡Œé‡æ–°å®‰è£…Windows</h3><ol><li>è¿›å…¥Windowsä¿®å¤ç¯å¢ƒ<br>ç‚¹å‡» <code>&quot;å¼€å§‹&quot;</code> èœå•.</li></ol><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/4EED1061-E944-481E-8921-C8EACEE31ABB.png" alt="4EED1061-E944-481E-8921-C8EACEE31ABB"></p><p>ä¸€ç›´æŒ‰ä½é”®ç›˜ä¸Šçš„<kbd>Shift</kbd>ä¸è¦æ¾æ‰‹, ç„¶åç‚¹å‡»ç”µæºä¸­çš„é‡å¯æŒ‰é’®, ç¨ç­‰å‡ ç§’é’Ÿå°±ä¼šè¿›å…¥<code>Windowsä¿®å¤ç¯å¢ƒ</code><br>2. Windowsä¿®å¤ç¯å¢ƒåï¼Œé€‰æ‹©<code>[ç–‘éš¾è§£ç­”]</code>â‘ ã€‚<br>   <img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/3453566A-61A3-4148-A61F-2BD86AA987EE.png" alt="3453566A-61A3-4148-A61F-2BD86AA987EE"></p><ol start="3"><li>é€‰æ‹©<code>[é‡ç½®æ­¤ç”µè„‘]</code>â‘¡</li></ol><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/E0D4AD1D-B47E-46A8-B626-B49F4DD9F7F4.png" alt="E0D4AD1D-B47E-46A8-B626-B49F4DD9F7F4"></p><ol start="4"><li><p>é€‰æ‹©<code>[ä¿ç•™æˆ‘çš„æ–‡ä»¶]</code>â‘¢ã€‚<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/C9F5D08C-FC9D-4045-93B2-5413C9D41927.png" alt="C9F5D08C-FC9D-4045-93B2-5413C9D41927"></p></li><li><p>é€‰æ‹©<code>[æœ¬æœºé‡æ–°å®‰è£…]</code>â‘£ã€‚</p></li></ol><blockquote><p>æ³¨: å¦‚æœæ— æ³•é€šè¿‡æœ¬æœºé‡æ–°å®‰è£…Windowsæˆ–æ˜¯å‡ºç°ä»»ä½•é”™è¯¯ï¼Œæ‚¨å¯ä»¥é€‰æ‹©äº‘ç«¯ä¸‹è½½ä»¥é‡æ–°å®‰è£…Windowsã€‚(è‹¥é€‰æ‹©äº‘ç«¯ä¸‹è½½ï¼Œé¡»å°†æ‚¨çš„ç”µè„‘ç½® äºå¯ç”¨çš„å› ç‰¹ç½‘åŒºåŸŸ)</p></blockquote><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/01B97ADB-D92A-4D15-912E-62F61478052D.png" alt="01B97ADB-D92A-4D15-912E-62F61478052D"></p><ol start="6"><li>ç‚¹å‡»<code>[é‡ç½®]</code>â‘¤ï¼Œç”µè„‘å°†ä¼šå¼€å§‹é‡æ–°å®‰è£…Windowsã€‚<blockquote><p>æ³¨æ„: é‡ç½®è¿‡ç¨‹ä¸­è¯·ç¡®ä¿ç”µè„‘æœ‰æ¥ä¸Šç”µæºä¸”ä¸è¦å¼ºåˆ¶å…³æœºï¼Œä»¥é¿å…å‘ç”Ÿå¼‚å¸¸é—®é¢˜ã€‚</p></blockquote></li></ol><p>  <img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/3B1134D4-13C2-43BE-8BFB-8CA20F83339E.png" alt="3B1134D4-13C2-43BE-8BFB-8CA20F83339E"></p>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ“ä½œç³»ç»Ÿ </tag>
            
            <tag> é‡è£…ç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>EduCoder ä¼ è¾“å±‚åè®®åˆ†æ</title>
      <link href="/2022/04/12/62bcbc27515b-q1jun/"/>
      <url>/2022/04/12/62bcbc27515b-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="EduCoder-ä¼ è¾“å±‚åè®®åˆ†æ"><a href="#EduCoder-ä¼ è¾“å±‚åè®®åˆ†æ" class="headerlink" title="EduCoder ä¼ è¾“å±‚åè®®åˆ†æ"></a>EduCoder ä¼ è¾“å±‚åè®®åˆ†æ</h1><ul><li>å…³å¡1: TCP åŒ…åŸºç¡€<ul><li>äº†è§£ TCP æ•°æ®åŒ…ç»“æ„åŠæ ¼å¼ï¼Œä»¥åŠå…¶å…·ä½“çš„å«ä¹‰ã€‚</li></ul></li><li>å…³å¡2: ä¸‰æ¬¡æ¡æ‰‹<ul><li>åˆ†æ TCP çš„ä¸‰æ¬¡æ¡æ‰‹çš„å…·ä½“è¿‡ç¨‹ã€‚</li></ul></li><li>å…³å¡3: æ‹¥å¡æ§åˆ¶<ul><li>äº†è§£æ‹¥å¡æ§åˆ¶ï¼ŒæŒæ¡é‡ä¼ æœºåˆ¶ã€‚</li></ul></li><li>å…³å¡4:  UDP åŒ…åˆ†æ<ul><li>èƒ½å¤ŸæŒæ¡ç®€å•çš„ UDP åŒ…åˆ†æã€‚</li></ul></li></ul><h2 id="0x01-TCP-åŒ…åŸºç¡€"><a href="#0x01-TCP-åŒ…åŸºç¡€" class="headerlink" title="0x01 TCP åŒ…åŸºç¡€"></a>0x01 TCP åŒ…åŸºç¡€</h2><h3 id="0x0101-ç›¸å…³çŸ¥è¯†"><a href="#0x0101-ç›¸å…³çŸ¥è¯†" class="headerlink" title="0x0101 ç›¸å…³çŸ¥è¯†"></a>0x0101 ç›¸å…³çŸ¥è¯†</h3><p>ä¸ºäº†å®Œæˆæœ¬å…³ä»»åŠ¡ï¼Œä½ éœ€è¦æŒæ¡ï¼š  </p><ol><li>ç†è§£å¹¶æŒæ¡ TCP æŠ¥æ–‡æ®µæ ‡è®°çš„å…·ä½“å«ä¹‰ï¼›</li><li>åœ¨ Wireshark æŠ“åŒ…è½¯ä»¶ä¸­åˆ†æ TCP æŠ¥æ–‡ã€‚</li></ol><p><strong>TCP é¦–éƒ¨æ ¼å¼</strong> </p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/554139.png" alt="é¢„è§ˆå¤§å›¾"></p><ul><li><p>æºç«¯å£( 16 ä½)ï¼šé€šä¿¡å‘é€æ–¹ä½¿ç”¨çš„ç«¯å£å·</p></li><li><p>ç›®æ ‡ç«¯å£( 16 ä½)ï¼šé€šä¿¡æ¥æ”¶æ–¹ä½¿ç”¨çš„ç«¯å£å·</p></li><li><p>åºåˆ—å·( 32 ä½)ï¼šç”¨æ¥ç¡®ä¿æ•°æ®å¯é ä¼ è¾“çš„å”¯ä¸€å€¼</p></li><li><p>ç¡®è®¤å·( 32 ä½)ï¼šæ¥æ”¶æ–¹åœ¨å“åº”æ—¶å‘é€çš„æ•°å€¼</p></li><li><p>æ•°æ®åç§»( 4 ä½)ï¼šæ ‡å¿—æ•°æ®åŒ…å¼€å§‹çš„ä½ç½®ï¼ŒTCP å¤´éƒ¨çš„é•¿åº¦</p></li><li><p>æ ‡è®°( 12 ä½&#x2F; 6 ä½)ï¼š<br><code>SYN</code>ï¼š(åŒæ­¥)å‘èµ·è¿æ¥çš„æ•°æ®åŒ…ï¼šåŒæ­¥ <code>SYN=1</code> è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªè¿æ¥è¯·æ±‚æˆ–è¿æ¥æ¥å—æŠ¥æ–‡ã€‚<br><code>ACK</code>ï¼š(ç¡®è®¤)ç¡®è®¤æ”¶åˆ°çš„æ•°æ®åŒ…ï¼šåªæœ‰å½“ <code>ACK=1</code> æ—¶ï¼Œç¡®è®¤å·å­—æ®µæ‰æœ‰æ•ˆï¼›å½“ <code>ACK=0</code> æ—¶ï¼Œç¡®è®¤å·æ— æ•ˆã€‚<br><code>RST</code>ï¼š(é‡ç½®)ä¹‹å‰å°è¯•çš„è¿æ¥è¢«å…³é—­ï¼Œ(ä¿¡å·å·®ï¼Œä¿¡å·æ‹¥æŒ¤)ï¼šå½“ <code>RST=1</code> æ—¶ï¼Œè¡¨æ˜ TCP è¿æ¥ä¸­å‡ºç°ä¸¥é‡å·®é”™ï¼ˆå¦‚ç”±äºä¸»æœºå´©æºƒæˆ–å…¶ä»–åŸå› ï¼‰ï¼Œå¿…é¡»é‡Šæ”¾è¿æ¥ï¼Œç„¶åå†é‡æ–°å»ºç«‹è¿è¾“è¿æ¥ã€‚<br><code>FIN</code>ï¼š(ç»“æŸ)è¿æ¥æˆåŠŸï¼Œä¼ è¾“å®Œæ¯•ä¹‹åï¼Œè¿æ¥æ­£åœ¨æ–­å¼€ï¼šç”¨æ¥é‡Šæ”¾ä¸€ä¸ªè¿æ¥ï¼Œ<code>FIN=1</code> è¡¨æ˜æ­¤æŠ¥æ–‡æ®µçš„å‘é€ç«¯çš„æ•°æ®å·²å‘é€å®Œæ¯•ï¼Œå¹¶è¦æ±‚é‡Šæ”¾è¿è¾“è¿æ¥ã€‚<br><code>PSH</code>ï¼š(æ¨é€)æ•°æ®åŒ…ç›´æ¥å‘é€ç»™åº”ç”¨ï¼Œè€Œä¸æ˜¯ç¼“å­˜èµ·æ¥ï¼šæ¥æ”¶ TCP æ”¶åˆ° <code>PSH=1</code> çš„æŠ¥æ–‡æ®µï¼Œå°±å°½å¿«åœ°äº¤ä»˜æ¥æ”¶åº”ç”¨è¿›ç¨‹ï¼Œè€Œä¸å†ç­‰åˆ°æ•´ä¸ªç¼“å­˜éƒ½å¡«æ»¡äº†åå†å‘ä¸Šäº¤ä»˜ã€‚<br><code>URG</code>ï¼š(ç´§æ€¥)æ•°æ®åŒ…ä¸­æ‰¿è½½çš„å†…å®¹åº”è¯¥ç«‹å³ç”± TCP åè®®æ ˆç«‹å³è¿›è¡Œå¤„ç†ï¼šå½“ <code>URG=1</code> æ—¶ï¼Œè¡¨æ˜ç´§æ€¥æŒ‡é’ˆå­—æ®µæœ‰æ•ˆã€‚å®ƒå‘Šè¯‰ç³»ç»Ÿæ­¤æŠ¥æ–‡æ®µä¸­æœ‰ç´§æ€¥æ•°æ®ï¼Œåº”å°½å¿«ä¼ é€(ç›¸å½“äºé«˜ä¼˜å…ˆçº§çš„æ•°æ®)ã€‚<br><code>CWR</code>ï¼š(æ‹¥å¡çª—å£å‡å°)ç¼“å­˜åŒºå·²æ»¡æˆ–è€…æ‹¥æŒ¤ï¼Œé€šä¿¡åŒæ–¹éƒ½åº”è¯¥é™ä½ä¼ è¾“çš„é€Ÿç‡ã€‚</p></li><li><p>çª—å£å¤§å°( 16 ä½)ï¼šåŒ¹é…ç¼“å­˜åŒºçš„å¤§å°</p></li><li><p>æ ¡éªŒå’Œ( 16 ä½)ï¼šç¡®è®¤ TCP æ•°æ®æ®µä¸­çš„å†…å®¹æ˜¯å¦å‘é€äº†å˜åŒ–</p></li><li><p>ç´§æ€¥æŒ‡é’ˆ( 16 ä½)ï¼šæ˜ç¡®æ˜¾ç¤ºæ•°æ®ä¹‹å‰çš„ 16 è¿›åˆ¶åºåˆ—å·</p></li></ul><p>å…¶ä¸­ï¼Œ<code>ACK </code>æ˜¯å¯èƒ½ä¸ <code>SYN</code>ï¼Œ<code>FIN</code> ç­‰åŒæ—¶ä½¿ç”¨çš„ï¼Œæ¯”å¦‚ <code>SYN</code> å’Œ <code>ACK</code> å¯èƒ½åŒæ—¶ä¸º 1 ï¼Œå®ƒè¡¨ç¤ºçš„å°±æ˜¯å»ºç«‹è¿æ¥ä¹‹åçš„å“åº”ï¼Œ å¦‚æœåªæ˜¯å•ä¸ªçš„ä¸€ä¸ª <code>SYN</code> ï¼Œå®ƒè¡¨ç¤ºçš„åªæ˜¯å»ºç«‹è¿æ¥ã€‚ï¼ˆ TCP çš„å‡ æ¬¡æ¡æ‰‹å°±æ˜¯é€šè¿‡è¿™æ ·çš„ <code>ACK</code> è¡¨ç°å‡ºæ¥çš„ï¼‰ï¼Œ ä½† <code>SYN</code> ä¸ <code>FIN</code> æ˜¯ä¸ä¼šåŒæ—¶ä¸º 1 çš„ï¼Œå› ä¸ºå‰è€…è¡¨ç¤ºçš„æ˜¯å»ºç«‹è¿æ¥ï¼Œè€Œåè€…è¡¨ç¤ºçš„æ˜¯æ–­å¼€è¿æ¥ã€‚<code>RST</code> ä¸€èˆ¬æ˜¯åœ¨ <code>FIN</code> ä¹‹åæ‰ä¼šå‡ºç°ä¸º 1 çš„æƒ…å†µï¼Œè¡¨ç¤ºçš„æ˜¯è¿æ¥é‡ç½®ã€‚ä¸€èˆ¬åœ°ï¼Œå½“å‡ºç° <code>FIN</code> åŒ…æˆ– <code>RST</code> åŒ…æ—¶ï¼Œæˆ‘ä»¬ä¾¿è®¤ä¸ºå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯æ–­å¼€äº†è¿æ¥ï¼›è€Œå½“å‡ºç° <code>SYN</code> å’Œ <code>SYNï¼‹ACK</code> åŒ…æ—¶ï¼Œæˆ‘ä»¬è®¤ä¸ºå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨å»ºç«‹äº†ä¸€ä¸ªè¿æ¥ã€‚</p><h3 id="0x0102-å®éªŒæµç¨‹"><a href="#0x0102-å®éªŒæµç¨‹" class="headerlink" title="0x0102 å®éªŒæµç¨‹"></a>0x0102 å®éªŒæµç¨‹</h3><p><strong>ï¼ˆ1ï¼‰æ‰“å¼€ Wireshark ï¼ŒåŠ è½½å®è®­æ–‡ä»¶å¤¹ä¸­çš„<code>tcp-ethereal-trace-1</code>æ–‡ä»¶ï¼Œå¹¶ç­›é€‰å‡ºå…¶ä¸­çš„â€TCPâ€æŠ¥æ–‡ï¼›</strong></p><p>åœ¨è¿‡æ»¤å™¨ä¸­è¾“å…¥<code>tcp</code>, å¦‚ä¸‹å›¾æ‰€ç¤º: </p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220412122917077.png" alt="image-20220412122917077"></p><p><strong>ï¼ˆ2ï¼‰å±•å¼€<code>TCP</code>åˆ†ç»„ï¼ŒæŸ¥çœ‹æœ¬æœºä½¿ç”¨çš„ IP åœ°å€å’Œ TCP ç«¯å£å·æ˜¯ä»€ä¹ˆï¼Œå¡«å†™åˆ°æ–‡ä»¶ä¸­ï¼›</strong></p><p>æœ¬æœºæ‰€ä½¿ç”¨çš„IPåœ°å€å’ŒTCPç«¯å£åˆ†åˆ«å¦‚å›¾æ‰€ç¤º:</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220412123118492.png" alt="image-20220412123118492"></p><p><strong>ï¼ˆ3ï¼‰<code>gaia.cs.umass.edu</code>ï¼ˆç›®æ ‡ç½‘ç«™ï¼‰çš„ IP åœ°å€å’Œ TCP ç«¯å£å·æ˜¯ä»€ä¹ˆï¼Œå¡«å†™åˆ°æ–‡ä»¶ä¸­ã€‚</strong></p><p>å…ˆä½¿ç”¨Terminalç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤ç¡®è®¤<code>gaia.cs.umass.edu</code>ï¼ˆç›®æ ‡ç½‘ç«™ï¼‰çš„IPåœ°å€:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping gaia.cs.umass.edu</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220412123319094.png" alt="image-20220412123319094"></p><p>å¾—åˆ°å…¶ipåœ°å€ä¸º: <strong>128.119.245.12</strong> </p><p>å’Œç¬¬ä¸€ä¸ª(æ—¶åº)TCPåŒ…çš„Dst IPåœ°å€ä¸€è‡´, æ‰€ä»¥<code>gaia.cs.umass.edu</code>ï¼ˆç›®æ ‡ç½‘ç«™ï¼‰çš„ IP åœ°å€å’Œ TCP ç«¯å£å·å¦‚ä¸‹æ‰€ç¤º:</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220412123508042.png" alt="image-20220412123508042"></p><h3 id="0x0103-æœ€ç»ˆç»“æœ"><a href="#0x0103-æœ€ç»ˆç»“æœ" class="headerlink" title="0x0103 æœ€ç»ˆç»“æœ"></a>0x0103 æœ€ç»ˆç»“æœ</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æœ¬æœºä½¿ç”¨çš„IPåœ°å€å’ŒTCPç«¯å£å·(ç”¨;éš”å¼€):192.168.1.102;1161</span><br><span class="line">gaia.cs.umass.eduçš„IPåœ°å€å’Œç«¯å£å·(ç”¨;éš”å¼€):128.119.245.12;80</span><br></pre></td></tr></table></figure><h2 id="0x02-ä¸‰æ¬¡æ¡æ‰‹"><a href="#0x02-ä¸‰æ¬¡æ¡æ‰‹" class="headerlink" title="0x02 ä¸‰æ¬¡æ¡æ‰‹"></a>0x02 ä¸‰æ¬¡æ¡æ‰‹</h2><h3 id="0x0201-ç›¸å…³çŸ¥è¯†"><a href="#0x0201-ç›¸å…³çŸ¥è¯†" class="headerlink" title="0x0201 ç›¸å…³çŸ¥è¯†"></a>0x0201 ç›¸å…³çŸ¥è¯†</h3><p>ä¸ºäº†å®Œæˆæœ¬å…³ä»»åŠ¡ï¼Œä½ éœ€è¦æŒæ¡ï¼š  </p><ol><li>äº†è§£ä¸‰æ¬¡æ¡æ‰‹åè®®çš„å†…å®¹ï¼›</li><li>åœ¨ Wireshark ä¸­æŠ“å– TCP æ•°æ®åŒ…ã€‚</li></ol><p><strong>ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥</strong></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/566278-20220412123840685.png" alt="é¢„è§ˆå¤§å›¾"></p><ol><li><p><code>ç¬¬ä¸€æ¬¡æ¡æ‰‹</code>ï¼šå®¢æˆ·ç«¯å°†æ ‡å¿—ä½ SYN ç½®ä¸º 1 ï¼Œéšæœºäº§ç”Ÿä¸€ä¸ªå€¼<code>SEQ = X</code>ï¼Œå¹¶å°†è¯¥æ•°æ®åŒ…å‘é€ç»™æœåŠ¡å™¨ï¼Œå®¢æˆ·æœºè¿›å…¥ SYN_SENT çŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨ç¡®è®¤ï¼›</p></li><li><p><code>ç¬¬äºŒæ¬¡æ¡æ‰‹</code>ï¼šæœåŠ¡å™¨æ”¶åˆ°æ•°æ®åŒ…åç”±æ ‡å¿—ä½<code>SYN = 1</code>ï¼ŒçŸ¥é“å®¢æˆ·ç«¯è¯·æ±‚å»ºç«‹è¿æ¥ï¼ŒæœåŠ¡å™¨å°†æ ‡å¿—ä½ SYN å’Œ ACK éƒ½ç½®ä¸º 1 ï¼Œ<code>ACK = X + 1</code>ï¼Œéšæœºäº§ç”Ÿä¸€ä¸ªå€¼<code>SEQ = Y</code>ï¼Œå¹¶å°†è¯¥æ•°æ®åŒ…å‘é€ç»™å®¢æˆ·ç«¯ä»¥ç¡®è®¤è¿æ¥è¯·æ±‚ï¼ŒæœåŠ¡å™¨è¿›å…¥ SYN_RCVD çŠ¶æ€ï¼›</p></li><li><p><code>ç¬¬ä¸‰æ¬¡æ¡æ‰‹</code>ï¼šå®¢æˆ·ç«¯æ”¶åˆ°ç¡®è®¤åï¼Œæ£€æŸ¥ ACK æ˜¯å¦ä¸º<code>X + 1</code>ï¼ŒACK æ˜¯å¦ä¸º 1 ï¼Œå¦‚æœæ­£ç¡®åˆ™å°†æ ‡å¿—ä½ ACK ç½®ä¸º 1 ï¼Œ<code>ACK = Y + 1</code>ï¼Œå¹¶å°†è¯¥æ•°æ®åŒ…å‘é€ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æ£€æŸ¥ ACK æ˜¯å¦ä¸º<code>K + 1</code>ï¼ŒACK æ˜¯å¦ä¸º 1 ï¼Œå¦‚æœæ­£ç¡®åˆ™è¿æ¥å»ºç«‹æˆåŠŸï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è¿›å…¥ ESTABLISHED çŠ¶æ€ã€‚</p></li></ol><blockquote><p>æ¡æ‰‹è¿‡ç¨‹ä¸­ä¼ é€çš„åŒ…é‡Œä¸åŒ…å«æ•°æ®ï¼Œä¸‰æ¬¡æ¡æ‰‹å®Œæ¯•åï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨æ‰æ­£å¼å¼€å§‹ä¼ é€æ•°æ®ã€‚ç†æƒ³çŠ¶æ€ä¸‹ï¼ŒTCP è¿æ¥ä¸€æ—¦å»ºç«‹ï¼Œåœ¨é€šä¿¡åŒæ–¹ä¸­çš„ä»»ä½•ä¸€æ–¹ä¸»åŠ¨å…³é—­è¿æ¥ä¹‹å‰ï¼ŒTCP è¿æ¥éƒ½å°†è¢«ä¸€ç›´ä¿æŒä¸‹å»ã€‚</p></blockquote><p><strong>å››æ¬¡æ¡æ‰‹æ–­å¼€è¿æ¥</strong></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/566687.png" alt="é¢„è§ˆå¤§å›¾"></p><ol><li><code>ç¬¬ä¸€æ¬¡æ¡æ‰‹</code>ï¼šä¸»åŠ¨å…³é—­æ–¹å‘é€ä¸€ä¸ª FIN ï¼Œç”¨æ¥å…³é—­ä¸»åŠ¨æ–¹åˆ°è¢«åŠ¨å…³é—­æ–¹çš„æ•°æ®ä¼ é€ï¼Œä¹Ÿå°±æ˜¯ä¸»åŠ¨å…³é—­æ–¹å‘Šè¯‰è¢«åŠ¨å…³é—­æ–¹ï¼šæˆ‘å·²ç»ä¸ä¼šå†ç»™ä½ å‘æ•°æ®äº†(å½“ç„¶ï¼Œåœ¨ FIN åŒ…ä¹‹å‰å‘é€å‡ºå»çš„æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰æ”¶åˆ°å¯¹åº”çš„ ACK ç¡®è®¤æŠ¥æ–‡ï¼Œä¸»åŠ¨å…³é—­æ–¹ä¾ç„¶ä¼šé‡å‘è¿™äº›æ•°æ®)ï¼Œä½†æ­¤æ—¶ä¸»åŠ¨å…³é—­æ–¹è¿˜å¯ä»¥æ¥å—æ•°æ®ã€‚</li><li><code>ç¬¬äºŒæ¬¡æ¡æ‰‹</code>ï¼šè¢«åŠ¨å…³é—­æ–¹æ”¶åˆ° FIN åŒ…åï¼Œå‘é€ä¸€ä¸ª ACK ç»™å¯¹æ–¹ï¼Œç¡®è®¤åºå·ä¸ºæ”¶åˆ°åºå· + 1 (ä¸ SYN ç›¸åŒï¼Œä¸€ä¸ª FIN å ç”¨ä¸€ä¸ªåºå·)ã€‚</li><li><code>ç¬¬ä¸‰æ¬¡æ¡æ‰‹</code>ï¼šè¢«åŠ¨å…³é—­æ–¹å‘é€ä¸€ä¸ª FIN ï¼Œç”¨æ¥å…³é—­è¢«åŠ¨å…³é—­æ–¹åˆ°ä¸»åŠ¨å…³é—­æ–¹çš„æ•°æ®ä¼ é€ï¼Œä¹Ÿå°±æ˜¯å‘Šè¯‰ä¸»åŠ¨å…³é—­æ–¹ï¼Œæˆ‘çš„æ•°æ®ä¹Ÿå‘é€å®Œäº†ï¼Œä¸ä¼šå†ç»™ä½ å‘æ•°æ®äº†ã€‚</li><li><code>ç¬¬å››æ¬¡æ¡æ‰‹</code>ï¼šä¸»åŠ¨å…³é—­æ–¹æ”¶åˆ° FIN åï¼Œå‘é€ä¸€ä¸ª ACK ç»™è¢«åŠ¨å…³é—­æ–¹ï¼Œç¡®è®¤åºå·ä¸ºæ”¶åˆ°åºå· + 1 ï¼Œè‡³æ­¤ï¼Œå®Œæˆå››æ¬¡æŒ¥æ‰‹ã€‚</li></ol><h3 id="0x0202-å®éªŒæµç¨‹"><a href="#0x0202-å®éªŒæµç¨‹" class="headerlink" title="0x0202 å®éªŒæµç¨‹"></a>0x0202 å®éªŒæµç¨‹</h3><p><strong>ï¼ˆ1ï¼‰æ‰“å¼€æ–‡ä»¶å¤¹ä¸­<code>tcp-ethereal-trace-1</code>æ–‡ä»¶ï¼›</strong></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220412125057849.png" alt="image-20220412125057849"></p><p><strong>ï¼ˆ2ï¼‰æ‰“å¼€ç¼–è¾‘ ( edit ) -&gt;é¦–é€‰é¡¹ ( preferences )-&gt; Protocols -&gt; TCP ï¼Œå–æ¶ˆå‹¾é€‰ Relative sequence numbersï¼ˆç›¸å¯¹åºåˆ—å·ï¼‰;</strong></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220412125245451.png" alt="image-20220412125245451"></p><p><strong>ï¼ˆ3ï¼‰ç¬¬ä¸€æ¬¡æ¡æ‰‹æ—¶ï¼Œ TCP SYN åŒºæ®µçš„åºåˆ—å·ï¼ˆ SEQ ï¼‰æ˜¯ä»€ä¹ˆï¼Œå¡«å†™åˆ° txt æ–‡ä»¶ä¸­ï¼›</strong></p><p>å¦‚ä¸‹å›¾æ‰€ç¤º: </p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220412132736548.png" alt="image-20220412132736548"></p><p>ç¬¬ä¸€æ¬¡æ¡æ‰‹TCP SYN åŒºæ®µçš„åºåˆ—å·ï¼ˆ SEQ ï¼‰&#x3D; <strong>232129012</strong> .</p><p><strong>ï¼ˆ4ï¼‰ç”±ä¸‰æ¬¡æ¡æ‰‹åè®®ï¼Œå®¢æˆ·ç«¯é¦–æ¬¡å›å¤ä¸­ï¼Œ<code>ACK=SEQ+1</code>ï¼Œæ ¹æ®ï¼ˆ3ï¼‰ä¸­çš„ SEQ å·ï¼Œç”¨<code>tcp.ack==SEQ+1</code>ï¼ˆå…·ä½“æ•°å­—ï¼‰å‘½ä»¤ç­›é€‰å‡ºç›¸åº”æ•°æ®æŠ¥ï¼ŒæŸ¥çœ‹<code>gaia.cs.umass.edu</code> å‘é€ç»™å®¢æˆ·ç«¯è®¡ç®—æœºå›å¤çš„ SYN çš„åºåˆ—å·ï¼ˆ SEQ ï¼‰æ˜¯å¤šå°‘ï¼Œå¡«å†™åˆ° txt æ–‡ä»¶ä¸­ï¼›</strong></p><p>ç”±ä¸Šä¸€æ­¥å¯çŸ¥<code>seq = 232129012</code>,</p><p>åˆ™<code>seq + 1 = 232129013</code>, åœ¨è¿‡æ»¤å™¨ä¸­è¾“å…¥ tcp.ack &#x3D;&#x3D; 232129013 å³å¯ç­›é€‰å‡º<code>gaia.cs.umass.edu</code> å‘é€ç»™å®¢æˆ·ç«¯è®¡ç®—æœºå›å¤çš„TCPåŒ…, å¦‚ä¸‹æ‰€ç¤º: </p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220412133155228.png" alt="image-20220412133155228"></p><p>å¯ä»¥å¾—åˆ°å›å¤çš„ SYN çš„åºåˆ—å·ï¼ˆ SEQ ï¼‰ &#x3D; <strong>883061785</strong>.</p><h3 id="0x0203-æœ€ç»ˆç»“æœ"><a href="#0x0203-æœ€ç»ˆç»“æœ" class="headerlink" title="0x0203 æœ€ç»ˆç»“æœ"></a>0x0203 æœ€ç»ˆç»“æœ</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼ŒTCP SYNåŒºæ®µçš„åºåˆ—å·æ˜¯ï¼š232129012</span><br><span class="line">gaia.cs.umass.eduå‘é€ç»™å®¢æˆ·ç«¯åŠ ç®—è®¡ä»¥å›å¤çš„SYNçš„åºåˆ—å·æ˜¯ï¼š883061785</span><br></pre></td></tr></table></figure><h2 id="0x03-æ‹¥å¡æ§åˆ¶"><a href="#0x03-æ‹¥å¡æ§åˆ¶" class="headerlink" title="0x03 æ‹¥å¡æ§åˆ¶"></a>0x03 æ‹¥å¡æ§åˆ¶</h2><h3 id="0x0301-ç›¸å…³çŸ¥è¯†"><a href="#0x0301-ç›¸å…³çŸ¥è¯†" class="headerlink" title="0x0301 ç›¸å…³çŸ¥è¯†"></a>0x0301 ç›¸å…³çŸ¥è¯†</h3><p>ä¸ºäº†å®Œæˆæœ¬å…³ä»»åŠ¡ï¼Œä½ éœ€è¦æŒæ¡ï¼š  </p><ol><li>äº†è§£æ‹¥å¡æ§åˆ¶ï¼›</li><li>åœ¨ Wireshark ä¸­æŠ“å– TCP æ•°æ®åŒ…ã€‚</li></ol><p><strong>ä»€ä¹ˆæ˜¯æ‹¥å¡</strong></p><p>æ‹¥å¡ç°è±¡æ˜¯æŒ‡åˆ°è¾¾é€šä¿¡å­ç½‘ä¸­æŸä¸€éƒ¨åˆ†çš„åˆ†ç»„æ•°é‡è¿‡å¤šï¼Œä½¿å¾—è¯¥éƒ¨åˆ†ç½‘ç»œæ¥ä¸åŠå¤„ç†ï¼Œä»¥è‡´å¼•èµ·è¿™éƒ¨åˆ†ä¹ƒè‡³æ•´ä¸ªç½‘ç»œæ€§èƒ½ä¸‹é™çš„ç°è±¡ï¼Œä¸¥é‡æ—¶ç”šè‡³ä¼šå¯¼è‡´ç½‘ç»œé€šä¿¡ä¸šåŠ¡é™·å…¥åœé¡¿ï¼Œå³å‡ºç°æ­»é”ç°è±¡ã€‚è¿™ç§ç°è±¡è·Ÿå…¬è·¯ç½‘ä¸­ç»å¸¸æ‰€è§çš„äº¤é€šæ‹¥æŒ¤ä¸€æ ·ï¼Œå½“èŠ‚å‡æ—¥å…¬è·¯ç½‘ä¸­è½¦è¾†å¤§é‡å¢åŠ æ—¶ï¼Œå„ç§èµ°å‘çš„è½¦æµç›¸äº’å¹²æ‰°ï¼Œä½¿æ¯è¾†è½¦åˆ°è¾¾ç›®çš„åœ°çš„æ—¶é—´éƒ½ç›¸å¯¹å¢åŠ ï¼ˆå³å»¶è¿Ÿå¢åŠ ï¼‰ï¼Œç”šè‡³æœ‰æ—¶åœ¨æŸæ®µå…¬è·¯ä¸Šè½¦è¾†å› å µå¡è€Œæ— æ³•å¼€åŠ¨ï¼ˆå³å‘ç”Ÿå±€éƒ¨æ­»é”ï¼‰ã€‚</p><p><strong>é€ æˆæ‹¥å¡çš„åŸå› </strong></p><ol><li>å¤šæ¡æµå…¥çº¿è·¯æœ‰åˆ†ç»„åˆ°è¾¾ï¼Œå¹¶éœ€è¦åŒä¸€è¾“å‡ºçº¿è·¯ï¼Œæ­¤æ—¶ï¼Œå¦‚æœè·¯ç”±å™¨æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜æ¥å­˜æ”¾æ‰€æœ‰è¿™äº›åˆ†ç»„ï¼Œé‚£ä¹ˆæœ‰çš„åˆ†ç»„å°±ä¼šä¸¢å¤±ï¼›</li><li>è·¯ç”±å™¨çš„æ…¢å¸¦å¤„ç†å™¨çš„ç¼˜æ•…ï¼Œä»¥è‡³äºéš¾ä»¥å®Œæˆå¿…è¦çš„å¤„ç†å·¥ä½œï¼Œå¦‚ç¼“å†²åŒºæ’é˜Ÿã€æ›´æ–°è·¯ç”±è¡¨ç­‰ã€‚</li></ol><p><strong>é˜²æ­¢æ‹¥å¡çš„æ–¹æ³•</strong></p><ol><li>åœ¨ä¼ è¾“å±‚å¯é‡‡ç”¨é‡ä¼ ç­–ç•¥ã€ä¹±åºç¼“å­˜ç­–ç•¥ã€ç¡®è®¤ç­–ç•¥ã€æµæ§åˆ¶ç­–ç•¥å’Œç¡®å®šè¶…æ—¶ç­–ç•¥ï¼›</li><li>åœ¨ç½‘ç»œå±‚å¯é‡‡ç”¨å­ç½‘å†…éƒ¨çš„è™šç”µè·¯ä¸æ•°æ®æŠ¥ç­–ç•¥ã€åˆ†ç»„æ’é˜Ÿå’ŒæœåŠ¡ç­–ç•¥ã€åˆ†ç»„ä¸¢å¼ƒç­–ç•¥ã€è·¯ç”±ç®—æ³•å’Œåˆ†ç»„ç”Ÿå­˜ç®¡ç†ï¼›</li><li>åœ¨æ•°æ®é“¾è·¯å±‚å¯é‡‡ç”¨é‡ä¼ ç­–ç•¥ã€ä¹±åºç¼“å­˜ç­–ç•¥ã€ç¡®è®¤ç­–ç•¥å’Œæµæ§åˆ¶ç­–ç•¥ã€‚</li></ol><h3 id="0x0302-å®éªŒæµç¨‹"><a href="#0x0302-å®éªŒæµç¨‹" class="headerlink" title="0x0302 å®éªŒæµç¨‹"></a>0x0302 å®éªŒæµç¨‹</h3><p><strong>ï¼ˆ1ï¼‰æ‰“å¼€ Wiresharkï¼ŒåŠ è½½å®è®­æ–‡ä»¶å¤¹ä¸­çš„tcp-ethereal-trace-1æ–‡ä»¶ï¼›</strong></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220412125057849.png" alt="image-20220412125057849"></p><p><strong>ï¼ˆ2ï¼‰ä½¿ç”¨å‘½ä»¤ip.dst&#x3D;&#x3D;128.119.245.12è¿›è¡Œç­›é€‰ï¼›</strong></p><p>å¦‚ä¸‹å›¾æ‰€ç¤º:</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220412135132694.png" alt="image-20220412135132694"></p><p><strong>ï¼ˆ3ï¼‰é€‰ä¸­ä¸€æ¡æ•°æ®æŠ¥ï¼Œç‚¹å‡»ç»Ÿè®¡ï¼ˆ Statistic sï¼‰-&gt; TCP æµå›¾å½¢-&gt;æ—¶é—´åºåˆ—ï¼ˆ Stevens ï¼‰ï¼Œè§‚å¯Ÿå›¾å½¢ã€‚åˆ¤æ–­æ­¤æ–‡ä»¶ä¸­æ˜¯å¦æœ‰é‡ä¼ çš„åŒºæ®µï¼ˆåºåˆ—å·ä¸€ç›´å¢å¤§åˆ™æ— ï¼Œåä¹‹åˆ™æœ‰ï¼‰ï¼Œå¡«å†™åˆ° txt æ–‡ä»¶ä¸­ï¼›</strong></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220412135306721.png" alt="image-20220412135306721"></p><p>å›¾åƒä¸ºä¸€ç›´å¢å¤§,æ‰€ä»¥æ²¡æœ‰å‘ç”Ÿé‡ä¼ .</p><p><strong>ï¼ˆ4ï¼‰ä½¿ç”¨ http å‘½ä»¤ç­›é€‰æ•°æ®æŠ¥ï¼ŒæŸ¥çœ‹æ•°æ®ä¼ è¾“å¤§å°ä»¥åŠä½¿ç”¨æ—¶é—´ï¼Œè®¡ç®— TCP é“¾æ¥çš„ååé‡ï¼ˆkb&#x2F;sã€ç»“æœä¿ç•™æ•´æ•°ï¼‰ï¼Œå¡«å†™åˆ° txt æ–‡ä»¶ä¸­ã€‚</strong></p><blockquote><p>æ³¨ï¼šååé‡&#x3D;æ•°æ®ä¼ è¾“å¤§å°&#x2F;æ‰€ç”¨æ—¶é—´ã€‚</p></blockquote><p>é¦–å…ˆè¾“å…¥<code>http</code>ç­›é€‰HTTPæŠ¥æ–‡, å¦‚ä¸‹æ‰€ç¤º:</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220412135454021.png" alt="image-20220412135454021"></p><p>ç‚¹å¼€ç¬¬ä¸€ä¸ªhttpæŠ¥æ–‡(ç¬¬äºŒä¸ªä¸ºå“åº”æŠ¥æ–‡, è¿™é‡Œç”¨ä¸ä¸Š), æŸ¥çœ‹æ•°æ®éƒ¨åˆ†çš„<code>æ•°æ®ä¼ è¾“å¤§å°</code>(<strong>Reassembled TCP length</strong>), å¦‚ä¸‹æ‰€ç¤º:</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220412135801992.png" alt="image-20220412135801992"></p><p>ç¬¬äºŒæ­¥å°±æ˜¯æŸ¥çœ‹<code>æ‰€ç”¨æ—¶é—´</code>, åœ¨TCPæ®µä¸­æ‰¾åˆ°<code>[Timestamps]</code>,å¦‚ä¸‹æ‰€ç¤º:</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220412140245270.png" alt="image-20220412140245270"></p><p>ç»¼ä¸Šæ‰€è¿°, å¾—åˆ°:</p><ul><li>æ•°æ®ä¼ è¾“å¤§å° &#x3D;$164090(bits)$</li><li>æ‰€ç”¨æ—¶é—´ &#x3D; $5.297341000(seconds)$</li><li>$\therefore$ ååé‡ &#x3D; $\cfrac{164090}{5.2973410\cdot1024}&#x3D;30.24991984â‰ˆ30$ (ä¿ç•™æ•´æ•°)</li></ul><h3 id="0x0303-æœ€ç»ˆç»“æœ"><a href="#0x0303-æœ€ç»ˆç»“æœ" class="headerlink" title="0x0303 æœ€ç»ˆç»“æœ"></a>0x0303 æœ€ç»ˆç»“æœ</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ–‡ä»¶ä¸­æ˜¯å¦æœ‰é‡ä¼ çš„åŒºæ®µï¼ˆå¡«å†™&quot;æ˜¯/å¦&quot;ï¼‰ï¼šå¦</span><br><span class="line">TCPé“¾æ¥çš„ååé‡ï¼š30</span><br></pre></td></tr></table></figure><h2 id="0x04-UDP-åŒ…åˆ†æ"><a href="#0x04-UDP-åŒ…åˆ†æ" class="headerlink" title="0x04 UDP åŒ…åˆ†æ"></a>0x04 UDP åŒ…åˆ†æ</h2><h3 id="0x0401-ç›¸å…³çŸ¥è¯†"><a href="#0x0401-ç›¸å…³çŸ¥è¯†" class="headerlink" title="0x0401 ç›¸å…³çŸ¥è¯†"></a>0x0401 ç›¸å…³çŸ¥è¯†</h3><p>ä¸ºäº†æ›´å¥½æŒæ¡æœ¬ç« å†…å®¹ï¼Œä½ éœ€è¦äº†è§£çš„æœ‰ï¼š  </p><ol><li>UDP æŠ¥æ–‡çš„ç®€ä»‹ï¼›</li><li>UDP æŠ¥æ–‡æ ¼å¼ï¼›</li><li>Wireshark è½¯ä»¶ä¸­çš„ UDP æŠ“åŒ…åˆ†æã€‚</li></ol><p><strong>UDP ç®€ä»‹</strong></p><p>UDPï¼ˆUser Datagram Protocolï¼‰ï¼Œç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼Œæ˜¯ OSIï¼ˆOpen System Interconnectionï¼Œå¼€æ”¾å¼ç³»ç»Ÿäº’è”ï¼‰ å‚è€ƒæ¨¡å‹ä¸­ä¸€ç§æ— è¿æ¥çš„ä¼ è¾“å±‚åè®®ï¼Œæä¾›é¢å‘äº‹åŠ¡çš„ç®€å•ä¸å¯é ä¿¡æ¯ä¼ é€æœåŠ¡ã€‚<br>UDP åè®®ä¸ TCP åè®®ä¸€æ ·ç”¨äºå¤„ç†æ•°æ®åŒ…ï¼Œåœ¨ OSI æ¨¡å‹ä¸­ï¼Œä¸¤è€…éƒ½ä½äºä¼ è¾“å±‚ï¼Œå¤„äº IP åè®®çš„ä¸Šä¸€å±‚ã€‚UDP æœ‰ä¸æä¾›æ•°æ®åŒ…åˆ†ç»„ã€ç»„è£…å’Œä¸èƒ½å¯¹æ•°æ®åŒ…è¿›è¡Œæ’åºçš„ç¼ºç‚¹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æŠ¥æ–‡å‘é€ä¹‹åï¼Œæ˜¯æ— æ³•å¾—çŸ¥å…¶æ˜¯å¦å®‰å…¨å®Œæ•´åˆ°è¾¾çš„ã€‚</p><p>è®¸å¤šåº”ç”¨åªæ”¯æŒ UDP ï¼Œå®ƒä¸äº§ç”Ÿä»»ä½•é¢å¤–çš„æ•°æ®ï¼Œå³ä½¿çŸ¥é“æœ‰ç ´åçš„åŒ…ä¹Ÿä¸è¿›è¡Œé‡å‘ã€‚å½“å¼ºè°ƒä¼ è¾“æ€§èƒ½è€Œä¸æ˜¯ä¼ è¾“çš„å®Œæ•´æ€§æ—¶ï¼Œå¦‚éŸ³é¢‘å’Œå¤šåª’ä½“åº”ç”¨ï¼ŒUDP æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚æ•°æ®ä¼ è¾“æ—¶é—´å¾ˆçŸ­ï¼Œä»¥è‡³äºæ­¤å‰çš„è¿æ¥è¿‡ç¨‹æˆä¸ºæ•´ä¸ªæµé‡ä¸»ä½“çš„æƒ…å†µä¸‹ï¼ŒUDP ä¹Ÿæ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ã€‚</p><p><strong>UDP æŠ¥æ–‡æ ¼å¼</strong></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/583435.png" alt="é¢„è§ˆå¤§å›¾"></p><p>UDP é¦–éƒ¨æœ‰ 8 ä¸ªå­—èŠ‚ï¼Œç”± 4 ä¸ªå­—æ®µæ„æˆï¼Œæ¯ä¸ªå­—æ®µéƒ½æ˜¯ä¸¤ä¸ªå­—èŠ‚ï¼š </p><ul><li><p><code>æºç«¯å£</code>ï¼š æºç«¯å£å·ï¼Œéœ€è¦å¯¹æ–¹å›ä¿¡æ—¶é€‰ç”¨ï¼Œä¸éœ€è¦æ—¶å…¨éƒ¨ç½® 0 ï¼›</p></li><li><p><code>ç›®çš„ç«¯å£</code>ï¼šç›®çš„ç«¯å£å·ï¼Œåœ¨ç»ˆç‚¹äº¤ä»˜æŠ¥æ–‡çš„æ—¶å€™éœ€è¦ç”¨åˆ°ï¼›</p></li></ul><blockquote><p>æ³¨ï¼šç«¯å£æ˜¯ç”¨æ¥æŒ‡æ˜æ•°æ®çš„æ¥æºï¼ˆåº”ç”¨ç¨‹åºï¼‰ä»¥åŠæ•°æ®å‘å¾€çš„ç›®çš„åœ°ï¼ˆåŒæ ·æ˜¯åº”ç”¨ç¨‹åºï¼‰ã€‚</p><p>å­—æ®µåŒ…å«äº† 16 æ¯”ç‰¹çš„ UDP åè®®ç«¯å£å·ï¼Œå®ƒä½¿å¾—å¤šä¸ªåº”ç”¨ç¨‹åºå¯ä»¥å¤šè·¯å¤ç”¨åŒä¸€ä¸ªä¼ è¾“å±‚åè®®åŠ UDP åè®®ï¼Œ<br>ä»…é€šè¿‡ç«¯å£å·æ¥åŒºåˆ†ä¸åŒçš„åº”ç”¨ç¨‹åºã€‚</p></blockquote><ul><li><code>é•¿åº¦</code>ï¼šUDP çš„æ•°æ®æŠ¥çš„é•¿åº¦ï¼ˆåŒ…æ‹¬é¦–éƒ¨å’Œæ•°æ®ï¼‰å…¶æœ€å°å€¼ä¸º 8ï¼ˆåªæœ‰é¦–éƒ¨ï¼‰ã€‚å­—æ®µè®°å½•äº†è¯¥ UDP æ•°æ®åŒ…çš„æ€»é•¿åº¦ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ï¼ŒåŒ…æ‹¬ 8 å­—èŠ‚çš„ UDP å¤´å’Œå…¶åçš„æ•°æ®éƒ¨åˆ†ã€‚æœ€å°å€¼æ˜¯ 8ï¼ˆæŠ¥æ–‡å¤´çš„é•¿åº¦ï¼‰ï¼Œæœ€å¤§å€¼ä¸º 65535 å­—èŠ‚ï¼›</li><li><code>æ ¡éªŒå’Œ</code>ï¼šæ£€æµ‹ UDP æ•°æ®æŠ¥åœ¨ä¼ è¾“ä¸­æ˜¯å¦æœ‰é”™ï¼Œæœ‰é”™åˆ™ä¸¢å¼ƒã€‚å®ƒçš„å€¼æ˜¯é€šè¿‡è®¡ç®— UDP æ•°æ®æŠ¥åŠä¸€ä¸ªä¼ªåŒ…å¤´è€Œå¾—åˆ°çš„ã€‚æ ¡éªŒå’Œçš„è®¡ç®—æ–¹æ³•ä¸é€šç”¨çš„ä¸€æ ·ï¼Œéƒ½æ˜¯ç´¯åŠ æ±‚å’Œã€‚</li></ul><p><strong>UDP æ ¡éªŒå’Œçš„è®¡ç®—</strong></p><blockquote><p><strong>åŸç†</strong>:<br>å¯¹å‘é€æ–¹çš„ UDP æŠ¥æ–‡æ®µçš„æ‰€æœ‰ 16 æ¯”ç‰¹å­—çš„å’Œè¿›è¡Œåç è¿ç®—ï¼Œå½“æ±‚å’Œé‡è§æº¢å‡ºçš„æ—¶å€™ï¼Œè¿›è¡Œå›å·ï¼ˆå›å·çš„è¡¥å……åœ¨ä¸‹é¢ï¼‰ï¼Œå¾—åˆ°çš„ç»“æœæ”¾åœ¨ UDP æŠ¥æ–‡æ®µä¸­çš„æ ¡éªŒå’Œå­—æ®µã€‚</p></blockquote><p>UDP æ ¡éªŒçš„æ‰€éœ€ä¿¡æ¯:<br>  ï¼ˆ1ï¼‰UDP ä¼ªé¦–éƒ¨ï¼š<code>æº IP + ç›®çš„ IP + Byte 0 + Byte17 + UDP é•¿åº¦</code>ï¼Œç›®çš„æ˜¯è®© UDP ä¸¤æ¬¡æ£€æŸ¥æ•°æ®æ˜¯å¦ä»¥åŠæ­£ç¡®åˆ°è¾¾ç›®çš„åœ°ï¼Œåªæ˜¯å•çº¯ä¸ºäº†åšæ ¡éªŒç”¨ï¼›<br>  ï¼ˆ2ï¼‰UDP é¦–éƒ¨ï¼šè¯¥é•¿åº¦ä¸æ˜¯æŠ¥æ–‡çš„æ€»é•¿åº¦ï¼Œè€Œæ˜¯ UDPï¼ˆåŒ…æ‹¬ UDP å¤´å’Œæ•°æ®éƒ¨åˆ†ï¼‰çš„æ€»é•¿åº¦ï¼›<br>  ï¼ˆ3ï¼‰UDP çš„æ•°æ®éƒ¨åˆ†ã€‚</p><p>è®¡ç®—æ­¥éª¤:<br>ï¼ˆ1ï¼‰æŠŠä¼ªé¦–éƒ¨æ·»åŠ åˆ° <code>UDP</code> ä¸Šï¼›<br>ï¼ˆ2ï¼‰è®¡ç®—åˆå§‹æ—¶å°†æ ¡éªŒå’Œå­—æ®µæ·»é›¶ï¼›<br>ï¼ˆ3ï¼‰æŠŠæ‰€æœ‰ä½åˆ’åˆ†ä¸º <code>16 ä½</code>ï¼ˆ 2 å­—èŠ‚ï¼‰çš„å­—ï¼›<br>ï¼ˆ4ï¼‰æŠŠæ‰€æœ‰ 16 ä½çš„å­—ç›¸åŠ ï¼Œå¦‚æœé‡åˆ°è¿›ä½ï¼Œåˆ™å°†é«˜äº 16 å­—èŠ‚çš„è¿›ä½éƒ¨åˆ†çš„å€¼åŠ åˆ°æœ€ä½ä½ä¸Šï¼›<br>ï¼ˆ5ï¼‰å°†æ‰€æœ‰å­—ç›¸åŠ å¾—åˆ°çš„ç»“æœåº”è¯¥ä¸ºä¸€ä¸ª 16 ä½çš„æ•°ï¼Œå°†è¯¥æ•°æŒ‰ä½å–ååˆ™å¯ä»¥å¾—åˆ°<code>æ ¡éªŒå’Œ</code>ã€‚</p><p>åœ¨è®¡ç®—æ ¡éªŒå’Œçš„æ—¶å€™ï¼Œéœ€è¦åœ¨ UDP æ•°æ®æŠ¥ä¹‹å‰å¢åŠ  12 å­—èŠ‚çš„ä¼ªé¦–éƒ¨ï¼Œä¼ªé¦–éƒ¨å¹¶ä¸æ˜¯ UDP çœŸæ­£çš„é¦–éƒ¨ã€‚åªæ˜¯åœ¨è®¡ç®—æ ¡éªŒå’Œï¼Œä¸´æ—¶æ·»åŠ åœ¨ UDP æ•°æ®æŠ¥çš„å‰é¢ï¼Œå¾—åˆ°ä¸€ä¸ªä¸´æ—¶çš„ UDP æ•°æ®æŠ¥ã€‚æ ¡éªŒå’Œå°±æ˜¯æŒ‰ç…§è¿™ä¸ªä¸´æ—¶çš„ UDP æ•°æ®æŠ¥è®¡ç®—çš„ã€‚<br>ä¼ªé¦–éƒ¨æ—¢ä¸å‘ä¸‹ä¼ é€ä¹Ÿä¸å‘ä¸Šé€’äº¤ï¼Œè€Œä»…ä»…æ˜¯ä¸ºäº†è®¡ç®—æ ¡éªŒå’Œã€‚<br>è¿™æ ·çš„æ ¡éªŒå’Œï¼Œæ—¢æ£€æŸ¥äº†<code> UDP æ•°æ®æŠ¥</code>ï¼Œåˆå¯¹ IP æ•°æ®æŠ¥çš„<code>æº IP åœ°å€</code>å’Œ<code>ç›®çš„ IP åœ°å€</code>è¿›è¡Œäº†æ£€éªŒã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/581700.png" alt="é¢„è§ˆå¤§å›¾"></p><p><strong>UDP ä¸ TCP å¯¹æ¯”</strong></p><p>UDP å’Œ TCP åè®®çš„ä¸»è¦åŒºåˆ«æ˜¯ä¸¤è€…åœ¨å¦‚ä½•å®ç°ä¿¡æ¯çš„å¯é ä¼ é€’æ–¹é¢ä¸åŒã€‚TCP åè®®ä¸­åŒ…å«äº†ä¸“é—¨çš„ä¼ é€’ä¿è¯æœºåˆ¶ï¼Œå½“æ•°æ®æ¥æ”¶æ–¹æ”¶åˆ°å‘é€æ–¹ä¼ æ¥çš„ä¿¡æ¯æ—¶ï¼Œä¼šè‡ªåŠ¨å‘å‘é€æ–¹å‘å‡ºç¡®è®¤æ¶ˆæ¯ã€‚å‘é€æ–¹åªæœ‰åœ¨æ¥æ”¶åˆ°è¯¥ç¡®è®¤æ¶ˆæ¯ä¹‹åæ‰ç»§ç»­ä¼ é€å…¶å®ƒä¿¡æ¯ï¼Œå¦åˆ™å°†ä¸€ç›´ç­‰å¾…ç›´åˆ°æ”¶åˆ°ç¡®è®¤ä¿¡æ¯ä¸ºæ­¢ã€‚ä¸ TCP ä¸åŒï¼ŒUDP åè®®å¹¶ä¸æä¾›æ•°æ®ä¼ é€çš„ä¿è¯æœºåˆ¶ã€‚å¦‚æœåœ¨ä»å‘é€æ–¹åˆ°æ¥æ”¶æ–¹çš„ä¼ é€’è¿‡ç¨‹ä¸­å‡ºç°æ•°æ®åŒ…çš„ä¸¢å¤±ï¼Œåè®®æœ¬èº«å¹¶ä¸èƒ½åšå‡ºä»»ä½•æ£€æµ‹æˆ–æç¤ºã€‚å› æ­¤ï¼Œé€šå¸¸äººä»¬æŠŠ UDP åè®®ç§°ä¸ºä¸å¯é çš„ä¼ è¾“åè®®ã€‚</p><ol><li><code>TCP</code>æ˜¯é¢å‘è¿æ¥çš„ä¼ è¾“æ§åˆ¶åè®®ï¼Œè€Œ<code>UDP</code>æä¾›äº†æ— è¿æ¥çš„æ•°æ®æŠ¥æœåŠ¡ï¼Œ<code>TCP</code>å…·æœ‰é«˜å¯é æ€§ï¼Œç¡®ä¿ä¼ è¾“æ•°æ®çš„æ­£ç¡®æ€§ï¼Œä¸å‡ºç°ä¸¢å¤±æˆ–ä¹±åºï¼›</li><li><code>UDP</code>åœ¨ä¼ è¾“æ•°æ®å‰ä¸å»ºç«‹è¿æ¥ï¼Œä¸å¯¹æ•°æ®æŠ¥è¿›è¡Œæ£€æŸ¥ä¸ä¿®æ”¹ï¼Œæ— é¡»ç­‰å¾…å¯¹æ–¹çš„åº”ç­”ï¼Œæ‰€ä»¥ä¼šå‡ºç°åˆ†ç»„ä¸¢å¤±ã€é‡å¤ã€ä¹±åºï¼Œåº”ç”¨ç¨‹åºéœ€è¦è´Ÿè´£ä¼ è¾“å¯é æ€§æ–¹é¢çš„æ‰€æœ‰å·¥ä½œï¼›</li><li><code>UDP</code>å…·æœ‰è¾ƒå¥½çš„å®æ—¶æ€§ï¼Œå·¥ä½œæ•ˆç‡è¾ƒ<code>TCP</code>åè®®é«˜ï¼›</li><li><code>UDP</code>æ®µç»“æ„æ¯”<code>TCP</code>çš„æ®µç»“æ„ç®€å•ï¼Œå› æ­¤ç½‘ç»œå¼€é”€ä¹Ÿå°ï¼›</li><li><code>TCP</code>åè®®å¯ä»¥ä¿è¯æ¥æ”¶ç«¯æ¯«æ— å·®é”™åœ°æ¥æ”¶åˆ°å‘é€ç«¯å‘å‡ºçš„å­—èŠ‚æµï¼Œä¸ºåº”ç”¨ç¨‹åºæä¾›å¯é çš„é€šä¿¡æœåŠ¡ã€‚å¯¹å¯é æ€§è¦æ±‚é«˜çš„é€šä¿¡ç³»ç»Ÿå¾€å¾€ä½¿ç”¨<code>TCP</code>ä¼ è¾“æ•°æ®ã€‚</li></ol><h3 id="0x0402-å®éªŒæµç¨‹"><a href="#0x0402-å®éªŒæµç¨‹" class="headerlink" title="0x0402 å®éªŒæµç¨‹"></a>0x0402 å®éªŒæµç¨‹</h3><p><strong>ï¼ˆ1ï¼‰æ‰“å¼€ Wiresharkï¼ŒåŠ è½½å®è®­æ–‡ä»¶å¤¹ä¸­çš„<code>http-ethereal-trace-5</code>æ–‡ä»¶ï¼Œç­›é€‰ UDP æ•°æ®åŒ…ï¼›</strong></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220412142104777.png" alt="image-20220412142104777"></p><p><strong>ï¼ˆ2ï¼‰ä»è·Ÿè¸ªä¸­é€‰æ‹©ä¸€ä¸ª UDP æ•°æ®åŒ…ã€‚æ‰“å¼€è¯¥æ•°æ®åŒ…ï¼ŒæŸ¥çœ‹ UDP æ ‡å¤´ä¸­çš„å››ä¸ªå­—æ®µçš„åç§°ï¼Œå¹¶å°†è¿™å››ä¸ªå­—æ®µçš„åç§°å†™å…¥ txt æ–‡ä»¶ï¼ˆç”¨â€œ;â€åˆ†éš”ï¼‰ï¼›</strong></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220412142141282.png" alt="image-20220412142141282"></p><p>å¦‚å›¾æ‰€ç¤º, UDP(User Datagram Protocal)æ ‡å¤´çš„å››ä¸ªå­—æ®µåˆ†åˆ«ä¸º:</p><ul><li>Source Port <code>æºç«¯å£</code></li><li>Destination Port <code>ç›®çš„ç«¯å£</code></li><li>Length <code>é•¿åº¦</code></li><li>Checksum <code>æ ¡éªŒå’Œ</code></li></ul><p><strong>ï¼ˆ3ï¼‰UDP æ ‡å¤´çš„å››ä¸ªå­—æ®µæ€»å…±æœ‰å¤šå°‘å­—èŠ‚ï¼Œå°†ä¿¡æ¯å†™å…¥ txt æ–‡ä»¶ï¼›</strong></p><p>æ ¹æ®UDPæŠ¥æ–‡æ ¼å¼:</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/583435-20220412142343712.png" alt="é¢„è§ˆå¤§å›¾"></p><p>å¯ä»¥å¾—åˆ°ä¸Šè¿°UDPæ ‡å¤´å››ä¸ªå­—æ®µæ€»å…±æœ‰ 2+2+2+2 &#x3D; 8 ä¸ªå­—èŠ‚.</p><p><strong>ï¼ˆ4ï¼‰ä» IPV4ï¼ˆInternet Protocol Version4ï¼‰ä¸­æ‰¾åˆ° UDP çš„åè®®å·æ˜¯å¤šå°‘ï¼Œå°†ä¿¡æ¯å†™å…¥ txt æ–‡ä»¶ï¼›</strong></p><p>å¦‚å›¾æ‰€ç¤º:</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220412142504747.png" alt="image-20220412142504747"></p><p> UDP çš„åè®®å·ä¸º: <strong>17</strong></p><h3 id="0x0403-æœ€ç»ˆç»“æœ"><a href="#0x0403-æœ€ç»ˆç»“æœ" class="headerlink" title="0x0403 æœ€ç»ˆç»“æœ"></a>0x0403 æœ€ç»ˆç»“æœ</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å››ä¸ªå­—æ®µåç§°ï¼ˆé¦–å­—æ¯å¤§å†™ï¼‰ï¼šSource Port;Destination Port;Length;Checksum</span><br><span class="line">å››ä¸ªå­—æ®µæ€»å…±æœ‰å¤šå°‘å­—èŠ‚ï¼š8</span><br><span class="line">IPV4ä¸­æ‰¾åˆ°UDPçš„åè®®å·æ˜¯ï¼š17</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå®‰å…¨ </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå®‰å…¨ </tag>
            
            <tag> ç½‘ç»œåè®®åˆ†æ </tag>
            
            <tag> ä¼ è¾“å±‚ </tag>
            
            <tag> TCP </tag>
            
            <tag> UDP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[æ•°æ®ç»“æ„]å¾ªç¯é“¾è¡¨</title>
      <link href="/2022/04/12/5d38b39c2237-q1jun/"/>
      <url>/2022/04/12/5d38b39c2237-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="å¾ªç¯é“¾è¡¨-Circular-LinkList"><a href="#å¾ªç¯é“¾è¡¨-Circular-LinkList" class="headerlink" title="å¾ªç¯é“¾è¡¨(Circular LinkList)"></a>å¾ªç¯é“¾è¡¨(Circular LinkList)</h1><p>å¾ªç¯é“¾è¡¨æœ‰ä»¥ä¸‹ä¸¤ç§:</p><ul><li>å¾ªç¯å•é“¾è¡¨: ä»ä¸€ä¸ªç»“ç‚¹å‡ºå‘åªèƒ½æ‰¾åˆ°åç»­çš„å„ä¸ªç»“ç‚¹.</li><li>å¾ªç¯åŒé“¾è¡¨: ä»ä¸€ä¸ªç»“ç‚¹å‡ºå‘å¯ä»¥æ‰¾åˆ°å…¶ä»–ä»»ä½•ä¸€ä¸ªç»“ç‚¹.</li></ul><h2 id="0x01-å¾ªç¯å•é“¾è¡¨"><a href="#0x01-å¾ªç¯å•é“¾è¡¨" class="headerlink" title="0x01 å¾ªç¯å•é“¾è¡¨"></a>0x01 å¾ªç¯å•é“¾è¡¨</h2><blockquote><p>å•é“¾è¡¨å’Œå¾ªç¯å•é“¾è¡¨çš„åŒºåˆ«:</p><ul><li>å•é“¾è¡¨: è¡¨å°¾ç»“ç‚¹çš„nextæŒ‡é’ˆæŒ‡å‘NULL</li><li>å¾ªç¯å•é“¾è¡¨: è¡¨å°¾ç»“ç‚¹çš„nextæŒ‡é’ˆæŒ‡å‘å¤´ç»“ç‚¹</li></ul></blockquote><p>å¾ªç¯å•é“¾è¡¨çš„å®šä¹‰å’Œå•é“¾è¡¨ä¸€æ ·, å¦‚ä¸‹æ‰€ç¤º:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">LNode</span>&#123;</span><span class="comment">//å®šä¹‰å•é“¾è¡¨ç»“ç‚¹ç±»å‹</span></span><br><span class="line">  ElemType data;<span class="comment">//æ¯ä¸ªèŠ‚ç‚¹å­˜æ”¾ä¸€ä¸ªæ•°æ®å…ƒç´ </span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">LNode</span> *<span class="title">next</span>;</span> <span class="comment">//æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">LNode</span> <span class="title">LNode</span>;</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">LNode</span> *<span class="title">LinkList</span>;</span></span><br></pre></td></tr></table></figure><p>æˆ–è€…,</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">LNode</span>&#123;</span> <span class="comment">//å®šä¹‰å•é“¾è¡¨ç»“ç‚¹ç±»å‹</span></span><br><span class="line">  ElemType data;<span class="comment">//æ¯ä¸ªèŠ‚ç‚¹å­˜æ”¾ä¸€ä¸ªæ•°æ®å…ƒç´ </span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">LNode</span> *<span class="title">next</span>;</span> <span class="comment">//æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">&#125;LNode, *LinkList;</span><br></pre></td></tr></table></figure><p>ä¸¤è€…ç­‰ä»·ã€‚</p><h3 id="0x0101-å¾ªç¯å•é“¾è¡¨çš„åˆå§‹åŒ–"><a href="#0x0101-å¾ªç¯å•é“¾è¡¨çš„åˆå§‹åŒ–" class="headerlink" title="0x0101 å¾ªç¯å•é“¾è¡¨çš„åˆå§‹åŒ–"></a>0x0101 å¾ªç¯å•é“¾è¡¨çš„åˆå§‹åŒ–</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: åˆå§‹åŒ–ä¸€ä¸ªå¾ªç¯å•é“¾è¡¨</span></span><br><span class="line"><span class="comment"> * @param &#123;LinkList&amp;&#125; L</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">InitList</span><span class="params">(LinkList&amp; L)</span> &#123;</span><br><span class="line">    L = (LNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode)); <span class="comment">//åˆ†é…ä¸€ä¸ªå¤´ç»“ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (L == <span class="literal">NULL</span>) <span class="comment">//å†…å­˜ä¸è¶³åˆ†é…å¤±è´¥</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    L-&gt;next = L; <span class="comment">//å¤´ç»“ç‚¹nextæŒ‡å‘å¤´ç»“ç‚¹</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆå§‹åŒ–: å¤´ç»“ç‚¹çš„nextæŒ‡é’ˆæŒ‡å‘è‡ªå·±.</p><h3 id="0x0102-å¾ªç¯å•é“¾è¡¨çš„åˆ¤ç©º"><a href="#0x0102-å¾ªç¯å•é“¾è¡¨çš„åˆ¤ç©º" class="headerlink" title="0x0102 å¾ªç¯å•é“¾è¡¨çš„åˆ¤ç©º"></a>0x0102 å¾ªç¯å•é“¾è¡¨çš„åˆ¤ç©º</h3><p>æ‰€ä»¥åˆ¤æ–­ä¸€ä¸ªå¾ªç¯å•é“¾è¡¨æ˜¯å¦ä¸ºç©ºå€¼æ—¶åªéœ€è¦åˆ¤æ–­æ˜¯å¦ <code>L-&gt;next == L</code>å³å¯(å¤´ç»“ç‚¹çš„nextæŒ‡é’ˆæŒ‡å‘è‡ªå·±).</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: åˆ¤æ–­ä¸€ä¸ªå¾ªç¯å•é“¾è¡¨æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="comment"> * @param &#123;LinkList&#125; L</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">isEmpty</span><span class="params">(LinkList L)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (L-&gt;next == L)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="0x0103-å¾ªç¯å•é“¾è¡¨çš„åˆ¤å°¾"><a href="#0x0103-å¾ªç¯å•é“¾è¡¨çš„åˆ¤å°¾" class="headerlink" title="0x0103 å¾ªç¯å•é“¾è¡¨çš„åˆ¤å°¾"></a>0x0103 å¾ªç¯å•é“¾è¡¨çš„åˆ¤å°¾</h3><p>åŒç†, åˆ¤æ–­ä¸€ä¸ªç»“ç‚¹æ˜¯å¦ä¸ºå¾ªç¯å•é“¾è¡¨çš„è¡¨å°¾ç»“ç‚¹åªéœ€è¦åˆ¤æ–­:</p><ul><li>è¯¥ç»“ç‚¹çš„nextæŒ‡é’ˆæ˜¯å¦æŒ‡å‘å¤´ç»“ç‚¹</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: åˆ¤æ–­ç»“ç‚¹pæ˜¯å¦ä¸ºå¾ªç¯å•é“¾è¡¨çš„è¡¨å°¾ç»“ç‚¹</span></span><br><span class="line"><span class="comment"> * @param &#123;LinkList&#125; L</span></span><br><span class="line"><span class="comment"> * @param &#123;LNode*&#125; p</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">isTail</span><span class="params">(LinkList L, LNode* p)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (p-&gt;next == L)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¾ªç¯å•é“¾è¡¨çš„æ’å…¥å’Œåˆ é™¤æ“ä½œå’Œå•é“¾è¡¨ç±»ä¼¼, ç”±äºç¯‡å¹…ä¸å®œè¿‡é•¿, å°±ä¸å±•å¼€å™è¿°äº†.</p><h2 id="0x02-å¾ªç¯åŒé“¾è¡¨"><a href="#0x02-å¾ªç¯åŒé“¾è¡¨" class="headerlink" title="0x02 å¾ªç¯åŒé“¾è¡¨"></a>0x02 å¾ªç¯åŒé“¾è¡¨</h2><blockquote><p>åŒé“¾è¡¨å’Œå¾ªç¯åŒé“¾è¡¨çš„åŒºåˆ«:</p><ul><li>åŒé“¾è¡¨:<ul><li>è¡¨å¤´ç»“ç‚¹çš„prioræŒ‡å‘NULL</li><li>è¡¨å°¾ç»“ç‚¹çš„nextæŒ‡å‘NULL</li></ul></li><li>å¾ªç¯åŒé“¾è¡¨:<ul><li>è¡¨å¤´ç»“ç‚¹çš„prioræŒ‡å‘è¡¨å°¾ç»“ç‚¹</li><li>è¡¨å°¾ç»“ç‚¹çš„nextæŒ‡å‘è¡¨å¤´ç»“ç‚¹</li></ul></li></ul></blockquote><p>å¾ªç¯åŒé“¾è¡¨çš„å®šä¹‰å’ŒåŒé“¾è¡¨ä¸€æ ·, å¦‚ä¸‹æ‰€ç¤º: </p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">DNode</span> &#123;</span> <span class="comment">//å®šä¹‰åŒé“¾è¡¨ç»“ç‚¹ç±»å‹</span></span><br><span class="line">    <span class="type">int</span> data; <span class="comment">//æ•°æ®åŸŸ</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">DNode</span>* <span class="title">prior</span>, * <span class="title">next</span>;</span> <span class="comment">//å‰é©±æŒ‡é’ˆå’Œåç»§æŒ‡é’ˆ</span></span><br><span class="line">&#125;DNode, * DLinklist;</span><br></pre></td></tr></table></figure><p>æˆ–è€…:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">DNode</span> &#123;</span> <span class="comment">//å®šä¹‰åŒé“¾è¡¨ç»“ç‚¹ç±»å‹</span></span><br><span class="line">    <span class="type">int</span> data; <span class="comment">//æ•°æ®åŸŸ</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">DNode</span>* <span class="title">prior</span>, * <span class="title">next</span>;</span> <span class="comment">//å‰é©±æŒ‡é’ˆå’Œåç»§æŒ‡é’ˆ</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">DNode</span> <span class="title">Dnode</span>;</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">DNode</span> * <span class="title">DLinklist</span>;</span></span><br></pre></td></tr></table></figure><p>ä¸¤è€…ç­‰ä»·.</p><h3 id="0x0201-å¾ªç¯åŒé“¾è¡¨çš„åˆå§‹åŒ–"><a href="#0x0201-å¾ªç¯åŒé“¾è¡¨çš„åˆå§‹åŒ–" class="headerlink" title="0x0201 å¾ªç¯åŒé“¾è¡¨çš„åˆå§‹åŒ–"></a>0x0201 å¾ªç¯åŒé“¾è¡¨çš„åˆå§‹åŒ–</h3><p>åˆå§‹åŒ–ä¸€ä¸ªå¾ªç¯åŒé“¾è¡¨: å¤´ç»“ç‚¹çš„<code>prioræŒ‡é’ˆ</code>æŒ‡å‘å¤´ç»“ç‚¹, ä¸”å¤´ç»“ç‚¹çš„<code>nextæŒ‡é’ˆ</code>ä¹ŸæŒ‡å‘å¤´ç»“ç‚¹.</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @description: åˆå§‹åŒ–ç©ºçš„å¾ªç¯åŒé“¾è¡¨</span></span><br><span class="line"><span class="comment"> * @param &#123;DLinklist&amp;&#125; L</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">InitDLinkList</span><span class="params">(DLinklist&amp; L)</span> &#123;</span><br><span class="line">    L = (DNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(DNode)); <span class="comment">//åˆ†é…ä¸€ä¸ªå¤´ç»“ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (L == <span class="literal">NULL</span>) <span class="comment">//å†…å­˜ä¸è¶³,åˆ†é…å¤±è´¥</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    L-&gt;prior = L; <span class="comment">//å¤´ç»“ç‚¹çš„prioræŒ‡å‘å¤´ç»“ç‚¹</span></span><br><span class="line">    L-&gt;next = L; <span class="comment">//å¤´ç»“ç‚¹çš„nextæŒ‡å‘å¤´ç»“ç‚¹</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="0x0202-å¾ªç¯åŒé“¾è¡¨çš„åˆ¤ç©º"><a href="#0x0202-å¾ªç¯åŒé“¾è¡¨çš„åˆ¤ç©º" class="headerlink" title="0x0202 å¾ªç¯åŒé“¾è¡¨çš„åˆ¤ç©º"></a>0x0202 å¾ªç¯åŒé“¾è¡¨çš„åˆ¤ç©º</h3><p>åˆ¤æ–­ä¸€ä¸ªå¾ªç¯åŒé“¾è¡¨æ˜¯å¦ä¸ºç©º:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @description: åˆ¤æ–­å¾ªç¯åŒé“¾è¡¨æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="comment"> * @param &#123;DLinklist&#125; L</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">isEmpty</span><span class="params">(DLinklist L)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (L-&gt;next == L)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="0x0203-å¾ªç¯åŒé“¾è¡¨çš„åˆ¤å°¾"><a href="#0x0203-å¾ªç¯åŒé“¾è¡¨çš„åˆ¤å°¾" class="headerlink" title="0x0203 å¾ªç¯åŒé“¾è¡¨çš„åˆ¤å°¾"></a>0x0203 å¾ªç¯åŒé“¾è¡¨çš„åˆ¤å°¾</h3><p>åˆ¤æ–­ä¸€ä¸ªç»“ç‚¹æ˜¯å¦ä¸ºå¾ªç¯åŒé“¾è¡¨çš„è¡¨å°¾ç»“ç‚¹:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @description: åˆ¤æ–­ç»“ç‚¹pæ˜¯å¦ä¸ºå¾ªç¯åŒé“¾è¡¨çš„è¡¨å°¾ç»“ç‚¹</span></span><br><span class="line"><span class="comment"> * @param &#123;DLinklist&#125; L</span></span><br><span class="line"><span class="comment"> * @param &#123;DNode*&#125; p</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">isTail</span><span class="params">(DLinklist L, DNode* p)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (p-&gt;next == L)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è°¢è°¢è§‚çœ‹ ğŸ˜˜</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
            <tag> ç®—æ³• </tag>
            
            <tag> Cè¯­è¨€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>EduCoder NATåè®®åˆ†æ</title>
      <link href="/2022/04/12/3cf278610c9a-q1jun/"/>
      <url>/2022/04/12/3cf278610c9a-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="EduCoder-NATåè®®åˆ†æ"><a href="#EduCoder-NATåè®®åˆ†æ" class="headerlink" title="EduCoder NATåè®®åˆ†æ"></a>EduCoder NATåè®®åˆ†æ</h1><p>å…³å¡1 : æŒæ¡æŠ“å– <code>NAT HOME</code> ç«¯å’Œ <code>NAT ISP</code> ç«¯çš„å…·ä½“æ­¥éª¤ï¼Œå¹¶ä¸”å¯¹å·²ç»æ”¶é›†åˆ°çš„ NAT HOME è¿›è¡Œåˆ†æã€‚</p><p>å…³å¡2 : å¯¹å·²ç»æ”¶é›†åˆ°çš„ <code>NAT ISP</code> è¿›è¡Œåˆ†æï¼Œåœ¨è·¯ç”±å™¨å’Œ ISP ä¹‹é—´çš„é“¾è·¯ä¸Šæ•è·çš„è·Ÿè¸ªæ–‡ä»¶<code>NAT_ISP_side</code>ä¸­æ‰¾åˆ°è¿™ä¸¤ä¸ª HTTP æ¶ˆæ¯å’Œä¸¤ä¸ª TCP æŠ¥æ–‡ã€‚</p><h2 id="0x01-NAT-HOMEåˆ†æ"><a href="#0x01-NAT-HOMEåˆ†æ" class="headerlink" title="0x01 NAT HOMEåˆ†æ"></a>0x01 NAT HOMEåˆ†æ</h2><h3 id="0x0101-ç›¸å…³çŸ¥è¯†"><a href="#0x0101-ç›¸å…³çŸ¥è¯†" class="headerlink" title="0x0101 ç›¸å…³çŸ¥è¯†"></a>0x0101 ç›¸å…³çŸ¥è¯†</h3><p>ä¸ºäº†å®Œæˆæœ¬å…³ä»»åŠ¡ï¼Œä½ éœ€è¦æŒæ¡ï¼š</p><ol><li>ç®€å•äº†è§£å®éªŒæŠ“åŒ…æ”¶é›†æ–¹æ¡ˆ.</li><li>NAT HOMEçš„ç®€å•åˆ†æ.</li></ol><h3 id="0x0102-å®éªŒæµç¨‹"><a href="#0x0102-å®éªŒæµç¨‹" class="headerlink" title="0x0102 å®éªŒæµç¨‹"></a>0x0102 å®éªŒæµç¨‹</h3><p><strong>(1) æ‰“å¼€ Wiresharkï¼ŒåŠ è½½å®è®­æ–‡ä»¶å¤¹ä¸­çš„<code>NAT_home_side</code>æ–‡ä»¶å¹¶ç­›é€‰å‡ºå…¶ä¸­çš„ HTTP æŠ¥æ–‡ï¼›</strong></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220412010311630.png" alt="image-20220412010311630"></p><p>è¿‡æ»¤å™¨ä¸­è¾“å…¥<code>http</code>ç­›é€‰HTTPæŠ¥æ–‡:</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220412010440500.png" alt="image-20220412010440500"></p><p><strong>(2) å®¢æˆ·ç«¯çš„ IP åœ°å€æ˜¯å¤šå°‘ï¼Ÿå¡«å†™åˆ°æ–‡ä»¶ä¸­ï¼›</strong></p><p>åˆ†ææ‰€ç»™æµé‡åŒ…ä¸­çš„æ•°æ®å¯çŸ¥å…¶ä¸­çš„ç§æœ‰IPåœ°å€ä¸º:  <strong>192.168.1.100</strong></p><p>æˆ–è€…é€šè¿‡Terminalè¾“å…¥æŒ‡ä»¤: <code>ifconfig</code>(Windowsä¸º<code>ipconfig</code>)å¾—åˆ°.</p><p><strong>(3)åœ¨ Wireshark è¿‡æ»¤å™¨è¾“å…¥ä»¥ä¸‹è¿‡æ»¤å¼<code>http &amp;&amp; ip.addr == 64.233.169.104 </code>;</strong></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220412010858390.png" alt="image-20220412010858390"></p><p><strong>(4)é€‰æ‹©åœ¨ 7.109267s æ—¶é—´çš„å®¢æˆ·ç«¯å‘é€åˆ° Google æœåŠ¡å™¨çš„ HTTP GETã€‚è¯·é—®æ­¤ HTTP GET çš„ IP æ•°æ®æŠ¥ä¸Šçš„æº IP åœ°å€å’Œç›®æ ‡ IP åœ°å€ä»¥åŠ TCP æºå’Œç›®æ ‡ç«¯å£æ˜¯ä»€ä¹ˆï¼Ÿå¡«å†™åˆ°æ–‡ä»¶ä¸­ï¼ˆç”¨ï¼›éš”å¼€ï¼‰ï¼›</strong></p><p>æºIPåœ°å€å’Œç›®çš„IPåœ°å€å¦‚ä¸‹:</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220412011046646.png" alt="image-20220412011046646"></p><p>TCPæ•°æ®æ®µæ®µæºç«¯å£å’Œç›®çš„ç«¯å£:</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220412011154938.png" alt="image-20220412011154938"></p><p><strong>(5)ä»€ä¹ˆæ—¶å€™ä» Google æœåŠ¡å™¨æ”¶åˆ°ç›¸åº”çš„çŠ¶æ€ç  200ã€çŠ¶æ€ OK çš„ HTTP å“åº”æ¶ˆæ¯ï¼Ÿå¡«å†™åˆ°æ–‡ä»¶ä¸­ï¼›</strong></p><p>å¯¹åº”çš„å“åº”æ¶ˆæ¯ä¸º:<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220412011259679.png" alt="image-20220412011259679"></p><p>æ‰€ä»¥æ—¶é—´ä¸º <strong>7.158797s</strong></p><p><strong>(6)æºå¸¦çŠ¶æ€ç <code>200</code>ã€çŠ¶æ€ OK çš„ HTTP å“åº”æ¶ˆæ¯çš„ IP æ•°æ®æŠ¥ä¸Šçš„æºå’Œç›®æ ‡ IP åœ°å€ä»¥åŠ TCP æºç«¯å£å’Œç›®æ ‡ç«¯å£æ˜¯ä»€ä¹ˆï¼Ÿå¡«å†™åˆ°æ–‡ä»¶ä¸­ï¼ˆç”¨ï¼›éš”å¼€ï¼Œæ³¨æ„åŒºåˆ†ä¸­è‹±æ–‡ï¼‰ï¼›</strong></p><p>å¦‚å›¾æ‰€ç¤º:<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220412011359389.png" alt="image-20220412011359389"></p><h3 id="0x0103-æœ€ç»ˆç»“æœ"><a href="#0x0103-æœ€ç»ˆç»“æœ" class="headerlink" title="0x0103 æœ€ç»ˆç»“æœ"></a>0x0103 æœ€ç»ˆç»“æœ</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å®¢æˆ·ç«¯IP: 192.168.1.100</span><br><span class="line">æºIPå’Œç«¯å£: 192.168.1.100;4335</span><br><span class="line">ç›®çš„IPå’Œç«¯å£: 64.233.169.104;80</span><br><span class="line">ä»Goog1eæœåŠ¡å™¨æ”¶åˆ°ç›¸åº”çŠ¶æ€ç 200ã€çŠ¶æ€0Kçš„HTTPå“åº”æ¶ˆæ¯çš„æ—¶é—´ï¼š7.158797s</span><br><span class="line">æºå¸¦çŠ¶æ€ç 200ã€çŠ¶æ€0Kçš„HTTPå“åº”æ¶ˆæ¯çš„IPæ•°æ®æŠ¥ä¸Šçš„æºIPåœ°å€å’Œç«¯å£:64.233.169.104;80</span><br><span class="line">æºå¸¦çŠ¶æ€ç 200ã€çŠ¶æ€0Kçš„HTTPå“åº”æ¶ˆæ¯çš„IPæ•°æ®æŠ¥ä¸Šçš„ç›®çš„IPåœ°å€å’Œç«¯å£:192.168.1.100;4335</span><br></pre></td></tr></table></figure><h2 id="0x02-NAT-ISPåˆ†æ"><a href="#0x02-NAT-ISPåˆ†æ" class="headerlink" title="0x02 NAT ISPåˆ†æ"></a>0x02 NAT ISPåˆ†æ</h2><h3 id="0x0201-ç›¸å…³çŸ¥è¯†"><a href="#0x0201-ç›¸å…³çŸ¥è¯†" class="headerlink" title="0x0201 ç›¸å…³çŸ¥è¯†"></a>0x0201 ç›¸å…³çŸ¥è¯†</h3><p>ä¸ºäº†å®Œæˆæœ¬å…³ä»»åŠ¡ï¼Œä½ éœ€è¦æŒæ¡ï¼š</p><ul><li>NAT ISP çš„ç®€å•åˆ†æã€‚</li></ul><h3 id="0x0202-å®éªŒæµç¨‹"><a href="#0x0202-å®éªŒæµç¨‹" class="headerlink" title="0x0202 å®éªŒæµç¨‹"></a>0x0202 å®éªŒæµç¨‹</h3><p><strong>ï¼ˆ1ï¼‰æ‰“å¼€ Wiresharkï¼ŒåŠ è½½å®è®­æ–‡ä»¶å¤¹ä¸­çš„<code>NAT_ISP_side</code>æ–‡ä»¶ï¼Œåœ¨è¿‡æ»¤å™¨è¾“å…¥è¿‡æ»¤å¼<code>http &amp;&amp; ip.addr == 64.233.169.104 </code>ï¼›</strong></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220412012044975.png" alt="image-20220412012044975"></p><p><strong>ï¼ˆ2ï¼‰æ‰¾åˆ°è·Ÿåˆšæ‰å®¢æˆ·ç«¯ 7.109267s åŒæ ·ç›®çš„åœ°å‘é€çš„ HTTP GET æ¶ˆæ¯ï¼Œè¯·é—®è¯¥æ¶ˆæ¯ä½•æ—¶å‡ºç°åœ¨<code>NAT_ISP_side</code>è·Ÿè¸ªæ–‡ä»¶ä¸­ï¼Ÿå¡«å†™åˆ°æ–‡ä»¶ä¸­ï¼›</strong></p><p>é€šè¿‡åˆ†ææµé‡åŒ…ä¸­çš„<code>HTTP GET</code>æ¶ˆæ¯çš„infoå¯ä»¥å¾—åˆ°åœ¨__6.069168s__å‘é€çš„æ•°æ®åŒ…ç¬¦åˆè¦æ±‚.</p><p><strong>ï¼ˆ3ï¼‰æ‰¿è½½æ­¤ HTTP GET æ¶ˆæ¯çš„ IP æ•°æ®æŠ¥çš„æºå’Œç›®çš„ IP ä»¥åŠç«¯å£æ˜¯å¤šå°‘ï¼Ÿå¡«å†™åˆ°æ–‡ä»¶ä¸­ï¼ˆç”¨ï¼›éš”å¼€ï¼Œæ³¨æ„åŒºåˆ†ä¸­è‹±æ–‡ï¼‰ï¼›</strong></p><p>å¦‚ä¸‹å›¾æ‰€ç¤º:</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220412012330466.png" alt="image-20220412012330466"></p><p><strong>ï¼ˆ4ï¼‰å¯¹æ¯”ä¸¤ä¸ªè·Ÿè¸ªæ–‡ä»¶ï¼Œå›ç­” HTTP GET æ¶ˆæ¯ä¸­çš„ä»»ä½•å­—æ®µæ˜¯å¦å·²æ›´æ”¹ï¼Ÿï¼ˆå¡«å†™â€æ˜¯&#x2F;å¦â€ï¼‰;</strong></p><p>å¯¹æ¯”ä¸¤ä¸ªæ”¶é›†åˆ°çš„è·Ÿè¸ªæ–‡ä»¶, å¯ä»¥å‘ç° HTTP GET æ¶ˆæ¯ä¸­çš„ä»»ä½•å­—æ®µéƒ½æ²¡æœ‰æ›´æ”¹, å¦‚ä¸‹å›¾æ‰€ç¤º:</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220412012619934.png" alt="image-20220412012619934"></p><h3 id="0x0203-æœ€ç»ˆç»“æœ"><a href="#0x0203-æœ€ç»ˆç»“æœ" class="headerlink" title="0x0203 æœ€ç»ˆç»“æœ"></a>0x0203 æœ€ç»ˆç»“æœ</h3><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æ¶ˆæ¯å‡ºç°åœ¨NAT_ISP_sideè·Ÿè¸ªæ–‡ä»¶çš„æ—¶é—´æ˜¯ï¼š6.069168s</span><br><span class="line">æ‰¿è½½æ­¤ HTTP GET æ¶ˆæ¯çš„ IP æ•°æ®æŠ¥çš„æºIPå’Œç«¯å£æ˜¯ï¼š71.192.34.104;4335</span><br><span class="line">æ‰¿è½½æ­¤ HTTP GET æ¶ˆæ¯çš„ IP æ•°æ®æŠ¥çš„ç›®çš„IPå’Œç«¯å£æ˜¯ï¼š64.233.169.104;80</span><br><span class="line">å¯¹æ¯”ä¸¤ä¸ªè·Ÿè¸ªæ–‡ä»¶ï¼ŒHTTP GET æ¶ˆæ¯ä¸­çš„ä»»ä½•å­—æ®µæ˜¯å¦æ›´æ”¹ï¼šå¦</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå®‰å…¨ </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå®‰å…¨ </tag>
            
            <tag> ç½‘ç»œåè®®åˆ†æ </tag>
            
            <tag> NAT </tag>
            
            <tag> ISP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[æ•°æ®ç»“æ„]åŒé“¾è¡¨</title>
      <link href="/2022/04/10/30f3ce2b2238-q1jun/"/>
      <url>/2022/04/10/30f3ce2b2238-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="åŒé“¾è¡¨-Double-LinkList"><a href="#åŒé“¾è¡¨-Double-LinkList" class="headerlink" title="åŒé“¾è¡¨(Double LinkList)"></a>åŒé“¾è¡¨(Double LinkList)</h1><p>åœ¨å•é“¾è¡¨ä¸­, æ— æ³•é€†å‘æ£€ç´¢, æœ‰æ—¶å€™ä¸å¤ªæ–¹ä¾¿, äºæ˜¯æœ‰äº†åŒé“¾è¡¨.</p><blockquote><p>å•é“¾è¡¨åªåŒ…å«æŒ‡å‘åç»§ç»“ç‚¹çš„æŒ‡é’ˆ, åŒé“¾è¡¨åˆ™æ˜¯åœ¨å•é“¾è¡¨çš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€ä¸ªæŒ‡é’ˆåŸŸ<code>prior</code>ç”¨äºæŒ‡å‘å‰é©±ç»“ç‚¹. </p></blockquote><h2 id="0x01-åŒé“¾è¡¨çš„å®šä¹‰"><a href="#0x01-åŒé“¾è¡¨çš„å®šä¹‰" class="headerlink" title="0x01 åŒé“¾è¡¨çš„å®šä¹‰"></a>0x01 åŒé“¾è¡¨çš„å®šä¹‰</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">DNode</span> &#123;</span> <span class="comment">//å®šä¹‰åŒé“¾è¡¨ç»“ç‚¹ç±»å‹</span></span><br><span class="line">    <span class="type">int</span> data; <span class="comment">//æ•°æ®åŸŸ</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">DNode</span>* <span class="title">prior</span>, * <span class="title">next</span>;</span> <span class="comment">//å‰é©±æŒ‡é’ˆå’Œåç»§æŒ‡é’ˆ</span></span><br><span class="line">&#125;DNode, * DLinklist;</span><br></pre></td></tr></table></figure><p>æˆ–è€…:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">DNode</span> &#123;</span> <span class="comment">//å®šä¹‰åŒé“¾è¡¨ç»“ç‚¹ç±»å‹</span></span><br><span class="line">    <span class="type">int</span> data; <span class="comment">//æ•°æ®åŸŸ</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">DNode</span>* <span class="title">prior</span>, * <span class="title">next</span>;</span> <span class="comment">//å‰é©±æŒ‡é’ˆå’Œåç»§æŒ‡é’ˆ</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">DNode</span> <span class="title">Dnode</span>;</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">DNode</span> * <span class="title">DLinklist</span>;</span></span><br></pre></td></tr></table></figure><p>ä¸¤è€…ç­‰ä»·.</p><h2 id="0x02-åŒé“¾è¡¨çš„åˆå§‹åŒ–"><a href="#0x02-åŒé“¾è¡¨çš„åˆå§‹åŒ–" class="headerlink" title="0x02 åŒé“¾è¡¨çš„åˆå§‹åŒ–"></a>0x02 åŒé“¾è¡¨çš„åˆå§‹åŒ–</h2><p>åŒé“¾è¡¨ä¸­æœ‰<code>å‰é©±æŒ‡é’ˆ</code>å’Œ<code>åç»§æŒ‡é’ˆ</code>, åˆå§‹åŒ–ä¸€ä¸ªåŒé“¾è¡¨æ—¶å‰é©±æŒ‡é’ˆå’Œåç»§æŒ‡é’ˆæ‰€æŒ‡å‘çš„éƒ½æ˜¯<code>NULL</code>.</p><blockquote><p>åŒé“¾è¡¨å¤´æŒ‡é’ˆçš„<code>å‰é©±æŒ‡é’ˆ</code>å’Œæœ«å°¾ç»“ç‚¹çš„<code>åç»§æŒ‡é’ˆ</code>æ‰€æŒ‡å‘çš„æ°¸è¿œä¸º<code>NULL</code>.</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> * @description: åˆå§‹åŒ–åŒé“¾è¡¨</span></span><br><span class="line"><span class="comment"> * @param &#123;DLinklist&amp;&#125; L</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">InitDLinkList</span><span class="params">(DLinklist&amp; L)</span> &#123;</span><br><span class="line">    L = (DNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(DNode)); <span class="comment">//åˆ†é…ä¸€ä¸ªå¤´ç»“ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (L == <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">//å†…å­˜ä¸è¶³, åˆ†é…å¤±è´¥</span></span><br><span class="line">    L-&gt;prior = <span class="literal">NULL</span>; <span class="comment">//å¤´ç»“ç‚¹ prior æ°¸è¿œæŒ‡å‘NULL</span></span><br><span class="line">    L-&gt;next = <span class="literal">NULL</span>; <span class="comment">//å¤´ç»“ç‚¹ä¹‹åæš‚æ—¶è¿˜æ²¡æœ‰ç»“ç‚¹æ‰€ä»¥ä¸ºNULL</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="0x03-åŒé“¾è¡¨çš„æ’å…¥"><a href="#0x03-åŒé“¾è¡¨çš„æ’å…¥" class="headerlink" title="0x03 åŒé“¾è¡¨çš„æ’å…¥"></a>0x03 åŒé“¾è¡¨çš„æ’å…¥</h2><p>ä»¥ä¸‹ä»£ç æ¼”ç¤ºçš„æ˜¯åŒé“¾è¡¨çš„åæ’æ“ä½œ, ä½†å®é™…ä¸Šåªéœ€è¦ç”¨åæ’æ“ä½œå°±èƒ½å®ŒæˆåŒé“¾è¡¨çš„ä¸€ç³»åˆ—æ’å…¥æ“ä½œ,<br>ä¾‹å¦‚ä½ å°†åœ¨æŸä¸€ä¸ªç»“ç‚¹å¤„å®ç°å‰æ’æ“ä½œæ—¶åªéœ€è¦åœ¨è¯¥ç»“ç‚¹çš„å‰ä¸€ä¸ªç»“ç‚¹(åŒé“¾è¡¨å¾ˆå®¹æ˜“æ‰¾åˆ°å‰é©±ç»“ç‚¹)ä½¿ç”¨åæ’æ“ä½œå³å¯.</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: åœ¨pç»“ç‚¹ä¹‹åæ’å…¥sç»“ç‚¹</span></span><br><span class="line"><span class="comment"> * @param &#123;DNode*&#125; p</span></span><br><span class="line"><span class="comment"> * @param &#123;DNode*&#125; s</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">InsertNextDNode</span><span class="params">(DNode* p, DNode* s)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">NULL</span> || s == <span class="literal">NULL</span>) <span class="comment">//éæ³•å‚æ•°</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    s-&gt;next = p-&gt;next; <span class="comment">//å°†ç»“ç‚¹*sæ’å…¥åˆ°ç»“ç‚¹*pä¹‹å</span></span><br><span class="line">    <span class="keyword">if</span> (p-&gt;next != <span class="literal">NULL</span>) <span class="comment">//è§£å†³å¦‚æœpç»“ç‚¹æ˜¯æœ«å°¾ç»“ç‚¹,åˆ™ä¼šå‡ºç°ç©ºæŒ‡é’ˆæŠ¥é”™çš„é—®é¢˜</span></span><br><span class="line">        p-&gt;next-&gt;prior = s;</span><br><span class="line">    s-&gt;prior = p;</span><br><span class="line">    p-&gt;next = s;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŒ‰ä½åºæ’å…¥å¯æ ¹æ®å•é“¾è¡¨çš„ä»£ç è¿›è¡Œ, åŸç†ç›¸åŒ, ä¸å†æ¼”ç¤º. (ä¸æ˜¯æ‡’ğŸ˜¤</p><h2 id="0x04-åŒé“¾è¡¨çš„åˆ é™¤"><a href="#0x04-åŒé“¾è¡¨çš„åˆ é™¤" class="headerlink" title="0x04 åŒé“¾è¡¨çš„åˆ é™¤"></a>0x04 åŒé“¾è¡¨çš„åˆ é™¤</h2><p>åˆ é™¤åŒé“¾è¡¨å…¶ä¸­ä¸€ä¸ªç»“ç‚¹çš„å®ç°ä»£ç å¦‚ä¸‹:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: åˆ é™¤ç»“ç‚¹p</span></span><br><span class="line"><span class="comment"> * @param &#123;DNode*&amp;&#125; p</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">DeleteDNode</span><span class="params">(DNode*&amp; p)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (p-&gt;next) &#123; <span class="comment">//å¦‚æœpä¸æ˜¯æœ«å°¾æŒ‡é’ˆ</span></span><br><span class="line">        p-&gt;prior-&gt;next = p-&gt;next; <span class="comment">//å°†pçš„å‰é©±ç»“ç‚¹çš„åç»§æŒ‡é’ˆæ”¹ä¸ºæŒ‡å‘pçš„åç»§ç»“ç‚¹</span></span><br><span class="line">        p-&gt;next-&gt;prior = p-&gt;prior; <span class="comment">//å°†pçš„åç»§ç»“ç‚¹çš„å‰é©±æŒ‡é’ˆæ”¹ä¸ºæŒ‡å‘pçš„å‰é©±ç»“ç‚¹</span></span><br><span class="line">        <span class="comment">//çœ‹èµ·æ¥å¾ˆç»•,å…¶å®åªæ˜¯æŠŠåŸå±äºpçš„ä¸¤ä¸ªæŒ‡é’ˆåŸŸè®©å»(ä¸ªäººè§‰å¾—è¿™æ ·å¥½ç†è§£)</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123; <span class="comment">//å¦‚æœpæ˜¯æœ«å°¾æŒ‡é’ˆ</span></span><br><span class="line">        p-&gt;prior-&gt;next = <span class="literal">NULL</span>; <span class="comment">//åªéœ€è¦æŠŠå”¯ä¸€ä¸pç›¸è¿çš„å‰é©±ç»“ç‚¹çš„åç»§æŒ‡é’ˆæ”¹ä¸ºNULLå³å¯</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">free</span>(p);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ é™¤åŒé“¾è¡¨å…¶ä¸­ä¸€ä¸ªç»“ç‚¹çš„åç»§ç»“ç‚¹:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: åˆ é™¤pç»“ç‚¹çš„åç»§ç»“ç‚¹</span></span><br><span class="line"><span class="comment"> * @param &#123;DNode*&#125; p</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">DeleteNextDNode</span><span class="params">(DNode* p)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    DNode* q = p-&gt;next; <span class="comment">//æ‰¾åˆ°pçš„åç»§ç»“ç‚¹q</span></span><br><span class="line">    <span class="keyword">if</span> (q == <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">//è‹¥pæ²¡æœ‰åç»§ç»“ç‚¹</span></span><br><span class="line">    p-&gt;next = q-&gt;next;</span><br><span class="line">    <span class="keyword">if</span> (q-&gt;next != <span class="literal">NULL</span>) <span class="comment">//åˆ¤æ–­qæ˜¯å¦ä¸ºæœ€åä¸€ä¸ªç»“ç‚¹</span></span><br><span class="line">        q-&gt;next-&gt;prior = p;</span><br><span class="line">    <span class="built_in">free</span>(q); <span class="comment">//é‡Šæ”¾ç»“ç‚¹ç©ºé—´</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">//åˆ é™¤æˆåŠŸ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½»åº•é‡Šæ”¾(é”€æ¯)ä¸€ä¸ªåŒé“¾è¡¨:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: é‡Šæ”¾(é”€æ¯)ä¸€ä¸ªåŒé“¾è¡¨</span></span><br><span class="line"><span class="comment"> * @param &#123;DLinklist&amp;&#125; L</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">DestroyList</span><span class="params">(DLinklist&amp; L)</span> &#123;</span><br><span class="line">    <span class="comment">//å¾ªç¯é‡Šæ”¾å„ä¸ªæ•°æ®ç»“ç‚¹</span></span><br><span class="line">    <span class="keyword">while</span> (L-&gt;next != <span class="literal">NULL</span>)</span><br><span class="line">        DeleteNextDNode(L);</span><br><span class="line">    <span class="built_in">free</span>(L); <span class="comment">//é‡Šæ”¾å¤´ç»“ç‚¹</span></span><br><span class="line">    L = <span class="literal">NULL</span>; <span class="comment">//å¤´æŒ‡é’ˆæŒ‡å‘NULL</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="0x05-åŒé“¾è¡¨çš„éå†"><a href="#0x05-åŒé“¾è¡¨çš„éå†" class="headerlink" title="0x05 åŒé“¾è¡¨çš„éå†"></a>0x05 åŒé“¾è¡¨çš„éå†</h2><blockquote><p>ä¸‹æ–¹æ³¨é‡Šä¸­çš„<code>//Â·Â·Â·å¯¹ç»“ç‚¹påšç›¸é‡å¤„ç†çš„ä»£ç è¡ŒÂ·Â·Â·</code>æŒ‡åœ¨æ¬¡å¯ä»¥æ·»åŠ ä¸€äº›æ“ä½œå¦‚æ‰“å°ã€è®¡æ•°ç­‰.</p></blockquote><p>åå‘éå†: </p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>( p != <span class="literal">NULL</span>)&#123;</span><br><span class="line">  <span class="comment">//Â·Â·Â·å¯¹ç»“ç‚¹påšç›¸é‡å¤„ç†çš„ä»£ç è¡ŒÂ·Â·Â·</span></span><br><span class="line">  p = p-&gt;next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‰å‘éå†:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>( p != <span class="literal">NULL</span>)&#123;</span><br><span class="line">  <span class="comment">//Â·Â·Â·å¯¹ç»“ç‚¹påšç›¸é‡å¤„ç†çš„ä»£ç è¡ŒÂ·Â·Â·</span></span><br><span class="line">  p = p-&gt;prior;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‘å‰éå†(è·³è¿‡å¤´ç»“ç‚¹):</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>( p-&gt;prior !=<span class="literal">NULL</span>)&#123;</span><br><span class="line">  <span class="comment">//Â·Â·Â·å¯¹ç»“ç‚¹påšç›¸é‡å¤„ç†çš„ä»£ç è¡ŒÂ·Â·Â·</span></span><br><span class="line">  p = p-&gt;prior;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è°¢è°¢è§‚çœ‹ ğŸ˜˜</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
            <tag> ç®—æ³• </tag>
            
            <tag> Cè¯­è¨€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[æ•°æ®ç»“æ„]çº¿æ€§è¡¨ä¸­çš„å•é“¾è¡¨</title>
      <link href="/2022/04/06/919a9f355e0d-q1jun/"/>
      <url>/2022/04/06/919a9f355e0d-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="é“¾è¡¨-Linked-List"><a href="#é“¾è¡¨-Linked-List" class="headerlink" title="é“¾è¡¨(Linked List)"></a>é“¾è¡¨(Linked List)</h1><p>é“¾è¡¨æ˜¯ç”±<code>é“¾å¼å­˜å‚¨</code>çš„æ–¹å¼å®ç°çš„é¡ºåºè¡¨ã€‚ï¼ˆä¸æ”¯æŒéšæœºå­˜å–ï¼‰</p><h2 id="0x01-å•é“¾è¡¨"><a href="#0x01-å•é“¾è¡¨" class="headerlink" title="0x01 å•é“¾è¡¨"></a>0x01 å•é“¾è¡¨</h2><blockquote><p>é¡ºåºè¡¨ï¼ˆé¡ºåºå­˜å‚¨ï¼‰ï¼š</p><ul><li>ä¼˜ç‚¹ï¼šå¯éšæœºå­˜å–ï¼Œå­˜å‚¨å¯†åº¦é«˜</li><li>ç¼ºç‚¹ï¼šè¦æ±‚å¤§ç‰‡è¿ç»­ç©ºé—´ï¼Œæ”¹å˜å®¹é‡ä¸æ–¹ä¾¿</li></ul><p>å•é“¾è¡¨ï¼ˆé“¾å¼å­˜å‚¨ï¼‰ï¼š</p><ul><li>ä¼˜ç‚¹ï¼šä¸è¦æ±‚å¤§ç‰‡è¿ç»­ç©ºé—´ï¼Œæ”¹å˜å®¹é‡æ–¹ä¾¿</li><li>ç¼ºç‚¹ï¼šä¸å¯éšæœºå­˜å–ï¼Œè¦è€—è´¹ä¸€å®šç©ºé—´å­˜æ”¾æŒ‡é’ˆ</li></ul></blockquote><h3 id="0x0101å•é“¾è¡¨çš„å®ç°"><a href="#0x0101å•é“¾è¡¨çš„å®ç°" class="headerlink" title="0x0101å•é“¾è¡¨çš„å®ç°"></a>0x0101å•é“¾è¡¨çš„å®ç°</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">LNode</span>&#123;</span><span class="comment">//å®šä¹‰å•é“¾è¡¨ç»“ç‚¹ç±»å‹</span></span><br><span class="line">  ElemType data;<span class="comment">//æ¯ä¸ªèŠ‚ç‚¹å­˜æ”¾ä¸€ä¸ªæ•°æ®å…ƒç´ </span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">LNode</span> *<span class="title">next</span>;</span> <span class="comment">//æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">LNode</span> <span class="title">LNode</span>;</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">LNode</span> *<span class="title">LinkList</span>;</span></span><br></pre></td></tr></table></figure><p>æˆ–è€…,</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">LNode</span>&#123;</span> <span class="comment">//å®šä¹‰å•é“¾è¡¨ç»“ç‚¹ç±»å‹</span></span><br><span class="line">  ElemType data;<span class="comment">//æ¯ä¸ªèŠ‚ç‚¹å­˜æ”¾ä¸€ä¸ªæ•°æ®å…ƒç´ </span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">LNode</span> *<span class="title">next</span>;</span> <span class="comment">//æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span></span><br><span class="line">&#125;LNode, *LinkList;</span><br></pre></td></tr></table></figure><p>ä¸¤è€…ç­‰ä»·ã€‚</p><p>è¦è¡¨ç¤ºä¸€ä¸ªå•é“¾è¡¨æ—¶ï¼Œåªéœ€å£°æ˜ä¸€ä¸ª<code>å¤´æŒ‡é’ˆ</code>Lï¼ŒæŒ‡å‘å•é“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LNode *L; <span class="comment">//å£°æ˜ä¸€ä¸ªæŒ‡å‘å•é“¾è¡¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ</span></span><br></pre></td></tr></table></figure><p>æˆ–è€…,</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LinkList L; <span class="comment">//å£°æ˜ä¸€ä¸ªæŒ‡å‘å•é“¾è¡¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆï¼ˆæ­¤æ–¹æ³•å¯è¯»æ€§æ›´å¼ºï¼‰</span></span><br></pre></td></tr></table></figure><blockquote><p>å¼ºè°ƒè¿™æ˜¯ä¸€ä¸ªå•é“¾è¡¨ â€“ ä½¿ç”¨<code>LinkList</code></p><p>å¼ºè°ƒè¿™æ˜¯ä¸€ä¸ªç»“ç‚¹     â€“ ä½¿ç”¨LNode</p></blockquote><p>å•é“¾è¡¨åˆåˆ†ä¸º<code>å¸¦å¤´ç»“ç‚¹</code>å’Œ<code>ä¸å¸¦å¤´ç»“ç‚¹</code>ä¸¤ç§:<br>å¦‚æœä¸å¸¦å¤´ç»“ç‚¹,å†™ä»£ç æ›´éº»çƒ¦,å¯¹å¯¹ä¸€ä¸ª<code>æ•°æ®ç»“ç‚¹</code>å’Œ<code>åç»­æ•°æ®ç»“ç‚¹</code>çš„å¤„ç†éœ€è¦ç”¨ä¸åŒçš„ä»£ç é€»è¾‘.<br>å¯¹<code>ç©ºè¡¨</code>å’Œ<code>éç©ºè¡¨</code>çš„å¤„ç†éœ€è¦ç”¨ä¸åŒçš„ä»£ç é€»è¾‘</p><blockquote><p>æ€»ä¹‹,ç”¨å¸¦å¤´ç»“ç‚¹çš„å•é“¾è¡¨å†™ä»£ç æ›´æ–¹ä¾¿.</p></blockquote><p>ä¸‹é¢å°†ä¼šåˆ†åˆ«ç”¨ä»£ç æ¼”ç¤ºä¸€ä¸‹å¸¦å¤´ç»“ç‚¹å’Œä¸å¸¦å¤´ç»“ç‚¹çš„åŒºåˆ«.</p><blockquote><p>å¦‚æœæ˜¯è€ƒç ”çš„å¥½å“¥å“¥,å¸¦å¤´ç»“ç‚¹å’Œä¸å¸¦å¤´ç»“ç‚¹éƒ½æœ‰å¯èƒ½è€ƒ,å®¡é¢˜å°±å®Œäº†.</p></blockquote><h2 id="0x02-å¸¦å¤´ç»“ç‚¹çš„å•é“¾è¡¨"><a href="#0x02-å¸¦å¤´ç»“ç‚¹çš„å•é“¾è¡¨" class="headerlink" title="0x02 å¸¦å¤´ç»“ç‚¹çš„å•é“¾è¡¨"></a>0x02 å¸¦å¤´ç»“ç‚¹çš„å•é“¾è¡¨</h2><p>(å¤´èŠ‚ç‚¹ä¸å­˜æ”¾æ•°æ®data)</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">LNode</span>&#123;</span></span><br><span class="line">    <span class="type">int</span> data; <span class="comment">//æ¯ä¸€ä¸ªèŠ‚ç‚¹å­˜æ”¾çš„æ•°æ®</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">LNode</span>* <span class="title">next</span>;</span> <span class="comment">//å­˜æ”¾ä¸‹ä¸€ä¸ªç»“ç‚¹</span></span><br><span class="line">&#125;LNode, *LinkList;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: åˆå§‹åŒ–ä¸€ä¸ªå•é“¾è¡¨ï¼Œå¸¦å¤´èŠ‚ç‚¹(å¤´èŠ‚ç‚¹ä¸å­˜æ”¾æ•°æ®data)</span></span><br><span class="line"><span class="comment"> * @param &#123;LinkList&amp;&#125; L</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">InitList</span><span class="params">(LinkList&amp; L)</span> &#123;</span><br><span class="line">    L = (LNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode)); <span class="comment">//åˆ†é…ä¸€ä¸ªå¤´èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span> (L == <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">//å†…å­˜ä¸è¶³ï¼Œåˆ†é…å¤±è´¥</span></span><br><span class="line">    L-&gt;next = <span class="literal">NULL</span>; <span class="comment">//å¤´èŠ‚ç‚¹ä¹‹åçš„èŠ‚ç‚¹ä¸ºNULLï¼Œæ— å­èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: åˆ¤æ–­å¸¦å¤´èŠ‚ç‚¹çš„å•é“¾è¡¨æ˜¯å¦ä¸ºç©ºè¡¨</span></span><br><span class="line"><span class="comment"> * @param &#123;LinkList&#125; L</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">isEmpty</span><span class="params">(LinkList L)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (L-&gt;next == <span class="literal">NULL</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">// or return (L-&gt;next == NULL);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> <span class="type">const</span> *argv[])</span></span><br><span class="line">&#123;</span><br><span class="line">    LinkList L; <span class="comment">//å£°æ˜ä¸€ä¸ªæŒ‡å‘å•é“¾è¡¨çš„æŒ‡é’ˆ</span></span><br><span class="line">    InitList(L); <span class="comment">//åˆå§‹åŒ–ä¸€ä¸ªç©ºè¡¨</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="0x0201-æŒ‰ä½åºæ’å…¥æ“ä½œ"><a href="#0x0201-æŒ‰ä½åºæ’å…¥æ“ä½œ" class="headerlink" title="0x0201 æŒ‰ä½åºæ’å…¥æ“ä½œ"></a>0x0201 æŒ‰ä½åºæ’å…¥æ“ä½œ</h3><blockquote><p>ç®—æ³•æ€æƒ³: éå†é“¾è¡¨, æ‰¾åˆ°éœ€è¦æ’å…¥çš„åœ°æ–¹ç›´æ¥æ’å…¥å³å¯.</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: åœ¨ç¬¬iä¸ªä½ç½®æ’å…¥å…ƒç´ e(å¸¦å¤´ç»“ç‚¹çš„å•é“¾è¡¨)</span></span><br><span class="line"><span class="comment"> * @param &#123;LinkList&amp;&#125; L</span></span><br><span class="line"><span class="comment"> * @param &#123;int&#125; i</span></span><br><span class="line"><span class="comment"> * @param &#123;int&#125; e</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">ListInsert</span><span class="params">(LinkList&amp; L, <span class="type">int</span> i, <span class="type">int</span> e)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (i &lt; <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    LNode* p; <span class="comment">//æŒ‡é’ˆpæŒ‡å‘å½“å‰æ‰«æåˆ°çš„ç»“ç‚¹</span></span><br><span class="line">    <span class="type">int</span> j = <span class="number">0</span>; <span class="comment">//å½“å‰pæŒ‡å‘çš„æ˜¯ç¬¬å‡ ä¸ªç»“ç‚¹</span></span><br><span class="line">    p = L; <span class="comment">//LæŒ‡å‘å¤´ç»“ç‚¹,å¤´ç»“ç‚¹æ˜¯ç¬¬0ä¸ªç»“ç‚¹(ä¸å­˜æ•°æ®)</span></span><br><span class="line">    <span class="keyword">while</span> (p != <span class="literal">NULL</span> &amp;&amp; j &lt; i - <span class="number">1</span>) &#123; <span class="comment">//å¾ªç¯æ‰¾åˆ°ç¬¬i-1ä¸ªç»“ç‚¹</span></span><br><span class="line">        p = p-&gt;next;</span><br><span class="line">        j++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">NULL</span>) <span class="comment">//å³iå€¼ä¸åˆæ³•</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    LNode* s = (LNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode));</span><br><span class="line">    s-&gt;data = e;</span><br><span class="line">    s-&gt;next = p-&gt;next;</span><br><span class="line">    p-&gt;next = s; <span class="comment">// å°†ç»“ç‚¹såˆ°pä¹‹å</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">//æ’å…¥æˆåŠŸ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„âš ï¸: ç¬¬21è¡Œå¼€å§‹å°†ç»“ç‚¹eæ’å…¥æ–°å¼€è¾Ÿçš„ç©ºé—´sä¸­,ç¬¬22è¡Œå’Œç¬¬23è¡Œçš„ä»£ç ä¸èƒ½äº’æ¢,<br>å¦åˆ™<code>p-&gt;next = s</code>ä¹‹å<code>p-&gt;next</code>å°†ä¼šæŒ‡å‘å®ƒè‡ªå·±,ä»è€Œå¯¼è‡´åæ–¹çš„é“¾è¡¨è¢«ä¸¢å¤±.</p><h3 id="0x0202-æŒ‡å®šç»“ç‚¹çš„åæ’æ“ä½œ"><a href="#0x0202-æŒ‡å®šç»“ç‚¹çš„åæ’æ“ä½œ" class="headerlink" title="0x0202 æŒ‡å®šç»“ç‚¹çš„åæ’æ“ä½œ"></a>0x0202 æŒ‡å®šç»“ç‚¹çš„åæ’æ“ä½œ</h3><blockquote><p>ç®—æ³•æ€æƒ³: å‘pç»“ç‚¹ä¹‹åæ’å…¥å…ƒç´ e, åªéœ€è¦æ–°åˆ†é…ä¸€ä¸ªç©ºé—´, ç„¶åå°†éœ€è¦æ’å…¥çš„å…ƒç´ eæ”¾è¿›è¿™ä¸ªç©ºé—´, å†æŠŠè¿™ä¸ªæ–°å¼€è¾Ÿçš„ç©ºé—´ç»™æ”¾å…¥æˆ‘ä»¬éœ€è¦æ’å…¥çš„åœ°æ–¹å°±è¡Œäº†, å…·ä½“å®ç°ä»£ç å¦‚ä¸‹:</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: åœ¨pç»“ç‚¹ä¹‹åæ’å…¥å…ƒç´ e</span></span><br><span class="line"><span class="comment"> * @param &#123;LNode*&#125; p</span></span><br><span class="line"><span class="comment"> * @param &#123;int&#125; e</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">InsertNextNode</span><span class="params">(LNode* p, <span class="type">int</span> e)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">NULL</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    LNode* s = (LNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode));</span><br><span class="line">    <span class="keyword">if</span> (s == <span class="literal">NULL</span>) <span class="comment">//å¦‚æœå†…å­˜åˆ†é…å¤±è´¥return false;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    s-&gt;data = e; <span class="comment">//ç”¨ç»“ç‚¹sä¿å­˜æ•°æ®å…ƒç´ e</span></span><br><span class="line">    s-&gt;next = p-&gt;next;</span><br><span class="line">    p-&gt;next = s; <span class="comment">//å°†ç»“ç‚¹sè¿åˆ°pä¹‹å</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="0x0203-æŒ‡å®šç»“ç‚¹çš„å‰æ’æ“ä½œ"><a href="#0x0203-æŒ‡å®šç»“ç‚¹çš„å‰æ’æ“ä½œ" class="headerlink" title="0x0203 æŒ‡å®šç»“ç‚¹çš„å‰æ’æ“ä½œ"></a>0x0203 æŒ‡å®šç»“ç‚¹çš„å‰æ’æ“ä½œ</h3><p>æ³¨æ„âš ï¸: å•é“¾è¡¨åœ¨ä¸çŸ¥é“é“¾è¡¨å¤´æŒ‡é’ˆçš„æƒ…å†µä¸‹æ˜¯æ— æ³•çŸ¥é“æŸä¸€ä¸ªç»“ç‚¹ä¹‹å‰çš„é“¾è¡¨åŒºåŸŸçš„.</p><blockquote><p>ç®—æ³•æ€æƒ³: åœ¨ç»™å®šçš„ç»“ç‚¹ä¹‹å‰æ’å…¥ä¸€ä¸ªæ–°çš„å…ƒç´ , é¦–å…ˆå¾ªç¯æŸ¥æ‰¾æ‰€ç»™çš„éƒ½ç»“ç‚¹pçš„å‰é©±ç»“ç‚¹q, ç„¶åå†å¯¹qè¿›è¡Œåæ’æ“ä½œ.</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: åœ¨é“¾è¡¨Lä¸­çš„æŒ‡å®šç»“ç‚¹på‰æ’å…¥å…ƒç´ e</span></span><br><span class="line"><span class="comment"> * @param &#123;LinkList&amp;&#125; L</span></span><br><span class="line"><span class="comment"> * @param &#123;LNode*&#125; p</span></span><br><span class="line"><span class="comment"> * @param &#123;int&#125; e</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">InsertPriorNode</span><span class="params">(LinkList&amp; L, LNode* p, <span class="type">int</span> e)</span> &#123;</span><br><span class="line">    LNode* q; <span class="comment">//æŒ‡é’ˆqç”¨äºæŒ‡å‘å½“å‰æ‰«æåˆ°çš„ç»“ç‚¹</span></span><br><span class="line">    <span class="type">int</span> j = <span class="number">0</span>; <span class="comment">//å½“å‰qæŒ‡é’ˆæŒ‡å‘çš„æ˜¯ç¬¬å‡ ä¸ªç»“ç‚¹</span></span><br><span class="line">    q = L; <span class="comment">//æŒ‡å‘å¤´ç»“ç‚¹,ä»ç¬¬0ä¸ªç»“ç‚¹å¼€å§‹æ‰«æ</span></span><br><span class="line">    <span class="keyword">while</span> (p != <span class="literal">NULL</span>) &#123; <span class="comment">//éå†Læ‰¾åˆ°pçš„å‰é©±ç»“ç‚¹</span></span><br><span class="line">        q = q-&gt;next; <span class="comment">//å‰å¾€ä¸‹ä¸€ä¸ªç»“ç‚¹</span></span><br><span class="line">        j++;</span><br><span class="line">        <span class="keyword">if</span> (q-&gt;next == p)<span class="comment">//æ‰¾åˆ°pçš„å‰é©±ç»“ç‚¹q</span></span><br><span class="line">            <span class="keyword">return</span> InsertNextNode(q, e);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">//æœªæ‰¾åˆ°ç»“ç‚¹p</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹å‡ºè¿™ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(n)$.<br>è€Œä¸”å¿…é¡»çŸ¥é“é“¾è¡¨çš„<code>å¤´æŒ‡é’ˆL</code>, é‚£æœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥ç›´æ¥åœ¨æ‰€ç»™<code>ç»“ç‚¹p</code>å‰é¢ç›´æ¥æ’å…¥å‘¢?ç­”æ¡ˆæ˜¯æœ‰çš„:</p><blockquote><p>ç®—æ³•æ€æƒ³: é¦–å…ˆç”³è¯·ä¸€ç‰‡<code>ç©ºé—´s</code>, å…ˆæŠŠæ–°<code>ç»“ç‚¹s</code>è¿æ¥ğŸ”—åˆ°æ‰€ç»™<code>ç»“ç‚¹p</code>ä¹‹å, ç„¶åæŠŠ<code>p</code>ä¸­çš„å…ƒç´ å¤åˆ¶åˆ°æ–°<code>ç»“ç‚¹s</code>ä¸­, æœ€åå°†<code>ç»“ç‚¹p</code>ä¸­çš„å…ƒç´ (data)è¦†ç›–ä¸ºæ‰€è¦æ’å…¥çš„<code>å…ƒç´ e</code>.</p></blockquote><p>å®ç°ä»£ç å¦‚ä¸‹:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: åœ¨é“¾è¡¨Lä¸­çš„æŒ‡å®šç»“ç‚¹på‰æ’å…¥å…ƒç´ e</span></span><br><span class="line"><span class="comment"> * @param &#123;LNode*&#125; p</span></span><br><span class="line"><span class="comment"> * @param &#123;int&#125; e</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">InsertPriorNode</span><span class="params">(LNode* p, <span class="type">int</span> e)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">NULL</span>)<span class="comment">//æŒ‡å®šç»“ç‚¹ä¸ºç©º</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    LNode* s = (LNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode));</span><br><span class="line">    <span class="keyword">if</span> (s == <span class="literal">NULL</span>) <span class="comment">//åˆ†é…ç©ºé—´å¤±è´¥</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    s-&gt;next = p-&gt;next; <span class="comment">//å°†så’ŒpåŸæ¥çš„åç»§ç»“ç‚¹è¿æ¥</span></span><br><span class="line">    p-&gt;next = s; <span class="comment">//å°†sè¿æ¥åˆ°pä¹‹å</span></span><br><span class="line">    s-&gt;data = p-&gt;data; <span class="comment">//å°†pç»“ç‚¹æ•°æ®å¤åˆ¶åˆ°ç»“ç‚¹sä¸­</span></span><br><span class="line">    p-&gt;data = e; <span class="comment">//å°†å…ƒç´ eè¦†ç›–åˆ°åŸæ¥çš„ç»“ç‚¹pä¸­</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">//æ’å…¥æˆåŠŸ</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹å‡ºè¿™ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º $O(1)$, ä¼˜äºç¬¬ä¸€ç§æ–¹æ³•.</p><h3 id="0x0203-æŒ‰ä½åºåˆ é™¤æ“ä½œ"><a href="#0x0203-æŒ‰ä½åºåˆ é™¤æ“ä½œ" class="headerlink" title="0x0203 æŒ‰ä½åºåˆ é™¤æ“ä½œ"></a>0x0203 æŒ‰ä½åºåˆ é™¤æ“ä½œ</h3><blockquote><p>ç®—æ³•æ€æƒ³: éå†é“¾è¡¨, å¯»æ‰¾ä½åºiçš„ä¸Šä¸€ä¸ªä½åºä¸ºi-1çš„<code>ç»“ç‚¹p</code>, ç»“ç‚¹pä¸‹ä¸€ä¸ª<code>ç»“ç‚¹q</code>å°±æ˜¯æˆ‘ä»¬éœ€è¦åˆ é™¤çš„ç»“ç‚¹, ç„¶åå…ˆç”¨eå­˜æ”¾è¯¥ç»“ç‚¹qçš„å…ƒç´ ç”¨äºè¿”å›åˆ é™¤çš„å…ƒç´ , ç„¶åä½¿ç”¨<code>p-&gt;next = q-&gt;next</code> ç›´æ¥åˆ é™¤è¯¥ç»“ç‚¹.</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: åˆ é™¤ç¬¬iä¸ªç»“ç‚¹ä¸Šçš„å…ƒç´ e</span></span><br><span class="line"><span class="comment"> * @param &#123;LinkList&amp;&#125; L</span></span><br><span class="line"><span class="comment"> * @param &#123;int&#125; i</span></span><br><span class="line"><span class="comment"> * @param &#123;int&amp;&#125; e</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">ListDelete</span><span class="params">(LinkList&amp; L, <span class="type">int</span> i, <span class="type">int</span>&amp; e)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (i &lt; <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    LNode* p; <span class="comment">//æŒ‡é’ˆpæŒ‡å‘å½“å‰æ‰«æåˆ°çš„ç»“ç‚¹</span></span><br><span class="line">    <span class="type">int</span> j = <span class="number">0</span>; <span class="comment">//å½“å‰pæŒ‡å‘çš„æ˜¯ç¬¬å‡ ä¸ªç»“ç‚¹</span></span><br><span class="line">    p = L; <span class="comment">//LæŒ‡å‘å¤´ç»“ç‚¹,å¤´ç»“ç‚¹æ˜¯ç¬¬0ä¸ªç»“ç‚¹(ä¸å­˜æ•°æ®)</span></span><br><span class="line">    <span class="keyword">while</span> (p != <span class="literal">NULL</span> &amp;&amp; j &lt; i - <span class="number">1</span>) &#123; <span class="comment">//å¾ªç¯æ‰¾åˆ°ç¬¬i-1ä¸ªç»“ç‚¹</span></span><br><span class="line">        p = p-&gt;next;</span><br><span class="line">        j++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">NULL</span>) <span class="comment">//å¦‚æœiå€¼ä¸åˆæ³•</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (p-&gt;next == <span class="literal">NULL</span>) <span class="comment">//å¦‚æœç¬¬i-1ä¸ªç»“ç‚¹ä¹‹åå·²æ— å…¶ä»–ç»“ç‚¹</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    LNode* q = p-&gt;next; <span class="comment">//ä»¤qæŒ‡å‘è¢«åˆ é™¤çš„ç»“ç‚¹</span></span><br><span class="line">    e = q-&gt;data; <span class="comment">//ç”¨eè¿”å›è¢«åˆ é™¤çš„å…ƒç´ çš„å€¼</span></span><br><span class="line">    p-&gt;next = q-&gt;next; <span class="comment">//å°†*qç»“ç‚¹ä»é“¾ä¸­â€œæ–­å¼€â€</span></span><br><span class="line">    <span class="built_in">free</span>(q); <span class="comment">//é‡Šæ”¾ç»“ç‚¹çš„å­˜å‚¨ç©ºé—´</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">//åˆ é™¤æˆåŠŸ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="0x0204-æŒ‡å®šç»“ç‚¹çš„åˆ é™¤æ“ä½œ"><a href="#0x0204-æŒ‡å®šç»“ç‚¹çš„åˆ é™¤æ“ä½œ" class="headerlink" title="0x0204 æŒ‡å®šç»“ç‚¹çš„åˆ é™¤æ“ä½œ"></a>0x0204 æŒ‡å®šç»“ç‚¹çš„åˆ é™¤æ“ä½œ</h3><blockquote><p>ç®—æ³•æ€æƒ³: åˆ é™¤ç»“ç‚¹p, åªè¦æŠŠ<code>ç»“ç‚¹p</code>çš„<code>åç»§ç»“ç‚¹</code>å®Œå®Œæ•´æ•´çš„<code>å¤åˆ¶</code>è¿‡æ¥,å†æŠŠç»“ç‚¹pçš„åç»§ç»“ç‚¹ä»é“¾è¡¨ä¸­æ–­å¼€,å¹¶ä¸”é‡Šæ”¾è¿™ä¸ªpåç»§ç»“ç‚¹çš„ç©ºé—´.</p></blockquote><p>æ³¨æ„âš ï¸:<br>å¿…é¡»è¦åˆ¤æ–­åˆ é™¤çš„ç»“ç‚¹pæ˜¯å¦ä½äºé“¾è¡¨æœ«å°¾,å¦åˆ™æœ‰<code>p-&gt;next = NULL</code>, è¿™æ—¶å€™å¦‚æœå†æœ‰<code>p-&gt;next-&gt;next</code>ä¼šæŠ¥æŒ‡å‘ç©ºæŒ‡é’ˆçš„æŠ¥é”™.</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: åˆ é™¤æŒ‡å®šç»“ç‚¹p</span></span><br><span class="line"><span class="comment"> * @param &#123;LNode*&#125; p</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">DeleteNode</span><span class="params">(LNode* p)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">NULL</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (p-&gt;next == <span class="literal">NULL</span>) &#123; <span class="comment">//å‡å¦‚pä¸ºæœ«å°¾ç»“ç‚¹,ä¹Ÿå°±æ˜¯p-&gt;next == NULL</span></span><br><span class="line">        p = <span class="literal">NULL</span>;</span><br><span class="line">        <span class="built_in">free</span>(p);<span class="comment">//é‡Šæ”¾ä¸€ä¸ªæŒ‡é’ˆfree(p)å’Œp=NULLæ˜¯ä¸¤è€…ç¼ºä¸€ä¸å¯</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        LNode* q = p-&gt;next; <span class="comment">//ä»¤qæŒ‡å‘*pçš„åç»§ç»“ç‚¹</span></span><br><span class="line">        p-&gt;data = p-&gt;next-&gt;data; <span class="comment">//å’Œåç»§ç»“ç‚¹äº¤æ¢æ•°æ®åŸŸ</span></span><br><span class="line">        p-&gt;next = q-&gt;next; <span class="comment">//å°†*qç»“ç‚¹ä»é“¾è¡¨ä¸­&quot;æ–­å¼€&quot;</span></span><br><span class="line">        <span class="built_in">free</span>(q); <span class="comment">//é‡Šæ”¾åç»§ç»“ç‚¹çš„å‚¨å­˜ç©ºé—´</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="0x0205-æŒ‰ä½æŸ¥æ‰¾æ“ä½œ"><a href="#0x0205-æŒ‰ä½æŸ¥æ‰¾æ“ä½œ" class="headerlink" title="0x0205 æŒ‰ä½æŸ¥æ‰¾æ“ä½œ"></a>0x0205 æŒ‰ä½æŸ¥æ‰¾æ“ä½œ</h3><blockquote><p>ç®—æ³•æ€æƒ³: éå†é“¾è¡¨, æŸ¥æ‰¾ä½åºä¸ºiçš„ç»“ç‚¹, å¹¶è¿”å›.</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: è¿”å›ç¬¬iä¸ªå…ƒç´ (å¸¦å¤´ç»“ç‚¹)</span></span><br><span class="line"><span class="comment"> * @param &#123;LinkList&#125; L</span></span><br><span class="line"><span class="comment"> * @param &#123;int&#125; i</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">LNode* <span class="title function_">GetElem</span><span class="params">(LinkList L, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (i &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    LNode* p; <span class="comment">//æŒ‡é’ˆpæŒ‡å‘å•é’±æ‰«æåˆ°çš„ç»“ç‚¹</span></span><br><span class="line">    <span class="type">int</span> j = <span class="number">0</span>; <span class="comment">//å½“å‰pæŒ‡å‘çš„æ˜¯ç¬¬å‡ ä¸ªç»“ç‚¹</span></span><br><span class="line">    p = L; <span class="comment">//LæŒ‡å‘å¤´ç»“ç‚¹,å¤´ç»“ç‚¹æ˜¯ç¬¬0ä¸ªç»“ç‚¹(ä¸å­˜æ•°æ®)</span></span><br><span class="line">    <span class="keyword">while</span> (p != <span class="literal">NULL</span> &amp;&amp; j &lt; i) &#123;<span class="comment">// å¾ªç¯æ‰¾åˆ°ç¬¬iä¸ªç»“ç‚¹</span></span><br><span class="line">        p = p-&gt;next;</span><br><span class="line">        j++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p; <span class="comment">//è¿”å›æ‰¾åˆ°çš„ç»“ç‚¹</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="0x0206-æŒ‰å€¼æŸ¥æ‰¾æ“ä½œ"><a href="#0x0206-æŒ‰å€¼æŸ¥æ‰¾æ“ä½œ" class="headerlink" title="0x0206 æŒ‰å€¼æŸ¥æ‰¾æ“ä½œ"></a>0x0206 æŒ‰å€¼æŸ¥æ‰¾æ“ä½œ</h3><blockquote><p>ç®—æ³•æ€æƒ³: éå†é“¾è¡¨, ä¸€ä¸€å¯¹æ¯”æ¯ä¸ªç»“ç‚¹çš„æ•°æ®åŸŸä¸æ‰€éœ€æŸ¥æ‰¾çš„å€¼eæ˜¯å¦ç›¸ç­‰,æ‰¾åˆ°åˆ™è¿”å›è¯¥ç»“ç‚¹çš„æŒ‡é’ˆ,å¦åˆ™è¿”å›NULL.</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: æ‰¾åˆ°æ•°æ®åŸŸä¸ºeçš„ç»“ç‚¹</span></span><br><span class="line"><span class="comment"> * @param &#123;LinkList&#125; L</span></span><br><span class="line"><span class="comment"> * @param &#123;int&#125; e</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">LNode* <span class="title function_">LocateElem</span><span class="params">(LinkList L, <span class="type">int</span> e)</span> &#123;</span><br><span class="line">    LNode* p = L-&gt;next;</span><br><span class="line">    <span class="comment">//ä»ç¬¬1ä¸ªç»“ç‚¹å¼€å§‹æŸ¥æ‰¾æ•°æ®åŸŸä¸ºeçš„ç»“ç‚¹(å¸¦å¤´ç»“ç‚¹çš„å•é“¾è¡¨å¤´ç»“ç‚¹æ— dataåŸŸ)</span></span><br><span class="line">    <span class="keyword">while</span> (p != <span class="literal">NULL</span> &amp;&amp; p-&gt;data != e) &#123;</span><br><span class="line">        p = p-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p; <span class="comment">//æ‰¾åˆ°åè¿”å›è¯¥ç»“ç‚¹çš„æŒ‡é’ˆ,å¦åˆ™è¿”å›NULLè¡¨ç¤ºè¯¥é“¾è¡¨æ— å€¼ä¸ºeçš„ç»“ç‚¹</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="0x0207-æ±‚è¡¨çš„é•¿åº¦"><a href="#0x0207-æ±‚è¡¨çš„é•¿åº¦" class="headerlink" title="0x0207 æ±‚è¡¨çš„é•¿åº¦"></a>0x0207 æ±‚è¡¨çš„é•¿åº¦</h3><blockquote><p>ç®—æ³•æ€æƒ³: ä»å¤´åˆ°å°¾ä¾æ¬¡éå†, ç„¶åç”¨ä¸€ä¸ªå˜é‡è¿›è¡Œè®¡æ•°æ“ä½œå³å¯.</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: æ±‚é“¾è¡¨çš„é•¿åº¦</span></span><br><span class="line"><span class="comment"> * @param &#123;LinkList&#125; L</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">Length</span><span class="params">(LinkList L)</span> &#123;</span><br><span class="line">    <span class="type">int</span> len = <span class="number">0</span>; <span class="comment">//ç»Ÿè®¡è¡¨é•¿</span></span><br><span class="line">    LNode* p = L;</span><br><span class="line">    <span class="keyword">while</span> (p-&gt;next != <span class="literal">NULL</span>) &#123;</span><br><span class="line">        p = p-&gt;next;</span><br><span class="line">        len++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> len;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœæ˜¯ä¸å¸¦å¤´ç»“ç‚¹çš„å•é“¾è¡¨, åˆ™éœ€è¦åœ¨å¸¦å¤´ç»“ç‚¹çš„è¡¨é•¿çš„åŸºç¡€ä¸ŠåŠ 1, å› ä¸ºå¸¦å¤´ç»“ç‚¹çš„å•é“¾è¡¨å¤´ç»“ç‚¹ä¸å¸¦æ•°æ®åŸŸä¸è®¡å…¥è¡¨é•¿ä¸­.</p></blockquote><h2 id="0x03-ä¸å¸¦å¤´ç»“ç‚¹çš„å•é“¾è¡¨"><a href="#0x03-ä¸å¸¦å¤´ç»“ç‚¹çš„å•é“¾è¡¨" class="headerlink" title="0x03 ä¸å¸¦å¤´ç»“ç‚¹çš„å•é“¾è¡¨"></a>0x03 ä¸å¸¦å¤´ç»“ç‚¹çš„å•é“¾è¡¨</h2><p>ä¸å¸¦å¤´ç»“ç‚¹çš„å•é“¾è¡¨å®ç°:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">LNode</span>&#123;</span></span><br><span class="line">    <span class="type">int</span> data; <span class="comment">//æ¯ä¸€ä¸ªèŠ‚ç‚¹å­˜æ”¾çš„æ•°æ®</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">LNode</span>* <span class="title">next</span>;</span> <span class="comment">//å­˜æ”¾ä¸‹ä¸€ä¸ªç»“ç‚¹</span></span><br><span class="line">&#125;LNode, *LinkList;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: åˆå§‹åŒ–ä¸€ä¸ªç©ºé“¾è¡¨ï¼Œæ— å¤´èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> * @param &#123;LinkList&amp;&#125; L</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">InitList</span><span class="params">(LinkList&amp; L)</span> &#123;</span><br><span class="line">    L = <span class="literal">NULL</span>; <span class="comment">//ç©ºè¡¨ï¼Œæš‚æ—¶æ²¡æœ‰ä»»ä½•èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: åˆ¤æ–­ä¸å¸¦å¤´èŠ‚ç‚¹çš„å•é“¾è¡¨æ˜¯å¦ä¸ºç©ºè¡¨</span></span><br><span class="line"><span class="comment"> * @param &#123;LinkList&#125; L</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">isEmpty</span><span class="params">(LinkList L)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (L == <span class="literal">NULL</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">//or return (L == NULL);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> <span class="type">const</span> *argv[])</span></span><br><span class="line">&#123;</span><br><span class="line">    LinkList L; <span class="comment">//å£°æ˜ä¸€ä¸ªæŒ‡å‘å•é“¾è¡¨çš„æŒ‡é’ˆ</span></span><br><span class="line">    InitList(L); <span class="comment">//åˆå§‹åŒ–ä¸€ä¸ªç©ºè¡¨</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸å¸¦å¤´ç»“ç‚¹çš„å•é“¾è¡¨, </p><ul><li>ç¬¬ä¸€ä¸ªç»“ç‚¹ä»ä½åºi&#x3D;1ç®—èµ·</li><li>è€Œå¸¦å¤´ç»“ç‚¹çš„ä½åºä»i&#x3D;0è¿™ä¸ªå¤´æŒ‡é’ˆç®—èµ·, ä¸”å¤´æŒ‡é’ˆä¸å¸¦æ•°æ®åŸŸ.</li></ul><p>åªéœ€è¦æ³¨æ„è¿™ä¸¤ç‚¹å³å¯, ä¸‹é¢çš„æ“ä½œåªåšæŒ‰ä½æ’å…¥çš„æ¼”ç¤º(èººå¹³å¼€æ‘†.jpgğŸ¤¤), å…¶ä»–çš„å¯å‚è€ƒå¸¦å¤´ç»“ç‚¹çš„ä»£ç , å¤§è‡´ç›¸åŒ.</p><blockquote><p>å¦‚æœä¸æ¶‰åŠéå†æ“ä½œ, ä¸¤è€…çš„ä»£ç å®ç°åŸºæœ¬ä¸€è‡´.</p></blockquote><h3 id="0x0301-æŒ‰ä½åºæ’å…¥"><a href="#0x0301-æŒ‰ä½åºæ’å…¥" class="headerlink" title="0x0301 æŒ‰ä½åºæ’å…¥"></a>0x0301 æŒ‰ä½åºæ’å…¥</h3><p>ä¸å­˜åœ¨â€œç¬¬0ä¸ªâ€ç»“ç‚¹,å› æ­¤<code>i=1</code>æ—¶éœ€è¦ç‰¹æ®Šå¤„ç†.<br>åœ¨ä»£ç å®ç°çš„æ—¶å€™<code>ç¬¬iä¸ªä½ç½®</code>å…¶å®æ˜¯æ‰¾åˆ°<strong>ç¬¬i-1ä¸ªç»“ç‚¹</strong>åå°†æ–°çš„ç»“ç‚¹æ’å…¥å…¶å.</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: åœ¨è¡¨Lä¸­çš„ç¬¬iä¸ªä½ç½®ä¸Šæ’å…¥åˆ¶å®šå…ƒç´ e</span></span><br><span class="line"><span class="comment"> * @param &#123;LinkList&amp;&#125; L</span></span><br><span class="line"><span class="comment"> * @param &#123;int&#125; i</span></span><br><span class="line"><span class="comment"> * @param &#123;int&#125; e</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">ListInsert</span><span class="params">(LinkList&amp; L, <span class="type">int</span> i, <span class="type">int</span> e)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (i &lt; <span class="number">1</span>) </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (i == <span class="number">1</span>) &#123; <span class="comment">//æ’å…¥ç¬¬1ä¸ªç»“ç‚¹çš„æ“ä½œä¸å…¶ä»–ç»“ç‚¹æ“ä½œä¸åŒ</span></span><br><span class="line">        LNode* s = (LNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode));</span><br><span class="line">        s-&gt;data = e;</span><br><span class="line">        s-&gt;next = L;</span><br><span class="line">        L = s; <span class="comment">//å¤´æŒ‡é’ˆæŒ‡å‘æ–°ç»“ç‚¹</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    LNode* p; <span class="comment">//æŒ‡é’ˆpæŒ‡å‘å½“å‰æ‰«æåˆ°çš„ç»“ç‚¹</span></span><br><span class="line">    <span class="type">int</span> j = <span class="number">1</span>; <span class="comment">//å½“å‰pæŒ‡å‘çš„æ˜¯ç¬¬å‡ ä¸ªç»“ç‚¹</span></span><br><span class="line">    p = L; <span class="comment">//pæŒ‡å‘ç¬¬1ä¸ªç»“ç‚¹(æ³¨æ„ :ä¸æ˜¯å¤´ç»“ç‚¹)</span></span><br><span class="line">    <span class="keyword">while</span> (p != <span class="literal">NULL</span> &amp;&amp; j &lt; i - <span class="number">1</span>) &#123; <span class="comment">//å¾ªç¯æ‰¾åˆ°ç¬¬i-1ä¸ªç»“ç‚¹</span></span><br><span class="line">        p = p-&gt;next;</span><br><span class="line">        j++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">NULL</span>) <span class="comment">//iå€¼ä¸åˆæ³•</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    LNode* s = (LNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode));</span><br><span class="line">    s-&gt;data = e;</span><br><span class="line">    s-&gt;next = p-&gt;next;</span><br><span class="line">    p-&gt;next = s;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">//æ’å…¥æˆåŠŸreturn true;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="0x04-å•é“¾è¡¨çš„å»ºç«‹"><a href="#0x04-å•é“¾è¡¨çš„å»ºç«‹" class="headerlink" title="0x04 å•é“¾è¡¨çš„å»ºç«‹"></a>0x04 å•é“¾è¡¨çš„å»ºç«‹</h2><p>å•é“¾è¡¨çš„å»ºç«‹åˆ†ä¸º:</p><ul><li>å°¾æ’æ³•</li><li>å¤´æ’æ³•</li></ul><blockquote><p>å¦‚æœç»™ä½ å¾ˆå¤šä¸ªæ•°æ®å…ƒç´ (ElemType), éœ€è¦æŠŠå®ƒä»¬å­˜åˆ°ä¸€ä¸ªå•é“¾è¡¨é‡Œ, è¯¥æ€ä¹ˆåšå‘¢?</p><p>Step 1: åˆå§‹åŒ–ä¸€ä¸ªå•é“¾è¡¨</p><p>Step 2: æ¯æ¬¡å–ä¸€ä¸ªæ•°æ®å…ƒç´ , æ’å…¥åˆ° <code>è¡¨å°¾</code> æˆ–è€…  <code>è¡¨å¤´</code> .(å¯¹åº”<code>å°¾æ’æ³•</code>å’Œ<code>å¤´æ’æ³•</code>)</p></blockquote><h3 id="0x0401-å°¾æ’æ³•"><a href="#0x0401-å°¾æ’æ³•" class="headerlink" title="0x0401 å°¾æ’æ³•"></a>0x0401 å°¾æ’æ³•</h3><blockquote><p><strong>ç®—æ³•æ€æƒ³:</strong> </p><p>åˆå§‹åŒ–å•é“¾è¡¨;<br>è®¾ç½®å˜é‡lengthè®°å½•é“¾è¡¨é•¿åº¦;<br>While å¾ªç¯{<br>    æ¯æ¬¡å–ä¸€ä¸ªæ•°æ®å…ƒç´ e;<br>    ListInsert(L, Length+1, e); &#x2F;&#x2F;æ’åˆ°é“¾è¡¨å°¾éƒ¨<br>      length++;<br>}</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: å°¾æ’æ³•å»ºç«‹å•é“¾è¡¨(å¸¦å¤´ç»“ç‚¹)</span></span><br><span class="line"><span class="comment"> * @param &#123;LinkList&amp;&#125; L</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">LinkList <span class="title function_">List_TailInsert</span><span class="params">(LinkList&amp; L)</span> &#123;</span><br><span class="line">    <span class="type">int</span> x; <span class="comment">//è¾“å…¥çš„ElemTypeä¸ºintå‹</span></span><br><span class="line">    L = (LNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode)); <span class="comment">//å»ºç«‹å¤´ç»“ç‚¹</span></span><br><span class="line">    LNode* s, * r = L; <span class="comment">//è®¾ç½®rä¸ºè¡¨å°¾æŒ‡é’ˆ</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;x); <span class="comment">//è¾“å…¥ä¸€ä¸ªå€¼ä½œä¸ºç»“ç‚¹çš„æ•°æ®åŸŸ</span></span><br><span class="line">    <span class="keyword">while</span> (x != <span class="number">999</span>) &#123; <span class="comment">//æ­¤å¤„999è¡¨ç¤ºè¾“å…¥999åˆ™ç»“æŸè¾“å…¥</span></span><br><span class="line">        s = (LNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode)); <span class="comment">//å¼€è¾Ÿä¸€ä¸ªæ–°çš„ç©ºé—´å­˜æ”¾è¾“å…¥çš„æ•°æ®x</span></span><br><span class="line">        s-&gt;data = x; <span class="comment">//å­˜å…¥x</span></span><br><span class="line">        r-&gt;next = s; <span class="comment">//åœ¨å½“å‰è¡¨å°¾æ’å…¥æ–°è¾“å…¥çš„æ•°æ®(è¿æ¥æ“ä½œ)</span></span><br><span class="line">        r = s; <span class="comment">//ç»§ç»­è®©ræŒ‡é’ˆæŒ‡å‘è¡¨å°¾</span></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;x); <span class="comment">//ç»§ç»­è¾“å…¥ä¸€ä¸ªå€¼ä½œä¸ºæ•°æ®åŸŸ</span></span><br><span class="line">    &#125;</span><br><span class="line">    r-&gt;next = <span class="literal">NULL</span>; <span class="comment">//è¡¨å°¾çš„-&gt;nextåº”ä¸ºNULL</span></span><br><span class="line">    <span class="keyword">return</span> L; <span class="comment">//è¿”å›åˆ›å»ºå¥½çš„å•é“¾è¡¨</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="0x0402-å¤´æ’æ³•"><a href="#0x0402-å¤´æ’æ³•" class="headerlink" title="0x0402 å¤´æ’æ³•"></a>0x0402 å¤´æ’æ³•</h3><blockquote><p>**ç®—æ³•æ€æƒ³: **</p><p>åˆå§‹åŒ–å•é“¾è¡¨;<br>while å¾ªç¯{<br>    æ¯æ¬¡å–ä¸€ä¸ªæ•°æ®å…ƒç´ e;<br>    InsertNextNode(L, e); &#x2F;&#x2F;ä½¿ç”¨ç»“ç‚¹åæ’æ³•æ’å…¥æ•°æ®å…ƒç´ <br>}</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: å¤´æ’æ³•å»ºç«‹å•é“¾è¡¨(å¸¦å¤´ç»“ç‚¹)</span></span><br><span class="line"><span class="comment"> * @param &#123;LinkList&amp;&#125; L</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">LinkList <span class="title function_">List_HeadInsert</span><span class="params">(LinkList&amp; L)</span> &#123;</span><br><span class="line">    LNode* s;</span><br><span class="line">    <span class="type">int</span> e;</span><br><span class="line">    L = (LNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode)); <span class="comment">//åˆ›å»ºå¤´ç»“ç‚¹</span></span><br><span class="line">    L-&gt;next = <span class="literal">NULL</span>; <span class="comment">//åˆå§‹åŒ–ä¸ºç©ºé“¾è¡¨(å¿…è¦,é¿å…è„æ•°æ®)</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;e); <span class="comment">//è¾“å…¥ç»“ç‚¹çš„å€¼</span></span><br><span class="line">    <span class="keyword">while</span> (e != <span class="number">999</span>) &#123; <span class="comment">//æ­¤å¤„999è¡¨ç¤ºè¾“å…¥999åˆ™ç»“æŸè¾“å…¥</span></span><br><span class="line">        s = (LNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LNode)); <span class="comment">//å¼€è¾Ÿä¸€ä¸ªç©ºé—´å­˜æ”¾æ–°çš„ç»“ç‚¹</span></span><br><span class="line">        s-&gt;data = e;</span><br><span class="line">        s-&gt;next = L-&gt;next;</span><br><span class="line">        L-&gt;next = s; <span class="comment">//å°†æ–°çš„ç»“ç‚¹æ’å…¥è¡¨ä¸­,Lä¸ºå¤´æŒ‡é’ˆ</span></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;e);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> L;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…³äºå¤´æ’æ³•çš„åº”ç”¨è¿˜æœ‰å¾ˆé‡è¦çš„ä¸€é¡¹: <strong>é“¾è¡¨çš„é€†ç½®</strong>! å…¶ä¸»è¦æ€æƒ³è¿˜æ˜¯åœ¨äºå¤´æ’æ³•.ğŸ¥³</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
            <tag> ç®—æ³• </tag>
            
            <tag> Cè¯­è¨€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¹¶æŸ¥é›†</title>
      <link href="/2022/04/06/53ef32234a17-q1jun/"/>
      <url>/2022/04/06/53ef32234a17-q1jun/</url>
      
        <content type="html"><![CDATA[<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;map&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line">map&lt;string, string&gt; leader;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> *å¹¶æŸ¥é›†:</span></span><br><span class="line"><span class="comment"> *å¦‚æœè¦åˆ¤æ–­ä¸¤ä¸ªäººæ˜¯å¦å±äºä¸€ä¸ªæœ‹å‹åœˆ,åªéœ€è¦åˆ¤æ–­ä»–ä»¬çš„leaderæ˜¯å¦ä¸ºåŒä¸€ä¸ªäºº,è¿™æ˜¯ä¸€ä¸ªæŸ¥è¯¢çš„è¿‡ç¨‹.</span></span><br><span class="line"><span class="comment"> *å¦‚æœä¸¤ä¸ªäººæ˜¯å¥½å‹å…³ç³»,åˆ™éœ€è¦æŠŠä¸¤ä¸ªäººå¹¶å…¥åŒä¸€ä¸ªæœ‹å‹åœˆ,è¿™æ˜¯ä¸€ä¸ªåˆå¹¶çš„è¿‡ç¨‹.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//æ¯ä¸€è¡Œè¡¨ç¤ºæœ‹å‹å…³ç³»</span></span><br><span class="line">string input[] = &#123;</span><br><span class="line">    <span class="string">&quot;å‘¨èŠ·è‹¥&quot;</span>,<span class="string">&quot;å¼ æ— å¿Œ&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å¼ æ— å¿Œ&quot;</span>,<span class="string">&quot;éŸ©å°æ˜­&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æˆæ˜†&quot;</span>,<span class="string">&quot;é™ˆå‹è°…&quot;</span>,</span><br><span class="line">    <span class="string">&quot;æ¨é€&quot;</span>,<span class="string">&quot;çºªæ™“èŠ™&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•æ¯è¡Œçš„ä¸¤äººæ˜¯å¦ä¸ºæœ‹å‹</span></span><br><span class="line">string test[] = &#123;</span><br><span class="line">    <span class="string">&quot;å‘¨èŠ·è‹¥&quot;</span>,<span class="string">&quot;éŸ©å°æ˜­&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å¼ æ— å¿Œ&quot;</span>,<span class="string">&quot;æˆæ˜†&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setLeader</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> i = <span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> totalPerson = <span class="number">8</span>;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>;i &lt; totalPerson; i++) &#123;</span><br><span class="line">        leader[input[i]] = input[i]; <span class="comment">//å°†è‡ªå·±åˆå§‹åŒ–ä¸ºè‡ªå·±çš„é¢†å¯¼</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŸ¥æ‰¾é¢†å¯¼,çœ‹çœ‹ç©¶ç«Ÿæ˜¯è°</span></span><br><span class="line"><span class="function">string <span class="title">findLeader</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">    string r = s;</span><br><span class="line">    <span class="keyword">while</span> (leader[r] != r) &#123;</span><br><span class="line">        r = leader[r];<span class="comment">//æ²¡æ‰¾åˆ°çš„è¯,ä¸€ç›´å¾€ä¸Šæ‰¾</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†ä¸¤ä¸ªé¢†å¯¼çš„æœ‹å‹åœˆåˆå¹¶,ä»æ­¤ leaderXå’ŒleaderYæ˜¯åŒä¸€ä¸ªæœ‹å‹åœˆäº†</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">uniteSet</span><span class="params">(string leaderX, string leaderY)</span> </span>&#123;</span><br><span class="line">    leader[leaderX] = leaderY;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> numberOfSets = <span class="number">7</span>; <span class="comment">//æœ€å¼€å§‹æœ‰7ä¸ªä¸é‡å¤çš„äºº</span></span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–é¢†å¯¼</span></span><br><span class="line">    <span class="built_in">setLeader</span>();</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> j = <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> n = <span class="number">4</span>; <span class="comment">//äººç‰©å…³ç³»çš„æ•°ç»„æœ‰4è¡Œ</span></span><br><span class="line">    <span class="keyword">for</span> (j = <span class="number">0</span>;j &lt; n;j++) &#123;</span><br><span class="line">        string u = input[i++];</span><br><span class="line">        string v = input[i++];</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ‰¾é¢†å¯¼</span></span><br><span class="line">        u = <span class="built_in">findLeader</span>(u);</span><br><span class="line">        v = <span class="built_in">findLeader</span>(v);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é¢†å¯¼ä¸æƒ³ç­‰,åˆ™åˆå¹¶ä¸¤ä¸ªæœ‹å‹åœˆ</span></span><br><span class="line">        <span class="keyword">if</span> (u != v) &#123;</span><br><span class="line">            <span class="built_in">uniteSet</span>(u, v);</span><br><span class="line">            numberOfSets--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    i = <span class="number">0</span>;</span><br><span class="line">    n = <span class="number">2</span>; <span class="comment">//å¾…æµ‹è¯•äººç‰©å…³ç³»çš„æ•°ç»„æœ‰2è¡Œ</span></span><br><span class="line">    <span class="keyword">for</span> (j = <span class="number">0</span>;j &lt; n;j++) &#123;</span><br><span class="line">        string u = test[i++];</span><br><span class="line">        string v = test[i++];</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ‰¾é¢†å¯¼</span></span><br><span class="line">        u = <span class="built_in">findLeader</span>(u);</span><br><span class="line">        v = <span class="built_in">findLeader</span>(v);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¦‚æœé¢†å¯¼ä¸åŒ,åˆ™ä¸å±äºåŒä¸€ä¸ªæœ‹å‹åœˆ</span></span><br><span class="line">        <span class="keyword">if</span> (u != v) &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;NO&quot;</span> &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123; <span class="comment">//å¦‚æœä¸¤ä¸ªé¢†å¯¼ç›¸åŒ,åˆ™è‚¯å®šå±äºåŒä¸€ä¸ªæœ‹å‹åœˆ</span></span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;YES&quot;</span> &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; numberOfSets &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
            <tag> ç®—æ³• </tag>
            
            <tag> Cè¯­è¨€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[æ•°æ®ç»“æ„]çº¿æ€§è¡¨ä¸­ç®€å•çš„é¡ºåºè¡¨</title>
      <link href="/2022/03/24/8994490181cd-q1jun/"/>
      <url>/2022/03/24/8994490181cd-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="çº¿æ€§è¡¨-Linear-List"><a href="#çº¿æ€§è¡¨-Linear-List" class="headerlink" title="çº¿æ€§è¡¨(Linear List)"></a>çº¿æ€§è¡¨(Linear List)</h1><p>çº¿æ€§è¡¨æ˜¯å…·æœ‰<code>ç›¸åŒæ•°æ®ç±»å‹</code>ï¼Œæ¯ä¸ªæ•°æ®å…ƒç´ <code>æ‰€å ç©ºé—´ä¸€æ ·å¤§</code>çš„nä¸ªæ•°æ®å…ƒç´ çš„<code>æœ‰é™</code>åºåˆ—(æœ‰æ¬¡åº)ã€‚</p><p>L&#x3D;($a_1,a_2,â€¦,a_i,a_{i+1},â€¦,a_n$)</p><p>å…¶ä¸­$a_i$æ˜¯çº¿æ€§è¡¨ä¸­çš„â€œç¬¬iä¸ªâ€å…ƒç´ çº¿æ€§è¡¨ä¸­çš„<code>ä½åº</code></p><p>$a_1$æ˜¯è¡¨å¤´å…ƒç´ ï¼›$a_n$æ˜¯è¡¨å°¾å…ƒç´ ã€‚</p><p>é™¤ç¬¬ä¸€ä¸ªå…ƒç´ å¤–ï¼Œæ¯ä¸ªå…ƒç´ æœ‰ä¸”ä»…æœ‰ä¸€ä¸ª<code>ç›´æ¥å‰é©±</code>ï¼›é™¤æœ€åä¸€ä¸ªå…ƒç´ å¤–ï¼Œæ¯ä¸ªå…ƒç´ æœ‰ä¸”ä»…æœ‰ä¸€ä¸ª<code>ç›´æ¥åç»§</code>ã€‚</p><h2 id="0x01-çº¿æ€§è¡¨çš„å¸¸ç”¨å®ç°å‡½æ•°ï¼š"><a href="#0x01-çº¿æ€§è¡¨çš„å¸¸ç”¨å®ç°å‡½æ•°ï¼š" class="headerlink" title="0x01 çº¿æ€§è¡¨çš„å¸¸ç”¨å®ç°å‡½æ•°ï¼š"></a>0x01 çº¿æ€§è¡¨çš„å¸¸ç”¨å®ç°å‡½æ•°ï¼š</h2><p>InitList(&amp;L): åˆå§‹åŒ–è¡¨ã€‚æ„é€ ä¸€ä¸ªç©ºçš„çº¿æ€§è¡¨Lï¼Œåˆ†é…å†…å­˜ç©ºé—´ã€‚<br>DestroyList(&amp;L)ï¼šé”€æ¯æ“ä½œã€‚é”€æ¯çº¿æ€§è¡¨ï¼Œå¹¶é‡Šæ”¾çº¿æ€§è¡¨Læ‰€å ç”¨çš„å†…å­˜ç©ºé—´ã€‚</p><p>ListInsert(&amp;L,i,e)ï¼šæ’å…¥æ“ä½œã€‚åœ¨è¡¨Lä¸­çš„ç¬¬iä¸ªä½ç½®ä¸Šæ’å…¥æŒ‡å®šå…ƒç´ eã€‚<br>ListDelete(&amp;L,i,&amp;e)ï¼šåˆ é™¤æ“ä½œã€‚åˆ é™¤è¡¨Lä¸­ç¬¬iä¸ªä½ç½®çš„å…ƒç´ ï¼Œå¹¶ç”¨eè¿”å›åˆ é™¤å…ƒç´ çš„å€¼ã€‚</p><p>LocateElem(L,e)ï¼šæŒ‰å€¼æŸ¥æ‰¾æ“ä½œã€‚åœ¨è¡¨Lä¸­æŸ¥æ‰¾å…·æœ‰ç»™å®šå…³é”®å­—å€¼çš„å…ƒç´ ã€‚<br>GetElem(L,i)ï¼šæŒ‰ä½æŸ¥æ‰¾æ“ä½œã€‚è·å–è¡¨Lä¸­ç¬¬iä¸ªä½ç½®çš„å…ƒç´ çš„å€¼ã€‚</p><p>å…¶ä»–å¸¸ç”¨æ“ä½œï¼š Length(L)ï¼šæ±‚è¡¨é•¿ã€‚è¿”å›çº¿æ€§è¡¨Lçš„é•¿åº¦ï¼Œå³Lä¸­æ•°æ®å…ƒç´ çš„ä¸ªæ•°ã€‚<br>PrintList(L)ï¼šè¾“å‡ºæ“ä½œã€‚æŒ‰å‰åé¡ºåºè¾“å‡ºçº¿æ€§è¡¨Lçš„æ‰€æœ‰å…ƒç´ å€¼ã€‚<br>Empty(L)ï¼šåˆ¤ç©ºæ“ä½œã€‚è‹¥Lä¸ºç©ºè¡¨ï¼Œåˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚</p><h2 id="0x02-é¡ºåºè¡¨"><a href="#0x02-é¡ºåºè¡¨" class="headerlink" title="0x02 é¡ºåºè¡¨"></a>0x02 é¡ºåºè¡¨</h2><p>é¡ºåºè¡¨æ˜¯ç”¨<code>é¡ºåºå­˜å‚¨</code>çš„æ–¹å¼å®ç°çº¿æ€§è¡¨ã€‚</p><blockquote><p>é¡ºåºå­˜å‚¨ï¼š</p><p>æŠŠé€»è¾‘ä¸Šç›¸é‚»çš„å…ƒç´ å­˜å‚¨åœ¨ç‰©ç†ä½ç½®ä¸Šä¹Ÿç›¸é‚»çš„å­˜å‚¨å•å…ƒä¸­ï¼Œå…ƒç´ ä¹‹é—´çš„å…³ç³»ç”±å­˜å‚¨å•å…ƒçš„é‚»æ¥å…³ç³»æ¥ä½“ç°ã€‚</p></blockquote><p>é¡ºåºè¡¨çš„ç‰¹ç‚¹ï¼š</p><ol><li>éšæœºè®¿é—®ï¼Œå³å¯åœ¨O(1)çš„æ—¶é—´å†…æ‰¾åˆ°ç¬¬ i ä¸ªå…ƒç´ ã€‚</li><li>å­˜å‚¨å¯†åº¦é«˜ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¹‹å­˜å‚¨æ•°æ®å…ƒç´ ã€‚</li><li>æ‰©å±•å®¹é‡ä¸æ–¹ä¾¿(å³ä¾¿é‡‡ç”¨åŠ¨æ€åˆ†é…çš„æ–¹å¼å®ç°ï¼Œæ‹“å±•é•¿åº¦çš„æ—¶é—´å¤æ‚åº¦ä¹Ÿæ¯”è¾ƒé«˜)ã€‚</li><li>æ’å…¥ã€åˆ é™¤æ“ä½œä¸æ–¹ä¾¿ï¼Œéœ€è¦ç§»åŠ¨å¤§é‡å…ƒç´ ã€‚</li></ol><h3 id="0x0201-é¡ºåºè¡¨â€“é™æ€åˆ†é…"><a href="#0x0201-é¡ºåºè¡¨â€“é™æ€åˆ†é…" class="headerlink" title="0x0201 é¡ºåºè¡¨â€“é™æ€åˆ†é…"></a>0x0201 é¡ºåºè¡¨â€“é™æ€åˆ†é…</h3><p>é™æ€åˆ†é…æ–¹å¼ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> MaxSize 10<span class="comment">//å®šä¹‰æœ€å¤§é•¿åº¦</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">  ElemType data[MaxSize];<span class="comment">//ç”¨é™æ€çš„â€œæ•°ç»„â€æ¥å­˜æ”¾æ•°æ®å…ƒç´ </span></span><br><span class="line">  <span class="type">int</span> length;<span class="comment">//é¡ºåºè¡¨çš„å½“å‰é•¿åº¦</span></span><br><span class="line">&#125;SqList;<span class="comment">//é¡ºåºè¡¨çš„ç±»å‹å®šä¹‰(é™æ€åˆ†é…æ–¹å¼)</span></span><br></pre></td></tr></table></figure><p>ä¸¾ä¸ªæ —å­ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MaxSize 10 <span class="comment">//å®šä¹‰æœ€å¤§é•¿åº¦</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> &#123;</span></span><br><span class="line">    <span class="type">int</span> data[MaxSize];</span><br><span class="line">    <span class="type">int</span> length;</span><br><span class="line">&#125;SqList;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"> * @description: åˆå§‹åŒ–é¡ºåºè¡¨ </span></span><br><span class="line"><span class="comment"> * @param &#123;SqList&amp;&#125; L</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">InitList</span><span class="params">(SqList&amp; L)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>;i &lt; MaxSize; i++) &#123;</span><br><span class="line">        L.data[i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    L.length = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    SqList L; <span class="comment">//å£°æ˜ä¸€ä¸ªé¡ºåºè¡¨</span></span><br><span class="line">    InitList(L); <span class="comment">//åˆå§‹åŒ–é¡ºåºè¡¨</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>;i &lt; L.length; i++) &#123; <span class="comment">//æ‰“å°æ•´ä¸ª data æ•°ç»„</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;data[%d]=%d\n&quot;</span>, i, L.data[i]);</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="comment">//æœ€å¥½ä½¿ç”¨ GetElem(L , i)è¿™ç§æ–¹å¼æ¥è®¿é—®é¡ºåºè¡¨çš„æ•°æ®å…ƒç´ </span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>é¡ºåºè¡¨çš„é™æ€åˆ†é…çš„å±€é™æ€§åœ¨äºé¡ºåºè¡¨çš„è¡¨é•¿åœ¨å¼€å§‹æ—¶å°±è¦ç¡®å®šï¼Œç„¶åå°±æ— æ³•æ›´æ”¹ï¼ˆå­˜å‚¨ç©ºé—´æ˜¯<code>é™æ€</code>çš„ï¼‰ã€‚</p></blockquote><h3 id="0x0202-é¡ºåºè¡¨â€“åŠ¨æ€åˆ†é…"><a href="#0x0202-é¡ºåºè¡¨â€“åŠ¨æ€åˆ†é…" class="headerlink" title="0x0202 é¡ºåºè¡¨â€“åŠ¨æ€åˆ†é…"></a>0x0202 é¡ºåºè¡¨â€“åŠ¨æ€åˆ†é…</h3><p>ä¸ºäº†åŠ¨æ€åˆ†é…å­˜å‚¨ç©ºé—´ï¼Œæé«˜å†…å­˜ç©ºé—´çš„ä½¿ç”¨æ•ˆç‡ï¼Œå¯ä»¥é‡‡ç”¨åŠ¨æ€åˆ†é…çš„åˆ†é…æ–¹å¼ã€‚</p><p>åŠ¨æ€åˆ†é…æ–¹å¼ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> InitSize 10 <span class="comment">//é¡ºåºè¡¨çš„åˆå§‹é•¿åº¦</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">sqlist_dynamic</span> //é¡ºåºè¡¨çš„ç±»å‹å®šä¹‰</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    ElemType* data; <span class="comment">//æŒ‡å‘åŠ¨æ€åˆ†é…æ•°ç»„çš„æŒ‡é’ˆ</span></span><br><span class="line">    <span class="type">int</span> MaxSize; <span class="comment">//é¡ºåºè¡¨çš„æœ€å¤§å®¹é‡</span></span><br><span class="line">    <span class="type">int</span> length; <span class="comment">//é¡ºåºè¡¨çš„å½“å‰é•¿åº¦</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>åŠ¨æ€åˆ†é…ï¼šåŠ¨æ€ç”³è¯·å’Œé‡Šæ”¾å†…å­˜ç©ºé—´ã€‚</p><ul><li>ç”³è¯·ï¼šmallocå‡½æ•°</li><li>é‡Šæ”¾ï¼šfreeå‡½æ•°</li></ul></blockquote><p>ä¸¾ä¸ªæ —å­ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> InitSize 10 <span class="comment">//é¡ºåºè¡¨çš„åˆå§‹é•¿åº¦</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>//é¡ºåºè¡¨çš„ç±»å‹å®šä¹‰</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="type">int</span>* data; <span class="comment">//æŒ‡å‘åŠ¨æ€åˆ†é…æ•°ç»„çš„æŒ‡é’ˆ</span></span><br><span class="line">    <span class="type">int</span> MaxSize; <span class="comment">//é¡ºåºè¡¨çš„æœ€å¤§å®¹é‡</span></span><br><span class="line">    <span class="type">int</span> length; <span class="comment">//é¡ºåºè¡¨çš„å½“å‰é•¿åº¦</span></span><br><span class="line">&#125;Sqlist_dynamic;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: åˆå§‹åŒ–é¡ºåºè¡¨ </span></span><br><span class="line"><span class="comment"> * @param &#123;Sqlist_dynamic&amp;&#125; L</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">InitList</span><span class="params">(Sqlist_dynamic&amp; L)</span> &#123;</span><br><span class="line">    <span class="comment">//ç”¨ malloc å‡½æ•°ç”³è¯·ä¸€ç‰‡è¿ç»­çš„å­˜å‚¨ç©ºé—´</span></span><br><span class="line">    L.data = (<span class="type">int</span>*)<span class="built_in">malloc</span>(InitSize * <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">    L.length = <span class="number">0</span>;</span><br><span class="line">    L.MaxSize = InitSize;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: å¢åŠ åŠ¨æ€æ•°ç»„çš„é•¿åº¦ </span></span><br><span class="line"><span class="comment"> * @param &#123;Sqlist_dynamic&amp;&#125; L</span></span><br><span class="line"><span class="comment"> * @param &#123;int&#125; len</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">IncreaseSize</span><span class="params">(Sqlist_dynamic&amp; L, <span class="type">int</span> len)</span> &#123;</span><br><span class="line">    <span class="type">int</span>* p = L.data;</span><br><span class="line">    L.data = (<span class="type">int</span>*)<span class="built_in">malloc</span>((L.MaxSize + len) * <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; L.length; i++) &#123;</span><br><span class="line">        L.data[i] = p[i]; <span class="comment">//å°†æ•°æ®å¤åˆ¶åˆ°æ–°åŒºåŸŸ</span></span><br><span class="line">    &#125;</span><br><span class="line">    L.MaxSize = L.MaxSize + len; <span class="comment">//é¡ºåºè¡¨æœ€å¤§é•¿åº¦ + len</span></span><br><span class="line">    <span class="built_in">free</span>(p); <span class="comment">//é‡Šæ”¾åŸæ¥çš„å†…å­˜ç©ºé—´</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    Sqlist_dynamic L;</span><br><span class="line">    InitList(L);</span><br><span class="line">    <span class="comment">/* <span class="doctag">TODO:</span> éšæ„æ’å…¥å‡ ä¸ªå…ƒç´  */</span></span><br><span class="line">    IncreaseSize(L, <span class="number">5</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="0x0203-é¡ºåºè¡¨çš„æ’å…¥"><a href="#0x0203-é¡ºåºè¡¨çš„æ’å…¥" class="headerlink" title="0x0203 é¡ºåºè¡¨çš„æ’å…¥"></a>0x0203 é¡ºåºè¡¨çš„æ’å…¥</h3><h4 id="å®ç°ï¼š"><a href="#å®ç°ï¼š" class="headerlink" title="å®ç°ï¼š"></a>å®ç°ï¼š</h4><p>ä¸¾ç¬¬ä¸€ä¸ªæ —å­ğŸŒ°ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: é¡ºåºè¡¨çš„æ’å…¥ï¼Œå°†å…ƒç´ eæ’å…¥iå¤„</span></span><br><span class="line"><span class="comment"> * @param &#123;SqList&amp;&#125; L</span></span><br><span class="line"><span class="comment"> * @param &#123;int&#125; i</span></span><br><span class="line"><span class="comment"> * @param &#123;int&#125; e</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">ListInsert</span><span class="params">(SqList&amp; L, <span class="type">int</span> i, <span class="type">int</span> e)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = L.length;j &gt;= i;j--) &#123; <span class="comment">//å°†ç¬¬iä¸ªå…ƒç´ åŠä¹‹åçš„å…ƒç´ åç§»</span></span><br><span class="line">        L.data[j] = L.data[j - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    L.data[i - <span class="number">1</span>] = e; <span class="comment">//åœ¨ä½ç½®iå¤„æ”¾å…¥e</span></span><br><span class="line">    L.length++; <span class="comment">//é•¿åº¦åŠ 1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤å¤„çœç•¥ï¼š</p><ul><li>åˆ¤æ–­iæ˜¯å¦åˆæ³•ï¼Œå³ <code>i</code> åœ¨<code>[1,length+1]</code>ã€‚</li><li>åˆ¤æ–­é¡ºåºè¡¨æ˜¯å¦å­˜æ»¡ï¼Œè‹¥å­˜æ»¡åˆ™æ— æ³•æ’å…¥æ•°æ®ã€‚</li><li>è¿”å›æ˜¯å¦æ“ä½œæˆåŠŸçš„æç¤ºã€‚</li></ul><p>ä¸¾ç¬¬äºŒä¸ªæ —å­ğŸŒ°ï¼ˆæ”¹è¿›åï¼‰ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: é¡ºåºè¡¨çš„æ’å…¥ï¼Œå°†å…ƒç´ eæ’å…¥iå¤„</span></span><br><span class="line"><span class="comment"> * @param &#123;SqList&amp;&#125; L</span></span><br><span class="line"><span class="comment"> * @param &#123;int&#125; i</span></span><br><span class="line"><span class="comment"> * @param &#123;int&#125; e</span></span><br><span class="line"><span class="comment"> * @return &#123;bool&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">ListInsert_better</span><span class="params">(SqList&amp; L, <span class="type">int</span> i, <span class="type">int</span> e)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (i&lt;<span class="number">1</span> || i&gt;L.length + <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">//åˆ¤æ–­içš„èŒƒå›´æ˜¯å¦åˆæ³•</span></span><br><span class="line">    <span class="keyword">if</span> (L.length &gt;= MaxSize) <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">//åˆ¤æ–­å½“å‰ç©ºé—´æ˜¯å¦èƒ½æ”¾ä¸‹e</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = L.length; j &gt;= i; j--) &#123; <span class="comment">//å°†ç¬¬iä¸ªå…ƒç´ åŠä¹‹åçš„å…ƒç´ åç§»</span></span><br><span class="line">        L.data[j] = L.data[j - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    L.data[i - <span class="number">1</span>] = e; <span class="comment">//åœ¨ä½ç½®iå¤„æ”¾å…¥e</span></span><br><span class="line">    L.length++; <span class="comment">//é•¿åº¦åŠ 1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">//æ’å…¥æˆåŠŸï¼Œè¿”å›true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ—¶é—´å¤æ‚åº¦åˆ†æï¼š"><a href="#æ—¶é—´å¤æ‚åº¦åˆ†æï¼š" class="headerlink" title="æ—¶é—´å¤æ‚åº¦åˆ†æï¼š"></a>æ—¶é—´å¤æ‚åº¦åˆ†æï¼š</h4><p><strong>æœ€å¥½æƒ…å†µ</strong>ï¼šæ–°å…ƒç´ æ’å…¥åˆ°è¡¨å°¾ï¼Œä¸éœ€è¦ç§»åŠ¨å…ƒç´ ã€‚<br>i &#x3D; n + 1ï¼Œå¾ªç¯0æ¬¡ï¼›æœ€å¥½æ—¶é—´å¤æ‚åº¦ &#x3D; $O(1)$</p><p><strong>æœ€åæƒ…å†µ</strong>ï¼šæ–°å…ƒç´ æ’å…¥åˆ°è¡¨å¤´ï¼Œéœ€è¦å°†nä¸ªå…ƒç´ å…¨éƒ¨å‘åç§»åŠ¨<br>i &#x3D; 1ï¼Œå¾ªç¯næ¬¡ï¼›æœ€åæ—¶é—´å¤æ‚åº¦ &#x3D; $O(n)$</p><p><strong>å¹³å‡æƒ…å†µ</strong>ï¼šæ–°å…ƒç´ æ’å…¥åˆ°ä»»ä½•ä¸€ä¸ªä½ç½®çš„æ¦‚ç‡ç›¸åŒï¼Œå³ i &#x3D; 1,2,3,â€¦â€¦,length+1 çš„æ¦‚ç‡éƒ½æ˜¯$p &#x3D; 1&#x2F;(n+1)$<br>å½“i &#x3D; 1ï¼Œå¾ªç¯næ¬¡ï¼›å½“i &#x3D; 2æ—¶ï¼Œå¾ªç¯n - 1æ¬¡ï¼›å½“i &#x3D; 3æ—¶ï¼Œå¾ªç¯n - 2æ¬¡ï¼›â€¦â€¦å½“i &#x3D; n + 1æ—¶,å¾ªç¯0æ¬¡ã€‚<br>å¹³å‡å¾ªç¯æ¬¡æ•° &#x3D; $np+(n-1)p+(n-2)p+â€¦â€¦+1Â·p &#x3D; [\frac{n(n+1)}2]Â·[\frac{1}{n+1}]&#x3D;\frac{n}2$<br>$\therefore$ å¹³å‡æ—¶é—´å¤æ‚åº¦ &#x3D; $O(n)$</p><h3 id="0x0204-é¡ºåºè¡¨çš„åˆ é™¤"><a href="#0x0204-é¡ºåºè¡¨çš„åˆ é™¤" class="headerlink" title="0x0204 é¡ºåºè¡¨çš„åˆ é™¤"></a>0x0204 é¡ºåºè¡¨çš„åˆ é™¤</h3><h4 id="å®ç°ï¼š-1"><a href="#å®ç°ï¼š-1" class="headerlink" title="å®ç°ï¼š"></a>å®ç°ï¼š</h4><p>ä¸¾ä¸ªæ —å­ğŸŒ°ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: åˆ é™¤æ“ä½œã€‚åˆ é™¤è¡¨Lä¸­ç¬¬iä¸ªä½ç½®çš„å…ƒç´ ï¼Œå¹¶ç”¨eè¿”å›åˆ é™¤å…ƒç´ çš„å€¼ã€‚</span></span><br><span class="line"><span class="comment"> * @param &#123;SqList&amp;&#125; L</span></span><br><span class="line"><span class="comment"> * @param &#123;int&#125; i</span></span><br><span class="line"><span class="comment"> * @param &#123;int&amp;&#125; e</span></span><br><span class="line"><span class="comment"> * @return &#123;bool&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">ListDelete</span><span class="params">(SqList&amp; L, <span class="type">int</span> i, <span class="type">int</span>&amp; e)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (i&lt;<span class="number">1</span> || i&gt;L.length) <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">//åˆ¤æ–­içš„èŒƒå›´æ˜¯å¦æœ‰æ•ˆ</span></span><br><span class="line">    e = L.data[i - <span class="number">1</span>]; <span class="comment">//å°†è¢«åˆ é™¤çš„å…ƒç´ å€¼èµ‹å€¼ç»™e</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = i;j &lt; L.length;j++) &#123; <span class="comment">//å°†ç¬¬iä¸ªä½ç½®åçš„å…ƒç´ å‰ç§»</span></span><br><span class="line">        L.data[j - <span class="number">1</span>] = L.data[j];</span><br><span class="line">    &#125;</span><br><span class="line">    L.length--; <span class="comment">//çº¿æ€§è¡¨é•¿åº¦å‡1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">//è¿”å›tureï¼Œåˆ é™¤æ“ä½œæˆåŠŸã€‚</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ—¶é—´å¤æ‚åº¦åˆ†æï¼š-1"><a href="#æ—¶é—´å¤æ‚åº¦åˆ†æï¼š-1" class="headerlink" title="æ—¶é—´å¤æ‚åº¦åˆ†æï¼š"></a>æ—¶é—´å¤æ‚åº¦åˆ†æï¼š</h4><p>åˆ é™¤æ“ä½œçš„æ—¶é—´å¤æ‚åº¦å’Œæ’å…¥æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ç›¸åŒã€‚</p><h3 id="0x0205-é¡ºåºè¡¨çš„æŸ¥æ‰¾-æŒ‰ä½æŸ¥æ‰¾"><a href="#0x0205-é¡ºåºè¡¨çš„æŸ¥æ‰¾-æŒ‰ä½æŸ¥æ‰¾" class="headerlink" title="0x0205 é¡ºåºè¡¨çš„æŸ¥æ‰¾(æŒ‰ä½æŸ¥æ‰¾)"></a>0x0205 é¡ºåºè¡¨çš„æŸ¥æ‰¾(æŒ‰ä½æŸ¥æ‰¾)</h3><h4 id="å®ç°ï¼š-2"><a href="#å®ç°ï¼š-2" class="headerlink" title="å®ç°ï¼š"></a>å®ç°ï¼š</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: æŸ¥æ‰¾ç¬¬iä¸ªå…ƒç´ ï¼Œè¿”å›ç»™å®šå€¼.</span></span><br><span class="line"><span class="comment"> * @param &#123;SqList&#125; L</span></span><br><span class="line"><span class="comment"> * @param &#123;int&#125; i</span></span><br><span class="line"><span class="comment"> * @return &#123;int&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">ElemType <span class="title function_">GetElemByIndex</span><span class="params">(SqList L, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> L.data[i - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ—¶é—´å¤æ‚åº¦åˆ†æï¼š-2"><a href="#æ—¶é—´å¤æ‚åº¦åˆ†æï¼š-2" class="headerlink" title="æ—¶é—´å¤æ‚åº¦åˆ†æï¼š"></a>æ—¶é—´å¤æ‚åº¦åˆ†æï¼š</h4><p>ç›´æ¥è¿”å›å€¼ï¼Œæ—¶é—´å¤æ‚åº¦ &#x3D; $O\left(1\right)$</p><h3 id="0x0206-é¡ºåºè¡¨çš„æŸ¥æ‰¾-æŒ‰å€¼æŸ¥æ‰¾"><a href="#0x0206-é¡ºåºè¡¨çš„æŸ¥æ‰¾-æŒ‰å€¼æŸ¥æ‰¾" class="headerlink" title="0x0206 é¡ºåºè¡¨çš„æŸ¥æ‰¾(æŒ‰å€¼æŸ¥æ‰¾)"></a>0x0206 é¡ºåºè¡¨çš„æŸ¥æ‰¾(æŒ‰å€¼æŸ¥æ‰¾)</h3><h4 id="å®ç°ï¼š-3"><a href="#å®ç°ï¼š-3" class="headerlink" title="å®ç°ï¼š"></a>å®ç°ï¼š</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*** </span></span><br><span class="line"><span class="comment"> * @description: æŸ¥æ‰¾å…·æœ‰ç»™å®šå…³é”®å­—å€¼çš„å…ƒç´ </span></span><br><span class="line"><span class="comment"> * @param &#123;SqList&#125; L</span></span><br><span class="line"><span class="comment"> * @param &#123;int&#125; e</span></span><br><span class="line"><span class="comment"> * @return &#123;*&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">GetElemByValue</span><span class="params">(SqList L, <span class="type">int</span> e)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; L.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (L.data[i] == e) &#123;</span><br><span class="line">            <span class="keyword">return</span> i + <span class="number">1</span>; <span class="comment">//æ•°ç»„ä¸‹æ ‡ä¸ºiçš„å…ƒç´ å€¼ç­‰äºeï¼Œè¿”å›å…¶ä½åºi+1</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>; <span class="comment">//é€€å‡ºäº†å¾ªç¯ï¼Œè¯´æ˜æŸ¥æ‰¾å¤±è´¥</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>psï¼šCè¯­è¨€ä¸­ä¸èƒ½ç”¨<code>==</code>æ¥ç›´æ¥æ¯”è¾ƒä¸¤ä¸ªç»“æ„ä½“å˜é‡ã€‚</p></blockquote><h4 id="æ—¶é—´å¤æ‚åº¦åˆ†æï¼š-3"><a href="#æ—¶é—´å¤æ‚åº¦åˆ†æï¼š-3" class="headerlink" title="æ—¶é—´å¤æ‚åº¦åˆ†æï¼š"></a>æ—¶é—´å¤æ‚åº¦åˆ†æï¼š</h4><p><strong>æœ€å¥½æƒ…å†µ</strong>ï¼šç›®æ ‡å…ƒç´ åœ¨è¡¨å¤´ã€‚<br>å¾ªç¯1æ¬¡ï¼›æœ€å¥½æ—¶é—´å¤æ‚åº¦ &#x3D; $O(1)$</p><p><strong>æœ€åæƒ…å†µ</strong>ï¼šç›®æ ‡å…ƒç´ åœ¨è¡¨å°¾<br>å¾ªç¯næ¬¡ï¼›æœ€åæ—¶é—´å¤æ‚åº¦ &#x3D; $O(n)$</p><p><strong>å¹³å‡æƒ…å†µ</strong>ï¼šå‡è®¾ç›®æ ‡å…ƒç´ å‡ºç°åœ¨ä»»ä½•ä¸€ä¸ªä½ç½®çš„æ¦‚ç‡ç›¸åŒï¼Œæ¦‚ç‡éƒ½æ˜¯$p &#x3D; \cfrac 1n$<br>å¹³å‡å¾ªç¯æ¬¡æ•° &#x3D; $1\cdot\cfrac1n+2\cdot\cfrac1n+3\cdot\cfrac1n+â€¦â€¦+n\cdot\cfrac1n &#x3D; [\frac{n(n+1)}2]Â·[\frac{1}{n}]&#x3D;\frac{n+1}2$<br>$\therefore$ å¹³å‡æ—¶é—´å¤æ‚åº¦ &#x3D; $O(n)$</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®ç»“æ„ </tag>
            
            <tag> ç®—æ³• </tag>
            
            <tag> Cè¯­è¨€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Pythonåº“åˆ†ç¦»RSAçš„nå’Œe</title>
      <link href="/2022/01/12/2e9d266f63b6-q1jun/"/>
      <url>/2022/01/12/2e9d266f63b6-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="Pythonåˆ†ç¦»RSAå…¬é’¥çš„nå’Œeå‚æ•°"><a href="#Pythonåˆ†ç¦»RSAå…¬é’¥çš„nå’Œeå‚æ•°" class="headerlink" title="Pythonåˆ†ç¦»RSAå…¬é’¥çš„nå’Œeå‚æ•°"></a>Pythonåˆ†ç¦»RSAå…¬é’¥çš„nå’Œeå‚æ•°</h1><p>ç›´æ¥æ‰“å¼€å…¬é’¥æ–‡ä»¶é€šè¿‡<code>RSA.importKey(key).n</code>å’Œ <code>RSA.importKey(key).e</code>è¿›è¡Œå¤„ç†ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> Crypto.PublicKey <span class="keyword">import</span> RSA</span><br><span class="line"><span class="keyword">from</span> Crypto.Cipher <span class="keyword">import</span> PKCS1_OAEP</span><br><span class="line"><span class="keyword">import</span> gmpy2</span><br><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">import</span> rsa</span><br><span class="line">pub = <span class="built_in">open</span>(<span class="string">r&quot;~/key.pub&quot;</span>,<span class="string">&#x27;r&#x27;</span>).read()</span><br><span class="line">n = RSA.importKey(pub).n</span><br><span class="line">e = RSA.importKey(pub).e</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå®‰å…¨ </category>
          
          <category> Crypto </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå®‰å…¨ </tag>
            
            <tag> Python </tag>
            
            <tag> RSA </tag>
            
            <tag> Crypto </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºRSAçš„éå¯¹ç§°åŠ å¯†ç®—æ³•åŠ å¯†SSHè¿œç¨‹ç®¡ç†</title>
      <link href="/2021/12/29/76799cf501fc-q1jun/"/>
      <url>/2021/12/29/76799cf501fc-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºäºRSAçš„éå¯¹ç§°åŠ å¯†ç®—æ³•åŠ å¯†SSHè¿œç¨‹ç®¡ç†"><a href="#åŸºäºRSAçš„éå¯¹ç§°åŠ å¯†ç®—æ³•åŠ å¯†SSHè¿œç¨‹ç®¡ç†" class="headerlink" title="åŸºäºRSAçš„éå¯¹ç§°åŠ å¯†ç®—æ³•åŠ å¯†SSHè¿œç¨‹ç®¡ç†"></a>åŸºäºRSAçš„éå¯¹ç§°åŠ å¯†ç®—æ³•åŠ å¯†SSHè¿œç¨‹ç®¡ç†</h1><h2 id="0x01-å‰è¨€ï¼š"><a href="#0x01-å‰è¨€ï¼š" class="headerlink" title="0x01 å‰è¨€ï¼š"></a>0x01 å‰è¨€ï¼š</h2><p>ä¸€èˆ¬çš„å¯†ç æ–¹å¼ç™»å½•ï¼Œå®¹æ˜“æœ‰å¯†ç è¢«æš´åŠ›ç ´è§£çš„é—®é¢˜ã€‚æ‰€ä»¥ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¼šå°† SSH çš„ç«¯å£è®¾ç½®ä¸ºé»˜è®¤çš„ 22 ä»¥å¤–çš„ç«¯å£ï¼Œæˆ–è€…ç¦ç”¨ root è´¦æˆ·ç™»å½•ã€‚å…¶å®ï¼Œæœ‰ä¸€ä¸ªæ›´å¥½çš„åŠæ³•æ¥ä¿è¯å®‰å…¨ï¼Œè€Œä¸”è®©ä½ å¯ä»¥æ”¾å¿ƒåœ°ç”¨ root è´¦æˆ·ä»è¿œç¨‹ç™»å½•â€”â€”é‚£å°±æ˜¯é€šè¿‡å¯†é’¥æ–¹å¼ç™»å½•ã€‚</p><p>å¯†é’¥å½¢å¼ç™»å½•çš„åŸç†æ˜¯ï¼šåˆ©ç”¨å¯†é’¥ç”Ÿæˆå™¨åˆ¶ä½œä¸€å¯¹å¯†é’¥â€”â€”ä¸€åªå…¬é’¥å’Œä¸€åªç§é’¥ã€‚å°†å…¬é’¥æ·»åŠ åˆ°æœåŠ¡å™¨çš„æŸä¸ªè´¦æˆ·ä¸Šï¼Œç„¶ååœ¨å®¢æˆ·ç«¯åˆ©ç”¨ç§é’¥å³å¯å®Œæˆè®¤è¯å¹¶ç™»å½•ã€‚è¿™æ ·ä¸€æ¥ï¼Œæ²¡æœ‰ç§é’¥ï¼Œä»»ä½•äººéƒ½æ— æ³•é€šè¿‡ SSH æš´åŠ›ç ´è§£ä½ çš„å¯†ç æ¥è¿œç¨‹ç™»å½•åˆ°ç³»ç»Ÿã€‚æ­¤å¤–ï¼Œå¦‚æœå°†å…¬é’¥å¤åˆ¶åˆ°å…¶ä»–è´¦æˆ·ç”šè‡³ä¸»æœºï¼Œåˆ©ç”¨ç§é’¥ä¹Ÿå¯ä»¥ç™»å½•ã€‚</p><p>ä¸‹é¢æ¥è®²è§£å¦‚ä½•åœ¨ Linux æœåŠ¡å™¨ä¸Šåˆ¶ä½œå¯†é’¥å¯¹ï¼Œå°†å…¬é’¥æ·»åŠ ç»™è´¦æˆ·ï¼Œè®¾ç½® SSHï¼Œæœ€åé€šè¿‡å®¢æˆ·ç«¯ç™»å½•ã€‚</p><h2 id="0x02-åˆ¶ä½œå¯†é’¥å¯¹"><a href="#0x02-åˆ¶ä½œå¯†é’¥å¯¹" class="headerlink" title="0x02 åˆ¶ä½œå¯†é’¥å¯¹"></a>0x02 åˆ¶ä½œå¯†é’¥å¯¹</h2><p>é¦–å…ˆåœ¨æœåŠ¡å™¨ä¸Šåˆ¶ä½œå¯†é’¥å¯¹ã€‚é¦–å…ˆç”¨å¯†ç ç™»å½•åˆ°ä½ æ‰“ç®—ä½¿ç”¨å¯†é’¥ç™»å½•çš„è´¦æˆ·ï¼Œç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@q1jun ~]<span class="comment"># ssh-keygen</span></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/root/.ssh/id_rsa):<span class="comment">#è¿™é‡Œç›´æ¥å›è½¦ï¼Œä½¿ç”¨é»˜è®¤åœ°å€ </span></span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase):<span class="comment">#ä½¿ç”¨å¯†é’¥é”ç ï¼Œä¹Ÿå¯ä»¥å›è½¦ç•™ç©º</span></span><br><span class="line">Enter same passphrase again:<span class="comment">#ç¡®è®¤å¯†é’¥é”ç </span></span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.<span class="comment">#ç§é’¥</span></span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.pub.<span class="comment">#å…¬é’¥</span></span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:A86JqHd+I7WL4MKmSN3+ImhYOSh0C9BmLcQW/v1qZsE root@q1jun</span><br><span class="line">The key<span class="string">&#x27;s randomart image is:</span></span><br><span class="line"><span class="string">+---[RSA 3072]----+</span></span><br><span class="line"><span class="string">| +oo             |</span></span><br><span class="line"><span class="string">|..B .            |</span></span><br><span class="line"><span class="string">|.+..  .          |</span></span><br><span class="line"><span class="string">| o + = o         |</span></span><br><span class="line"><span class="string">|..+.+.= S        |</span></span><br><span class="line"><span class="string">|o.=.. E. .       |</span></span><br><span class="line"><span class="string">|=o+o.o o.        |</span></span><br><span class="line"><span class="string">|=B =ooB.         |</span></span><br><span class="line"><span class="string">|*.. +B=+         |</span></span><br><span class="line"><span class="string">+----[SHA256]-----+</span></span><br></pre></td></tr></table></figure><blockquote><p>å¯†é’¥é”ç åœ¨ä½¿ç”¨ç§é’¥æ—¶å¿…é¡»è¾“å…¥ï¼Œè¿™æ ·å°±å¯ä»¥ä¿æŠ¤ç§é’¥ä¸è¢«ç›—ç”¨ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ç•™ç©ºï¼Œå®ç°æ— å¯†ç ç™»å½•ã€‚</p></blockquote><blockquote><p>ç°åœ¨ï¼Œåœ¨ root ç”¨æˆ·çš„å®¶ç›®å½•ä¸­ç”Ÿæˆäº†ä¸€ä¸ª .ssh çš„éšè—ç›®å½•ï¼Œå†…å«ä¸¤ä¸ªå¯†é’¥æ–‡ä»¶ã€‚id_rsa ä¸ºç§é’¥ï¼Œid_rsa.pub ä¸ºå…¬é’¥ã€‚</p></blockquote><h2 id="0x03-åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…å…¬é’¥"><a href="#0x03-åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…å…¬é’¥" class="headerlink" title="0x03 åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…å…¬é’¥"></a>0x03 åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…å…¬é’¥</h2><p>å°†ç”Ÿæˆçš„å…¬é’¥å®‰è£…åˆ°æœåŠ¡å™¨ä¸­ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¿›å…¥å®‰è£…å¯†é’¥çš„ç›®å½•</span></span><br><span class="line">[root@q1jun ~]<span class="comment"># cd .ssh/ </span></span><br><span class="line">[root@q1jun .ssh]<span class="comment"># ll</span></span><br><span class="line">æ€»ç”¨é‡ 12</span><br><span class="line">-rw------- 1 root root    0 11æœˆ 21 11:40 authorized_keys</span><br><span class="line">-rw------- 1 root root 2635 1æœˆ  24 11:05 id_rsa</span><br><span class="line">-rw-r--r-- 1 root root  564 1æœˆ  24 11:05 id_rsa.pub</span><br><span class="line">-rw-r--r-- 1 root root  175 1æœˆ  10 22:16 known_hosts</span><br><span class="line"><span class="comment">#æŸ¥çœ‹å…¬é’¥</span></span><br><span class="line">[root@q1jun .ssh]<span class="comment"># cat id_rsa.pub</span></span><br><span class="line">ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQCscE1/PJL6/vB5+8FD/duxETJgUsirUzJr1n448IrS4tEbRuTgDuNMdPTp3qZ/tIL+c5/1GyOnpeWEvSCbC2hMAAI5FBSfbhxNlF3JkgUJIeE64EaUHmQhuFVNhRLnFySox96RxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxXhlvmhevCmfC2f96G6ZUfcUv8wNudCEKTDIdDrZSOzg9N9l7l/lenRVM878vhEplMdqYEXKZF77UM9B6zBl8dLksBW7+Jt6EwUGN96/7HSpCKHlLIn4sDPVBaFrX+R0XnhCvbLN6yWIxY56khkHHd+M2W1C/8vmG4wZ7/Q95xOhqcOwDRmRoFU= root@q1jun</span><br><span class="line"><span class="comment">#å®‰è£…å…¬é’¥</span></span><br><span class="line">[root@q1jun .ssh]<span class="comment"># cat id_rsa.pub &gt;&gt; authorized_keys</span></span><br><span class="line"><span class="comment">#ä¸ºäº†ç¡®ä¿è¿æ¥æˆåŠŸï¼Œè¯·ä¿è¯ä»¥ä¸‹æ–‡ä»¶æƒé™æ­£ç¡®ï¼Œåœ¨å½“å‰æ–‡ä»¶å¤¹è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤</span></span><br><span class="line">[root@q1jun .ssh]<span class="comment"># chmod 600 authorized_keys</span></span><br><span class="line">[root@q1jun .ssh]<span class="comment"># chmod 700 ~/.ssh/</span></span><br></pre></td></tr></table></figure><h2 id="0x04-è®¾ç½®SSHï¼Œæ‰“å¼€å¯†é’¥ç™»å…¥åŠŸèƒ½"><a href="#0x04-è®¾ç½®SSHï¼Œæ‰“å¼€å¯†é’¥ç™»å…¥åŠŸèƒ½" class="headerlink" title="0x04 è®¾ç½®SSHï¼Œæ‰“å¼€å¯†é’¥ç™»å…¥åŠŸèƒ½"></a>0x04 è®¾ç½®SSHï¼Œæ‰“å¼€å¯†é’¥ç™»å…¥åŠŸèƒ½</h2><p>ç¼–è¾‘<code>/etc/ssh/sshd_config</code>æ–‡ä»¶ï¼Œä¿®æ”¹ä»¥ä¸‹è®¾ç½®:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RSAAuthentication <span class="built_in">yes</span></span><br><span class="line">PubkeyAuthentication <span class="built_in">yes</span></span><br></pre></td></tr></table></figure><p>å¦å¤–ï¼Œè¯·ç•™æ„ root ç”¨æˆ·èƒ½å¦é€šè¿‡ SSH ç™»å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PermitRootLogin <span class="built_in">yes</span></span><br></pre></td></tr></table></figure><p>å½“ä½ å®Œæˆå…¨éƒ¨è®¾ç½®ï¼Œå¹¶ä»¥å¯†é’¥æ–¹å¼ç™»å½•æˆåŠŸåï¼Œå†ç¦ç”¨å¯†ç ç™»å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PasswordAuthentication no</span><br></pre></td></tr></table></figure><p>é‡å¯SSHæœåŠ¡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@q1jun ssh]<span class="comment"># systemctl restart sshd</span></span><br></pre></td></tr></table></figure><h2 id="0x05-å°†ç§é’¥ä¸‹è½½åˆ°å®¢æˆ·ç«¯"><a href="#0x05-å°†ç§é’¥ä¸‹è½½åˆ°å®¢æˆ·ç«¯" class="headerlink" title="0x05 å°†ç§é’¥ä¸‹è½½åˆ°å®¢æˆ·ç«¯"></a>0x05 å°†ç§é’¥ä¸‹è½½åˆ°å®¢æˆ·ç«¯</h2><p>è¿™é‡Œå°†ä»‹ç»å››ç§åœ¨æœåŠ¡å™¨ä¸æœ¬åœ°ä¹‹é—´ä¼ è¾“æ–‡ä»¶çš„æ–¹å¼ï¼Œæœ¬äººå€¾å‘äºä½¿ç”¨å‰ä¸¤ç§å³<code>sftp</code>å’Œ<code>scp</code>ï¼Œå…¶ä»–ä¸¤ç§ä¸åšæ¼”ç¤ºã€‚</p><h3 id="0x0501-æ–‡ä»¶ä¼ è¾“ï¼šsftp"><a href="#0x0501-æ–‡ä»¶ä¼ è¾“ï¼šsftp" class="headerlink" title="0x0501 æ–‡ä»¶ä¼ è¾“ï¼šsftp"></a>0x0501 æ–‡ä»¶ä¼ è¾“ï¼šsftp</h3><p>å¯ä»¥é€šè¿‡<code>sftp</code>å°†æœåŠ¡å™¨çš„<code>id_rsa</code>ç§é’¥ä¸‹è½½åˆ°æœ¬åœ°ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">â¯ sftp root@120.27.131.99</span><br><span class="line">root@120.27.131.99<span class="string">&#x27;s password: #è¾“å…¥æœåŠ¡å™¨å¯†ç </span></span><br><span class="line"><span class="string">Connected to 120.27.131.99.</span></span><br><span class="line"><span class="string">sftp&gt; get /root/.ssh/id_rsa</span></span><br><span class="line"><span class="string">Fetching /root/.ssh/id_rsa to id_rsa</span></span><br><span class="line"><span class="string">/root/.ssh/id_rsa                             100% 2635    44.4KB/s   00:00</span></span><br><span class="line"><span class="string">#é€€å‡ºï¼Œæˆ–è€…æŒ‰CTRL+cï¼ˆMac: control+cï¼‰</span></span><br><span class="line"><span class="string">sftp&gt; exit</span></span><br></pre></td></tr></table></figure><p>Secure Ftp æ˜¯ä¸€ä¸ªåŸºäºSSHå®‰å…¨åè®®çš„æ–‡ä»¶ä¼ è¾“ç®¡ç†å·¥å…·ã€‚ç”±äºå®ƒæ˜¯åŸºäºSSHçš„ï¼Œä¼šåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å¯¹ç”¨æˆ·çš„å¯†ç ã€æ•°æ®ç­‰æ•æ„Ÿä¿¡æ¯è¿›è¡ŒåŠ å¯†ï¼Œå› æ­¤å¯ä»¥æœ‰æ•ˆçš„é˜²æ­¢ç”¨æˆ·ä¿¡æ¯åœ¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­è¢«çªƒå–ï¼Œæ¯”FTPæœ‰æ›´é«˜çš„å®‰å…¨æ€§ã€‚åœ¨åŠŸèƒ½æ–¹é¢ä¸FTPå¾ˆç±»ä¼¼ï¼Œä¸ä»…å¯ä»¥ä¼ è¾“æ–‡ä»¶æ•°æ®ï¼Œè€Œä¸”å¯ä»¥è¿›è¡Œè¿œç¨‹çš„æ–‡ä»¶ç®¡ç†ï¼ˆå¦‚å»ºç«‹ï¼Œåˆ é™¤ï¼ŒæŸ¥çœ‹æ–‡ä»¶åˆ—è¡¨ç­‰æ“ä½œï¼‰ã€‚Sftpä¸ftpè™½ç„¶åªæœ‰ä¸€å­—ä¹‹å·®ï¼Œä½†åŸºäºçš„ä¼ è¾“åè®®å´æ˜¯ä¸åŒçš„ã€‚å› æ­¤ä¸èƒ½ç”¨sftp clientå»è¿æ¥ftp server ä¹Ÿä¸èƒ½ç”¨ ftp client å»è¿æ¥ sftp serverã€‚</p><p>å»ºç«‹è¿æ¥ï¼š<code>sftp user@host</code></p><p>ä»æœ¬åœ°ä¸Šä¼ æ–‡ä»¶ï¼š<code>put localpath</code></p><p>ä¸‹è½½æ–‡ä»¶ï¼š<code>get remotepath</code></p><p>ä¸è¿œç¨‹ç›¸å¯¹åº”çš„æœ¬åœ°æ“ä½œï¼Œåªéœ€è¦åœ¨å‘½ä»¤å‰åŠ ä¸Šâ€lâ€ å³å¯ï¼Œæ–¹ä¾¿å¥½è®°ã€‚</p><p>ä¾‹å¦‚ï¼š<code>lcd lpwd lmkdir</code></p><h3 id="0x0502-æ–‡ä»¶ä¼ è¾“ï¼šscp"><a href="#0x0502-æ–‡ä»¶ä¼ è¾“ï¼šscp" class="headerlink" title="0x0502 æ–‡ä»¶ä¼ è¾“ï¼šscp"></a>0x0502 æ–‡ä»¶ä¼ è¾“ï¼šscp</h3><p>ä¸ªäººè¿˜æ˜¯æ¯”è¾ƒå–œæ¬¢ä½¿ç”¨<code>scp</code>æ¥è¿œç¨‹ä¼ è¾“æ–‡ä»¶çš„ï¼Œé€šè¿‡<code>scp</code>å°†æœåŠ¡å™¨çš„<code>id_rsa</code>ç§é’¥ä¸‹è½½åˆ°æœ¬åœ°ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">â¯ scp root@120.27.131.99:/root/.ssh/id_rsa ~/</span><br><span class="line">root@120.27.131.99<span class="string">&#x27;s password:#è¾“å…¥æœåŠ¡å™¨å¯†ç </span></span><br><span class="line"><span class="string">id_rsa                                 100% 2635    74.4KB/s   00:00</span></span><br></pre></td></tr></table></figure><p>SCP ï¼šsecure copy (remote file copy program) ä¹Ÿæ˜¯ä¸€ä¸ªåŸºäºSSHå®‰å…¨åè®®çš„æ–‡ä»¶ä¼ è¾“å‘½ä»¤ã€‚ä¸sftpä¸åŒçš„æ˜¯ï¼Œå®ƒåªæä¾›ä¸»æœºé—´çš„æ–‡ä»¶ä¼ è¾“åŠŸèƒ½ï¼Œæ²¡æœ‰æ–‡ä»¶ç®¡ç†çš„åŠŸèƒ½ã€‚</p><p>å¤åˆ¶<code>local_file</code> åˆ°è¿œç¨‹ç›®å½•<code>remote_folder</code>ä¸‹</p><p><code>scp local_file remote_user@host:remote_folder</code></p><p>å¤åˆ¶<code>local_folder</code> åˆ°è¿œç¨‹<code>remote_folder</code>ï¼ˆéœ€è¦åŠ å‚æ•° -r é€’å½’ï¼‰</p><p><code>scp â€“r local_folder remote_user@host:remote_folder</code></p><p>ä»¥ä¸Šå‘½ä»¤åè¿‡æ¥å†™å°±æ˜¯è¿œç¨‹å¤åˆ¶åˆ°æœ¬åœ°</p><h2 id="0x0503-æ–‡ä»¶ä¼ è¾“ï¼šsz-x2F-rz"><a href="#0x0503-æ–‡ä»¶ä¼ è¾“ï¼šsz-x2F-rz" class="headerlink" title="0x0503 æ–‡ä»¶ä¼ è¾“ï¼šsz&#x2F;rz"></a>0x0503 æ–‡ä»¶ä¼ è¾“ï¼šsz&#x2F;rz</h2><p>sz&#x2F;rz æ˜¯åŸºäºZModemä¼ è¾“åè®®çš„å‘½ä»¤ã€‚å¯¹ä¼ è¾“çš„æ•°æ®ä¼šè¿›è¡Œæ ¸æŸ¥ï¼Œå¹¶ä¸”æœ‰å¾ˆå¥½çš„ä¼ è¾“æ€§èƒ½ã€‚ä½¿ç”¨èµ·æ¥æ›´æ˜¯éå¸¸æ–¹ä¾¿ï¼Œä½†å‰ææ˜¯windowç«¯éœ€è¦æœ‰èƒ½å¤Ÿæ”¯æŒZModemçš„telnetæˆ–è€…SSHå®¢æˆ·ç«¯ï¼Œä¾‹å¦‚secureCRTã€‚</p><p>é¦–å…ˆéœ€è¦åœ¨secureCRTä¸­å¯ä»¥é…ç½®ç›¸å…³çš„æœ¬åœ°ä¸‹è½½å’Œä¸Šä¼ ç›®å½•ï¼Œç„¶åç”¨rzã€szå‘½ä»¤å³å¯æ–¹ä¾¿çš„ä¼ è¾“æ–‡ä»¶æ•°æ®ã€‚</p><p>ä¸‹è½½æ•°æ®åˆ°æœ¬åœ°ä¸‹è½½ç›®å½•ï¼šsz filename1 filename2 â€¦</p><p>ä¸Šä¼ æ•°æ®åˆ°è¿œç¨‹ï¼šæ‰§è¡Œrz â€“be å‘½ä»¤ï¼Œå®¢æˆ·ç«¯ä¼šå¼¹å‡ºä¸Šä¼ çª—å£ï¼Œç”¨æˆ·è‡ªè¡Œé€‰æ‹©(å¯å¤šé€‰)è¦ä¸Šä¼ çš„æ–‡ä»¶å³å¯ã€‚</p><h2 id="0x0504-æ–‡ä»¶ä¼ è¾“ï¼šrcp"><a href="#0x0504-æ–‡ä»¶ä¼ è¾“ï¼šrcp" class="headerlink" title="0x0504 æ–‡ä»¶ä¼ è¾“ï¼šrcp"></a>0x0504 æ–‡ä»¶ä¼ è¾“ï¼šrcp</h2><p>rcpä¸æ˜¯ä¸€ç§å®‰å…¨çš„çš„ä¼ è¾“æ–‡ä»¶çš„æ–¹å¼ï¼Œrcpé€šè¿‡rshï¼ˆrshè§ä¸‹é¢ï¼‰æ¥æ‰§è¡Œè¿œç¨‹å‘½ä»¤ï¼Œè¦ä½¿ç”¨rcpå¿…é¡»ç»è¿‡ä¸€äº›é…ç½®ï¼Œç°åœ¨rcpå·²ç»è¢«scpå–ä»£äº†ï¼Œå¸¸ç”¨scpæ¥è¿›è¡Œæ–‡ä»¶ä¼ è¾“ã€‚è¦ä½¿ç”¨rcpï¼Œéœ€è¦å…·å¤‡ä»¥ä¸‹æ¡ä»¶ï¼š</p><p>ï¼ˆ1ï¼‰å¦‚æœç³»ç»Ÿä¸­æœ‰<code>/etc/hosts </code>æ–‡ä»¶ï¼Œåº”ç¡®ä¿è¯¥æ–‡ä»¶åŒ…å«è¦ä¸ä¹‹è¿›è¡Œé€šä¿¡çš„è¿œç¨‹ä¸»æœºä¿¡æ¯ï¼šinternet_address official_name aliasã€‚ä¾‹å¦‚ï¼š1ï¼186ï¼10.*** blade1.ibm.com.cnblade</p><p>ï¼ˆ2ï¼‰<code>.rhosts</code> æ–‡ä»¶ï¼š.rhosts æ–‡ä»¶ä½äºè¿œç¨‹ç³»ç»Ÿçš„æ ¹ç›®å½•ä¸‹ï¼Œå…¶ä¸­åŒ…å«æœ¬åœ°ç³»ç»Ÿçš„åç§°å’Œæœ¬åœ°ç™»å½•åã€‚ä¾‹å¦‚ï¼Œè¿œç¨‹ç³»ç»Ÿçš„ .rhosts æ–‡ä»¶ä¸­çš„é¡¹å¯èƒ½æ˜¯ï¼šblade1 rootï¼›å…¶ä¸­ï¼Œblade1 æ˜¯æœ¬åœ°ç³»ç»Ÿçš„åç§°ï¼Œroot æ˜¯æœ¬åœ°ç™»å½•åã€‚è¿™æ ·ï¼Œblade1 ä¸Šçš„ root å³å¯åœ¨åŒ…å« .rhosts æ–‡ä»¶çš„è¿œç¨‹ç³»ç»Ÿä¸­æ¥å›å¤åˆ¶æ–‡ä»¶ã€‚</p><p>é…ç½®è¿‡ç¨‹ï¼š</p><p>ï¼ˆ1ï¼‰ åœ¨åŒæ–¹rootç”¨æˆ·æ ¹ç›®å½•ä¸‹å»ºç«‹.rhostsæ–‡ä»¶,å¹¶å°†åŒæ–¹çš„hostnameåŠ è¿›å».åœ¨æ­¤ä¹‹å‰åº”åœ¨åŒæ–¹çš„ &#x2F;etc&#x2F;hostsæ–‡ä»¶ä¸­åŠ å…¥å¯¹æ–¹çš„IPå’Œhostname</p><p>ï¼ˆ2ï¼‰ æŠŠrshæœåŠ¡å¯åŠ¨èµ·æ¥,redhaté»˜è®¤æ˜¯ä¸å¯åŠ¨çš„ã€‚æ–¹æ³•ï¼šç”¨æ‰§è¡Œ<code>ntsysv</code>å‘½ä»¤ï¼Œåœ¨rshé€‰é¡¹å‰ç”¨ç©ºæ ¼é”®é€‰ä¸­,ç¡®å®šé€€å‡ºã€‚ç„¶åæ‰§è¡Œï¼š<code>service xinetd restart</code>å³å¯ã€‚</p><p>ï¼ˆ3ï¼‰ åˆ°<code>/etc/pam.d/</code>ç›®å½•ä¸‹,æŠŠrshæ–‡ä»¶ä¸­çš„<code>auth required /lib/security/pam_securetty.so</code>ä¸€è¡Œç”¨â€œ#â€æ³¨é‡Šæ‰å³å¯ã€‚ï¼ˆåªæœ‰æ³¨é‡Šæ‰è¿™ä¸€è¡Œï¼Œæ‰èƒ½ç”¨rootç”¨æˆ·ç™»å½•ï¼‰</p><p>å‘½ä»¤ä½¿ç”¨ï¼š</p><p><code>rcp [options] [[user@]host1:]file1 ...[[user@]host2:]file2</code></p><p>options:ã€€ </p><p>-r é€’å½’åœ°æŠŠæºç›®å½•ä¸­çš„æ‰€æœ‰å†…å®¹æ‹·è´åˆ°ç›®çš„ç›®å½•ä¸­ã€‚</p><p>-p è¯•å›¾ä¿ç•™æºæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´å’Œæ¨¡å¼ï¼Œå¿½ç•¥umaskã€‚</p><h2 id="0x06-é€šè¿‡RSAç§é’¥ç™»å…¥SSH"><a href="#0x06-é€šè¿‡RSAç§é’¥ç™»å…¥SSH" class="headerlink" title="0x06 é€šè¿‡RSAç§é’¥ç™»å…¥SSH"></a>0x06 é€šè¿‡RSAç§é’¥ç™»å…¥SSH</h2><p>åœ¨æ­¤ä¹‹å‰ç¡®è®¤å·²ç»ä»è¿œç¨‹æœåŠ¡å™¨ä¸­ä¸‹è½½äº†<code>id_rsa</code>ç§é’¥åˆ°æœ¬åœ°ç”µè„‘ä¸­</p><blockquote><p>æˆ‘çš„<code>id_rsa</code>å­˜æ”¾çš„ç›®å½•ä¸º&#x2F;Users&#x2F;q1jun&#x2F;id_rsa (~&#x2F;id_ras)</p></blockquote><p>é€šè¿‡<code>ssh</code>çš„ <code>-i</code>å‚æ•°æŒ‡å®šç§é’¥å­˜æ”¾çš„ä½ç½®ï¼Œå…·ä½“å‘½ä»¤å¦‚ä¸‹ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220124115749185.png" alt="image-20220124115749185"></p><p>å¦‚æœè®¾ç½®äº†å¯†é’¥é”ç ï¼Œä¸­é—´è¿˜è¦è¾“å…¥ç¬¬ä¸€æ­¥æ—¶è®¾ç½®çš„å¯†é’¥é”ç ã€‚</p><p><strong>å¦‚æœæ˜¯Windowsç³»ç»Ÿï¼š</strong></p><p>æ¨èä½¿ç”¨xshellç™»å½•ï¼Œå­¦ç”Ÿç‰ˆæœ¬å¯ä»¥å…è´¹ä½¿ç”¨ï¼Œç™»å½•æ–¹å¼å¯ä»¥é‡‡ç”¨ç”¨æˆ·åå’Œå¯†ç ï¼Œä»¥åŠPublic Keyç­‰å¤šç§å½¢å¼ã€‚</p><p>(è¿™é‡Œå°±ä¸æ¼”ç¤ºäº†ï¼Œå‚»ç“œæ“ä½œ)</p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå®‰å…¨ </category>
          
          <category> Crypto </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå®‰å…¨ </tag>
            
            <tag> RSA </tag>
            
            <tag> Crypto </tag>
            
            <tag> ssh </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WebGoat ç½‘å®‰æ”»å‡»æ¨¡æ‹Ÿè®­ç»ƒç¬”è®°</title>
      <link href="/2021/12/08/89d9a84fca63-q1jun/"/>
      <url>/2021/12/08/89d9a84fca63-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="WebGoat-ç½‘å®‰æ”»å‡»æ¨¡æ‹Ÿè®­ç»ƒç¬”è®°"><a href="#WebGoat-ç½‘å®‰æ”»å‡»æ¨¡æ‹Ÿè®­ç»ƒç¬”è®°" class="headerlink" title="WebGoat ç½‘å®‰æ”»å‡»æ¨¡æ‹Ÿè®­ç»ƒç¬”è®°"></a>WebGoat ç½‘å®‰æ”»å‡»æ¨¡æ‹Ÿè®­ç»ƒç¬”è®°</h1><h2 id="1-SQLè¯­å¥æ³¨å…¥"><a href="#1-SQLè¯­å¥æ³¨å…¥" class="headerlink" title="1 SQLè¯­å¥æ³¨å…¥"></a>1 SQLè¯­å¥æ³¨å…¥</h2><h3 id="1-1-å‘½ä»¤æ³¨å…¥â€”Command-Injection"><a href="#1-1-å‘½ä»¤æ³¨å…¥â€”Command-Injection" class="headerlink" title="1.1  å‘½ä»¤æ³¨å…¥â€”Command Injection"></a>1.1  å‘½ä»¤æ³¨å…¥â€”Command Injection</h3><h4 id="1-1-1-æ“ä½œè¯´æ˜"><a href="#1-1-1-æ“ä½œè¯´æ˜" class="headerlink" title="1.1.1 æ“ä½œè¯´æ˜"></a>1.1.1 æ“ä½œè¯´æ˜</h4><p>å³é”®å·¦è¾¹é€‰æ‹©æ¡†çš„ç»„å»ºï¼Œç‚¹å‡»æ£€æŸ¥ï¼Œåœ¨<code>&lt;option&gt;</code>æ ‡ç­¾ä¸­æœ«å°¾æ·»åŠ  <code>&amp; ifconfig</code></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image001.png" alt="clip_image001"></p><p>ç„¶åç‚¹å‡» View æŒ‰é’®æ‰§è¡Œï¼Œä¸‹æ–¹æ˜¾ç¤º <code>ifconfig</code>(Windowsä¸‹ä¸º<code>ipconfig</code>)å‘½ä»¤çš„è¾“å‡ºç»“æœ</p><p>â€‹    <img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image002.png" alt="clip_image002"></p><h4 id="1-1-2-ç»“æœæˆªå›¾"><a href="#1-1-2-ç»“æœæˆªå›¾" class="headerlink" title="1.1.2 ç»“æœæˆªå›¾"></a>1.1.2 ç»“æœæˆªå›¾</h4><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image003.png" alt="clip_image003"></p><h3 id="1-2-æ•°å­—å‹SQLæ³¨å…¥â€”Numeric-SQL-Injection"><a href="#1-2-æ•°å­—å‹SQLæ³¨å…¥â€”Numeric-SQL-Injection" class="headerlink" title="1.2 æ•°å­—å‹SQLæ³¨å…¥â€”Numeric SQL Injection"></a>1.2 æ•°å­—å‹SQLæ³¨å…¥â€”Numeric SQL Injection</h3><h4 id="1-2-1-æ“ä½œè¯´æ˜"><a href="#1-2-1-æ“ä½œè¯´æ˜" class="headerlink" title="1.2.1 æ“ä½œè¯´æ˜"></a>1.2.1 æ“ä½œè¯´æ˜</h4><p>å³é”®é€‰æ‹©æ¡†ç»„å»ºï¼Œç‚¹å‡»æ£€æŸ¥ï¼Œä¿®æ”¹<option>ä¸­çš„å†…å®¹ä¸º<code>100 or 1=1</code></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image004.png" alt="clip_image004"></p><p>ä¿®æ”¹å®Œæˆé€‰æ‹©å¯¹åº”çš„å†…å®¹ï¼Œç„¶åç‚¹å‡»<code> Goï¼</code> æŒ‰é’®æ‰§è¡Œ</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image005.png" alt="clip_image005"></p><h4 id="1-2-2-ç»“æœæˆªå›¾"><a href="#1-2-2-ç»“æœæˆªå›¾" class="headerlink" title="1.2.2 ç»“æœæˆªå›¾"></a>1.2.2 ç»“æœæˆªå›¾</h4><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image006.png" alt="clip_image006"></p><h3 id="1-3-æ—¥å¿—æ¬ºéª—â€”Log-Spoofing"><a href="#1-3-æ—¥å¿—æ¬ºéª—â€”Log-Spoofing" class="headerlink" title="1.3 æ—¥å¿—æ¬ºéª—â€”Log Spoofing"></a>1.3 æ—¥å¿—æ¬ºéª—â€”Log Spoofing</h3><h4 id="1-3-1-æ“ä½œè¯´æ˜"><a href="#1-3-1-æ“ä½œè¯´æ˜" class="headerlink" title="1.3.1 æ“ä½œè¯´æ˜"></a>1.3.1 æ“ä½œè¯´æ˜</h4><p>é€šè¿‡æ—¥å¿—çš„æ¢è¡Œç¬¦ï¼ˆ%0d%0aï¼‰æ¥æ¬ºéª—ç®¡ç†å‘˜ï¼Œè¾“å…¥ï¼š<code>q1jun%0d%0aLogin Succeeded for username: admin</code></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image007.png" alt="clip_image007"></p><p>ç‚¹å‡»loginåï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image008.png" alt="clip_image008"></p><h4 id="1-3-2-ç»“æœæˆªå›¾"><a href="#1-3-2-ç»“æœæˆªå›¾" class="headerlink" title="1.3.2 ç»“æœæˆªå›¾"></a>1.3.2 ç»“æœæˆªå›¾</h4><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image009.png" alt="clip_image009"></p><h3 id="1-4-SQLå­—ç¬¦ä¸²æ³¨å…¥â€”String-SQL-Injection"><a href="#1-4-SQLå­—ç¬¦ä¸²æ³¨å…¥â€”String-SQL-Injection" class="headerlink" title="1.4 SQLå­—ç¬¦ä¸²æ³¨å…¥â€”String SQL Injection"></a>1.4 SQLå­—ç¬¦ä¸²æ³¨å…¥â€”String SQL Injection</h3><h4 id="1-4-1-æ“ä½œè¯´æ˜"><a href="#1-4-1-æ“ä½œè¯´æ˜" class="headerlink" title="1.4.1 æ“ä½œè¯´æ˜"></a>1.4.1 æ“ä½œè¯´æ˜</h4><p>åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥ Smith &#96; or 1&#x3D;1 â€“ ä½¿å¾—æŸ¥è¯¢SQLè¯­å¥ä¸ºï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> user_data <span class="keyword">WHERE</span> last_name <span class="operator">=</span> <span class="string">&#x27;Smith&#x27;</span> <span class="keyword">or</span> <span class="number">1</span><span class="operator">=</span><span class="number">1</span><span class="comment">--&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image010.png" alt="clip_image010"></p><p>æœ€åçš„ <code>--</code>ä¸ºSQLè¯­å¥çš„æ³¨é‡Šç¬¦ï¼Œä¿è¯è¯­å¥çš„æ­£ç¡®ï¼Œç„¶åç‚¹å‡»<code>Goï¼</code></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image011.png" alt="clip_image011"></p><h4 id="1-4-2-ç»“æœæˆªå›¾"><a href="#1-4-2-ç»“æœæˆªå›¾" class="headerlink" title="1.4.2 ç»“æœæˆªå›¾"></a>1.4.2 ç»“æœæˆªå›¾</h4><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image012.png" alt="clip_image012"></p><h3 id="1-5-æ•°æ®åº“åé—¨â€”Database-Backdoors"><a href="#1-5-æ•°æ®åº“åé—¨â€”Database-Backdoors" class="headerlink" title="1.5 æ•°æ®åº“åé—¨â€”Database Backdoors"></a>1.5 æ•°æ®åº“åé—¨â€”Database Backdoors</h3><h4 id="1-5-1-æ“ä½œè¯´æ˜"><a href="#1-5-1-æ“ä½œè¯´æ˜" class="headerlink" title="1.5.1 æ“ä½œè¯´æ˜"></a>1.5.1 æ“ä½œè¯´æ˜</h4><p><strong>Stage1:</strong></p><p>è¾“å…¥**<code>101; update employee set salary=100000 where userid = 101;</code>**</p><p>ä½¿å…¶ç»„æˆä»¥ä¸‹ä¸¤æ¡å®Œæ•´çš„SQLè¯­å¥ï¼Œç¬¬äºŒæ¡ä¿®æ”¹è–ªèµ„ä¸º10w (ä¸å«Œå¤š,å˜¿å˜¿ï¼‰ã€‚</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> userid, <span class="keyword">password</span>, ssn, salary, email <span class="keyword">from</span> employee <span class="keyword">where</span> userid=<span class="number">101</span>; </span><br><span class="line"> <span class="keyword">update</span> employee <span class="keyword">set</span> salary=<span class="number">100000</span> <span class="keyword">where</span> userid = <span class="number">101</span>;</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image013.png" alt="clip_image013"></p><p><strong>Stage2:</strong></p><p>æ ¹æ®æç¤ºï¼Œåˆ›å»ºä¸€ä¸ªæ•°æ®åº“è§¦å‘å™¨ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> myBackDoor BEFORE <span class="keyword">INSERT</span> <span class="keyword">ON</span> employee <span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="keyword">BEGIN</span> <span class="keyword">UPDATE</span> employee <span class="keyword">SET</span> email<span class="operator">=</span><span class="string">&#x27;john@hackme.com&#x27;</span><span class="keyword">WHERE</span> userid <span class="operator">=</span> NEW.userid</span><br></pre></td></tr></table></figure><p>æ³¨å…¥ä»£ç ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">101</span>;<span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> myBackDoor BEFORE <span class="keyword">INSERT</span> <span class="keyword">ON</span> employee <span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="keyword">BEGIN</span> <span class="keyword">UPDATE</span> employee <span class="keyword">SET</span> email<span class="operator">=</span><span class="string">&#x27;john@hackme.com&#x27;</span><span class="keyword">WHERE</span> userid <span class="operator">=</span> NEW.userid</span><br></pre></td></tr></table></figure><p>æ³¨å…¥æˆåŠŸï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image014.png" alt="clip_image014"></p><h4 id="1-5-2-ç»“æœæˆªå›¾"><a href="#1-5-2-ç»“æœæˆªå›¾" class="headerlink" title="1.5.2 ç»“æœæˆªå›¾"></a>1.5.2 ç»“æœæˆªå›¾</h4><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image015.png" alt="clip_image015"></p><h2 id="2-è·¨ç«™è„šæœ¬XSSæ”»å‡»"><a href="#2-è·¨ç«™è„šæœ¬XSSæ”»å‡»" class="headerlink" title="2 è·¨ç«™è„šæœ¬XSSæ”»å‡»"></a>2 è·¨ç«™è„šæœ¬XSSæ”»å‡»</h2><h3 id="2-1-é’“é±¼æ”»å‡»â€”Phishing-with-XSS"><a href="#2-1-é’“é±¼æ”»å‡»â€”Phishing-with-XSS" class="headerlink" title="2.1 é’“é±¼æ”»å‡»â€”Phishing with XSS"></a>2.1 é’“é±¼æ”»å‡»â€”Phishing with XSS</h3><h4 id="2-1-1-æ“ä½œè¯´æ˜"><a href="#2-1-1-æ“ä½œè¯´æ˜" class="headerlink" title="2.1.1 æ“ä½œè¯´æ˜"></a>2.1.1 æ“ä½œè¯´æ˜</h4><p>æ„å»ºXSSä»£ç ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image016.png" alt="clip_image016"></p><p>æ”¾å…¥Searchä¸­ï¼Œç‚¹å‡»æœç´¢ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image017.png" alt="clip_image017"></p><p>ä¸‹æ–¹æç¤ºè¾“å…¥è´¦å·å¯†ç è¿›è¡Œé’“é±¼ï¼Œç­‰å¾…ç”¨æˆ·æäº¤ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image018.png" alt="clip_image018"></p><h4 id="2-1-2-ç»“æœæˆªå›¾"><a href="#2-1-2-ç»“æœæˆªå›¾" class="headerlink" title="2.1.2 ç»“æœæˆªå›¾"></a>2.1.2 ç»“æœæˆªå›¾</h4><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image019.png" alt="clip_image019"></p><h3 id="2-2-å¸¸é©»æ”»å‡»â€”Stored-XSS-Attacks"><a href="#2-2-å¸¸é©»æ”»å‡»â€”Stored-XSS-Attacks" class="headerlink" title="2.2 å¸¸é©»æ”»å‡»â€”Stored XSS Attacks"></a>2.2 å¸¸é©»æ”»å‡»â€”Stored XSS Attacks</h3><h4 id="2-2-1-æ“ä½œè¯´æ˜"><a href="#2-2-1-æ“ä½œè¯´æ˜" class="headerlink" title="2.2.1 æ“ä½œè¯´æ˜"></a>2.2.1 æ“ä½œè¯´æ˜</h4><p>åœ¨è¾“å…¥æ¶ˆæ¯æ¡†ä¸­å¡«å…¥XSSä»£ç ï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script language<span class="operator">=</span><span class="string">&quot;javascript&quot;</span> type<span class="operator">=</span><span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">alert(<span class="string">&quot;This is XSS!&quot;</span>)<span class="comment">;</span></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image020.png" alt="clip_image020"></p><p>æäº¤åç‚¹å‡»ä¸‹æ–¹å¯ä»¥æ‰§è¡Œä»£ç ã€‚</p><h4 id="2-2-2-ç»“æœæˆªå›¾"><a href="#2-2-2-ç»“æœæˆªå›¾" class="headerlink" title="2.2.2 ç»“æœæˆªå›¾"></a>2.2.2 ç»“æœæˆªå›¾</h4><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image021.png" alt="clip_image021"></p><h3 id="2-3-åå°„å‹XSSæ”»å‡»â€”Reflected-XSS-Attacks"><a href="#2-3-åå°„å‹XSSæ”»å‡»â€”Reflected-XSS-Attacks" class="headerlink" title="2.3 åå°„å‹XSSæ”»å‡»â€”Reflected XSS Attacks"></a>2.3 åå°„å‹XSSæ”»å‡»â€”Reflected XSS Attacks</h3><h4 id="2-3-1-æ“ä½œè¯´æ˜"><a href="#2-3-1-æ“ä½œè¯´æ˜" class="headerlink" title="2.3.1 æ“ä½œè¯´æ˜"></a>2.3.1 æ“ä½œè¯´æ˜</h4><p>åœ¨digit access codeæ¡†ä¸­æ·»åŠ ï¼š</p><p><code>&lt;script&gt;alert(document.cookie);&lt;/script&gt;</code></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image022.png" alt="clip_image022">ç‚¹å‡»Purchaseï¼š</p><h4 id="2-3-2-ç»“æœæˆªå›¾"><a href="#2-3-2-ç»“æœæˆªå›¾" class="headerlink" title="2.3.2 ç»“æœæˆªå›¾"></a><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image023.png" alt="clip_image023">2.3.2 ç»“æœæˆªå›¾</h4><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image024.png" alt="clip_image024"></p><h3 id="2-4å—åå°„æ”»å‡»â€”Block-Reflected-XSS"><a href="#2-4å—åå°„æ”»å‡»â€”Block-Reflected-XSS" class="headerlink" title="2.4å—åå°„æ”»å‡»â€”Block Reflected XSS"></a>2.4å—åå°„æ”»å‡»â€”Block Reflected XSS</h3><h4 id="2-4-1-æ“ä½œè¯´æ˜"><a href="#2-4-1-æ“ä½œè¯´æ˜" class="headerlink" title="2.4.1 æ“ä½œè¯´æ˜"></a>2.4.1 æ“ä½œè¯´æ˜</h4><p><strong>Stage 1:</strong></p><p>ç™»å…¥Tomçš„ä¸ªäººé¡µé¢ï¼Œä¿®æ”¹LastNameä¸º: <code>&lt;script&gt;alert(&#39;hello,hack&#39;);&lt;/script&gt;</code></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image025.png" alt="clip_image025"></p><p>ä¿å­˜æˆåŠŸæ—¶ä¼šæ‰§è¡Œä»£ç ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image026.png" alt="clip_image026"></p><p>é€šè¿‡JerryæŸ¥çœ‹Tomèµ„æ–™æ—¶ä¹Ÿä¼šæ˜¾ç¤ºè¯¥å¼¹çª—ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image027.png" alt="clip_image027"></p><h4 id="2-4-2-ç»“æœæˆªå›¾"><a href="#2-4-2-ç»“æœæˆªå›¾" class="headerlink" title="2.4.2 ç»“æœæˆªå›¾"></a>2.4.2 ç»“æœæˆªå›¾</h4><h2 id="3-è·¨ç«™è¯·æ±‚ä¼ªé€ CSRFæ”»å‡»"><a href="#3-è·¨ç«™è¯·æ±‚ä¼ªé€ CSRFæ”»å‡»" class="headerlink" title="3 è·¨ç«™è¯·æ±‚ä¼ªé€ CSRFæ”»å‡»"></a>3 è·¨ç«™è¯·æ±‚ä¼ªé€ CSRFæ”»å‡»</h2><h3 id="3-1-Cross-Site-Request-Forgery-CSRF"><a href="#3-1-Cross-Site-Request-Forgery-CSRF" class="headerlink" title="3.1 Cross Site Request Forgery(CSRF)"></a>3.1 Cross Site Request Forgery(CSRF)</h3><h4 id="3-1-1-æ“ä½œè¯´æ˜"><a href="#3-1-1-æ“ä½œè¯´æ˜" class="headerlink" title="3.1.1 æ“ä½œè¯´æ˜"></a>3.1.1 æ“ä½œè¯´æ˜</h4><p>åœ¨emailä¸­åŒ…å«ä¸€å¼ å›¾ç‰‡ï¼Œå›¾ç‰‡çš„URLæŒ‡å‘ä¸€ä¸ªæ¶æ„è¯·æ±‚ã€‚å®éªŒä¸­ï¼ŒURLåº”æŒ‡å‘attack servletï¼Œå‚æ•°æœ‰Screenä¸menuï¼Œè¿˜æœ‰ä¸€ä¸ªé¢å¤–çš„å‚æ•°transferFundså¸¦æœ‰ä»»æ„æ•°å€¼ã€‚æ”¶ä»¶äººåˆšå¥½è¿›è¡Œèº«ä»½è®¤è¯ï¼Œæ­£åœ¨è½¬ç§»èµ„é‡‘:</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="params">&lt;img src=&quot;/Users/q1jun/Documents/ç¬”è®°/è¯¾ç¨‹ç¬”è®°/è½¯ä»¶<span class="variable">&amp;</span>Webå®‰å…¨å¼€å‘/attack?Screen=<span class="number">2078372</span><span class="variable">&amp;menu</span>=<span class="number">900</span><span class="variable">&amp;</span>transferFunds=<span class="number">5000</span>&quot;/&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image028.png" alt="clip_image028"></p><p>ç‚¹å‡»titleï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image029.png" alt="clip_image029"></p><h4 id="3-1-2-ç»“æœæˆªå›¾"><a href="#3-1-2-ç»“æœæˆªå›¾" class="headerlink" title="3.1.2 ç»“æœæˆªå›¾"></a>3.1.2 ç»“æœæˆªå›¾</h4><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image030.png" alt="clip_image030"></p><h3 id="3-2-CSRF-Prompt-By-Pass"><a href="#3-2-CSRF-Prompt-By-Pass" class="headerlink" title="3.2 CSRF Prompt By-Pass"></a>3.2 CSRF Prompt By-Pass</h3><h4 id="3-2-1-æ“ä½œè¯´æ˜"><a href="#3-2-1-æ“ä½œè¯´æ˜" class="headerlink" title="3.2.1 æ“ä½œè¯´æ˜"></a>3.2.1 æ“ä½œè¯´æ˜</h4><p>å®éªŒéœ€è¦å‘æ–°é—»ç»„å‘é€emailåŒ…å«ä»¥ä¸‹æ¶æ„è¯·æ±‚ï¼Œé¦–å…ˆè½¬è´¦ï¼Œç„¶åè¯·æ±‚æç¤ºç¡®è®¤ã€‚</p><p>åœ¨emailçš„æ­£æ–‡ä¸­è¾“å…¥å¦‚ä¸‹javascriptä»£ç :</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;iframe</span><br><span class="line"></span><br><span class="line">    src<span class="operator">=</span><span class="string">&quot;http://localhost:8080/WebGoat/attack?Screen=XXX&amp;menu=YYY&amp;transferFunds=5000&quot;</span></span><br><span class="line"></span><br><span class="line">    id<span class="operator">=</span><span class="string">&quot;myFrame&quot;</span> frameborder<span class="operator">=</span><span class="string">&quot;1&quot;</span> marginwidth<span class="operator">=</span><span class="string">&quot;0&quot;</span></span><br><span class="line"></span><br><span class="line">    marginheight<span class="operator">=</span><span class="string">&quot;0&quot;</span> width<span class="operator">=</span><span class="string">&quot;800&quot;</span> scrolling<span class="operator">=</span>yes height<span class="operator">=</span><span class="string">&quot;300&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">onload</span><span class="operator">=</span><span class="string">&quot;document.getElementById(&#x27;frame2&#x27;).src=&#x27;http://localhost:8080/WebGoat/attack?Screen=XXX&amp;menu=YYY&amp;transferFunds=CONFIRM&#x27;;&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;/iframe&gt;</span><br><span class="line"></span><br><span class="line">&lt;iframe</span><br><span class="line"></span><br><span class="line">    id<span class="operator">=</span><span class="string">&quot;frame2&quot;</span> frameborder<span class="operator">=</span><span class="string">&quot;1&quot;</span> marginwidth<span class="operator">=</span><span class="string">&quot;0&quot;</span></span><br><span class="line"></span><br><span class="line">    marginheight<span class="operator">=</span><span class="string">&quot;0&quot;</span> width<span class="operator">=</span><span class="string">&quot;800&quot;</span> scrolling<span class="operator">=</span>yes height<span class="operator">=</span><span class="string">&quot;300&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;/iframe&gt;</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image031.png" alt="clip_image031"></p><h4 id="3-2-2-ç»“æœæˆªå›¾"><a href="#3-2-2-ç»“æœæˆªå›¾" class="headerlink" title="3.2.2 ç»“æœæˆªå›¾"></a>3.2.2 ç»“æœæˆªå›¾</h4><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image032.png" alt="clip_image032"></p><h3 id="3-3-CSRF-Token-By-Pass"><a href="#3-3-CSRF-Token-By-Pass" class="headerlink" title="3.3 CSRF Token By-Pass"></a>3.3 CSRF Token By-Pass</h3><h4 id="3-3-1-æ“ä½œè¯´æ˜"><a href="#3-3-1-æ“ä½œè¯´æ˜" class="headerlink" title="3.3.1 æ“ä½œè¯´æ˜"></a>3.3.1 æ“ä½œè¯´æ˜</h4><p>è¿›å…¥CSRF Token By-Passååœ¨ç½‘é¡µURLååŠ ä¸Š<code>transferFunds=main</code>ï¼Œç”¨ä»¥è¿›å…¥è½¬è´¦é¡µé¢ï¼Œè·å–tokenã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image033.png" alt="clip_image033"></p><p>å›è½¦ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image035.png" alt="clip_image035"></p><p>é€šè¿‡è½¬è´¦é¡µé¢è¾“å…¥5000è¿›è¡Œæäº¤æ“ä½œï¼Œç„¶åé€šè¿‡Burpsuiteè¿›è¡ŒæŠ“åŒ…ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image039.png" alt="clip_image039"></p><p>åˆ†ææ‰€å¾—æ•°æ®åŒ…ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image040.png" alt="clip_image040"></p><p>å¯ä»¥å¾—åˆ°<code>Postè¯·æ±‚è·¯å¾„</code>ä¸­çš„å‚æ•°å’Œ<code>CSRFToken</code>çš„å€¼ï¼</p><p>æ¥ä¸‹æ¥æ„é€ CSRFä»£ç ï¼Œæ³¨æ„ä»¥ä¸‹å‚æ•°ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image041.png" alt="clip_image041"></p><p>å¤åˆ¶åˆ°Messageæ¡†ä¸­ï¼Œç‚¹å‡»æäº¤ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image042.png" alt="clip_image042"></p><p>åœ¨ä¸‹é¢çš„Message Listä¸­ç‚¹å¼€é‚®ä»¶ï¼Œè¾“å…¥5000å¹¶æäº¤ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image043.png" alt="clip_image043"></p><p>å®Œæˆï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image044.png" alt="clip_image044"></p><h4 id="3-3-2-ç»“æœæˆªå›¾"><a href="#3-3-2-ç»“æœæˆªå›¾" class="headerlink" title="3.3.2 ç»“æœæˆªå›¾"></a>3.3.2 ç»“æœæˆªå›¾</h4><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/clip_image045.png" alt="clip_image045"></p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå®‰å…¨ </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå®‰å…¨ </tag>
            
            <tag> WebGoat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GoLang åˆ‡ç‰‡</title>
      <link href="/2021/12/06/9b01a76723e5-q1jun/"/>
      <url>/2021/12/06/9b01a76723e5-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="Go-åˆ‡ç‰‡ï¼š-ç”¨æ³•ä¸æœ¬è´¨"><a href="#Go-åˆ‡ç‰‡ï¼š-ç”¨æ³•ä¸æœ¬è´¨" class="headerlink" title="Go åˆ‡ç‰‡ï¼š ç”¨æ³•ä¸æœ¬è´¨"></a>Go åˆ‡ç‰‡ï¼š ç”¨æ³•ä¸æœ¬è´¨</h1><h2 id="0x01-å¼•è¨€"><a href="#0x01-å¼•è¨€" class="headerlink" title="0x01 å¼•è¨€"></a>0x01 å¼•è¨€</h2><p>Goçš„åˆ‡ç‰‡ç±»å‹ä¸ºå¤„ç†åŒç±»å‹æ•°æ®åºåˆ—æä¾›ä¸€ä¸ªæ–¹ä¾¿è€Œé«˜æ•ˆçš„æ–¹å¼ã€‚ åˆ‡ç‰‡æœ‰äº›ç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„æ•°ç»„ï¼Œä½†æ˜¯æœ‰ä¸€äº›ä¸åŒå¯»å¸¸çš„ç‰¹æ€§ã€‚ æœ¬æ–‡å°†æ·±å…¥åˆ‡ç‰‡çš„æœ¬è´¨ï¼Œå¹¶è®²è§£å®ƒçš„ç”¨æ³•ã€‚</p><h2 id="0x02-æ•°ç»„-Array"><a href="#0x02-æ•°ç»„-Array" class="headerlink" title="0x02 æ•°ç»„(Array)"></a>0x02 æ•°ç»„(Array)</h2><p>Goçš„åˆ‡ç‰‡æ˜¯åœ¨æ•°ç»„ä¹‹ä¸Šçš„æŠ½è±¡æ•°æ®ç±»å‹ï¼Œå› æ­¤åœ¨äº†è§£åˆ‡ç‰‡ä¹‹å‰å¿…é¡»è¦å…ˆç†è§£æ•°ç»„ã€‚</p><p>æ•°ç»„ç±»å‹å®šä¹‰äº†é•¿åº¦å’Œå…ƒç´ ç±»å‹ã€‚ä¾‹å¦‚ï¼Œ <code>[4]int</code> ç±»å‹è¡¨ç¤ºä¸€ä¸ªå››ä¸ªæ•´æ•°çš„æ•°ç»„ã€‚ æ•°ç»„çš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œé•¿åº¦æ˜¯æ•°ç»„ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼ˆ <code>[4]int</code> å’Œ <code>[5]int</code> æ˜¯å®Œå…¨ä¸åŒçš„ç±»å‹ï¼‰ã€‚ æ•°ç»„å¯ä»¥ä»¥å¸¸è§„çš„ç´¢å¼•æ–¹å¼è®¿é—®ï¼Œè¡¨è¾¾å¼ <code>s[n]</code> è®¿é—®æ•°ç»„çš„ç¬¬ n ä¸ªå…ƒç´ ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a [<span class="number">4</span>]<span class="type">int</span></span><br><span class="line">a[<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">i := a[<span class="number">0</span>]</span><br><span class="line"><span class="comment">// i == 1</span></span><br></pre></td></tr></table></figure><p>æ•°ç»„ä¸éœ€è¦æ˜¾å¼çš„åˆå§‹åŒ–ï¼›æ•°ç»„çš„é›¶å€¼æ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨çš„ï¼Œæ•°ç»„å…ƒç´ ä¼šè‡ªåŠ¨åˆå§‹åŒ–ä¸ºå…¶å¯¹åº”ç±»å‹çš„é›¶å€¼ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a[2] == 0, int ç±»å‹çš„é›¶å€¼</span></span><br></pre></td></tr></table></figure><p>ç±»å‹ <code>[4]int</code> å¯¹åº”å†…å­˜ä¸­å››ä¸ªè¿ç»­çš„æ•´æ•°ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/go-slices-usage-and-internals_slice-array.png" alt="img"></p><p>Goçš„æ•°ç»„æ˜¯å€¼è¯­ä¹‰ã€‚ä¸€ä¸ªæ•°ç»„å˜é‡è¡¨ç¤ºæ•´ä¸ªæ•°ç»„ï¼Œå®ƒä¸æ˜¯æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆï¼ˆä¸åƒ C è¯­è¨€çš„æ•°ç»„ï¼‰ã€‚ å½“ä¸€ä¸ªæ•°ç»„å˜é‡è¢«èµ‹å€¼æˆ–è€…è¢«ä¼ é€’çš„æ—¶å€™ï¼Œå®é™…ä¸Šä¼šå¤åˆ¶æ•´ä¸ªæ•°ç»„ã€‚ ï¼ˆä¸ºäº†é¿å…å¤åˆ¶æ•°ç»„ï¼Œä½ å¯ä»¥ä¼ é€’ä¸€ä¸ªæŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆï¼Œä½†æ˜¯æ•°ç»„æŒ‡é’ˆå¹¶ä¸æ˜¯æ•°ç»„ã€‚ï¼‰ å¯ä»¥å°†æ•°ç»„çœ‹ä½œä¸€ä¸ªç‰¹æ®Šçš„structï¼Œç»“æ„çš„å­—æ®µåå¯¹åº”æ•°ç»„çš„ç´¢å¼•ï¼ŒåŒæ—¶æˆå‘˜çš„æ•°ç›®å›ºå®šã€‚</p><p>æ•°ç»„çš„å­—é¢å€¼åƒè¿™æ ·ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b := [<span class="number">2</span>]<span class="type">string</span>&#123;<span class="string">&quot;Penn&quot;</span>, <span class="string">&quot;Teller&quot;</span>&#125;</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥è®©ç¼–è¯‘å™¨ç»Ÿè®¡æ•°ç»„å­—é¢å€¼ä¸­å…ƒç´ çš„æ•°ç›®ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b := [...]<span class="type">string</span>&#123;<span class="string">&quot;Penn&quot;</span>, <span class="string">&quot;Teller&quot;</span>&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸¤ç§å†™æ³•ï¼Œ <code>b</code> éƒ½æ˜¯å¯¹åº” <code>[2]string</code> ç±»å‹ã€‚</p><h2 id="0x03-åˆ‡ç‰‡-Slices"><a href="#0x03-åˆ‡ç‰‡-Slices" class="headerlink" title="0x03 åˆ‡ç‰‡(Slices)"></a>0x03 åˆ‡ç‰‡(Slices)</h2><p>æ•°ç»„è™½ç„¶æœ‰é€‚ç”¨å®ƒä»¬çš„åœ°æ–¹ï¼Œä½†æ˜¯æ•°ç»„ä¸å¤Ÿçµæ´»ï¼Œå› æ­¤åœ¨Goä»£ç ä¸­æ•°ç»„ä½¿ç”¨çš„å¹¶ä¸å¤šã€‚ ä½†æ˜¯ï¼Œåˆ‡ç‰‡åˆ™ä½¿ç”¨å¾—ç›¸å½“å¹¿æ³›ã€‚åˆ‡ç‰‡åŸºäºæ•°ç»„æ„å»ºï¼Œä½†æ˜¯æä¾›æ›´å¼ºçš„åŠŸèƒ½å’Œä¾¿åˆ©ã€‚</p><p>åˆ‡ç‰‡ç±»å‹çš„å†™æ³•æ˜¯ <code>[]T</code> ï¼Œ <code>T</code> æ˜¯åˆ‡ç‰‡å…ƒç´ çš„ç±»å‹ã€‚å’Œæ•°ç»„ä¸åŒçš„æ˜¯ï¼Œåˆ‡ç‰‡ç±»å‹å¹¶æ²¡æœ‰ç»™å®šå›ºå®šçš„é•¿åº¦ã€‚</p><p>åˆ‡ç‰‡çš„å­—é¢å€¼å’Œæ•°ç»„å­—é¢å€¼å¾ˆåƒï¼Œä¸è¿‡åˆ‡ç‰‡æ²¡æœ‰æŒ‡å®šå…ƒç´ ä¸ªæ•°ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">letters := []<span class="type">string</span>&#123;<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>&#125;</span><br></pre></td></tr></table></figure><p>åˆ‡ç‰‡å¯ä»¥ä½¿ç”¨å†…ç½®å‡½æ•° <code>make</code> åˆ›å»ºï¼Œå‡½æ•°ç­¾åä¸ºï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">make</span><span class="params">([]T, <span class="built_in">len</span>, <span class="built_in">cap</span>)</span></span> []T</span><br></pre></td></tr></table></figure><p>å…¶ä¸­Tä»£è¡¨è¢«åˆ›å»ºçš„åˆ‡ç‰‡å…ƒç´ çš„ç±»å‹ã€‚å‡½æ•° <code>make</code> æ¥å—ä¸€ä¸ªç±»å‹ã€ä¸€ä¸ªé•¿åº¦å’Œä¸€ä¸ªå¯é€‰çš„å®¹é‡å‚æ•°ã€‚ è°ƒç”¨ <code>make</code> æ—¶ï¼Œå†…éƒ¨ä¼šåˆ†é…ä¸€ä¸ªæ•°ç»„ï¼Œç„¶åè¿”å›æ•°ç»„å¯¹åº”çš„åˆ‡ç‰‡ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s []<span class="type">byte</span></span><br><span class="line">s = <span class="built_in">make</span>([]<span class="type">byte</span>, <span class="number">5</span>, <span class="number">5</span>)</span><br><span class="line"><span class="comment">// s == []byte&#123;0, 0, 0, 0, 0&#125;</span></span><br></pre></td></tr></table></figure><p>å½“å®¹é‡å‚æ•°è¢«å¿½ç•¥æ—¶ï¼Œå®ƒé»˜è®¤ä¸ºæŒ‡å®šçš„é•¿åº¦ã€‚ä¸‹é¢æ˜¯ç®€æ´çš„å†™æ³•ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s := <span class="built_in">make</span>([]<span class="type">byte</span>, <span class="number">5</span>)</span><br></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨å†…ç½®å‡½æ•° <code>len</code> å’Œ <code>cap</code> è·å–åˆ‡ç‰‡çš„é•¿åº¦å’Œå®¹é‡ä¿¡æ¯ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">len</span>(s) == <span class="number">5</span></span><br><span class="line"><span class="built_in">cap</span>(s) == <span class="number">5</span></span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥çš„ä¸¤ä¸ªå°èŠ‚å°†è®¨è®ºé•¿åº¦å’Œå®¹é‡ä¹‹é—´çš„å…³ç³»ã€‚</p><p>åˆ‡ç‰‡çš„é›¶å€¼ä¸º <code>nil</code> ã€‚å¯¹äºåˆ‡ç‰‡çš„é›¶å€¼ï¼Œ <code>len</code> å’Œ <code>cap</code> éƒ½å°†è¿”å›0ã€‚</p><p>åˆ‡ç‰‡ä¹Ÿå¯ä»¥åŸºäºç°æœ‰çš„åˆ‡ç‰‡æˆ–æ•°ç»„ç”Ÿæˆã€‚åˆ‡åˆ†çš„èŒƒå›´ç”±ä¸¤ä¸ªç”±å†’å·åˆ†å‰²çš„ç´¢å¼•å¯¹åº”çš„åŠå¼€åŒºé—´æŒ‡å®šã€‚ ä¾‹å¦‚ï¼Œè¡¨è¾¾å¼ <code>b[1:4]</code> åˆ›å»ºçš„åˆ‡ç‰‡å¼•ç”¨æ•°ç»„ <code>b</code> çš„ç¬¬1åˆ°3ä¸ªå…ƒç´ ç©ºé—´ï¼ˆå¯¹åº”åˆ‡ç‰‡çš„ç´¢å¼•ä¸º0åˆ°2ï¼‰ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">b := []<span class="type">byte</span>&#123;<span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;n&#x27;</span>, <span class="string">&#x27;g&#x27;</span>&#125;</span><br><span class="line"><span class="comment">// b[1:4] == []byte&#123;&#x27;o&#x27;, &#x27;l&#x27;, &#x27;a&#x27;&#125;, sharing the same storage as b</span></span><br></pre></td></tr></table></figure><p>åˆ‡ç‰‡çš„å¼€å§‹å’Œç»“æŸçš„ç´¢å¼•éƒ½æ˜¯å¯é€‰çš„ï¼›å®ƒä»¬åˆ†åˆ«é»˜è®¤ä¸ºé›¶å’Œæ•°ç»„çš„é•¿åº¦ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// b[:2] == []byte&#123;&#x27;g&#x27;, &#x27;o&#x27;&#125;</span></span><br><span class="line"><span class="comment">// b[2:] == []byte&#123;&#x27;l&#x27;, &#x27;a&#x27;, &#x27;n&#x27;, &#x27;g&#x27;&#125;</span></span><br><span class="line"><span class="comment">// b[:] == b</span></span><br></pre></td></tr></table></figure><p>ä¸‹é¢è¯­æ³•ä¹Ÿæ˜¯åŸºäºæ•°ç»„åˆ›å»ºä¸€ä¸ªåˆ‡ç‰‡ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x := [<span class="number">3</span>]<span class="type">string</span>&#123;<span class="string">&quot;Ğ›Ğ°Ğ¹ĞºĞ°&quot;</span>, <span class="string">&quot;Ğ‘ĞµĞ»ĞºĞ°&quot;</span>, <span class="string">&quot;Ğ¡Ñ‚Ñ€ĞµĞ»ĞºĞ°&quot;</span>&#125;</span><br><span class="line">s := x[:] <span class="comment">// a slice referencing the storage of x</span></span><br></pre></td></tr></table></figure><h2 id="0x04-åˆ‡ç‰‡çš„å†…å¹•"><a href="#0x04-åˆ‡ç‰‡çš„å†…å¹•" class="headerlink" title="0x04 åˆ‡ç‰‡çš„å†…å¹•"></a>0x04 åˆ‡ç‰‡çš„å†…å¹•</h2><p>ä¸€ä¸ªåˆ‡ç‰‡æ˜¯ä¸€ä¸ªæ•°ç»„ç‰‡æ®µçš„æè¿°ã€‚å®ƒåŒ…å«äº†æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆï¼Œç‰‡æ®µçš„é•¿åº¦ï¼Œ å’Œå®¹é‡ï¼ˆç‰‡æ®µçš„æœ€å¤§é•¿åº¦ï¼‰ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/go-slices-usage-and-internals_slice-struct.png" alt="img"></p><p>å‰é¢ä½¿ç”¨ <code>make([]byte, 5)</code> åˆ›å»ºçš„åˆ‡ç‰‡å˜é‡ <code>s</code> çš„ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/go-slices-usage-and-internals_slice-1.png" alt="img"></p><p>é•¿åº¦æ˜¯åˆ‡ç‰‡å¼•ç”¨çš„å…ƒç´ æ•°ç›®ã€‚å®¹é‡æ˜¯åº•å±‚æ•°ç»„çš„å…ƒç´ æ•°ç›®ï¼ˆä»åˆ‡ç‰‡æŒ‡é’ˆå¼€å§‹ï¼‰ã€‚ å…³äºé•¿åº¦å’Œå®¹é‡å’ŒåŒºåŸŸå°†åœ¨ä¸‹ä¸€ä¸ªä¾‹å­è¯´æ˜ã€‚</p><p>æˆ‘ä»¬ç»§ç»­å¯¹ <code>s</code> è¿›è¡Œåˆ‡ç‰‡ï¼Œè§‚å¯Ÿåˆ‡ç‰‡çš„æ•°æ®ç»“æ„å’Œå®ƒå¼•ç”¨çš„åº•å±‚æ•°ç»„ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s = s[<span class="number">2</span>:<span class="number">4</span>]</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/go-slices-usage-and-internals_slice-2.png" alt="img"></p><p>åˆ‡ç‰‡æ“ä½œå¹¶ä¸å¤åˆ¶åˆ‡ç‰‡æŒ‡å‘çš„å…ƒç´ ã€‚å®ƒåˆ›å»ºä¸€ä¸ªæ–°çš„åˆ‡ç‰‡å¹¶å¤ç”¨åŸæ¥åˆ‡ç‰‡çš„åº•å±‚æ•°ç»„ã€‚ è¿™ä½¿å¾—åˆ‡ç‰‡æ“ä½œå’Œæ•°ç»„ç´¢å¼•ä¸€æ ·é«˜æ•ˆã€‚å› æ­¤ï¼Œé€šè¿‡ä¸€ä¸ªæ–°åˆ‡ç‰‡ä¿®æ”¹å…ƒç´ ä¼šå½±å“åˆ°åŸå§‹åˆ‡ç‰‡çš„å¯¹åº”å…ƒç´ ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">d := []<span class="type">byte</span>&#123;<span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;d&#x27;</span>&#125;</span><br><span class="line">e := d[<span class="number">2</span>:]</span><br><span class="line"><span class="comment">// e == []byte&#123;&#x27;a&#x27;, &#x27;d&#x27;&#125;</span></span><br><span class="line">e[<span class="number">1</span>] = <span class="string">&#x27;m&#x27;</span></span><br><span class="line"><span class="comment">// e == []byte&#123;&#x27;a&#x27;, &#x27;m&#x27;&#125;</span></span><br><span class="line"><span class="comment">// d == []byte&#123;&#x27;r&#x27;, &#x27;o&#x27;, &#x27;a&#x27;, &#x27;m&#x27;&#125;</span></span><br></pre></td></tr></table></figure><p>å‰é¢åˆ›å»ºçš„åˆ‡ç‰‡ <code>s</code> é•¿åº¦å°äºå®ƒçš„å®¹é‡ã€‚æˆ‘ä»¬å¯ä»¥å¢é•¿åˆ‡ç‰‡çš„é•¿åº¦ä¸ºå®ƒçš„å®¹é‡ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s = s[:<span class="built_in">cap</span>(s)]</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/go-slices-usage-and-internals_slice-3.png" alt="img"></p><p>åˆ‡ç‰‡å¢é•¿ä¸èƒ½è¶…å‡ºå…¶å®¹é‡ã€‚å¢é•¿è¶…å‡ºåˆ‡ç‰‡å®¹é‡å°†ä¼šå¯¼è‡´è¿è¡Œæ—¶å¼‚å¸¸ï¼Œå°±åƒåˆ‡ç‰‡æˆ–æ•°ç»„çš„ç´¢å¼•è¶… å‡ºèŒƒå›´å¼•èµ·å¼‚å¸¸ä¸€æ ·ã€‚åŒæ ·ï¼Œä¸èƒ½ä½¿ç”¨å°äºé›¶çš„ç´¢å¼•å»è®¿é—®åˆ‡ç‰‡ä¹‹å‰çš„å…ƒç´ ã€‚</p><h2 id="0x05-åˆ‡ç‰‡çš„ç”Ÿé•¿-copy-and-append-å‡½æ•°"><a href="#0x05-åˆ‡ç‰‡çš„ç”Ÿé•¿-copy-and-append-å‡½æ•°" class="headerlink" title="0x05 åˆ‡ç‰‡çš„ç”Ÿé•¿(copy and append å‡½æ•°)"></a>0x05 åˆ‡ç‰‡çš„ç”Ÿé•¿(copy and append å‡½æ•°)</h2><p>è¦å¢åŠ åˆ‡ç‰‡çš„å®¹é‡å¿…é¡»åˆ›å»ºä¸€ä¸ªæ–°çš„ã€æ›´å¤§å®¹é‡çš„åˆ‡ç‰‡ï¼Œç„¶åå°†åŸæœ‰åˆ‡ç‰‡çš„å†…å®¹å¤åˆ¶åˆ°æ–°çš„åˆ‡ç‰‡ã€‚ æ•´ä¸ªæŠ€æœ¯æ˜¯ä¸€äº›æ”¯æŒåŠ¨æ€æ•°ç»„è¯­è¨€çš„å¸¸è§å®ç°ã€‚ä¸‹é¢çš„ä¾‹å­å°†åˆ‡ç‰‡ <code>s</code> å®¹é‡ç¿»å€ï¼Œå…ˆåˆ›å»ºä¸€ä¸ª2å€ å®¹é‡çš„æ–°åˆ‡ç‰‡ <code>t</code> ï¼Œå¤åˆ¶ <code>s</code> çš„å…ƒç´ åˆ° <code>t</code> ï¼Œç„¶åå°† <code>t</code> èµ‹å€¼ç»™ <code>s</code> ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">t := <span class="built_in">make</span>([]<span class="type">byte</span>, <span class="built_in">len</span>(s), (<span class="built_in">cap</span>(s)+<span class="number">1</span>)*<span class="number">2</span>) <span class="comment">// +1 in case cap(s) == 0</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="keyword">range</span> s &#123;</span><br><span class="line">        t[i] = s[i]</span><br><span class="line">&#125;</span><br><span class="line">s = t</span><br></pre></td></tr></table></figure><p>å¾ªç¯ä¸­å¤åˆ¶çš„æ“ä½œå¯ä»¥ç”± copy å†…ç½®å‡½æ•°æ›¿ä»£ã€‚copy å‡½æ•°å°†æºåˆ‡ç‰‡çš„å…ƒç´ å¤åˆ¶åˆ°ç›®çš„åˆ‡ç‰‡ã€‚ å®ƒè¿”å›å¤åˆ¶å…ƒç´ çš„æ•°ç›®ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">copy</span><span class="params">(dst, src []T)</span></span> <span class="type">int</span></span><br></pre></td></tr></table></figure><p><code>copy</code> å‡½æ•°æ”¯æŒä¸åŒé•¿åº¦çš„åˆ‡ç‰‡ä¹‹é—´çš„å¤åˆ¶ï¼ˆå®ƒåªå¤åˆ¶è¾ƒçŸ­åˆ‡ç‰‡çš„é•¿åº¦ä¸ªå…ƒç´ ï¼‰ã€‚ æ­¤å¤–ï¼Œ <code>copy</code> å‡½æ•°å¯ä»¥æ­£ç¡®å¤„ç†æºå’Œç›®çš„åˆ‡ç‰‡æœ‰é‡å çš„æƒ…å†µã€‚</p><p>ä½¿ç”¨ <code>copy</code> å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ç®€åŒ–ä¸Šé¢çš„ä»£ç ç‰‡æ®µï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">t := <span class="built_in">make</span>([]<span class="type">byte</span>, <span class="built_in">len</span>(s), (<span class="built_in">cap</span>(s)+<span class="number">1</span>)*<span class="number">2</span>)</span><br><span class="line"><span class="built_in">copy</span>(t, s)</span><br><span class="line">s = t</span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªå¸¸è§çš„æ“ä½œæ˜¯å°†æ•°æ®è¿½åŠ åˆ°åˆ‡ç‰‡çš„å°¾éƒ¨ã€‚ä¸‹é¢çš„å‡½æ•°å°†å…ƒç´ è¿½åŠ åˆ°åˆ‡ç‰‡å°¾éƒ¨ï¼Œ å¿…è¦çš„è¯ä¼šå¢åŠ åˆ‡ç‰‡çš„å®¹é‡ï¼Œæœ€åè¿”å›æ›´æ–°çš„åˆ‡ç‰‡ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">AppendByte</span><span class="params">(slice []<span class="type">byte</span>, data ...<span class="type">byte</span>)</span></span> []<span class="type">byte</span> &#123;</span><br><span class="line">    m := <span class="built_in">len</span>(slice)</span><br><span class="line">    n := m + <span class="built_in">len</span>(data)</span><br><span class="line">    <span class="keyword">if</span> n &gt; <span class="built_in">cap</span>(slice) &#123; <span class="comment">// if necessary, reallocate</span></span><br><span class="line">        <span class="comment">// allocate double what&#x27;s needed, for future growth.</span></span><br><span class="line">        newSlice := <span class="built_in">make</span>([]<span class="type">byte</span>, (n+<span class="number">1</span>)*<span class="number">2</span>)</span><br><span class="line">        <span class="built_in">copy</span>(newSlice, slice)</span><br><span class="line">        slice = newSlice</span><br><span class="line">    &#125;</span><br><span class="line">    slice = slice[<span class="number">0</span>:n]</span><br><span class="line">    <span class="built_in">copy</span>(slice[m:n], data)</span><br><span class="line">    <span class="keyword">return</span> slice</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ <code>AppendByte</code> çš„ä¸€ç§ç”¨æ³•ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">p := []<span class="type">byte</span>&#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>&#125;</span><br><span class="line">p = AppendByte(p, <span class="number">7</span>, <span class="number">11</span>, <span class="number">13</span>)</span><br><span class="line"><span class="comment">// p == []byte&#123;2, 3, 5, 7, 11, 13&#125;</span></span><br></pre></td></tr></table></figure><p>ç±»ä¼¼ <code>AppendByte</code> çš„å‡½æ•°æ¯”è¾ƒå®ç”¨ï¼Œå› ä¸ºå®ƒæä¾›äº†åˆ‡ç‰‡å®¹é‡å¢é•¿çš„å®Œå…¨æ§åˆ¶ã€‚ æ ¹æ®ç¨‹åºçš„ç‰¹ç‚¹ï¼Œå¯èƒ½å¸Œæœ›åˆ†é…è¾ƒå°çš„æ´»è¾ƒå¤§çš„å—ï¼Œæˆ–åˆ™æ˜¯è¶…è¿‡æŸä¸ªå¤§å°å†åˆ†é…ã€‚</p><p>ä½†å¤§å¤šæ•°ç¨‹åºä¸éœ€è¦å®Œå…¨çš„æ§åˆ¶ï¼Œå› æ­¤Goæä¾›äº†ä¸€ä¸ªå†…ç½®å‡½æ•° <code>append</code> ï¼Œ ç”¨äºå¤§å¤šæ•°åœºåˆï¼›å®ƒçš„å‡½æ•°ç­¾åï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">append</span><span class="params">(s []T, x ...T)</span></span> []T</span><br></pre></td></tr></table></figure><p><code>append</code> å‡½æ•°å°† <code>x</code> è¿½åŠ åˆ°åˆ‡ç‰‡ <code>s</code> çš„æœ«å°¾ï¼Œå¹¶ä¸”åœ¨å¿…è¦çš„æ—¶å€™å¢åŠ å®¹é‡ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a := <span class="built_in">make</span>([]<span class="type">int</span>, <span class="number">1</span>)</span><br><span class="line"><span class="comment">// a == []int&#123;0&#125;</span></span><br><span class="line">a = <span class="built_in">append</span>(a, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment">// a == []int&#123;0, 1, 2, 3&#125;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯è¦å°†ä¸€ä¸ªåˆ‡ç‰‡è¿½åŠ åˆ°å¦ä¸€ä¸ªåˆ‡ç‰‡å°¾éƒ¨ï¼Œéœ€è¦ä½¿ç”¨ <code>...</code> è¯­æ³•å°†ç¬¬2ä¸ªå‚æ•°å±•å¼€ä¸ºå‚æ•°åˆ—è¡¨ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a := []<span class="type">string</span>&#123;<span class="string">&quot;John&quot;</span>, <span class="string">&quot;Paul&quot;</span>&#125;</span><br><span class="line">b := []<span class="type">string</span>&#123;<span class="string">&quot;George&quot;</span>, <span class="string">&quot;Ringo&quot;</span>, <span class="string">&quot;Pete&quot;</span>&#125;</span><br><span class="line">a = <span class="built_in">append</span>(a, b...) <span class="comment">// equivalent to &quot;append(a, b[0], b[1], b[2])&quot;</span></span><br><span class="line"><span class="comment">// a == []string&#123;&quot;John&quot;, &quot;Paul&quot;, &quot;George&quot;, &quot;Ringo&quot;, &quot;Pete&quot;&#125;</span></span><br></pre></td></tr></table></figure><p>ç”±äºåˆ‡ç‰‡çš„é›¶å€¼ <code>nil</code> ç”¨èµ·æ¥å°±åƒä¸€ä¸ªé•¿åº¦ä¸ºé›¶çš„åˆ‡ç‰‡ï¼Œæˆ‘ä»¬å¯ä»¥å£°æ˜ä¸€ä¸ªåˆ‡ç‰‡å˜é‡ç„¶ååœ¨å¾ªç¯ ä¸­å‘å®ƒè¿½åŠ æ•°æ®ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Filter returns a new slice holding only</span></span><br><span class="line"><span class="comment">// the elements of s that satisfy fn()</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Filter</span><span class="params">(s []<span class="type">int</span>, fn <span class="keyword">func</span>(<span class="type">int</span>)</span></span> <span class="type">bool</span>) []<span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> p []<span class="type">int</span> <span class="comment">// == nil</span></span><br><span class="line">    <span class="keyword">for</span> _, v := <span class="keyword">range</span> s &#123;</span><br><span class="line">        <span class="keyword">if</span> fn(v) &#123;</span><br><span class="line">            p = <span class="built_in">append</span>(p, v)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> p</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="0x06-åˆ‡ç‰‡çš„â€œé™·é˜±â€"><a href="#0x06-åˆ‡ç‰‡çš„â€œé™·é˜±â€" class="headerlink" title="0x06 åˆ‡ç‰‡çš„â€œé™·é˜±â€"></a>0x06 åˆ‡ç‰‡çš„â€œé™·é˜±â€</h2><p>æ­£å¦‚å‰é¢æ‰€è¯´ï¼Œåˆ‡ç‰‡æ“ä½œå¹¶ä¸ä¼šå¤åˆ¶åº•å±‚çš„æ•°ç»„ã€‚æ•´ä¸ªæ•°ç»„å°†è¢«ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œç›´åˆ°å®ƒä¸å†è¢«å¼•ç”¨ã€‚ æœ‰æ—¶å€™å¯èƒ½ä¼šå› ä¸ºä¸€ä¸ªå°çš„å†…å­˜å¼•ç”¨å¯¼è‡´ä¿å­˜æ‰€æœ‰çš„æ•°æ®ã€‚</p><p>ä¾‹å¦‚ï¼Œ <code>FindDigits</code> å‡½æ•°åŠ è½½æ•´ä¸ªæ–‡ä»¶åˆ°å†…å­˜ï¼Œç„¶åæœç´¢ç¬¬ä¸€ä¸ªè¿ç»­çš„æ•°å­—ï¼Œæœ€åç»“æœä»¥åˆ‡ç‰‡æ–¹å¼è¿”å›ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> digitRegexp = regexp.MustCompile(<span class="string">&quot;[0-9]+&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">FindDigits</span><span class="params">(filename <span class="type">string</span>)</span></span> []<span class="type">byte</span> &#123;</span><br><span class="line">    b, _ := ioutil.ReadFile(filename)</span><br><span class="line">    <span class="keyword">return</span> digitRegexp.Find(b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç çš„è¡Œä¸ºå’Œæè¿°ç±»ä¼¼ï¼Œè¿”å›çš„ <code>[]byte</code> æŒ‡å‘ä¿å­˜æ•´ä¸ªæ–‡ä»¶çš„æ•°ç»„ã€‚å› ä¸ºåˆ‡ç‰‡å¼•ç”¨äº†åŸå§‹çš„æ•°ç»„ï¼Œ å¯¼è‡´ GC ä¸èƒ½é‡Šæ”¾æ•°ç»„çš„ç©ºé—´ï¼›åªç”¨åˆ°å°‘æ•°å‡ ä¸ªå­—èŠ‚å´å¯¼è‡´æ•´ä¸ªæ–‡ä»¶çš„å†…å®¹éƒ½ä¸€ç›´ä¿å­˜åœ¨å†…å­˜é‡Œã€‚</p><p>è¦ä¿®å¤æ•´ä¸ªé—®é¢˜ï¼Œå¯ä»¥å°†æ„Ÿå…´è¶£çš„æ•°æ®å¤åˆ¶åˆ°ä¸€ä¸ªæ–°çš„åˆ‡ç‰‡ä¸­ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">CopyDigits</span><span class="params">(filename <span class="type">string</span>)</span></span> []<span class="type">byte</span> &#123;</span><br><span class="line">    b, _ := ioutil.ReadFile(filename)</span><br><span class="line">    b = digitRegexp.Find(b)</span><br><span class="line">    c := <span class="built_in">make</span>([]<span class="type">byte</span>, <span class="built_in">len</span>(b))</span><br><span class="line">    <span class="built_in">copy</span>(c, b)</span><br><span class="line">    <span class="keyword">return</span> c</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨ <code>append</code> å®ç°ä¸€ä¸ªæ›´ç®€æ´çš„ç‰ˆæœ¬ã€‚è¿™ç•™ç»™è¯»è€…ä½œä¸ºç»ƒä¹ ã€‚</p><h2 id="0x07-å»¶ä¼¸é˜…è¯»"><a href="#0x07-å»¶ä¼¸é˜…è¯»" class="headerlink" title="0x07 å»¶ä¼¸é˜…è¯»"></a>0x07 å»¶ä¼¸é˜…è¯»</h2><p><a target="_blank" rel="noopener" href="https://go-zh.org/doc/effective_go.html">å®æ•ˆ Go ç¼–ç¨‹</a> åŒ…å«äº†å¯¹ <a target="_blank" rel="noopener" href="https://go-zh.org/doc/effective_go.html#%E5%88%87%E7%89%87">åˆ‡ç‰‡</a> å’Œ <a target="_blank" rel="noopener" href="https://go-zh.org/doc/effective_go.html#%E6%95%B0%E7%BB%84">æ•°ç»„</a> æ›´æ·±å…¥çš„æ¢è®¨ï¼› <a target="_blank" rel="noopener" href="https://go-zh.org/ref/spec">Go ç¼–ç¨‹è¯­è¨€è§„èŒƒ</a> å¯¹ <a target="_blank" rel="noopener" href="https://go-zh.org/ref/spec#Slice_types">åˆ‡ç‰‡ç±»å‹</a> å’Œ <a target="_blank" rel="noopener" href="https://go-zh.org/ref/spec#Array_types">æ•°ç»„ç±»å‹</a> ä»¥åŠä¸å®ƒä»¬ <a target="_blank" rel="noopener" href="https://go-zh.org/ref/spec#Length_and_capacity">ç›¸å…³çš„</a> <a target="_blank" rel="noopener" href="https://go-zh.org/ref/spec#Making_slices_maps_and_channels">è¾…åŠ©</a> <a target="_blank" rel="noopener" href="https://go-zh.org/ref/spec#Appending_and_copying_slices">å‡½æ•°</a> è¿›è¡Œäº†å®šä¹‰ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å­¦ä¹  </category>
          
          <category> GoLang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åç«¯ </tag>
            
            <tag> GoLang </tag>
            
            <tag> åˆ‡ç‰‡ </tag>
            
            <tag> Slices </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS 7 å®‰è£…Mysql</title>
      <link href="/2021/09/10/9b809391668f-q1jun/"/>
      <url>/2021/09/10/9b809391668f-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="CentOS7å®‰è£…mysql"><a href="#CentOS7å®‰è£…mysql" class="headerlink" title="CentOS7å®‰è£…mysql"></a>CentOS7å®‰è£…mysql</h1><p><strong>1.  å¸è½½é»˜è®¤å®‰è£…çš„mariadbï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum search mysql</span><br><span class="line"></span><br><span class="line">yum remove mariadb.<span class="property">x86_64</span></span><br></pre></td></tr></table></figure><p><strong>2.  å»å®˜ç½‘æ‰¾åˆ°mysqlçš„ä¸‹è½½ç‰ˆæœ¬</strong></p><p><a target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/">https://dev.mysql.com/downloads/</a>    repo&#x2F;yum&#x2F;</p><p>æ‰¾åˆ°ä¸‹é¢çš„Linux7ï¼Œå³CentOS7(CentOSæ˜¯Red Hatæ——ä¸‹çš„)</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/gibtj8e3z5.png" alt="gibtj8e3z5"></p><p>åœ¨ä¸‹é¢çš„é“¾æ¥ä¸Šç›´æ¥å³é”®å¤åˆ¶é“¾æ¥ï¼ˆæˆ–è€…å¯ä»¥å…ˆä¸‹è½½åˆ°æœ¬åœ°ç„¶åå†ç”¨ftpä¼ åˆ°æœåŠ¡å™¨ï¼‰</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/n5mis7drnt.png" alt="n5mis7drnt"></p><p><strong>3.  å®‰è£…</strong></p><p>å®‰è£…ï¼šwget <a target="_blank" rel="noopener" href="https://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm">https://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm</a></p><p>æ³¨ï¼šæ¨èåœ¨&#x2F;tmpç›®å½•ä¸‹è¿›è¡Œ</p><p><strong>4.  æœ¬åœ°å®‰è£…yumæº</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum localinstall mysql</span><br></pre></td></tr></table></figure><p><strong>5.  æ£€æµ‹æ˜¯å¦å·²ç»å®‰è£…</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum search mysql</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/53ymlwd4ou.png" alt="53ymlwd4ou"></p><p>æ‰¾åˆ°å¯¹åº”çš„è½¯ä»¶åŒ…ï¼Œå¤åˆ¶åç§°</p><p><strong>6.  ä½¿ç”¨yumå®‰è£…</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install mysql-community-server.<span class="property">x86_64</span></span><br></pre></td></tr></table></figure><p><strong>7.  æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep mysql</span><br></pre></td></tr></table></figure><p><strong>8.  å¯åŠ¨mysql</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">service mysqld start</span><br><span class="line"></span><br><span class="line">service mysqld restart</span><br><span class="line"></span><br><span class="line">service mysqld stop</span><br></pre></td></tr></table></figure><p><strong>9.  æŸ¥æ‰¾é»˜è®¤ç™»å½•å¯†ç </strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /<span class="keyword">var</span>/log/mysqld.<span class="property">log</span> | grep password</span><br></pre></td></tr></table></figure><p><strong>10. ç™»å½•</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -på¯†ç </span><br></pre></td></tr></table></figure><p>æ³¨ï¼šæ¨èä½¿ç”¨ mysql -uroot-p å›è½¦ä¹‹åå†è¾“å…¥å¯†ç ã€‚å› ä¸ºä½¿ç”¨historyå‘½ä»¤ä¼šçœ‹åˆ°ä½ æ˜æ–‡çš„å¯†ç </p><p><strong>11. ä¿®æ”¹å¯†ç </strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">SET</span> <span class="variable constant_">PASSWORD</span> = <span class="title function_">PASSWORD</span>(<span class="string">&#x27; xxxx &#x27;</span>);</span><br></pre></td></tr></table></figure><p><strong>12. å¼€é€šè¿œç¨‹è¿æ¥æƒé™</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br><span class="line"></span><br><span class="line">show tables;</span><br><span class="line">select * <span class="keyword">from</span> user \G</span><br><span class="line"></span><br><span class="line">select host, user <span class="keyword">from</span> user \G</span><br></pre></td></tr></table></figure><p>æ³¨ï¼š\Gä¼šæ ¼å¼åŒ–æ˜¾ç¤º</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update user set host=<span class="string">&quot;%&quot;</span> where <span class="title class_">Host</span>=<span class="string">&#x27;localhost&#x27;</span> and user = <span class="string">&quot;root&quot;</span>;</span><br></pre></td></tr></table></figure><p><strong>æ›´æ–°æƒé™</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><p>æˆ–è€…ç›´æ¥é‡å¯æœåŠ¡ï¼šservice mysqld restart</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åç«¯ </tag>
            
            <tag> Linux </tag>
            
            <tag> CentOS </tag>
            
            <tag> MySql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOSä¸­å®‰è£…Nginx</title>
      <link href="/2021/09/09/ce0253c7cb5a-q1jun/"/>
      <url>/2021/09/09/ce0253c7cb5a-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="CentOSå®‰è£…Nginx"><a href="#CentOSå®‰è£…Nginx" class="headerlink" title="CentOSå®‰è£…Nginx"></a>CentOSå®‰è£…Nginx</h1><h2 id="ä¸€ã€Nginxå®‰è£…"><a href="#ä¸€ã€Nginxå®‰è£…" class="headerlink" title="ä¸€ã€Nginxå®‰è£…"></a>ä¸€ã€Nginxå®‰è£…</h2><h3 id="1-æ·»åŠ Nginxåˆ°yumæº"><a href="#1-æ·»åŠ Nginxåˆ°yumæº" class="headerlink" title="1.æ·»åŠ Nginxåˆ°yumæº"></a>1.æ·»åŠ Nginxåˆ°yumæº</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm</span><br></pre></td></tr></table></figure><h3 id="2-å®‰è£…nginx"><a href="#2-å®‰è£…nginx" class="headerlink" title="2.å®‰è£…nginx"></a>2.å®‰è£…nginx</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y nginx</span><br></pre></td></tr></table></figure><h3 id="3-å¯åŠ¨nginx"><a href="#3-å¯åŠ¨nginx" class="headerlink" title="3.å¯åŠ¨nginx"></a>3.å¯åŠ¨nginx</h3><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="literal">start</span> nginx.service</span><br></pre></td></tr></table></figure><h3 id="4-è®¾ç½®å¼€æœºå¯åŠ¨"><a href="#4-è®¾ç½®å¼€æœºå¯åŠ¨" class="headerlink" title="4.è®¾ç½®å¼€æœºå¯åŠ¨"></a>4.è®¾ç½®å¼€æœºå¯åŠ¨</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> nginx.service</span><br></pre></td></tr></table></figure><h3 id="5-åœæ­¢å¼€æœºè‡ªå¯åŠ¨"><a href="#5-åœæ­¢å¼€æœºè‡ªå¯åŠ¨" class="headerlink" title="5. åœæ­¢å¼€æœºè‡ªå¯åŠ¨"></a>5. åœæ­¢å¼€æœºè‡ªå¯åŠ¨</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">disable</span> nginx.service</span><br></pre></td></tr></table></figure><h3 id="6-æŸ¥çœ‹æœåŠ¡å½“å‰çŠ¶æ€"><a href="#6-æŸ¥çœ‹æœåŠ¡å½“å‰çŠ¶æ€" class="headerlink" title="6.æŸ¥çœ‹æœåŠ¡å½“å‰çŠ¶æ€"></a>6.æŸ¥çœ‹æœåŠ¡å½“å‰çŠ¶æ€</h3><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="keyword">status</span> nginx.service</span><br></pre></td></tr></table></figure><h3 id="7-é‡å¯NginxæœåŠ¡"><a href="#7-é‡å¯NginxæœåŠ¡" class="headerlink" title="7.é‡å¯NginxæœåŠ¡"></a>7.é‡å¯NginxæœåŠ¡</h3><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">restart</span> nginx.service</span><br></pre></td></tr></table></figure><h3 id="8-æŸ¥çœ‹æ‰€æœ‰å·²å¯åŠ¨çš„æœåŠ¡"><a href="#8-æŸ¥çœ‹æ‰€æœ‰å·²å¯åŠ¨çš„æœåŠ¡" class="headerlink" title="8.æŸ¥çœ‹æ‰€æœ‰å·²å¯åŠ¨çš„æœåŠ¡"></a>8.æŸ¥çœ‹æ‰€æœ‰å·²å¯åŠ¨çš„æœåŠ¡</h3><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">systemctl</span> <span class="built_in">list-units</span> <span class="built_in">--type=service</span></span><br></pre></td></tr></table></figure><h2 id="äºŒã€é˜²ç«å¢™é…ç½®"><a href="#äºŒã€é˜²ç«å¢™é…ç½®" class="headerlink" title="äºŒã€é˜²ç«å¢™é…ç½®"></a>äºŒã€é˜²ç«å¢™é…ç½®</h2><h3 id="1-é˜²ç«å¢™æ‰“å¼€80ç«¯å£"><a href="#1-é˜²ç«å¢™æ‰“å¼€80ç«¯å£" class="headerlink" title="1.é˜²ç«å¢™æ‰“å¼€80ç«¯å£"></a>1.é˜²ç«å¢™æ‰“å¼€80ç«¯å£</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd <span class="attribute">--zone</span>=public <span class="attribute">--add-port</span>=80/tcp --permanent</span><br></pre></td></tr></table></figure><h4 id="å‚æ•°è¯´æ˜ï¼š"><a href="#å‚æ•°è¯´æ˜ï¼š" class="headerlink" title="å‚æ•°è¯´æ˜ï¼š"></a>å‚æ•°è¯´æ˜ï¼š</h4><p>â€“zone #ä½œç”¨åŸŸ</p><p>â€“add-port&#x3D;80&#x2F;tcp  #æ·»åŠ ç«¯å£ï¼Œæ ¼å¼ä¸ºï¼šç«¯å£&#x2F;é€šè®¯åè®®</p><p>â€“permanent  #æ°¸ä¹…ç”Ÿæ•ˆï¼Œæ²¡æœ‰æ­¤å‚æ•°é‡å¯åå¤±æ•ˆ</p><h3 id="2-é‡å¯é˜²ç«å¢™ç”Ÿæ•ˆ"><a href="#2-é‡å¯é˜²ç«å¢™ç”Ÿæ•ˆ" class="headerlink" title="2.é‡å¯é˜²ç«å¢™ç”Ÿæ•ˆ"></a>2.é‡å¯é˜²ç«å¢™ç”Ÿæ•ˆ</h3><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd <span class="comment">--reload</span></span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€å¸¸ç”¨ç›®å½•"><a href="#ä¸‰ã€å¸¸ç”¨ç›®å½•" class="headerlink" title="ä¸‰ã€å¸¸ç”¨ç›®å½•"></a>ä¸‰ã€å¸¸ç”¨ç›®å½•</h2><p>ç½‘ç«™æ–‡ä»¶å­˜æ”¾é»˜è®¤ç›®å½•ã€€ã€€&#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html</p><p>ç½‘ç«™é»˜è®¤ç«™ç‚¹é…ç½®ã€€ã€€&#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;default.conf</p><p>è‡ªå®šä¹‰Nginxç«™ç‚¹é…ç½®æ–‡ä»¶å­˜æ”¾ç›®å½•ã€€ã€€&#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;</p><p>Nginxå…¨å±€é…ç½®ã€€ã€€&#x2F;etc&#x2F;nginx&#x2F;nginx.conf</p><h2 id="å››ã€Nginxé…ç½®"><a href="#å››ã€Nginxé…ç½®" class="headerlink" title="å››ã€Nginxé…ç½®"></a>å››ã€Nginxé…ç½®</h2><h3 id="1-é…ç½®ç«¯å£è½¬å‘80è½¬åˆ°8092ï¼Œé…ç½®åé‡å¯Nginx"><a href="#1-é…ç½®ç«¯å£è½¬å‘80è½¬åˆ°8092ï¼Œé…ç½®åé‡å¯Nginx" class="headerlink" title="1.é…ç½®ç«¯å£è½¬å‘80è½¬åˆ°8092ï¼Œé…ç½®åé‡å¯Nginx"></a>1.é…ç½®ç«¯å£è½¬å‘80è½¬åˆ°8092ï¼Œé…ç½®åé‡å¯Nginx</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi <span class="regexp">/etc/</span>nginx<span class="regexp">/conf.d/</span><span class="keyword">default</span>.conf</span><br></pre></td></tr></table></figure><p><img src="/Users/q1jun/Documents/%E7%AC%94%E8%AE%B0/nginx_default.conf.png" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åç«¯ </tag>
            
            <tag> Linux </tag>
            
            <tag> CentOS </tag>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®° 06</title>
      <link href="/2021/09/07/528c659f0909-q1jun/"/>
      <url>/2021/09/07/528c659f0909-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®°-06"><a href="#å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®°-06" class="headerlink" title="å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®° 06"></a>å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®° 06</h1><blockquote><p>APIçš„ä½¿ç”¨ï¼š</p><p>ä¸Šä¸€ç¯‡ç¬”è®°å†™äº†å°ç¨‹åºé¡µé¢å¦‚ä½•ä½¿ç”¨JavaScriptè„šæœ¬ï¼Œæœ‰äº†è„šæœ¬ä»¥åï¼Œå°±å¯ä»¥è°ƒç”¨å¾®ä¿¡æä¾›çš„å„ç§èƒ½åŠ›ï¼ˆå³å¾®ä¿¡APIï¼‰ï¼Œä»è€Œä½œå‡ºåƒå˜ä¸‡åŒ–çš„é¡µé¢ã€‚</p></blockquote><h2 id="0x01-WXMLæ¸²æŸ“è¯­æ³•"><a href="#0x01-WXMLæ¸²æŸ“è¯­æ³•" class="headerlink" title="0x01 WXMLæ¸²æŸ“è¯­æ³•"></a>0x01 WXMLæ¸²æŸ“è¯­æ³•</h2><p>å‰é¢è¯´è¿‡ï¼Œå°ç¨‹åºçš„é¡µé¢ç»“æ„ä½¿ç”¨ WXML è¯­è¨€è¿›è¡Œæè¿°ã€‚</p><p>WXML çš„å…¨ç§°æ˜¯å¾®ä¿¡é¡µé¢æ ‡ç­¾è¯­è¨€ï¼ˆWeixin Markup Languageï¼‰ï¼Œå®ƒä¸ä»…æä¾›äº†è®¸å¤šåŠŸèƒ½æ ‡ç­¾ï¼Œè¿˜æœ‰ä¸€å¥—è‡ªå·±çš„è¯­æ³•ï¼Œå¯ä»¥è®¾ç½®é¡µé¢æ¸²æŸ“çš„ç”Ÿæ•ˆæ¡ä»¶ï¼Œä»¥åŠè¿›è¡Œå¾ªç¯å¤„ç†ã€‚</p><p>æ–°å»ºä¸€ä¸ª<code>page</code>:</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220118114010204.png" alt="image-20220118114010204"></p><p>å¾®ä¿¡ API æä¾›çš„æ•°æ®ï¼Œå°±é€šè¿‡ WXML çš„æ¸²æŸ“è¯­æ³•å±•ç°åœ¨é¡µé¢ä¸Šã€‚æ¯”å¦‚ï¼Œ<code>home.js</code>é‡Œé¢çš„æ•°æ®æºæ˜¯ä¸€ä¸ªæ•°ç»„ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">items</span>: [<span class="string">&#x27;äº‹é¡¹ A&#x27;</span>, <span class="string">&#x27;äº‹é¡¹ B&#x27;</span>, <span class="string">&#x27;äº‹é¡¹ C&#x27;</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Page()</code>çš„å‚æ•°é…ç½®å¯¹è±¡çš„<code>data.items</code>å±æ€§æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚é€šè¿‡æ•°æ®ç»‘å®šæœºåˆ¶ï¼Œé¡µé¢å¯ä»¥è¯»å–å…¨å±€å˜é‡<code>items</code>ï¼Œæ‹¿åˆ°è¿™ä¸ªæ•°ç»„ã€‚</p><p>æ‹¿åˆ°æ•°ç»„ä»¥åï¼Œæ€æ ·å°†æ¯ä¸€ä¸ªæ•°ç»„æˆå‘˜å±•ç°åœ¨é¡µé¢ä¸Šå‘¢ï¼ŸWXML çš„æ•°ç»„å¾ªç¯è¯­æ³•ï¼Œå°±æ˜¯ä¸€ä¸ªå¾ˆç®€ä¾¿çš„æ–¹æ³•ã€‚</p><p>æ‰“å¼€<code>home.wxml</code>ï¼Œæ”¹æˆä¸‹é¢çš„ä»£ç ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;text&gt;pages/home/home.<span class="property">wxml</span>&lt;/text&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;items&#125;&#125;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;&#123;index&#125;&#125;ã€ &#123;&#123;item&#125;&#125;</span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>&lt;text&gt;</code>æ ‡ç­¾çš„<code>wx:for</code>å±æ€§ï¼Œè¡¨ç¤ºå½“å‰æ ‡ç­¾ï¼ˆ<code>&lt;text&gt;</code>ï¼‰å¯ç”¨æ•°ç»„å¾ªç¯ï¼Œå¤„ç†<code>items</code>æ•°ç»„ã€‚æ•°ç»„æœ‰å¤šå°‘ä¸ªæˆå‘˜ï¼Œå°±ä¼šç”Ÿæˆå¤šå°‘ä¸ª<code>&lt;text&gt;</code>ã€‚æ¸²æŸ“åçš„é¡µé¢ç»“æ„å¦‚ä¸‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;view&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">text</span>&gt;</span>...<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">text</span>&gt;</span>...<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">text</span>&gt;</span>...<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure><p>åœ¨å¾ªç¯ä½“å†…ï¼Œå½“å‰æ•°ç»„æˆå‘˜çš„ä½ç½®åºå·ï¼ˆä»<code>0</code>å¼€å§‹ï¼‰ç»‘å®šå˜é‡<code>index</code>ï¼Œæˆå‘˜çš„å€¼ç»‘å®šå˜é‡<code>item</code>ã€‚</p><p>å¼€å‘è€…å·¥å…·å¯¼å…¥é¡¹ç›®ä»£ç ï¼Œé¡µé¢æ¸²æŸ“ç»“æœå¦‚ä¸‹ã€‚</p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220118114244480.png" alt="image-20220118114244480" style="zoom:50%;" /><p>WXML çš„å…¶ä»–æ¸²æŸ“è¯­æ³•ï¼ˆä¸»è¦æ˜¯æ¡ä»¶åˆ¤æ–­å’Œå¯¹è±¡å¤„ç†ï¼‰ï¼Œè¯·æŸ¥çœ‹<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/list.html">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><h2 id="0x02-å®¢æˆ·ç«¯æ•°æ®å­˜å‚¨"><a href="#0x02-å®¢æˆ·ç«¯æ•°æ®å­˜å‚¨" class="headerlink" title="0x02 å®¢æˆ·ç«¯æ•°æ®å­˜å‚¨"></a>0x02 å®¢æˆ·ç«¯æ•°æ®å­˜å‚¨</h2><p>é¡µé¢æ¸²æŸ“ç”¨åˆ°çš„å¤–éƒ¨æ•°æ®ï¼Œå¦‚æœæ¯æ¬¡éƒ½ä»æœåŠ¡å™¨æˆ– API è·å–ï¼Œæœ‰æ—¶å¯èƒ½ä¼šæ¯”è¾ƒæ…¢ï¼Œç”¨æˆ·ä½“éªŒä¸å¥½ã€‚</p><p>å°ç¨‹åºå…è®¸å°†ä¸€éƒ¨åˆ†æ•°æ®ä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼ˆå³å¾®ä¿¡ Appï¼‰çš„æœ¬åœ°å‚¨å­˜é‡Œé¢ï¼ˆå…¶å®å°±æ˜¯è‡ªå®šä¹‰çš„ç¼“å­˜ï¼‰ã€‚ä¸‹æ¬¡éœ€è¦ç”¨åˆ°è¿™äº›æ•°æ®çš„æ—¶å€™ï¼Œå°±ç›´æ¥ä»æœ¬åœ°è¯»å–ï¼Œè¿™æ ·å°±å¤§å¤§åŠ å¿«äº†æ¸²æŸ“ã€‚æœ¬èŠ‚ä»‹ç»æ€ä¹ˆä½¿ç”¨å®¢æˆ·ç«¯æ•°æ®å‚¨å­˜ã€‚</p><p>æ‰“å¼€<code>home.wxml</code>ï¼Œæ”¹æˆä¸‹é¢çš„ä»£ç ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;text&gt;pages/home/home.<span class="property">wxml</span>&lt;/text&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;items&#125;&#125;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;&#123;index&#125;&#125;ã€ &#123;&#123;item&#125;&#125;</span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¾“å…¥æ–°å¢äº‹é¡¹&quot;</span> <span class="attr">bind:input</span>=<span class="string">&quot;inputHandler&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;<span class="name">button</span> <span class="attr">bind:tap</span>=<span class="string">&quot;buttonHandler&quot;</span>&gt;</span>ç¡®å®š<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç é™¤äº†å±•ç¤ºæ•°ç»„<code>items</code>ï¼Œè¿˜æ–°å¢äº†ä¸€ä¸ªè¾“å…¥æ¡†å’Œä¸€ä¸ªæŒ‰é’®ï¼Œç”¨æ¥æ¥å—ç”¨æˆ·çš„è¾“å…¥ã€‚èƒŒåçš„æ„å›¾æ˜¯ï¼Œç”¨æˆ·é€šè¿‡è¾“å…¥æ¡†ï¼Œä¸º<code>items</code>æ•°ç»„åŠ å…¥æ–°æˆå‘˜ã€‚</p><p>å¼€å‘è€…å·¥å…·å¯¼å…¥é¡¹ç›®ä»£ç ï¼Œé¡µé¢æ¸²æŸ“ç»“æœå¦‚ä¸‹ã€‚</p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220118114545239.png" alt="image-20220118114545239" style="zoom:50%;" /><p>æ³¨æ„ï¼Œè¾“å…¥æ¡†æœ‰ä¸€ä¸ª<code>input</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°<code>inputHandler</code>ï¼ˆè¾“å…¥å†…å®¹æ”¹å˜æ—¶è§¦å‘ï¼‰ï¼ŒæŒ‰é’®æœ‰ä¸€ä¸ª<code>tap</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°<code>buttonHandler</code>ï¼ˆç‚¹å‡»æŒ‰é’®æ—¶è§¦å‘ï¼‰ã€‚è¿™ä¸¤ä¸ªç›‘å¬å‡½æ•°è´Ÿè´£å¤„ç†ç”¨æˆ·çš„è¾“å…¥ã€‚</p><p>ç„¶åï¼Œæ‰“å¼€<code>home.js</code>ï¼Œä»£ç ä¿®æ”¹å¦‚ä¸‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é¡µé¢çš„åˆå§‹æ•°æ®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">items</span>: [],</span><br><span class="line">        <span class="attr">inputValue</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">inputHandler</span>(<span class="params">event</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">inputValue</span>:event.<span class="property">detail</span>.<span class="property">value</span> || <span class="string">&#x27;&#x27;</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="title function_">buttonHandler</span>(<span class="params">event</span>)&#123;</span><br><span class="line">        <span class="keyword">const</span> newItem = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">inputValue</span>.<span class="title function_">trim</span>();</span><br><span class="line">        <span class="keyword">if</span>(!newItem) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">const</span> itemArr = [...<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">items</span>, newItem];</span><br><span class="line">        wx.<span class="title function_">setStorageSync</span>(<span class="string">&#x27;items&#x27;</span>, itemArr);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">items</span>:itemArr</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åŠ è½½</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> itemArr = wx.<span class="title function_">getStorageSync</span>(<span class="string">&#x27;items&#x27;</span>) || [];</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;<span class="attr">items</span>:itemArr&#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œè¾“å…¥æ¡†ç›‘å¬å‡½æ•°<code>inputHandler()</code>åªåšäº†ä¸€ä»¶äº‹ï¼Œå°±æ˜¯æ¯å½“ç”¨æˆ·çš„è¾“å…¥å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå…ˆä»äº‹ä»¶å¯¹è±¡<code>event</code>çš„<code>detail.value</code>å±æ€§ä¸Šæ‹¿åˆ°è¾“å…¥çš„å†…å®¹ï¼Œç„¶åå°†å…¶å†™å…¥å…¨å±€å˜é‡<code>inputValue</code>ã€‚å¦‚æœç”¨æˆ·åˆ é™¤äº†è¾“å…¥æ¡†é‡Œé¢çš„å†…å®¹ï¼Œ<code>inputValue</code>å°±è®¾ä¸ºç©ºå­—ç¬¦ä¸²ã€‚</p><p>æŒ‰é’®ç›‘å¬å‡½æ•°<code>buttonHandler()</code>æ˜¯æ¯å½“ç”¨æˆ·ç‚¹å‡»æäº¤æŒ‰é’®ï¼Œå°±ä¼šæ‰§è¡Œã€‚å®ƒå…ˆä»<code>inputValue</code>æ‹¿åˆ°ç”¨æˆ·è¾“å…¥çš„å†…å®¹ï¼Œç¡®å®šéç©ºä»¥åï¼Œå°±å°†å…¶åŠ å…¥<code>items</code>æ•°ç»„ã€‚ç„¶åï¼Œä½¿ç”¨å¾®ä¿¡æä¾›çš„<code>wx.setStorageSync()</code>æ–¹æ³•ï¼Œå°†<code>items</code>æ•°ç»„å­˜å‚¨åœ¨å®¢æˆ·ç«¯ã€‚æœ€åä½¿ç”¨<code>this.setData()</code>æ–¹æ³•æ›´æ–°ä¸€ä¸‹å…¨å±€å˜é‡<code>items</code>ï¼Œè¿›è€Œè§¦å‘é¡µé¢çš„é‡æ–°æ¸²æŸ“ã€‚</p><p><code>wx.setStorageSync()</code>æ–¹æ³•å±äºå°ç¨‹åºçš„å®¢æˆ·ç«¯æ•°æ®å‚¨å­˜ APIï¼Œç”¨äºå°†æ•°æ®å†™å…¥å®¢æˆ·ç«¯å‚¨å­˜ã€‚å®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯é”®åå’Œé”®å€¼ã€‚ä¸ä¹‹é…å¥—çš„ï¼Œè¿˜æœ‰ä¸€ä¸ª<code>wx.getStorageSync()</code>æ–¹æ³•ï¼Œç”¨äºè¯»å–å®¢æˆ·ç«¯å‚¨å­˜çš„æ•°æ®ã€‚å®ƒåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯é”®åã€‚è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯åŒæ­¥çš„ï¼Œå°ç¨‹åºä¹Ÿæä¾›å¼‚æ­¥ç‰ˆæœ¬ï¼Œè¯·å‚è€ƒ<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/storage/wx.setStorage.html">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><p>æœ€åï¼Œä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Page()</code>çš„å‚æ•°é…ç½®å¯¹è±¡è¿˜æœ‰ä¸€ä¸ª<code>onLoad()</code>æ–¹æ³•ã€‚è¯¥æ–¹æ³•å±äºé¡µé¢çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œé¡µé¢åŠ è½½åä¼šè‡ªåŠ¨æ‰§è¡Œè¯¥æ–¹æ³•ã€‚å®ƒåªæ‰§è¡Œä¸€æ¬¡ï¼Œç”¨äºé¡µé¢åˆå§‹åŒ–ï¼Œè¿™é‡Œçš„æ„å›¾æ˜¯æ¯æ¬¡ç”¨æˆ·æ‰“å¼€é¡µé¢ï¼Œéƒ½é€šè¿‡<code>wx.getStorageSync()</code>æ–¹æ³•ï¼Œä»å®¢æˆ·ç«¯å–å‡ºä»¥å‰å­˜å‚¨çš„æ•°æ®ï¼Œæ˜¾ç¤ºåœ¨é¡µé¢ä¸Šã€‚</p><p>å¿…é¡»ç‰¢è®°çš„æ˜¯ï¼Œå®¢æˆ·ç«¯å‚¨å­˜æ˜¯ä¸å¯é çš„ï¼Œéšæ—¶å¯èƒ½æ¶ˆå¤±ï¼ˆæ¯”å¦‚ç”¨æˆ·æ¸…ç†ç¼“å­˜ï¼‰ã€‚ç”¨æˆ·æ¢äº†ä¸€å°æ‰‹æœºï¼Œæˆ–è€…æœ¬æœºé‡è£…å¾®ä¿¡ï¼ŒåŸæ¥çš„æ•°æ®å°±ä¸¢å¤±äº†ã€‚æ‰€ä»¥ï¼Œå®ƒåªé€‚åˆä¿å­˜ä¸€äº›ä¸é‡è¦çš„ä¸´æ—¶æ•°æ®ï¼Œæœ€å¸¸è§çš„ç”¨é€”ä¸€èˆ¬å°±æ˜¯ä½œä¸ºç¼“å­˜ï¼ŒåŠ å¿«é¡µé¢æ˜¾ç¤ºã€‚</p><h2 id="0x03-è¿œç¨‹æ•°æ®è¯·æ±‚"><a href="#0x03-è¿œç¨‹æ•°æ®è¯·æ±‚" class="headerlink" title="0x03 è¿œç¨‹æ•°æ®è¯·æ±‚"></a>0x03 è¿œç¨‹æ•°æ®è¯·æ±‚</h2><p>å°ç¨‹åºå¯ä»¥ä»å¤–éƒ¨æœåŠ¡å™¨è¯»å–æ•°æ®ï¼Œä¹Ÿå¯ä»¥å‘æœåŠ¡å™¨å‘é€æ•°æ®ã€‚æœ¬èŠ‚å°±æ¥çœ‹çœ‹æ€ä¹ˆä½¿ç”¨å°ç¨‹åºçš„ç½‘ç»œèƒ½åŠ›ã€‚</p><p>å¾®ä¿¡è§„å®šï¼Œåªæœ‰åå°ç™»è®°è¿‡çš„æœåŠ¡å™¨åŸŸåï¼Œæ‰å¯ä»¥è¿›è¡Œé€šä¿¡ã€‚ä¸è¿‡ï¼Œå¼€å‘è€…å·¥å…·å…è®¸å¼€å‘æ—¶æ”¾æ¾è¿™ä¸ªé™åˆ¶ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220118115546022.png" alt="image-20220118115546022"></p><p>æŒ‰ç…§ä¸Šå›¾ï¼Œç‚¹å‡»å¼€å‘è€…å·¥å…·å³ä¸Šè§’çš„ä¸‰æ¡æ¨ªçº¿ï¼ˆâ€è¯¦æƒ…â€ï¼‰ï¼Œé€‰ä¸­â€ä¸æ ¡éªŒåˆæ³•åŸŸåã€web-viewï¼ˆä¸šåŠ¡åŸŸåï¼‰ã€TLS ç‰ˆæœ¬ä»¥åŠ HTTPS è¯ä¹¦â€ ã€‚è¿™æ ·çš„è¯ï¼Œå°ç¨‹åºåœ¨å¼€å‘æ—¶ï¼Œå°±å¯ä»¥è·ŸæœåŠ¡å™¨è¿›è¡Œé€šä¿¡äº†ã€‚</p><p>ä¸‹é¢ï¼Œæˆ‘ä»¬åœ¨æœ¬åœ°å¯åŠ¨ä¸€ä¸ªå¼€å‘æœåŠ¡å™¨ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘é€‰ç”¨äº† <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/json-server">json-server</a> ä½œä¸ºæœ¬åœ°æœåŠ¡å™¨ï¼Œå®ƒçš„å¥½å¤„æ˜¯åªè¦æœ‰ä¸€ä¸ª JSON æ•°æ®æ–‡ä»¶ï¼Œå°±èƒ½è‡ªåŠ¨ç”Ÿæˆ RESTful æ¥å£ã€‚</p><blockquote><p>å¦‚æœæœªå®‰è£…json-server ï¼Œä½¿ç”¨<code>npm install -g json-server</code>å®‰è£…ï¼Œ</p><p>å¦‚æœæ˜¯cnpmçš„è¯åˆ™æ˜¯<code>cnpm install -g json-server</code>ã€‚</p></blockquote><p>é¦–å…ˆï¼Œæ–°å»ºä¸€ä¸ªæ•°æ®æ–‡ä»¶<code>db.json</code>ï¼Œå†…å®¹å¦‚ä¸‹ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220118120912444.png" alt="image-20220118120912444"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;items&quot;</span>: [<span class="string">&quot;äº‹é¡¹ A&quot;</span>, <span class="string">&quot;äº‹é¡¹ B&quot;</span>, <span class="string">&quot;äº‹é¡¹ C&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œç¡®è®¤æœ¬æœºå®‰è£…äº† Node.js ä»¥åï¼Œè¿›å…¥<code>db.json</code>æ‰€åœ¨çš„ç›®å½•ï¼Œåœ¨å‘½ä»¤è¡Œæ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼Œå¯åŠ¨æœåŠ¡å™¨ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx json-server db.json</span><br></pre></td></tr></table></figure><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œè¿™æ—¶ä½ æ‰“å¼€æµè§ˆå™¨è®¿é—®<code>localhost:3000/items</code>è¿™ä¸ªç½‘å€ï¼Œå°±èƒ½çœ‹åˆ°è¿”å›äº†ä¸€ä¸ªæ•°ç»„<code>[&quot;äº‹é¡¹ A&quot;, &quot;äº‹é¡¹ B&quot;, &quot;äº‹é¡¹ C&quot;]</code>ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220118121152351.png" alt="image-20220118121152351"></p><p>æ¥ç€ï¼Œæ‰“å¼€<code>home.js</code>ï¼Œä»£ç ä¿®æ”¹å¦‚ä¸‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é¡µé¢çš„åˆå§‹æ•°æ®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">items</span>: [],</span><br><span class="line">        <span class="attr">inputValue</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">inputHandler</span>(<span class="params">event</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">inputValue</span>:event.<span class="property">detail</span>.<span class="property">value</span> || <span class="string">&#x27;&#x27;</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="title function_">buttonHandler</span>(<span class="params">event</span>)&#123;</span><br><span class="line">        <span class="keyword">const</span> newItem = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">inputValue</span>.<span class="title function_">trim</span>();</span><br><span class="line">        <span class="keyword">if</span>(!newItem) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">const</span> itemArr = [...<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">items</span>, newItem];</span><br><span class="line">        wx.<span class="title function_">setStorageSync</span>(<span class="string">&#x27;items&#x27;</span>, itemArr);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">items</span>:itemArr</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”Ÿå‘½å‘¨æœŸå‡½æ•°--ç›‘å¬é¡µé¢åŠ è½½</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> that = <span class="variable language_">this</span>;</span><br><span class="line">        wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;http://localhost:3000/items&#x27;</span>,</span><br><span class="line">        <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">            that.<span class="title function_">setData</span>(&#123; <span class="attr">items</span>: res.<span class="property">data</span> &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•<code>onLoad()</code>ä¼šåœ¨é¡µé¢åŠ è½½åè‡ªåŠ¨æ‰§è¡Œï¼Œè¿™æ—¶å°±ä¼šæ‰§è¡Œ<code>wx.request()</code>æ–¹æ³•å»è¯·æ±‚è¿œç¨‹æ•°æ®ã€‚å¦‚æœè¯·æ±‚æˆåŠŸï¼Œå°±ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°<code>succcess()</code>ï¼Œæ›´æ–°é¡µé¢å…¨å±€å˜é‡<code>items</code>ï¼Œä»è€Œè®©è¿œç¨‹æ•°æ®æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šã€‚</p><p><code>wx.request()</code>æ–¹æ³•å°±æ˜¯å°ç¨‹åºçš„ç½‘ç»œè¯·æ±‚ APIï¼Œé€šè¿‡å®ƒå¯ä»¥å‘é€ HTTP è¯·æ±‚ã€‚å®ƒçš„å‚æ•°é…ç½®å¯¹è±¡æœ€å°‘éœ€è¦æŒ‡å®š<code>url</code>å±æ€§ï¼ˆè¯·æ±‚çš„ç½‘å€ï¼‰å’Œ<code>succcess()</code>æ–¹æ³•ï¼ˆæœåŠ¡å™¨è¿”å›æ•°æ®çš„å¤„ç†å‡½æ•°ï¼‰ã€‚å…¶ä»–å‚æ•°è¯·å‚è€ƒ<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/network/request/wx.request.html">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><p>å¼€å‘è€…å·¥å…·å¯¼å…¥é¡¹ç›®ä»£ç ï¼Œé¡µé¢æ¸²æŸ“ç»“æœå¦‚ä¸‹ã€‚å®ƒçš„åˆå§‹æ•°æ®æ˜¯ä»æœåŠ¡å™¨æ‹¿åˆ°çš„ã€‚</p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220118121429947.png" alt="image-20220118121429947" style="zoom:50%;" /><p>è¿™ä¸ªä¾‹å­åªå®ç°äº†è¿œç¨‹æ•°æ®è·å–ï¼Œjson-server å®é™…ä¸Šè¿˜æ”¯æŒæ•°æ®çš„æ–°å¢å’Œåˆ æ”¹ã€‚</p><h2 id="0x04-ç»„ä»¶"><a href="#0x04-ç»„ä»¶" class="headerlink" title="0x04 ç»„ä»¶"></a>0x04 <open-data>ç»„ä»¶</h2><p>å¦‚æœè¦åœ¨é¡µé¢ä¸Šå±•ç¤ºå½“å‰ç”¨æˆ·çš„èº«ä»½ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨å°ç¨‹åºæä¾›çš„<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/open-data.html"><code>&lt;open-data&gt;</code>ç»„ä»¶</a>ã€‚</p><p>åœ¨<code>app.json</code>ä¸­æ–°å»º<code>page</code>:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;pages/openData/opendata&quot;</span><span class="punctuation">,</span></span><br><span class="line">  ...</span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>ä¿å­˜åé¡¹ç›®ä¸­ä¼šè‡ªåŠ¨ä¸ºä½ åˆ›å»º<code>page</code>æ–‡ä»¶å¤¹:</p><p>â€‹    ![image-20220118122210964](&#x2F;Users&#x2F;q1jun&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20220118122210964.png)</p><p>æ‰“å¼€<code>opendata.wxml</code>æ–‡ä»¶ï¼Œä»£ç ä¿®æ”¹å¦‚ä¸‹ã€‚    </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">open-data</span> <span class="attr">type</span>=<span class="string">&quot;userAvatarUrl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">open-data</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">open-data</span> <span class="attr">type</span>=<span class="string">&quot;userNickName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">open-data</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>&lt;open-data&gt;</code>ç»„ä»¶çš„<code>type</code>å±æ€§æŒ‡å®šæ‰€è¦å±•ç¤ºçš„ä¿¡æ¯ç±»å‹ï¼Œ<code>userAvatarUrl</code>è¡¨ç¤ºå±•ç¤ºç”¨æˆ·å¤´åƒï¼Œ<code>userNickName</code>è¡¨ç¤ºç”¨æˆ·æ˜µç§°ã€‚</p><p>å¼€å‘è€…å·¥å…·å¯¼å…¥é¡¹ç›®ä»£ç ï¼Œé¡µé¢æ¸²æŸ“ç»“æœå¦‚ä¸‹ï¼Œæ˜¾ç¤ºä½ çš„å¤´åƒå’Œç”¨æˆ·æ˜µç§°ã€‚</p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220118121848684.png" alt="image-20220118121848684" style="zoom:50%;" /><p><code>&lt;open-data&gt;</code>æ”¯æŒçš„ç”¨æˆ·ä¿¡æ¯å¦‚ä¸‹ã€‚</p><blockquote><ul><li><code>userNickName</code>ï¼šç”¨æˆ·æ˜µç§°</li><li><code>userAvatarUrl</code>ï¼šç”¨æˆ·å¤´åƒ</li><li><code>userGender</code>ï¼šç”¨æˆ·æ€§åˆ«</li><li><code>userCity</code>ï¼šç”¨æˆ·æ‰€åœ¨åŸå¸‚</li><li><code>userProvince</code>ï¼šç”¨æˆ·æ‰€åœ¨çœä»½</li><li><code>userCountry</code>ï¼šç”¨æˆ·æ‰€åœ¨å›½å®¶</li><li><code>userLanguage</code>ï¼šç”¨æˆ·çš„è¯­è¨€</li></ul></blockquote><p><code>&lt;open-data&gt;</code>ä¸éœ€è¦ç”¨æˆ·æˆæƒï¼Œä¹Ÿä¸éœ€è¦ç™»å½•ï¼Œæ‰€ä»¥ç”¨èµ·æ¥å¾ˆæ–¹ä¾¿ã€‚ä½†ä¹Ÿæ˜¯å› ä¸ºè¿™ä¸ªåŸå› ï¼Œå°ç¨‹åºä¸å…è®¸ç”¨æˆ·è„šæœ¬è¯»å–<code>&lt;open-data&gt;</code>è¿”å›çš„ä¿¡æ¯ã€‚</p><h2 id="0x05-è·å–ç”¨æˆ·ä¸ªäººä¿¡æ¯"><a href="#0x05-è·å–ç”¨æˆ·ä¸ªäººä¿¡æ¯" class="headerlink" title="0x05 è·å–ç”¨æˆ·ä¸ªäººä¿¡æ¯"></a>0x05 è·å–ç”¨æˆ·ä¸ªäººä¿¡æ¯</h2><p>å¦‚æœæƒ³æ‹¿åˆ°ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯ï¼Œå¿…é¡»å¾—åˆ°æˆæƒã€‚å®˜æ–¹å»ºè®®ï¼Œé€šè¿‡æŒ‰é’®æ–¹å¼è·å–æˆæƒã€‚</p><p>åœ¨<code>app.json</code>ä¸­æ–°å»º<code>page</code>:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;pages/user/user&quot;</span><span class="punctuation">,</span></span><br><span class="line">  ...</span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>æ‰“å¼€<code>user.wxml</code>æ–‡ä»¶ï¼Œä»£ç ä¿®æ”¹å¦‚ä¸‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--pages/user/user.<span class="property">wxml</span>--&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">text</span>&gt;</span>pages/user/user.wxml<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line">&lt;!-- å¦‚æœåªæ˜¯å±•ç¤ºç”¨æˆ·å¤´åƒæ˜µç§°ï¼Œå¯ä»¥ä½¿ç”¨ &lt;open-data /&gt; ç»„ä»¶ --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">open-data</span> <span class="attr">type</span>=<span class="string">&quot;userAvatarUrl&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">open-data</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">open-data</span> <span class="attr">type</span>=<span class="string">&quot;userNickName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">open-data</span>&gt;</span></span></span><br><span class="line">&lt;!-- éœ€è¦ä½¿ç”¨ button æ¥æˆæƒç™»å½• --&gt;<span class="string">&#x27;</span></span><br><span class="line"><span class="string">&lt;text class=&quot;title&quot;&gt;hello &#123;&#123;userInfo&#125;&#125;&lt;/text&gt;&#x27;</span></span><br><span class="line">&lt;button <span class="attr">wx</span>:<span class="keyword">if</span>=<span class="string">&quot;&#123;&#123;canIUse&#125;&#125;&quot;</span> open-type=<span class="string">&quot;getUserInfo&quot;</span> <span class="attr">bind</span>:getuserinfo=<span class="string">&quot;bindGetUserInfo&quot;</span>&gt;æˆæƒç™»å½•&lt;/button&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:else</span>&gt;</span>è¯·å‡çº§å¾®ä¿¡ç‰ˆæœ¬<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>&lt;button&gt;</code>æ ‡ç­¾çš„<code>open-type</code>å±æ€§ï¼ŒæŒ‡å®šæŒ‰é’®ç”¨äºè·å–ç”¨æˆ·ä¿¡æ¯ï¼Œ<code>bind:getuserinfo</code>å±æ€§è¡¨ç¤ºç‚¹å‡»æŒ‰é’®ä¼šè§¦å‘<code>getuserinfo</code>äº‹ä»¶ï¼Œå³è·³å‡ºå¯¹è¯æ¡†ï¼Œè¯¢é—®ç”¨æˆ·æ˜¯å¦åŒæ„æˆæƒã€‚</p><p>ç”¨æˆ·ç‚¹å‡»â€å…è®¸â€ï¼Œè„šæœ¬å°±å¯ä»¥å¾—åˆ°ç”¨æˆ·ä¿¡æ¯ã€‚</p><p><code>user.js</code>æ–‡ä»¶çš„è„šæœ¬ä»£ç å¦‚ä¸‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">canIUse</span>: wx.<span class="title function_">canIUse</span>(<span class="string">&#x27;button.open-type.getUserInfo&#x27;</span>),</span><br><span class="line">        <span class="attr">userInfo</span>: <span class="string">&#x27;Guest&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">  bindGetUserInfo (e) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">detail</span>.<span class="property">userInfo</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">userInfo</span>:e.<span class="property">detail</span>.<span class="property">userInfo</span>.<span class="property">nickName</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  <span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">        <span class="comment">// const that = this;</span></span><br><span class="line">        wx.<span class="title function_">getSetting</span>(&#123;</span><br><span class="line">            success (res)&#123;</span><br><span class="line">              <span class="keyword">if</span> (res.<span class="property">authSetting</span>[<span class="string">&#x27;scope.userInfo&#x27;</span>]) &#123;</span><br><span class="line">                <span class="comment">// å·²ç»æˆæƒï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨ getUserInfo è·å–å¤´åƒæ˜µç§°</span></span><br><span class="line">                wx.<span class="title function_">getUserInfo</span>(&#123;</span><br><span class="line">                  <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">userInfo</span>);</span><br><span class="line">                    <span class="comment">// that.setData(&#123;userInfo : res.userInfo&#125;);</span></span><br><span class="line">                  &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>bindGetUserInfo</code>æ˜¯æŒ‰é’®ç‚¹å‡»çš„ç›‘å¬å‡½æ•°ï¼Œä¸ç®¡ç”¨æˆ·ç‚¹å‡»â€æ‹’ç»â€æˆ–â€å…è®¸â€ï¼Œéƒ½ä¼šæ‰§è¡Œè¿™ä¸ªå‡½æ•°ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡äº‹ä»¶å¯¹è±¡<code>e</code>æœ‰æ²¡æœ‰<code>e.detail.userInfo</code>å±æ€§ï¼Œæ¥åˆ¤æ–­ç”¨æˆ·ç‚¹å‡»äº†å“ªä¸ªæŒ‰é’®ã€‚å¦‚æœèƒ½æ‹¿åˆ°<code>e.detail.userInfo</code>å±æ€§ï¼Œå°±è¡¨ç¤ºç”¨æˆ·å…è®¸è¯»å–ä¸ªäººä¿¡æ¯ã€‚è¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢å°±æ˜¯å„ç§ç”¨æˆ·ä¿¡æ¯ï¼Œæ¯”å¦‚å¤´åƒã€æ˜µç§°ç­‰ç­‰ã€‚</p><p>å®é™…å¼€å‘ä¸­ï¼Œå¯ä»¥å…ˆç”¨<code>wx.getSetting()</code>æ–¹æ³•åˆ¤æ–­ä¸€ä¸‹ï¼Œç”¨æˆ·æ˜¯å¦å·²ç»æˆæƒè¿‡ã€‚å¦‚æœå·²ç»æˆæƒè¿‡ï¼Œå°±ä¸ç”¨å†æ¬¡è¯·æ±‚æˆæƒï¼Œè€Œæ˜¯ç›´æ¥ç”¨<code>wx.getUserInfo()</code>æ–¹æ³•è·å–ç”¨æˆ·ä¿¡æ¯ã€‚</p><p>æ³¨æ„ï¼Œè¿™ç§æ–¹æ³•è¿”å›çš„ç”¨æˆ·ä¿¡æ¯ä¹‹ä¸­ï¼Œä¸åŒ…æ‹¬èƒ½å¤ŸçœŸæ­£è¯†åˆ«å”¯ä¸€ç”¨æˆ·çš„<code>openid</code>å±æ€§ã€‚è¿™ä¸ªå±æ€§éœ€è¦ç”¨åˆ°ä¿å¯†çš„å°ç¨‹åºå¯†é’¥å»è¯·æ±‚ï¼Œæ‰€ä»¥ä¸èƒ½æ”¾åœ¨å‰ç«¯è·å–ï¼Œè€Œè¦æ”¾åœ¨åç«¯ã€‚è¿™é‡Œå°±ä¸æ¶‰åŠäº†ã€‚</p><h2 id="0x06-å¤šé¡µé¢çš„è·³è½¬"><a href="#0x06-å¤šé¡µé¢çš„è·³è½¬" class="headerlink" title="0x06 å¤šé¡µé¢çš„è·³è½¬"></a>0x06 å¤šé¡µé¢çš„è·³è½¬</h2><p>çœŸæ­£çš„å°ç¨‹åºä¸ä¼šåªæœ‰ä¸€ä¸ªé¡µé¢ï¼Œè€Œæ˜¯å¤šä¸ªé¡µé¢ï¼Œæ‰€ä»¥å¿…é¡»èƒ½åœ¨é¡µé¢ä¹‹é—´å®ç°è·³è½¬ã€‚</p><p><code>app.json</code>é…ç½®æ–‡ä»¶çš„<code>pages</code>å±æ€§å°±ç”¨æ¥æŒ‡å®šå°ç¨‹åºæœ‰å¤šå°‘ä¸ªé¡µé¢ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;pages/user/user&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;pages/openData/opendata&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;pages/home/home&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;pages/wxml/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;pages/logs/logs&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;window&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;backgroundTextStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dark&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;navigationBarBackgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#000&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;MiniProgram&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;navigationBarTextStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;white&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;v2&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;sitemapLocation&quot;</span><span class="punctuation">:</span> <span class="string">&quot;sitemap.json&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>pages</code>æ•°ç»„åŒ…å«ä¸¤ä¸ªé¡µé¢ã€‚ä»¥åæ¯æ–°å¢ä¸€ä¸ªé¡µé¢ï¼Œéƒ½å¿…é¡»æŠŠé¡µé¢è·¯å¾„å†™åœ¨<code>pages</code>æ•°ç»„é‡Œé¢ï¼Œå¦åˆ™å°±æ˜¯æ— æ•ˆé¡µé¢ã€‚æ’åœ¨ç¬¬ä¸€ä½çš„é¡µé¢ï¼Œå°±æ˜¯å°ç¨‹åºæ‰“å¼€æ—¶ï¼Œé»˜è®¤å±•ç¤ºçš„é¡µé¢ã€‚</p><p><strong>ç¬¬ä¸€æ­¥:</strong></p><p>åœ¨<code>app.json</code>ä¸­çš„<code>pages</code>ä¸­æ·»åŠ ç¬¬ä¸€è¡Œæ•°æ®ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;pages/direct/direct&quot;</span><span class="punctuation">,</span></span><br><span class="line">  ...</span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>æŒ‰ä¿å­˜ï¼Œå°±èƒ½åŠ è½½å‡ºå¯¹åº”pageæ–‡ä»¶ï¼š</p><p>![image-20220118124849413](&#x2F;Users&#x2F;q1jun&#x2F;Library&#x2F;Application Support&#x2F;typora-user-images&#x2F;image-20220118124849413.png)</p><p><strong>ç¬¬äºŒæ­¥ï¼š</strong></p><p>ä¿®æ”¹é¡µé¢æ–‡ä»¶<code>direct.wxml</code>ï¼Œä»£ç å¦‚ä¸‹ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pages/direct/direct.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>pages/direct/direct.wxml<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>è¿™æ˜¯direct<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">navigator</span> <span class="attr">class</span>=<span class="string">&quot;weui-btn weui-btn_primary&quot;</span> <span class="attr">url</span>=<span class="string">&quot;../user/user&quot;</span>&gt;</span>æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯<span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>&lt;navigator&gt;</code>å°±æ˜¯é“¾æ¥æ ‡ç­¾ï¼Œç›¸å½“äºç½‘é¡µæ ‡ç­¾<code>&lt;a&gt;</code>ï¼Œåªè¦ç”¨æˆ·ç‚¹å‡»å°±å¯ä»¥è·³è½¬åˆ°<code>url</code>å±æ€§æŒ‡å®šçš„é¡µé¢ï¼ˆè¿™é‡Œæ˜¯directçš„ä½ç½®ï¼‰ã€‚</p><p><strong>ç¬¬ä¸‰æ­¥ï¼š</strong></p><p>æ·»åŠ ä»¥ä¸‹ä»£ç åˆ°<code>user.wxml</code>ï¼Œè®©ç”¨æˆ·èƒ½è¿”å›<code>direct</code>é¡µé¢ä¸­ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">navigator</span> <span class="attr">class</span>=<span class="string">&quot;weui-btn weui-btn_primary&quot;</span> <span class="attr">url</span>=<span class="string">&quot;../direct/direct&quot;</span>&gt;</span>å‰å¾€direct<span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æœ€ç»ˆé¡µé¢æ¸²æŸ“ç»“æœå¦‚ä¸‹ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220118125806956.png" alt="image-20220118125806956"></p><p>ç‚¹å‡»æŒ‰é’®åï¼š</p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220118125826417.png" alt="image-20220118125826417" style="zoom:50%;" /><p>å®ç°äº†é¡µé¢é—´çš„è·³è½¬ã€‚</p><h2 id="0x07-wx-navigateTo-é€šè¿‡jså®ç°é¡µé¢è·³è½¬"><a href="#0x07-wx-navigateTo-é€šè¿‡jså®ç°é¡µé¢è·³è½¬" class="headerlink" title="0x07 wx.navigateTo()é€šè¿‡jså®ç°é¡µé¢è·³è½¬"></a>0x07 wx.navigateTo()é€šè¿‡jså®ç°é¡µé¢è·³è½¬</h2><p>é™¤äº†<strong>0x06</strong>ä¸­çš„æ–¹å¼ï¼Œè¿˜å¯ä»¥é€šè¿‡<code>wx.navigateTo()</code>å®ç°é¡µé¢é—´çš„è·³è½¬ã€‚</p><p>é¦–å…ˆå’Œ<strong>0x06</strong>ä¸€æ ·åˆ›å»ºä¸€ä¸ªæ–°çš„é¡µé¢<code>pages/direct1/direct1</code>ä¿®æ”¹<code>direct1.wxml</code>æ–‡ä»¶ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>è¿™æ˜¯é¦–é¡µ<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;weui-btn weui-btn_primary&quot;</span> <span class="attr">bind:tap</span>=<span class="string">&quot;buttonHandler&quot;</span>&gt;</span>å‰å¾€ç¬¬äºŒé¡µ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¯¼å…¥é¡¹ç›®ä»£ç ï¼Œé¡µé¢æ¸²æŸ“ç»“æœå¦‚ä¸‹ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220118135249730.png" alt="image-20220118135249730"></p><p>ç„¶åï¼Œæ‰“å¼€<code>direct1.js</code>æ–‡ä»¶ï¼Œä»£ç ä¿®æ”¹å¦‚ä¸‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="title function_">buttonHandler</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    wx.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27;../user/user&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>buttonHandler()</code>æ˜¯æŒ‰é’®ç‚¹å‡»çš„ç›‘å¬å‡½æ•°ï¼Œåªè¦ç”¨æˆ·ç‚¹å‡»æŒ‰é’®ï¼Œå°±ä¼šè°ƒç”¨<code>wx.navigateTo()</code>æ–¹æ³•ã€‚è¯¥æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„<code>url</code>å±æ€§æŒ‡å®šäº†è·³è½¬ç›®æ ‡çš„ä½ç½®ï¼Œè‡ªåŠ¨è·³è½¬åˆ°é‚£ä¸ªé¡µé¢ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å­¦ä¹  </category>
          
          <category> å¾®ä¿¡å°ç¨‹åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> JavaScript </tag>
            
            <tag> å°ç¨‹åº </tag>
            
            <tag> WeChat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨Linuxä¸­å®‰è£…VNCå’Œå›¾å½¢åŒ–ç•Œé¢</title>
      <link href="/2021/09/06/d57be45e2593-q1jun/"/>
      <url>/2021/09/06/d57be45e2593-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="åœ¨Linuxä¸­å®‰è£…VNCå’Œå›¾å½¢åŒ–ç•Œé¢"><a href="#åœ¨Linuxä¸­å®‰è£…VNCå’Œå›¾å½¢åŒ–ç•Œé¢" class="headerlink" title="åœ¨Linuxä¸­å®‰è£…VNCå’Œå›¾å½¢åŒ–ç•Œé¢"></a>åœ¨Linuxä¸­å®‰è£…VNCå’Œå›¾å½¢åŒ–ç•Œé¢</h1><p>åœ¨linuxæœºå™¨ä¸Šå®‰è£…vncæœåŠ¡ç«¯ï¼Œç„¶åé€šè¿‡æœ¬åœ°windowsæœºå™¨çš„vncå®¢æˆ·ç«¯å·¥å…·å»è¿æ¥åˆ°æœåŠ¡ç«¯ï¼Œè¿™æ ·æ“ä½œlinuxæœºå™¨å°±èƒ½ä»¥ç•Œé¢åŒ–æ–¹å¼æ“ä½œï¼Œè¿æ¥åˆ°è¿œç¨‹linuxæœºã€‚</p><p>è¿æ¥åˆ°è¿œç¨‹linuxæœºå™¨åçš„æœåŠ¡å™¨æ˜¾ç¤ºæ•ˆæœå¦‚å›¾ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/blog_VNC1.png"></p><p>ä¸‹é¢å°±å…·ä½“æ­¥éª¤è¯¦ç»†è®²è§£ï¼š</p><h2 id="ä¸€ï¼šç¡®è®¤VNCæœåŠ¡æ˜¯å¦æœ‰å®‰è£…"><a href="#ä¸€ï¼šç¡®è®¤VNCæœåŠ¡æ˜¯å¦æœ‰å®‰è£…" class="headerlink" title="ä¸€ï¼šç¡®è®¤VNCæœåŠ¡æ˜¯å¦æœ‰å®‰è£…"></a>ä¸€ï¼šç¡®è®¤VNCæœåŠ¡æ˜¯å¦æœ‰å®‰è£…</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -<span class="keyword">qa</span>|<span class="keyword">grep</span> tigervnc</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/blog_VNC.jpg" alt="img"></p><p>å‘ç°æ˜¾ç¤ºå·²ç»å®‰è£…è¿‡vncï¼Œè¯´æ˜å·²ç»å®‰è£…è¿‡vncæœåŠ¡äº†</p><p>å¦‚æœæ˜¾ç¤ºæ²¡æœ‰å®‰è£…ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/blog_VNC2.jpg" alt="img"></p><p>è¿™é‡Œæä¾›ä¸¤ç§å®‰è£…æ–¹å¼ï¼š</p><ul><li><p>rpmåŒ…å®‰è£…</p><p>æ­¤æ³•æœ€å¥½ç”¨åœ¨æœ‰ç³»ç»Ÿå®‰è£…åŒ…çš„åŸºç¡€ä¸Šï¼Œå¦‚redhat-Linux.5.5.for.x86-server-5.5 ç³»ç»Ÿ.isoåŒ…ï¼Œæ‰“å¼€ååœ¨Serverç›®å½•ä¸‹æœ‰ä¸¤ä¸ªåŒ…</p></li></ul><p>â€‹    <img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/blog_VNC3.png" alt="img"><br>ã€€ã€€ã€€ä¸Šä¼ vnc-serveråŒ…å°±è¡Œäº†ï¼Œç„¶åè¿è¡Œå‘½ä»¤</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ã€€ã€€ã€€<span class="attribute">rpm</span> -ivh vnc-server-<span class="number">4</span>.<span class="number">1</span>.<span class="number">2</span>-<span class="number">14</span>.el5.<span class="number">3</span>.<span class="number">1</span>.i386.rpm</span><br></pre></td></tr></table></figure><p>ã€€ã€€ã€€æ¥å®‰è£…vncæœåŠ¡ï¼Œæ­¤æ³•å¯ä»¥é¿å…vncç‰ˆæœ¬ä¸ç³»ç»Ÿä¸ä¸€è‡´çš„é—®é¢˜ï¼Œå› ä¸ºæ˜¯ä»ç³»ç»Ÿé‡Œæ‰¾çš„vncçš„æ–‡ä»¶ï¼Œä½†æ˜¯isoæ–‡ä»¶éš¾ä»¥è·å¾—ï¼Œä¸€èˆ¬æ‰¾è¿™ä¸ª</p><p>ã€€ã€€ã€€rpmæ–‡ä»¶éƒ½æ˜¯è¦é€šè¿‡ç™¾åº¦æ¥æ‰¾ï¼Œå¯»æ‰¾ç³»ç»Ÿç‰ˆæœ¬çš„vncçš„rpmåŒ…æ¥å®‰è£…ã€‚å¦åˆ™å› ä¸ºç‰ˆæœ¬ä¸ä¸€è‡´ä¼šå¯¼è‡´åç»­å¾ˆå¤šé—®é¢˜ã€‚</p><ul><li>yumå‘½ä»¤å®‰è£…(æ¨èæ–¹å¼)</li></ul><p>ã€€ã€€ã€€æ­¤æ³•æ¯”è¾ƒç®€å•ï¼Œç›´æ¥ä½¿ç”¨yumå‘½ä»¤å³å¯ï¼š</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ã€€ã€€ã€€yum -y install tigervnc-<span class="keyword">server</span></span><br></pre></td></tr></table></figure><p>ã€€ã€€ã€€å®ƒä¼šè‡ªåŠ¨ç»™ä½ ä¸‹è½½ä¾èµ–åŒ…ï¼Œå¦‚æœä½ çš„yumå‘½ä»¤ä¸èƒ½ä½¿ç”¨ï¼Œå»ºè®®ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ã€€ã€€ã€€echo nameserver <span class="number">8.8</span><span class="number">.8</span><span class="number">.8</span> &gt;&gt; <span class="regexp">/etc/</span>resolv.conf</span><br></pre></td></tr></table></figure><p>ã€€ã€€ã€€ç„¶ååœ¨ç”¨yumå‘½ä»¤å³å¯ã€‚</p><h2 id="äºŒï¼šå¯åŠ¨vncæœåŠ¡"><a href="#äºŒï¼šå¯åŠ¨vncæœåŠ¡" class="headerlink" title="äºŒï¼šå¯åŠ¨vncæœåŠ¡"></a>äºŒï¼šå¯åŠ¨vncæœåŠ¡</h2><p>ä½¿ç”¨vncserverå‘½ä»¤å¯åŠ¨VNCæœåŠ¡ï¼Œå‘½ä»¤æ ¼å¼ä¸ºâ€vncserver :æ¡Œé¢å·â€ï¼Œå…¶ä¸­â€æ¡Œé¢å·â€ç”¨â€æ•°å­—â€çš„æ–¹å¼è¡¨ç¤ºï¼Œæ¯ä¸ªç”¨æˆ·è¿ä¸ªéœ€è¦å ç”¨1ä¸ªæ¡Œé¢</p><p>å¯åŠ¨ç¼–å·ä¸º1çš„æ¡Œé¢ç¤ºä¾‹å¦‚ä¸‹:</p><p>å‘½ä»¤ä¸º vncserver :1 (æ³¨æ„vncserverä¸:ä¹‹é—´æœ‰ç©ºæ ¼)</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/blog_VNC4.jpg" alt="img"></p><p>ä»¥ä¸Šå‘½ä»¤æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå› ä¸ºæ˜¯ç¬¬ä¸€æ¬¡æ‰§è¡Œï¼Œéœ€è¦è¾“å…¥å¯†ç ï¼Œè¿™ä¸ªå¯†ç è¢«åŠ å¯†ä¿å­˜åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„.vncå­ç›®å½•ï¼ˆ&#x2F;root&#x2F;.vnc&#x2F;passwdï¼‰ä¸­ï¼›åŒæ—¶åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„.vncå­ç›®å½•ä¸­ä¸ºç”¨æˆ·è‡ªåŠ¨å»ºç«‹xstartupé…ç½®æ–‡ä»¶ï¼ˆ&#x2F;root&#x2F;.vnc&#x2F;xstartupï¼‰ï¼Œåœ¨æ¯æ¬¡å¯åŠ¨VNDæœåŠ¡æ—¶ï¼Œéƒ½ä¼šè¯»å–è¯¥æ–‡ä»¶ä¸­çš„é…ç½®ä¿¡æ¯ã€‚å¦å¤–éœ€æ³¨æ„çš„æ˜¯è¿™é‡Œè®¾ç½®çš„å¯†ç å°±æ˜¯åé¢æˆ‘ä»¬ç”¨vncserverå®¢æˆ·ç«¯å·¥å…·è¿æ¥æ—¶è¦è¾“å…¥çš„å¯†ç ã€‚</p><p>BTWï¼š&#x2F;root&#x2F;.vnc&#x2F;ç›®å½•ä¸‹è¿˜æœ‰ä¸€ä¸ªâ€œä¸»æœºå:1.pidâ€æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶è®°å½•ç€å¯åŠ¨VNCåå¯¹åº”åé¢æ“ä½œç³»ç»Ÿçš„è¿›ç¨‹å·ï¼Œç”¨äºåœæ­¢VNCæœåŠ¡æ—¶å‡†ç¡®å®šä½è¿›ç¨‹å·ã€‚</p><p>è¿™æ ·vncæœåŠ¡ç«¯å°±å¯åŠ¨æˆåŠŸäº†ï¼Œè¿™é‡Œæ˜¯ç”¨rootç”¨æˆ·æ‰§è¡Œçš„vncserver :1å‘½ä»¤ï¼Œåˆ™å¯åŠ¨åç”¨vncserverå®¢æˆ·ç«¯è¿æ¥è¿›å…¥åˆ°è¯¥æœåŠ¡å™¨çš„ç”¨æˆ·å°±æ˜¯rootç”¨æˆ·ï¼Œ</p><p>å¦‚æœç”¨rootç”¨æˆ·å®‰è£…åï¼Œç”¨aiuapç”¨æˆ·(å…¶ä»–çš„ç”¨æˆ·)å¯åŠ¨ï¼šåˆ™vncserverå®¢æˆ·ç«¯è¿æ¥è¿›å…¥åˆ°è¯¥æœåŠ¡å™¨çš„ç”¨æˆ·å°±æ˜¯aiuapç”¨æˆ·</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/blog_VNC5.jpg" alt="img"></p><h2 id="ä¸‰ï¼švncæœåŠ¡ä½¿ç”¨çš„ç«¯å£å·ä¸æ¡Œé¢å·çš„å…³ç³»"><a href="#ä¸‰ï¼švncæœåŠ¡ä½¿ç”¨çš„ç«¯å£å·ä¸æ¡Œé¢å·çš„å…³ç³»" class="headerlink" title="ä¸‰ï¼švncæœåŠ¡ä½¿ç”¨çš„ç«¯å£å·ä¸æ¡Œé¢å·çš„å…³ç³»"></a>ä¸‰ï¼švncæœåŠ¡ä½¿ç”¨çš„ç«¯å£å·ä¸æ¡Œé¢å·çš„å…³ç³»</h2><p>VNCæœåŠ¡ä½¿ç”¨çš„ç«¯å£å·ä¸æ¡Œé¢å·ç›¸å…³ï¼ŒVNCä½¿ç”¨TCPç«¯å£ä»5900å¼€å§‹ï¼Œå¯¹åº”å…³ç³»å¦‚ä¸‹<br>æ¡Œé¢å·ä¸ºâ€œ1â€ â€”- ç«¯å£å·ä¸º5901<br>æ¡Œé¢å·ä¸ºâ€œ2â€ â€”- ç«¯å£å·ä¸º5902<br>æ¡Œé¢å·ä¸ºâ€œ3â€ â€”- ç«¯å£å·ä¸º5903<br>â€¦â€¦<br>åŸºäºJavaçš„VNCå®¢æˆ·ç¨‹åºWebæœåŠ¡TCPç«¯å£ä»5800å¼€å§‹ï¼Œä¹Ÿæ˜¯ä¸æ¡Œé¢å·ç›¸å…³ï¼Œå¯¹åº”å…³ç³»å¦‚ä¸‹<br>æ¡Œé¢å·ä¸ºâ€œ1â€ â€”- ç«¯å£å·ä¸º5801<br>æ¡Œé¢å·ä¸ºâ€œ2â€ â€”- ç«¯å£å·ä¸º5802<br>æ¡Œé¢å·ä¸ºâ€œ3â€ â€”- ç«¯å£å·ä¸º5803<br>â€¦â€¦<br>åŸºäºä¸Šé¢çš„ä»‹ç»ï¼Œå¦‚æœLinuxå¼€å¯äº†é˜²ç«å¢™åŠŸèƒ½ï¼Œå°±éœ€è¦æ‰‹å·¥å¼€å¯ç›¸åº”çš„ç«¯å£ï¼Œä»¥å¼€å¯æ¡Œé¢å·ä¸ºâ€œ1â€ç›¸åº”çš„ç«¯å£ä¸ºä¾‹ï¼Œå‘½ä»¤å¦‚ä¸‹</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[root@xxxxx ~]</span># iptables -<span class="selector-tag">I</span> <span class="selector-tag">INPUT</span> -<span class="selector-tag">p</span> tcp <span class="attr">--dport</span> <span class="number">5901</span> -j ACCEPT</span><br><span class="line"><span class="selector-attr">[root@xxxxx ~]</span># iptables -<span class="selector-tag">I</span> <span class="selector-tag">INPUT</span> -<span class="selector-tag">p</span> tcp <span class="attr">--dport</span> <span class="number">5801</span> -j ACCEPT</span><br></pre></td></tr></table></figure><h2 id="å››ï¼šé…ç½®VNCå›¾å½¢æ¡Œé¢ç¯å¢ƒä¸ºKDEæˆ–GNOMEæ¡Œé¢ç¯å¢ƒ"><a href="#å››ï¼šé…ç½®VNCå›¾å½¢æ¡Œé¢ç¯å¢ƒä¸ºKDEæˆ–GNOMEæ¡Œé¢ç¯å¢ƒ" class="headerlink" title="å››ï¼šé…ç½®VNCå›¾å½¢æ¡Œé¢ç¯å¢ƒä¸ºKDEæˆ–GNOMEæ¡Œé¢ç¯å¢ƒ"></a>å››ï¼šé…ç½®VNCå›¾å½¢æ¡Œé¢ç¯å¢ƒä¸ºKDEæˆ–GNOMEæ¡Œé¢ç¯å¢ƒ</h2><p>å¦‚æœæ‚¨æ˜¯æŒ‰ç…§æˆ‘çš„ä¸Šé¢æ–¹æ³•è¿›è¡Œçš„é…ç½®çš„ï¼Œç™»é™†åˆ°æ¡Œé¢åæ•ˆæœæ˜¯éå¸¸ç®€å•çš„ï¼Œåªæœ‰ä¸€ä¸ªShellå¯ä¾›ä½¿ç”¨ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæ€ä¹ˆæ‰èƒ½çœ‹åˆ°å¯çˆ±å¹¶ä¸”ç¾ä¸½çš„KDEæˆ–GNOMEæ¡Œé¢ç¯å¢ƒå‘¢ï¼Ÿ<br>ä¹‹æ‰€ä»¥é‚£ä¹ˆçš„éš¾çœ‹ï¼Œæ˜¯å› ä¸ºVNCæœåŠ¡é»˜è®¤ä½¿ç”¨çš„æ˜¯twmå›¾å½¢æ¡Œé¢ç¯å¢ƒçš„ï¼Œå¯ä»¥åœ¨VNCçš„é…ç½®æ–‡ä»¶xstartupä¸­å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œå…ˆçœ‹ä¸€ä¸‹è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@xxxx</span><span class="number">-145</span> ~]<span class="meta">#  vi /root/.vnc/xstartup</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æœ€åä¸€è¡Œä¸ºï¼štwm &amp;</p><p>å°†è¿™ä¸ªxstartupæ–‡ä»¶çš„æœ€åä¸€è¡Œä¿®æ”¹ä¸ºâ€œstartkde &amp;â€ï¼Œå†é‡æ–°å¯åŠ¨vncserveræœåŠ¡åå°±å¯ä»¥ç™»é™†åˆ°KDEæ¡Œé¢ç¯å¢ƒ</p><p>å°†è¿™ä¸ªxstartupæ–‡ä»¶çš„æœ€åä¸€è¡Œä¿®æ”¹ä¸ºâ€œgnome-session &amp;â€ï¼Œå†é‡æ–°å¯åŠ¨vncserveræœåŠ¡åå°±å¯ä»¥ç™»é™†åˆ°GNOMEæ¡Œé¢ç¯å¢ƒï¼Œ</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/blog_VNC6.jpg" alt="img"></p><p>å¦‚æœè¿æ¥vncåå‘ç°ä¸ºé»‘å±ï¼ŒåŸå› æ˜¯æ²¡æœ‰å®‰è£…GNOME Desktop Environmentï¼Œä½¿ç”¨</p><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">$sudo</span>  yum groupinstall <span class="string">&quot;GNOME Desktop&quot;</span> <span class="string">&quot;Graphical Administration Tools&quot;</span></span><br></pre></td></tr></table></figure><p>å³å¯å®‰è£…GNOME Desktop Environmentï¼Œå®‰è£…å®Œæˆåå¯é‡å¯vncæœåŠ¡å³æ‰§è¡Œvncserver -kill :1ï¼Œåœ¨æ‰§è¡Œvncserver :1ï¼Œå†æ¬¡è¿›å…¥å‘ç°å‡ºç°å±å¹•ç”»é¢ã€‚</p><p>å¦‚æœå‘ç°æ‰§è¡Œè¯¥å‘½ä»¤æŠ¥é”™, å¯æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…ï¼š</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum clean <span class="keyword">all</span></span><br><span class="line"></span><br><span class="line">yum groupinstall <span class="string">&quot;X Window System&quot;</span> <span class="string">&quot;Desktop&quot;</span></span><br><span class="line"></span><br><span class="line">yum -y install gnome*</span><br></pre></td></tr></table></figure><p>å³å¯å®‰è£…GNOME Desktop Environmentï¼Œå®‰è£…å®Œæˆåå¯é‡å¯vncæœåŠ¡å³æ‰§è¡Œvncserver -kill :1ï¼Œåœ¨æ‰§è¡Œvncserver :1ï¼Œå†æ¬¡è¿›å…¥å‘ç°å‡ºç°å±å¹•ç”»é¢ã€‚</p><h2 id="äº”ï¼šé…ç½®å¤šä¸ªæ¡Œé¢"><a href="#äº”ï¼šé…ç½®å¤šä¸ªæ¡Œé¢" class="headerlink" title="äº”ï¼šé…ç½®å¤šä¸ªæ¡Œé¢"></a>äº”ï¼šé…ç½®å¤šä¸ªæ¡Œé¢</h2><p>å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„æ–¹æ³•å¯åŠ¨å¤šä¸ªæ¡Œé¢çš„VNCï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">vncserver</span> :<span class="number">1</span></span><br><span class="line"><span class="attribute">vncserver</span> :<span class="number">2</span></span><br><span class="line"><span class="attribute">vncserver</span> :<span class="number">3</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™ç§æ‰‹å·¥å¯åŠ¨çš„æ–¹æ³•åœ¨æœåŠ¡å™¨é‡æ–°å¯åŠ¨ä¹‹åå°†å¤±æ•ˆï¼Œå› æ­¤ï¼Œä¸‹é¢ä»‹ç»å¦‚ä½•è®©ç³»ç»Ÿè‡ªåŠ¨ç®¡ç†å¤šä¸ªæ¡Œé¢çš„VNCï¼Œæ–¹æ³•æ˜¯å°†éœ€è¦è‡ªåŠ¨ç®¡ç†çš„ä¿¡æ¯æ·»åŠ åˆ°&#x2F;etc&#x2F;sysconfig&#x2F;vncserversé…ç½®æ–‡ä»¶ä¸­ï¼Œå…ˆä»¥æ¡Œé¢1ä¸ºrootç”¨æˆ·æ¡Œé¢2ä¸ºoracleç”¨æˆ·ä¸ºä¾‹è¿›è¡Œé…ç½®å¦‚ä¸‹ï¼š<br>æ ¼å¼ä¸ºï¼šVNCSERVERS&#x3D;â€æ¡Œé¢å·:ä½¿ç”¨çš„ç”¨æˆ·å æ¡Œé¢å·:ä½¿ç”¨çš„ç”¨æˆ·åâ€</p><p>æ‰§è¡Œvi &#x2F;etc&#x2F;sysconfig&#x2F;vncserverså‘½ä»¤ï¼Œæ·»åŠ é…ç½®ï¼šå¯æ ¹æ®ä½ è‡ªå·±çš„ç”¨æˆ·å…·ä½“é…ç½®ï¼Œè¿™é‡Œæˆ‘é…ç½®äº†rootå’Œaiuapç”¨æˆ·</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">VNCSERVERS</span><span class="operator">=</span><span class="string">&quot;1:root 2:aiuap&quot;</span></span><br><span class="line">VNCSERVERARGS[<span class="number">1</span>]<span class="operator">=</span><span class="string">&quot;-geometry 1024x768&quot;</span></span><br><span class="line">VNCSERVERARGS[<span class="number">2</span>]<span class="operator">=</span><span class="string">&quot;-geometry 1024x768&quot;</span></span><br></pre></td></tr></table></figure><p><img src="C:\Users\Administrator\Desktop\åšå®¢Blog\blog_VNC7.jpg" alt="img"></p><h2 id="å…­ï¼švncæœåŠ¡ç®¡ç†"><a href="#å…­ï¼švncæœåŠ¡ç®¡ç†" class="headerlink" title="å…­ï¼švncæœåŠ¡ç®¡ç†"></a>å…­ï¼švncæœåŠ¡ç®¡ç†</h2><p>aï¼šä¿®æ”¹vncè®¿é—®å¯†ç </p><p>ä½¿ç”¨å‘½ä»¤vncpasswdå¯¹ä¸åŒç”¨æˆ·çš„VNCçš„å¯†ç è¿›è¡Œä¿®æ”¹ï¼Œä¸€å®šè¦æ³¨æ„ï¼Œå¦‚æœé…ç½®äº†ä¸åŒç”¨æˆ·çš„VNCéœ€è¦åˆ†åˆ«åˆ°å„è‡ªç”¨æˆ·ä¸­è¿›è¡Œä¿®æ”¹ï¼Œå¦‚æˆ‘ç”¨rootç”¨æˆ·æ‰§è¡Œäº†vncpasswdå‘½ä»¤ï¼Œåˆ™åªä¼šä¿®æ”¹rootç”¨æˆ·çš„vncå¯†ç ï¼Œå…¶ä»–ç”¨æˆ·ä¸å—å½±å“ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/blog_VNC8.jpg" alt="img"></p><p>bï¼šå¯åŠ¨vncæœåŠ¡</p><p>åŸºäºç¬¬äº”æ­¥çš„åŸºç¡€ï¼Œå·²ç»åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®å¥½ç”¨æˆ·å¯¹åº”çš„æ¡Œé¢å·ï¼Œæ‰§è¡Œservice vncserver startå‘½ä»¤ï¼Œå³å¯å¯åŠ¨æ‰€æœ‰çš„ç”¨æˆ·å¯¹åº”çš„vncæœåŠ¡</p><p><img src="C:\Users\Administrator\Desktop\åšå®¢Blog\blog_VNC9.jpg" alt="img"></p><p>cï¼šåœæ­¢vncæœåŠ¡</p><p>åŒæ ·ä¹Ÿæ˜¯åŸºäºç¬¬äº”çš„åŸºç¡€ï¼Œæ‰§è¡Œservice vncserver stopå‘½ä»¤ï¼Œå³å¯å…³é—­é…ç½®æ–‡ä»¶ä¸­æ‰€æœ‰ç”¨æˆ·å¯¹åº”çš„vncæœåŠ¡</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/blog_VNC10.jpg" alt="img"></p><h2 id="ä¸ƒï¼šå®¢æˆ·ç«¯è¿æ¥å®‰è£…å¯åŠ¨å¥½çš„vncæœåŠ¡ç«¯"><a href="#ä¸ƒï¼šå®¢æˆ·ç«¯è¿æ¥å®‰è£…å¯åŠ¨å¥½çš„vncæœåŠ¡ç«¯" class="headerlink" title="ä¸ƒï¼šå®¢æˆ·ç«¯è¿æ¥å®‰è£…å¯åŠ¨å¥½çš„vncæœåŠ¡ç«¯"></a>ä¸ƒï¼šå®¢æˆ·ç«¯è¿æ¥å®‰è£…å¯åŠ¨å¥½çš„vncæœåŠ¡ç«¯</h2><p>ä¸‹è½½VNC Vieweråˆ°è‡ªå·±çš„æœ¬åœ°æœºå™¨ï¼ŒåŒå‡»vnc viewerå¯åŠ¨ç¨‹åº</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/blog_VNC11.png"></p><p>æœåŠ¡å™¨è¾“å…¥vncæœåŠ¡ç«¯å®‰è£…æ‰€åœ¨æœºå™¨åœ°å€ï¼Œåé¢çš„æ•°å­—åºå·ä¸vncserverå¯åŠ¨æ—¶vncserver :1åé¢è·Ÿç€çš„æ¡Œé¢å·ç›¸åŒ(å¦‚æœé…ç½®äº†ç¬¬äº”æ­¥å’ŒVNCSERVERS&#x3D;â€1:root 2:aiuapâ€ä¸­æ¡Œé¢å·ç›¸åŒå³å¯)ï¼Œæˆ‘è¿™é‡Œå¦‚æœå†™1åˆ™ä¸ºrootç”¨æˆ·è¿æ¥è¿›å…¥10.165.38.68ï¼Œå¦‚æœä¸º2åˆ™ä¸ºaiuapç”¨æˆ·è¿æ¥è¿›å…¥10.165.38.68æœåŠ¡å™¨</p><p>ç‚¹å‡»ç¡®å®šåï¼Œä¼šè®©ä½ è¾“å…¥å¯†ç ï¼Œè¯¥å¤„çš„å¯†ç ä¸ç¬¬äºŒæ­¥ä¸­å¯åŠ¨vncserverè¾“å…¥çš„å¯†ç ä¸€è‡´å³å¯</p><p>ç‚¹å‡»ç¡®å®šï¼Œå°±èƒ½è¿›å…¥æ–‡ç« å¼€å¤´è¯´çš„é‚£ç§ç•Œé¢äº†ï¼Œå¯ä»¥çœ‹åˆ°å³ä¸Šè§’æ˜¾ç¤ºè¿›å…¥è¯¥æœåŠ¡å™¨çš„ç”¨æˆ·åç”¨1è¿›å…¥ä¸ºrootï¼Œç”¨2è¿›å…¥ä¸ºaiuap</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åç«¯ </tag>
            
            <tag> Linux </tag>
            
            <tag> VNC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®° 05</title>
      <link href="/2021/09/04/33bf77d73300-q1jun/"/>
      <url>/2021/09/04/33bf77d73300-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®°-05"><a href="#å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®°-05" class="headerlink" title="å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®° 05"></a>å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®° 05</h1><p>ä¸ºå°ç¨‹åºåŠ å…¥ JavaScript è„šæœ¬ï¼Œåšå‡ºåŠ¨æ€æ•ˆæœï¼Œä»¥åŠå¦‚ä½•è·Ÿç”¨æˆ·äº’åŠ¨ã€‚å­¦ä¼šäº†è„šæœ¬ï¼Œå°±èƒ½åšå‡ºå¤æ‚çš„é¡µé¢äº†ã€‚</p><h2 id="0x01-æ•°æ®ç»‘å®š"><a href="#0x01-æ•°æ®ç»‘å®š" class="headerlink" title="0x01 æ•°æ®ç»‘å®š"></a>0x01 æ•°æ®ç»‘å®š</h2><p>å‰é¢çš„æ‰€æœ‰ç¤ºä¾‹ï¼Œå°ç¨‹åºçš„é¡µé¢éƒ½æ˜¯å†™æ­»çš„ï¼Œä¹Ÿå°±æ˜¯é¡µé¢å†…å®¹ä¸ä¼šå˜ã€‚ä½†æ˜¯ï¼Œé¡µé¢æ•°æ®å…¶å®å¯ä»¥é€šè¿‡è„šæœ¬ä¼ å…¥ï¼Œé€šè¿‡è„šæœ¬æ”¹å˜é¡µé¢ï¼Œå®ç°åŠ¨æ€æ•ˆæœã€‚</p><p>å°ç¨‹åºæä¾›äº†ä¸€ç§ç‰¹åˆ«çš„æ–¹æ³•ï¼Œè®©é¡µé¢å¯ä»¥æ›´æ–¹ä¾¿åœ°ä½¿ç”¨è„šæœ¬æ•°æ®ï¼Œå«åšâ€æ•°æ®ç»‘å®šâ€ï¼ˆdata bindingï¼‰ã€‚</p><p>æ‰€è°“â€æ•°æ®ç»‘å®šâ€ï¼ŒæŒ‡çš„æ˜¯è„šæœ¬é‡Œé¢çš„æŸäº›æ•°æ®ï¼Œä¼šè‡ªåŠ¨æˆä¸ºé¡µé¢å¯ä»¥è¯»å–çš„å…¨å±€å˜é‡ï¼Œä¸¤è€…ä¼šåŒæ­¥å˜åŠ¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè„šæœ¬é‡Œé¢ä¿®æ”¹è¿™ä¸ªå˜é‡çš„å€¼ï¼Œé¡µé¢ä¼šéšä¹‹å˜åŒ–ï¼›åè¿‡æ¥ï¼Œé¡µé¢ä¸Šä¿®æ”¹äº†è¿™æ®µå†…å®¹ï¼Œå¯¹åº”çš„è„šæœ¬å˜é‡ä¹Ÿä¼šéšä¹‹å˜åŒ–ã€‚è¿™ä¹Ÿå«åš MVVM æ¨¡å¼ã€‚</p><p>ä¸‹é¢çœ‹ä¸€ä¸ªä¾‹å­ã€‚æ‰“å¼€<code>index.js</code>æ–‡ä»¶ï¼Œæ‰“å¼€æˆä¸‹é¢è¿™æ ·ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é¡µé¢çš„åˆå§‹æ•°æ®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">time</span>:(<span class="keyword">new</span> <span class="title class_">Date</span>()).<span class="title function_">toString</span>(),</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Page()</code>æ–¹æ³•çš„é…ç½®å¯¹è±¡æœ‰ä¸€ä¸ª<code>data</code>å±æ€§ã€‚è¿™ä¸ªå±æ€§çš„å€¼ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæœ‰ä¸€ä¸ª<code>time</code>å±æ€§ã€‚æ•°æ®ç»‘å®šæœºåˆ¶è§„å®šï¼Œ<code>data</code>å¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼Œè‡ªåŠ¨æˆä¸ºå½“å‰é¡µé¢å¯ä»¥è¯»å–çš„å…¨å±€å˜é‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>index</code>é¡µé¢å¯ä»¥è‡ªåŠ¨è¯»å–<code>time</code>å˜é‡ã€‚</p><p>æ¥ç€ï¼Œä¿®æ”¹<code>index.wxml</code>æ–‡ä»¶ï¼ŒåŠ å…¥<code>time</code>å˜é‡ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>å½“å‰æ—¶é—´ä¸ºï¼š&#123;&#123;time&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>time</code>å˜é‡å†™åœ¨<code>&#123;&#123;...&#125;&#125;</code>é‡Œé¢ã€‚è¿™æ˜¯å°ç¨‹åºç‰¹æœ‰çš„è¯­æ³•ï¼Œä¸¤é‡å¤§æ‹¬å·è¡¨ç¤ºï¼Œå†…éƒ¨ä¸æ˜¯æ–‡æœ¬ï¼Œè€Œæ˜¯ JavaScript ä»£ç ï¼Œå®ƒçš„æ‰§è¡Œç»“æœä¼šå†™å…¥é¡µé¢ã€‚å› æ­¤ï¼Œ<code>&#123;&#123;time&#125;&#125;</code>è¡¨ç¤ºè¯»å–å…¨å±€å˜é‡<code>name</code>çš„å€¼ï¼Œå°†è¿™ä¸ªå€¼å†™å…¥ç½‘é¡µã€‚</p><p>æ³¨æ„ï¼Œå˜é‡ååŒºåˆ†å¤§å°å†™ï¼Œ<code>time</code>å’Œ<code>Time</code>æ˜¯ä¸¤ä¸ªä¸åŒçš„å˜é‡åã€‚</p><p>å¼€å‘è€…å·¥å…·å¯¼å…¥é¡¹ç›®ä»£ç ï¼Œé¡µé¢æ¸²æŸ“ç»“æœå¦‚ä¸‹ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220114151911682.png" alt="image-20220114151911682"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>time</code>å˜é‡å·²ç»è‡ªåŠ¨æ›¿æ¢æˆäº†å˜é‡å€¼â€Fri Jan 14 2022 15:21:02 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)â€ã€‚</p><h2 id="0x02-å…¨å±€æ•°æ®"><a href="#0x02-å…¨å±€æ•°æ®" class="headerlink" title="0x02 å…¨å±€æ•°æ®"></a>0x02 å…¨å±€æ•°æ®</h2><p>æ•°æ®ç»‘å®šåªå¯¹å½“å‰é¡µé¢æœ‰æ•ˆï¼Œå¦‚æœæŸäº›æ•°æ®è¦åœ¨å¤šä¸ªé¡µé¢å…±äº«ï¼Œå°±éœ€è¦å†™åˆ°å…¨å±€é…ç½®å¯¹è±¡é‡Œé¢ã€‚</p><p>æ‰“å¼€<code>app.js</code>ï¼Œæ”¹å†™å¦‚ä¸‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">App</span>(&#123;</span><br><span class="line">  <span class="attr">globalData</span>: &#123;</span><br><span class="line">    <span class="attr">now</span>: (<span class="keyword">new</span> <span class="title class_">Date</span>()).<span class="title function_">toLocaleString</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>App()</code>æ–¹æ³•çš„å‚æ•°é…ç½®å¯¹è±¡æœ‰ä¸€ä¸ª<code>globalData</code>å±æ€§ï¼Œè¿™ä¸ªå±æ€§å°±æ˜¯æˆ‘ä»¬è¦åœ¨å¤šä¸ªé¡µé¢ä¹‹é—´åˆ†äº«çš„å€¼ã€‚äº‹å®ä¸Šï¼Œé…ç½®å¯¹è±¡çš„ä»»ä½•ä¸€ä¸ªå±æ€§éƒ½å¯ä»¥å…±äº«ï¼Œè¿™é‡Œèµ·åä¸º<code>globalData</code>åªæ˜¯ä¸ºäº†ä¾¿äºè¯†åˆ«ã€‚</p><p>ç„¶åï¼Œæ‰“å¼€<code>index.js</code>ï¼Œå¢åŠ ä¸‹é¢çš„å†…å®¹ï¼Œåœ¨é¡µé¢è„šæœ¬é‡Œé¢è·å–å…¨å±€å¯¹è±¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="title function_">getApp</span>();</span><br><span class="line"></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">time</span>: app.<span class="property">globalData</span>.<span class="property">now</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>getApp()</code>å‡½æ•°æ˜¯å°ç¨‹åºåŸç”Ÿæä¾›çš„å‡½æ•°æ–¹æ³•ï¼Œç”¨äºä»é¡µé¢è·å– App å®ä¾‹å¯¹è±¡ã€‚æ‹¿åˆ°å®ä¾‹å¯¹è±¡ä»¥åï¼Œå°±èƒ½ä»å®ƒä¸Šé¢æ‹¿åˆ°å…¨å±€é…ç½®å¯¹è±¡çš„<code>globalData</code>å±æ€§ï¼Œä»è€ŒæŠŠ<code>app.globalData.now</code>èµ‹å€¼ç»™é¡µé¢è„šæœ¬çš„<code>time</code>å±æ€§ï¼Œè¿›è€Œé€šè¿‡æ•°æ®ç»‘å®šæœºåˆ¶ï¼Œå˜æˆé¡µé¢çš„å…¨å±€å˜é‡<code>now</code>ã€‚</p><p>æœ€åï¼Œä¿®æ”¹ä¸€ä¸‹é¡µé¢ä»£ç <code>index.wxml</code>ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>å½“å‰æ—¶é—´ä¸º &#123;&#123;time&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¼€å‘è€…å·¥å…·å¯¼å…¥é¡¹ç›®ä»£ç ï¼Œé¡µé¢æ¸²æŸ“ç»“æœå¦‚ä¸‹ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220114193439963.png" alt="image-20220114193439963"></p><h2 id="0x03-äº‹ä»¶"><a href="#0x03-äº‹ä»¶" class="headerlink" title="0x03 äº‹ä»¶"></a>0x03 äº‹ä»¶</h2><p>äº‹ä»¶æ˜¯å°ç¨‹åºè·Ÿç”¨æˆ·äº’åŠ¨çš„ä¸»è¦æ‰‹æ®µã€‚å°ç¨‹åºé€šè¿‡æ¥æ”¶å„ç§ç”¨æˆ·äº‹ä»¶ï¼Œæ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œåšå‡ºååº”ã€‚</p><p>å°ç¨‹åºçš„<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html">å¸¸è§äº‹ä»¶</a>æœ‰ä¸‹é¢è¿™äº›ã€‚</p><ul><li><code>tap</code>ï¼šè§¦æ‘¸åé©¬ä¸Šç¦»å¼€ã€‚</li><li><code>longpress</code>ï¼šè§¦æ‘¸åï¼Œè¶…è¿‡ 350ms å†ç¦»å¼€ã€‚å¦‚æœæŒ‡å®šäº†è¯¥äº‹ä»¶çš„å›è°ƒå‡½æ•°å¹¶è§¦å‘äº†è¯¥äº‹ä»¶ï¼Œ<code>tap</code>äº‹ä»¶å°†ä¸è¢«è§¦å‘ã€‚</li><li><code>touchstart</code>ï¼šè§¦æ‘¸å¼€å§‹ã€‚</li><li><code>touchmove</code>ï¼šè§¦æ‘¸åç§»åŠ¨ã€‚</li><li><code>touchcancel</code>ï¼šè§¦æ‘¸åŠ¨ä½œè¢«æ‰“æ–­ï¼Œå¦‚æ¥ç”µæé†’ï¼Œå¼¹çª—ç­‰ã€‚</li><li><code>touchend</code>ï¼šè§¦æ‘¸ç»“æŸã€‚</li></ul><p>ä¸Šé¢è¿™äº›äº‹ä»¶ï¼Œåœ¨ä¼ æ’­ä¸Šåˆ†æˆä¸¤ä¸ªé˜¶æ®µï¼šå…ˆæ˜¯æ•è·é˜¶æ®µï¼ˆç”±ä¸Šå±‚å…ƒç´ å‘ä¸‹å±‚å…ƒç´ ä¼ æ’­ï¼‰ï¼Œç„¶åæ˜¯å†’æ³¡é˜¶æ®µï¼ˆç”±ä¸‹å±‚å…ƒç´ å‘ä¸Šå±‚å…ƒç´ ä¼ æ’­ï¼‰ã€‚æ‰€ä»¥ï¼ŒåŒä¸€ä¸ªäº‹ä»¶åœ¨åŒä¸€ä¸ªå…ƒç´ ä¸Šé¢å…¶å®ä¼šè§¦å‘ä¸¤æ¬¡ï¼šæ•è·é˜¶æ®µä¸€æ¬¡ï¼Œå†’æ³¡é˜¶æ®µä¸€æ¬¡ã€‚è¯¦ç»†çš„ä»‹ç»ï¼Œè¯·å‚è€ƒ<a target="_blank" rel="noopener" href="https://blog.q1jun.cn/?p=241">å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®° 04</a>ã€‚</p><p>å°ç¨‹åºå…è®¸é¡µé¢å…ƒç´ ï¼Œé€šè¿‡å±æ€§æŒ‡å®šå„ç§äº‹ä»¶çš„å›è°ƒå‡½æ•°ï¼Œå¹¶ä¸”è¿˜èƒ½å¤ŸæŒ‡å®šæ˜¯å“ªä¸ªé˜¶æ®µè§¦å‘å›è°ƒå‡½æ•°ã€‚å…·ä½“æ–¹æ³•æ˜¯ä¸ºäº‹ä»¶å±æ€§ååŠ ä¸Šä¸åŒçš„å‰ç¼€ã€‚å°ç¨‹åºæä¾›å››ç§å‰ç¼€ã€‚</p><ul><li><code>capture-bind</code>ï¼šæ•è·é˜¶æ®µè§¦å‘ã€‚</li><li><code>capture-catch</code>ï¼šæ•è·é˜¶æ®µè§¦å‘ï¼Œå¹¶ä¸­æ–­äº‹ä»¶ï¼Œä¸å†å‘ä¸‹ä¼ æ’­ï¼Œå³ä¸­æ–­æ•è·é˜¶æ®µï¼Œå¹¶å–æ¶ˆéšåçš„å†’æ³¡é˜¶æ®µã€‚</li><li><code>bind</code>ï¼šå†’æ³¡é˜¶æ®µè§¦å‘ã€‚</li><li><code>catch</code>ï¼šå†’æ³¡é˜¶æ®µè§¦å‘ï¼Œå¹¶å–æ¶ˆäº‹ä»¶è¿›ä¸€æ­¥å‘ä¸Šå†’æ³¡ã€‚</li></ul><p>ä¸‹é¢é€šè¿‡ä¸€ä¸ªä¾‹å­ï¼Œæ¥çœ‹å¦‚ä½•ä¸ºäº‹ä»¶æŒ‡å®šå›è°ƒå‡½æ•°ã€‚æ‰“å¼€<code>index.wxml</code>æ–‡ä»¶ï¼Œæ”¹æˆä¸‹é¢çš„ä»£ç ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>Hello &#123;&#123;name&#125;&#125; !!<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;weui-btn weui-btn_primary&quot;</span> <span class="attr">bind:tap</span>=<span class="string">&quot;buttonHandler&quot;</span>&gt;</span></span><br><span class="line">    ç‚¹å‡»</span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¸ºé¡µé¢åŠ ä¸Šäº†ä¸€ä¸ªæŒ‰é’®ï¼Œå¹¶ä¸ºè¿™ä¸ªæŒ‰é’®æŒ‡å®šäº†è§¦æ‘¸äº‹ä»¶ï¼ˆ<code>tap</code>ï¼‰çš„å›è°ƒå‡½æ•°<code>buttonHandler</code>ï¼Œ<code>bind:</code>å‰ç¼€è¡¨ç¤ºè¿™ä¸ªå›è°ƒå‡½æ•°ä¼šåœ¨å†’æ³¡é˜¶æ®µè§¦å‘ï¼ˆå‰ç¼€é‡Œé¢çš„å†’å·å¯ä»¥çœç•¥ï¼Œå³å†™æˆ<code>bindtap</code>ä¹Ÿå¯ä»¥ï¼‰ã€‚</p><p>å›è°ƒå‡½æ•°å¿…é¡»åœ¨é¡µé¢è„šæœ¬ä¸­å®šä¹‰ã€‚æ‰“å¼€<code>index.js</code>æ–‡ä»¶ï¼Œæ”¹æˆä¸‹é¢çš„ä»£ç ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Guest&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">buttonHandler</span>(<span class="params">event</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;q1jun&#x27;</span></span><br><span class="line">      &#125;);</span><br><span class="line"> &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>Page()</code>æ–¹æ³•çš„å‚æ•°é…ç½®å¯¹è±¡é‡Œé¢ï¼Œå®šä¹‰äº†<code>buttonHandler()</code>ï¼Œè¿™å°±æ˜¯<code>&lt;button&gt;</code>å…ƒç´ çš„å›è°ƒå‡½æ•°ã€‚å®ƒæœ‰å‡ ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„ã€‚</p><p>ï¼ˆ1ï¼‰äº‹ä»¶å›è°ƒå‡½æ•°çš„å‚æ•°æ˜¯äº‹ä»¶å¯¹è±¡<code>event</code>ï¼Œå¯ä»¥ä»å®ƒä¸Šé¢è·å–<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html">äº‹ä»¶ä¿¡æ¯</a>ï¼Œæ¯”å¦‚äº‹ä»¶ç±»å‹ã€å‘ç”Ÿæ—¶é—´ã€å‘ç”ŸèŠ‚ç‚¹ã€å½“å‰èŠ‚ç‚¹ç­‰ç­‰ã€‚</p><p>ï¼ˆ2ï¼‰äº‹ä»¶å›è°ƒå‡½æ•°å†…éƒ¨çš„<code>this</code>ï¼ŒæŒ‡å‘é¡µé¢å®ä¾‹ã€‚</p><p>ï¼ˆ3ï¼‰é¡µé¢å®ä¾‹çš„<code>this.setData()</code>æ–¹æ³•ï¼Œå¯ä»¥æ›´æ”¹é…ç½®å¯¹è±¡çš„<code>data</code>å±æ€§ï¼Œè¿›è€Œé€šè¿‡æ•°æ®ç»‘å®šæœºåˆ¶ï¼Œå¯¼è‡´é¡µé¢ä¸Šçš„å…¨å±€å˜é‡å‘ç”Ÿå˜åŒ–ã€‚</p><p>å¼€å‘è€…å·¥å…·å¯¼å…¥é¡¹ç›®ä»£ç ï¼Œç‚¹å‡»æŒ‰é’®åï¼Œé¡µé¢æ¸²æŸ“ç»“æœå¦‚ä¸‹ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220114201233780.png" alt="image-20220114201233780"></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220114201209629.png" alt="image-20220114201209629"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œç‚¹å‡»æŒ‰é’®ä»¥åï¼Œé¡µé¢çš„æ–‡å­—ä»â€hello å¼ ä¸‰â€å˜æˆäº†â€hello æå››â€ã€‚</p><h2 id="0x04-åŠ¨æ€æç¤º-Toast"><a href="#0x04-åŠ¨æ€æç¤º-Toast" class="headerlink" title="0x04 åŠ¨æ€æç¤º Toast"></a>0x04 åŠ¨æ€æç¤º Toast</h2><p>å°ç¨‹åºæä¾›äº†å¾ˆå¤šç»„ä»¶å’Œæ–¹æ³•ï¼Œç”¨æ¥å¢å¼ºäº’åŠ¨æ•ˆæœã€‚æ¯”å¦‚ï¼Œæ¯æ¬¡æ“ä½œåï¼Œéƒ½æ˜¾ç¤ºä¸€ä¸ªåŠ¨æ€æç¤ºï¼Œå‘Šè¯‰ç”¨æˆ·æ“ä½œçš„ç»“æœï¼Œè¿™ç§æ•ˆæœå«åš Toastã€‚</p><p>æ‰“å¼€<code>index.js</code>æ–‡ä»¶ï¼Œä¸º<code>this.setData()</code>åŠ ä¸Šç¬¬äºŒä¸ªå‚æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Guest&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">buttonHandler</span>(<span class="params">event</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;q1jun&#x27;</span></span><br><span class="line">      &#125;, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">          <span class="attr">title</span>: <span class="string">&#x27;æ“ä½œå®Œæˆ&#x27;</span>,</span><br><span class="line">          <span class="attr">duration</span>: <span class="number">700</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>this.setData()</code>æ–¹æ³•åŠ å…¥äº†ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¿™æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¼šåœ¨é¡µé¢å˜æ›´å®Œæ¯•åï¼ˆå³<code>this.setData()</code>æ‰§è¡Œå®Œï¼‰è‡ªåŠ¨è°ƒç”¨ã€‚</p><p>è¿™ä¸ªå‚æ•°å‡½æ•°å†…éƒ¨ï¼Œè°ƒç”¨äº†<code>wx.showToast()</code>æ–¹æ³•ï¼Œ<code>wx</code>æ˜¯å°ç¨‹åºæä¾›çš„åŸç”Ÿå¯¹è±¡ï¼Œæ‰€æœ‰å®¢æˆ·ç«¯ API éƒ½å®šä¹‰åœ¨è¿™ä¸ªå¯¹è±¡ä¸Šé¢ï¼Œ<code>wx.showToast()</code>ä¼šå±•ç¤ºå¾®ä¿¡å†…ç½®çš„åŠ¨æ€æç¤ºæ¡†ï¼Œå®ƒçš„å‚æ•°å¯¹è±¡çš„<code>title</code>å±æ€§æŒ‡å®šæç¤ºå†…å®¹ï¼Œ<code>duration</code>å±æ€§æŒ‡å®šæç¤ºæ¡†çš„å±•ç¤ºæ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’ã€‚</p><p>å¼€å‘è€…å·¥å…·å¯¼å…¥é¡¹ç›®ä»£ç ï¼Œç‚¹å‡»æŒ‰é’®åï¼Œé¡µé¢æ¸²æŸ“ç»“æœå¦‚ä¸‹ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220114202521614.png" alt="image-20220114202521614"></p><h2 id="0x05-å¯¹è¯æ¡†-Modal"><a href="#0x05-å¯¹è¯æ¡†-Modal" class="headerlink" title="0x05 å¯¹è¯æ¡† Modal"></a>0x05 å¯¹è¯æ¡† Modal</h2><p>ä¸‹é¢ï¼Œæˆ‘ä»¬å†ç”¨å°ç¨‹åºæä¾›çš„<code>wx.showModal()</code>æ–¹æ³•ï¼Œåˆ¶ä½œä¸€ä¸ªå¯¹è¯æ¡†ï¼Œå³ç”¨æˆ·å¯ä»¥é€‰æ‹©â€ç¡®å®šâ€æˆ–â€å–æ¶ˆâ€ã€‚</p><p>æ‰“å¼€<code>index.js</code>æ–‡ä»¶ï¼Œä¿®æ”¹å¦‚ä¸‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Guest&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">buttonHandler</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> that = <span class="variable language_">this</span>;</span><br><span class="line">    wx.<span class="title function_">showModal</span>(&#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&quot;ç¡®è®¤æ“ä½œ&quot;</span>,</span><br><span class="line">      <span class="attr">content</span>: <span class="string">&quot;ä½ ç¡®è®¤è¦ä¿®æ”¹å—ï¼Ÿ&quot;</span>,</span><br><span class="line">      success (res) &#123;</span><br><span class="line">        <span class="keyword">if</span> (res.<span class="property">confirm</span>) &#123;</span><br><span class="line">          that.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&quot;q1jun&quot;</span></span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">              <span class="attr">title</span>: <span class="string">&#x27;æ“ä½œå®Œæˆ&#x27;</span>,</span><br><span class="line">              <span class="attr">duration</span>: <span class="number">700</span></span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (res.<span class="property">cancel</span>) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç”¨æˆ·ç‚¹å‡»å–æ¶ˆ&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">cancelColor</span>: <span class="string">&#x27;cancelColor&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">   &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œç”¨æˆ·ç‚¹å‡»æŒ‰é’®ä»¥åï¼Œå›è°ƒå‡½æ•°<code>buttonHandler()</code>é‡Œé¢ä¼šè°ƒç”¨<code>wx.showModal()</code>æ–¹æ³•ï¼Œæ˜¾ç¤ºä¸€ä¸ªå¯¹è¯æ¡†ï¼Œæ•ˆæœå¦‚ä¸‹ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220114204949016.png" alt="image-20220114204949016"></p><p><code>wx.showModal()</code>æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªé…ç½®å¯¹è±¡ã€‚<code>title</code>å±æ€§è¡¨ç¤ºå¯¹è¯æ¡†çš„æ ‡é¢˜ï¼ˆæœ¬ä¾‹ä¸ºâ€æ“ä½œç¡®è®¤â€ï¼‰ï¼Œ<code>content</code>å±æ€§è¡¨ç¤ºå¯¹è¯æ¡†çš„å†…å®¹ï¼ˆæœ¬ä¾‹ä¸ºâ€ä½ ç¡®è®¤è¦ä¿®æ”¹å—ï¼Ÿâ€ï¼‰ï¼Œ<code>success</code>å±æ€§æŒ‡å®šå¯¹è¯æ¡†æˆåŠŸæ˜¾ç¤ºåçš„å›è°ƒå‡½æ•°ï¼Œ<code>fail</code>å±æ€§æŒ‡å®šæ˜¾ç¤ºå¤±è´¥æ—¶çš„å›è°ƒå‡½æ•°ã€‚</p><p><code>success</code>å›è°ƒå‡½æ•°é‡Œé¢ï¼Œéœ€è¦åˆ¤æ–­ä¸€ä¸‹ç”¨æˆ·åˆ°åº•ç‚¹å‡»çš„æ˜¯å“ªä¸€ä¸ªæŒ‰é’®ã€‚å¦‚æœå‚æ•°å¯¹è±¡çš„<code>confirm</code>å±æ€§ä¸º<code>true</code>ï¼Œç‚¹å‡»çš„å°±æ˜¯â€ç¡®å®šâ€æŒ‰é’®ï¼Œ<code>cancel</code>å±æ€§ä¸º<code>true</code>ï¼Œç‚¹å‡»çš„å°±æ˜¯â€å–æ¶ˆâ€æŒ‰é’®ã€‚</p><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œç”¨æˆ·ç‚¹å‡»â€å–æ¶ˆâ€æŒ‰é’®åï¼Œå¯¹è¯æ¡†ä¼šæ¶ˆå¤±ï¼Œæ§åˆ¶å°ä¼šè¾“å‡ºä¸€è¡Œæç¤ºä¿¡æ¯ã€‚ç‚¹å‡»â€ç¡®å®šâ€æŒ‰é’®åï¼Œå¯¹è¯æ¡†ä¹Ÿä¼šæ¶ˆå¤±ï¼Œå¹¶ä¸”è¿˜ä¼šå»è°ƒç”¨<code>that.setData()</code>é‚£äº›é€»è¾‘ã€‚</p><p>æ³¨æ„ï¼Œä¸Šé¢ä»£ç å†™çš„æ˜¯<code>that.setData()</code>ï¼Œè€Œä¸æ˜¯<code>this.setData()</code>ã€‚è¿™æ˜¯å› ä¸º<code>setData()</code>æ–¹æ³•å®šä¹‰åœ¨é¡µé¢å®ä¾‹ä¸Šé¢ï¼Œä½†æ˜¯ç”±äº<code>success()</code>å›è°ƒå‡½æ•°ä¸æ˜¯ç›´æ¥å®šä¹‰åœ¨<code>Page()</code>çš„é…ç½®å¯¹è±¡ä¸‹é¢ï¼Œ<code>this</code>ä¸ä¼šæŒ‡å‘é¡µé¢å®ä¾‹ï¼Œå¯¼è‡´<code>this.setData()</code>ä¼šæŠ¥é”™ã€‚è§£å†³æ–¹æ³•å°±æ˜¯åœ¨<code>buttonHandler()</code>çš„å¼€å¤´ï¼Œå°†<code>this</code>èµ‹å€¼ç»™å˜é‡<code>that</code>ï¼Œç„¶ååœ¨<code>success()</code>å›è°ƒå‡½æ•°é‡Œé¢ä½¿ç”¨<code>that.setData()</code>å»è°ƒç”¨ã€‚å…³äº<code>this</code>æ›´è¯¦ç»†çš„è§£é‡Šï¼Œå¯ä»¥å‚è€ƒ<a target="_blank" rel="noopener" href="https://blog.q1jun.cn/?p=219">å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®° 04</a>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å­¦ä¹  </category>
          
          <category> å¾®ä¿¡å°ç¨‹åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> JavaScript </tag>
            
            <tag> å°ç¨‹åº </tag>
            
            <tag> WeChat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®° 04</title>
      <link href="/2021/09/03/50dfe4d83351-q1jun/"/>
      <url>/2021/09/03/50dfe4d83351-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®°-04"><a href="#å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®°-04" class="headerlink" title="å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®° 04"></a>å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®° 04</h1><h2 id="0x01-äº‹ä»¶æ¨¡å‹"><a href="#0x01-äº‹ä»¶æ¨¡å‹" class="headerlink" title="0x01 äº‹ä»¶æ¨¡å‹"></a>0x01 äº‹ä»¶æ¨¡å‹</h2><h3 id="0x0101-ç›‘å¬å‡½æ•°"><a href="#0x0101-ç›‘å¬å‡½æ•°" class="headerlink" title="0x0101 ç›‘å¬å‡½æ•°"></a>0x0101 ç›‘å¬å‡½æ•°</h3><p>æµè§ˆå™¨çš„äº‹ä»¶æ¨¡å‹ï¼Œå°±æ˜¯é€šè¿‡ç›‘å¬å‡½æ•°ï¼ˆlistenerï¼‰å¯¹äº‹ä»¶åšå‡ºååº”ã€‚äº‹ä»¶å‘ç”Ÿåï¼Œæµè§ˆå™¨ç›‘å¬åˆ°äº†è¿™ä¸ªäº‹ä»¶ï¼Œå°±ä¼šæ‰§è¡Œå¯¹åº”çš„ç›‘å¬å‡½æ•°ã€‚è¿™æ˜¯äº‹ä»¶é©±åŠ¨ç¼–ç¨‹æ¨¡å¼ï¼ˆevent-drivenï¼‰çš„ä¸»è¦ç¼–ç¨‹æ–¹å¼ã€‚</p><p>JavaScript æœ‰ä¸‰ç§æ–¹æ³•ï¼Œå¯ä»¥ä¸ºäº‹ä»¶ç»‘å®šç›‘å¬å‡½æ•°ã€‚</p><h4 id="0x010101-HTML-çš„-on-å±æ€§"><a href="#0x010101-HTML-çš„-on-å±æ€§" class="headerlink" title="0x010101 HTML çš„ on- å±æ€§"></a>0x010101 HTML çš„ on- å±æ€§</h4><p>HTML è¯­è¨€å…è®¸åœ¨å…ƒç´ çš„å±æ€§ä¸­ï¼Œç›´æ¥å®šä¹‰æŸäº›äº‹ä»¶çš„ç›‘å¬ä»£ç ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">onload</span>=<span class="string">&quot;doSomething()&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onclick</span>=<span class="string">&quot;console.log(&#x27;è§¦å‘äº‹ä»¶&#x27;)&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸º<code>body</code>èŠ‚ç‚¹çš„<code>load</code>äº‹ä»¶ã€<code>div</code>èŠ‚ç‚¹çš„<code>click</code>äº‹ä»¶ï¼ŒæŒ‡å®šäº†ç›‘å¬ä»£ç ã€‚ä¸€æ—¦äº‹ä»¶å‘ç”Ÿï¼Œå°±ä¼šæ‰§è¡Œè¿™æ®µä»£ç ã€‚</p><p>å…ƒç´ çš„äº‹ä»¶ç›‘å¬å±æ€§ï¼Œéƒ½æ˜¯<code>on</code>åŠ ä¸Šäº‹ä»¶åï¼Œæ¯”å¦‚<code>onload</code>å°±æ˜¯<code>on + load</code>ï¼Œè¡¨ç¤º<code>load</code>äº‹ä»¶çš„ç›‘å¬ä»£ç ã€‚</p><p>æ³¨æ„ï¼Œè¿™äº›å±æ€§çš„å€¼æ˜¯å°†ä¼šæ‰§è¡Œçš„ä»£ç ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ­£ç¡® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">onload</span>=<span class="string">&quot;doSomething()&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é”™è¯¯ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">onload</span>=<span class="string">&quot;doSomething&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸€æ—¦æŒ‡å®šçš„äº‹ä»¶å‘ç”Ÿï¼Œ<code>on-</code>å±æ€§çš„å€¼æ˜¯åŸæ ·ä¼ å…¥ JavaScript å¼•æ“æ‰§è¡Œã€‚å› æ­¤å¦‚æœè¦æ‰§è¡Œå‡½æ•°ï¼Œä¸è¦å¿˜è®°åŠ ä¸Šä¸€å¯¹åœ†æ‹¬å·ã€‚</p><p>ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æŒ‡å®šçš„ç›‘å¬ä»£ç ï¼Œåªä¼šåœ¨å†’æ³¡é˜¶æ®µè§¦å‘ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onclick</span>=<span class="string">&quot;console.log(2)&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;console.log(1)&quot;</span>&gt;</span>ç‚¹å‡»<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>&lt;button&gt;</code>æ˜¯<code>&lt;div&gt;</code>çš„å­å…ƒç´ ã€‚<code>&lt;button&gt;</code>çš„<code>click</code>äº‹ä»¶ï¼Œä¹Ÿä¼šè§¦å‘<code>&lt;div&gt;</code>çš„<code>click</code>äº‹ä»¶ã€‚ç”±äº<code>on-</code>å±æ€§çš„ç›‘å¬ä»£ç ï¼Œåªåœ¨å†’æ³¡é˜¶æ®µè§¦å‘ï¼Œæ‰€ä»¥ç‚¹å‡»ç»“æœæ˜¯å…ˆè¾“å‡º<code>1</code>ï¼Œå†è¾“å‡º<code>2</code>ï¼Œå³äº‹ä»¶ä»å­å…ƒç´ å¼€å§‹å†’æ³¡åˆ°çˆ¶å…ƒç´ ã€‚</p><p>ç›´æ¥è®¾ç½®<code>on-</code>å±æ€§ï¼Œä¸é€šè¿‡å…ƒç´ èŠ‚ç‚¹çš„<code>setAttribute</code>æ–¹æ³•è®¾ç½®<code>on-</code>å±æ€§ï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">el.<span class="title function_">setAttribute</span>(<span class="string">&#x27;onclick&#x27;</span>, <span class="string">&#x27;doSomething()&#x27;</span>);</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="comment">// &lt;Element onclick=&quot;doSomething()&quot;&gt;</span></span><br></pre></td></tr></table></figure><h4 id="0x010102-å…ƒç´ èŠ‚ç‚¹çš„äº‹ä»¶å±æ€§"><a href="#0x010102-å…ƒç´ èŠ‚ç‚¹çš„äº‹ä»¶å±æ€§" class="headerlink" title="0x010102 å…ƒç´ èŠ‚ç‚¹çš„äº‹ä»¶å±æ€§"></a>0x010102 å…ƒç´ èŠ‚ç‚¹çš„äº‹ä»¶å±æ€§</h4><p>å…ƒç´ èŠ‚ç‚¹å¯¹è±¡çš„äº‹ä»¶å±æ€§ï¼ŒåŒæ ·å¯ä»¥æŒ‡å®šç›‘å¬å‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = doSomething;</span><br><span class="line"></span><br><span class="line">div.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è§¦å‘äº‹ä»¶&#x27;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æŒ‡å®šçš„ç›‘å¬å‡½æ•°ï¼Œä¹Ÿæ˜¯åªä¼šåœ¨å†’æ³¡é˜¶æ®µè§¦å‘ã€‚</p><p>æ³¨æ„ï¼Œè¿™ç§æ–¹æ³•ä¸ HTML çš„<code>on-</code>å±æ€§çš„å·®å¼‚æ˜¯ï¼Œå®ƒçš„å€¼æ˜¯å‡½æ•°åï¼ˆ<code>doSomething</code>ï¼‰ï¼Œè€Œä¸åƒåè€…ï¼Œå¿…é¡»ç»™å‡ºå®Œæ•´çš„ç›‘å¬ä»£ç ï¼ˆ<code>doSomething()</code>ï¼‰ã€‚</p><h4 id="0x010103-EventTarget-addEventListener"><a href="#0x010103-EventTarget-addEventListener" class="headerlink" title="0x010103 EventTarget.addEventListener()"></a>0x010103 EventTarget.addEventListener()</h4><p>æ‰€æœ‰ DOM èŠ‚ç‚¹å®ä¾‹éƒ½æœ‰<code>addEventListener</code>æ–¹æ³•ï¼Œç”¨æ¥ä¸ºè¯¥èŠ‚ç‚¹å®šä¹‰äº‹ä»¶çš„ç›‘å¬å‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;load&#x27;</span>, doSomething, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure><h4 id="0x010104-å°ç»“"><a href="#0x010104-å°ç»“" class="headerlink" title="0x010104 å°ç»“"></a>0x010104 å°ç»“</h4><p>ä¸Šé¢ä¸‰ç§æ–¹æ³•ï¼Œç¬¬ä¸€ç§â€œHTML çš„ on- å±æ€§â€ï¼Œè¿åäº† HTML ä¸ JavaScript ä»£ç ç›¸åˆ†ç¦»çš„åŸåˆ™ï¼Œå°†ä¸¤è€…å†™åœ¨ä¸€èµ·ï¼Œä¸åˆ©äºä»£ç åˆ†å·¥ï¼Œå› æ­¤ä¸æ¨èä½¿ç”¨ã€‚</p><p>ç¬¬äºŒç§â€œå…ƒç´ èŠ‚ç‚¹çš„äº‹ä»¶å±æ€§â€çš„ç¼ºç‚¹åœ¨äºï¼ŒåŒä¸€ä¸ªäº‹ä»¶åªèƒ½å®šä¹‰ä¸€ä¸ªç›‘å¬å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå®šä¹‰ä¸¤æ¬¡<code>onclick</code>å±æ€§ï¼Œåä¸€æ¬¡å®šä¹‰ä¼šè¦†ç›–å‰ä¸€æ¬¡ã€‚å› æ­¤ï¼Œä¹Ÿä¸æ¨èä½¿ç”¨ã€‚</p><p>ç¬¬ä¸‰ç§<code>EventTarget.addEventListener</code>æ˜¯æ¨èçš„æŒ‡å®šç›‘å¬å‡½æ•°çš„æ–¹æ³•ã€‚å®ƒæœ‰å¦‚ä¸‹ä¼˜ç‚¹ï¼š</p><ul><li>åŒä¸€ä¸ªäº‹ä»¶å¯ä»¥æ·»åŠ å¤šä¸ªç›‘å¬å‡½æ•°ã€‚</li><li>èƒ½å¤ŸæŒ‡å®šåœ¨å“ªä¸ªé˜¶æ®µï¼ˆæ•è·é˜¶æ®µè¿˜æ˜¯å†’æ³¡é˜¶æ®µï¼‰è§¦å‘ç›‘å¬å‡½æ•°ã€‚</li><li>é™¤äº† DOM èŠ‚ç‚¹ï¼Œå…¶ä»–å¯¹è±¡ï¼ˆæ¯”å¦‚<code>window</code>ã€<code>XMLHttpRequest</code>ç­‰ï¼‰ä¹Ÿæœ‰è¿™ä¸ªæ¥å£ï¼Œå®ƒç­‰äºæ˜¯æ•´ä¸ª JavaScript ç»Ÿä¸€çš„ç›‘å¬å‡½æ•°æ¥å£ã€‚</li></ul><h3 id="0x0102-this-çš„æŒ‡å‘"><a href="#0x0102-this-çš„æŒ‡å‘" class="headerlink" title="0x0102 this çš„æŒ‡å‘"></a>0x0102 this çš„æŒ‡å‘</h3><p>ç›‘å¬å‡½æ•°å†…éƒ¨çš„<code>this</code>æŒ‡å‘è§¦å‘äº‹ä»¶çš„é‚£ä¸ªå…ƒç´ èŠ‚ç‚¹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;button id=<span class="string">&quot;btn&quot;</span> onclick=<span class="string">&quot;console.log(this.id)&quot;</span>&gt;ç‚¹å‡»&lt;/button&gt;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä¸Šé¢ä»£ç ï¼Œç‚¹å‡»åä¼šè¾“å‡º<code>btn</code>ã€‚</p><p>å…¶ä»–ä¸¤ç§ç›‘å¬å‡½æ•°çš„å†™æ³•ï¼Œ<code>this</code>çš„æŒ‡å‘ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// HTML ä»£ç å¦‚ä¸‹</span></span><br><span class="line"><span class="comment">// &lt;button id=&quot;btn&quot;&gt;ç‚¹å‡»&lt;/button&gt;</span></span><br><span class="line"><span class="keyword">var</span> btn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å†™æ³•ä¸€</span></span><br><span class="line">btn.<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">id</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å†™æ³•äºŒ</span></span><br><span class="line">btn.<span class="title function_">addEventListener</span>(</span><br><span class="line">  <span class="string">&#x27;click&#x27;</span>,</span><br><span class="line">  <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">id</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="literal">false</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä¸¤ç§å†™æ³•ï¼Œç‚¹å‡»æŒ‰é’®ä»¥åä¹Ÿæ˜¯è¾“å‡º<code>btn</code>ã€‚</p><h3 id="0x0103-äº‹ä»¶çš„ä¼ æ’­"><a href="#0x0103-äº‹ä»¶çš„ä¼ æ’­" class="headerlink" title="0x0103 äº‹ä»¶çš„ä¼ æ’­"></a>0x0103 äº‹ä»¶çš„ä¼ æ’­</h3><p>ä¸€ä¸ªäº‹ä»¶å‘ç”Ÿåï¼Œä¼šåœ¨å­å…ƒç´ å’Œçˆ¶å…ƒç´ ä¹‹é—´ä¼ æ’­ï¼ˆpropagationï¼‰ã€‚è¿™ç§ä¼ æ’­åˆ†æˆä¸‰ä¸ªé˜¶æ®µã€‚</p><ul><li><strong>ç¬¬ä¸€é˜¶æ®µ</strong>ï¼šä»<code>window</code>å¯¹è±¡ä¼ å¯¼åˆ°ç›®æ ‡èŠ‚ç‚¹ï¼ˆä¸Šå±‚ä¼ åˆ°åº•å±‚ï¼‰ï¼Œç§°ä¸ºâ€œæ•è·é˜¶æ®µâ€ï¼ˆcapture phaseï¼‰ã€‚</li><li><strong>ç¬¬äºŒé˜¶æ®µ</strong>ï¼šåœ¨ç›®æ ‡èŠ‚ç‚¹ä¸Šè§¦å‘ï¼Œç§°ä¸ºâ€œç›®æ ‡é˜¶æ®µâ€ï¼ˆtarget phaseï¼‰ã€‚</li><li><strong>ç¬¬ä¸‰é˜¶æ®µ</strong>ï¼šä»ç›®æ ‡èŠ‚ç‚¹ä¼ å¯¼å›<code>window</code>å¯¹è±¡ï¼ˆä»åº•å±‚ä¼ å›ä¸Šå±‚ï¼‰ï¼Œç§°ä¸ºâ€œå†’æ³¡é˜¶æ®µâ€ï¼ˆbubbling phaseï¼‰ã€‚</li></ul><p>è¿™ç§ä¸‰é˜¶æ®µçš„ä¼ æ’­æ¨¡å‹ï¼Œä½¿å¾—åŒä¸€ä¸ªäº‹ä»¶ä¼šåœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šè§¦å‘ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>ç‚¹å‡»<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>&lt;div&gt;</code>èŠ‚ç‚¹ä¹‹ä¸­æœ‰ä¸€ä¸ª<code>&lt;p&gt;</code>èŠ‚ç‚¹ã€‚</p><p>å¦‚æœå¯¹è¿™ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œéƒ½è®¾ç½®<code>click</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°ï¼ˆæ¯ä¸ªèŠ‚ç‚¹çš„æ•è·é˜¶æ®µå’Œå†’æ³¡é˜¶æ®µï¼Œå„è®¾ç½®ä¸€ä¸ªç›‘å¬å‡½æ•°ï¼‰ï¼Œå…±è®¡è®¾ç½®å››ä¸ªç›‘å¬å‡½æ•°ã€‚ç„¶åï¼Œå¯¹<code>&lt;p&gt;</code>ç‚¹å‡»ï¼Œ<code>click</code>äº‹ä»¶ä¼šè§¦å‘å››æ¬¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> phases = &#123;</span><br><span class="line">  <span class="number">1</span>: <span class="string">&#x27;capture&#x27;</span>,</span><br><span class="line">  <span class="number">2</span>: <span class="string">&#x27;target&#x27;</span>,</span><br><span class="line">  <span class="number">3</span>: <span class="string">&#x27;bubble&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> div = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> p = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;p&#x27;</span>);</span><br><span class="line"></span><br><span class="line">div.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, callback, <span class="literal">true</span>);</span><br><span class="line">p.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, callback, <span class="literal">true</span>);</span><br><span class="line">div.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, callback, <span class="literal">false</span>);</span><br><span class="line">p.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, callback, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">callback</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> tag = event.<span class="property">currentTarget</span>.<span class="property">tagName</span>;</span><br><span class="line">  <span class="keyword">var</span> phase = phases[event.<span class="property">eventPhase</span>];</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Tag: &#x27;&quot;</span> + tag + <span class="string">&quot;&#x27;. EventPhase: &#x27;&quot;</span> + phase + <span class="string">&quot;&#x27;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç‚¹å‡»ä»¥åçš„ç»“æœ</span></span><br><span class="line"><span class="comment">// Tag: &#x27;DIV&#x27;. EventPhase: &#x27;capture&#x27;</span></span><br><span class="line"><span class="comment">// Tag: &#x27;P&#x27;. EventPhase: &#x27;target&#x27;</span></span><br><span class="line"><span class="comment">// Tag: &#x27;P&#x27;. EventPhase: &#x27;target&#x27;</span></span><br><span class="line"><span class="comment">// Tag: &#x27;DIV&#x27;. EventPhase: &#x27;bubble&#x27;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œ<code>click</code>äº‹ä»¶è¢«è§¦å‘äº†å››æ¬¡ï¼š<code>&lt;div&gt;</code>èŠ‚ç‚¹çš„æ•è·é˜¶æ®µå’Œå†’æ³¡é˜¶æ®µå„1æ¬¡ï¼Œ<code>&lt;p&gt;</code>èŠ‚ç‚¹çš„ç›®æ ‡é˜¶æ®µè§¦å‘äº†2æ¬¡ã€‚</p><ol><li>æ•è·é˜¶æ®µï¼šäº‹ä»¶ä»<code>&lt;div&gt;</code>å‘<code>&lt;p&gt;</code>ä¼ æ’­æ—¶ï¼Œè§¦å‘<code>&lt;div&gt;</code>çš„<code>click</code>äº‹ä»¶ï¼›</li><li>ç›®æ ‡é˜¶æ®µï¼šäº‹ä»¶ä»<code>&lt;div&gt;</code>åˆ°è¾¾<code>&lt;p&gt;</code>æ—¶ï¼Œè§¦å‘<code>&lt;p&gt;</code>çš„<code>click</code>äº‹ä»¶ï¼›</li><li>å†’æ³¡é˜¶æ®µï¼šäº‹ä»¶ä»<code>&lt;p&gt;</code>ä¼ å›<code>&lt;div&gt;</code>æ—¶ï¼Œå†æ¬¡è§¦å‘<code>&lt;div&gt;</code>çš„<code>click</code>äº‹ä»¶ã€‚</li></ol><p>å…¶ä¸­ï¼Œ<code>&lt;p&gt;</code>èŠ‚ç‚¹æœ‰ä¸¤ä¸ªç›‘å¬å‡½æ•°ï¼ˆ<code>addEventListener</code>æ–¹æ³•ç¬¬ä¸‰ä¸ªå‚æ•°çš„ä¸åŒï¼Œä¼šå¯¼è‡´ç»‘å®šä¸¤ä¸ªç›‘å¬å‡½æ•°ï¼‰ï¼Œå› æ­¤å®ƒä»¬éƒ½ä¼šå› ä¸º<code>click</code>äº‹ä»¶è§¦å‘ä¸€æ¬¡ã€‚æ‰€ä»¥ï¼Œ<code>&lt;p&gt;</code>ä¼šåœ¨<code>target</code>é˜¶æ®µæœ‰ä¸¤æ¬¡è¾“å‡ºã€‚</p><p>æ³¨æ„ï¼Œæµè§ˆå™¨æ€»æ˜¯å‡å®š<code>click</code>äº‹ä»¶çš„ç›®æ ‡èŠ‚ç‚¹ï¼Œå°±æ˜¯ç‚¹å‡»ä½ç½®åµŒå¥—æœ€æ·±çš„é‚£ä¸ªèŠ‚ç‚¹ï¼ˆæœ¬ä¾‹æ˜¯<code>&lt;div&gt;</code>èŠ‚ç‚¹é‡Œé¢çš„<code>&lt;p&gt;</code>èŠ‚ç‚¹ï¼‰ã€‚æ‰€ä»¥ï¼Œ<code>&lt;p&gt;</code>èŠ‚ç‚¹çš„æ•è·é˜¶æ®µå’Œå†’æ³¡é˜¶æ®µï¼Œéƒ½ä¼šæ˜¾ç¤ºä¸º<code>target</code>é˜¶æ®µã€‚</p><p>äº‹ä»¶ä¼ æ’­çš„æœ€ä¸Šå±‚å¯¹è±¡æ˜¯<code>window</code>ï¼Œæ¥ç€ä¾æ¬¡æ˜¯<code>document</code>ï¼Œ<code>html</code>ï¼ˆ<code>document.documentElement</code>ï¼‰å’Œ<code>body</code>ï¼ˆ<code>document.body</code>ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸Šä¾‹çš„äº‹ä»¶ä¼ æ’­é¡ºåºï¼Œåœ¨æ•è·é˜¶æ®µä¾æ¬¡ä¸º<code>window</code>ã€<code>document</code>ã€<code>html</code>ã€<code>body</code>ã€<code>div</code>ã€<code>p</code>ï¼Œåœ¨å†’æ³¡é˜¶æ®µä¾æ¬¡ä¸º<code>p</code>ã€<code>div</code>ã€<code>body</code>ã€<code>html</code>ã€<code>document</code>ã€<code>window</code>ã€‚</p><h3 id="0x0104-äº‹ä»¶çš„ä»£ç†"><a href="#0x0104-äº‹ä»¶çš„ä»£ç†" class="headerlink" title="0x0104 äº‹ä»¶çš„ä»£ç†"></a>0x0104 äº‹ä»¶çš„ä»£ç†</h3><p>ç”±äºäº‹ä»¶ä¼šåœ¨å†’æ³¡é˜¶æ®µå‘ä¸Šä¼ æ’­åˆ°çˆ¶èŠ‚ç‚¹ï¼Œå› æ­¤å¯ä»¥æŠŠå­èŠ‚ç‚¹çš„ç›‘å¬å‡½æ•°å®šä¹‰åœ¨çˆ¶èŠ‚ç‚¹ä¸Šï¼Œç”±çˆ¶èŠ‚ç‚¹çš„ç›‘å¬å‡½æ•°ç»Ÿä¸€å¤„ç†å¤šä¸ªå­å…ƒç´ çš„äº‹ä»¶ã€‚è¿™ç§æ–¹æ³•å«åšäº‹ä»¶çš„ä»£ç†ï¼ˆdelegationï¼‰ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ul = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;ul&#x27;</span>);</span><br><span class="line"></span><br><span class="line">ul.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (event.<span class="property">target</span>.<span class="property">tagName</span>.<span class="title function_">toLowerCase</span>() === <span class="string">&#x27;li&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// some code</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>click</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°å®šä¹‰åœ¨<code>&lt;ul&gt;</code>èŠ‚ç‚¹ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œå®ƒå¤„ç†çš„æ˜¯å­èŠ‚ç‚¹<code>&lt;li&gt;</code>çš„<code>click</code>äº‹ä»¶ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œåªè¦å®šä¹‰ä¸€ä¸ªç›‘å¬å‡½æ•°ï¼Œå°±èƒ½å¤„ç†å¤šä¸ªå­èŠ‚ç‚¹çš„äº‹ä»¶ï¼Œè€Œä¸ç”¨åœ¨æ¯ä¸ª<code>&lt;li&gt;</code>èŠ‚ç‚¹ä¸Šå®šä¹‰ç›‘å¬å‡½æ•°ã€‚è€Œä¸”ä»¥åå†æ·»åŠ å­èŠ‚ç‚¹ï¼Œç›‘å¬å‡½æ•°ä¾ç„¶æœ‰æ•ˆã€‚</p><p>å¦‚æœå¸Œæœ›äº‹ä»¶åˆ°æŸä¸ªèŠ‚ç‚¹ä¸ºæ­¢ï¼Œä¸å†ä¼ æ’­ï¼Œå¯ä»¥ä½¿ç”¨äº‹ä»¶å¯¹è±¡çš„<code>stopPropagation</code>æ–¹æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// äº‹ä»¶ä¼ æ’­åˆ° p å…ƒç´ åï¼Œå°±ä¸å†å‘ä¸‹ä¼ æ’­äº†</span></span><br><span class="line">p.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">  event.<span class="title function_">stopPropagation</span>();</span><br><span class="line">&#125;, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// äº‹ä»¶å†’æ³¡åˆ° p å…ƒç´ åï¼Œå°±ä¸å†å‘ä¸Šå†’æ³¡äº†</span></span><br><span class="line">p.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">  event.<span class="title function_">stopPropagation</span>();</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>stopPropagation</code>æ–¹æ³•åˆ†åˆ«åœ¨æ•è·é˜¶æ®µå’Œå†’æ³¡é˜¶æ®µï¼Œé˜»æ­¢äº†äº‹ä»¶çš„ä¼ æ’­ã€‚</p><p>ä½†æ˜¯ï¼Œ<code>stopPropagation</code>æ–¹æ³•åªä¼šé˜»æ­¢äº‹ä»¶çš„ä¼ æ’­ï¼Œä¸ä¼šé˜»æ­¢è¯¥äº‹ä»¶è§¦å‘<code>&lt;p&gt;</code>èŠ‚ç‚¹çš„å…¶ä»–<code>click</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸æ˜¯å½»åº•å–æ¶ˆ<code>click</code>äº‹ä»¶ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">p.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">  event.<span class="title function_">stopPropagation</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">p.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="comment">// ä¼šè§¦å‘</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>p</code>å…ƒç´ ç»‘å®šäº†ä¸¤ä¸ª<code>click</code>äº‹ä»¶çš„ç›‘å¬å‡½æ•°ã€‚<code>stopPropagation</code>æ–¹æ³•åªèƒ½é˜»æ­¢è¿™ä¸ªäº‹ä»¶çš„ä¼ æ’­ï¼Œä¸èƒ½å–æ¶ˆè¿™ä¸ªäº‹ä»¶ï¼Œå› æ­¤ï¼Œç¬¬äºŒä¸ªç›‘å¬å‡½æ•°ä¼šè§¦å‘ã€‚è¾“å‡ºç»“æœä¼šå…ˆæ˜¯1ï¼Œç„¶åæ˜¯2ã€‚</p><p>å¦‚æœæƒ³è¦å½»åº•å–æ¶ˆè¯¥äº‹ä»¶ï¼Œä¸å†è§¦å‘åé¢æ‰€æœ‰<code>click</code>çš„ç›‘å¬å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨<code>stopImmediatePropagation</code>æ–¹æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">p.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">  event.<span class="title function_">stopImmediatePropagation</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">p.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="comment">// ä¸ä¼šè¢«è§¦å‘</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>stopImmediatePropagation</code>æ–¹æ³•å¯ä»¥å½»åº•å–æ¶ˆè¿™ä¸ªäº‹ä»¶ï¼Œä½¿å¾—åé¢ç»‘å®šçš„æ‰€æœ‰<code>click</code>ç›‘å¬å‡½æ•°éƒ½ä¸å†è§¦å‘ã€‚æ‰€ä»¥ï¼Œåªä¼šè¾“å‡º1ï¼Œä¸ä¼šè¾“å‡º2ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å­¦ä¹  </category>
          
          <category> å¾®ä¿¡å°ç¨‹åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> JavaScript </tag>
            
            <tag> å°ç¨‹åº </tag>
            
            <tag> WeChat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®° 03</title>
      <link href="/2021/09/01/8c49d765b54e-q1jun/"/>
      <url>/2021/09/01/8c49d765b54e-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®°-03"><a href="#å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®°-03" class="headerlink" title="å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®° 03"></a>å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®° 03</h1><h2 id="0x01-this-å…³é”®å­—"><a href="#0x01-this-å…³é”®å­—" class="headerlink" title="0x01 this å…³é”®å­—"></a>0x01 this å…³é”®å­—</h2><p><code>this</code>å…³é”®å­—æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„è¯­æ³•ç‚¹ã€‚æ¯«ä¸å¤¸å¼ åœ°è¯´ï¼Œä¸ç†è§£å®ƒçš„å«ä¹‰ï¼Œå¤§éƒ¨åˆ†å¼€å‘ä»»åŠ¡éƒ½æ— æ³•å®Œæˆã€‚</p><p>å‰ä¸€ç« å·²ç»æåˆ°ï¼Œ<code>this</code>å¯ä»¥ç”¨åœ¨æ„é€ å‡½æ•°ä¹‹ä¸­ï¼Œè¡¨ç¤ºå®ä¾‹å¯¹è±¡ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œ<code>this</code>è¿˜å¯ä»¥ç”¨åœ¨åˆ«çš„åœºåˆã€‚ä½†ä¸ç®¡æ˜¯ä»€ä¹ˆåœºåˆï¼Œ<code>this</code>éƒ½æœ‰ä¸€ä¸ªå…±åŒç‚¹ï¼šå®ƒæ€»æ˜¯è¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚</p><p>ç®€å•è¯´ï¼Œ<code>this</code>å°±æ˜¯å±æ€§æˆ–æ–¹æ³•â€œå½“å‰â€æ‰€åœ¨çš„å¯¹è±¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">property</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>this</code>å°±ä»£è¡¨<code>property</code>å±æ€§å½“å‰æ‰€åœ¨çš„å¯¹è±¡ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®é™…çš„ä¾‹å­ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line">  <span class="attr">describe</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;å§“åï¼š&#x27;</span>+ <span class="variable language_">this</span>.<span class="property">name</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">person.<span class="title function_">describe</span>()</span><br><span class="line"><span class="comment">// &quot;å§“åï¼šå¼ ä¸‰&quot;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>this.name</code>è¡¨ç¤º<code>name</code>å±æ€§æ‰€åœ¨çš„é‚£ä¸ªå¯¹è±¡ã€‚ç”±äº<code>this.name</code>æ˜¯åœ¨<code>describe</code>æ–¹æ³•ä¸­è°ƒç”¨ï¼Œè€Œ<code>describe</code>æ–¹æ³•æ‰€åœ¨çš„å½“å‰å¯¹è±¡æ˜¯<code>person</code>ï¼Œå› æ­¤<code>this</code>æŒ‡å‘<code>person</code>ï¼Œ<code>this.name</code>å°±æ˜¯<code>person.name</code>ã€‚</p><p>ç”±äºå¯¹è±¡çš„å±æ€§å¯ä»¥èµ‹ç»™å¦ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥å±æ€§æ‰€åœ¨çš„å½“å‰å¯¹è±¡æ˜¯å¯å˜çš„ï¼Œå³<code>this</code>çš„æŒ‡å‘æ˜¯å¯å˜çš„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> A = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line">  <span class="attr">describe</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;å§“åï¼š&#x27;</span>+ <span class="variable language_">this</span>.<span class="property">name</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> B = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;æå››&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">B.<span class="property">describe</span> = A.<span class="property">describe</span>;</span><br><span class="line">B.<span class="title function_">describe</span>()</span><br><span class="line"><span class="comment">// &quot;å§“åï¼šæå››&quot;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>A.describe</code>å±æ€§è¢«èµ‹ç»™<code>B</code>ï¼Œäºæ˜¯<code>B.describe</code>å°±è¡¨ç¤º<code>describe</code>æ–¹æ³•æ‰€åœ¨çš„å½“å‰å¯¹è±¡æ˜¯<code>B</code>ï¼Œæ‰€ä»¥<code>this.name</code>å°±æŒ‡å‘<code>B.name</code>ã€‚</p><p>ç¨ç¨é‡æ„è¿™ä¸ªä¾‹å­ï¼Œ<code>this</code>çš„åŠ¨æ€æŒ‡å‘å°±èƒ½çœ‹å¾—æ›´æ¸…æ¥šã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;å§“åï¼š&#x27;</span>+ <span class="variable language_">this</span>.<span class="property">name</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> A = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line">  <span class="attr">describe</span>: f</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> B = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;æå››&#x27;</span>,</span><br><span class="line">  <span class="attr">describe</span>: f</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">A.<span class="title function_">describe</span>() <span class="comment">// &quot;å§“åï¼šå¼ ä¸‰&quot;</span></span><br><span class="line">B.<span class="title function_">describe</span>() <span class="comment">// &quot;å§“åï¼šæå››&quot;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°<code>f</code>å†…éƒ¨ä½¿ç”¨äº†<code>this</code>å…³é”®å­—ï¼Œéšç€<code>f</code>æ‰€åœ¨çš„å¯¹è±¡ä¸åŒï¼Œ<code>this</code>çš„æŒ‡å‘ä¹Ÿä¸åŒã€‚</p><p>åªè¦å‡½æ•°è¢«èµ‹ç»™å¦ä¸€ä¸ªå˜é‡ï¼Œ<code>this</code>çš„æŒ‡å‘å°±ä¼šå˜ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">size</span>=<span class="string">3</span> <span class="attr">onChange</span>=<span class="string">&quot;validate(this, 18, 99);&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">validate</span>(<span class="params">obj, lowval, hival</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">if</span> ((obj.<span class="property">value</span> &lt; lowval) || (obj.<span class="property">value</span> &gt; hival))</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Invalid Value!&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç æ˜¯ä¸€ä¸ªæ–‡æœ¬è¾“å…¥æ¡†ï¼Œæ¯å½“ç”¨æˆ·è¾“å…¥ä¸€ä¸ªå€¼ï¼Œå°±ä¼šè°ƒç”¨<code>onChange</code>å›è°ƒå‡½æ•°ï¼ŒéªŒè¯è¿™ä¸ªå€¼æ˜¯å¦åœ¨æŒ‡å®šèŒƒå›´ã€‚æµè§ˆå™¨ä¼šå‘å›è°ƒå‡½æ•°ä¼ å…¥å½“å‰å¯¹è±¡ï¼Œå› æ­¤<code>this</code>å°±ä»£è¡¨ä¼ å…¥å½“å‰å¯¹è±¡ï¼ˆå³æ–‡æœ¬æ¡†ï¼‰ï¼Œç„¶åå°±å¯ä»¥ä»<code>this.value</code>ä¸Šé¢è¯»åˆ°ç”¨æˆ·çš„è¾“å…¥å€¼ã€‚</p><p>æ€»ç»“ä¸€ä¸‹ï¼ŒJavaScript è¯­è¨€ä¹‹ä¸­ï¼Œä¸€åˆ‡çš†å¯¹è±¡ï¼Œè¿è¡Œç¯å¢ƒä¹Ÿæ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥å‡½æ•°éƒ½æ˜¯åœ¨æŸä¸ªå¯¹è±¡ä¹‹ä¸­è¿è¡Œï¼Œ<code>this</code>å°±æ˜¯å‡½æ•°è¿è¡Œæ—¶æ‰€åœ¨çš„å¯¹è±¡ï¼ˆç¯å¢ƒï¼‰ã€‚è¿™æœ¬æ¥å¹¶ä¸ä¼šè®©ç”¨æˆ·ç³Šæ¶‚ï¼Œä½†æ˜¯ JavaScript æ”¯æŒè¿è¡Œç¯å¢ƒåŠ¨æ€åˆ‡æ¢ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>this</code>çš„æŒ‡å‘æ˜¯åŠ¨æ€çš„ï¼Œæ²¡æœ‰åŠæ³•äº‹å…ˆç¡®å®šåˆ°åº•æŒ‡å‘å“ªä¸ªå¯¹è±¡ï¼Œè¿™æ‰æ˜¯æœ€è®©åˆå­¦è€…æ„Ÿåˆ°å›°æƒ‘çš„åœ°æ–¹ã€‚</p><h3 id="0x0101-thisçš„å®è´¨"><a href="#0x0101-thisçš„å®è´¨" class="headerlink" title="0x0101 thisçš„å®è´¨"></a>0x0101 thisçš„å®è´¨</h3><p>JavaScript è¯­è¨€ä¹‹æ‰€ä»¥æœ‰ this çš„è®¾è®¡ï¼Œè·Ÿå†…å­˜é‡Œé¢çš„æ•°æ®ç»“æ„æœ‰å…³ç³»ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">foo</span>:  <span class="number">5</span> &#125;;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç å°†ä¸€ä¸ªå¯¹è±¡èµ‹å€¼ç»™å˜é‡<code>obj</code>ã€‚JavaScript å¼•æ“ä¼šå…ˆåœ¨å†…å­˜é‡Œé¢ï¼Œç”Ÿæˆä¸€ä¸ªå¯¹è±¡<code>&#123; foo: 5 &#125;</code>ï¼Œç„¶åæŠŠè¿™ä¸ªå¯¹è±¡çš„å†…å­˜åœ°å€èµ‹å€¼ç»™å˜é‡<code>obj</code>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå˜é‡<code>obj</code>æ˜¯ä¸€ä¸ªåœ°å€ï¼ˆreferenceï¼‰ã€‚åé¢å¦‚æœè¦è¯»å–<code>obj.foo</code>ï¼Œå¼•æ“å…ˆä»<code>obj</code>æ‹¿åˆ°å†…å­˜åœ°å€ï¼Œç„¶åå†ä»è¯¥åœ°å€è¯»å‡ºåŸå§‹çš„å¯¹è±¡ï¼Œè¿”å›å®ƒçš„<code>foo</code>å±æ€§ã€‚</p><p>åŸå§‹çš„å¯¹è±¡ä»¥å­—å…¸ç»“æ„ä¿å­˜ï¼Œæ¯ä¸€ä¸ªå±æ€§åéƒ½å¯¹åº”ä¸€ä¸ªå±æ€§æè¿°å¯¹è±¡ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œä¸Šé¢ä¾‹å­çš„<code>foo</code>å±æ€§ï¼Œå®é™…ä¸Šæ˜¯ä»¥ä¸‹é¢çš„å½¢å¼ä¿å­˜çš„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">foo</span>: &#123;</span><br><span class="line">    [[value]]: <span class="number">5</span></span><br><span class="line">    [[writable]]: <span class="literal">true</span></span><br><span class="line">    [[enumerable]]: <span class="literal">true</span></span><br><span class="line">    [[configurable]]: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œ<code>foo</code>å±æ€§çš„å€¼ä¿å­˜åœ¨å±æ€§æè¿°å¯¹è±¡çš„<code>value</code>å±æ€§é‡Œé¢ã€‚</p><p>è¿™æ ·çš„ç»“æ„æ˜¯å¾ˆæ¸…æ™°çš„ï¼Œé—®é¢˜åœ¨äºå±æ€§çš„å€¼å¯èƒ½æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">foo</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;&#125; &#125;;</span><br></pre></td></tr></table></figure><p>è¿™æ—¶ï¼Œå¼•æ“ä¼šå°†å‡½æ•°å•ç‹¬ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œç„¶åå†å°†å‡½æ•°çš„åœ°å€èµ‹å€¼ç»™<code>foo</code>å±æ€§çš„<code>value</code>å±æ€§ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">foo</span>: &#123;</span><br><span class="line">    [[value]]: å‡½æ•°çš„åœ°å€</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±äºå‡½æ•°æ˜¯ä¸€ä¸ªå•ç‹¬çš„å€¼ï¼Œæ‰€ä»¥å®ƒå¯ä»¥åœ¨ä¸åŒçš„ç¯å¢ƒï¼ˆä¸Šä¸‹æ–‡ï¼‰æ‰§è¡Œã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">f</span>: f &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å•ç‹¬æ‰§è¡Œ</span></span><br><span class="line"><span class="title function_">f</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// obj ç¯å¢ƒæ‰§è¡Œ</span></span><br><span class="line">obj.<span class="title function_">f</span>()</span><br></pre></td></tr></table></figure><p>JavaScript å…è®¸åœ¨å‡½æ•°ä½“å†…éƒ¨ï¼Œå¼•ç”¨å½“å‰ç¯å¢ƒçš„å…¶ä»–å˜é‡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(x);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°ä½“é‡Œé¢ä½¿ç”¨äº†å˜é‡<code>x</code>ã€‚è¯¥å˜é‡ç”±è¿è¡Œç¯å¢ƒæä¾›ã€‚</p><p>ç°åœ¨é—®é¢˜å°±æ¥äº†ï¼Œç”±äºå‡½æ•°å¯ä»¥åœ¨ä¸åŒçš„è¿è¡Œç¯å¢ƒæ‰§è¡Œï¼Œæ‰€ä»¥éœ€è¦æœ‰ä¸€ç§æœºåˆ¶ï¼Œèƒ½å¤Ÿåœ¨å‡½æ•°ä½“å†…éƒ¨è·å¾—å½“å‰çš„è¿è¡Œç¯å¢ƒï¼ˆcontextï¼‰ã€‚æ‰€ä»¥ï¼Œ<code>this</code>å°±å‡ºç°äº†ï¼Œå®ƒçš„è®¾è®¡ç›®çš„å°±æ˜¯åœ¨å‡½æ•°ä½“å†…éƒ¨ï¼ŒæŒ‡ä»£å‡½æ•°å½“å‰çš„è¿è¡Œç¯å¢ƒã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">x</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°ä½“é‡Œé¢çš„<code>this.x</code>å°±æ˜¯æŒ‡å½“å‰è¿è¡Œç¯å¢ƒçš„<code>x</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">x</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">f</span>: f,</span><br><span class="line">  <span class="attr">x</span>: <span class="number">2</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å•ç‹¬æ‰§è¡Œ</span></span><br><span class="line"><span class="title function_">f</span>() <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// obj ç¯å¢ƒæ‰§è¡Œ</span></span><br><span class="line">obj.<span class="title function_">f</span>() <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°<code>f</code>åœ¨å…¨å±€ç¯å¢ƒæ‰§è¡Œï¼Œ<code>this.x</code>æŒ‡å‘å…¨å±€ç¯å¢ƒçš„<code>x</code>ï¼›åœ¨<code>obj</code>ç¯å¢ƒæ‰§è¡Œï¼Œ<code>this.x</code>æŒ‡å‘<code>obj.x</code>ã€‚</p><h3 id="0x0102-thisçš„ä½¿ç”¨åœºåˆ"><a href="#0x0102-thisçš„ä½¿ç”¨åœºåˆ" class="headerlink" title="0x0102 thisçš„ä½¿ç”¨åœºåˆ"></a>0x0102 thisçš„ä½¿ç”¨åœºåˆ</h3><p><code>this</code>ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªä½¿ç”¨åœºåˆã€‚</p><p><strong>ï¼ˆ1ï¼‰å…¨å±€ç¯å¢ƒ</strong></p><p>å…¨å±€ç¯å¢ƒä½¿ç”¨<code>this</code>ï¼Œå®ƒæŒ‡çš„å°±æ˜¯é¡¶å±‚å¯¹è±¡<code>window</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span> === <span class="variable language_">window</span> <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span> === <span class="variable language_">window</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">f</span>() <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç è¯´æ˜ï¼Œä¸ç®¡æ˜¯ä¸æ˜¯åœ¨å‡½æ•°å†…éƒ¨ï¼Œåªè¦æ˜¯åœ¨å…¨å±€ç¯å¢ƒä¸‹è¿è¡Œï¼Œ<code>this</code>å°±æ˜¯æŒ‡é¡¶å±‚å¯¹è±¡<code>window</code>ã€‚</p><p><strong>ï¼ˆ2ï¼‰æ„é€ å‡½æ•°</strong></p><p>æ„é€ å‡½æ•°ä¸­çš„<code>this</code>ï¼ŒæŒ‡çš„æ˜¯å®ä¾‹å¯¹è±¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">Obj</span> = <span class="keyword">function</span> (<span class="params">p</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">p</span> = p;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç å®šä¹‰äº†ä¸€ä¸ªæ„é€ å‡½æ•°<code>Obj</code>ã€‚ç”±äº<code>this</code>æŒ‡å‘å®ä¾‹å¯¹è±¡ï¼Œæ‰€ä»¥åœ¨æ„é€ å‡½æ•°å†…éƒ¨å®šä¹‰<code>this.p</code>ï¼Œå°±ç›¸å½“äºå®šä¹‰å®ä¾‹å¯¹è±¡æœ‰ä¸€ä¸ª<code>p</code>å±æ€§ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="title class_">Obj</span>(<span class="string">&#x27;Hello World!&#x27;</span>);</span><br><span class="line">o.<span class="property">p</span> <span class="comment">// &quot;Hello World!&quot;</span></span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ3ï¼‰å¯¹è±¡çš„æ–¹æ³•</strong></p><p>å¦‚æœå¯¹è±¡çš„æ–¹æ³•é‡Œé¢åŒ…å«<code>this</code>ï¼Œ<code>this</code>çš„æŒ‡å‘å°±æ˜¯æ–¹æ³•è¿è¡Œæ—¶æ‰€åœ¨çš„å¯¹è±¡ã€‚è¯¥æ–¹æ³•èµ‹å€¼ç»™å¦ä¸€ä¸ªå¯¹è±¡ï¼Œå°±ä¼šæ”¹å˜<code>this</code>çš„æŒ‡å‘ã€‚</p><p>ä½†æ˜¯ï¼Œè¿™æ¡è§„åˆ™å¾ˆä¸å®¹æ˜“æŠŠæ¡ã€‚è¯·çœ‹ä¸‹é¢çš„ä»£ç ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj =&#123;</span><br><span class="line">  <span class="attr">foo</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj.<span class="title function_">foo</span>() <span class="comment">// obj</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>obj.foo</code>æ–¹æ³•æ‰§è¡Œæ—¶ï¼Œå®ƒå†…éƒ¨çš„<code>this</code>æŒ‡å‘<code>obj</code>ã€‚</p><p>ä½†æ˜¯ï¼Œä¸‹é¢è¿™å‡ ç§ç”¨æ³•ï¼Œéƒ½ä¼šæ”¹å˜<code>this</code>çš„æŒ‡å‘ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æƒ…å†µä¸€</span></span><br><span class="line">(obj.<span class="property">foo</span> = obj.<span class="property">foo</span>)() <span class="comment">// window</span></span><br><span class="line"><span class="comment">// æƒ…å†µäºŒ</span></span><br><span class="line">(<span class="literal">false</span> || obj.<span class="property">foo</span>)() <span class="comment">// window</span></span><br><span class="line"><span class="comment">// æƒ…å†µä¸‰</span></span><br><span class="line">(<span class="number">1</span>, obj.<span class="property">foo</span>)() <span class="comment">// window</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>obj.foo</code>å°±æ˜¯ä¸€ä¸ªå€¼ã€‚è¿™ä¸ªå€¼çœŸæ­£è°ƒç”¨çš„æ—¶å€™ï¼Œè¿è¡Œç¯å¢ƒå·²ç»ä¸æ˜¯<code>obj</code>äº†ï¼Œè€Œæ˜¯å…¨å±€ç¯å¢ƒï¼Œæ‰€ä»¥<code>this</code>ä¸å†æŒ‡å‘<code>obj</code>ã€‚</p><p>å¯ä»¥è¿™æ ·ç†è§£ï¼ŒJavaScript å¼•æ“å†…éƒ¨ï¼Œ<code>obj</code>å’Œ<code>obj.foo</code>å‚¨å­˜åœ¨ä¸¤ä¸ªå†…å­˜åœ°å€ï¼Œç§°ä¸ºåœ°å€ä¸€å’Œåœ°å€äºŒã€‚<code>obj.foo()</code>è¿™æ ·è°ƒç”¨æ—¶ï¼Œæ˜¯ä»åœ°å€ä¸€è°ƒç”¨åœ°å€äºŒï¼Œå› æ­¤åœ°å€äºŒçš„è¿è¡Œç¯å¢ƒæ˜¯åœ°å€ä¸€ï¼Œ<code>this</code>æŒ‡å‘<code>obj</code>ã€‚ä½†æ˜¯ï¼Œä¸Šé¢ä¸‰ç§æƒ…å†µï¼Œéƒ½æ˜¯ç›´æ¥å–å‡ºåœ°å€äºŒè¿›è¡Œè°ƒç”¨ï¼Œè¿™æ ·çš„è¯ï¼Œè¿è¡Œç¯å¢ƒå°±æ˜¯å…¨å±€ç¯å¢ƒï¼Œå› æ­¤<code>this</code>æŒ‡å‘å…¨å±€ç¯å¢ƒã€‚ä¸Šé¢ä¸‰ç§æƒ…å†µç­‰åŒäºä¸‹é¢çš„ä»£ç ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æƒ…å†µä¸€</span></span><br><span class="line">(obj.<span class="property">foo</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">&#125;)()</span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="comment">// æƒ…å†µäºŒ</span></span><br><span class="line">(<span class="literal">false</span> || <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="comment">// æƒ…å†µä¸‰</span></span><br><span class="line">(<span class="number">1</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure><p>å¦‚æœ<code>this</code>æ‰€åœ¨çš„æ–¹æ³•ä¸åœ¨å¯¹è±¡çš„ç¬¬ä¸€å±‚ï¼Œè¿™æ—¶<code>this</code>åªæ˜¯æŒ‡å‘å½“å‰ä¸€å±‚çš„å¯¹è±¡ï¼Œè€Œä¸ä¼šç»§æ‰¿æ›´ä¸Šé¢çš„å±‚ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">  <span class="attr">p</span>: <span class="string">&#x27;Hello&#x27;</span>,</span><br><span class="line">  <span class="attr">b</span>: &#123;</span><br><span class="line">    <span class="attr">m</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">p</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">a.<span class="property">b</span>.<span class="title function_">m</span>() <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>a.b.m</code>æ–¹æ³•åœ¨<code>a</code>å¯¹è±¡çš„ç¬¬äºŒå±‚ï¼Œè¯¥æ–¹æ³•å†…éƒ¨çš„<code>this</code>ä¸æ˜¯æŒ‡å‘<code>a</code>ï¼Œè€Œæ˜¯æŒ‡å‘<code>a.b</code>ï¼Œå› ä¸ºå®é™…æ‰§è¡Œçš„æ˜¯ä¸‹é¢çš„ä»£ç ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b = &#123;</span><br><span class="line">  <span class="attr">m</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">p</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">  <span class="attr">p</span>: <span class="string">&#x27;Hello&#x27;</span>,</span><br><span class="line">  <span class="attr">b</span>: b</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">(a.<span class="property">b</span>).<span class="title function_">m</span>() <span class="comment">// ç­‰åŒäº b.m()</span></span><br></pre></td></tr></table></figure><p>å¦‚æœè¦è¾¾åˆ°é¢„æœŸæ•ˆæœï¼Œåªæœ‰å†™æˆä¸‹é¢è¿™æ ·ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">  <span class="attr">b</span>: &#123;</span><br><span class="line">    <span class="attr">m</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">p</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">p</span>: <span class="string">&#x27;Hello&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å¦‚æœè¿™æ—¶å°†åµŒå¥—å¯¹è±¡å†…éƒ¨çš„æ–¹æ³•èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œ<code>this</code>ä¾ç„¶ä¼šæŒ‡å‘å…¨å±€å¯¹è±¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = &#123;</span><br><span class="line">  <span class="attr">b</span>: &#123;</span><br><span class="line">    <span class="attr">m</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">p</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">p</span>: <span class="string">&#x27;Hello&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> hello = a.<span class="property">b</span>.<span class="property">m</span>;</span><br><span class="line"><span class="title function_">hello</span>() <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>m</code>æ˜¯å¤šå±‚å¯¹è±¡å†…éƒ¨çš„ä¸€ä¸ªæ–¹æ³•ã€‚ä¸ºæ±‚ç®€ä¾¿ï¼Œå°†å…¶èµ‹å€¼ç»™<code>hello</code>å˜é‡ï¼Œç»“æœè°ƒç”¨æ—¶ï¼Œ<code>this</code>æŒ‡å‘äº†é¡¶å±‚å¯¹è±¡ã€‚ä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥åªå°†<code>m</code>æ‰€åœ¨çš„å¯¹è±¡èµ‹å€¼ç»™<code>hello</code>ï¼Œè¿™æ ·è°ƒç”¨æ—¶ï¼Œ<code>this</code>çš„æŒ‡å‘å°±ä¸ä¼šå˜ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> hello = a.<span class="property">b</span>;</span><br><span class="line">hello.<span class="title function_">m</span>() <span class="comment">// Hello</span></span><br></pre></td></tr></table></figure><h3 id="0x0103-thisçš„ä½¿ç”¨æ³¨æ„äº‹é¡¹"><a href="#0x0103-thisçš„ä½¿ç”¨æ³¨æ„äº‹é¡¹" class="headerlink" title="0x0103 thisçš„ä½¿ç”¨æ³¨æ„äº‹é¡¹"></a>0x0103 thisçš„ä½¿ç”¨æ³¨æ„äº‹é¡¹</h3><h4 id="0x010301-é¿å…å¤šå±‚-this"><a href="#0x010301-é¿å…å¤šå±‚-this" class="headerlink" title="0x010301 é¿å…å¤šå±‚ this"></a>0x010301 é¿å…å¤šå±‚ this</h4><p>ç”±äº<code>this</code>çš„æŒ‡å‘æ˜¯ä¸ç¡®å®šçš„ï¼Œæ‰€ä»¥åˆ‡å‹¿åœ¨å‡½æ•°ä¸­åŒ…å«å¤šå±‚çš„<code>this</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">  <span class="attr">f1</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">    <span class="keyword">var</span> f2 = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">    &#125;();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">o.<span class="title function_">f1</span>()</span><br><span class="line"><span class="comment">// Object</span></span><br><span class="line"><span class="comment">// Window</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç åŒ…å«ä¸¤å±‚<code>this</code>ï¼Œç»“æœè¿è¡Œåï¼Œç¬¬ä¸€å±‚æŒ‡å‘å¯¹è±¡<code>o</code>ï¼Œç¬¬äºŒå±‚æŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œå› ä¸ºå®é™…æ‰§è¡Œçš„æ˜¯ä¸‹é¢çš„ä»£ç ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> temp = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">  <span class="attr">f1</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">    <span class="keyword">var</span> f2 = <span class="title function_">temp</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªè§£å†³æ–¹æ³•æ˜¯åœ¨ç¬¬äºŒå±‚æ”¹ç”¨ä¸€ä¸ªæŒ‡å‘å¤–å±‚<code>this</code>çš„å˜é‡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">  <span class="attr">f1</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">    <span class="keyword">var</span> that = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="keyword">var</span> f2 = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(that);</span><br><span class="line">    &#125;();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">o.<span class="title function_">f1</span>()</span><br><span class="line"><span class="comment">// Object</span></span><br><span class="line"><span class="comment">// Object</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç å®šä¹‰äº†å˜é‡<code>that</code>ï¼Œå›ºå®šæŒ‡å‘å¤–å±‚çš„<code>this</code>ï¼Œç„¶ååœ¨å†…å±‚ä½¿ç”¨<code>that</code>ï¼Œå°±ä¸ä¼šå‘ç”Ÿ<code>this</code>æŒ‡å‘çš„æ”¹å˜ã€‚</p><p>äº‹å®ä¸Šï¼Œä½¿ç”¨ä¸€ä¸ªå˜é‡å›ºå®š<code>this</code>çš„å€¼ï¼Œç„¶åå†…å±‚å‡½æ•°è°ƒç”¨è¿™ä¸ªå˜é‡ï¼Œæ˜¯éå¸¸å¸¸è§çš„åšæ³•ï¼Œè¯·åŠ¡å¿…æŒæ¡ã€‚</p><p>JavaScript æä¾›äº†ä¸¥æ ¼æ¨¡å¼ï¼Œä¹Ÿå¯ä»¥ç¡¬æ€§é¿å…è¿™ç§é—®é¢˜ã€‚ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå¦‚æœå‡½æ•°å†…éƒ¨çš„<code>this</code>æŒ‡å‘é¡¶å±‚å¯¹è±¡ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> counter = &#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">&#125;;</span><br><span class="line">counter.<span class="property">inc</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="string">&#x27;use strict&#x27;</span>;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">count</span>++</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> f = counter.<span class="property">inc</span>;</span><br><span class="line"><span class="title function_">f</span>()</span><br><span class="line"><span class="comment">// TypeError: Cannot read property &#x27;count&#x27; of undefined</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>inc</code>æ–¹æ³•é€šè¿‡<code>&#39;use strict&#39;</code>å£°æ˜é‡‡ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œè¿™æ—¶å†…éƒ¨çš„<code>this</code>ä¸€æ—¦æŒ‡å‘é¡¶å±‚å¯¹è±¡ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p><h4 id="0x010302-é¿å…æ•°ç»„å¤„ç†æ–¹æ³•ä¸­çš„this"><a href="#0x010302-é¿å…æ•°ç»„å¤„ç†æ–¹æ³•ä¸­çš„this" class="headerlink" title="0x010302 é¿å…æ•°ç»„å¤„ç†æ–¹æ³•ä¸­çš„this"></a>0x010302 é¿å…æ•°ç»„å¤„ç†æ–¹æ³•ä¸­çš„this</h4><p>æ•°ç»„çš„<code>map</code>å’Œ<code>foreach</code>æ–¹æ³•ï¼Œå…è®¸æä¾›ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ã€‚è¿™ä¸ªå‡½æ•°å†…éƒ¨ä¸åº”è¯¥ä½¿ç”¨<code>this</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">  <span class="attr">v</span>: <span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">  <span class="attr">p</span>: [ <span class="string">&#x27;a1&#x27;</span>, <span class="string">&#x27;a2&#x27;</span> ],</span><br><span class="line">  <span class="attr">f</span>: <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">p</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">item</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">v</span> + <span class="string">&#x27; &#x27;</span> + item);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">o.<span class="title function_">f</span>()</span><br><span class="line"><span class="comment">// undefined a1</span></span><br><span class="line"><span class="comment">// undefined a2</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>foreach</code>æ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸­çš„<code>this</code>ï¼Œå…¶å®æ˜¯æŒ‡å‘<code>window</code>å¯¹è±¡ï¼Œå› æ­¤å–ä¸åˆ°<code>o.v</code>çš„å€¼ã€‚åŸå› è·Ÿä¸Šä¸€æ®µçš„å¤šå±‚<code>this</code>æ˜¯ä¸€æ ·çš„ï¼Œå°±æ˜¯å†…å±‚çš„<code>this</code>ä¸æŒ‡å‘å¤–éƒ¨ï¼Œè€ŒæŒ‡å‘é¡¶å±‚å¯¹è±¡ã€‚</p><p>è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ç§æ–¹æ³•ï¼Œå°±æ˜¯å‰é¢æåˆ°çš„ï¼Œä½¿ç”¨ä¸­é—´å˜é‡å›ºå®š<code>this</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">  <span class="attr">v</span>: <span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">  <span class="attr">p</span>: [ <span class="string">&#x27;a1&#x27;</span>, <span class="string">&#x27;a2&#x27;</span> ],</span><br><span class="line">  <span class="attr">f</span>: <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">p</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">item</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(that.<span class="property">v</span>+<span class="string">&#x27; &#x27;</span>+item);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">o.<span class="title function_">f</span>()</span><br><span class="line"><span class="comment">// hello a1</span></span><br><span class="line"><span class="comment">// hello a2</span></span><br></pre></td></tr></table></figure><p>å¦ä¸€ç§æ–¹æ³•æ˜¯å°†<code>this</code>å½“ä½œ<code>foreach</code>æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå›ºå®šå®ƒçš„è¿è¡Œç¯å¢ƒã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">  <span class="attr">v</span>: <span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">  <span class="attr">p</span>: [ <span class="string">&#x27;a1&#x27;</span>, <span class="string">&#x27;a2&#x27;</span> ],</span><br><span class="line">  <span class="attr">f</span>: <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">p</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">item</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">v</span> + <span class="string">&#x27; &#x27;</span> + item);</span><br><span class="line">    &#125;, <span class="variable language_">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">o.<span class="title function_">f</span>()</span><br><span class="line"><span class="comment">// hello a1</span></span><br><span class="line"><span class="comment">// hello a2</span></span><br></pre></td></tr></table></figure><h4 id="0x010303-é¿å…å›è°ƒå‡½æ•°ä¸­çš„this"><a href="#0x010303-é¿å…å›è°ƒå‡½æ•°ä¸­çš„this" class="headerlink" title="0x010303 é¿å…å›è°ƒå‡½æ•°ä¸­çš„this"></a>0x010303 é¿å…å›è°ƒå‡½æ•°ä¸­çš„this</h4><p>å›è°ƒå‡½æ•°ä¸­çš„<code>this</code>å¾€å¾€ä¼šæ”¹å˜æŒ‡å‘ï¼Œæœ€å¥½é¿å…ä½¿ç”¨ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">o.<span class="property">f</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span> === o);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// jQuery çš„å†™æ³•</span></span><br><span class="line">$(<span class="string">&#x27;#button&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, o.<span class="property">f</span>);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œç‚¹å‡»æŒ‰é’®ä»¥åï¼Œæ§åˆ¶å°ä¼šæ˜¾ç¤º<code>false</code>ã€‚åŸå› æ˜¯æ­¤æ—¶<code>this</code>ä¸å†æŒ‡å‘<code>o</code>å¯¹è±¡ï¼Œè€Œæ˜¯æŒ‡å‘æŒ‰é’®çš„ DOM å¯¹è±¡ï¼Œå› ä¸º<code>f</code>æ–¹æ³•æ˜¯åœ¨æŒ‰é’®å¯¹è±¡çš„ç¯å¢ƒä¸­è¢«è°ƒç”¨çš„ã€‚è¿™ç§ç»†å¾®çš„å·®åˆ«ï¼Œå¾ˆå®¹æ˜“åœ¨ç¼–ç¨‹ä¸­å¿½è§†ï¼Œå¯¼è‡´éš¾ä»¥å¯Ÿè§‰çš„é”™è¯¯ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥é‡‡ç”¨ä¸‹é¢çš„ä¸€äº›æ–¹æ³•å¯¹<code>this</code>è¿›è¡Œç»‘å®šï¼Œä¹Ÿå°±æ˜¯ä½¿å¾—<code>this</code>å›ºå®šæŒ‡å‘æŸä¸ªå¯¹è±¡ï¼Œå‡å°‘ä¸ç¡®å®šæ€§ã€‚</p><h3 id="0x0104-ç»‘å®šthisçš„æ–¹æ³•"><a href="#0x0104-ç»‘å®šthisçš„æ–¹æ³•" class="headerlink" title="0x0104 ç»‘å®šthisçš„æ–¹æ³•"></a>0x0104 ç»‘å®šthisçš„æ–¹æ³•</h3><p><code>this</code>çš„åŠ¨æ€åˆ‡æ¢ï¼Œå›ºç„¶ä¸º JavaScript åˆ›é€ äº†å·¨å¤§çš„çµæ´»æ€§ï¼Œä½†ä¹Ÿä½¿å¾—ç¼–ç¨‹å˜å¾—å›°éš¾å’Œæ¨¡ç³Šã€‚æœ‰æ—¶ï¼Œéœ€è¦æŠŠ<code>this</code>å›ºå®šä¸‹æ¥ï¼Œé¿å…å‡ºç°æ„æƒ³ä¸åˆ°çš„æƒ…å†µã€‚JavaScript æä¾›äº†<code>call</code>ã€<code>apply</code>ã€<code>bind</code>è¿™ä¸‰ä¸ªæ–¹æ³•ï¼Œæ¥åˆ‡æ¢&#x2F;å›ºå®š<code>this</code>çš„æŒ‡å‘ã€‚</p><h4 id="0x010401-Function-prototype-call"><a href="#0x010401-Function-prototype-call" class="headerlink" title="0x010401 Function.prototype.call()"></a>0x010401 Function.prototype.call()</h4><p>å‡½æ•°å®ä¾‹çš„<code>call</code>æ–¹æ³•ï¼Œå¯ä»¥æŒ‡å®šå‡½æ•°å†…éƒ¨<code>this</code>çš„æŒ‡å‘ï¼ˆå³å‡½æ•°æ‰§è¡Œæ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸï¼‰ï¼Œç„¶ååœ¨æ‰€æŒ‡å®šçš„ä½œç”¨åŸŸä¸­ï¼Œè°ƒç”¨è¯¥å‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">this</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">f</span>() === <span class="variable language_">window</span> <span class="comment">// true</span></span><br><span class="line">f.<span class="title function_">call</span>(obj) === obj <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå…¨å±€ç¯å¢ƒè¿è¡Œå‡½æ•°<code>f</code>æ—¶ï¼Œ<code>this</code>æŒ‡å‘å…¨å±€ç¯å¢ƒï¼ˆæµè§ˆå™¨ä¸º<code>window</code>å¯¹è±¡ï¼‰ï¼›<code>call</code>æ–¹æ³•å¯ä»¥æ”¹å˜<code>this</code>çš„æŒ‡å‘ï¼ŒæŒ‡å®š<code>this</code>æŒ‡å‘å¯¹è±¡<code>obj</code>ï¼Œç„¶ååœ¨å¯¹è±¡<code>obj</code>çš„ä½œç”¨åŸŸä¸­è¿è¡Œå‡½æ•°<code>f</code>ã€‚</p><p><code>call</code>æ–¹æ³•çš„å‚æ•°ï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚å¦‚æœå‚æ•°ä¸ºç©ºã€<code>null</code>å’Œ<code>undefined</code>ï¼Œåˆ™é»˜è®¤ä¼ å…¥å…¨å±€å¯¹è±¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> n = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">n</span>: <span class="number">456</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">n</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a.<span class="title function_">call</span>() <span class="comment">// 123</span></span><br><span class="line">a.<span class="title function_">call</span>(<span class="literal">null</span>) <span class="comment">// 123</span></span><br><span class="line">a.<span class="title function_">call</span>(<span class="literal">undefined</span>) <span class="comment">// 123</span></span><br><span class="line">a.<span class="title function_">call</span>(<span class="variable language_">window</span>) <span class="comment">// 123</span></span><br><span class="line">a.<span class="title function_">call</span>(obj) <span class="comment">// 456</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>a</code>å‡½æ•°ä¸­çš„<code>this</code>å…³é”®å­—ï¼Œå¦‚æœæŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œè¿”å›ç»“æœä¸º<code>123</code>ã€‚å¦‚æœä½¿ç”¨<code>call</code>æ–¹æ³•å°†<code>this</code>å…³é”®å­—æŒ‡å‘<code>obj</code>å¯¹è±¡ï¼Œè¿”å›ç»“æœä¸º<code>456</code>ã€‚å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœ<code>call</code>æ–¹æ³•æ²¡æœ‰å‚æ•°ï¼Œæˆ–è€…å‚æ•°ä¸º<code>null</code>æˆ–<code>undefined</code>ï¼Œåˆ™ç­‰åŒäºæŒ‡å‘å…¨å±€å¯¹è±¡ã€‚</p><p>å¦‚æœ<code>call</code>æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªåŸå§‹å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªåŸå§‹å€¼ä¼šè‡ªåŠ¨è½¬æˆå¯¹åº”çš„åŒ…è£…å¯¹è±¡ï¼Œç„¶åä¼ å…¥<code>call</code>æ–¹æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">this</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">f.<span class="title function_">call</span>(<span class="number">5</span>)</span><br><span class="line"><span class="comment">// Number &#123;[[PrimitiveValue]]: 5&#125;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>call</code>çš„å‚æ•°ä¸º<code>5</code>ï¼Œä¸æ˜¯å¯¹è±¡ï¼Œä¼šè¢«è‡ªåŠ¨è½¬æˆåŒ…è£…å¯¹è±¡ï¼ˆ<code>Number</code>çš„å®ä¾‹ï¼‰ï¼Œç»‘å®š<code>f</code>å†…éƒ¨çš„<code>this</code>ã€‚</p><p><code>call</code>æ–¹æ³•è¿˜å¯ä»¥æ¥å—å¤šä¸ªå‚æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func.<span class="title function_">call</span>(thisValue, arg1, arg2, ...)</span><br></pre></td></tr></table></figure><p><code>call</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯<code>this</code>æ‰€è¦æŒ‡å‘çš„é‚£ä¸ªå¯¹è±¡ï¼Œåé¢çš„å‚æ•°åˆ™æ˜¯å‡½æ•°è°ƒç”¨æ—¶æ‰€éœ€çš„å‚æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">add.<span class="title function_">call</span>(<span class="variable language_">this</span>, <span class="number">1</span>, <span class="number">2</span>) <span class="comment">// 3</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>call</code>æ–¹æ³•æŒ‡å®šå‡½æ•°<code>add</code>å†…éƒ¨çš„<code>this</code>ç»‘å®šå½“å‰ç¯å¢ƒï¼ˆå¯¹è±¡ï¼‰ï¼Œå¹¶ä¸”å‚æ•°ä¸º<code>1</code>å’Œ<code>2</code>ï¼Œå› æ­¤å‡½æ•°<code>add</code>è¿è¡Œåå¾—åˆ°<code>3</code>ã€‚</p><p><code>call</code>æ–¹æ³•çš„ä¸€ä¸ªåº”ç”¨æ˜¯è°ƒç”¨å¯¹è±¡çš„åŸç”Ÿæ–¹æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">obj.<span class="title function_">hasOwnProperty</span>(<span class="string">&#x27;toString&#x27;</span>) <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¦†ç›–æ‰ç»§æ‰¿çš„ hasOwnProperty æ–¹æ³•</span></span><br><span class="line">obj.<span class="property">hasOwnProperty</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br><span class="line">obj.<span class="title function_">hasOwnProperty</span>(<span class="string">&#x27;toString&#x27;</span>) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hasOwnProperty</span>.<span class="title function_">call</span>(obj, <span class="string">&#x27;toString&#x27;</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>hasOwnProperty</code>æ˜¯<code>obj</code>å¯¹è±¡ç»§æ‰¿çš„æ–¹æ³•ï¼Œå¦‚æœè¿™ä¸ªæ–¹æ³•ä¸€æ—¦è¢«è¦†ç›–ï¼Œå°±ä¸ä¼šå¾—åˆ°æ­£ç¡®ç»“æœã€‚<code>call</code>æ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒå°†<code>hasOwnProperty</code>æ–¹æ³•çš„åŸå§‹å®šä¹‰æ”¾åˆ°<code>obj</code>å¯¹è±¡ä¸Šæ‰§è¡Œï¼Œè¿™æ ·æ— è®º<code>obj</code>ä¸Šæœ‰æ²¡æœ‰åŒåæ–¹æ³•ï¼Œéƒ½ä¸ä¼šå½±å“ç»“æœã€‚</p><h4 id="0x010402-Function-prototype-apply"><a href="#0x010402-Function-prototype-apply" class="headerlink" title="0x010402 Function.prototype.apply()"></a>0x010402 Function.prototype.apply()</h4><p><code>apply</code>æ–¹æ³•çš„ä½œç”¨ä¸<code>call</code>æ–¹æ³•ç±»ä¼¼ï¼Œä¹Ÿæ˜¯æ”¹å˜<code>this</code>æŒ‡å‘ï¼Œç„¶åå†è°ƒç”¨è¯¥å‡½æ•°ã€‚å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‡½æ•°æ‰§è¡Œæ—¶çš„å‚æ•°ï¼Œä½¿ç”¨æ ¼å¼å¦‚ä¸‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">func.<span class="title function_">apply</span>(thisValue, [arg1, arg2, ...])</span><br></pre></td></tr></table></figure><p><code>apply</code>æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¹Ÿæ˜¯<code>this</code>æ‰€è¦æŒ‡å‘çš„é‚£ä¸ªå¯¹è±¡ï¼Œå¦‚æœè®¾ä¸º<code>null</code>æˆ–<code>undefined</code>ï¼Œåˆ™ç­‰åŒäºæŒ‡å®šå…¨å±€å¯¹è±¡ã€‚ç¬¬äºŒä¸ªå‚æ•°åˆ™æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„çš„æ‰€æœ‰æˆå‘˜ä¾æ¬¡ä½œä¸ºå‚æ•°ï¼Œä¼ å…¥åŸå‡½æ•°ã€‚åŸå‡½æ•°çš„å‚æ•°ï¼Œåœ¨<code>call</code>æ–¹æ³•ä¸­å¿…é¡»ä¸€ä¸ªä¸ªæ·»åŠ ï¼Œä½†æ˜¯åœ¨<code>apply</code>æ–¹æ³•ä¸­ï¼Œå¿…é¡»ä»¥æ•°ç»„å½¢å¼æ·»åŠ ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">x, y</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(x + y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f.<span class="title function_">call</span>(<span class="literal">null</span>, <span class="number">1</span>, <span class="number">1</span>) <span class="comment">// 2</span></span><br><span class="line">f.<span class="title function_">apply</span>(<span class="literal">null</span>, [<span class="number">1</span>, <span class="number">1</span>]) <span class="comment">// 2</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>f</code>å‡½æ•°æœ¬æ¥æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œä½¿ç”¨<code>apply</code>æ–¹æ³•ä»¥åï¼Œå°±å˜æˆå¯ä»¥æ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ã€‚</p><p>åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œå¯ä»¥åšä¸€äº›æœ‰è¶£çš„åº”ç”¨ã€‚</p><p><strong>ï¼ˆ1ï¼‰æ‰¾å‡ºæ•°ç»„æœ€å¤§å…ƒç´ </strong></p><p>JavaScript ä¸æä¾›æ‰¾å‡ºæ•°ç»„æœ€å¤§å…ƒç´ çš„å‡½æ•°ã€‚ç»“åˆä½¿ç”¨<code>apply</code>æ–¹æ³•å’Œ<code>Math.max</code>æ–¹æ³•ï¼Œå°±å¯ä»¥è¿”å›æ•°ç»„çš„æœ€å¤§å…ƒç´ ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">10</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">15</span>, <span class="number">9</span>];</span><br><span class="line"><span class="title class_">Math</span>.<span class="property">max</span>.<span class="title function_">apply</span>(<span class="literal">null</span>, a) <span class="comment">// 15</span></span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰å°†æ•°ç»„çš„ç©ºå…ƒç´ å˜ä¸º<code>undefined</code></strong></p><p>é€šè¿‡<code>apply</code>æ–¹æ³•ï¼Œåˆ©ç”¨<code>Array</code>æ„é€ å‡½æ•°å°†æ•°ç»„çš„ç©ºå…ƒç´ å˜æˆ<code>undefined</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="title function_">apply</span>(<span class="literal">null</span>, [<span class="string">&#x27;a&#x27;</span>, ,<span class="string">&#x27;b&#x27;</span>])</span><br><span class="line"><span class="comment">// [ &#x27;a&#x27;, undefined, &#x27;b&#x27; ]</span></span><br></pre></td></tr></table></figure><p>ç©ºå…ƒç´ ä¸<code>undefined</code>çš„å·®åˆ«åœ¨äºï¼Œæ•°ç»„çš„<code>forEach</code>æ–¹æ³•ä¼šè·³è¿‡ç©ºå…ƒç´ ï¼Œä½†æ˜¯ä¸ä¼šè·³è¿‡<code>undefined</code>ã€‚å› æ­¤ï¼Œéå†å†…éƒ¨å…ƒç´ çš„æ—¶å€™ï¼Œä¼šå¾—åˆ°ä¸åŒçš„ç»“æœã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="string">&#x27;a&#x27;</span>, , <span class="string">&#x27;b&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">print</span>(<span class="params">i</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a.<span class="title function_">forEach</span>(print)</span><br><span class="line"><span class="comment">// a</span></span><br><span class="line"><span class="comment">// b</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">apply</span>(<span class="literal">null</span>, a).<span class="title function_">forEach</span>(print)</span><br><span class="line"><span class="comment">// a</span></span><br><span class="line"><span class="comment">// undefined</span></span><br><span class="line"><span class="comment">// b</span></span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ3ï¼‰è½¬æ¢ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡</strong></p><p>å¦å¤–ï¼Œåˆ©ç”¨æ•°ç»„å¯¹è±¡çš„<code>slice</code>æ–¹æ³•ï¼Œå¯ä»¥å°†ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼ˆæ¯”å¦‚<code>arguments</code>å¯¹è±¡ï¼‰è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>.<span class="title function_">apply</span>(&#123;<span class="number">0</span>: <span class="number">1</span>, <span class="attr">length</span>: <span class="number">1</span>&#125;) <span class="comment">// [1]</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>.<span class="title function_">apply</span>(&#123;<span class="number">0</span>: <span class="number">1</span>&#125;) <span class="comment">// []</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>.<span class="title function_">apply</span>(&#123;<span class="number">0</span>: <span class="number">1</span>, <span class="attr">length</span>: <span class="number">2</span>&#125;) <span class="comment">// [1, undefined]</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>.<span class="title function_">apply</span>(&#123;<span class="attr">length</span>: <span class="number">1</span>&#125;) <span class="comment">// [undefined]</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç çš„<code>apply</code>æ–¹æ³•çš„å‚æ•°éƒ½æ˜¯å¯¹è±¡ï¼Œä½†æ˜¯è¿”å›ç»“æœéƒ½æ˜¯æ•°ç»„ï¼Œè¿™å°±èµ·åˆ°äº†å°†å¯¹è±¡è½¬æˆæ•°ç»„çš„ç›®çš„ã€‚ä»ä¸Šé¢ä»£ç å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªæ–¹æ³•èµ·ä½œç”¨çš„å‰ææ˜¯ï¼Œè¢«å¤„ç†çš„å¯¹è±¡å¿…é¡»æœ‰<code>length</code>å±æ€§ï¼Œä»¥åŠç›¸å¯¹åº”çš„æ•°å­—é”®ã€‚</p><p><strong>ï¼ˆ4ï¼‰ç»‘å®šå›è°ƒå‡½æ•°çš„å¯¹è±¡</strong></p><p>å‰é¢çš„æŒ‰é’®ç‚¹å‡»äº‹ä»¶çš„ä¾‹å­ï¼Œå¯ä»¥æ”¹å†™å¦‚ä¸‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line"></span><br><span class="line">o.<span class="property">f</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span> === o);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f = <span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">  o.<span class="property">f</span>.<span class="title function_">apply</span>(o);</span><br><span class="line">  <span class="comment">// æˆ–è€… o.f.call(o);</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// jQuery çš„å†™æ³•</span></span><br><span class="line">$(<span class="string">&#x27;#button&#x27;</span>).<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, f);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œç‚¹å‡»æŒ‰é’®ä»¥åï¼Œæ§åˆ¶å°å°†ä¼šæ˜¾ç¤º<code>true</code>ã€‚ç”±äº<code>apply()</code>æ–¹æ³•ï¼ˆæˆ–è€…<code>call()</code>æ–¹æ³•ï¼‰ä¸ä»…ç»‘å®šå‡½æ•°æ‰§è¡Œæ—¶æ‰€åœ¨çš„å¯¹è±¡ï¼Œè¿˜ä¼šç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œå› æ­¤ä¸å¾—ä¸æŠŠç»‘å®šè¯­å¥å†™åœ¨ä¸€ä¸ªå‡½æ•°ä½“å†…ã€‚æ›´ç®€æ´çš„å†™æ³•æ˜¯é‡‡ç”¨ä¸‹é¢ä»‹ç»çš„<code>bind()</code>æ–¹æ³•ã€‚</p><h4 id="0x010403-Function-prototype-bind"><a href="#0x010403-Function-prototype-bind" class="headerlink" title="0x010403 Function.prototype.bind()"></a>0x010403 Function.prototype.bind()</h4><p><code>bind()</code>æ–¹æ³•ç”¨äºå°†å‡½æ•°ä½“å†…çš„<code>this</code>ç»‘å®šåˆ°æŸä¸ªå¯¹è±¡ï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°å‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">d.<span class="title function_">getTime</span>() <span class="comment">// 1481869925657</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> print = d.<span class="property">getTime</span>;</span><br><span class="line"><span class="title function_">print</span>() <span class="comment">// Uncaught TypeError: this is not a Date object.</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬å°†<code>d.getTime()</code>æ–¹æ³•èµ‹ç»™å˜é‡<code>print</code>ï¼Œç„¶åè°ƒç”¨<code>print()</code>å°±æŠ¥é”™äº†ã€‚è¿™æ˜¯å› ä¸º<code>getTime()</code>æ–¹æ³•å†…éƒ¨çš„<code>this</code>ï¼Œç»‘å®š<code>Date</code>å¯¹è±¡çš„å®ä¾‹ï¼Œèµ‹ç»™å˜é‡<code>print</code>ä»¥åï¼Œå†…éƒ¨çš„<code>this</code>å·²ç»ä¸æŒ‡å‘<code>Date</code>å¯¹è±¡çš„å®ä¾‹äº†ã€‚</p><p><code>bind()</code>æ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> print = d.<span class="property">getTime</span>.<span class="title function_">bind</span>(d);</span><br><span class="line"><span class="title function_">print</span>() <span class="comment">// 1481869925657</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>bind()</code>æ–¹æ³•å°†<code>getTime()</code>æ–¹æ³•å†…éƒ¨çš„<code>this</code>ç»‘å®šåˆ°<code>d</code>å¯¹è±¡ï¼Œè¿™æ—¶å°±å¯ä»¥å®‰å…¨åœ°å°†è¿™ä¸ªæ–¹æ³•èµ‹å€¼ç»™å…¶ä»–å˜é‡äº†ã€‚</p><p><code>bind</code>æ–¹æ³•çš„å‚æ•°å°±æ˜¯æ‰€è¦ç»‘å®š<code>this</code>çš„å¯¹è±¡ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªæ›´æ¸…æ™°çš„ä¾‹å­ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> counter = &#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">inc</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">count</span>++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> func = counter.<span class="property">inc</span>.<span class="title function_">bind</span>(counter);</span><br><span class="line"><span class="title function_">func</span>();</span><br><span class="line">counter.<span class="property">count</span> <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>counter.inc()</code>æ–¹æ³•è¢«èµ‹å€¼ç»™å˜é‡<code>func</code>ã€‚è¿™æ—¶å¿…é¡»ç”¨<code>bind()</code>æ–¹æ³•å°†<code>inc()</code>å†…éƒ¨çš„<code>this</code>ï¼Œç»‘å®šåˆ°<code>counter</code>ï¼Œå¦åˆ™å°±ä¼šå‡ºé”™ã€‚</p><p><code>this</code>ç»‘å®šåˆ°å…¶ä»–å¯¹è±¡ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> counter = &#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">inc</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">count</span>++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="number">100</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> func = counter.<span class="property">inc</span>.<span class="title function_">bind</span>(obj);</span><br><span class="line"><span class="title function_">func</span>();</span><br><span class="line">obj.<span class="property">count</span> <span class="comment">// 101</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>bind()</code>æ–¹æ³•å°†<code>inc()</code>æ–¹æ³•å†…éƒ¨çš„<code>this</code>ï¼Œç»‘å®šåˆ°<code>obj</code>å¯¹è±¡ã€‚ç»“æœè°ƒç”¨<code>func</code>å‡½æ•°ä»¥åï¼Œé€’å¢çš„å°±æ˜¯<code>obj</code>å†…éƒ¨çš„<code>count</code>å±æ€§ã€‚</p><p><code>bind()</code>è¿˜å¯ä»¥æ¥å—æ›´å¤šçš„å‚æ•°ï¼Œå°†è¿™äº›å‚æ•°ç»‘å®šåŸå‡½æ•°çš„å‚æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> add = <span class="keyword">function</span> (<span class="params">x, y</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x * <span class="variable language_">this</span>.<span class="property">m</span> + y * <span class="variable language_">this</span>.<span class="property">n</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">m</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">n</span>: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> newAdd = add.<span class="title function_">bind</span>(obj, <span class="number">5</span>);</span><br><span class="line"><span class="title function_">newAdd</span>(<span class="number">5</span>) <span class="comment">// 20</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>bind()</code>æ–¹æ³•é™¤äº†ç»‘å®š<code>this</code>å¯¹è±¡ï¼Œè¿˜å°†<code>add()</code>å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°<code>x</code>ç»‘å®šæˆ<code>5</code>ï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°å‡½æ•°<code>newAdd()</code>ï¼Œè¿™ä¸ªå‡½æ•°åªè¦å†æ¥å—ä¸€ä¸ªå‚æ•°<code>y</code>å°±èƒ½è¿è¡Œäº†ã€‚</p><p>å¦‚æœ<code>bind()</code>æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<code>null</code>æˆ–<code>undefined</code>ï¼Œç­‰äºå°†<code>this</code>ç»‘å®šåˆ°å…¨å±€å¯¹è±¡ï¼Œå‡½æ•°è¿è¡Œæ—¶<code>this</code>æŒ‡å‘é¡¶å±‚å¯¹è±¡ï¼ˆæµè§ˆå™¨ä¸º<code>window</code>ï¼‰ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">x, y</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> plus5 = add.<span class="title function_">bind</span>(<span class="literal">null</span>, <span class="number">5</span>);</span><br><span class="line"><span class="title function_">plus5</span>(<span class="number">10</span>) <span class="comment">// 15</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°<code>add()</code>å†…éƒ¨å¹¶æ²¡æœ‰<code>this</code>ï¼Œä½¿ç”¨<code>bind()</code>æ–¹æ³•çš„ä¸»è¦ç›®çš„æ˜¯ç»‘å®šå‚æ•°<code>x</code>ï¼Œä»¥åæ¯æ¬¡è¿è¡Œæ–°å‡½æ•°<code>plus5()</code>ï¼Œå°±åªéœ€è¦æä¾›å¦ä¸€ä¸ªå‚æ•°<code>y</code>å°±å¤Ÿäº†ã€‚è€Œä¸”å› ä¸º<code>add()</code>å†…éƒ¨æ²¡æœ‰<code>this</code>ï¼Œæ‰€ä»¥<code>bind()</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯<code>null</code>ï¼Œä¸è¿‡è¿™é‡Œå¦‚æœæ˜¯å…¶ä»–å¯¹è±¡ï¼Œä¹Ÿæ²¡æœ‰å½±å“ã€‚</p><p><code>bind()</code>æ–¹æ³•æœ‰ä¸€äº›ä½¿ç”¨æ³¨æ„ç‚¹ã€‚</p><p><strong>ï¼ˆ1ï¼‰æ¯ä¸€æ¬¡è¿”å›ä¸€ä¸ªæ–°å‡½æ•°</strong></p><p><code>bind()</code>æ–¹æ³•æ¯è¿è¡Œä¸€æ¬¡ï¼Œå°±è¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œè¿™ä¼šäº§ç”Ÿä¸€äº›é—®é¢˜ã€‚æ¯”å¦‚ï¼Œç›‘å¬äº‹ä»¶çš„æ—¶å€™ï¼Œä¸èƒ½å†™æˆä¸‹é¢è¿™æ ·ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">element.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, o.<span class="property">m</span>.<span class="title function_">bind</span>(o));</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>click</code>äº‹ä»¶ç»‘å®š<code>bind()</code>æ–¹æ³•ç”Ÿæˆçš„ä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚è¿™æ ·ä¼šå¯¼è‡´æ— æ³•å–æ¶ˆç»‘å®šï¼Œæ‰€ä»¥ä¸‹é¢çš„ä»£ç æ˜¯æ— æ•ˆçš„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">element.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;click&#x27;</span>, o.<span class="property">m</span>.<span class="title function_">bind</span>(o));</span><br></pre></td></tr></table></figure><p>æ­£ç¡®çš„æ–¹æ³•æ˜¯å†™æˆä¸‹é¢è¿™æ ·ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> listener = o.<span class="property">m</span>.<span class="title function_">bind</span>(o);</span><br><span class="line">element.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, listener);</span><br><span class="line"><span class="comment">//  ...</span></span><br><span class="line">element.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;click&#x27;</span>, listener);</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰ç»“åˆå›è°ƒå‡½æ•°ä½¿ç”¨</strong></p><p>å›è°ƒå‡½æ•°æ˜¯ JavaScript æœ€å¸¸ç”¨çš„æ¨¡å¼ä¹‹ä¸€ï¼Œä½†æ˜¯ä¸€ä¸ªå¸¸è§çš„é”™è¯¯æ˜¯ï¼Œå°†åŒ…å«<code>this</code>çš„æ–¹æ³•ç›´æ¥å½“ä½œå›è°ƒå‡½æ•°ã€‚è§£å†³æ–¹æ³•å°±æ˜¯ä½¿ç”¨<code>bind()</code>æ–¹æ³•ï¼Œå°†<code>counter.inc()</code>ç»‘å®š<code>counter</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> counter = &#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">inc</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="string">&#x27;use strict&#x27;</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">count</span>++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">callIt</span>(<span class="params">callback</span>) &#123;</span><br><span class="line">  <span class="title function_">callback</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">callIt</span>(counter.<span class="property">inc</span>.<span class="title function_">bind</span>(counter));</span><br><span class="line">counter.<span class="property">count</span> <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>callIt()</code>æ–¹æ³•ä¼šè°ƒç”¨å›è°ƒå‡½æ•°ã€‚è¿™æ—¶å¦‚æœç›´æ¥æŠŠ<code>counter.inc</code>ä¼ å…¥ï¼Œè°ƒç”¨æ—¶<code>counter.inc()</code>å†…éƒ¨çš„<code>this</code>å°±ä¼šæŒ‡å‘å…¨å±€å¯¹è±¡ã€‚ä½¿ç”¨<code>bind()</code>æ–¹æ³•å°†<code>counter.inc</code>ç»‘å®š<code>counter</code>ä»¥åï¼Œå°±ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼Œ<code>this</code>æ€»æ˜¯æŒ‡å‘<code>counter</code>ã€‚</p><p>è¿˜æœ‰ä¸€ç§æƒ…å†µæ¯”è¾ƒéšè”½ï¼Œå°±æ˜¯æŸäº›æ•°ç»„æ–¹æ³•å¯ä»¥æ¥å—ä¸€ä¸ªå‡½æ•°å½“ä½œå‚æ•°ã€‚è¿™äº›å‡½æ•°å†…éƒ¨çš„<code>this</code>æŒ‡å‘ï¼Œå¾ˆå¯èƒ½ä¹Ÿä¼šå‡ºé”™ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line">  <span class="attr">times</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">  <span class="attr">print</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">times</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">n</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj.<span class="title function_">print</span>()</span><br><span class="line"><span class="comment">// æ²¡æœ‰ä»»ä½•è¾“å‡º</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>obj.print</code>å†…éƒ¨<code>this.times</code>çš„<code>this</code>æ˜¯æŒ‡å‘<code>obj</code>çš„ï¼Œè¿™ä¸ªæ²¡æœ‰é—®é¢˜ã€‚ä½†æ˜¯ï¼Œ<code>forEach()</code>æ–¹æ³•çš„å›è°ƒå‡½æ•°å†…éƒ¨çš„<code>this.name</code>å´æ˜¯æŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œå¯¼è‡´æ²¡æœ‰åŠæ³•å–åˆ°å€¼ã€‚ç¨å¾®æ”¹åŠ¨ä¸€ä¸‹ï¼Œå°±å¯ä»¥çœ‹å¾—æ›´æ¸…æ¥šã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">obj.<span class="property">print</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">times</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">n</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span> === <span class="variable language_">window</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj.<span class="title function_">print</span>()</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure><p>è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¹Ÿæ˜¯é€šè¿‡<code>bind()</code>æ–¹æ³•ç»‘å®š<code>this</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">obj.<span class="property">print</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">times</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span> (<span class="params">n</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">  &#125;.<span class="title function_">bind</span>(<span class="variable language_">this</span>));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">obj.<span class="title function_">print</span>()</span><br><span class="line"><span class="comment">// å¼ ä¸‰</span></span><br><span class="line"><span class="comment">// å¼ ä¸‰</span></span><br><span class="line"><span class="comment">// å¼ ä¸‰</span></span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ3ï¼‰ç»“åˆ<code>call()</code>æ–¹æ³•ä½¿ç”¨</strong></p><p>åˆ©ç”¨<code>bind()</code>æ–¹æ³•ï¼Œå¯ä»¥æ”¹å†™ä¸€äº› JavaScript åŸç”Ÿæ–¹æ³•çš„ä½¿ç”¨å½¢å¼ï¼Œä»¥æ•°ç»„çš„<code>slice()</code>æ–¹æ³•ä¸ºä¾‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].<span class="title function_">slice</span>(<span class="number">0</span>, <span class="number">1</span>) <span class="comment">// [1]</span></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>.<span class="title function_">call</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">0</span>, <span class="number">1</span>) <span class="comment">// [1]</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæ•°ç»„çš„<code>slice</code>æ–¹æ³•ä»<code>[1, 2, 3]</code>é‡Œé¢ï¼ŒæŒ‰ç…§æŒ‡å®šçš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ï¼Œåˆ‡åˆ†å‡ºå¦ä¸€ä¸ªæ•°ç»„ã€‚è¿™æ ·åšçš„æœ¬è´¨æ˜¯åœ¨<code>[1, 2, 3]</code>ä¸Šé¢è°ƒç”¨<code>Array.prototype.slice()</code>æ–¹æ³•ï¼Œå› æ­¤å¯ä»¥ç”¨<code>call</code>æ–¹æ³•è¡¨è¾¾è¿™ä¸ªè¿‡ç¨‹ï¼Œå¾—åˆ°åŒæ ·çš„ç»“æœã€‚</p><p><code>call()</code>æ–¹æ³•å®è´¨ä¸Šæ˜¯è°ƒç”¨<code>Function.prototype.call()</code>æ–¹æ³•ï¼Œå› æ­¤ä¸Šé¢çš„è¡¨è¾¾å¼å¯ä»¥ç”¨<code>bind()</code>æ–¹æ³•æ”¹å†™ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> slice = <span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">call</span>.<span class="title function_">bind</span>(<span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>);</span><br><span class="line"><span class="title function_">slice</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="number">0</span>, <span class="number">1</span>) <span class="comment">// [1]</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç çš„å«ä¹‰å°±æ˜¯ï¼Œå°†<code>Array.prototype.slice</code>å˜æˆ<code>Function.prototype.call</code>æ–¹æ³•æ‰€åœ¨çš„å¯¹è±¡ï¼Œè°ƒç”¨æ—¶å°±å˜æˆäº†<code>Array.prototype.slice.call</code>ã€‚ç±»ä¼¼çš„å†™æ³•è¿˜å¯ä»¥ç”¨äºå…¶ä»–æ•°ç»„æ–¹æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> push = <span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">call</span>.<span class="title function_">bind</span>(<span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span>);</span><br><span class="line"><span class="keyword">var</span> pop = <span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">call</span>.<span class="title function_">bind</span>(<span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">pop</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span> ,<span class="number">2</span> ,<span class="number">3</span>];</span><br><span class="line"><span class="title function_">push</span>(a, <span class="number">4</span>)</span><br><span class="line">a <span class="comment">// [1, 2, 3, 4]</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">pop</span>(a)</span><br><span class="line">a <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure><p>å¦‚æœå†è¿›ä¸€æ­¥ï¼Œå°†<code>Function.prototype.call</code>æ–¹æ³•ç»‘å®šåˆ°<code>Function.prototype.bind</code>å¯¹è±¡ï¼Œå°±æ„å‘³ç€<code>bind</code>çš„è°ƒç”¨å½¢å¼ä¹Ÿå¯ä»¥è¢«æ”¹å†™ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">v</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> o = &#123; <span class="attr">v</span>: <span class="number">123</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> bind = <span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">call</span>.<span class="title function_">bind</span>(<span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">bind</span>);</span><br><span class="line"><span class="title function_">bind</span>(f, o)() <span class="comment">// 123</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç çš„å«ä¹‰å°±æ˜¯ï¼Œå°†<code>Function.prototype.bind</code>æ–¹æ³•ç»‘å®šåœ¨<code>Function.prototype.call</code>ä¸Šé¢ï¼Œæ‰€ä»¥<code>bind</code>æ–¹æ³•å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä¸éœ€è¦åœ¨å‡½æ•°å®ä¾‹ä¸Šä½¿ç”¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å­¦ä¹  </category>
          
          <category> å¾®ä¿¡å°ç¨‹åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> JavaScript </tag>
            
            <tag> å°ç¨‹åº </tag>
            
            <tag> WeChat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®° 02</title>
      <link href="/2021/08/31/aba664882fa9-q1jun/"/>
      <url>/2021/08/31/aba664882fa9-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®°-02"><a href="#å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®°-02" class="headerlink" title="å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®° 02"></a>å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®° 02</h1><h2 id="0x01-Flexå¸ƒå±€åº”ç”¨"><a href="#0x01-Flexå¸ƒå±€åº”ç”¨" class="headerlink" title="0x01 Flexå¸ƒå±€åº”ç”¨"></a>0x01 Flexå¸ƒå±€åº”ç”¨</h2><p>é¦–å…ˆï¼Œåœ¨<code>pages/home</code>ç›®å½•é‡Œé¢ï¼Œæ–°å»ºä¸€ä¸ª<code>index.wxss</code>æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶è®¾ç½®çš„æ ·å¼ï¼Œåªå¯¹ home é¡µé¢ç”Ÿæ•ˆã€‚è¿™æ˜¯å› ä¸ºæ¯ä¸ªé¡µé¢é€šå¸¸æœ‰ä¸ä¸€æ ·çš„å¸ƒå±€ï¼Œæ‰€ä»¥é¡µé¢å¸ƒå±€ä¸€èˆ¬ä¸å†™åœ¨å…¨å±€çš„<code>app.wxss</code>é‡Œé¢ã€‚</p><p>ç„¶åï¼Œ<code>index.wxss</code>æ–‡ä»¶å†™å…¥ä¸‹é¢çš„å†…å®¹ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">page &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">750</span>rpx;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¼€å‘è€…å·¥å…·å¯¼å…¥é¡¹ç›®ä»£ç ï¼Œé¡µé¢æ¸²æŸ“ç»“æœå¦‚ä¸‹ã€‚</p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220114142623423.png" alt="image-20220114142623423" style="zoom:50%;" /><p>ä¸‹é¢è§£é‡Šä¸€ä¸‹ä¸Šé¢è¿™æ®µ WXSS ä»£ç ï¼Œè¿˜æ˜¯å¾ˆç®€å•çš„ã€‚</p><p>ï¼ˆ1ï¼‰<code>height: 100%;</code>ï¼šé¡µé¢é«˜åº¦ä¸ºæ•´ä¸ªå±å¹•é«˜åº¦ã€‚</p><p>ï¼ˆ2ï¼‰<code>width: 750rpx;</code>ï¼šé¡µé¢å®½åº¦ä¸ºæ•´ä¸ªå±å¹•å®½åº¦ã€‚</p><p>æ³¨æ„ï¼Œè¿™é‡Œå•ä½æ˜¯<code>rpx</code>ï¼Œè€Œä¸æ˜¯<code>px</code>ã€‚<code>rpx</code>æ˜¯å°ç¨‹åºä¸ºé€‚åº”ä¸åŒå®½åº¦çš„æ‰‹æœºå±å¹•ï¼Œè€Œå‘æ˜çš„ä¸€ç§é•¿åº¦å•ä½ã€‚ä¸ç®¡ä»€ä¹ˆæ‰‹æœºå±å¹•ï¼Œå®½åº¦ä¸€å¾‹ä¸º<code>750rpx</code>ã€‚å®ƒçš„å¥½å¤„æ˜¯æ¢ç®—ç®€å•ï¼Œå¦‚æœä¸€ä¸ªå…ƒç´ çš„å®½åº¦æ˜¯é¡µé¢çš„ä¸€åŠï¼Œåªè¦å†™æˆ<code>width: 375rpx;</code>å³å¯ã€‚</p><p>ï¼ˆ3ï¼‰<code>display: flex;</code>ï¼šæ•´ä¸ªé¡µé¢ï¼ˆpageï¼‰é‡‡ç”¨ Flex å¸ƒå±€ã€‚</p><p>ï¼ˆ4ï¼‰<code>justify-content: center;</code>ï¼šé¡µé¢çš„ä¸€çº§å­å…ƒç´ ï¼ˆè¿™ä¸ªç¤ºä¾‹æ˜¯<code>&lt;view&gt;</code>ï¼‰æ°´å¹³å±…ä¸­ã€‚</p><p>ï¼ˆ5ï¼‰<code>align-items: center;</code>ï¼šé¡µé¢çš„ä¸€çº§å­å…ƒç´ ï¼ˆè¿™ä¸ªç¤ºä¾‹æ˜¯<code>&lt;view&gt;</code>ï¼‰å‚ç›´å±…ä¸­ã€‚ä¸€ä¸ªå…ƒç´ åŒæ—¶æ°´å¹³å±…ä¸­å’Œå‚ç›´ä¸­å¤®ï¼Œå°±ç›¸å½“äºå¤„åœ¨é¡µé¢çš„ä¸­å¤®äº†ã€‚</p><h2 id="0x02-WeUIçš„åº”ç”¨"><a href="#0x02-WeUIçš„åº”ç”¨" class="headerlink" title="0x02 WeUIçš„åº”ç”¨"></a>0x02 WeUIçš„åº”ç”¨</h2><p>å¦‚æœé¡µé¢çš„æ‰€æœ‰æ ·å¼éƒ½è‡ªå·±å†™ï¼Œè¿˜æ˜¯æŒºéº»çƒ¦çš„ï¼Œä¹Ÿæ²¡æœ‰è¿™ä¸ªå¿…è¦ã€‚è…¾è®¯å°è£…äº†ä¸€å¥— UI æ¡†æ¶ <a target="_blank" rel="noopener" href="https://github.com/Tencent/weui">WeUI</a>ï¼Œå¯ä»¥æ‹¿æ¥ç”¨ã€‚</p><p>æ‰‹æœºè®¿é—® <a target="_blank" rel="noopener" href="https://weui.io/">weui.io</a>ï¼Œå¯ä»¥çœ‹åˆ°è¿™å¥— UI æ¡†æ¶çš„æ•ˆæœ</p><p>é¦–å…ˆï¼Œè¿›å…¥å®ƒçš„ <a target="_blank" rel="noopener" href="https://github.com/Tencent/weui-wxss/">GitHub ä»“åº“</a>ï¼Œåœ¨<code>dist/style</code>ç›®å½•ä¸‹é¢ï¼Œæ‰¾åˆ°<a target="_blank" rel="noopener" href="https://github.com/Tencent/weui-wxss/blob/master/dist/style/weui.wxss"><code>weui.wxss</code></a>è¿™ä¸ªæ–‡ä»¶ï¼Œå°†<a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/Tencent/weui-wxss/master/dist/style/weui.wxss">æºç </a>å…¨éƒ¨å¤åˆ¶åˆ°ä½ çš„<code>app.wxss</code>æ–‡ä»¶çš„å¤´éƒ¨ã€‚</p><p>ç„¶åï¼Œå°†<code>page/home/index.wxml</code>æ–‡ä»¶æ”¹æˆä¸‹é¢è¿™æ ·ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;view&gt;</span><br><span class="line">        &lt;<span class="selector-tag">button</span> class=&quot;weui-btn weui-btn_primary&quot;&gt;</span><br><span class="line">            ä¸»æ“ä½œ</span><br><span class="line">        &lt;/<span class="selector-tag">button</span>&gt;</span><br><span class="line">        &lt;<span class="selector-tag">button</span> class=&quot;weui-btn weui-btn_primary weui-btn_loading&quot;&gt;</span><br><span class="line">            &lt;<span class="selector-tag">i</span> class=&quot;weui-loading&quot;&gt;&lt;/<span class="selector-tag">i</span>&gt;æ­£åœ¨åŠ è½½</span><br><span class="line">        &lt;/<span class="selector-tag">button</span>&gt;</span><br><span class="line">        &lt;<span class="selector-tag">button</span> class=&quot;weui-btn weui-btn_primary weui-btn_disabled&quot;&gt;</span><br><span class="line">            ç¦æ­¢ç‚¹å‡»</span><br><span class="line">        &lt;/<span class="selector-tag">button</span>&gt;</span><br><span class="line">    &lt;view&gt;</span><br><span class="line">    &lt;text class=&quot;title&quot;&gt;å½“å‰æ—¶é—´ä¸ºï¼š&#123;&#123;<span class="selector-tag">time</span>&#125;&#125;&lt;/text&gt;</span><br><span class="line">    &lt;br/&gt;</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure><p>å¼€å‘è€…å·¥å…·å¯¼å…¥é¡¹ç›®ä»£ç ï¼Œé¡µé¢æ¸²æŸ“ç»“æœå¦‚ä¸‹ã€‚</p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220114145323561.png" alt="image-20220114145323561" style="zoom:50%;" /><p>å¯ä»¥çœ‹åˆ°ï¼ŒåŠ å…¥ WeUI æ¡†æ¶ä»¥åï¼Œåªè¦ä¸ºæŒ‰é’®æ·»åŠ ä¸åŒçš„ classï¼Œå°±èƒ½è‡ªåŠ¨å‡ºç°æ¡†æ¶æä¾›çš„æ ·å¼ã€‚ä½ å¯ä»¥æ ¹æ®éœ€è¦ï¼Œä¸ºé¡µé¢é€‰æ‹©ä¸åŒçš„æŒ‰é’®ã€‚</p><p>è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>&lt;button&gt;</code>å…ƒç´ ä½¿ç”¨äº†ä¸‹é¢çš„<code>class</code>ã€‚</p><ul><li><code>weui-btn</code>ï¼šæŒ‰é’®æ ·å¼çš„åŸºç±»</li><li><code>weui-btn_primary</code>ï¼šä¸»æŒ‰é’®çš„æ ·å¼ã€‚å¦‚æœæ˜¯æ¬¡è¦æŒ‰é’®ï¼Œå°±ä½¿ç”¨<code>weui-btn_default</code>ã€‚</li><li><code>weui-btn_loading</code>ï¼šæŒ‰é’®ç‚¹å‡»åï¼Œæ“ä½œæ­£åœ¨è¿›è¡Œä¸­çš„æ ·å¼ã€‚è¯¥ç±»å†…éƒ¨éœ€è¦ç”¨<code>&lt;i&gt;</code>å…ƒç´ ï¼ŒåŠ ä¸Šè¡¨ç¤ºæ­£åœ¨åŠ è½½çš„å›¾æ ‡ã€‚</li><li><code>weui-btn_disabled</code>ï¼šæŒ‰é’®ç¦æ­¢ç‚¹å‡»çš„æ ·å¼ã€‚</li></ul><p>WeUI æä¾›äº†å¤§é‡çš„å…ƒç´ æ ·å¼ï¼Œå®Œæ•´çš„æ¸…å•å¯ä»¥æŸ¥çœ‹<a target="_blank" rel="noopener" href="https://github.com/Tencent/weui-wxss">è¿™é‡Œ</a>ã€‚</p><h2 id="0x03-æ’å…¥å›¾ç‰‡"><a href="#0x03-æ’å…¥å›¾ç‰‡" class="headerlink" title="0x03 æ’å…¥å›¾ç‰‡"></a>0x03 æ’å…¥å›¾ç‰‡</h2><p>ç¾è§‚çš„é¡µé¢ä¸èƒ½å…‰æœ‰æ–‡å­—ï¼Œè¿˜å¿…é¡»æœ‰å›¾ç‰‡ã€‚å°ç¨‹åºçš„<code>&lt;image&gt;</code>ç»„ä»¶å°±ç”¨æ¥åŠ è½½å›¾ç‰‡ã€‚</p><p>æ‰“å¼€<code>index.wxml</code>æ–‡ä»¶ï¼ŒåŠ å…¥å¦‚ä¸‹ä»£ç ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;view&gt;</span><br><span class="line">  &lt;image <span class="attribute">src</span>=&quot;https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-<span class="number">20220114150508149</span>.png<span class="string">&quot; &gt;&lt;/image&gt;</span></span><br><span class="line"><span class="string">&lt;/view&gt;</span></span><br></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå›¾ç‰‡ä¼šå æ»¡æ•´ä¸ªå®¹å™¨çš„å®½åº¦ï¼ˆè¿™ä¸ªä¾‹å­æ˜¯<code>&lt;view&gt;</code>çš„å®½åº¦ï¼‰ï¼Œä¸Šé¢ä»£ç é€šè¿‡<code>style</code>å±æ€§æŒ‡å®šå›¾ç‰‡çš„é«˜åº¦å’Œå®½åº¦ï¼ˆå æ®é¡µé¢å®½åº¦çš„ä¸€åŠï¼‰ï¼Œæ¸²æŸ“ç»“æœå¦‚ä¸‹ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220114150920228.png" alt="image-20220114150920228"></p><p>å½“ç„¶ï¼Œå›¾ç‰‡æ ·å¼ä¸ä¸€å®šå†™åœ¨<code>&lt;image&gt;</code>ç»„ä»¶é‡Œé¢ï¼Œä¹Ÿå¯ä»¥å†™åœ¨ WXSS æ ·å¼æ–‡ä»¶é‡Œé¢ã€‚</p><h2 id="0x04-å›¾ç‰‡çš„è½®æ’­"><a href="#0x04-å›¾ç‰‡çš„è½®æ’­" class="headerlink" title="0x04 å›¾ç‰‡çš„è½®æ’­"></a>0x04 å›¾ç‰‡çš„è½®æ’­</h2><p>å°ç¨‹åºåŸç”Ÿçš„<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html"><code>&lt;swiper&gt;</code>ç»„ä»¶</a>å¯ä»¥æä¾›å›¾ç‰‡è½®æ’­æ•ˆæœã€‚</p><p>é¡µé¢çš„å›¾ç‰‡ä¸Šé¢ï¼Œæœ‰ä¸‰ä¸ªæç¤ºç‚¹ï¼Œè¡¨ç¤ºä¸€å…±æœ‰ä¸‰å¼ å›¾ç‰‡ï¼Œå¯ä»¥åˆ‡æ¢æ˜¾ç¤ºã€‚</p><p>å®ƒçš„ä»£ç å¾ˆç®€å•ï¼Œåªéœ€è¦æ”¹ä¸€ä¸‹<code>index.wxml</code>æ–‡ä»¶å³å¯ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;view&gt;</span><br><span class="line">  &lt;swiper</span><br><span class="line">    indicator-dots=&quot;&#123;&#123;true&#125;&#125;&quot;  </span><br><span class="line">    autoplay=&quot;&#123;&#123;true&#125;&#125;&quot;</span><br><span class="line">    style=&quot;<span class="attribute">width</span>: <span class="number">750</span>rpx;&quot;&gt;</span><br><span class="line">    &lt;swiper-item&gt;</span><br><span class="line">      &lt;image <span class="attribute">src</span>=&quot;https://picsum.photos/<span class="number">200</span><span class="string">&quot;&gt;&lt;/image&gt;</span></span><br><span class="line"><span class="string">    &lt;/swiper-item&gt;</span></span><br><span class="line"><span class="string">    &lt;swiper-item&gt;</span></span><br><span class="line"><span class="string">      &lt;image src=&quot;</span>https://picsum.photos/<span class="number">250</span><span class="string">&quot;&gt;&lt;/image&gt;</span></span><br><span class="line"><span class="string">    &lt;/swiper-item&gt;</span></span><br><span class="line"><span class="string">    &lt;swiper-item&gt;</span></span><br><span class="line"><span class="string">      &lt;image src=&quot;</span>https://picsum.photos/<span class="number">300</span><span class="string">&quot;&gt;&lt;/image&gt;</span></span><br><span class="line"><span class="string">    &lt;/swiper-item&gt;</span></span><br><span class="line"><span class="string">  &lt;/swiper&gt;</span></span><br><span class="line"><span class="string">&lt;/view&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220114151335385.png" alt="image-20220114151335385"></p><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>&lt;swiper&gt;</code>ç»„ä»¶å°±æ˜¯è½®æ’­ç»„ä»¶ï¼Œé‡Œé¢æ”¾ç½®äº†ä¸‰ä¸ª<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/swiper-item.html">&#96;&#96;ç»„ä»¶</a>ï¼Œè¡¨ç¤ºæœ‰ä¸‰ä¸ªè½®æ’­é¡¹ç›®ï¼Œæ¯ä¸ªé¡¹ç›®å°±æ˜¯ä¸€ä¸ª<code>&lt;image&gt;</code>ç»„ä»¶ã€‚</p><p><code>&lt;swiper&gt;</code>ç»„ä»¶çš„<code>indicator-dots</code>å±æ€§è®¾ç½®æ˜¯å¦æ˜¾ç¤ºè½®æ’­ç‚¹ï¼Œ<code>autoplay</code>å±æ€§è®¾ç½®æ˜¯å¦è‡ªåŠ¨æ’­æ”¾è½®æ’­ã€‚å®ƒä»¬çš„å±æ€§å€¼éƒ½æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¿™é‡Œè¦å†™æˆ<code>&#123;&#123;true&#125;&#125;</code>ã€‚è¿™ç§<code>&#123;&#123;...&#125;&#125;</code>çš„è¯­æ³•ï¼Œè¡¨ç¤ºé‡Œé¢æ”¾ç½®çš„æ˜¯ JavaScript ä»£ç ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å­¦ä¹  </category>
          
          <category> å¾®ä¿¡å°ç¨‹åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> JavaScript </tag>
            
            <tag> å°ç¨‹åº </tag>
            
            <tag> WeChat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®° 01</title>
      <link href="/2021/08/28/b4442a413577-q1jun/"/>
      <url>/2021/08/28/b4442a413577-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®°-01"><a href="#å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®°-01" class="headerlink" title="å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®° 01"></a>å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®° 01</h1><h2 id="0x01-æ€»ä½“æ ·å¼"><a href="#0x01-æ€»ä½“æ ·å¼" class="headerlink" title="0x01 æ€»ä½“æ ·å¼"></a>0x01 æ€»ä½“æ ·å¼</h2><p>å¾®ä¿¡å°ç¨‹åºå…è®¸åœ¨é¡¶å±‚æ”¾ç½®ä¸€ä¸ª<code>app.wxss</code>æ–‡ä»¶ï¼Œé‡Œé¢é‡‡ç”¨ CSS è¯­æ³•è®¾ç½®é¡µé¢æ ·å¼ã€‚è¿™ä¸ªæ–‡ä»¶çš„è®¾ç½®ï¼Œå¯¹æ‰€æœ‰é¡µé¢éƒ½æœ‰æ•ˆã€‚</p><p>æ³¨æ„ï¼Œå°ç¨‹åºè™½ç„¶ä½¿ç”¨ CSS æ ·å¼ï¼Œä½†æ˜¯æ ·å¼æ–‡ä»¶çš„åç¼€åä¸€å¾‹è¦å†™æˆ<code>.wxss</code>ã€‚</p><p>åœ¨é¡¹ç›®é¡¶å±‚æ–°å»ºä¸€ä¸ª<code>app.wxss</code>æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">page &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: pink;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">text &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">24pt</span>;</span><br><span class="line">  <span class="attribute">color</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç å°†æ•´ä¸ªé¡µé¢çš„èƒŒæ™¯è‰²è®¾ä¸ºç²‰çº¢ï¼Œç„¶åå°†<code>&lt;text&gt;</code>æ ‡ç­¾çš„å­—ä½“å¤§å°è®¾ä¸º 24 ç£…ï¼Œå­—ä½“é¢œè‰²è®¾ä¸ºè“è‰²ã€‚</p><p>å¼€å‘è€…å·¥å…·å¯¼å…¥ä»£ç ä¹‹åï¼Œå¾—åˆ°äº†ä¸‹é¢çš„æ¸²æŸ“ç»“æœã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220114135509030.png" alt="image-20220114135509030"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œé¡µé¢çš„èƒŒæ™¯è‰²å˜æˆç²‰çº¢ï¼Œæ–‡æœ¬å­—ä½“å˜å¤§äº†ï¼Œå­—ä½“é¢œè‰²å˜æˆäº†è“è‰²ã€‚</p><p>å®é™…å¼€å‘ä¸­ï¼Œç›´æ¥å¯¹<code>&lt;text&gt;</code>æ ‡ç­¾è®¾ç½®æ ·å¼ï¼Œä¼šå½±å“åˆ°æ‰€æœ‰çš„æ–‡æœ¬ã€‚ä¸€èˆ¬ä¸è¿™æ ·ç”¨ï¼Œè€Œæ˜¯é€šè¿‡<code>class</code>å±æ€§åŒºåˆ†ä¸åŒç±»å‹çš„æ–‡æœ¬ï¼Œç„¶åå†å¯¹æ¯ç§<code>class</code>è®¾ç½®æ ·å¼ã€‚</p><p>æ‰“å¼€<code>pages/wxml/index.wxml</code>æ–‡ä»¶ï¼ŒæŠŠé¡µé¢ä»£ç æ”¹æˆä¸‹é¢è¿™æ ·ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">block</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>å½“å‰æ—¶é—´ä¸ºï¼š&#123;&#123;time&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¸º<code>&lt;text&gt;</code>æ ‡ç­¾åŠ ä¸Šäº†ä¸€ä¸ª<code>class</code>å±æ€§ï¼Œå€¼ä¸º<code>title</code>ã€‚</p><p>ç„¶åï¼Œå°†é¡¶å±‚çš„<code>app.wxss</code>æ–‡ä»¶æ”¹æ‰ï¼Œä¸å†ç›´æ¥å¯¹<code>&lt;text&gt;</code>è®¾ç½®æ ·å¼ï¼Œæ”¹æˆå¯¹<code>class</code>è®¾ç½®æ ·å¼ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**app.wxss**/</span></span><br><span class="line">page &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: pink;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.title</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">24pt</span>;</span><br><span class="line">  <span class="attribute">color</span>:rebeccapurple;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œæ ·å¼è®¾ç½®åœ¨ class ä¸Šé¢ï¼ˆ<code>.title</code>ï¼‰ï¼Œè¿™æ ·å°±å¯ä»¥è®©ä¸åŒçš„<code>class</code>å‘ˆç°ä¸åŒçš„æ ·å¼ã€‚ä¿®æ”¹ä¹‹åï¼Œé¡µé¢çš„æ¸²æŸ“ç»“æœå¹¶ä¸ä¼šæœ‰å˜åŒ–ã€‚</p><h2 id="0x02-Flexå¸ƒå±€"><a href="#0x02-Flexå¸ƒå±€" class="headerlink" title="0x02 Flexå¸ƒå±€"></a>0x02 Flexå¸ƒå±€</h2><p>å„ç§é¡µé¢å…ƒç´ çš„ä½ç½®å…³ç³»ï¼Œç§°ä¸ºå¸ƒå±€ï¼ˆlayoutï¼‰ï¼Œå°ç¨‹åºå®˜æ–¹æ¨èä½¿ç”¨ Flex å¸ƒå±€ã€‚</p><p>ç½‘é¡µå¸ƒå±€ï¼ˆlayoutï¼‰æ˜¯ CSS çš„ä¸€ä¸ªé‡ç‚¹åº”ç”¨:</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/bg2015071001.gif" alt="img"></p><p>å¸ƒå±€çš„ä¼ ç»Ÿè§£å†³æ–¹æ¡ˆï¼ŒåŸºäº<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/CSS/box_model">ç›’çŠ¶æ¨¡å‹</a>ï¼Œä¾èµ– <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/CSS/display"><code>display</code></a> å±æ€§ + <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/CSS/position"><code>position</code></a>å±æ€§ + <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/CSS/float"><code>float</code></a>å±æ€§ã€‚å®ƒå¯¹äºé‚£äº›ç‰¹æ®Šå¸ƒå±€éå¸¸ä¸æ–¹ä¾¿ï¼Œæ¯”å¦‚ï¼Œ<a target="_blank" rel="noopener" href="https://css-tricks.com/centering-css-complete-guide/">å‚ç›´å±…ä¸­</a>å°±ä¸å®¹æ˜“å®ç°ã€‚</p><p>2009å¹´ï¼ŒW3C æå‡ºäº†ä¸€ç§æ–°çš„æ–¹æ¡ˆâ€”-Flex å¸ƒå±€ï¼Œå¯ä»¥ç®€ä¾¿ã€å®Œæ•´ã€å“åº”å¼åœ°å®ç°å„ç§é¡µé¢å¸ƒå±€ã€‚ç›®å‰ï¼Œå®ƒå·²ç»å¾—åˆ°äº†æ‰€æœ‰æµè§ˆå™¨çš„æ”¯æŒï¼Œè¿™æ„å‘³ç€ï¼Œç°åœ¨å°±èƒ½å¾ˆå®‰å…¨åœ°ä½¿ç”¨è¿™é¡¹åŠŸèƒ½ã€‚</p><p>æ”¯æŒçš„æµè§ˆå™¨ï¼ˆBrowser Supportï¼‰ï¼š</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/bg2015071003.jpg" alt="img"></p><p>Flex æ˜¯ Flexible Box çš„ç¼©å†™ï¼Œæ„ä¸ºâ€å¼¹æ€§å¸ƒå±€â€ï¼Œç”¨æ¥ä¸ºç›’çŠ¶æ¨¡å‹æä¾›æœ€å¤§çš„çµæ´»æ€§ã€‚</p><p>ä»»ä½•ä¸€ä¸ªå®¹å™¨éƒ½å¯ä»¥æŒ‡å®šä¸º Flex å¸ƒå±€ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¡Œå†…å…ƒç´ ä¹Ÿå¯ä»¥ä½¿ç”¨ Flex å¸ƒå±€ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Webkit å†…æ ¸çš„æµè§ˆå™¨ï¼Œå¿…é¡»åŠ ä¸Š<code>-webkit</code>å‰ç¼€ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-flex; <span class="comment">/* Safari */</span></span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼Œè®¾ä¸º Flex å¸ƒå±€ä»¥åï¼Œå­å…ƒç´ çš„<code>float</code>ã€<code>clear</code>å’Œ<code>vertical-align</code>å±æ€§å°†å¤±æ•ˆã€‚</p></blockquote><h3 id="0x0201-Flexå¸ƒå±€çš„åŸºæœ¬æ¦‚å¿µ"><a href="#0x0201-Flexå¸ƒå±€çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="0x0201 Flexå¸ƒå±€çš„åŸºæœ¬æ¦‚å¿µ"></a>0x0201 Flexå¸ƒå±€çš„åŸºæœ¬æ¦‚å¿µ</h3><p>é‡‡ç”¨ Flex å¸ƒå±€çš„å…ƒç´ ï¼Œç§°ä¸º Flex å®¹å™¨ï¼ˆflex containerï¼‰ï¼Œç®€ç§°â€å®¹å™¨â€ã€‚å®ƒçš„æ‰€æœ‰å­å…ƒç´ è‡ªåŠ¨æˆä¸ºå®¹å™¨æˆå‘˜ï¼Œç§°ä¸º Flex é¡¹ç›®ï¼ˆflex itemï¼‰ï¼Œç®€ç§°â€é¡¹ç›®â€ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/bg2015071004.png" alt="img"></p><p>å®¹å™¨é»˜è®¤å­˜åœ¨ä¸¤æ ¹è½´ï¼šæ°´å¹³çš„ä¸»è½´ï¼ˆmain axisï¼‰å’Œå‚ç›´çš„äº¤å‰è½´ï¼ˆcross axisï¼‰ã€‚ä¸»è½´çš„å¼€å§‹ä½ç½®ï¼ˆä¸è¾¹æ¡†çš„äº¤å‰ç‚¹ï¼‰å«åš<code>main start</code>ï¼Œç»“æŸä½ç½®å«åš<code>main end</code>ï¼›äº¤å‰è½´çš„å¼€å§‹ä½ç½®å«åš<code>cross start</code>ï¼Œç»“æŸä½ç½®å«åš<code>cross end</code>ã€‚</p><p>é¡¹ç›®é»˜è®¤æ²¿ä¸»è½´æ’åˆ—ã€‚å•ä¸ªé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´å«åš<code>main size</code>ï¼Œå æ®çš„äº¤å‰è½´ç©ºé—´å«åš<code>cross size</code>ã€‚</p><h3 id="0x0202-Flexå¸ƒå±€å®¹å™¨çš„å±æ€§"><a href="#0x0202-Flexå¸ƒå±€å®¹å™¨çš„å±æ€§" class="headerlink" title="0x0202 Flexå¸ƒå±€å®¹å™¨çš„å±æ€§"></a>0x0202 Flexå¸ƒå±€å®¹å™¨çš„å±æ€§</h3><p>ä»¥ä¸‹6ä¸ªå±æ€§è®¾ç½®åœ¨å®¹å™¨ä¸Šã€‚</p><ul><li>flex-direction</li><li>flex-wrap</li><li>flex-flow</li><li>justify-content</li><li>align-items</li><li>align-content</li></ul><h4 id="0x020201-flex-direction"><a href="#0x020201-flex-direction" class="headerlink" title="0x020201 flex-direction"></a>0x020201 flex-direction</h4><p><code>flex-direction</code>å±æ€§å†³å®šä¸»è½´çš„æ–¹å‘ï¼ˆå³é¡¹ç›®çš„æ’åˆ—æ–¹å‘ï¼‰ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">flex-direction</span>: row | row-reverse | column | column-reverse;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/bg2015071005.png" alt="img"></p><h4 id="0x020202-flex-wrap"><a href="#0x020202-flex-wrap" class="headerlink" title="0x020202 flex-wrap"></a>0x020202 flex-wrap</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œé¡¹ç›®éƒ½æ’åœ¨ä¸€æ¡çº¿ï¼ˆåˆç§°â€è½´çº¿â€ï¼‰ä¸Šã€‚<code>flex-wrap</code>å±æ€§å®šä¹‰ï¼Œå¦‚æœä¸€æ¡è½´çº¿æ’ä¸ä¸‹ï¼Œå¦‚ä½•æ¢è¡Œã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/bg2015071006.png" alt="img"></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span>&#123;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: nowrap | wrap | wrap-reverse;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ƒå¯èƒ½å–ä¸‰ä¸ªå€¼ã€‚</p><p>ï¼ˆ1ï¼‰<code>nowrap</code>ï¼ˆé»˜è®¤ï¼‰ï¼šä¸æ¢è¡Œã€‚</p><table><thead><tr><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>10</th></tr></thead></table><p>ï¼ˆ2ï¼‰<code>wrap</code>ï¼šæ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸Šæ–¹ã€‚</p><table><thead><tr><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th></tr></thead><tbody><tr><td>7</td><td>8</td><td>9</td><td>10</td><td></td><td></td></tr></tbody></table><p>ï¼ˆ3ï¼‰<code>wrap-reverse</code>ï¼šæ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸‹æ–¹ã€‚</p><table><thead><tr><th>7</th><th>8</th><th>9</th><th>10</th><th></th><th></th></tr></thead><tbody><tr><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td></tr></tbody></table><h4 id="0x020203-flex-flow"><a href="#0x020203-flex-flow" class="headerlink" title="0x020203 flex-flow"></a>0x020203 flex-flow</h4><p><code>flex-flow</code>å±æ€§æ˜¯<code>flex-direction</code>å±æ€§å’Œ<code>flex-wrap</code>å±æ€§çš„ç®€å†™å½¢å¼ï¼Œé»˜è®¤å€¼ä¸º<code>row nowrap</code>ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">flex-flow</span>: &lt;flex-direction&gt; || &lt;flex-wrap&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="0x020204-justify-content"><a href="#0x020204-justify-content" class="headerlink" title="0x020204 justify-content"></a>0x020204 justify-content</h4><p><code>justify-content</code>å±æ€§å®šä¹‰äº†é¡¹ç›®åœ¨ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">justify-content</span>: flex-start | flex-end | center | space-between | space-around;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/bg2015071010.png" alt="img"></p><p>å®ƒå¯èƒ½å–5ä¸ªå€¼ï¼Œå…·ä½“å¯¹é½æ–¹å¼ä¸è½´çš„æ–¹å‘æœ‰å…³ã€‚ä¸‹é¢å‡è®¾ä¸»è½´ä¸ºä»å·¦åˆ°å³ã€‚</p><ul><li><code>flex-start</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼šå·¦å¯¹é½</li><li><code>flex-end</code>ï¼šå³å¯¹é½</li><li><code>center</code>ï¼š å±…ä¸­</li><li><code>space-between</code>ï¼šä¸¤ç«¯å¯¹é½ï¼Œé¡¹ç›®ä¹‹é—´çš„é—´éš”éƒ½ç›¸ç­‰ã€‚</li><li><code>space-around</code>ï¼šæ¯ä¸ªé¡¹ç›®ä¸¤ä¾§çš„é—´éš”ç›¸ç­‰ã€‚æ‰€ä»¥ï¼Œé¡¹ç›®ä¹‹é—´çš„é—´éš”æ¯”é¡¹ç›®ä¸è¾¹æ¡†çš„é—´éš”å¤§ä¸€å€ã€‚</li></ul><h4 id="0x020205-align-items"><a href="#0x020205-align-items" class="headerlink" title="0x020205 align-items"></a>0x020205 align-items</h4><p><code>align-items</code>å±æ€§å®šä¹‰é¡¹ç›®åœ¨äº¤å‰è½´ä¸Šå¦‚ä½•å¯¹é½ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">align-items</span>: flex-start | flex-end | center | baseline | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/bg2015071011.png" alt="img"></p><p>å®ƒå¯èƒ½å–5ä¸ªå€¼ã€‚å…·ä½“çš„å¯¹é½æ–¹å¼ä¸äº¤å‰è½´çš„æ–¹å‘æœ‰å…³ï¼Œä¸‹é¢å‡è®¾äº¤å‰è½´ä»ä¸Šåˆ°ä¸‹ã€‚</p><ul><li><code>flex-start</code>ï¼šäº¤å‰è½´çš„èµ·ç‚¹å¯¹é½ã€‚</li><li><code>flex-end</code>ï¼šäº¤å‰è½´çš„ç»ˆç‚¹å¯¹é½ã€‚</li><li><code>center</code>ï¼šäº¤å‰è½´çš„ä¸­ç‚¹å¯¹é½ã€‚</li><li><code>baseline</code>: é¡¹ç›®çš„ç¬¬ä¸€è¡Œæ–‡å­—çš„åŸºçº¿å¯¹é½ã€‚</li><li><code>stretch</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼šå¦‚æœé¡¹ç›®æœªè®¾ç½®é«˜åº¦æˆ–è®¾ä¸ºautoï¼Œå°†å æ»¡æ•´ä¸ªå®¹å™¨çš„é«˜åº¦ã€‚</li></ul><h4 id="0x020206-align-content"><a href="#0x020206-align-content" class="headerlink" title="0x020206 align-content"></a>0x020206 align-content</h4><p><code>align-content</code>å±æ€§å®šä¹‰äº†å¤šæ ¹è½´çº¿çš„å¯¹é½æ–¹å¼ã€‚å¦‚æœé¡¹ç›®åªæœ‰ä¸€æ ¹è½´çº¿ï¼Œè¯¥å±æ€§ä¸èµ·ä½œç”¨ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.box</span> &#123;</span><br><span class="line">  <span class="attribute">align-content</span>: flex-start | flex-end | center | space-between | space-around | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/bg2015071012.png" alt="img"></p><p>è¯¥å±æ€§å¯èƒ½å–6ä¸ªå€¼ã€‚</p><ul><li><code>flex-start</code>ï¼šä¸äº¤å‰è½´çš„èµ·ç‚¹å¯¹é½ã€‚</li><li><code>flex-end</code>ï¼šä¸äº¤å‰è½´çš„ç»ˆç‚¹å¯¹é½ã€‚</li><li><code>center</code>ï¼šä¸äº¤å‰è½´çš„ä¸­ç‚¹å¯¹é½ã€‚</li><li><code>space-between</code>ï¼šä¸äº¤å‰è½´ä¸¤ç«¯å¯¹é½ï¼Œè½´çº¿ä¹‹é—´çš„é—´éš”å¹³å‡åˆ†å¸ƒã€‚</li><li><code>space-around</code>ï¼šæ¯æ ¹è½´çº¿ä¸¤ä¾§çš„é—´éš”éƒ½ç›¸ç­‰ã€‚æ‰€ä»¥ï¼Œè½´çº¿ä¹‹é—´çš„é—´éš”æ¯”è½´çº¿ä¸è¾¹æ¡†çš„é—´éš”å¤§ä¸€å€ã€‚</li><li><code>stretch</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼šè½´çº¿å æ»¡æ•´ä¸ªäº¤å‰è½´ã€‚</li></ul><h3 id="0x0203-Flexå¸ƒå±€é¡¹ç›®çš„å±æ€§"><a href="#0x0203-Flexå¸ƒå±€é¡¹ç›®çš„å±æ€§" class="headerlink" title="0x0203 Flexå¸ƒå±€é¡¹ç›®çš„å±æ€§"></a>0x0203 Flexå¸ƒå±€é¡¹ç›®çš„å±æ€§</h3><p>ä»¥ä¸‹6ä¸ªå±æ€§è®¾ç½®åœ¨é¡¹ç›®ä¸Šã€‚</p><ul><li><code>order</code></li><li><code>flex-grow</code></li><li><code>flex-shrink</code></li><li><code>flex-basis</code></li><li><code>flex</code></li><li><code>align-self</code></li></ul><h4 id="0x020301-order"><a href="#0x020301-order" class="headerlink" title="0x020301 order"></a>0x020301 order</h4><p><code>order</code>å±æ€§å®šä¹‰é¡¹ç›®çš„æ’åˆ—é¡ºåºã€‚æ•°å€¼è¶Šå°ï¼Œæ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤ä¸º0ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">order</span>: &lt;integer&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/bg2015071013.png" alt="img"></p><h4 id="0x020302-flex-grow"><a href="#0x020302-flex-grow" class="headerlink" title="0x020302 flex-grow"></a>0x020302 flex-grow</h4><p><code>flex-grow</code>å±æ€§å®šä¹‰é¡¹ç›®çš„æ”¾å¤§æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º<code>0</code>ï¼Œå³å¦‚æœå­˜åœ¨å‰©ä½™ç©ºé—´ï¼Œä¹Ÿä¸æ”¾å¤§ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex-grow</span>: &lt;number&gt;; <span class="comment">/* default 0 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/bg2015071014.png" alt="img"></p><p>å¦‚æœæ‰€æœ‰é¡¹ç›®çš„<code>flex-grow</code>å±æ€§éƒ½ä¸º1ï¼Œåˆ™å®ƒä»¬å°†ç­‰åˆ†å‰©ä½™ç©ºé—´ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚å¦‚æœä¸€ä¸ªé¡¹ç›®çš„<code>flex-grow</code>å±æ€§ä¸º2ï¼Œå…¶ä»–é¡¹ç›®éƒ½ä¸º1ï¼Œåˆ™å‰è€…å æ®çš„å‰©ä½™ç©ºé—´å°†æ¯”å…¶ä»–é¡¹å¤šä¸€å€ã€‚</p><h4 id="0x020303-flex-shrink"><a href="#0x020303-flex-shrink" class="headerlink" title="0x020303 flex-shrink"></a>0x020303 flex-shrink</h4><p><code>flex-shrink</code>å±æ€§å®šä¹‰äº†é¡¹ç›®çš„ç¼©å°æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º1ï¼Œå³å¦‚æœç©ºé—´ä¸è¶³ï¼Œè¯¥é¡¹ç›®å°†ç¼©å°ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: &lt;number&gt;; <span class="comment">/* default 1 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/bg2015071015.jpg" alt="img"></p><p>å¦‚æœæ‰€æœ‰é¡¹ç›®çš„<code>flex-shrink</code>å±æ€§éƒ½ä¸º1ï¼Œå½“ç©ºé—´ä¸è¶³æ—¶ï¼Œéƒ½å°†ç­‰æ¯”ä¾‹ç¼©å°ã€‚å¦‚æœä¸€ä¸ªé¡¹ç›®çš„<code>flex-shrink</code>å±æ€§ä¸º0ï¼Œå…¶ä»–é¡¹ç›®éƒ½ä¸º1ï¼Œåˆ™ç©ºé—´ä¸è¶³æ—¶ï¼Œå‰è€…ä¸ç¼©å°ã€‚</p><p>è´Ÿå€¼å¯¹è¯¥å±æ€§æ— æ•ˆã€‚</p><h4 id="0x020304-flex-basis"><a href="#0x020304-flex-basis" class="headerlink" title="0x020304 flex-basis"></a>0x020304 flex-basis</h4><p><code>flex-basis</code>å±æ€§å®šä¹‰äº†åœ¨åˆ†é…å¤šä½™ç©ºé—´ä¹‹å‰ï¼Œé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´ï¼ˆmain sizeï¼‰ã€‚æµè§ˆå™¨æ ¹æ®è¿™ä¸ªå±æ€§ï¼Œè®¡ç®—ä¸»è½´æ˜¯å¦æœ‰å¤šä½™ç©ºé—´ã€‚å®ƒçš„é»˜è®¤å€¼ä¸º<code>auto</code>ï¼Œå³é¡¹ç›®çš„æœ¬æ¥å¤§å°ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex-basis</span>: &lt;length&gt; | auto; <span class="comment">/* default auto */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ƒå¯ä»¥è®¾ä¸ºè·Ÿ<code>width</code>æˆ–<code>height</code>å±æ€§ä¸€æ ·çš„å€¼ï¼ˆæ¯”å¦‚350pxï¼‰ï¼Œåˆ™é¡¹ç›®å°†å æ®å›ºå®šç©ºé—´ã€‚</p><h4 id="0x020305-flex"><a href="#0x020305-flex" class="headerlink" title="0x020305 flex"></a>0x020305 flex</h4><p><code>flex</code>å±æ€§æ˜¯<code>flex-grow</code>, <code>flex-shrink</code> å’Œ <code>flex-basis</code>çš„ç®€å†™ï¼Œé»˜è®¤å€¼ä¸º<code>0 1 auto</code>ã€‚åä¸¤ä¸ªå±æ€§å¯é€‰ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: none | [ &lt;<span class="string">&#x27;flex-grow&#x27;</span>&gt; &lt;<span class="string">&#x27;flex-shrink&#x27;</span>&gt;? || &lt;<span class="string">&#x27;flex-basis&#x27;</span>&gt; ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥å±æ€§æœ‰ä¸¤ä¸ªå¿«æ·å€¼ï¼š<code>auto</code> (<code>1 1 auto</code>) å’Œ none (<code>0 0 auto</code>)ã€‚</p><p>å»ºè®®ä¼˜å…ˆä½¿ç”¨è¿™ä¸ªå±æ€§ï¼Œè€Œä¸æ˜¯å•ç‹¬å†™ä¸‰ä¸ªåˆ†ç¦»çš„å±æ€§ï¼Œå› ä¸ºæµè§ˆå™¨ä¼šæ¨ç®—ç›¸å…³å€¼ã€‚</p><h4 id="0x020306-align-self"><a href="#0x020306-align-self" class="headerlink" title="0x020306 align-self"></a>0x020306 align-self</h4><p><code>align-self</code>å±æ€§å…è®¸å•ä¸ªé¡¹ç›®æœ‰ä¸å…¶ä»–é¡¹ç›®ä¸ä¸€æ ·çš„å¯¹é½æ–¹å¼ï¼Œå¯è¦†ç›–<code>align-items</code>å±æ€§ã€‚é»˜è®¤å€¼ä¸º<code>auto</code>ï¼Œè¡¨ç¤ºç»§æ‰¿çˆ¶å…ƒç´ çš„<code>align-items</code>å±æ€§ï¼Œå¦‚æœæ²¡æœ‰çˆ¶å…ƒç´ ï¼Œåˆ™ç­‰åŒäº<code>stretch</code>ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">align-self</span>: auto | flex-start | flex-end | center | baseline | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/bg2015071016.png" alt="img"></p><p>è¯¥å±æ€§å¯èƒ½å–6ä¸ªå€¼ï¼Œé™¤äº†autoï¼Œå…¶ä»–éƒ½ä¸align-itemså±æ€§å®Œå…¨ä¸€è‡´ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å­¦ä¹  </category>
          
          <category> å¾®ä¿¡å°ç¨‹åº </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> JavaScript </tag>
            
            <tag> å°ç¨‹åº </tag>
            
            <tag> WeChat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Boot å­¦ä¹ ç¬”è®° 11</title>
      <link href="/2021/08/15/439a96847eed-q1jun/"/>
      <url>/2021/08/15/439a96847eed-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="Spring-Boot-å­¦ä¹ ç¬”è®°-11"><a href="#Spring-Boot-å­¦ä¹ ç¬”è®°-11" class="headerlink" title="Spring Boot å­¦ä¹ ç¬”è®° 11"></a>Spring Boot å­¦ä¹ ç¬”è®° 11</h1><h2 id="0x01-Dubbo-SSMæ¡†æ¶"><a href="#0x01-Dubbo-SSMæ¡†æ¶" class="headerlink" title="0x01 Dubbo-SSMæ¡†æ¶"></a>0x01 Dubbo-SSMæ¡†æ¶</h2><p><em>æ¥å£å·¥ç¨‹ï¼š</em><br>    å­˜æ”¾å®ä½“Beanå’Œä¸šåŠ¡æ¥å£<br>_æœåŠ¡æä¾›è€…ï¼š_å®ƒæ˜¯ä¸€ä¸ªSpringbootæ¡†æ¶webé¡¹ç›®ï¼Œé›†æˆMyBatisï¼ŒRedis</p><ul><li>æ·»åŠ ä¾èµ–ï¼šMybatisä¾èµ–ï¼ŒMysqlé©±åŠ¨ä¾èµ–ï¼ŒDubboä¾èµ–ï¼Œzookeeperä¾èµ–ï¼ŒRedisä¾èµ–</li><li>é…ç½®Springbootæ ¸å¿ƒé…ç½®æ–‡ä»¶<ul><li>é…ç½®è¿æ¥æ•°æ®åº“</li><li>é…ç½®è¿æ¥redisæ•°æ®åº“dubbo<br>  _æœåŠ¡æ¶ˆè´¹è€…ï¼š_å®ƒæ˜¯ä¸€ä¸ªSpringbootæ¡†æ¶webé¡¹ç›®ï¼Œé›†æˆJSPï¼Œdubbo</li></ul></li><li>æ·»åŠ ä¾èµ–ï¼šDubboï¼Œzookeeperä¾èµ–ï¼Œè§£æJSPé¡µé¢çš„ä¾èµ–ï¼Œæ¥å£å·¥ç¨‹</li><li>é…ç½®Springbootæ ¸å¿ƒé…ç½®æ–‡ä»¶<ul><li>é…ç½®è¯•å›¾è§£æå™¨</li><li>é…ç½®dubbo</li></ul></li></ul><h2 id="0x02-æ„å»ºDubbo-SSMæ¡†æ¶"><a href="#0x02-æ„å»ºDubbo-SSMæ¡†æ¶" class="headerlink" title="0x02 æ„å»ºDubbo-SSMæ¡†æ¶"></a>0x02 æ„å»ºDubbo-SSMæ¡†æ¶</h2><p><em><strong>First and formost</strong></em>ï¼ˆé¦–å…ˆï¼‰ï¼Œæˆ‘ä»¬ä¾æ¬¡åˆ›å»ºMavenæ¥å£é¡¹ç›®å·¥ç¨‹ã€Springboot+MavenæœåŠ¡æä¾›è€…ï¼ˆProviderï¼‰é¡¹ç›®å·¥ç¨‹ã€Springboot+MavenæœåŠ¡æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰é¡¹ç›®å·¥ç¨‹ã€‚</p><p><em><strong>In addition</strong></em>ï¼ˆå…¶æ¬¡ï¼‰ï¼Œæˆ‘ä»¬åœ¨æä¾›è€…ï¼ˆProviderï¼‰é¡¹ç›®å·¥ç¨‹æ–‡ä»¶ä¸‹æ·»åŠ ä¸€ä¸ªMybatisé€†å‘å·¥ç¨‹çš„é…ç½®æ–‡ä»¶GeneratorMapper.xml:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">generatorConfiguration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æŒ‡å®šè¿æ¥æ•°æ®åº“çš„ JDBC é©±åŠ¨åŒ…æ‰€åœ¨ä½ç½®ï¼ŒæŒ‡å®šåˆ°ä½ æœ¬æœºçš„å®Œæ•´è·¯å¾„ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">classPathEntry</span> <span class="attr">location</span>=<span class="string">&quot;D:\mysql-connector-java-5.1.38.jar&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½® table è¡¨ä¿¡æ¯å†…å®¹ä½“ï¼ŒtargetRuntime æŒ‡å®šé‡‡ç”¨ MyBatis3 çš„ç‰ˆæœ¬ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">&quot;tables&quot;</span> <span class="attr">targetRuntime</span>=<span class="string">&quot;MyBatis3&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æŠ‘åˆ¶ç”Ÿæˆæ³¨é‡Šï¼Œç”±äºç”Ÿæˆçš„æ³¨é‡Šéƒ½æ˜¯è‹±æ–‡çš„ï¼Œå¯ä»¥ä¸è®©å®ƒç”Ÿæˆ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suppressAllComments&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">jdbcConnection</span> <span class="attr">driverClass</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">connectionURL</span>=<span class="string">&quot;jdbc:mysql://192.168.154.128:3306/springboot&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">userId</span>=<span class="string">&quot;root&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">password</span>=<span class="string">&quot;123&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">jdbcConnection</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ç”Ÿæˆ model ç±»ï¼ŒtargetPackage æŒ‡å®š model ç±»çš„åŒ…åï¼Œ targetProject æŒ‡å®š</span></span><br><span class="line"><span class="comment">        ç”Ÿæˆçš„ model æ”¾åœ¨ eclipse çš„å“ªä¸ªå·¥ç¨‹ä¸‹é¢--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.bjpowernode.springboot.model&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">targetProject</span>=<span class="string">&quot;C:\Users\Administrator\Desktop\04-SpringBoot\code\IDEA-springboot-projectes\023-springboot-dubbo-ssm-interface\src\main\java&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;trimStrings&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ç”Ÿæˆ MyBatis çš„ Mapper.xml æ–‡ä»¶ï¼ŒtargetPackage æŒ‡å®š mapper.xml æ–‡ä»¶çš„</span></span><br><span class="line"><span class="comment">        åŒ…åï¼Œ targetProject æŒ‡å®šç”Ÿæˆçš„ mapper.xml æ”¾åœ¨ eclipse çš„å“ªä¸ªå·¥ç¨‹ä¸‹é¢ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.bjpowernode.springboot.mapper&quot;</span></span></span><br><span class="line"><span class="tag">                         <span class="attr">targetProject</span>=<span class="string">&quot;src/main/java&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ç”Ÿæˆ MyBatis çš„ Mapper æ¥å£ç±»æ–‡ä»¶,targetPackage æŒ‡å®š Mapper æ¥å£ç±»çš„åŒ…</span></span><br><span class="line"><span class="comment">        åï¼Œ targetProject æŒ‡å®šç”Ÿæˆçš„ Mapper æ¥å£æ”¾åœ¨ eclipse çš„å“ªä¸ªå·¥ç¨‹ä¸‹é¢ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">type</span>=<span class="string">&quot;XMLMAPPER&quot;</span></span></span><br><span class="line"><span class="tag">                             <span class="attr">targetPackage</span>=<span class="string">&quot;com.bjpowernode.springboot.mapper&quot;</span> <span class="attr">targetProject</span>=<span class="string">&quot;src/main/java&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- æ•°æ®åº“è¡¨ååŠå¯¹åº”çš„ Java æ¨¡å‹ç±»å --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;t_student&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Student&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableCountByExample</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableUpdateByExample</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableDeleteByExample</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableSelectByExample</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">selectByExampleQueryId</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼Œè¿™é‡Œè¦æ”¹æˆç»å¯¹è·¯å¾„ï¼è€Œä¸”ä¸èƒ½å‡ºç°ä¸­æ–‡ï¼Œå¦åˆ™æ„å»ºé¡¹ç›®ä¼šå‡ºç°é—®é¢˜ã€‚</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!-- ç”Ÿæˆ model ç±»ï¼ŒtargetPackage æŒ‡å®š model ç±»çš„åŒ…åï¼Œ targetProject æŒ‡å®š</span></span><br><span class="line"><span class="comment">        ç”Ÿæˆçš„ model æ”¾åœ¨ eclipse çš„å“ªä¸ªå·¥ç¨‹ä¸‹é¢--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.bjpowernode.springboot.model&quot;</span></span></span><br><span class="line"><span class="tag"><span class="attr">targetProject</span>=<span class="string">&quot;C:\Users\Administrator\Desktop\04-SpringBoot\code\IDEA-springboot-projectes\023-springboot-dubbo-ssm-interface\src\main\java&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;trimStrings&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨POM.xmlä¸­æ·»åŠ ç”Ÿæˆæ’ä»¶ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--mybatis ä»£ç è‡ªåŠ¨ç”Ÿæˆæ’ä»¶--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--é…ç½®æ–‡ä»¶çš„ä½ç½®--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">configurationFile</span>&gt;</span>GeneratorMapper.xml<span class="tag">&lt;/<span class="name">configurationFile</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">verbose</span>&gt;</span>true<span class="tag">&lt;/<span class="name">verbose</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">overwrite</span>&gt;</span>true<span class="tag">&lt;/<span class="name">overwrite</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å†æ·»åŠ Redisä¾èµ–ï¼Œæ¥å£å·¥ç¨‹ä¾èµ–ï¼Œzookeeperæ³¨å†Œä¸­å¿ƒä¾èµ–ï¼ŒDubboä¾èµ–ï¼ŒMybatisä¾èµ–ï¼ŒMysqlé©±åŠ¨ä¾èµ–åˆ°POM.xmlä¸­:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--Dubboé›†æˆSpringBootèµ·æ­¥ä¾èµ–--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dubbo-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--æ³¨å†Œä¸­å¿ƒ--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.101tec<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zkclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--MyBatisé›†æˆSpringbootèµ·æ­¥ä¾èµ–--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--MySQLé©±åŠ¨--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--SpringBooté›†æˆRedisèµ·æ­¥ä¾èµ–--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--æ¥å£å·¥ç¨‹--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.bjpowernode.springboot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>023-springboot-dubbo-ssm-interface<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é…ç½®Provideré¡¹ç›®ä¸­çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶:</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é…ç½®å†…åµŒTomcatç«¯å£å·</span></span><br><span class="line"><span class="attr">server.port</span>=<span class="string">8081</span></span><br><span class="line"><span class="comment">#è®¾ç½®ä¸Šä¸‹æ–‡æ ¹</span></span><br><span class="line"><span class="attr">server.servlet.context-path</span>=<span class="string">/</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#è®¾ç½®è¿æ¥æ•°æ®åº“ä¿¡æ¯</span></span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/springboot?useUnicode=true&amp;characterEncoding=UTF-8&amp;useJDBCCompliantTimezoneShift=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=GMT%2B8</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">username</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">password</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#è®¾ç½®dubboé…ç½®</span></span><br><span class="line"><span class="attr">spring.application.name</span>=<span class="string">024-springboot-dubbo-ssm-provider</span></span><br><span class="line"><span class="comment">#å£°æ˜å½“å‰å·¥ç¨‹ä¸ºæœåŠ¡æä¾›è€…</span></span><br><span class="line"><span class="attr">spring.dubbo.server</span>=<span class="string">true</span></span><br><span class="line"><span class="comment">#è®¾ç½®æ³¨å†Œä¸­å¿ƒ</span></span><br><span class="line"><span class="attr">spring.dubbo.registry</span>=<span class="string">zookeeper://localhost:2181</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#è®¾ç½®redisé…ç½®</span></span><br><span class="line"><span class="attr">spring.redis.host</span>=<span class="string">127.0.0.1</span></span><br><span class="line"><span class="attr">spring.redis.port</span>=<span class="string">6379</span></span><br><span class="line"><span class="attr">spring.redis.password</span>=<span class="string"></span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼šMybatisç”Ÿæˆçš„é€†å‘æ–‡ä»¶Modelä¸­çš„javaæ„é€ ç±»ä¸€å®šè¦åºåˆ—åŒ–</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjpowernode.springboot.model;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="comment">// implements Serializableåºåˆ—åŒ–</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em><strong>In the second place</strong></em>ï¼Œåœ¨Consumeré¡¹ç›®å·¥ç¨‹æ–‡ä»¶ä¸­æ·»åŠ POM.xmlä¾èµ–:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--Dubboé›†æˆSpringBootæ¡†æ¶èµ·æ­¥ä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dubbo-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--zookeeperæ³¨å†Œä¸­å¿ƒ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.101tec<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zkclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--æ¥å£å·¥ç¨‹--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.bjpowernode.springboot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>023-springboot-dubbo-ssm-interface<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--SpringBooté›†æˆJSP,ä»…ä»…åªæ˜¯å±•ç¤ºJSPé¡µé¢éœ€è¦æ·»åŠ è§£æjspé¡µé¢çš„ä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.embed<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat-embed-jasper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å¹¶ä¸”æ·»åŠ JSPæ–‡ä»¶åˆ°ç¼–è¯‘èµ„æºæ–‡ä»¶ä¸­ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/webapp<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">targetPath</span>&gt;</span>META-INF/resources<span class="tag">&lt;/<span class="name">targetPath</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">include</span>&gt;</span>*.*<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é…ç½®Consumeré¡¹ç›®å·¥ç¨‹çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è®¾ç½®å†…åµŒTomcatç«¯å£å·</span></span><br><span class="line"><span class="attr">server.port</span>=<span class="string">8080</span></span><br><span class="line"><span class="attr">server.servlet.context-path</span>=<span class="string">/</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#è®¾ç½®dubboé…ç½®</span></span><br><span class="line"><span class="attr">spring.application.name</span>=<span class="string">025-springboot-dubbo-ssm-consumer</span></span><br><span class="line"><span class="attr">spring.dubbo.registry</span>=<span class="string">zookeeper://127.0.0.1:2181</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#é…ç½®è§†å›¾è§£æå™¨</span></span><br><span class="line"><span class="attr">spring.mvc.view.prefix</span>=<span class="string">/</span></span><br><span class="line"><span class="attr">spring.mvc.view.suffix</span>=<span class="string">.jsp</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥åœ¨Application.javaçš„åŒçº§ç›®å½•æˆ–æ¬¡çº§ç›®å½•æ·»åŠ æ§åˆ¶å±‚åŒ…webï¼ŒåŒ…å†…åˆ›å»ºStudentController.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjpowernode.springboot.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.dubbo.config.annotation.Reference;</span><br><span class="line"><span class="keyword">import</span> com.bjpowernode.springboot.model.Student;</span><br><span class="line"><span class="keyword">import</span> com.bjpowernode.springboot.service.StudentService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Reference(interfaceName = &quot;com.bjpowernode.springboot.service.StudentService&quot;, version = &quot;1.0.0&quot;, check = false)</span></span><br><span class="line">    <span class="keyword">private</span> StudentService studentService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//RESTFulé£æ ¼</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/student/detail/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">studentDetail</span><span class="params">(Model model,</span></span><br><span class="line"><span class="params">                                <span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> studentService.queryStudentById(id);</span><br><span class="line"></span><br><span class="line">        model.addAttribute(<span class="string">&quot;student&quot;</span>, student);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;studentDetail&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(value = &quot;/student/all/count&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="meta">@ResponseBody</span></span><br><span class="line">    Object <span class="title function_">allStudentCount</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">allStudentCount</span> <span class="operator">=</span> studentService.queryAllStudentCount();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;å­¦ç”Ÿæ€»äººæ•°ä¸º:&quot;</span> + allStudentCount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸ºäº†å®ç°è¿™ä¸€æ§åˆ¶å±‚ï¼Œæˆ‘ä»¬éœ€è¦å…ˆåœ¨æ¥å£å·¥ç¨‹é¡¹ç›®æ–‡ä»¶ï¼ˆInterfaceï¼‰ä¸­åˆ›å»ºæ‰€éœ€è¦çš„æ¥å£StudentService.java:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjpowernode.springboot.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.bjpowernode.springboot.model.Student;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">StudentService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®å­¦ç”ŸIDæŸ¥è¯¢è¯¦æƒ…</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Student <span class="title function_">queryStudentById</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–å­¦ç”Ÿæ€»äººæ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Integer <span class="title function_">queryAllStudentCount</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨æœåŠ¡æä¾›è€…ï¼ˆProvideï¼‰ä¸­åˆ›å»ºè¯¥æ¥å£çš„å®ç°ç±»StudentServiceImpl.java:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjpowernode.springboot.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.dubbo.config.annotation.Service;</span><br><span class="line"><span class="keyword">import</span> com.bjpowernode.springboot.mapper.StudentMapper;</span><br><span class="line"><span class="keyword">import</span> com.bjpowernode.springboot.model.Student;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Service(interfaceName = &quot;com.bjpowernode.springboot.service.StudentService&quot;,version = &quot;1.0.0&quot;,timeout = 15000)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">StudentService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StudentMapper studentMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate&lt;Object,Object&gt; redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Student <span class="title function_">queryStudentById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> studentMapper.selectByPrimaryKey(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">queryAllStudentCount</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æå‡ç³»ç»Ÿæ€§èƒ½,ç”¨æˆ·ä½“éªŒæå‡</span></span><br><span class="line">        <span class="comment">//é¦–å…ˆå»redisç¼“å­˜ä¸­æŸ¥è¯¢,å¦‚æœæœ‰:ç›´æ¥ä½¿ç”¨,å¦‚æœæ²¡æœ‰:å»æ•°æ®åº“æŸ¥è¯¢å¹¶å­˜æ”¾åˆ°redisç¼“å­˜ä¸­</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">allStudentCount</span> <span class="operator">=</span> (Integer) redisTemplate.opsForValue().get(<span class="string">&quot;allStudentCount&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ¤æ–­æ˜¯å¦æœ‰å€¼</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> == allStudentCount) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//å»æ•°æ®åº“æŸ¥è¯¢</span></span><br><span class="line">            allStudentCount = studentMapper.selectAllStudentCount();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//å¹¶å­˜æ”¾åˆ°redisç¼“å­˜ä¸­</span></span><br><span class="line">            redisTemplate.opsForValue().set(<span class="string">&quot;allStudentCount&quot;</span>,allStudentCount,<span class="number">30</span>, TimeUnit.SECONDS);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> allStudentCount;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><em><strong>Last but not least</strong></em>ï¼Œåœ¨Consumeré¡¹ç›®å·¥ç¨‹æ–‡ä»¶ä¸­ï¼Œåœ¨src&#x2F;main&#x2F;ä¸­åˆ›å»ºwebappåŒ…ï¼Œæ¥å­˜æ”¾jspæ–‡ä»¶webapp&#x2F;studentDetail.jsp:</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;å­¦ç”Ÿè¯¦æƒ…&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h3&gt;å­¦ç”Ÿç¼–å·:$&#123;student.id&#125;&lt;/h3&gt;</span><br><span class="line">&lt;h3&gt;å­¦ç”Ÿå§“å:$&#123;student.name&#125;&lt;/h3&gt;</span><br><span class="line">&lt;h3&gt;å­¦ç”Ÿå¹´é¾„:$&#123;student.age&#125;&lt;/h3&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="0x03-è¿è¡ŒDubbo-SSMæ¡†æ¶"><a href="#0x03-è¿è¡ŒDubbo-SSMæ¡†æ¶" class="headerlink" title="0x03 è¿è¡ŒDubbo-SSMæ¡†æ¶"></a>0x03 è¿è¡ŒDubbo-SSMæ¡†æ¶</h2><p>åŒæ—¶æ„å»ºï¼Œå¹¶å¯åŠ¨ä¸‰ä¸ªé¡¹ç›®ï¼š</p><ul><li>Mavenæ¥å£é¡¹ç›®å·¥ç¨‹</li><li>Springboot+MavenæœåŠ¡æä¾›è€…ï¼ˆProviderï¼‰é¡¹ç›®å·¥ç¨‹</li><li>Springboot+MavenæœåŠ¡æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰é¡¹ç›®å·¥ç¨‹<br>æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥<a target="_blank" rel="noopener" href="http://localhost:8080/student/detail/1">http://localhost:8080/student/detail/1</a><br>æµè§ˆå™¨è¾“å‡ºï¼š<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å­¦ç”Ÿç¼–å·ï¼š1</span><br><span class="line">å­¦ç”Ÿå§“åï¼š222</span><br><span class="line">å­¦ç”Ÿå¹´é¾„ï¼š25</span><br></pre></td></tr></table></figure><strong>Dubbo-SSMæ¡†æ¶æ­å»ºæˆåŠŸï¼congratulationsï¼</strong></li></ul>]]></content>
      
      
      <categories>
          
          <category> åç«¯å­¦ä¹  </category>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åç«¯ </tag>
            
            <tag> Spring </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Boot å­¦ä¹ ç¬”è®° 10</title>
      <link href="/2021/08/14/ce8a38b3b2a5-q1jun/"/>
      <url>/2021/08/14/ce8a38b3b2a5-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="Spring-Boot-å­¦ä¹ ç¬”è®°-10"><a href="#Spring-Boot-å­¦ä¹ ç¬”è®°-10" class="headerlink" title="Spring Boot å­¦ä¹ ç¬”è®° 10"></a>Spring Boot å­¦ä¹ ç¬”è®° 10</h1><h2 id="SpringBooté›†æˆDubbo-ä»£ç è°ƒè¯•"><a href="#SpringBooté›†æˆDubbo-ä»£ç è°ƒè¯•" class="headerlink" title="SpringBooté›†æˆDubbo ä»£ç è°ƒè¯•"></a>SpringBooté›†æˆDubbo ä»£ç è°ƒè¯•</h2><p>å‰ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å·²ç»å°† æ¥å£é¡¹ç›®ã€æ¶ˆè´¹è€…é¡¹ç›®ã€æä¾›è€…é¡¹ç›® é…ç½®å®Œæˆï¼Œæ¥ä¸‹æ¥å°±æ˜¯å†™ä»£ç çš„äº‹æƒ…äº†ã€‚<br>åœ¨Consumeré¡¹ç›®çš„æ§åˆ¶å±‚ä¸­: StudentCOntroller.java:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjpowernode.springboot.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.dubbo.config.annotation.Reference;</span><br><span class="line"><span class="keyword">import</span> com.bjpowernode.springboot.service.StudentService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//dubbo:reference interface=&quot;&quot; version=&quot;&quot; check=false</span></span><br><span class="line">    <span class="meta">@Reference(interfaceClass = StudentService.class,version = &quot;1.0.0&quot;,check = false)</span></span><br><span class="line">    <span class="keyword">private</span> StudentService studentService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/student/count&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="meta">@ResponseBody</span> Object <span class="title function_">studentCount</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">allStudentCount</span> <span class="operator">=</span> studentService.queryAllStudentCount();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;å­¦ç”Ÿæ€»äººæ•°ä¸º:&quot;</span>+allStudentCount;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™æˆ‘ä»¬ç”¨åˆ°çš„æ¥å£<code>private StudentService studentService;</code>å¹¶æ²¡æœ‰è¢«åˆ›å»ºï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ª StudentServiceæ¥å£ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸åœ¨æœ¬é¡¹ç›®ä¸­åˆ›å»ºï¼Œè€Œæ˜¯ç§»æ­¥åˆ°Interfaceé¡¹ç›®ä¸­åˆ›å»ºè¿™ä¸ªæ¥å£ã€‚<br>åœ¨Interfaceé¡¹ç›®ä¸­çš„src&#x2F;java&#x2F;sample&#x2F;springboot&#x2F;ä¸­åˆ›å»ºä¸€ä¸ªserviceåŒ…ï¼šserviceï¼ŒåŒ…å†…åˆ›å»ºä¸€ä¸ªæ¥å£ç±»StudentService.java:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjpowernode.springboot.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">StudentService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–å­¦ç”Ÿæ€»äººæ•°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Integer <span class="title function_">queryAllStudentCount</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥å£åˆ›å»ºå¥½äº†ï¼Œé‚£æˆ‘ä»¬åœ¨å“ªå®ç°è¿™ä¸ªæ¥å£å‘¢ï¼ŸæŒ‰ç…§ä¹‹å‰çš„åšæ³•æˆ‘ä»¬åº”è¯¥æ˜¯åœ¨Serviceè¿™ä¸ªåŒ…å†…åˆ›å»ºä¸€ä¸ªæ–°çš„åŒ…implæ¥å­˜æ”¾æ¥å£å®ç°ç±»ï¼Œä½†æ˜¯åœ¨Dubboä¸­ï¼Œæˆ‘ä»¬æŠŠæ¥å£å®ç°ç±»å½’äºæä¾›è€…ï¼ˆProviderï¼‰é¡¹ç›®ã€‚<br>åœ¨Provideré¡¹ç›®ä¸­çš„src&#x2F;java&#x2F;sample&#x2F;springboot&#x2F;service&#x2F;ä¸­åˆ›å»ºåŒ…implï¼Œé‡Œé¢æ–°å»ºï¼šStudentServiceImpl.java:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjpowernode.springboot.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.dubbo.config.annotation.Service;</span><br><span class="line"><span class="keyword">import</span> com.bjpowernode.springboot.service.StudentService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Service(interfaceClass = StudentService.class,version = &quot;1.0.0&quot;,timeout = 15000)</span></span><br><span class="line"><span class="comment">//dubbo:service interface=&quot;&quot; version=&quot;&quot; timeout=&quot;&quot;</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">StudentService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">queryAllStudentCount</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è°ƒç”¨æ•°æ®æŒä¹…å±‚</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="number">1250</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ³¨è§£@Componentå°†æ¥å£å®ç°ç±»åŠ è½½åˆ°Springå®¹å™¨ä¸­ï¼Œç„¶åå†ç”¨<code>com.alibaba.dubbo.config.annotation</code>åŒ…ä¸­çš„@Serviceæ³¨è§£ï¼Œæ·»åŠ å±æ€§<strong>interfaceClass</strong> &#x3D; StudentService.class ,<strong>version</strong> &#x3D; â€œ1.0.0â€ , <strong>timeout</strong> &#x3D; 15000ï¼Œ<br>è¿™äº›æ³¨è§£å°±æ˜¯dubboä¸­æ·»åŠ çš„dubbo:service interface&#x3D;â€â€ version&#x3D;â€â€ timeout&#x3D;â€â€æ ‡ç­¾ã€‚</p><p>é…ç½®å¥½è¿™ä¸ªæ³¨è§£ï¼Œè¿™ä¸ªæ¥å£å°±æš´éœ²å‡ºæ¥äº†ï¼Œç„¶åå°±å¯ä»¥åœ¨æ¶ˆè´¹è€…é¡¹ç›®ä¸­è¿›è¡Œå¼•ç”¨äº†ã€‚</p><p>åœ¨Consumeré¡¹ç›®ä¸­çš„StudentController.javaä¸­æ·»åŠ çš„ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//dubbo:reference interface=&quot;&quot; version=&quot;&quot; check=false</span></span><br><span class="line">    <span class="meta">@Reference(interfaceClass = StudentService.class,version = &quot;1.0.0&quot;,check = false)</span></span><br></pre></td></tr></table></figure><p>è¿™å°±æ˜¯å¼•ç”¨æ¥å£çš„æ³¨è§£__@Reference()__ï¼Œå†…å®¹ä¸º<strong>interfaceClass</strong> &#x3D; StudentService.class,<strong>version</strong> &#x3D; â€œ1.0.0â€,<strong>check</strong> &#x3D; falseï¼Œè¿™äº›æ³¨è§£å°±æ˜¯dubboä¸­æ·»åŠ çš„dubbo:reference interface&#x3D;â€â€ version&#x3D;â€â€ check&#x3D;falseæ ‡ç­¾ã€‚</p><p>å®Œæˆä»£ç é…ç½®åè¿˜éœ€è¦åœ¨å…¥å£ç±»æ·»åŠ å¯åŠ¨Dubboçš„æ³¨è§£ï¼š</p><ul><li>Provideré¡¹ç›®ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjpowernode.springboot;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.dubbo.spring.boot.annotation.EnableDubboConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span>      <span class="comment">//å¼€å¯springé…ç½®</span></span><br><span class="line"><span class="meta">@EnableDubboConfiguration</span>   <span class="comment">//å¼€å¯dubboé…ç½®</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>Consumer é¡¹ç›®:</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjpowernode.springboot;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.dubbo.spring.boot.annotation.EnableDubboConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span>  <span class="comment">//å¼€å¯springæ³¨è§£é…ç½®</span></span><br><span class="line"><span class="meta">@EnableDubboConfiguration</span>   <span class="comment">//å¼€å¯dubboé…ç½®</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å®Œæˆæ­å»ºåå¯åŠ¨å„ä¸ªé¡¹ç›®ï¼Œç„¶ååœ¨æµè§ˆå™¨å®Œæˆæµ‹è¯•ï¼</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å­¦ä¹  </category>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åç«¯ </tag>
            
            <tag> Spring </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Boot å­¦ä¹ ç¬”è®° 09</title>
      <link href="/2021/08/12/54a344a129d5-q1jun/"/>
      <url>/2021/08/12/54a344a129d5-q1jun/</url>
      
        <content type="html"><![CDATA[<h2 id="0x01-Dubbo3-ç®€ä»‹"><a href="#0x01-Dubbo3-ç®€ä»‹" class="headerlink" title="0x01 Dubbo3 ç®€ä»‹"></a>0x01 Dubbo3 ç®€ä»‹</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Apache</span> Dubbo æ˜¯ä¸€æ¬¾å¾®æœåŠ¡å¼€å‘æ¡†æ¶ï¼Œå®ƒæä¾›äº† RPCé€šä¿¡ ä¸ å¾®æœåŠ¡æ²»ç† ä¸¤å¤§å…³é”®èƒ½åŠ›ã€‚è¿™æ„å‘³ç€ï¼Œä½¿ç”¨ Dubbo å¼€å‘çš„å¾®æœåŠ¡ï¼Œå°†å…·å¤‡ç›¸äº’ä¹‹é—´çš„è¿œç¨‹å‘ç°ä¸é€šä¿¡èƒ½åŠ›ï¼Œ åŒæ—¶åˆ©ç”¨ Dubbo æä¾›çš„ä¸°å¯ŒæœåŠ¡æ²»ç†èƒ½åŠ›ï¼Œå¯ä»¥å®ç°è¯¸å¦‚æœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ã€æµé‡è°ƒåº¦ç­‰æœåŠ¡æ²»ç†è¯‰æ±‚ã€‚åŒæ—¶ Dubbo æ˜¯é«˜åº¦å¯æ‰©å±•çš„ï¼Œç”¨æˆ·å‡ ä¹å¯ä»¥åœ¨ä»»æ„åŠŸèƒ½ç‚¹å»å®šåˆ¶è‡ªå·±çš„å®ç°ï¼Œä»¥æ”¹å˜æ¡†æ¶çš„é»˜è®¤è¡Œä¸ºæ¥æ»¡è¶³è‡ªå·±çš„ä¸šåŠ¡éœ€æ±‚ã€‚</span><br></pre></td></tr></table></figure><blockquote><p>Dubbo3 åŸºäº Dubbo2 æ¼”è¿›è€Œæ¥ï¼Œåœ¨ä¿æŒåŸæœ‰æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§çš„åŒæ—¶ï¼Œ Dubbo3 åœ¨æ˜“ç”¨æ€§ã€è¶…å¤§è§„æ¨¡å¾®æœåŠ¡å®è·µã€äº‘åŸç”ŸåŸºç¡€è®¾æ–½é€‚é…ç­‰å‡ å¤§æ–¹å‘ä¸Šè¿›è¡Œäº†å…¨é¢å‡çº§ã€‚ ä»¥ä¸‹æ–‡æ¡£éƒ½å°†åŸºäº Dubbo3 å±•å¼€ã€‚</p></blockquote><h2 id="0x02-What-is-Dubbo"><a href="#0x02-What-is-Dubbo" class="headerlink" title="0x02 What is Dubbo?"></a>0x02 What is Dubbo?</h2><p>å¦‚å¼€ç¯‡æ‰€è¿°ï¼ŒDubbo æä¾›äº†æ„å»ºäº‘åŸç”Ÿå¾®æœåŠ¡ä¸šåŠ¡çš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥ä½¿ç”¨ Dubbo å¿«é€Ÿå®šä¹‰å¹¶å‘å¸ƒå¾®æœåŠ¡ç»„ä»¶ï¼ŒåŒæ—¶åŸºäº Dubbo å¼€ç®±å³ç”¨çš„ä¸°å¯Œç‰¹æ€§åŠè¶…å¼ºçš„æ‰©å±•èƒ½åŠ›ï¼Œæ„å»ºè¿ç»´æ•´ä¸ªå¾®æœåŠ¡ä½“ç³»æ‰€éœ€çš„å„é¡¹æœåŠ¡æ²»ç†èƒ½åŠ›ï¼Œå¦‚ Tracingã€Transaction ç­‰ï¼ŒDubbo æä¾›çš„åŸºç¡€èƒ½åŠ›åŒ…æ‹¬ï¼š</p><ul><li>æœåŠ¡å‘ç°</li><li>æµå¼é€šä¿¡</li><li>è´Ÿè½½å‡è¡¡</li><li>æµé‡æ²»ç†</li><li>â€¦..</li></ul><p>Dubbo è®¡åˆ’æä¾›ä¸°å¯Œçš„å¤šè¯­è¨€å®¢æˆ·ç«¯å®ç°ï¼Œå…¶ä¸­ Javaã€Golang ç‰ˆæœ¬æ˜¯å½“å‰ç¨³å®šæ€§ã€æ´»è·ƒåº¦æœ€å¥½çš„ç‰ˆæœ¬ï¼Œå…¶ä»–å¤šè¯­è¨€å®¢æˆ·ç«¯[]æ­£åœ¨æŒç»­å»ºè®¾ä¸­ã€‚</p><p>è‡ªå¼€æºä»¥æ¥ï¼ŒDubbo å°±è¢«ä¸€ä¼—å¤§è§„æ¨¡äº’è”ç½‘ã€ITå…¬å¸é€‰å‹ï¼Œç»è¿‡å¤šå¹´ä¼ä¸šå®è·µç§¯ç´¯äº†å¤§é‡ç»éªŒã€‚Dubbo3 æ˜¯ç«™åœ¨å·¨äººè‚©è†€ä¸Šçš„ä¸‹ä¸€ä»£äº§å“ï¼Œå®ƒæ±²å–äº†ä¸Šä¸€ä»£çš„ä¼˜ç‚¹å¹¶é’ˆå¯¹å·²çŸ¥é—®é¢˜åšäº†å¤§é‡ä¼˜åŒ–ï¼Œå› æ­¤ï¼ŒDubbo åœ¨è§£å†³ä¸šåŠ¡è½åœ°ä¸è§„æ¨¡åŒ–å®è·µæ–¹é¢æœ‰ç€æ— å¯æ¯”æ‹Ÿçš„ä¼˜åŠ¿ï¼š</p><ul><li>å¼€ç®±å³ç”¨<ul><li>æ˜“ç”¨æ€§é«˜ï¼Œå¦‚ Java ç‰ˆæœ¬çš„é¢å‘æ¥å£ä»£ç†ç‰¹æ€§èƒ½å®ç°æœ¬åœ°é€æ˜è°ƒç”¨</li><li>åŠŸèƒ½ä¸°å¯Œï¼ŒåŸºäºåŸç”Ÿåº“æˆ–è½»é‡æ‰©å±•å³å¯å®ç°ç»å¤§å¤šæ•°çš„å¾®æœåŠ¡æ²»ç†èƒ½åŠ›</li></ul></li><li>è¶…å¤§è§„æ¨¡å¾®æœåŠ¡é›†ç¾¤å®è·µ<ul><li>é«˜æ€§èƒ½çš„è·¨è¿›ç¨‹é€šä¿¡åè®®</li><li>åœ°å€å‘ç°ã€æµé‡æ²»ç†å±‚é¢ï¼Œè½»æ¾æ”¯æŒç™¾ä¸‡è§„æ¨¡é›†ç¾¤å®ä¾‹</li></ul></li><li>ä¼ä¸šçº§å¾®æœåŠ¡æ²»ç†èƒ½åŠ›<ul><li>æœåŠ¡æµ‹è¯•</li><li>æœåŠ¡Mock</li></ul></li></ul><p>Dubbo3 æ˜¯åœ¨äº‘åŸç”ŸèƒŒæ™¯ä¸‹è¯ç”Ÿçš„ï¼Œä½¿ç”¨ Dubbo æ„å»ºçš„å¾®æœåŠ¡éµå¾ªäº‘åŸç”Ÿæ€æƒ³ï¼Œèƒ½æ›´å¥½çš„å¤ç”¨åº•å±‚äº‘åŸç”ŸåŸºç¡€è®¾æ–½ã€è´´åˆäº‘åŸç”Ÿå¾®æœåŠ¡æ¶æ„ã€‚è¿™ä½“ç°åœ¨ï¼š</p><ul><li>æœåŠ¡æ”¯æŒéƒ¨ç½²åœ¨å®¹å™¨ã€Kuberneteså¹³å°ï¼ŒæœåŠ¡ç”Ÿå‘½å‘¨æœŸå¯å®ç°ä¸å¹³å°è°ƒåº¦å‘¨æœŸå¯¹é½ï¼›</li><li>æ”¯æŒç»å…¸ Service Mesh å¾®æœåŠ¡æ¶æ„ï¼Œå¼•å…¥äº† Proxyless Mesh æ¶æ„ï¼Œè¿›ä¸€æ­¥ç®€åŒ– Mesh çš„è½åœ°ä¸è¿ç§»æˆæœ¬ï¼Œæä¾›æ›´çµæ´»çš„é€‰æ‹©ï¼›</li><li>ä½œä¸ºæ¡¥æ¥å±‚ï¼Œæ”¯æŒä¸ SpringCloudã€gRPC ç­‰å¼‚æ„å¾®æœåŠ¡ä½“ç³»çš„äº’è°ƒäº’é€š</li></ul><blockquote><p>Apache Dubboå®˜ç½‘ï¼š<a target="_blank" rel="noopener" href="https://dubbo.apache.org/">https://dubbo.apache.org/</a></p></blockquote><h2 id="0x02-SpringBoot-é›†æˆDubboåˆ†å¸ƒå¼æ¡†æ¶"><a href="#0x02-SpringBoot-é›†æˆDubboåˆ†å¸ƒå¼æ¡†æ¶" class="headerlink" title="0x02 SpringBoot é›†æˆDubboåˆ†å¸ƒå¼æ¡†æ¶"></a>0x02 SpringBoot é›†æˆDubboåˆ†å¸ƒå¼æ¡†æ¶</h2><ol><li>æ¥å£å·¥ç¨‹ï¼š å­˜æ”¾å®ä½“beanå’Œä¸šåŠ¡æ¥å£</li><li>æœåŠ¡æä¾›è€…ï¼š ä¸šåŠ¡æ¥å£çš„å®ç°ç±»å¹¶å°†æœåŠ¡æš´éœ²ä¸”æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒï¼Œè°ƒç”¨æ•°æ®æŒä¹…å±‚<ul><li>æ·»åŠ ä¾èµ–ï¼ˆdubboï¼Œæ³¨å†Œä¸­å¿ƒï¼Œæ¥å£å·¥ç¨‹ï¼‰</li><li>é…ç½®æœåŠ¡æä¾›è€…æ ¸å¿ƒé…ç½®æ–‡ä»¶</li></ul></li><li>æœåŠ¡æ¶ˆè´¹è€…ï¼š å¤„ç†æµè§ˆå™¨å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚ï¼Œä»æ³¨å†Œä¸­å¿ƒè°ƒç”¨æœåŠ¡æä¾›è€…æ‰€æä¾›çš„æœåŠ¡<ul><li>æ·»åŠ ä¾èµ–ï¼ˆdubboï¼Œæ³¨å†Œä¸­å¿ƒï¼Œæ¥å£å·¥ç¨‹ï¼‰</li><li>é…ç½®æœåŠ¡æ¶ˆè´¹è€…æ ¸å¿ƒé…ç½®æ–‡ä»¶</li></ul></li></ol><p>é¦–å…ˆæˆ‘ä»¬è¦åˆ›å»ºï¼šæ¥å£å·¥ç¨‹é¡¹ç›®æ–‡ä»¶<strong>Interface</strong>(maven)ã€æä¾›è€…é¡¹ç›®æ–‡ä»¶<strong>Provider</strong>(springboot)ã€æ¶ˆè´¹è€…é¡¹ç›®æ–‡ä»¶<strong>Consumer</strong>(springboot)ã€‚</p><p>åœ¨Provideré¡¹ç›®Pom.xmlä¸­æ·»åŠ ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--Dubboé›†æˆSpringBootæ¡†æ¶èµ·æ­¥ä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dubbo-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--æ³¨å†Œä¸­å¿ƒ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.101tec<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zkclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--æ¥å£å·¥ç¨‹(æˆ‘ä»¬æ‰€åˆ›å»ºçš„æ¥å£å·¥ç¨‹é¡¹ç›®åœ°å€)--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.bjpowernode.springboot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>020-springboot-dubbo-interface<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Provideré¡¹ç›®çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ application.properties:</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è®¾ç½®å†…åµŒTomcatç«¯å£å·</span></span><br><span class="line"><span class="attr">server.port</span>=<span class="string">8081</span></span><br><span class="line"><span class="comment">#è®¾ç½®ä¸Šä¸‹æ–‡æ ¹</span></span><br><span class="line"><span class="attr">server.servlet.context-path</span>=<span class="string">/</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#è®¾ç½®dubboçš„é…ç½®</span></span><br><span class="line"><span class="attr">spring.application.name</span>=<span class="string">021-springboot-dubbo-provider</span></span><br><span class="line"><span class="comment">#å½“å‰å·¥ç¨‹æ˜¯ä¸€ä¸ªæœåŠ¡æä¾›è€…</span></span><br><span class="line"><span class="attr">spring.dubbo.server</span>=<span class="string">true</span></span><br><span class="line"><span class="comment">#è®¾ç½®æ³¨å†Œä¸­å¿ƒ</span></span><br><span class="line"><span class="attr">spring.dubbo.registry</span>=<span class="string">zookeeper://127.0.0.1:2181</span></span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥æ˜¯Consumeræ¶ˆè´¹è€…é¡¹ç›®å·¥ç¨‹ï¼Œåœ¨Pom.xmlä¸­æ·»åŠ ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!--Dubboé›†æˆSpringBootæ¡†æ¶èµ·æ­¥ä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dubbo-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--æ³¨å†Œä¸­å¿ƒ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.101tec<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zkclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--æ¥å£å·¥ç¨‹--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.bjpowernode.springboot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>020-springboot-dubbo-interface<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Consumeré¡¹ç›®çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ application.properties:</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è®¾ç½®å†…åµŒTomcatç«¯å£å·</span></span><br><span class="line"><span class="attr">server.port</span>=<span class="string">8080</span></span><br><span class="line"><span class="attr">server.servlet.context-path</span>=<span class="string">/</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#è®¾ç½®dubboé…ç½®</span></span><br><span class="line"><span class="attr">spring.application.name</span>=<span class="string">022-springboot-dubbo-consumer</span></span><br><span class="line"><span class="comment">#æŒ‡å®šæ³¨å†Œä¸­å¿ƒ</span></span><br><span class="line"><span class="attr">spring.dubbo.registry</span>=<span class="string">zookeeper://127.0.0.1:2181</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯å­¦ä¹  </category>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åç«¯ </tag>
            
            <tag> Spring </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Boot å­¦ä¹ ç¬”è®° 08</title>
      <link href="/2021/08/11/47fcabd36603-q1jun/"/>
      <url>/2021/08/11/47fcabd36603-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="Spring-Boot-å­¦ä¹ ç¬”è®°-08"><a href="#Spring-Boot-å­¦ä¹ ç¬”è®°-08" class="headerlink" title="Spring Boot å­¦ä¹ ç¬”è®° 08"></a>Spring Boot å­¦ä¹ ç¬”è®° 08</h1><h2 id="0x01-Redisæ•°æ®åº“çš„å®‰è£…å’Œé…ç½®"><a href="#0x01-Redisæ•°æ®åº“çš„å®‰è£…å’Œé…ç½®" class="headerlink" title="0x01  Redisæ•°æ®åº“çš„å®‰è£…å’Œé…ç½®"></a>0x01  Redisæ•°æ®åº“çš„å®‰è£…å’Œé…ç½®</h2><p><strong>å®‰è£…ï¼š</strong><br>ä¸‹è½½åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://github.com/tporadowski/redis/releases%E3%80%82">https://github.com/tporadowski/redis/releasesã€‚</a></p><p>Redis æ”¯æŒ 32 ä½å’Œ 64 ä½ã€‚è¿™ä¸ªéœ€è¦æ ¹æ®ä½ ç³»ç»Ÿå¹³å°çš„å®é™…æƒ…å†µé€‰æ‹©ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸‹è½½ Redis-x64-xxx.zipå‹ç¼©åŒ…åˆ° C ç›˜ï¼Œè§£å‹åï¼Œå°†æ–‡ä»¶å¤¹é‡æ–°å‘½åä¸º redisã€‚</p><p>æ‰“å¼€ä¸€ä¸ª cmd çª—å£ ä½¿ç”¨ cd å‘½ä»¤åˆ‡æ¢ç›®å½•åˆ° C:\redis è¿è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-server.exe redis.windows.conf</span><br></pre></td></tr></table></figure><p>å¦‚æœæƒ³æ–¹ä¾¿çš„è¯ï¼Œå¯ä»¥æŠŠ redis çš„è·¯å¾„åŠ åˆ°ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡é‡Œï¼Œè¿™æ ·å°±çœå¾—å†è¾“è·¯å¾„äº†ï¼Œåé¢çš„é‚£ä¸ª redis.windows.conf å¯ä»¥çœç•¥ï¼Œå¦‚æœçœç•¥ï¼Œä¼šå¯ç”¨é»˜è®¤çš„ã€‚è¾“å…¥ä¹‹åï¼Œä¼šæ˜¾ç¤ºå¦‚ä¸‹ç•Œé¢ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[23520] 30 Jul 20:12:27.585 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo</span><br><span class="line">[23520] 30 Jul 20:12:27.585 # Redis version=5.0.10, bits=64, commit=1c047b68, modified=0, pid=23520, just started</span><br><span class="line">[23520] 30 Jul 20:12:27.585 # Configuration loaded</span><br><span class="line">                _._</span><br><span class="line">           _.-``__ &#x27;&#x27;-._</span><br><span class="line">      _.-``    `.  `_.  &#x27;&#x27;-._           Redis 5.0.10 (1c047b68/0) 64 bit</span><br><span class="line">  .-`` .-```.  ```\/    _.,_ &#x27;&#x27;-._</span><br><span class="line"> (    &#x27;      ,       .-`  | `,    )     Running in standalone mode</span><br><span class="line"> |`-._`-...-` __...-.``-._|&#x27;` _.-&#x27;|     Port: 6379</span><br><span class="line"> |    `-._   `._    /     _.-&#x27;    |     PID: 23520</span><br><span class="line">  `-._    `-._  `-./  _.-&#x27;    _.-&#x27;</span><br><span class="line"> |`-._`-._    `-.__.-&#x27;    _.-&#x27;_.-&#x27;|</span><br><span class="line"> |    `-._`-._        _.-&#x27;_.-&#x27;    |           http://redis.io</span><br><span class="line">  `-._    `-._`-.__.-&#x27;_.-&#x27;    _.-&#x27;</span><br><span class="line"> |`-._`-._    `-.__.-&#x27;    _.-&#x27;_.-&#x27;|</span><br><span class="line"> |    `-._`-._        _.-&#x27;_.-&#x27;    |</span><br><span class="line">  `-._    `-._`-.__.-&#x27;_.-&#x27;    _.-&#x27;</span><br><span class="line">      `-._    `-.__.-&#x27;    _.-&#x27;</span><br><span class="line">          `-._        _.-&#x27;</span><br><span class="line">              `-.__.-&#x27;</span><br><span class="line"></span><br><span class="line">[23520] 30 Jul 20:12:27.588 # Server initialized</span><br><span class="line">[23520] 30 Jul 20:12:27.588 * Ready to accept connections</span><br></pre></td></tr></table></figure><p><strong>é…ç½®ï¼š</strong><br>Redis çš„é…ç½®æ–‡ä»¶ä½äº Redis å®‰è£…ç›®å½•ä¸‹ï¼Œæ–‡ä»¶åä¸º redis.conf(Windows åä¸º redis.windows.conf)ã€‚</p><p>ä½ å¯ä»¥é€šè¿‡ CONFIG å‘½ä»¤æŸ¥çœ‹æˆ–è®¾ç½®é…ç½®é¡¹ã€‚</p><p>è¯­æ³•<br>Redis CONFIG å‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; CONFIG GET CONFIG_SETTING_NAME</span><br></pre></td></tr></table></figure><p>å®ä¾‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; CONFIG GET loglevel</span><br><span class="line"></span><br><span class="line">1) &quot;loglevel&quot;</span><br><span class="line">2) &quot;notice&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ * å·è·å–æ‰€æœ‰é…ç½®é¡¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; CONFIG GET *</span><br><span class="line"></span><br><span class="line">  1) &quot;dbfilename&quot;</span><br><span class="line">  2) &quot;dump.rdb&quot;</span><br><span class="line">  3) &quot;requirepass&quot;</span><br><span class="line">  4) &quot;&quot;</span><br><span class="line">  5) &quot;masterauth&quot;</span><br><span class="line">  6) &quot;&quot;</span><br><span class="line">  7) &quot;unixsocket&quot;</span><br><span class="line">  8) &quot;&quot;</span><br><span class="line">  9) &quot;logfile&quot;</span><br><span class="line"> 10) &quot;&quot;</span><br><span class="line"> 11) &quot;pidfile&quot;</span><br><span class="line"> 12) &quot;/var/run/redis.pid&quot;</span><br><span class="line"> 13) &quot;maxmemory&quot;</span><br><span class="line"> 14) &quot;0&quot;</span><br><span class="line"> 15) &quot;maxmemory-samples&quot;</span><br><span class="line"> 16) &quot;3&quot;</span><br><span class="line"> 17) &quot;timeout&quot;</span><br><span class="line"> 18) &quot;0&quot;</span><br><span class="line"> 19) &quot;tcp-keepalive&quot;</span><br><span class="line"> 20) &quot;0&quot;</span><br><span class="line"> 21) &quot;auto-aof-rewrite-percentage&quot;</span><br><span class="line"> 22) &quot;100&quot;</span><br><span class="line"> 23) &quot;auto-aof-rewrite-min-size&quot;</span><br><span class="line"> 24) &quot;67108864&quot;</span><br><span class="line"> 25) &quot;hash-max-ziplist-entries&quot;</span><br><span class="line"> 26) &quot;512&quot;</span><br><span class="line"> 27) &quot;hash-max-ziplist-value&quot;</span><br><span class="line"> 28) &quot;64&quot;</span><br><span class="line"> 29) &quot;list-max-ziplist-entries&quot;</span><br><span class="line"> 30) &quot;512&quot;</span><br><span class="line"> 31) &quot;list-max-ziplist-value&quot;</span><br><span class="line"> 32) &quot;64&quot;</span><br><span class="line"> 33) &quot;set-max-intset-entries&quot;</span><br><span class="line"> 34) &quot;512&quot;</span><br><span class="line"> 35) &quot;zset-max-ziplist-entries&quot;</span><br><span class="line"> 36) &quot;128&quot;</span><br><span class="line"> 37) &quot;zset-max-ziplist-value&quot;</span><br><span class="line"> 38) &quot;64&quot;</span><br><span class="line"> 39) &quot;hll-sparse-max-bytes&quot;</span><br><span class="line"> 40) &quot;3000&quot;</span><br><span class="line"> 41) &quot;lua-time-limit&quot;</span><br><span class="line"> 42) &quot;5000&quot;</span><br><span class="line"> 43) &quot;slowlog-log-slower-than&quot;</span><br><span class="line"> 44) &quot;10000&quot;</span><br><span class="line"> 45) &quot;latency-monitor-threshold&quot;</span><br><span class="line"> 46) &quot;0&quot;</span><br><span class="line"> 47) &quot;slowlog-max-len&quot;</span><br><span class="line"> 48) &quot;128&quot;</span><br><span class="line"> 49) &quot;port&quot;</span><br><span class="line"> 50) &quot;6379&quot;</span><br><span class="line"> 51) &quot;tcp-backlog&quot;</span><br><span class="line"> 52) &quot;511&quot;</span><br><span class="line"> 53) &quot;databases&quot;</span><br><span class="line"> 54) &quot;16&quot;</span><br><span class="line"> 55) &quot;repl-ping-slave-period&quot;</span><br><span class="line"> 56) &quot;10&quot;</span><br><span class="line"> 57) &quot;repl-timeout&quot;</span><br><span class="line"> 58) &quot;60&quot;</span><br><span class="line"> 59) &quot;repl-backlog-size&quot;</span><br><span class="line"> 60) &quot;1048576&quot;</span><br><span class="line"> 61) &quot;repl-backlog-ttl&quot;</span><br><span class="line"> 62) &quot;3600&quot;</span><br><span class="line"> 63) &quot;maxclients&quot;</span><br><span class="line"> 64) &quot;4064&quot;</span><br><span class="line"> 65) &quot;watchdog-period&quot;</span><br><span class="line"> 66) &quot;0&quot;</span><br><span class="line"> 67) &quot;slave-priority&quot;</span><br><span class="line"> 68) &quot;100&quot;</span><br><span class="line"> 69) &quot;min-slaves-to-write&quot;</span><br><span class="line"> 70) &quot;0&quot;</span><br><span class="line"> 71) &quot;min-slaves-max-lag&quot;</span><br><span class="line"> 72) &quot;10&quot;</span><br><span class="line"> 73) &quot;hz&quot;</span><br><span class="line"> 74) &quot;10&quot;</span><br><span class="line"> 75) &quot;no-appendfsync-on-rewrite&quot;</span><br><span class="line"> 76) &quot;no&quot;</span><br><span class="line"> 77) &quot;slave-serve-stale-data&quot;</span><br><span class="line"> 78) &quot;yes&quot;</span><br><span class="line"> 79) &quot;slave-read-only&quot;</span><br><span class="line"> 80) &quot;yes&quot;</span><br><span class="line"> 81) &quot;stop-writes-on-bgsave-error&quot;</span><br><span class="line"> 82) &quot;yes&quot;</span><br><span class="line"> 83) &quot;daemonize&quot;</span><br><span class="line"> 84) &quot;no&quot;</span><br><span class="line"> 85) &quot;rdbcompression&quot;</span><br><span class="line"> 86) &quot;yes&quot;</span><br><span class="line"> 87) &quot;rdbchecksum&quot;</span><br><span class="line"> 88) &quot;yes&quot;</span><br><span class="line"> 89) &quot;activerehashing&quot;</span><br><span class="line"> 90) &quot;yes&quot;</span><br><span class="line"> 91) &quot;repl-disable-tcp-nodelay&quot;</span><br><span class="line"> 92) &quot;no&quot;</span><br><span class="line"> 93) &quot;aof-rewrite-incremental-fsync&quot;</span><br><span class="line"> 94) &quot;yes&quot;</span><br><span class="line"> 95) &quot;appendonly&quot;</span><br><span class="line"> 96) &quot;no&quot;</span><br><span class="line"> 97) &quot;dir&quot;</span><br><span class="line"> 98) &quot;/home/deepak/Downloads/redis-2.8.13/src&quot;</span><br><span class="line"> 99) &quot;maxmemory-policy&quot;</span><br><span class="line">100) &quot;volatile-lru&quot;</span><br><span class="line">101) &quot;appendfsync&quot;</span><br><span class="line">102) &quot;everysec&quot;</span><br><span class="line">103) &quot;save&quot;</span><br><span class="line">104) &quot;3600 1 300 100 60 10000&quot;</span><br><span class="line">105) &quot;loglevel&quot;</span><br><span class="line">106) &quot;notice&quot;</span><br><span class="line">107) &quot;client-output-buffer-limit&quot;</span><br><span class="line">108) &quot;normal 0 0 0 slave 268435456 67108864 60 pubsub 33554432 8388608 60&quot;</span><br><span class="line">109) &quot;unixsocketperm&quot;</span><br><span class="line">110) &quot;0&quot;</span><br><span class="line">111) &quot;slaveof&quot;</span><br><span class="line">112) &quot;&quot;</span><br><span class="line">113) &quot;notify-keyspace-events&quot;</span><br><span class="line">114) &quot;&quot;</span><br><span class="line">115) &quot;bind&quot;</span><br><span class="line">116) &quot;&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>ç¼–è¾‘é…ç½®ï¼š</strong><br>ä½ å¯ä»¥é€šè¿‡ä¿®æ”¹ redis.conf æ–‡ä»¶æˆ–ä½¿ç”¨ CONFIG set å‘½ä»¤æ¥ä¿®æ”¹é…ç½®ã€‚</p><p>è¯­æ³•:<br>CONFIG SET å‘½ä»¤åŸºæœ¬è¯­æ³•ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; CONFIG SET CONFIG_SETTING_NAME NEW_CONFIG_VALUE</span><br></pre></td></tr></table></figure><p>å®ä¾‹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; CONFIG SET loglevel &quot;notice&quot;</span><br><span class="line">OK</span><br><span class="line">redis 127.0.0.1:6379&gt; CONFIG GET loglevel</span><br><span class="line"></span><br><span class="line">1) &quot;loglevel&quot;</span><br><span class="line">2) &quot;notice&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜<br>redis.conf é…ç½®é¡¹è¯´æ˜å¦‚ä¸‹ï¼š</p><table><thead><tr><th>åºå·</th><th>é…ç½®é¡¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>1</td><td>daemonize no</td><td>Redis é»˜è®¤ä¸æ˜¯ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼è¿è¡Œï¼Œå¯ä»¥é€šè¿‡è¯¥é…ç½®é¡¹ä¿®æ”¹ï¼Œä½¿ç”¨ yes å¯ç”¨å®ˆæŠ¤è¿›ç¨‹ï¼ˆWindows ä¸æ”¯æŒå®ˆæŠ¤çº¿ç¨‹çš„é…ç½®ä¸º no ï¼‰</td></tr><tr><td>2</td><td>pidfile &#x2F;var&#x2F;run&#x2F;redis.pid</td><td>å½“ Redis ä»¥å®ˆæŠ¤è¿›ç¨‹æ–¹å¼è¿è¡Œæ—¶ï¼ŒRedis é»˜è®¤ä¼šæŠŠ pid å†™å…¥ &#x2F;var&#x2F;run&#x2F;redis.pid æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡ pidfile æŒ‡å®š</td></tr><tr><td>3</td><td>port 6379</td><td>æŒ‡å®š Redis ç›‘å¬ç«¯å£ï¼Œé»˜è®¤ç«¯å£ä¸º 6379ï¼Œä½œè€…åœ¨è‡ªå·±çš„ä¸€ç¯‡åšæ–‡ä¸­è§£é‡Šäº†ä¸ºä»€ä¹ˆé€‰ç”¨ 6379 ä½œä¸ºé»˜è®¤ç«¯å£ï¼Œå› ä¸º 6379 åœ¨æ‰‹æœºæŒ‰é”®ä¸Š MERZ å¯¹åº”çš„å·ç ï¼Œè€Œ MERZ å–è‡ªæ„å¤§åˆ©æ­Œå¥³ Alessia Merz çš„åå­—</td></tr><tr><td>4</td><td>bind 127.0.0.1</td><td>ç»‘å®šçš„ä¸»æœºåœ°å€</td></tr><tr><td>5</td><td>timeout 300</td><td>å½“å®¢æˆ·ç«¯é—²ç½®å¤šé•¿ç§’åå…³é—­è¿æ¥ï¼Œå¦‚æœæŒ‡å®šä¸º 0 ï¼Œè¡¨ç¤ºå…³é—­è¯¥åŠŸèƒ½</td></tr><tr><td>6</td><td>loglevel notice</td><td>æŒ‡å®šæ—¥å¿—è®°å½•çº§åˆ«ï¼ŒRedis æ€»å…±æ”¯æŒå››ä¸ªçº§åˆ«ï¼šdebugã€verboseã€noticeã€warningï¼Œé»˜è®¤ä¸º notice</td></tr><tr><td>7</td><td>logfile stdout</td><td>æ—¥å¿—è®°å½•æ–¹å¼ï¼Œé»˜è®¤ä¸ºæ ‡å‡†è¾“å‡ºï¼Œå¦‚æœé…ç½® Redis ä¸ºå®ˆæŠ¤è¿›ç¨‹æ–¹å¼è¿è¡Œï¼Œè€Œè¿™é‡Œåˆé…ç½®ä¸ºæ—¥å¿—è®°å½•æ–¹å¼ä¸ºæ ‡å‡†è¾“å‡ºï¼Œåˆ™æ—¥å¿—å°†ä¼šå‘é€ç»™ &#x2F;dev&#x2F;null</td></tr><tr><td>8</td><td>databases 16</td><td>è®¾ç½®æ•°æ®åº“çš„æ•°é‡ï¼Œé»˜è®¤æ•°æ®åº“ä¸º0ï¼Œå¯ä»¥ä½¿ç”¨SELECT å‘½ä»¤åœ¨è¿æ¥ä¸ŠæŒ‡å®šæ•°æ®åº“id</td></tr><tr><td>9</td><td>save <seconds> <changes>Redis é»˜è®¤é…ç½®æ–‡ä»¶ä¸­æä¾›äº†ä¸‰ä¸ªæ¡ä»¶ï¼š<br />save 900 1<br />save 300 10<br />save 60 10000<br />åˆ†åˆ«è¡¨ç¤º 900 ç§’ï¼ˆ15 åˆ†é’Ÿï¼‰å†…æœ‰ 1 ä¸ªæ›´æ”¹ï¼Œ300 ç§’ï¼ˆ5 åˆ†é’Ÿï¼‰å†…æœ‰ 10 ä¸ªæ›´æ”¹ä»¥åŠ 60 ç§’å†…æœ‰ 10000 ä¸ªæ›´æ”¹ã€‚</td><td>æŒ‡å®šåœ¨å¤šé•¿æ—¶é—´å†…ï¼Œæœ‰å¤šå°‘æ¬¡æ›´æ–°æ“ä½œï¼Œå°±å°†æ•°æ®åŒæ­¥åˆ°æ•°æ®æ–‡ä»¶ï¼Œå¯ä»¥å¤šä¸ªæ¡ä»¶é…åˆ</td></tr><tr><td>10</td><td>rdbcompression yes</td><td>æŒ‡å®šå­˜å‚¨è‡³æœ¬åœ°æ•°æ®åº“æ—¶æ˜¯å¦å‹ç¼©æ•°æ®ï¼Œé»˜è®¤ä¸º yesï¼ŒRedis é‡‡ç”¨ LZF å‹ç¼©ï¼Œå¦‚æœä¸ºäº†èŠ‚çœ CPU æ—¶é—´ï¼Œå¯ä»¥å…³é—­è¯¥é€‰é¡¹ï¼Œä½†ä¼šå¯¼è‡´æ•°æ®åº“æ–‡ä»¶å˜çš„å·¨å¤§</td></tr><tr><td>11</td><td>dbfilename dump.rdb</td><td>æŒ‡å®šæœ¬åœ°æ•°æ®åº“æ–‡ä»¶åï¼Œé»˜è®¤å€¼ä¸º dump.rdb</td></tr><tr><td>12</td><td>dir .&#x2F;</td><td>æŒ‡å®šæœ¬åœ°æ•°æ®åº“å­˜æ”¾ç›®å½•</td></tr><tr><td>13</td><td>slaveof <masterip> <masterport></td><td>è®¾ç½®å½“æœ¬æœºä¸º slave æœåŠ¡æ—¶ï¼Œè®¾ç½® master æœåŠ¡çš„ IP åœ°å€åŠç«¯å£ï¼Œåœ¨ Redis å¯åŠ¨æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨ä» master è¿›è¡Œæ•°æ®åŒæ­¥</td></tr><tr><td>14</td><td>masterauth <master-password></td><td>å½“ master æœåŠ¡è®¾ç½®äº†å¯†ç ä¿æŠ¤æ—¶ï¼Œslav æœåŠ¡è¿æ¥ master çš„å¯†ç </td></tr><tr><td>15</td><td>requirepass foobared</td><td>è®¾ç½® Redis è¿æ¥å¯†ç ï¼Œå¦‚æœé…ç½®äº†è¿æ¥å¯†ç ï¼Œå®¢æˆ·ç«¯åœ¨è¿æ¥ Redis æ—¶éœ€è¦é€šè¿‡ AUTH <password> å‘½ä»¤æä¾›å¯†ç ï¼Œé»˜è®¤å…³é—­</td></tr><tr><td>16</td><td>maxclients 128</td><td>è®¾ç½®åŒä¸€æ—¶é—´æœ€å¤§å®¢æˆ·ç«¯è¿æ¥æ•°ï¼Œé»˜è®¤æ— é™åˆ¶ï¼ŒRedis å¯ä»¥åŒæ—¶æ‰“å¼€çš„å®¢æˆ·ç«¯è¿æ¥æ•°ä¸º Redis è¿›ç¨‹å¯ä»¥æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶æè¿°ç¬¦æ•°ï¼Œå¦‚æœè®¾ç½® maxclients 0ï¼Œè¡¨ç¤ºä¸ä½œé™åˆ¶ã€‚å½“å®¢æˆ·ç«¯è¿æ¥æ•°åˆ°è¾¾é™åˆ¶æ—¶ï¼ŒRedis ä¼šå…³é—­æ–°çš„è¿æ¥å¹¶å‘å®¢æˆ·ç«¯è¿”å› max number of clients reached é”™è¯¯ä¿¡æ¯</td></tr><tr><td>17</td><td>maxmemory <bytes></td><td>æŒ‡å®š Redis æœ€å¤§å†…å­˜é™åˆ¶ï¼ŒRedis åœ¨å¯åŠ¨æ—¶ä¼šæŠŠæ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œè¾¾åˆ°æœ€å¤§å†…å­˜åï¼ŒRedis ä¼šå…ˆå°è¯•æ¸…é™¤å·²åˆ°æœŸæˆ–å³å°†åˆ°æœŸçš„ Keyï¼Œå½“æ­¤æ–¹æ³•å¤„ç† åï¼Œä»ç„¶åˆ°è¾¾æœ€å¤§å†…å­˜è®¾ç½®ï¼Œå°†æ— æ³•å†è¿›è¡Œå†™å…¥æ“ä½œï¼Œä½†ä»ç„¶å¯ä»¥è¿›è¡Œè¯»å–æ“ä½œã€‚Redis æ–°çš„ vm æœºåˆ¶ï¼Œä¼šæŠŠ Key å­˜æ”¾å†…å­˜ï¼ŒValue ä¼šå­˜æ”¾åœ¨ swap åŒº</td></tr><tr><td>18</td><td>appendonly no</td><td>æŒ‡å®šæ˜¯å¦åœ¨æ¯æ¬¡æ›´æ–°æ“ä½œåè¿›è¡Œæ—¥å¿—è®°å½•ï¼ŒRedis åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯å¼‚æ­¥çš„æŠŠæ•°æ®å†™å…¥ç£ç›˜ï¼Œå¦‚æœä¸å¼€å¯ï¼Œå¯èƒ½ä¼šåœ¨æ–­ç”µæ—¶å¯¼è‡´ä¸€æ®µæ—¶é—´å†…çš„æ•°æ®ä¸¢å¤±ã€‚å› ä¸º redis æœ¬èº«åŒæ­¥æ•°æ®æ–‡ä»¶æ˜¯æŒ‰ä¸Šé¢ save æ¡ä»¶æ¥åŒæ­¥çš„ï¼Œæ‰€ä»¥æœ‰çš„æ•°æ®ä¼šåœ¨ä¸€æ®µæ—¶é—´å†…åªå­˜åœ¨äºå†…å­˜ä¸­ã€‚é»˜è®¤ä¸º no</td></tr><tr><td>19</td><td>appendfilename appendonly.aof</td><td>æŒ‡å®šæ›´æ–°æ—¥å¿—æ–‡ä»¶åï¼Œé»˜è®¤ä¸º appendonly.aof</td></tr><tr><td>20</td><td>appendfsync everysec</td><td>æŒ‡å®šæ›´æ–°æ—¥å¿—æ¡ä»¶ï¼Œå…±æœ‰ 3 ä¸ªå¯é€‰å€¼ï¼šnoï¼šè¡¨ç¤ºç­‰æ“ä½œç³»ç»Ÿè¿›è¡Œæ•°æ®ç¼“å­˜åŒæ­¥åˆ°ç£ç›˜ï¼ˆå¿«ï¼‰alwaysï¼šè¡¨ç¤ºæ¯æ¬¡æ›´æ–°æ“ä½œåæ‰‹åŠ¨è°ƒç”¨ fsync() å°†æ•°æ®å†™åˆ°ç£ç›˜ï¼ˆæ…¢ï¼Œå®‰å…¨ï¼‰everysecï¼šè¡¨ç¤ºæ¯ç§’åŒæ­¥ä¸€æ¬¡ï¼ˆæŠ˜ä¸­ï¼Œé»˜è®¤å€¼ï¼‰</td></tr><tr><td>21</td><td>vm-enabled no</td><td>æŒ‡å®šæ˜¯å¦å¯ç”¨è™šæ‹Ÿå†…å­˜æœºåˆ¶ï¼Œé»˜è®¤å€¼ä¸º noï¼Œç®€å•çš„ä»‹ç»ä¸€ä¸‹ï¼ŒVM æœºåˆ¶å°†æ•°æ®åˆ†é¡µå­˜æ”¾ï¼Œç”± Redis å°†è®¿é—®é‡è¾ƒå°‘çš„é¡µå³å†·æ•°æ® swap åˆ°ç£ç›˜ä¸Šï¼Œè®¿é—®å¤šçš„é¡µé¢ç”±ç£ç›˜è‡ªåŠ¨æ¢å‡ºåˆ°å†…å­˜ä¸­ï¼ˆåœ¨åé¢çš„æ–‡ç« æˆ‘ä¼šä»”ç»†åˆ†æ Redis çš„ VM æœºåˆ¶ï¼‰</td></tr><tr><td>22</td><td>vm-swap-file &#x2F;tmp&#x2F;redis.swap</td><td>è™šæ‹Ÿå†…å­˜æ–‡ä»¶è·¯å¾„ï¼Œé»˜è®¤å€¼ä¸º &#x2F;tmp&#x2F;redis.swapï¼Œä¸å¯å¤šä¸ª Redis å®ä¾‹å…±äº«</td></tr><tr><td>23</td><td>vm-max-memory 0</td><td>å°†æ‰€æœ‰å¤§äº vm-max-memory çš„æ•°æ®å­˜å…¥è™šæ‹Ÿå†…å­˜ï¼Œæ— è®º vm-max-memory è®¾ç½®å¤šå°ï¼Œæ‰€æœ‰ç´¢å¼•æ•°æ®éƒ½æ˜¯å†…å­˜å­˜å‚¨çš„(Redis çš„ç´¢å¼•æ•°æ® å°±æ˜¯ keys)ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ vm-max-memory è®¾ç½®ä¸º 0 çš„æ—¶å€™ï¼Œå…¶å®æ˜¯æ‰€æœ‰ value éƒ½å­˜åœ¨äºç£ç›˜ã€‚é»˜è®¤å€¼ä¸º 0</td></tr><tr><td>24</td><td>vm-page-size 32</td><td>Redis swap æ–‡ä»¶åˆ†æˆäº†å¾ˆå¤šçš„ pageï¼Œä¸€ä¸ªå¯¹è±¡å¯ä»¥ä¿å­˜åœ¨å¤šä¸ª page ä¸Šé¢ï¼Œä½†ä¸€ä¸ª page ä¸Šä¸èƒ½è¢«å¤šä¸ªå¯¹è±¡å…±äº«ï¼Œvm-page-size æ˜¯è¦æ ¹æ®å­˜å‚¨çš„ æ•°æ®å¤§å°æ¥è®¾å®šçš„ï¼Œä½œè€…å»ºè®®å¦‚æœå­˜å‚¨å¾ˆå¤šå°å¯¹è±¡ï¼Œpage å¤§å°æœ€å¥½è®¾ç½®ä¸º 32 æˆ–è€… 64bytesï¼›å¦‚æœå­˜å‚¨å¾ˆå¤§å¤§å¯¹è±¡ï¼Œåˆ™å¯ä»¥ä½¿ç”¨æ›´å¤§çš„ pageï¼Œå¦‚æœä¸ç¡®å®šï¼Œå°±ä½¿ç”¨é»˜è®¤å€¼</td></tr><tr><td>25</td><td>vm-pages 134217728</td><td>è®¾ç½® swap æ–‡ä»¶ä¸­çš„ page æ•°é‡ï¼Œç”±äºé¡µè¡¨ï¼ˆä¸€ç§è¡¨ç¤ºé¡µé¢ç©ºé—²æˆ–ä½¿ç”¨çš„ bitmapï¼‰æ˜¯åœ¨æ”¾åœ¨å†…å­˜ä¸­çš„ï¼Œï¼Œåœ¨ç£ç›˜ä¸Šæ¯ 8 ä¸ª pages å°†æ¶ˆè€— 1byte çš„å†…å­˜ã€‚</td></tr><tr><td>26</td><td>vm-max-threads 4</td><td>è®¾ç½®è®¿é—®swapæ–‡ä»¶çš„çº¿ç¨‹æ•°,æœ€å¥½ä¸è¦è¶…è¿‡æœºå™¨çš„æ ¸æ•°,å¦‚æœè®¾ç½®ä¸º0,é‚£ä¹ˆæ‰€æœ‰å¯¹swapæ–‡ä»¶çš„æ“ä½œéƒ½æ˜¯ä¸²è¡Œçš„ï¼Œå¯èƒ½ä¼šé€ æˆæ¯”è¾ƒé•¿æ—¶é—´çš„å»¶è¿Ÿã€‚é»˜è®¤å€¼ä¸º4</td></tr><tr><td>27</td><td>glueoutputbuf yes</td><td>è®¾ç½®åœ¨å‘å®¢æˆ·ç«¯åº”ç­”æ—¶ï¼Œæ˜¯å¦æŠŠè¾ƒå°çš„åŒ…åˆå¹¶ä¸ºä¸€ä¸ªåŒ…å‘é€ï¼Œé»˜è®¤ä¸ºå¼€å¯</td></tr><tr><td>28</td><td>hash-max-zipmap-entries 64<br />  hash-max-zipmap-value 512</td><td>æŒ‡å®šåœ¨è¶…è¿‡ä¸€å®šçš„æ•°é‡æˆ–è€…æœ€å¤§çš„å…ƒç´ è¶…è¿‡æŸä¸€ä¸´ç•Œå€¼æ—¶ï¼Œé‡‡ç”¨ä¸€ç§ç‰¹æ®Šçš„å“ˆå¸Œç®—æ³•</td></tr><tr><td>29</td><td>activerehashing yes</td><td>æŒ‡å®šæ˜¯å¦æ¿€æ´»é‡ç½®å“ˆå¸Œï¼Œé»˜è®¤ä¸ºå¼€å¯ï¼ˆåé¢åœ¨ä»‹ç» Redis çš„å“ˆå¸Œç®—æ³•æ—¶å…·ä½“ä»‹ç»ï¼‰</td></tr><tr><td>30</td><td>include &#x2F;path&#x2F;to&#x2F;local.conf</td><td>æŒ‡å®šåŒ…å«å…¶å®ƒçš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥åœ¨åŒä¸€ä¸»æœºä¸Šå¤šä¸ªRediså®ä¾‹ä¹‹é—´ä½¿ç”¨åŒä¸€ä»½é…ç½®æ–‡ä»¶ï¼Œè€ŒåŒæ—¶å„ä¸ªå®ä¾‹åˆæ‹¥æœ‰è‡ªå·±çš„ç‰¹å®šé…ç½®æ–‡ä»¶</td></tr></tbody></table><h2 id="0x02-SpringBoot-ä¸­é›†æˆRedis"><a href="#0x02-SpringBoot-ä¸­é›†æˆRedis" class="headerlink" title="0x02 SpringBoot ä¸­é›†æˆRedis"></a>0x02 SpringBoot ä¸­é›†æˆRedis</h2><p>__REmote DIctionary Server(Redis) __æ˜¯ä¸€ä¸ªç”± Salvatore Sanfilippo å†™çš„ __key-value å­˜å‚¨ç³»ç»Ÿ__ï¼Œæ˜¯è·¨å¹³å°çš„__éå…³ç³»å‹æ•°æ®åº“__ã€‚</p><p>Redis æ˜¯ä¸€ä¸ªå¼€æºçš„ä½¿ç”¨ ANSI C è¯­è¨€ç¼–å†™ã€éµå®ˆ BSD åè®®ã€æ”¯æŒç½‘ç»œã€å¯åŸºäºå†…å­˜ã€åˆ†å¸ƒå¼ã€å¯é€‰æŒä¹…æ€§çš„é”®å€¼å¯¹(Key-Value)å­˜å‚¨æ•°æ®åº“ï¼Œå¹¶æä¾›å¤šç§è¯­è¨€çš„ APIã€‚</p><p>Redis é€šå¸¸è¢«ç§°ä¸ºæ•°æ®ç»“æ„æœåŠ¡å™¨ï¼Œå› ä¸ºå€¼ï¼ˆvalueï¼‰å¯ä»¥æ˜¯å­—ç¬¦ä¸²(String)ã€å“ˆå¸Œ(Hash)ã€åˆ—è¡¨(list)ã€é›†åˆ(sets)å’Œæœ‰åºé›†åˆ(sorted sets)ç­‰ç±»å‹ã€‚</p><p>Redis æ˜¯__å®Œå…¨å¼€æº__çš„ï¼Œéµå®ˆ BSD åè®®ï¼Œæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ __key-value æ•°æ®åº“__ã€‚</p><p><strong>Redis ä¸å…¶ä»– key - value ç¼“å­˜äº§å“æœ‰ä»¥ä¸‹ä¸‰ä¸ªç‰¹ç‚¹ï¼š</strong></p><ul><li>Redisæ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨ã€‚</li><li>Redisä¸ä»…ä»…æ”¯æŒç®€å•çš„key-valueç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜æä¾›listï¼Œsetï¼Œzsetï¼Œhashç­‰æ•°æ®ç»“æ„çš„å­˜å‚¨ã€‚</li><li>Redisæ”¯æŒæ•°æ®çš„å¤‡ä»½ï¼Œå³master-slaveæ¨¡å¼çš„æ•°æ®å¤‡ä»½ã€‚</li></ul><p><strong>Redisä¸å…¶ä»–key-valueå­˜å‚¨æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</strong></p><ul><li><p>Redisæœ‰ç€æ›´ä¸ºå¤æ‚çš„æ•°æ®ç»“æ„å¹¶ä¸”æä¾›å¯¹ä»–ä»¬çš„åŸå­æ€§æ“ä½œï¼Œè¿™æ˜¯ä¸€ä¸ªä¸åŒäºå…¶ä»–æ•°æ®åº“çš„è¿›åŒ–è·¯å¾„ã€‚Redisçš„æ•°æ®ç±»å‹éƒ½æ˜¯åŸºäºåŸºæœ¬æ•°æ®ç»“æ„çš„åŒæ—¶å¯¹ç¨‹åºå‘˜é€æ˜ï¼Œæ— éœ€è¿›è¡Œé¢å¤–çš„æŠ½è±¡ã€‚</p></li><li><p>Redisè¿è¡Œåœ¨å†…å­˜ä¸­ä½†æ˜¯å¯ä»¥æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œæ‰€ä»¥åœ¨å¯¹ä¸åŒæ•°æ®é›†è¿›è¡Œé«˜é€Ÿè¯»å†™æ—¶éœ€è¦æƒè¡¡å†…å­˜ï¼Œå› ä¸ºæ•°æ®é‡ä¸èƒ½å¤§äºç¡¬ä»¶å†…å­˜ã€‚åœ¨å†…å­˜æ•°æ®åº“æ–¹é¢çš„å¦ä¸€ä¸ªä¼˜ç‚¹æ˜¯ï¼Œç›¸æ¯”åœ¨ç£ç›˜ä¸Šç›¸åŒçš„å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œåœ¨å†…å­˜ä¸­æ“ä½œèµ·æ¥éå¸¸ç®€å•ï¼Œè¿™æ ·Rediså¯ä»¥åšå¾ˆå¤šå†…éƒ¨å¤æ‚æ€§å¾ˆå¼ºçš„äº‹æƒ…ã€‚åŒæ—¶ï¼Œåœ¨ç£ç›˜æ ¼å¼æ–¹é¢ä»–ä»¬æ˜¯ç´§å‡‘çš„ä»¥è¿½åŠ çš„æ–¹å¼äº§ç”Ÿçš„ï¼Œå› ä¸ºä»–ä»¬å¹¶ä¸éœ€è¦è¿›è¡Œéšæœºè®¿é—®ã€‚</p></li></ul><p><strong>SpringBoot ä¸­é›†æˆRedisåªæœ‰ä¸¤æ­¥ï¼š</strong></p><ol><li>æ·»åŠ æ“ä½œRedisæ•°æ®ç±»å‹çš„ä¾èµ–</li><li>åœ¨SpringBootæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ·»åŠ Redisçš„é…ç½®</li></ol><h3 id="0x0201-æ·»åŠ æ“ä½œRedisæ•°æ®ç±»å‹çš„ä¾èµ–"><a href="#0x0201-æ·»åŠ æ“ä½œRedisæ•°æ®ç±»å‹çš„ä¾èµ–" class="headerlink" title="0x0201 æ·»åŠ æ“ä½œRedisæ•°æ®ç±»å‹çš„ä¾èµ–"></a>0x0201 æ·»åŠ æ“ä½œRedisæ•°æ®ç±»å‹çš„ä¾èµ–</h3><p>åœ¨Mavençš„pom.xmlä¸­æ·»åŠ ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--SpringBooté›†æˆRedisçš„èµ·æ­¥ä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="0x0202-åœ¨SpringBootæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ·»åŠ Redisçš„é…ç½®"><a href="#0x0202-åœ¨SpringBootæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ·»åŠ Redisçš„é…ç½®" class="headerlink" title="0x0202 åœ¨SpringBootæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ·»åŠ Redisçš„é…ç½®"></a>0x0202 åœ¨SpringBootæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ·»åŠ Redisçš„é…ç½®</h3><p>åœ¨application.propertiesä¸­æ·»åŠ ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è®¾ç½®redisé…ç½®ä¿¡æ¯</span></span><br><span class="line"><span class="attr">spring.redis.host</span>=<span class="string">127.0.0.1</span></span><br><span class="line"><span class="attr">spring.redis.port</span>=<span class="string">6379</span></span><br><span class="line"><span class="comment">#æ²¡æœ‰è®¾ç½®å¯†ç ä¸ç”¨å¡«ä¸‹é¢çš„</span></span><br><span class="line"><span class="attr">spring.redis.password</span>=<span class="string"></span></span><br></pre></td></tr></table></figure><h3 id="0x0203-æ“ä½œRedis"><a href="#0x0203-æ“ä½œRedis" class="headerlink" title="0x0203 æ“ä½œRedis"></a>0x0203 æ“ä½œRedis</h3><p>åœ¨ä¸šåŠ¡å±‚åˆ›å»ºå­˜å…¥Redisæ•°æ®åº“çš„ä¸šåŠ¡æ“ä½œï¼Œåœ¨Application.javaåŒçº§ç›®å½•æˆ–æ¬¡çº§ç›®å½•åˆ›å»ºåŒ…serviceï¼ŒåŒ…å†…åˆ›å»ºä¸€ä¸ªStudentService.javaæ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjpowernode.springboot.service;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">StudentService</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†å€¼å­˜æ”¾åˆ°redisä¸­</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(String key, String value)</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä»redisä¸­è·å–æŒ‡å®škeyçš„å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String <span class="title function_">get</span><span class="params">(String key)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†åœ¨serviceåŒ…å†…åˆ›å»ºä¸€ä¸ªåŒ…implç”¨æ¥å­˜æ”¾æ¥å£å®ç°ç±»ï¼Œé‡Œé¢åˆ›å»ºStudentServiceImpl.javaä½œä¸ºä¸Šé¢æ¥å£çš„æ¥å£å®ç°ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjpowernode.springboot.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.bjpowernode.springboot.service.StudentService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">StudentService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate&lt;Object,Object&gt; redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(String key, String value)</span> &#123;</span><br><span class="line"><span class="comment">//å¯¹æ•°æ®è¿›è¡Œå­˜å…¥æ“ä½œset(key,value)</span></span><br><span class="line">        redisTemplate.opsForValue().set(key,value);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">get</span><span class="params">(String key)</span> &#123;</span><br><span class="line"><span class="comment">//å¯¹æ•°æ®è¿›è¡Œå–å‡ºæ“ä½œget(key)</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">count</span> <span class="operator">=</span> (String) redisTemplate.opsForValue().get(key);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨æ§åˆ¶å±‚è¿›è¡Œæ•°æ®çš„è¾“å‡ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjpowernode.springboot.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.bjpowernode.springboot.service.StudentService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StudentService studentService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/put&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="meta">@ResponseBody</span></span><br><span class="line">    Object <span class="title function_">put</span><span class="params">(String key, String value)</span> &#123;</span><br><span class="line"></span><br><span class="line">        studentService.put(key, value);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;å€¼å·²æˆåŠŸæ”¾å…¥redis&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/get&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="meta">@ResponseBody</span></span><br><span class="line">    String <span class="title function_">get</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">count</span> <span class="operator">=</span> studentService.get(<span class="string">&quot;count&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;æ•°æ®countä¸º:&quot;</span> + count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯å­¦ä¹  </category>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åç«¯ </tag>
            
            <tag> Spring </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Boot å­¦ä¹ ç¬”è®° 07</title>
      <link href="/2021/08/10/57f701012393-q1jun/"/>
      <url>/2021/08/10/57f701012393-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="Spring-Bootå­¦ä¹ ç¬”è®°-07"><a href="#Spring-Bootå­¦ä¹ ç¬”è®°-07" class="headerlink" title="Spring Bootå­¦ä¹ ç¬”è®° 07"></a>Spring Bootå­¦ä¹ ç¬”è®° 07</h1><h2 id="0x01-SpringMVC-å¸¸ç”¨æ³¨è§£"><a href="#0x01-SpringMVC-å¸¸ç”¨æ³¨è§£" class="headerlink" title="0x01 SpringMVC å¸¸ç”¨æ³¨è§£"></a>0x01 SpringMVC å¸¸ç”¨æ³¨è§£</h2><p><strong>@GetMapping</strong>ç­‰ä»·äº<em>å•ç‹¬ä½¿ç”¨Getæ–¹æ³•</em>çš„**@RequestMapping**ï¼Œæ¯”å¦‚ä¸‹é¢ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/queryStudentById2&quot;,method = RequestMethod.GET)</span></span><br><span class="line"><span class="comment">//è¯¥æ³¨è§£é€šè¿‡åœ¨æŸ¥è¯¢æ•°æ®çš„æ—¶å€™ä½¿ç”¨ -&gt; æŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">queryStudentById2</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Ony GET Method&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥å†™æˆï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(value = &quot;/queryStudentById2&quot;)</span> <span class="comment">//ç›¸å½“äºä¸Šä¸€å¥è¯,åªæ¥æ”¶GETè¯·æ±‚,å¦‚æœè¯·æ±‚æ–¹å¼ä¸å¯¹ä¼šæŠ¥405é”™è¯¯</span></span><br><span class="line">   <span class="comment">//è¯¥æ³¨è§£é€šè¿‡åœ¨æŸ¥è¯¢æ•°æ®çš„æ—¶å€™ä½¿ç”¨ -&gt; æŸ¥è¯¢</span></span><br><span class="line">   <span class="keyword">public</span> Object <span class="title function_">queryStudentById2</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;Ony GET Method&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>ç›¸å½“äºä¸Šä¸€å¥è¯,åªæ¥æ”¶GETè¯·æ±‚,å¦‚æœè¯·æ±‚æ–¹å¼ä¸å¯¹ä¼šæŠ¥405é”™è¯¯ã€‚</p><p>åŒç†çš„è¿˜æœ‰**@PostMapping**ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/insert&quot;,method = RequestMethod.POST)</span></span><br><span class="line"><span class="comment">//è¯¥æ³¨è§£é€šå¸¸åœ¨æ–°å¢æ•°æ®çš„æ—¶å€™ä½¿ç”¨ -&gt; æ–°å¢</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">insert</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Insert success&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ™å¯ä»¥å†™æˆï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(value = &quot;/insert&quot;)</span> </span><br><span class="line">   <span class="comment">//è¯¥æ³¨è§£é€šå¸¸åœ¨æ–°å¢æ•°æ®çš„æ—¶å€™ä½¿ç”¨ -&gt; æ–°å¢</span></span><br><span class="line">   <span class="keyword">public</span> Object <span class="title function_">insert</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;Insert success&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>é™¤æ­¤ä¹‹å¤–è¿˜æœ‰**@DeleteMapping** ,<strong>@PutMapping</strong>:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//    @RequestMapping(value = &quot;/delete&quot;,method = RequestMethod.DELETE)</span></span><br><span class="line"><span class="meta">@DeleteMapping(value = &quot;/delete&quot;)</span><span class="comment">//ç›¸å½“äºä¸Šä¸€å¥è¯</span></span><br><span class="line"><span class="comment">//è¯¥æ³¨è§£é€šå¸¸åœ¨åˆ é™¤æ•°æ®çš„æ—¶å€™ä½¿ç”¨ -&gt; åˆ é™¤</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">delete</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;delete Student&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//    @RequestMapping(value = &quot;/update&quot;,method = RequestMethod.PUT)</span></span><br><span class="line"><span class="meta">@PutMapping(value = &quot;/update&quot;)</span> <span class="comment">//ç›¸å½“äºä¸Šä¸€å¥è¯</span></span><br><span class="line"><span class="comment">//è¯¥æ³¨è§£é€šå¸¸åœ¨ä¿®æ”¹æ•°æ®çš„æ—¶å€™ä½¿ç”¨ -&gt; æ›´æ–°</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;update student info1&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·æå¤§çš„ç®€åŒ–äº†æˆ‘ä»¬çš„ä»£ç ã€‚</p><h2 id="0x02-RESTFul"><a href="#0x02-RESTFul" class="headerlink" title="0x02 RESTFul"></a>0x02 RESTFul</h2><p><strong>REST</strong>ï¼ˆè‹±æ–‡ï¼š<em>Representational State Transfer</em>ï¼Œç®€ç§° RESTï¼‰ ä¸€ç§äº’è”ç½‘è½¯ä»¶æ¶æ„è®¾è®¡çš„é£æ ¼ï¼Œä½†å®ƒå¹¶ä¸æ˜¯æ ‡å‡†ï¼Œå®ƒåªæ˜¯æå‡ºäº†ä¸€ç»„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ äº¤äº’æ—¶çš„æ¶æ„ç†å¿µå’Œè®¾è®¡åŸåˆ™ï¼ŒåŸºäºè¿™ç§ç†å¿µå’ŒåŸåˆ™è®¾è®¡çš„æ¥å£å¯ä»¥æ›´ç®€æ´ï¼Œæ›´æœ‰å±‚æ¬¡ï¼ŒREST è¿™ä¸ªè¯ï¼Œæ˜¯ Roy Thomas Fielding åœ¨ä»– 2000 å¹´çš„åšå£«è®ºæ–‡ä¸­æå‡ºçš„ã€‚ ä»»ä½•çš„æŠ€æœ¯éƒ½å¯ä»¥å®ç°è¿™ç§ç†å¿µï¼Œå¦‚æœä¸€ä¸ªæ¶æ„ç¬¦åˆ REST åŸåˆ™ï¼Œå°±ç§°å®ƒä¸º <strong>RESTFul æ¶ æ„</strong></p><p>Spring boot å¼€å‘ RESTFul ä¸»è¦æ˜¯å‡ ä¸ªæ³¨è§£å®ç°<br>ï¼ˆ1ï¼‰ @PathVariable ï¼šè·å– url ä¸­çš„æ•°æ® ï¼Œè¯¥æ³¨è§£æ˜¯å®ç° RESTFul æœ€ä¸»è¦çš„ä¸€ä¸ªæ³¨è§£<br>ï¼ˆ2ï¼‰ @PostMapping ï¼šæ¥æ”¶å’Œå¤„ç† Post æ–¹å¼çš„è¯·æ±‚<br>ï¼ˆ3ï¼‰ @DeleteMapping ï¼šæ¥æ”¶ delete æ–¹å¼çš„è¯·æ±‚ï¼Œå¯ä»¥ä½¿ç”¨ GetMapping ä»£æ›¿<br>ï¼ˆ4ï¼‰ @PutMapping ï¼šæ¥æ”¶ put æ–¹å¼çš„è¯·æ±‚ï¼Œå¯ä»¥ç”¨ PostMapping ä»£æ›¿<br>ï¼ˆ5ï¼‰ @GetMapping ï¼šæ¥æ”¶ get æ–¹å¼çš„è¯·æ±‚</p><p>RESTFulé£æ ¼çš„ä»£ç å¥½å¤„æœ‰ï¼š<br>â¢ ä¼ é€’å‚æ•°å˜ç®€å•äº†<br>â¢ æœåŠ¡æä¾›è€…å¯¹å¤–åªæä¾›äº†ä¸€ä¸ªæ¥å£æœåŠ¡ï¼Œè€Œä¸æ˜¯ä¼ ç»Ÿçš„ CRUD å››ä¸ªæ¥å£</p><p>ä¸‹é¢æˆ‘ä»¬çœ‹ä»£ç ï¼Œæ¥å®ç°RESTFulï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//    @RequestMapping(value = &quot;/student/detail/&#123;id&#125;/&#123;age&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@GetMapping(value = &quot;/student/detail/&#123;id&#125;/&#123;age&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">student1</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id,</span></span><br><span class="line"><span class="params">                           <span class="meta">@PathVariable(&quot;age&quot;)</span> Integer age)</span> &#123;</span><br><span class="line">        Map&lt;String,Object&gt; retMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        retMap.put(<span class="string">&quot;id&quot;</span>,id);</span><br><span class="line">        retMap.put(<span class="string">&quot;age&quot;</span>,age);</span><br><span class="line">        <span class="keyword">return</span> retMap;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åœ¨è·¯å¾„é‡Œé¢æ·»åŠ äº†**{id}<strong>å’Œ</strong>{age}<strong>è¿™ä¸¤ä¸ªå˜é‡ï¼Œç„¶ååœ¨ä¸‹æ–¹é€šè¿‡æ³¨é‡Š</strong>@PathVariable<strong>æ¥è°ƒç”¨å‚æ•°åœ¨è·¯å¾„ä¸­è·å–çš„å€¼ï¼Œä¼ ç»™å˜é‡idå’Œageï¼Œç„¶åå°±èƒ½åœ¨æ–¹æ³•ä¸­ä½¿ç”¨æ‰€è·å–çš„å€¼äº†ã€‚<br>è¿™æ ·æˆ‘ä»¬åœ¨æµè§ˆå™¨è¾“å…¥</strong><a target="_blank" rel="noopener" href="http://localhost:8080/student/0101/28">http://localhost:8080/student/0101/28</a> **<br>å°±èƒ½æŠŠ<strong>0101</strong> å’Œ <strong>28</strong>è¿™ä¸¤ä¸ªå€¼ä¼ å…¥æ–¹æ³•ä¸­è¿›è¡Œè°ƒç”¨ã€‚</p><p>å’Œä¹‹å‰çš„å†™æ³•è¿›è¡Œå¯¹æ¯”ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/student&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">student</span><span class="params">(Integer id,Integer age)</span> &#123;</span><br><span class="line">    <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">    student.setId(id);</span><br><span class="line">    student.setAge(age);</span><br><span class="line">    <span class="keyword">return</span> student;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡è¿™ç§æ–¹æ³•çš„urlå†™æ³•ä¸º**<a target="_blank" rel="noopener" href="http://localhost:8080/student?id=0101&amp;age=28">http://localhost:8080/student?id=0101&amp;age=28</a>  **<br>æ˜¾ç„¶å‰è€…æ›´å…·æœ‰è§‚èµæ€§å’Œå®ç”¨æ€§ï¼ˆè€Œä¸”æ›´å®‰å…¨ï¼‰ã€‚</p><p>ä½†æ˜¯è¿™ç§æ–¹å¼ä¹Ÿä¼šå‡ºç°å†²çªï¼Œå› ä¸ºåœ¨è·¯å¾„çš„å¡«å†™æ—¶ï¼Œå¹¶ä¸èƒ½çŸ¥é“å“ªä¸ªæ˜¯idå“ªä¸ªæ˜¯ageï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è®¾è®¡çš„æ—¶å€™ï¼Œé€šå¸¸åœ¨RESTfulé£æ ¼ä¸­æ–¹æ³•çš„è¯·æ±‚æ–¹å¼ä¼šæŒ‰<strong>å¢åˆ æ”¹æŸ¥</strong>çš„è¯·æ±‚æ–¹å¼æ¥åŒºåˆ†ï¼Œæ¯”å¦‚å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value = &quot;/student/detail/&#123;id&#125;/&#123;age&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">student1</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id,</span></span><br><span class="line"><span class="params">                       <span class="meta">@PathVariable(&quot;age&quot;)</span> Integer age)</span> &#123;</span><br><span class="line">    Map&lt;String,Object&gt; retMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    retMap.put(<span class="string">&quot;id&quot;</span>,id);</span><br><span class="line">    retMap.put(<span class="string">&quot;age&quot;</span>,age);</span><br><span class="line">    <span class="keyword">return</span> retMap;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/student/detail/&#123;id&#125;/&#123;status&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">student2</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id,</span></span><br><span class="line"><span class="params">                       <span class="meta">@PathVariable(&quot;status&quot;)</span> Integer status)</span> &#123;</span><br><span class="line">    Map&lt;String,Object&gt; retMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    retMap.put(<span class="string">&quot;id&quot;</span>,id);</span><br><span class="line">    retMap.put(<span class="string">&quot;status&quot;</span>,status);</span><br><span class="line">    <span class="keyword">return</span> retMap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Student1å’ŒStudent2æ–¹æ³•è°ƒç”¨è·¯å¾„æ—¶ä¼šæŠ¥é”™ï¼ŒåŸå› æ˜¯å‘ç”Ÿå†²çªï¼Œå› ä¸ºè·¯å¾„ä¼ è¿›æ¥çš„æ—¶å€™æ— æ³•åŒºåˆ†æœ€åæ˜¯{age}è¿˜æ˜¯{status}ï¼Œé‚£æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><p><strong>æ–¹æ³•ä¸€ï¼š</strong><br>æˆ‘ä»¬åªéœ€è¦åœ¨è®¾è®¡çš„æ—¶å€™é¿å…è¿™ç§æƒ…å†µå‘ç”Ÿï¼Œæ¯”å¦‚å¯ä»¥æ”¹æˆå¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/student/&#123;id&#125;/detail/&#123;city&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">student3</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id,</span></span><br><span class="line"><span class="params">                       <span class="meta">@PathVariable(&quot;city&quot;)</span> Integer city)</span> &#123;</span><br><span class="line">    Map&lt;String,Object&gt; retMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    retMap.put(<span class="string">&quot;id&quot;</span>,id);</span><br><span class="line">    retMap.put(<span class="string">&quot;city&quot;</span>,city);</span><br><span class="line">    <span class="keyword">return</span> retMap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±èƒ½é¿å…ä¸¤ç§æ–¹æ³•è°ƒç”¨çš„è·¯å¾„ç›¸åŒè€Œå‘ç”Ÿå†²çªäº†ï¼</p><p><strong>æ–¹æ³•äºŒï¼š</strong><br>è¿˜æœ‰ä¸€ç§æ–¹æ³•å°±æ˜¯é€šè¿‡æ”¹å˜æ³¨é‡Šæ¥é¿å…ç›¸åŒæ³¨é‡Šçš„å†²çªï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//    @RequestMapping(value = &quot;/student/detail/&#123;id&#125;/&#123;age&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@GetMapping(value = &quot;/student/detail/&#123;id&#125;/&#123;age&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">student1</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id,</span></span><br><span class="line"><span class="params">                           <span class="meta">@PathVariable(&quot;age&quot;)</span> Integer age)</span> &#123;</span><br><span class="line">        Map&lt;String,Object&gt; retMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        retMap.put(<span class="string">&quot;id&quot;</span>,id);</span><br><span class="line">        retMap.put(<span class="string">&quot;age&quot;</span>,age);</span><br><span class="line">        <span class="keyword">return</span> retMap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    @RequestMapping(value = &quot;/student/detail/&#123;id&#125;/&#123;status&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@DeleteMapping(value = &quot;/student/detail/&#123;id&#125;/&#123;status&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">student2</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id,</span></span><br><span class="line"><span class="params">                           <span class="meta">@PathVariable(&quot;status&quot;)</span> Integer status)</span> &#123;</span><br><span class="line">        Map&lt;String,Object&gt; retMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        retMap.put(<span class="string">&quot;id&quot;</span>,id);</span><br><span class="line">        retMap.put(<span class="string">&quot;status&quot;</span>,status);</span><br><span class="line">        <span class="keyword">return</span> retMap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä»ä»£ç ä¸­æˆ‘ä»¬å‘ç°ï¼Œè™½ç„¶è·¯å¾„æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æ³¨é‡Šä¸ä¸€æ ·ï¼ŒæŠŠåŸæ¥çš„@RequestMappingæ¢æˆäº†@GetMappingå’Œ@DeleteMappingï¼Œæ‰€ä»¥å½“è·¯å¾„ä¸€æ ·æ—¶ï¼ŒGetæ–¹æ³•å’ŒDeleteæ–¹æ³•æ‰€è¯·æ±‚çš„è·¯å¾„æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™æ ·ä¹Ÿèƒ½é¿å…å†²çªï¼Œä½†æ˜¯ç›¸æ¯”äºæ–¹æ³•ä¸€è¿˜æ˜¯ä¸å¤Ÿå¥½ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å­¦ä¹  </category>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åç«¯ </tag>
            
            <tag> Spring </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Boot å­¦ä¹ ç¬”è®° 06</title>
      <link href="/2021/08/09/893e8b53eb77-q1jun/"/>
      <url>/2021/08/09/893e8b53eb77-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="Spring-Boot-å­¦ä¹ ç¬”è®°-06"><a href="#Spring-Boot-å­¦ä¹ ç¬”è®°-06" class="headerlink" title="Spring Boot å­¦ä¹ ç¬”è®° 06"></a>Spring Boot å­¦ä¹ ç¬”è®° 06</h1><h2 id="0x01-MybatisæœåŠ¡æ¥å£åŠè°ƒç”¨"><a href="#0x01-MybatisæœåŠ¡æ¥å£åŠè°ƒç”¨" class="headerlink" title="0x01 MybatisæœåŠ¡æ¥å£åŠè°ƒç”¨"></a>0x01 MybatisæœåŠ¡æ¥å£åŠè°ƒç”¨</h2><p>åœ¨æˆ‘ä»¬å·²ç»é€šè¿‡é€†å‘ç”Ÿæˆäº†Mapperæ¥å£ç±»ã€æ˜ å°„æ–‡ä»¶ä»¥åŠJAVAæ¨¡å‹çš„ä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦é€šè¿‡ä¸šåŠ¡å±‚çš„æœåŠ¡æ¥è°ƒç”¨æ•°æ®ã€‚</p><p>æˆ‘ä»¬é¦–å…ˆåœ¨æ§åˆ¶å±‚@Controlleræ³¨è§£çš„æ–¹æ³•ä¸‹æ·»åŠ @Autowiredæ³¨è§£æ¥æ³¨å…¥ä¸šåŠ¡å±‚æå–çš„æ•°æ®ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StudentService studentService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/student&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="meta">@ResponseBody</span> Object <span class="title function_">student</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> studentService.queryStudentById(id);</span><br><span class="line">        <span class="keyword">return</span> student;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¹¶ä¸”åœ¨ä¸‹æ–¹çš„@RequestMappingæ³¨è§£ä¸­è°ƒç”¨è¯¥æœåŠ¡æ³¨å…¥çš„æ•°æ®å­˜æ”¾åˆ°Studentç±»ä¸­ã€‚</p><p>è¿™æ—¶å€™è‚¯å®šè¿˜æ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªå«åšStudentServiceçš„ç±»ï¼Œé‚£æˆ‘ä»¬å°±åœ¨Application.javaåŒçº§ç›®å½•æˆ–ä¸‹çº§ç›®å½•ä¸­åˆ›å»ºè¿™ä¸ªæœåŠ¡ç±»å’Œæ¥å£ã€‚<br>åœ¨Application.javaåŒçº§ç›®å½•æ–°å¢ä¸€ä¸ªåŒ…ï¼ŒåŒ…åä¸ºserviceï¼ŒåŒ…å†…æ–°å»ºä¸€ä¸ªæ¥å£ç±»ï¼Œæ¥å£åä¸ºStudentService:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjpowernode.springboot.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.bjpowernode.springboot.model.Student;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">StudentService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®å­¦ç”ŸIDæŸ¥è¯¢è¯¦æƒ…</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Student <span class="title function_">queryStudentById</span><span class="params">(Integer id)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¯¥æ¥å£çš„åŠŸèƒ½ä¸ºæ ¹æ®å­¦ç”ŸIDæŸ¥è¯¢å­¦ç”Ÿè¯¦æƒ…æ•°æ®ã€‚</p><p>å¯¹åº”è¿™ä¸ªæ¥å£ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªå®ç°ç±»ï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ªæ¥å£åŒçº§ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåŒ…ï¼ŒåŒ…åä¸ºImplï¼ŒåŒ…å†…æ–°å»ºjavaæ–‡ä»¶StudentServiceImpl.javaæ¥å®ç°æ¥å£çš„åŠŸèƒ½ã€‚</p><p>è€Œä¸”æˆ‘ä»¬çš„ä¸šåŠ¡æ¥å£å®ç°ç±»è¿˜å¾—é€šè¿‡__@Service__æ³¨è§£æ”¾å…¥Springå®¹å™¨ä¸­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjpowernode.springboot.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.bjpowernode.springboot.mapper.StudentMapper;</span><br><span class="line"><span class="keyword">import</span> com.bjpowernode.springboot.model.Student;</span><br><span class="line"><span class="keyword">import</span> com.bjpowernode.springboot.service.StudentService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">StudentService</span> &#123;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¸šåŠ¡å±‚ï¼Œéœ€è¦è°ƒç”¨æ•°æ®æŒä¹…å±‚ï¼Œå°±é€šè¿‡@Autowiredè¿™ä¸ªæ³¨è§£æ³¨å…¥è¿›æ¥,è¿™é‡Œæˆ‘ä»¬å°±å°†StudentMapperæ³¨å…¥è¿›æ¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> StudentMapper studentMapper;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é‚£æˆ‘ä»¬æ³¨å…¥çš„studentMapperå°±è¦ç»™æˆ‘ä»¬æä¾›ä¸€ä¸ªæ–¹æ³•ï¼Œé‚£å°±æ˜¯é€šè¿‡ä¹‹å‰Mybatisé€†å‘ç”Ÿæˆçš„selectByPrimaryKey()æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Student <span class="title function_">queryStudentById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> studentMapper.selectByPrimaryKey(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œè¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜å¿…é¡»æ·»åŠ ä¸€ä¸ªæ‰«æå™¨ï¼Œæ¥æ‰«æDAOæ¥å£åˆ°Springå®¹å™¨ï¼Œæˆ‘ä»¬æ‰èƒ½åœ¨<strong>ä¸šåŠ¡æ¥å£å®ç°ç±»</strong>ä¸­å®ç°studentMapperçš„æ³¨å…¥ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjpowernode.springboot.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.bjpowernode.springboot.model.Student;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span> <span class="comment">//æ‰«æDAOæ¥å£åˆ°springå®¹å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">StudentMapper</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">deleteByPrimaryKey</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">insert</span><span class="params">(Student record)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">insertSelective</span><span class="params">(Student record)</span>;</span><br><span class="line"></span><br><span class="line">    Student <span class="title function_">selectByPrimaryKey</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">updateByPrimaryKeySelective</span><span class="params">(Student record)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">updateByPrimaryKey</span><span class="params">(Student record)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ç°åœ¨è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯xmlæ–‡ä»¶åœ¨srcé‡Œé¢æ˜¯ä¸èƒ½è¢«é¡¹ç›®ç¼–è¯‘æ‰§è¡Œçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»åœ¨pom.xmlä¸­çš„<build>æ·»åŠ resourcesé¡¹æ¥è®©é¡¹ç›®ç¼–è¯‘xmlæ–‡ä»¶ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ‰‹åŠ¨æŒ‡å®šæ–‡ä»¶å¤¹ä¸ºresources--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·å½“æˆ‘ä»¬åœ¨æµè§ˆå™¨è¾“å…¥<a target="_blank" rel="noopener" href="http://localhost:8080/student?id=1%E6%97%B6%EF%BC%8C%E6%88%91%E4%BB%AC%E5%B0%B1%E8%83%BD%E8%8E%B7%E5%BE%97id=1%E7%9A%84%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF%E4%BA%86%E3%80%82">http://localhost:8080/student?id=1æ—¶ï¼Œæˆ‘ä»¬å°±èƒ½è·å¾—id=1çš„å­¦ç”Ÿä¿¡æ¯äº†ã€‚</a></p><p>æ•°æ®åº“ä¸­çš„è¡¨çš„ä¿¡æ¯å¦‚ä¸‹ï¼š<br>id,name,age<br>1,zhangsan,25<br>2,lisi,28<br>3,wangwu,23<br>4,Tom,21<br>5,Jck,55<br>6,Lucy,27<br>7,zhaoliu,75</p><p>æµè§ˆå™¨è¿”å›{â€œidâ€:1,â€nameâ€:â€zhangsanâ€,â€ageâ€:25}</p><p>è¯´æ˜æˆ‘ä»¬é…ç½®æˆåŠŸï¼</p><h2 id="0x02-Mybatisæ‰«æå¤šä¸ªMapperæ¥å£åŠå­ç›®å½•"><a href="#0x02-Mybatisæ‰«æå¤šä¸ªMapperæ¥å£åŠå­ç›®å½•" class="headerlink" title="0x02 Mybatisæ‰«æå¤šä¸ªMapperæ¥å£åŠå­ç›®å½•"></a>0x02 Mybatisæ‰«æå¤šä¸ªMapperæ¥å£åŠå­ç›®å½•</h2><p>åœ¨ä¸Šé¢æˆ‘ä»¬è¯´åˆ°äº†æ‰«æå™¨**@Mapper<strong>ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æœ‰å¤šä¸ªMapperæ¥å£ç±»å’Œæ˜ å°„æ–‡ä»¶å‘¢ï¼Ÿè¿™é‡Œæˆ‘ä»¬å°±ä¸å†ä½¿ç”¨</strong>@Mapper**è¿™ä¸ªå•ä¸€æ‰«æå™¨äº†ã€‚</p><p>æˆ‘ä»¬åœ¨Application.javaè¿™ä¸ªå…¥å£ç±»çš„**@SpringBootApplication<strong>æ³¨é‡Šæ—æ·»åŠ ä¸€ä¸ªæ³¨é‡Š:</strong>@MapperScan(â€œâ€)** ï¼Œæ¥å¼€å¯æ‰«æMapperæ¥å£çš„åŒ…ä»¥åŠå­ç›®å½•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bjpowernode.springboot;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span>  <span class="comment">//å¼€å¯springé…ç½®</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.bjpowernode.springboot.mapper&quot;)</span> <span class="comment">//å¼€å¯æ‰«æMapperæ¥å£çš„åŒ…ä»¥åŠå­ç›®å½•</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨å†é¢å¤–æ·»åŠ **@Mapper<strong>è¿™ä¸ªæ³¨é‡Šäº†ï¼</strong>(â€œâ€)** å†…å†™çš„æ˜¯Mapperæ¥å£çš„åŒ…æ‰€åœ¨è·¯å¾„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å­¦ä¹  </category>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åç«¯ </tag>
            
            <tag> Spring </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Boot å­¦ä¹ ç¬”è®° 05</title>
      <link href="/2021/08/08/4b359cf9184b-q1jun/"/>
      <url>/2021/08/08/4b359cf9184b-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="Spring-Bootå­¦ä¹ ç¬”è®°-05"><a href="#Spring-Bootå­¦ä¹ ç¬”è®°-05" class="headerlink" title="Spring Bootå­¦ä¹ ç¬”è®° 05"></a>Spring Bootå­¦ä¹ ç¬”è®° 05</h1><h2 id="0x01-Mybatis-æ˜ å°„æ–‡ä»¶è½¬ç§»åˆ°resourcesæ–‡ä»¶å¤¹ä¸‹"><a href="#0x01-Mybatis-æ˜ å°„æ–‡ä»¶è½¬ç§»åˆ°resourcesæ–‡ä»¶å¤¹ä¸‹" class="headerlink" title="0x01 Mybatis æ˜ å°„æ–‡ä»¶è½¬ç§»åˆ°resourcesæ–‡ä»¶å¤¹ä¸‹"></a>0x01 Mybatis æ˜ å°„æ–‡ä»¶è½¬ç§»åˆ°resourcesæ–‡ä»¶å¤¹ä¸‹</h2><p>å…³äºMapperæ˜ å°„æ–‡ä»¶çš„å­˜æ”¾ä½ç½®çš„å†™æ³•æœ‰ä¸¤ç§ï¼š</p><ol><li>å°†mapperæ¥å£å’Œmapperæ˜ å°„æ–‡ä»¶å­˜æ”¾åˆ°src&#x2F;main&#x2F;javaåŒä¸€ç›®å½•ä¸‹ï¼Œè¿˜éœ€è¦åœ¨pom.xmlæ–‡ä»¶ä¸­æ‰‹åŠ¨æŒ‡å®šèµ„æºæ–‡ä»¶å¤¹è·¯å¾„resourcesã€‚</li><li>å°†mapperæ¥å£å’Œæ˜ å°„æ–‡ä»¶å¤¹åˆ†å¼€å­˜æ”¾ï¼Œmapperæ¥å£ç±»å­˜æ”¾åˆ°src&#x2F;main&#x2F;javaç›®å½•ä¸‹ï¼Œmapperæ˜ å°„æ–‡ä»¶å­˜æ”¾åˆ°resourcesï¼ˆç±»è·¯å¾„ï¼‰ï¼Œåœ¨springbootæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æŒ‡å®šmapperæ˜ å°„æ–‡ä»¶çš„å­˜æ”¾ä½ç½®ã€‚</li></ol><p>å°†srcä¸‹çš„XMLæ˜ å°„æ–‡ä»¶ç§»åŠ¨åˆ°resourcesæ–‡ä»¶å¤¹Mapperä¸­ï¼Œè¿™æ ·æœ‰åŠ©äºæˆ‘ä»¬ç®¡ç†xmlæ˜ å°„æ–‡ä»¶ã€‚</p><p>ç„¶ååœ¨application.propertiesä¸­æ·»åŠ :</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mybatis.mapper-locations=classpath:mapper/*.xml</span><br></pre></td></tr></table></figure><p>è¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨åƒä¸Šä¸€æ¬¡åœ¨pom.xmlé‡Œçš„<build>ä¸­æ·»åŠ <resources>è¿™ä¸€é¡¹äº†</p><blockquote><p> å› ä¸ºmavenåªç¼–è¯‘srcä¸­çš„<code>.java</code>æ–‡ä»¶</p></blockquote><h2 id="0x02-SpringBooté›†æˆMybatisæœ€ä¸»è¦çš„æ˜¯ä¸¤ä¸ªæ³¨è§£"><a href="#0x02-SpringBooté›†æˆMybatisæœ€ä¸»è¦çš„æ˜¯ä¸¤ä¸ªæ³¨è§£" class="headerlink" title="0x02 SpringBooté›†æˆMybatisæœ€ä¸»è¦çš„æ˜¯ä¸¤ä¸ªæ³¨è§£"></a>0x02 SpringBooté›†æˆMybatisæœ€ä¸»è¦çš„æ˜¯ä¸¤ä¸ªæ³¨è§£</h2><ul><li>@Mapper éœ€è¦åœ¨æ¯ä¸€ä¸ªMapperæ¥å£ç±»ä¸Šæ·»åŠ ï¼Œä½œç”¨æ‰«ædaoæ¥å£</li><li>@MapperScan æ˜¯åœ¨Springbootå¯åŠ¨å…¥å£ç±»ä¸Šæ·»åŠ çš„ï¼Œå®ƒæ˜¯ä¸€æ¬¡æ‰«ææ‰€æœ‰çš„åŒ…</li></ul><h2 id="0x03-SpringBootä¸‹ä½¿ç”¨äº‹åŠ¡"><a href="#0x03-SpringBootä¸‹ä½¿ç”¨äº‹åŠ¡" class="headerlink" title="0x03 SpringBootä¸‹ä½¿ç”¨äº‹åŠ¡"></a>0x03 SpringBootä¸‹ä½¿ç”¨äº‹åŠ¡</h2><p>äº‹åŠ¡æ˜¯ä¸€ä¸ªå®Œæ•´çš„åŠŸèƒ½ï¼Œä¹Ÿå«åšæ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¸šåŠ¡ã€‚</p><p>äº‹åŠ¡åªè·Ÿä»€ä¹ˆSQLè¯­å¥æœ‰å…³ç³»ï¼Ÿ<br>äº‹åŠ¡åªè·ŸDMLè¯­å¥æœ‰å…³ç³»ï¼šå¢åˆ æ”¹</p><p>SQLè¯­å¥ï¼šDML,DQL,DDL,TCL,DCL</p><p>ä½¿ç”¨äº‹åŠ¡åŠŸèƒ½çš„æ—¶å€™åªéœ€è¦åœ¨javaä»£ç æ·»åŠ æ³¨è§£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·æ‰§è¡Œè¯¥æ–¹æ³•çš„æ—¶å€™ä¼šçœ‹æˆäº‹åŠ¡æ¥è¿ä½œã€‚</p><p>å½“äº‹åŠ¡å…¶ä¸­ä¸€éƒ¨åˆ†å¤±æ•ˆæ—¶ä¼šå›é€€åˆ°å¼€å§‹é˜¶æ®µã€‚</p><p>åœ¨å…¥å£ç±»Application.javaä¸­å¯ä»¥æ·»åŠ :</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableTransactionManagement</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ³¨è§£æ¥å¼€å¯äº‹åŠ¡åŠŸèƒ½ã€‚</p><h2 id="0x04-SpringBootæ³¨è§£-RestController"><a href="#0x04-SpringBootæ³¨è§£-RestController" class="headerlink" title="0x04 SpringBootæ³¨è§£@RestController"></a>0x04 SpringBootæ³¨è§£@RestController</h2><p>@RestCOntrollerç›¸å½“äºæ§åˆ¶å±‚ç±»ä¸ŠåŠ <code>@Controller</code> + æ–¹æ³•ä¸ŠåŠ <code>@ResponseBody</code></p><p>æ„å‘³ç€å½“å‰æ§åˆ¶å±‚ç±»ä¸­æ‰€æœ‰æ–¹æ³•è¿”è¿˜çš„éƒ½æ˜¯JSONå¯¹è±¡ã€‚</p><p>å¦‚ä»¥ä¸‹xxxController.javaä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.springboot.springboot002.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IndexController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/springboot/say&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="meta">@ResponseBody</span> String <span class="title function_">say</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello ,Springboot!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç­‰åŒäº:(ä¸éœ€è¦@ResponseBody)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.springboot.springboot002.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IndexController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/springboot/say&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">say</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello ,Springboot!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯å­¦ä¹  </category>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åç«¯ </tag>
            
            <tag> Spring </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Boot å­¦ä¹ ç¬”è®° 04</title>
      <link href="/2021/08/06/9f999f2edeca-q1jun/"/>
      <url>/2021/08/06/9f999f2edeca-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="Spring-Bootå­¦ä¹ ç¬”è®°-04"><a href="#Spring-Bootå­¦ä¹ ç¬”è®°-04" class="headerlink" title="Spring Bootå­¦ä¹ ç¬”è®° 04"></a>Spring Bootå­¦ä¹ ç¬”è®° 04</h1><h2 id="xxxMapper-xmlå†…å®¹åˆ†æ"><a href="#xxxMapper-xmlå†…å®¹åˆ†æ" class="headerlink" title="xxxMapper.xmlå†…å®¹åˆ†æ"></a>xxxMapper.xmlå†…å®¹åˆ†æ</h2><blockquote><p>Mybatisé€†å‘ç”Ÿæˆçš„æ–‡ä»¶åªæœ‰å•è¡¨æ“ä½œã€‚</p></blockquote><p>æ–‡ä»¶å¤´(UTF-8)ç¼–ç :</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br></pre></td></tr></table></figure><p>ç”Ÿæˆçš„xxxMapper.xmlå†…å®¹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.springboot.springboot012mybatis.mapper.StudentMapper&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>resultMapä½œç”¨ï¼š</p><ol><li>å½“æ•°æ®åº“ä¸­å­—æ®µåç§°ä¸å®ä½“ç±»å¯¹è±¡çš„å±æ€§åä¸ä¸€æ ·æ—¶ï¼Œå¯ä»¥è¿›è¡Œè½¬æ¢</li><li>å½“æŸ¥è¯¢çš„ç»“æœæ²¡æœ‰å¯¹åº”ä¸€ä¸ªè¡¨çš„æ—¶å€™ï¼Œå¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªç»“æœé›†</li></ol><p>å…¶ä¸­ï¼š</p><ul><li>id æ ‡ç­¾åªèƒ½ä¿®æ”¹ä¸»é”®å­—æ®µ</li><li>result é™¤äº†ä¸»é”®ä»¥å¤–çš„å­—æ®µ</li><li>column æ•°æ®åº“ä¸­çš„å­—æ®µåç§°</li><li>property æ˜ å°„å¯¹è±¡çš„å±æ€§åç§°</li><li>jdbcType åˆ—ä¸­æ•°æ®åº“ä¸­å­—æ®µçš„ç±»å‹ï¼ˆå¯ä»¥å¿½ç•¥ä¸å†™ï¼‰</li></ul><blockquote><p>å¦‚æœæ•°æ®åº“ä¸­å­—æ®µåç§°ç”±å¤šä¸ªå•è¯æ„æˆï¼Œé€šè¿‡Mybatisé€†å‘å·¥ç¨‹ç”Ÿæˆçš„å¯¹è±¡å±æ€§åç§°<br>ä¼šæŒ‰ç…§é©¼å³°å‘½åæ³•è§„åˆ™ç”Ÿæˆå±æ€§åç§°ã€‚<br>å…¶ä¸­ï¼šæ•°æ®åº“ä¸­å­—æ®µåç§°ç”±å¤šä¸ªå•è¯æ„æˆæ—¶å€™å¿…é¡»ä½¿ç”¨ä¸‹åˆ’çº¿_åˆ†éš”</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;BaseResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.springboot.springboot012mybatis.model.Student&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;age&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;INTEGER&quot;</span> <span class="attr">property</span>=<span class="string">&quot;age&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>sqlè¯­å¥ç‰‡æ®µï¼Œå°†å…¬å…±çš„éƒ¨åˆ†æŠ½å–å‡ºæ¥,å¯ä»¥é€šè¿‡includeæ ‡ç­¾å¼•ç”¨çš„sqlè¯­å¥ç‰‡æ®µ:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;Base_Column_List&quot;</span>&gt;</span></span><br><span class="line">    id,name,age</span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯å­¦ä¹  </category>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åç«¯ </tag>
            
            <tag> Spring </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Dockeræ­å»ºå›¾åºŠ</title>
      <link href="/2021/08/06/44d4d934f4d6-q1jun/"/>
      <url>/2021/08/06/44d4d934f4d6-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="ç”¨Dockeræ­å»ºå›¾åºŠ"><a href="#ç”¨Dockeræ­å»ºå›¾åºŠ" class="headerlink" title="ç”¨Dockeræ­å»ºå›¾åºŠ"></a>ç”¨Dockeræ­å»ºå›¾åºŠ</h1><h2 id="ç¬¬ä¸€æ­¥ï¼Œå®‰è£…-docker-ï¼š"><a href="#ç¬¬ä¸€æ­¥ï¼Œå®‰è£…-docker-ï¼š" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼Œå®‰è£… docker ï¼š"></a>ç¬¬ä¸€æ­¥ï¼Œå®‰è£… docker ï¼š</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install docker</span><br></pre></td></tr></table></figure><h2 id="ç¬¬äºŒæ­¥ï¼Œå¯åŠ¨-dockerï¼š"><a href="#ç¬¬äºŒæ­¥ï¼Œå¯åŠ¨-dockerï¼š" class="headerlink" title="ç¬¬äºŒæ­¥ï¼Œå¯åŠ¨ dockerï¼š"></a>ç¬¬äºŒæ­¥ï¼Œå¯åŠ¨ dockerï¼š</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥è®¾ç½®å¼€æœºè‡ªå¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> docker</span><br></pre></td></tr></table></figure><h2 id="ç¬¬ä¸‰æ­¥ï¼ŒæŠŠåˆ«äººå·²ç»åšå¥½çš„é•œåƒæ‹‰ä¸‹æ¥"><a href="#ç¬¬ä¸‰æ­¥ï¼ŒæŠŠåˆ«äººå·²ç»åšå¥½çš„é•œåƒæ‹‰ä¸‹æ¥" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼ŒæŠŠåˆ«äººå·²ç»åšå¥½çš„é•œåƒæ‹‰ä¸‹æ¥"></a>ç¬¬ä¸‰æ­¥ï¼ŒæŠŠåˆ«äººå·²ç»åšå¥½çš„é•œåƒæ‹‰ä¸‹æ¥</h2><p>åœ¨ docker ä¸­æ‹‰é•œåƒè·Ÿ Git æ‹‰ä»“åº“å·®ä¸å¤šï¼Œå‘½ä»¤æ˜¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker imgae pull</span><br></pre></td></tr></table></figure><p>è¿™é‡Œéœ€è¦æ‹‰çš„æ˜¯ kdelfour&#x2F;lychee-dockerï¼Œæ‰€ä»¥å®Œæ•´å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image pull kdelfour/lychee-docker</span><br></pre></td></tr></table></figure><p>é•œåƒæ‹‰ä¸‹æ¥åï¼Œä½ å¯ä»¥ç”¨ <code>ls</code> çœ‹ä¸€ä¸‹æ˜¯ä¸æ˜¯æœ‰è¿™ä¸ªé•œåƒäº†ï¼ˆ<code>docker image ls</code>ï¼‰ã€‚</p><h2 id="ç¬¬å››æ­¥ï¼Œå¯åŠ¨è¿™ä¸ªé•œåƒ"><a href="#ç¬¬å››æ­¥ï¼Œå¯åŠ¨è¿™ä¸ªé•œåƒ" class="headerlink" title="ç¬¬å››æ­¥ï¼Œå¯åŠ¨è¿™ä¸ªé•œåƒ"></a>ç¬¬å››æ­¥ï¼Œå¯åŠ¨è¿™ä¸ªé•œåƒ</h2><p>éœ€è¦è¯´æ˜çš„æ˜¯ç«¯å£æ˜ å°„çš„é—®é¢˜ã€‚ç”±äºæˆ‘çš„æœåŠ¡å™¨å·²ç»æ­äº†ä¸ªäººç½‘ç«™ï¼Œä¹Ÿç”¨çš„æµè§ˆå™¨é»˜è®¤çš„ 80 ç«¯å£ï¼Œæ‰€ä»¥å›¾åºŠå°±ä¸èƒ½ç”¨ 80ï¼Œæˆ‘æ”¹ç”¨ 5120ï¼Œå®Œæ•´å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it -d -p 5120:80 kdelfour/lychee-docker</span><br></pre></td></tr></table></figure><blockquote><p>è®¿é—® 5120 ç«¯å£ï¼Œæ˜ å°„åˆ° docker å®¹å™¨é‡Œè¾¹çš„ 80 ç«¯å£ï¼‰ã€‚</p></blockquote><p>å‘½ä»¤ <code>docker container ls</code> æ˜¯æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨ã€‚å¯ä»¥çœ‹åˆ°ç¬¬ä¸€æ¬¡ç”¨è¿™ä¸ªå‘½ä»¤çš„æ—¶å€™ï¼Œæ²¡æœ‰å®¹å™¨åœ¨è·‘ï¼›å¯åŠ¨ä¹‹åå°±æœ‰äº†ã€‚</p><h2 id="ç¬¬äº”æ­¥ï¼Œè®¿é—®http-ä½ çš„åŸŸå-5120"><a href="#ç¬¬äº”æ­¥ï¼Œè®¿é—®http-ä½ çš„åŸŸå-5120" class="headerlink" title="ç¬¬äº”æ­¥ï¼Œè®¿é—®http://ä½ çš„åŸŸå:5120"></a>ç¬¬äº”æ­¥ï¼Œè®¿é—®<code>http://ä½ çš„åŸŸå:5120</code></h2><p>ç”±äºæˆ‘æ˜¯åœ¨æœ¬åœ°çš„è™šæ‹Ÿæœºé‡Œæ­å»ºï¼Œæ‰€ä»¥è®¿é—®çš„æ˜¯ <code>http://ip:5120</code> ã€‚</p><p>è¿›å…¥åˆ°åˆå§‹åŒ–é˜¶æ®µã€‚å¯ä»¥çœ‹åˆ° Database Host ã€Data Name å’Œ Table predix æ˜¯é€‰å¡«ï¼Œé‚£æˆ‘ä»¬å°±ä¸ç®¡å®ƒã€‚è€Œ Username å’Œ Password é»˜è®¤éƒ½æ˜¯ lychee ã€‚è¾“å…¥åç‚¹å‡» connectï¼Œä½ ä¼šçœ‹åˆ°å®ƒè¦ä½ æ–°å»ºä¸€ä¸ªç”¨æˆ·åå’Œå¯†ç ï¼Œè¿™æ˜¯ä½ ä¹‹åç™»å½•å›¾åºŠè¦ç”¨åˆ°çš„ã€‚</p><h2 id="ç¬¬å…­æ­¥ï¼Œåˆ›å»º-ablumï¼Œä¸Šä¼ å›¾ç‰‡"><a href="#ç¬¬å…­æ­¥ï¼Œåˆ›å»º-ablumï¼Œä¸Šä¼ å›¾ç‰‡" class="headerlink" title="ç¬¬å…­æ­¥ï¼Œåˆ›å»º ablumï¼Œä¸Šä¼ å›¾ç‰‡"></a>ç¬¬å…­æ­¥ï¼Œåˆ›å»º ablumï¼Œä¸Šä¼ å›¾ç‰‡</h2><p>å³ä¸Šè§’ + â€“&gt; Upload Photoï¼Œç„¶åå°±å¯ä»¥æ„‰å¿«çš„ä¸Šä¼ å›¾ç‰‡äº†ã€‚lychee è¿˜æä¾›äº†å…¶ä»–å¯¼å…¥å›¾ç‰‡æ–¹å¼ï¼Œç‚¹å‡»ç¬¦å· + å¯è‡ªè¡ŒæŒ‰éœ€é€‰æ‹©ã€‚æ›´å¤šç”¨æ³•è¯·è‡ªå·±æ¢ç´¢ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬ä¸Šä¼ çš„å›¾ç‰‡åˆ°åº•å»å“ªå„¿äº†å‘¢ã€‚è¿™æ—¶å€™æˆ‘ä»¬éœ€è¦å…ˆè¿›å…¥è¿™ä¸ªå®¹å™¨ã€‚å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker container <span class="built_in">ls</span> </span><br></pre></td></tr></table></figure><p>ä¼šæ˜¾ç¤ºå®¹å™¨çš„ CONTAINER IDï¼Œæ‹¿åˆ°è¿™ä¸ª ID åï¼Œé”®å…¥ </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker container <span class="built_in">exec</span> -it 9a8e6f34294a /bin/bash</span><br></pre></td></tr></table></figure><p>å°±è¿›å…¥å®¹å™¨äº†ã€‚</p><p>ç°åœ¨å¯ä»¥ <code>ls</code> ä¸€ä¸‹ï¼Œæ˜¯ä¸æ˜¯æ„Ÿè§‰è¿›å…¥äº†ä¸€ä¸ª linux ç»ˆç«¯ï¼Œå…¶å®è¿™å°±æ˜¯ docker æƒ³åšçš„ã€‚ç„¶åå…³æ³¨ uploads ç›®å½•ï¼Œå¯ä»¥çœ‹åˆ°å›¾ç‰‡å°±åœ¨ big ç›®å½•ä¸‹ã€‚</p><p>è‚¯å®šä¼šæœ‰äººè¯´å§æ§½ï¼Œé‚£æˆ‘æ€ä¹ˆæŠŠå›¾ç‰‡å–å‡ºæ¥å‘¢ï¼Ÿäº‹å®ä¸Šï¼Œlychee æä¾›äº†ç½‘é¡µçš„ä¸‹è½½æ–¹å¼ï¼Œæƒ³åœ¨æœåŠ¡å™¨ä¸Šæ“ä½œä¹Ÿ OK å‘€ã€‚æŠŠå›¾ç‰‡åå¤åˆ¶ä¸‹æ¥ï¼ˆè¿™ä¸ªç»è¿‡ hash å¤„ç†ï¼ŒåŸºæœ¬æ˜¯ç‹¬ä¸€æ— äºŒäº†ï¼‰ï¼Œåœ¨ä½ çš„æœåŠ¡å™¨ä¸Šç”¨ <code>find</code> å‘½ä»¤æœç´¢ï¼Œä¸å°±æ‰¾åˆ°å®ƒçš„ç»å¯¹è·¯å¾„äº†å˜›ï¼</p><p>æœ€åé™„ä¸Šå¸è½½æ–¹å¼ï¼š</p><ul><li>å…ˆåœæ­¢è¿è¡Œçš„å®¹å™¨ï¼š<code>docker container stop [container-id]</code></li><li>ç„¶ååˆ é™¤å®¹å™¨ï¼š<code>docker container rm [container-id]</code></li><li>æœ€ååˆ é™¤é•œåƒï¼š<code>docker image rmi [image-id]</code></li></ul><p>è·å–å¯¹åº”çš„ id å¯ä»¥é€šè¿‡å‘½ä»¤ï¼š<code>docker container ls </code>å’Œ <code>docker image ls</code>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åç«¯ </tag>
            
            <tag> Docker </tag>
            
            <tag> å›¾åºŠ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Boot å­¦ä¹ ç¬”è®° 03</title>
      <link href="/2021/08/04/54715f549ae4-q1jun/"/>
      <url>/2021/08/04/54715f549ae4-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="Spring-Bootå­¦ä¹ ç¬”è®°-03"><a href="#Spring-Bootå­¦ä¹ ç¬”è®°-03" class="headerlink" title="Spring Bootå­¦ä¹ ç¬”è®° 03"></a>Spring Bootå­¦ä¹ ç¬”è®° 03</h1><p>â€‹        </p><h2 id="0x01-SpringBooté›†æˆJSP"><a href="#0x01-SpringBooté›†æˆJSP" class="headerlink" title="0x01 SpringBooté›†æˆJSP"></a>0x01 SpringBooté›†æˆJSP</h2><p>æ‰“å¼€IDEAåˆ›å»ºSpringBooté¡¹ç›®åï¼Œåœ¨srcæ–‡ä»¶å¤¹çš„mainä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹webappæ¥å­˜æ”¾webèµ„æºï¼ˆå‡å¦‚åŸæ¥æ²¡æœ‰webappæ–‡ä»¶å¤¹ï¼‰ã€‚</p><p>åˆ›å»ºå¥½åœ¨æ¨¡å—è®¾ç½®ä¸­çš„æ¨¡å—-&gt;Web-&gt;Webèµ„æºç›®å½•æ·»åŠ ä¸Šé¢åˆ›å»ºçš„webappç›®å½•ï¼Œç›¸å¯¹ä¸éƒ¨ç½²æ ¹çš„è·¯å¾„ä¸º<code>/</code>,ç„¶åç‚¹å‡»åˆ›å»ºå·¥ä»¶ï¼Œæœ€åç‚¹å‡»åº”ç”¨ï¼Œå°±å®Œæˆäº†webappçš„è®¾ç½®ï¼Œå¾…ä¼šåœ¨é‡Œé¢åˆ›å»ºjspæ–‡ä»¶å°±è¡Œäº†ã€‚</p><p>ç”±äºé¡¹ç›®æœ¬èº«å¯¹jspçš„è§£æå¹¶ä¸æ”¯æŒï¼Œæ‰€ä»¥åœ¨pom.xmlæ–‡ä»¶é‡Œé¢è¦æ·»åŠ å¯¹jspè§£æçš„åŒ…çš„ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--        å¼•å…¥SpringBootå†…åµŒTomcatå¯¹jspçš„è§£æåŒ…,ä¸æ·»åŠ è§£æä¸äº†jsp--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        ä»…ä»…åªæ˜¯å±•ç¤ºjspé¡µé¢ï¼Œåªæ·»åŠ ä»¥ä¸‹ä¸€ä¸ªä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.embed<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat-embed-jasper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åä¸ºäº†ä½¿jspæ­£å¸¸ç¼–è¯‘ï¼Œè¿˜è¦åœ¨pom.xmlçš„__<build>__ä¸­æ·»åŠ :</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                æºæ–‡ä»¶å¤¹--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/webapp<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                æŒ‡å®šç¼–è¯‘åˆ°META-INF/resources--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">targetPath</span>&gt;</span>META-INF/resources<span class="tag">&lt;/<span class="name">targetPath</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                æŒ‡å®šæºæ–‡ä»¶å¤¹ä¸­çš„å“ªäº›èµ„æºè¦ç¼–è¯‘è¿›å»--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                    æ‰€æœ‰ä¸œè¥¿ï¼š *.*--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>*.*<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ·»åŠ è§†å›¾è§£æå™¨:</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#é…ç½®è§†å›¾è§£æå™¨</span></span><br><span class="line"><span class="attr">spring.mvc.view.prefix</span>=<span class="string">/</span></span><br><span class="line"><span class="attr">spring.mvc.view.suffix</span>=<span class="string">.jsp</span></span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±è¦è®¾ç½®@Controlleräº†ï¼Œåœ¨Application.javaæ–‡ä»¶çš„åŒçº§ç›®å½•æˆ–ä¸‹çº§ç›®å½•åˆ›å»ºä¸€ä¸ªController&#x2F;IndexController.javaï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.springboot.springboot010jsp.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IndexController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/say&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">say</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        mv.addObject(<span class="string">&quot;message&quot;</span>, <span class="string">&quot;Hello Springboot!&quot;</span>);</span><br><span class="line">        mv.setViewName(<span class="string">&quot;say&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/index&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">index</span><span class="params">(Model model)</span> &#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;message&quot;</span>, <span class="string">&quot;Hello world&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;say&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨webappä¸Šåˆ›å»ºå¯¹åº”çš„say.jsp:</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;$&#123;message&#125;&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>æ¬¡jspç”¨æ¥æ˜¾ç¤º<code>$&#123;message&#125;</code>ç»“æœ:</p><p>æµè§ˆå™¨è¾“å…¥localhost:8080&#x2F;sayï¼Œè¾“å‡ºç»“æœä¸ºï¼š<strong>Hello Springboot!</strong></p><p>æµè§ˆå™¨è¾“å…¥localhost:8080&#x2F;indexï¼Œè¾“å‡ºç»“æœä¸ºï¼š<strong>Hello world</strong></p><p>åˆ†åˆ«å¯¹åº”@Controlleré‡Œé¢ä¸¤ä¸ªAttributeã€‚</p><blockquote><p> ä»¥ä¸Šæ­¥éª¤ç¼ºä¸€ä¸å¯ï¼</p></blockquote><h2 id="0x02-å¦‚ä½•åœ¨ä¸€ä¸ªå•çº¯çš„Mavenæ¡†æ¶ä¸Šæ‰‹åŠ¨é…ç½®SpringBoot"><a href="#0x02-å¦‚ä½•åœ¨ä¸€ä¸ªå•çº¯çš„Mavenæ¡†æ¶ä¸Šæ‰‹åŠ¨é…ç½®SpringBoot" class="headerlink" title="0x02 å¦‚ä½•åœ¨ä¸€ä¸ªå•çº¯çš„Mavenæ¡†æ¶ä¸Šæ‰‹åŠ¨é…ç½®SpringBoot"></a>0x02 å¦‚ä½•åœ¨ä¸€ä¸ªå•çº¯çš„Mavenæ¡†æ¶ä¸Šæ‰‹åŠ¨é…ç½®SpringBoot</h2><p>å‰é¢æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªSpringBooté¡¹ç›®éƒ½æ˜¯ç”¨ideaè‡ªå¸¦çš„Springbootæ¡†æ¶æ¥åˆ›å»ºï¼Œé‚£æˆ‘ä»¬å¦‚ä½•åœ¨ä¸€ä¸ªåªæœ‰pom.xmlå’ŒMevenæ–‡ä»¶ç»“æ„çš„é¡¹ç›®é‡Œé¢è‡ªå·±æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªSPringbooté¡¹ç›®å‘¢ï¼Œè¿™ä¸ªæ–¹æ³•é€‚ç”¨äºä¸€å¼€å§‹åˆ›å»ºSpringBooté¡¹ç›®æ—¶ç½‘ä¸å¥½çš„æƒ…å†µã€‚</p><p>é¦–å…ˆæˆ‘ä»¬åœ¨Pom.xmlæ–‡ä»¶é‡Œé¢æ·»åŠ å¯¹åº”çš„SpringBootä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!--SpringBootçˆ¶å·¥ç¨‹GAVåæ ‡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        SpringBootæ¡†æ¶Webé¡¹ç›®èµ·æ­¥ä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        SpringBootæ¡†æ¶æµ‹è¯•èµ·æ­¥ä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--            SpringBooté¡¹ç›®æ‰“åŒ…ç¼–è¯‘çš„æ’ä»¶--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p> è¿™é‡Œåªç»™å‡ºéœ€è¦æ·»åŠ çš„éƒ¨åˆ†ï¼Œå¹¶ä¸æ˜¯è¦†ç›–çš„æ„æ€ã€‚</p></blockquote><p>ç„¶åæ–‡ä»¶ç»“æ„ä¹Ÿéœ€è¦æ”¹å˜ï¼š</p><p>åœ¨src&#x2F;main&#x2F;javaä¸­åˆ›å»ºåŒ…<code>com.auspic1ous.springboot</code></p><p>åœ¨å…¶ä¸­åˆ›å»ºä¸€ä¸ªApplication.java(åå­—éšæ„):</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.auspic1ous.springboot;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="comment">//Springbooté¡¹ç›®å¯åŠ¨å…¥å£ç±»</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span><span class="comment">//SpringBootæ ¸å¿ƒæ³¨è§£ï¼Œä¸»è¦ç”¨äºå¼€å¯springè‡ªåŠ¨é…ç½®</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åè¿˜è¦åœ¨src&#x2F;main&#x2F;resourcesä¸­åˆ›å»ºå¦‚ä¸‹æ–‡ä»¶ã€æ–‡ä»¶å¤¹ï¼š</p><ul><li>static(æ–‡ä»¶å¤¹)ï¼šå›¾æ ‡ç­‰é™æ€èµ„æºæ”¾å…¥æ­¤æ–‡ä»¶å¤¹</li><li>templates(æ–‡ä»¶å¤¹)ï¼šæ¨¡æ¿ï¼Œå‰ç«¯æ¨¡æ¿å¼•æ“æ”¾å…¥æ­¤æ–‡ä»¶å¤¹Thyme leaf.htmlï¼ˆç™¾å¶ç®±ï¼‰</li><li>application.propertiesï¼šSpringBootçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶</li></ul><h2 id="0x03-SpringBootç»§æ‰¿Mybatis"><a href="#0x03-SpringBootç»§æ‰¿Mybatis" class="headerlink" title="0x03 SpringBootç»§æ‰¿Mybatis"></a>0x03 SpringBootç»§æ‰¿Mybatis</h2><h3 id="0x0301-æ·»åŠ Mybatisä¾èµ–å’Œæ•°æ®åº“é©±åŠ¨-mysql"><a href="#0x0301-æ·»åŠ Mybatisä¾èµ–å’Œæ•°æ®åº“é©±åŠ¨-mysql" class="headerlink" title="0x0301 æ·»åŠ Mybatisä¾èµ–å’Œæ•°æ®åº“é©±åŠ¨(mysql)"></a>0x0301 æ·»åŠ <code>Mybatisä¾èµ–</code>å’Œ<code>æ•°æ®åº“é©±åŠ¨(mysql)</code></h3><p>Pom.xmlä¸­æ·»åŠ ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--        Mysqlé©±åŠ¨--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        Mybatisæ•´åˆSpringBootæ¡†æ¶çš„èµ·æ­¥ä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="0x0302-ä½¿ç”¨Mybatisæä¾›çš„é€†å‘å·¥ç¨‹ç”Ÿæˆå®ä½“Beanï¼Œæ˜ å°„æ–‡ä»¶ï¼ŒBAOæ¥å£ã€‚"><a href="#0x0302-ä½¿ç”¨Mybatisæä¾›çš„é€†å‘å·¥ç¨‹ç”Ÿæˆå®ä½“Beanï¼Œæ˜ å°„æ–‡ä»¶ï¼ŒBAOæ¥å£ã€‚" class="headerlink" title="0x0302 ä½¿ç”¨Mybatisæä¾›çš„é€†å‘å·¥ç¨‹ç”Ÿæˆå®ä½“Beanï¼Œæ˜ å°„æ–‡ä»¶ï¼ŒBAOæ¥å£ã€‚"></a>0x0302 ä½¿ç”¨Mybatisæä¾›çš„é€†å‘å·¥ç¨‹ç”Ÿæˆå®ä½“Beanï¼Œæ˜ å°„æ–‡ä»¶ï¼ŒBAOæ¥å£ã€‚</h3><p>pom.xmlæ·»åŠ ä¾èµ–å’Œæ’ä»¶ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        Mybatisæ•´åˆSpringBootæ¡†æ¶çš„èµ·æ­¥ä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                Mybatis ä»£ç è‡ªåŠ¨ç”Ÿæˆæ’ä»¶--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--                    é…ç½®æ–‡ä»¶çš„ä½ç½®--&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">configurationFile</span>&gt;</span>GeneratorMapper.xml<span class="tag">&lt;/<span class="name">configurationFile</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">verbose</span>&gt;</span>true<span class="tag">&lt;/<span class="name">verbose</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">overwrite</span>&gt;</span>true<span class="tag">&lt;/<span class="name">overwrite</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªxmlæ–‡ä»¶ï¼Œæ–‡ä»¶åä¸ºï¼š<code>GeneratorMapper</code>:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">generatorConfiguration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    æŒ‡å®šè¿æ¥æ•°æ®åº“çš„JDBCé©±åŠ¨åŒ…æ‰€åœ¨ä½ç½®,æŒ‡å®šåˆ°ä½ æœ¬æœºçš„å®Œæ•´è·¯å¾„--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">classPathEntry</span> <span class="attr">location</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--    é…ç½®tableè¡¨ä¿¡æ¯å†…å®¹ä½“ï¼ŒtargetRuntime æŒ‡å®šé‡‡ç”¨Mybatis3çš„ç‰ˆæœ¬--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">&quot;tables&quot;</span> <span class="attr">targetRuntime</span>=<span class="string">&quot;Mybatis3&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        æŠ‘åˆ¶ç”Ÿæˆæ³¨é‡Šï¼Œç”±äºç”Ÿæˆçš„æ³¨é‡Šéƒ½æ˜¯è‹±æ–‡çš„ï¼Œå¯ä»¥ä¸è®©å®ƒç”Ÿæˆ--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suppressAllComments&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">jdbcConnection</span> <span class="attr">driverClass</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">connectionURL</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/springboot&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">userId</span>=<span class="string">&quot;root&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">password</span>=<span class="string">&quot;admin123456&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">jdbcConnection</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        ç”Ÿæˆmodelç±»ï¼ŒtargetPackageæŒ‡å®šmodelç±»çš„åŒ…å ï¼ŒtargetProjectæŒ‡å®šç”Ÿæˆçš„modelæ”¾åœ¨eclipseçš„å“ªä¸ªå·¥ç¨‹ä¸‹é¢--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.auspic1ous.springboot.model&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">targetProject</span>=<span class="string">&quot;src/main/java&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;trimStrings&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        ç”Ÿæˆ Mybatis çš„ Mapper.xmlæ–‡ä»¶ï¼ŒtargetPackageæŒ‡å®šmapper.xml æ–‡ä»¶çš„åŒ…åï¼Œ</span></span><br><span class="line"><span class="comment">        targetProjectæŒ‡å®šç”Ÿæˆçš„mapper.xmlæ”¾åœ¨eclipseçš„å“ªä¸ªå·¥ç¨‹ä¸‹é¢--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.auspic1ous.springboot.mapper&quot;</span></span></span><br><span class="line"><span class="tag">                         <span class="attr">targetProject</span>=<span class="string">&quot;src/main/java&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        ç”ŸæˆMybatis çš„Mapperæ¥å£ç±»æ–‡ä»¶, targetPackage æŒ‡å®š Mapper æ¥å£ç±»çš„åŒ…å</span></span><br><span class="line"><span class="comment">        ,targetProject æŒ‡å®šç”Ÿæˆçš„Mapperæ¥å£æ”¾åœ¨eclipseçš„å“ªä¸ªå·¥ç¨‹ä¸‹é¢--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">type</span>=<span class="string">&quot;XMLMAPPER&quot;</span></span></span><br><span class="line"><span class="tag">                             <span class="attr">targetPackage</span>=<span class="string">&quot;com.auspic1ous.springboot.mapper&quot;</span></span></span><br><span class="line"><span class="tag">                             <span class="attr">targetProject</span>=<span class="string">&quot;src/main/java&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        æ•°æ®åº“è¡¨åä»¥åŠå¯¹åº”çš„Javaæ¨¡å‹ç±»å--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--        tableNameæ•°æ®åº“è¡¨çš„åç§°ï¼ŒdomainObjectNameä¸ºjavaå®ä½“ç±»çš„åå­—--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;t_student&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Student&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableCountByExample</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableUpdateByExample</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableDeleteByExample</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableSelectByExample</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">selectByExampleQueryId</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨com.auspic1ous.springbootä¸‹åˆ›å»ºmapperå’Œmodelä¸¤ä¸ªåŒ…ã€‚</p><p>å½“æˆ‘ä»¬é‡æ–°æ„å»ºè¯¥é¡¹ç›®åï¼Œmapperä¸­å°±ä¼šæ ¹æ®æ•°æ®åº“è‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„æ¥å£ç±»å’Œæ˜ å°„æ–‡ä»¶xmlï¼Œmodelä¸­å°±ä¼šæ ¹æ®æ•°æ®åº“è‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„javaæ¨¡å‹ï¼Œè¿™æ ·å°±èŠ‚çœäº† æˆ‘ä»¬æ‰‹åŠ¨ç¼–å†™mapperå’Œmodelä¸¤ä¸ªæ–‡ä»¶å¤¹é‡Œé¢çš„å†…å®¹ï¼Œéå¸¸å¥½ç”¨~</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å­¦ä¹  </category>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åç«¯ </tag>
            
            <tag> Spring </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Boot å­¦ä¹ ç¬”è®° 02</title>
      <link href="/2021/08/03/5fffb9c70d6b-q1jun/"/>
      <url>/2021/08/03/5fffb9c70d6b-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="Spring-Bootå­¦ä¹ ç¬”è®°-02"><a href="#Spring-Bootå­¦ä¹ ç¬”è®°-02" class="headerlink" title="Spring Bootå­¦ä¹ ç¬”è®° 02"></a>Spring Bootå­¦ä¹ ç¬”è®° 02</h1><p>â€‹        </p><h2 id="0x01-å¤šç¯å¢ƒä¸‹æ ¸å¿ƒé…ç½®æ–‡ä»¶çš„ä½¿ç”¨-properties"><a href="#0x01-å¤šç¯å¢ƒä¸‹æ ¸å¿ƒé…ç½®æ–‡ä»¶çš„ä½¿ç”¨-properties" class="headerlink" title="0x01 å¤šç¯å¢ƒä¸‹æ ¸å¿ƒé…ç½®æ–‡ä»¶çš„ä½¿ç”¨(properties)"></a>0x01 å¤šç¯å¢ƒä¸‹æ ¸å¿ƒé…ç½®æ–‡ä»¶çš„ä½¿ç”¨(properties)</h2><blockquote><p>éœ€è¦æ³¨æ„.propertiesä¸­çš„å±æ€§å€¼ä¸è¦å‡ºç°ç©ºæ ¼ï¼Œä¼šè¢«è¯†åˆ«å‡ºç°é—®é¢˜ï¼</p></blockquote><p>åœ¨å·¥ä½œä¸­çš„å¼€å‘ç¯å¢ƒæœ‰</p><ul><li>å¼€å‘ç¯å¢ƒ(dev)</li><li>æµ‹è¯•ç¯å¢ƒ(test)</li><li>å‡†ç”Ÿäº§ç¯å¢ƒ(pre)</li><li>ç”Ÿäº§ç¯å¢ƒ(product)</li></ul><p>è€æ ·å­ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºå·çš„SpringBootç¯å¢ƒä¸‹ï¼Œåœ¨Application.javaæ–‡ä»¶çš„åŒçº§ç›®å½•æˆ–ä¸‹çº§ç›®å½•åˆ›å»ºä¸€ä¸ªController&#x2F;IndexController.javaï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.springboot.springboot006multienvironment.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IndexController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/say&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">say</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello Multi-Environment!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸‹é¢æˆ‘ä»¬åˆ†åˆ«å¯¹åº”ä¸Šé¢å››ä¸ªå¼€å‘ç¯å¢ƒåˆ›å»ºå¯¹åº”çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">touch application.properties</span><br><span class="line">touch application-dev.properties</span><br><span class="line">touch application-test.properties</span><br><span class="line">touch application-pre.properties</span><br><span class="line">touch application-product.properties</span><br></pre></td></tr></table></figure><p>æ¯ä¸ªç¯å¢ƒçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶åçš„æ ¼å¼éƒ½æ˜¯ <code>application-XXXX.properties</code> å…¶ä¸­çš„<code>XXXX</code>ç”±è‡ªå·±å‘½åï¼Œå¹¶åœ¨ <strong>ä¸»æ ¸å¿ƒé…ç½®æ–‡ä»¶</strong> ä¸­è°ƒç”¨:</p><p>application.properties:</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Springbootä¸»æ ¸å¿ƒé…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment">#æ¿€æ´»ä½¿ç”¨çš„é…ç½®æ–‡ä»¶,XXXXå¯¹åº”æ–‡ä»¶åä¸­çš„XXXX</span></span><br><span class="line"><span class="attr">spring.profiles.active</span>=<span class="string">XXXX</span></span><br></pre></td></tr></table></figure><p>å…¶ä»–æ ¸å¿ƒé…ç½®æ–‡ä»¶åˆ™ä¸åŸæ¥å•æ ¸å¿ƒé…ç½®æ–‡ä»¶ç›¸åŒï¼š</p><p>application-dev.properties:</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">8080</span></span><br><span class="line"><span class="attr">server.servlet.context-path</span>=<span class="string">/dev</span></span><br></pre></td></tr></table></figure><p>application-test.properties:</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">8081</span></span><br><span class="line"><span class="attr">server.servlet.context-path</span>=<span class="string">/test</span></span><br></pre></td></tr></table></figure><p>application-pre.properties:</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">8082</span></span><br><span class="line"><span class="attr">server.servlet.context-path</span>=<span class="string">/pre</span></span><br></pre></td></tr></table></figure><p>application-product.properties:</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">8083</span></span><br><span class="line"><span class="attr">server.servlet.context-path</span>=<span class="string">/product</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·æˆ‘ä»¬å°±å®Œæˆäº†åœ¨ä¸åŒç¯å¢ƒä¸‹çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶é…ç½®ï¼Œæµè§ˆå™¨URLæ¡†è¾“å…¥æ—¶åŒºåˆ†é»˜è®¤è·¯å¾„å³å¯ã€‚</p><p>æ¯”å¦‚è¾“å…¥<a target="_blank" rel="noopener" href="http://localhost:8081/test/say">http://localhost:8081/test/say</a> å°±ä¼šæ˜¾ç¤ºå‡ºæˆ‘ä»¬åœ¨IndexControllerä¸­åˆ›å»ºçš„å‡½æ•°sayè¿”å›çš„å†…å®¹â€Hello Multi-Environment!â€ã€‚</p><h2 id="0x02-å¤šç¯å¢ƒä¸‹çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶çš„ä½¿ç”¨-yml"><a href="#0x02-å¤šç¯å¢ƒä¸‹çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶çš„ä½¿ç”¨-yml" class="headerlink" title="0x02 å¤šç¯å¢ƒä¸‹çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶çš„ä½¿ç”¨(yml)"></a>0x02 å¤šç¯å¢ƒä¸‹çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶çš„ä½¿ç”¨(yml)</h2><p>yml(æˆ–è€…yaml)ä¸propertiesæ–‡ä»¶çš„é…ç½®æ–¹æ³•å¤§åŒå°å¼‚ï¼Œåªæœ‰æ–‡ä»¶å†…å®¹æ ¼å¼ä¸Šçš„å·®å¼‚ï¼Œå…¶ä»–åŸºæœ¬ä¸€æ ·ã€‚</p><p>æ‰€ä»¥è¿™é‡Œåªç»™å‡ºé…ç½®åçš„æ ¸å¿ƒæ–‡ä»¶çš„å†…å®¹ï¼š</p><p>application.yml:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span></span><br></pre></td></tr></table></figure><p>application-dev.yml:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line">  <span class="attr">servlet:</span></span><br><span class="line">    <span class="attr">context-path:</span> <span class="string">/dev</span></span><br></pre></td></tr></table></figure><p>application-test.yml:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line">  <span class="attr">servlet:</span></span><br><span class="line">    <span class="attr">context-path:</span> <span class="string">/test</span></span><br></pre></td></tr></table></figure><p>application-product.yml:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8082</span></span><br><span class="line">  <span class="attr">servlet:</span></span><br><span class="line">    <span class="attr">context-path:</span> <span class="string">/product</span></span><br></pre></td></tr></table></figure><p>application-pre.yml:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8083</span></span><br><span class="line">  <span class="attr">servlet:</span></span><br><span class="line">    <span class="attr">context-path:</span> <span class="string">/pre</span></span><br></pre></td></tr></table></figure><h2 id="0x03-è·å–application-properties-yml-è‡ªå®šä¹‰é…ç½®"><a href="#0x03-è·å–application-properties-yml-è‡ªå®šä¹‰é…ç½®" class="headerlink" title="0x03 è·å–application.properties(.yml)è‡ªå®šä¹‰é…ç½®"></a>0x03 è·å–application.properties(.yml)è‡ªå®šä¹‰é…ç½®</h2><p>ä¸Šé¢æˆ‘ä»¬ç”¨çš„é…ç½®è¯¸å¦‚<code>server.port=</code> <code>server.servlet.context-path=</code> ç­‰ç­‰éƒ½æ˜¯SpringBooté¡¹ç›®è‡ªå¸¦çš„é…ç½®é¡¹ï¼Œå¦‚ä½•è‡ªå·±åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰é…ç½®å¹¶è·å–å®ƒå‘¢ï¼Ÿ</p><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨åˆ°__@Value__</p><p>åœ¨Application.javaæ–‡ä»¶çš„åŒçº§ç›®å½•æˆ–ä¸‹çº§ç›®å½•åˆ›å»ºä¸€ä¸ªController&#x2F;IndexController.javaï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.spring.springboot008customerconfiguration.Controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IndexController</span> &#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;school.name&#125;&quot;)</span><span class="comment">//åˆ›å»ºschool.nameé…ç½®é¡¹ï¼Œå­˜æ”¾åˆ°Stringç±»å‹çš„å˜é‡ä¸­</span></span><br><span class="line">    <span class="keyword">private</span> String schoolName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;website&#125;&quot;)</span><span class="comment">//åˆ›å»ºwebsiteé…ç½®é¡¹ï¼Œå­˜æ”¾åˆ°Stringç±»å‹çš„å˜é‡ä¸­</span></span><br><span class="line">    <span class="keyword">private</span> String website;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/say&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">say</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//è¾“å‡ºè·å¾—çš„è‡ªå®šä¹‰é…ç½®</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello :&quot;</span> + schoolName + <span class="string">&quot; Website : http://&quot;</span> + website;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é…ç½®æ–‡ä»¶application.propertiesä¸­:</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è®¾ç½®å†…åµŒtomcat ç«¯å£å·</span></span><br><span class="line"><span class="attr">server.port</span>=<span class="string">8080</span></span><br><span class="line"><span class="comment">#è®¾ç½®ä¸Šä¸‹æ–‡æ ¹</span></span><br><span class="line"><span class="attr">server.servlet.context-path</span>=<span class="string">/</span></span><br><span class="line"><span class="comment">#è‡ªå®šä¹‰</span></span><br><span class="line"><span class="attr">school.name</span>=<span class="string">ECJTU</span></span><br><span class="line"><span class="attr">website</span>=<span class="string">www.ecjtu.jx.cn</span></span><br></pre></td></tr></table></figure><p>è¿è¡Œé¡¹ç›®åæˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨è¾“å…¥<a target="_blank" rel="noopener" href="http://localhost:8080/say,%E6%B5%8F%E8%A7%88%E5%99%A8%E6%98%BE%E7%A4%BA">http://localhost:8080/say,æµè§ˆå™¨æ˜¾ç¤º</a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hello :ECJTU Website : http://www.ecjtu.jx.cn</span><br></pre></td></tr></table></figure><p>è¯´æ˜æˆ‘ä»¬è·å–æˆåŠŸã€‚</p><h2 id="0x04-æˆç»„è·å–è‡ªå®šä¹‰é…ç½®å¯¹è±¡"><a href="#0x04-æˆç»„è·å–è‡ªå®šä¹‰é…ç½®å¯¹è±¡" class="headerlink" title="0x04 æˆç»„è·å–è‡ªå®šä¹‰é…ç½®å¯¹è±¡"></a>0x04 æˆç»„è·å–è‡ªå®šä¹‰é…ç½®å¯¹è±¡</h2><p>ä¸Šä¸€ä¸ªéƒ¨åˆ†0x03ä¸­ï¼Œæˆ‘ä»¬è·å–è‡ªå®šä¹‰é…ç½®æ˜¯ä¸€ä¸ªä¸€ä¸ªè·å–çš„ï¼Œæˆ‘ä»¬å¦‚ä½•ä¸€ç»„ä¸€ç»„çš„è·å–å‘¢ï¼Œæ¯”å¦‚æˆ‘ä»¬ç°åœ¨åˆ›å»ºçš„application.propertiesæ–‡ä»¶å¦‚ä¸‹ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è®¾ç½®å†…åµŒtomcat ç«¯å£å·</span></span><br><span class="line"><span class="attr">server.port</span>=<span class="string">8080</span></span><br><span class="line"><span class="comment">#è®¾ç½®ä¸Šä¸‹æ–‡æ ¹</span></span><br><span class="line"><span class="attr">server.servlet.context-path</span>=<span class="string">/</span></span><br><span class="line"></span><br><span class="line"><span class="attr">school.name</span>=<span class="string">ECJTU</span></span><br><span class="line"><span class="attr">school.website</span>=<span class="string">www.ecjtu.jx.cn</span></span><br><span class="line"></span><br><span class="line"><span class="attr">department.name</span>=<span class="string">ECJTU1</span></span><br><span class="line"><span class="attr">department.website</span>=<span class="string">www.ecjtu1.jx.cn</span></span><br></pre></td></tr></table></figure><p>å¦‚ä½•æŠŠschoolå’Œdepartmentçš„nameå’Œwebsiteå±æ€§åˆ†åˆ«å­˜åˆ°ä»–ä»¬å¯¹åº”çš„æ„é€ ä½“é‡Œé¢å‘¢ã€‚</p><p>æˆ‘ä»¬åœ¨application.javaåŒçº§ç›®å½•æˆ–ä¸‹çº§ç›®å½•ä¸­åˆ†åˆ«åˆ›å»ºschool.javaå’Œdepartment.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.spring.springboot008customerconfiguration.Controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span><span class="comment">//å°†æ­¤ç±»äº¤ç»™Springå®¹å™¨è¿›è¡Œç®¡ç†</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;school&quot;)</span><span class="comment">//æ ¸å¿ƒé…ç½®æ–‡ä»¶é‡Œé¢çš„å‰ç¼€</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">School</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String website;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getWebsite</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> website;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setWebsite</span><span class="params">(String website)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.website = website;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.spring.springboot008customerconfiguration.Controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;department&quot;)</span><span class="comment">//æ ¸å¿ƒé…ç½®æ–‡ä»¶é‡Œé¢çš„å‰ç¼€</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Department</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String website;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getWebsite</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> website;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setWebsite</span><span class="params">(String website)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.website = website;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç„¶åå†åˆ›å»ºä¸€ä¸ªIndexController.java æ¥è¾“å‡ºç»“æœã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.spring.springboot008customerconfiguration.Controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IndexController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> School school;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Department department;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/say&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">say</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">hello1</span> <span class="operator">=</span> <span class="string">&quot;hello :&quot;</span> + department.getName() + <span class="string">&quot; Website : http://&quot;</span> + department.getWebsite();</span><br><span class="line">        <span class="type">String</span> <span class="variable">hello2</span> <span class="operator">=</span> <span class="string">&quot;hello :&quot;</span> + school.getName() + <span class="string">&quot; Website : http://&quot;</span> + school.getWebsite();</span><br><span class="line">        <span class="keyword">return</span> hello2 + <span class="string">&quot;&lt;br&gt;&quot;</span> + hello1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™æ ·æˆ‘ä»¬åœ¨æµè§ˆå™¨è¾“å…¥<a target="_blank" rel="noopener" href="http://localhost:8080/say">http://localhost:8080/say</a> å°±å¯ä»¥å¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hello :ECJTU Website : http://www.ecjtu.jx.cn</span><br><span class="line">hello :ECJTU1 Website : http://www.ecjtu1.jx.cn</span><br></pre></td></tr></table></figure><blockquote><p>æ­¤æ–¹æ³•åªèƒ½è·å–æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æœ‰å‰ç¼€çš„å±æ€§ï¼Œè‹¥æ²¡æœ‰å‰ç¼€çš„å•ç‹¬å±æ€§å¿…é¡»è¦ç”¨0x03çš„æ–¹æ³•ï¼ï¼</p></blockquote><h3 id="0x0401-ä½¿ç”¨-ConfigurationPropertiesæ³¨è§£å‡ºç°è­¦å‘Šå¤„ç†"><a href="#0x0401-ä½¿ç”¨-ConfigurationPropertiesæ³¨è§£å‡ºç°è­¦å‘Šå¤„ç†" class="headerlink" title="0x0401 ä½¿ç”¨@ConfigurationPropertiesæ³¨è§£å‡ºç°è­¦å‘Šå¤„ç†:"></a>0x0401 ä½¿ç”¨@ConfigurationPropertiesæ³¨è§£å‡ºç°è­¦å‘Šå¤„ç†:</h3><p>å½“æˆ‘ä»¬é…ç½®å¥½School.javaå’ŒDepartment.javaè¿™ä¸¤ä¸ªæ–‡ä»¶çš„æ—¶å€™IDEAä¸Šæ–¹ä¼šå‡ºç°çº¢è‰²è­¦å‘Šï¼š</p><p><strong>æœªé…ç½®Spring Bootæ³¨è§£å¤„ç†å™¨</strong></p><p>ä½†æ˜¯è¿™ä¸ªå¹¶ä¸å½±å“æˆ‘ä»¬ä»£ç çš„æ‰§è¡Œï¼Œå¦‚æœè¦æ¶ˆé™¤è¯¥è­¦å‘Šï¼Œåªéœ€è¦åœ¨pom.xmlé…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·å°±æ²¡æœ‰ä¸Šè¿°çš„è­¦å‘Šäº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å­¦ä¹  </category>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åç«¯ </tag>
            
            <tag> Spring </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Boot å­¦ä¹ ç¬”è®° 01</title>
      <link href="/2021/08/01/cfb2a88933dc-q1jun/"/>
      <url>/2021/08/01/cfb2a88933dc-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="Spring-Bootå­¦ä¹ ç¬”è®°-01"><a href="#Spring-Bootå­¦ä¹ ç¬”è®°-01" class="headerlink" title="Spring Bootå­¦ä¹ ç¬”è®° 01"></a>Spring Bootå­¦ä¹ ç¬”è®° 01</h1><p>è¿™æ˜¯æš‘æœŸå­¦ä¹ ç¬¬äºŒå¤©ï¼Œä»ä»Šå¤©èµ·æˆ‘å¼€å§‹å­¦ä¹ å…³äºSpringBootçš„æ¡†æ¶ï¼Œå¹¶å°†å­¦ä¹ çš„å†…å®¹å†™åˆ°åšå®¢ä¸Šï¼Œä¾›å¤§å®¶ä¸€èµ·å­¦ä¹ ï¼</p><h2 id="0x01-Spring-Bootç®€ä»‹"><a href="#0x01-Spring-Bootç®€ä»‹" class="headerlink" title="0x01 Spring Bootç®€ä»‹"></a>0x01 Spring Bootç®€ä»‹</h2><p>â€‹    Spring Bootæ˜¯Springå®¶æ—ä¸­çš„ä¸€ä¸ªå…¨æ–°çš„æ¡†æ¶ï¼Œå®ƒç”¨æ¥ç®€åŒ–Springåº”ç”¨ç¨‹åºçš„åˆ›å»ºå’Œå¼€å‘è¿‡ç¨‹ï¼Œä¹Ÿå¯ä»¥è¯´Spring Bootèƒ½ç®€åŒ–æˆ‘ä»¬ä¹‹å‰é‡‡ç”¨ï¼ˆSSMï¼‰Spring+SpringMVC+Mybatisæ¡†æ¶è¿›è¡Œå¼€å‘çš„è¿‡ç¨‹ã€‚</p><p>â€‹    åœ¨ä»¥å¾€æˆ‘ä»¬é‡‡ç”¨SSMæ¡†æ¶è¿›è¡Œå¼€å‘çš„æ—¶å€™ï¼Œæ­å»ºå’Œæ•´åˆä¸‰å¤§æ¡†æ¶ï¼Œæˆ‘ä»¬éœ€è¦åšå¾ˆå¤šå·¥ä½œï¼Œæ¯”å¦‚é…ç½®web.xmlï¼Œé…ç½®Springï¼Œé…ç½®mybatisï¼Œå¹¶å°†ä»–ä»¬æ•´åˆåœ¨ä¸€èµ·ï¼Œè€ŒSpringBootæ¡†æ¶å¯¹æ­¤å¼€å‘è¿‡ç¨‹è¿›è¡Œäº†é©å‘½æ€§çš„é¢ è¦†ï¼Œå®Œå…¨æŠ›å¼ƒäº†ç¹ççš„xmlé…ç½®è¿‡ç¨‹ï¼Œé‡‡ç”¨äº†å¤§é‡çš„é»˜è®¤é…ç½®ç®€åŒ–æˆ‘ä»¬çš„å¼€å‘è¿‡ç¨‹ã€‚</p><p>â€‹    æ‰€ä»¥é‡‡ç”¨SpringBootå¯ä»¥éå¸¸å®¹æ˜“å’Œå¿«é€Ÿåœ°åˆ›å»ºåŸºäºSpringæ¡†æ¶çš„åº”ç”¨ç¨‹åºï¼Œå®ƒè®©ç¼–ç å˜ç®€å•äº†ï¼Œé…ç½®å˜ç®€å•äº†ï¼Œéƒ¨ç½²å˜ç®€å•äº†ï¼Œç›‘æ§å˜ç®€å•äº†ã€‚æ­£å› ä¸ºSpring BootåŒ–ç¹ä¸ºç®€ï¼Œè®©å¼€å‘å˜å¾—æå…¶ç®€å•å’Œå¿«é€Ÿï¼Œæ‰€ä»¥åœ¨ä¸šç•Œå˜å¾—å¤‡å—å…³æ³¨ã€‚</p><h2 id="0x02-Spring-Bootçš„ç‰¹æ€§"><a href="#0x02-Spring-Bootçš„ç‰¹æ€§" class="headerlink" title="0x02 Spring Bootçš„ç‰¹æ€§"></a>0x02 Spring Bootçš„ç‰¹æ€§</h2><ul><li>èƒ½å¤Ÿå¿«é€Ÿåˆ›å»ºåŸºäºSpringçš„åº”ç”¨ç¨‹åº</li><li>èƒ½å¤Ÿç›´æ¥ä½¿ç”¨Java Mainæ–¹æ³•å¯åŠ¨å†…åµŒçš„Tomcat æœåŠ¡å™¨è¿è¡ŒSpring Bootç¨‹åºï¼Œä¸éœ€è¦éƒ¨ç½²WaråŒ…æ–‡ä»¶</li><li>æä¾›çº¦å®šçš„starter POMæ¥ç®€åŒ– Maven é…ç½®ï¼Œè®©Mavené…ç½®å˜å¾—ç®€å•</li><li>è‡ªåŠ¨åŒ–é…ç½®ï¼Œæ ¹æ®é¡¹ç›®çš„Mavenä¾èµ–é…ç½®ï¼ŒSpringBootè‡ªåŠ¨é…ç½®Springã€SpringMVCç­‰ç­‰</li><li>æä¾›äº†ç¨‹åºçš„å¥åº·æ£€æŸ¥ç­‰åŠŸèƒ½</li><li>åŸºæœ¬å¯ä»¥å®Œå…¨ä¸ä½¿ç”¨XMLé…ç½®æ–‡ä»¶ï¼Œé‡‡ç”¨æ³¨è§£é…ç½®</li></ul><h2 id="0x03-Spring-Boot-å››å¤§æ ¸å¿ƒ"><a href="#0x03-Spring-Boot-å››å¤§æ ¸å¿ƒ" class="headerlink" title="0x03 Spring Boot å››å¤§æ ¸å¿ƒ"></a>0x03 Spring Boot å››å¤§æ ¸å¿ƒ</h2><ul><li><p>è‡ªåŠ¨é…ç½®</p></li><li><p>èµ·æ­¥ä¾èµ–</p></li><li><p>Actuatorï¼ˆå¥åº·æ£€æµ‹ï¼‰</p></li><li><p>å‘½ä»¤è¡Œç•Œé¢</p></li></ul><h2 id="0x04-åˆ›å»ºSpringBooté¡¹ç›®"><a href="#0x04-åˆ›å»ºSpringBooté¡¹ç›®" class="headerlink" title="0x04 åˆ›å»ºSpringBooté¡¹ç›®"></a>0x04 åˆ›å»ºSpringBooté¡¹ç›®</h2><p>IDEAæ–°å»ºSpringBooté¡¹ç›®ï¼Œå‹¾é€‰Spring Webã€‚</p><p>åˆ›å»ºåSpringBooté¡¹ç›®ä¸­çš„POM.xmlæ–‡ä»¶ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--SpringBootçˆ¶å·¥ç¨‹GAVåæ ‡--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--å½“å‰é¡¹ç›®çš„GAVåæ ‡--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example.springboot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springboot001<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>springboot001<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--ç¼–è¯‘çº§åˆ«--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    ä¾èµ–--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        SpringBootæ¡†æ¶Webé¡¹ç›®èµ·æ­¥ä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        SpringBootæ¡†æ¶æµ‹è¯•èµ·æ­¥ä¾èµ–--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--            SpringBooté¡¹ç›®æ‰“åŒ…ç¼–è¯‘çš„æ’ä»¶--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><p>SpringBooté¡¹ç›®å¯åŠ¨å…¥å£ç±»ï¼š</p><p>src\main\java\com.example.springboot.springbootfirst\Springboot001Application.java:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.springbootfirst;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="comment">//Springbooté¡¹ç›®å¯åŠ¨å…¥å£ç±»</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span><span class="comment">//SpringBootæ ¸å¿ƒæ³¨è§£ï¼Œä¸»è¦ç”¨äºå¼€å¯springè‡ªåŠ¨é…ç½®</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot001Application</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Springboot001Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>src\main\resources<ul><li>static(æ–‡ä»¶å¤¹)ï¼šå›¾æ ‡ç­‰é™æ€èµ„æºæ”¾å…¥æ­¤æ–‡ä»¶å¤¹</li><li>templates(æ–‡ä»¶å¤¹)ï¼šæ¨¡æ¿ï¼Œå‰ç«¯æ¨¡æ¿å¼•æ“æ”¾å…¥æ­¤æ–‡ä»¶å¤¹Thyme leaf.htmlï¼ˆç™¾å¶ç®±ï¼‰</li><li>application.propertiesï¼šSpringBootçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶</li></ul></li></ul><blockquote><p>  Springbooté¡¹ç›®ä»£ç å¿…é¡»æ”¾åˆ°Application(Springboot001Application)ç±»æ‰€åœ¨çš„åŒçº§ç›®å½•æˆ–è€…ä¸‹çº§ç›®å½•</p></blockquote><p>æˆ‘ä»¬åœ¨com.example.springboot.springbootfirstä¸‹åˆ›å»ºä¸€ä¸ªpackage Webï¼Œå†åœ¨webè¿™ä¸ªåŒ…é‡Œé¢åˆ›å»ºä¸€ä¸ªjavaç±»IndexControllerï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springboot.springbootfirst.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IndexController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/springboot/say&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="meta">@ResponseBody</span> String <span class="title function_">say</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello ,Springboot!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å®Œæˆä¹‹åæˆ‘ä»¬ç¼–è¯‘Springboot001Applicationè¿™ä¸ªå…¥å£ï¼Œè§‚å¯Ÿæ§åˆ¶å°è¾“å‡ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">  .   ____          _            __ _ _</span><br><span class="line"> /\\ / ___&#x27;_ __ _ _(_)_ __  __ _ \ \ \ \</span><br><span class="line">( ( )\___ | &#x27;_ | &#x27;_| | &#x27;_ \/ _` | \ \ \ \</span><br><span class="line"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span><br><span class="line">  &#x27;  |____| .__|_| |_|_| |_\__, | / / / /</span><br><span class="line"> =========|_|==============|___/=/_/_/_/</span><br><span class="line"> :: Spring Boot ::                (v2.5.2)</span><br><span class="line"></span><br><span class="line">2021-07-21 17:09:53.836  INFO 10616 --- [           main] c.s.s.Springboot002SpringMvcApplication  : Starting Springboot002SpringMvcApplication using Java 11.0.10 on LAPTOP-47F3TRCJ with PID 10616 (C:\Users\æ®µé›…å©·\Desktop\SpringBoot\springboot002-springMVC\target\classes started by æ®µé›…å©· in C:\Users\æ®µé›…å©·\Desktop\SpringBoot)</span><br><span class="line">2021-07-21 17:09:53.836  INFO 10616 --- [           main] c.s.s.Springboot002SpringMvcApplication  : No active profile set, falling back to default profiles: default</span><br><span class="line">2021-07-21 17:09:54.634  INFO 10616 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)</span><br><span class="line">2021-07-21 17:09:54.650  INFO 10616 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]</span><br><span class="line">2021-07-21 17:09:54.650  INFO 10616 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.48]</span><br><span class="line">2021-07-21 17:09:54.697  INFO 10616 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext</span><br><span class="line">2021-07-21 17:09:54.697  INFO 10616 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 830 ms</span><br><span class="line">2021-07-21 17:09:54.931  INFO 10616 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#x27;&#x27;</span><br><span class="line">2021-07-21 17:09:54.931  INFO 10616 --- [           main] c.s.s.Springboot002SpringMvcApplication  : Started Springboot002SpringMvcApplication in 1.409 seconds (JVM running for 2.861)</span><br><span class="line">2021-07-21 17:10:38.256  INFO 10616 --- [nio-8080-exec-1] o.apache.tomcat.util.http.parser.Cookie  : A cookie header was received [1626485908,1626487413,1626505943] that contained an invalid cookie. That cookie will be ignored.</span><br><span class="line"> Note: further occurrences of this error will be logged at DEBUG level.</span><br><span class="line">2021-07-21 17:10:38.261  INFO 10616 --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet &#x27;dispatcherServlet&#x27;</span><br><span class="line">2021-07-21 17:10:38.261  INFO 10616 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet &#x27;dispatcherServlet&#x27;</span><br><span class="line">2021-07-21 17:10:38.261  INFO 10616 --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms</span><br><span class="line"></span><br></pre></td></tr></table></figure><p> å…¶ä¸­æˆ‘ä»¬å‘ç°ä¸€æ¡æç¤ºä¿¡æ¯Tomcat started on port(s): 8080 (http) with context path â€˜â€™</p><p>æ‰“å¼€æµè§ˆå™¨è¾“å…¥localhost:8080&#x2F;springboot&#x2F;sayï¼Œè§‚å¯Ÿåˆ°æµè§ˆå™¨ç•Œé¢è·³è½¬åˆ°è¾“å‡ºå­—ç¬¦ä¸²â€œHello ,Springboot!â€ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬å®Œæˆäº†SpringBooté¡¹ç›®çš„æ­å»ºã€‚</p><h2 id="0x05-ä½¿ç”¨SpringBootçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶"><a href="#0x05-ä½¿ç”¨SpringBootçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶" class="headerlink" title="0x05 ä½¿ç”¨SpringBootçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶"></a>0x05 ä½¿ç”¨SpringBootçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶</h2><p>ä¸Šé¢æˆ‘ä»¬è¯´ï¼Œå…¶ä¸­ä¸€æ¡ä¿¡æ¯ä¸ºTomcat started on port(s): 8080 (http) with context path â€˜â€™ï¼Œæˆ‘ä»¬è¦å¦‚ä½•ä¿®æ”¹è¿™é‡Œçš„ç«¯å£å·å’Œä¸Šä¸‹æ–‡é»˜è®¤è·¯å¾„å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬æ‰“å¼€src\main\resourcesä¸­çš„<code>application.properties</code>æ–‡ä»¶å¹¶æ·»åŠ ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è®¾ç½®å†…åµŒTomcatç«¯å£å·</span></span><br><span class="line"><span class="attr">server.port</span>=<span class="string">8081</span></span><br><span class="line"><span class="comment">#è®¾ç½®ä¸Šä¸‹æ–‡æ ¹</span></span><br><span class="line"><span class="attr">server.servlet.context-path</span>=<span class="string">/springboot</span></span><br></pre></td></tr></table></figure><p>å†é‡å¯Springbooté¡¹ç›®ï¼Œè§‚å¯Ÿæ§åˆ¶å°è¾“å‡ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  .   ____          _            __ _ _</span><br><span class="line"> /\\ / ___&#x27;_ __ _ _(_)_ __  __ _ \ \ \ \</span><br><span class="line">( ( )\___ | &#x27;_ | &#x27;_| | &#x27;_ \/ _` | \ \ \ \</span><br><span class="line"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span><br><span class="line">  &#x27;  |____| .__|_| |_|_| |_\__, | / / / /</span><br><span class="line"> =========|_|==============|___/=/_/_/_/</span><br><span class="line"> :: Spring Boot ::                (v2.5.2)</span><br><span class="line"></span><br><span class="line">2021-07-21 17:32:42.607  INFO 15028 --- [           main] .s.s.Springboot003ContextPathApplication : Starting Springboot003ContextPathApplication using Java 1.8.0_181 on LAPTOP-47F3TRCJ with PID 15028 (C:\Users\æ®µé›…å©·\Desktop\SpringBoot\springboot003-context-path\target\classes started by æ®µé›…å©· in C:\Users\æ®µé›…å©·\Desktop\SpringBoot)</span><br><span class="line">2021-07-21 17:32:42.610  INFO 15028 --- [           main] .s.s.Springboot003ContextPathApplication : No active profile set, falling back to default profiles: default</span><br><span class="line">2021-07-21 17:32:43.477  INFO 15028 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8081 (http)</span><br><span class="line">2021-07-21 17:32:43.493  INFO 15028 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]</span><br><span class="line">2021-07-21 17:32:43.493  INFO 15028 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.48]</span><br><span class="line">2021-07-21 17:32:43.554  INFO 15028 --- [           main] o.a.c.c.C.[.[localhost].[/springboot]    : Initializing Spring embedded WebApplicationContext</span><br><span class="line">2021-07-21 17:32:43.554  INFO 15028 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 893 ms</span><br><span class="line">2021-07-21 17:32:43.775  INFO 15028 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8081 (http) with context path &#x27;/springboot&#x27;</span><br><span class="line">2021-07-21 17:32:43.775  INFO 15028 --- [           main] .s.s.Springboot003ContextPathApplication : Started Springboot003ContextPathApplication in 1.607 seconds (JVM running for 2.537)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°<code> Tomcat started on port(s): 8081 (http) with context path &#39;/springboot&#39;</code> ä¿®æ”¹ç«¯å£å·å’Œé»˜è®¤è·¯å¾„æˆåŠŸã€‚</p><p>å¦‚æœæˆ‘ä»¬è¦è®¿é—®<a target="_blank" rel="noopener" href="http://localhost:8080/springboot/say">http://localhost:8080/springboot/say</a> åˆ™è¦æ”¹æˆ <a target="_blank" rel="noopener" href="http://localhost:8080/springboot/springboot/say">http://localhost:8080/springboot/springboot/say</a> ï¼Œå› ä¸ºæ·»åŠ äº†é»˜è®¤è·¯å¾„ã€‚</p><blockquote><p>æ ¸å¿ƒé…ç½®æ–‡ä»¶åªèƒ½æœ‰ä¸€ä¸ª</p></blockquote><h3 id="0x0501-ä½¿ç”¨-ymlæˆ–-yamlçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶"><a href="#0x0501-ä½¿ç”¨-ymlæˆ–-yamlçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶" class="headerlink" title="0x0501 ä½¿ç”¨.ymlæˆ–.yamlçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶"></a>0x0501 ä½¿ç”¨.ymlæˆ–.yamlçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶</h3><p>å°†application.propertiesæ¢æˆapplication.yml:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line">  <span class="attr">servlet:</span></span><br><span class="line">    <span class="attr">context-path:</span> <span class="string">/</span></span><br></pre></td></tr></table></figure><p>å°†application.propertiesæ¢æˆapplication.yaml:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line">  <span class="attr">servlet:</span></span><br><span class="line">    <span class="attr">context-path:</span> <span class="string">/</span></span><br></pre></td></tr></table></figure><p>ä¸‰ç§æ ¼å¼çš„é…ç½®æ–‡ä»¶éƒ½èƒ½ä½¿ç”¨ï¼Œä½†æ˜¯åªèƒ½å­˜åœ¨ä¸€ä¸ª</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å­¦ä¹  </category>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åç«¯ </tag>
            
            <tag> Spring </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Base64çš„éšå†™</title>
      <link href="/2021/07/19/e19df605d77e-q1jun/"/>
      <url>/2021/07/19/e19df605d77e-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="Base64çš„éšå†™"><a href="#Base64çš„éšå†™" class="headerlink" title="Base64çš„éšå†™"></a>Base64çš„éšå†™</h1><h2 id="0x01-éšå†™åŸç†"><a href="#0x01-éšå†™åŸç†" class="headerlink" title="0x01 éšå†™åŸç†"></a>0x01 éšå†™åŸç†</h2><p>å¡«å……ä¸¤ä¸ªâ€™&#x3D;â€™éšå†™å››ä½ä¿¡æ¯ï¼Œå¡«å……ä¸€ä¸ªâ€™&#x3D;â€™éšå†™ä¸¤ä½ä¿¡æ¯ï¼Œå°†ç¼–ç æŒ‰ç…§base64å¯¹ç…§è¡¨è¿˜åŸï¼Œç„¶åæ¯8ä½è½¬æˆå­—ç¬¦å³å¯.<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/base64.png" alt="base64å¯¹ç…§è¡¨"></p><h2 id="0x02-éšå†™è„šæœ¬"><a href="#0x02-éšå†™è„šæœ¬" class="headerlink" title="0x02 éšå†™è„šæœ¬"></a>0x02 éšå†™è„šæœ¬</h2><p>é€šè¿‡è¯»å–æºæ–‡ä»¶source.txtæ–‡ä»¶æŠŠéœ€è¦éšå†™çš„å†…å®¹éšå†™è¿›å»å¹¶ä¿å­˜åˆ°stego.txtä¸­ã€‚<br>ç›¸åº”åŠ å¯†è„šæœ¬enStego.py:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">enStego</span>(<span class="params">sourceFile,setgoFile,message</span>):</span><br><span class="line">    b64table = <span class="string">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&quot;</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(sourceFile,<span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> sourceText, <span class="built_in">open</span>(setgoFile,<span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> setgoText:</span><br><span class="line">        <span class="built_in">print</span>(message)</span><br><span class="line">        message = <span class="string">&quot;&quot;</span>.join([<span class="built_in">bin</span>(<span class="built_in">ord</span>(i))[<span class="number">2</span>:].zfill(<span class="number">8</span>) <span class="keyword">for</span> i <span class="keyword">in</span> message])</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> sourceText:</span><br><span class="line">            text = base64.b64encode(line[:-<span class="number">1</span>].encode(<span class="string">&quot;utf-8&quot;</span>)).decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">            l = text.count(<span class="string">&#x27;=&#x27;</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="number">0</span> &lt; <span class="number">2</span>*l &lt;= <span class="built_in">len</span>(message):                </span><br><span class="line">                text = text[:-l-<span class="number">1</span>] + b64table[b64table.index(text[-l-<span class="number">1</span>])+<span class="built_in">int</span>(message[:<span class="number">2</span>*l],<span class="number">2</span>)] + text[-l:]</span><br><span class="line">                message = message[<span class="number">2</span>*l:]</span><br><span class="line">            setgoText.write(text+<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">len</span>(message):</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">len</span>(message)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(sys.argv) == <span class="number">4</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Remaining&quot;</span>,enStego(sys.argv[<span class="number">1</span>],sys.argv[<span class="number">2</span>],sys.argv[<span class="number">3</span>]),<span class="string">&quot;bits!&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Remaining&quot;</span>,enStego(<span class="string">&quot;source.txt&quot;</span>,<span class="string">&quot;stego.txt&quot;</span>,<span class="string">&quot;SimpleMessage\n&quot;</span>),<span class="string">&quot;bits!&quot;</span>)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ–¹æ³•:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">â¯ python3 enStego.py source.txt stego.txt ã€Œéšå†™ä¿¡æ¯ã€</span><br></pre></td></tr></table></figure><p>source.txtæ–‡ä»¶å†…å®¹(ä»»æ„å†…å®¹ï¼Œè¿™é‡Œåªæ˜¯æ”¾äº†ä¸€æ®µC++ä»£ç )ï¼š</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br></pre></td><td class="code"><pre><span class="line">#include &quot;linearList.h&quot;</span><br><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">template &lt;class T&gt;</span><br><span class="line">struct chainNode</span><br><span class="line">&#123;</span><br><span class="line">T element;</span><br><span class="line">chainNode&lt;T&gt; *next;</span><br><span class="line"></span><br><span class="line">chainNode()&#123;&#125;</span><br><span class="line">chainNode(const T&amp; element)&#123;</span><br><span class="line">this-&gt;element = element;</span><br><span class="line">&#125;</span><br><span class="line">chainNode(const T&amp; element, chainNode&lt;T&gt;* next)&#123;</span><br><span class="line">this-&gt;element = element;</span><br><span class="line">this-&gt;next = next;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">template &lt;class T&gt;</span><br><span class="line">class chain :public linearList&lt;T&gt;</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">chain(int initialCapacity = 10);</span><br><span class="line">chain(const chain&lt;T&gt;&amp;);</span><br><span class="line">~chain();</span><br><span class="line"></span><br><span class="line">bool empty() const&#123;</span><br><span class="line">return listSize == 0;</span><br><span class="line">&#125;</span><br><span class="line">int size() const&#123;</span><br><span class="line">return listSize;</span><br><span class="line">&#125;</span><br><span class="line">T&amp; get(int theIndex) const;</span><br><span class="line">int indexOf(const T&amp; theElement) const;</span><br><span class="line">void erase(int theIndex);</span><br><span class="line">void insert(int theIndex, const T&amp; theElement);</span><br><span class="line">void output(std::ostream&amp; out) const;</span><br><span class="line"></span><br><span class="line">protected:</span><br><span class="line">void checkIndex(int theIndex) const;</span><br><span class="line">chainNode&lt;T&gt;* firstNode;</span><br><span class="line">int listSize;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">chain&lt;T&gt;::chain(int initialCapacity)&#123;</span><br><span class="line">if(initialCapacity &lt; 1)&#123;</span><br><span class="line">std::ostringstream s;</span><br><span class="line">s &lt;&lt; &quot;initial capacity = &quot;&lt;&lt; initialCapacity &lt;&lt; &quot; Must be &gt; 0&quot;;</span><br><span class="line">throw illegalParameterValue(s.str());</span><br><span class="line">&#125;</span><br><span class="line">firstNode = NULL;</span><br><span class="line">listSize = 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">chain&lt;T&gt;::chain(const chain&lt;T&gt;&amp; theList)&#123;</span><br><span class="line">listSize = theList.listSize;</span><br><span class="line">if (listSize == 0)</span><br><span class="line">&#123;</span><br><span class="line">firstNode = NULL;</span><br><span class="line">return;</span><br><span class="line">&#125;</span><br><span class="line">chainNode&lt;T&gt;* sourceNode = theList.firstNode;</span><br><span class="line">firstNode = new chainNode&lt;T&gt;(sourceNode-&gt;element);</span><br><span class="line">sourceNode = sourceNode-&gt;next;</span><br><span class="line">chainNode&lt;T&gt;* targetNode = firstNode;</span><br><span class="line">while(sourceNode != NULL)&#123;</span><br><span class="line">targetNode-&gt;next = new chainNode&lt;T&gt;(sourceNode-&gt;element);</span><br><span class="line">targetNode = targetNode-&gt;next;</span><br><span class="line">sourceNode = sourceNode-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line">targetNode-&gt;next = NULL;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">chain&lt;T&gt;::~chain()&#123;</span><br><span class="line">while(firstNode != NULL)&#123;</span><br><span class="line">chainNode&lt;T&gt;* nextNode = firstNode-&gt;next;</span><br><span class="line">delete firstNode;</span><br><span class="line">firstNode = nextNode;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">T&amp; chain&lt;T&gt;::get(int theIndex) const&#123;</span><br><span class="line">checkIndex(theIndex);</span><br><span class="line">chainNode&lt;T&gt;* currentNode = firstNode;</span><br><span class="line">for(int i = 0; i &lt; theIndex; ++i)&#123;</span><br><span class="line">currentNode = currentNode-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line">return currentNode-&gt;element;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">int chain&lt;T&gt;::indexOf(const T&amp; theElement) const&#123;</span><br><span class="line">chainNode&lt;T&gt;* currentNode = firstNode;</span><br><span class="line">int  index = 0;</span><br><span class="line">while(currentNode != NULL &amp;&amp; currentNode-&gt;element != theElement)&#123;</span><br><span class="line">currentNode = currentNode-&gt;next;</span><br><span class="line">++index;</span><br><span class="line">&#125;</span><br><span class="line">if(currentNode == NULL)&#123;</span><br><span class="line">return -1;</span><br><span class="line">&#125;else&#123;</span><br><span class="line">return index;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">void chain&lt;T&gt;::erase(int theIndex)&#123;</span><br><span class="line">checkIndex(theIndex);</span><br><span class="line">chainNode&lt;T&gt;* deleteNode;</span><br><span class="line">if(theIndex == 0)&#123;</span><br><span class="line">deleteNode = firstNode;</span><br><span class="line">firstNode = firstNode-&gt;next;</span><br><span class="line">&#125;else&#123;</span><br><span class="line">chainNode&lt;T&gt;* p = firstNode;</span><br><span class="line">for(int i = 0;i &lt; theIndex - 1;++i)&#123;</span><br><span class="line">p = p-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line">deleteNode = p-&gt;next;</span><br><span class="line">p-&gt;next = p-&gt;next-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line">--listSize;</span><br><span class="line">delete deleteNode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">void chain&lt;T&gt;::insert(int theIndex, const T&amp; theElement)&#123;</span><br><span class="line">if(theIndex &lt; 0 || theIndex &gt; listSize)&#123;</span><br><span class="line">std::ostringstream s;</span><br><span class="line">s &lt;&lt; &quot;index = &quot; &lt;&lt; theIndex &lt;&lt; &quot; size = &quot; &lt;&lt; listSize;</span><br><span class="line">throw illegalIndex(s.str());</span><br><span class="line">&#125;</span><br><span class="line">if(theIndex == 0)&#123;</span><br><span class="line">firstNode = new chainNode&lt;T&gt;(theElement,firstNode);</span><br><span class="line">&#125;else&#123;</span><br><span class="line">chainNode&lt;T&gt;* p = firstNode;</span><br><span class="line">for(int  i = 0;i &lt; theIndex - 1;++i)&#123;</span><br><span class="line">p = p-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line">p-&gt;next = new chainNode&lt;T&gt;(theElement,p-&gt;next);</span><br><span class="line">&#125;</span><br><span class="line">++listSize;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">void chain&lt;T&gt;::output(std::ostringstream&amp; out) const&#123;</span><br><span class="line">for(chainNode&lt;T&gt;* currentNode = firstNode; currentNode != NULL; chainNode = chainNode-&gt;next)&#123;</span><br><span class="line">out &lt;&lt; currentNode-&gt;element &lt;&lt; &quot; &quot;;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">template &lt;typename T&gt;</span><br><span class="line">std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const chain&lt;T&gt;&amp; x)&#123;</span><br><span class="line">x.output(out);</span><br><span class="line">return out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(int argc, char const *argv[])</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¾—åˆ°stego.txtæ–‡ä»¶å†…å®¹ï¼š</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">I2luY2x1ZGUgImxpbmVhckxpc3QuaCJ=</span><br><span class="line">I2luY2x1ZGUgPGlvc3RyZWFtPp==</span><br><span class="line"></span><br><span class="line">dGVtcGxhdGUgPGNsYXNzIFQ+</span><br><span class="line">c3RydWN0IGNoYWluTm9kZZ==</span><br><span class="line">e7==</span><br><span class="line">CVQgZWxlbWVudDs=</span><br><span class="line">CWNoYWluTm9kZTxUPiAqbmV4dDt=</span><br><span class="line"></span><br><span class="line">CWNoYWluTm9kZSgpe32=</span><br><span class="line">CWNoYWluTm9kZShjb25zdCBUJiBlbGVtZW50KXs=</span><br><span class="line">CQl0aGlzLT5lbGVtZW50ID0gZWxlbWVudDt=</span><br><span class="line">CX1=</span><br><span class="line">CWNoYWluTm9kZShjb25zdCBUJiBlbGVtZW50LCBjaGFpbk5vZGU8VD4qIG5leHQpe5==</span><br><span class="line">CQl0aGlzLT5lbGVtZW50ID0gZWxlbWVudDv=</span><br><span class="line">CQl0aGlzLT5uZXh0ID0gbmV4dDt=</span><br><span class="line">CX3=</span><br><span class="line">fTu=</span><br><span class="line"></span><br><span class="line">dGVtcGxhdGUgPGNsYXNzIFQ+</span><br><span class="line">Y2xhc3MgY2hhaW4gOnB1YmxpYyBsaW5lYXJMaXN0PFQ+</span><br><span class="line">e9==</span><br><span class="line">cHVibGljOo==</span><br><span class="line">CWNoYWluKGludCBpbml0aWFsQ2FwYWNpdHkgPSAxMCk7</span><br><span class="line">CWNoYWluKGNvbnN0IGNoYWluPFQ+Jik7</span><br><span class="line">CX5jaGFpbigpO5==</span><br><span class="line"></span><br><span class="line">CWJvb2wgZW1wdHkoKSBjb25zdHu=</span><br><span class="line">CQlyZXR1cm4gbGlzdFNpemUgPT0gMDs=</span><br><span class="line">CX1=</span><br><span class="line">CWludCBzaXplKCkgY29uc3R7</span><br><span class="line">CQlyZXR1cm4gbGlzdFNpemU7</span><br><span class="line">CX1=</span><br><span class="line">CVQmIGdldChpbnQgdGhlSW5kZXgpIGNvbnN0O8==</span><br><span class="line">CWludCBpbmRleE9mKGNvbnN0IFQmIHRoZUVsZW1lbnQpIGNvbnN0O9==</span><br><span class="line">CXZvaWQgZXJhc2UoaW50IHRoZUluZGV4KTu=</span><br><span class="line">CXZvaWQgaW5zZXJ0KGludCB0aGVJbmRleCwgY29uc3QgVCYgdGhlRWxlbWVudCk7</span><br><span class="line">CXZvaWQgb3V0cHV0KHN0ZDo6b3N0cmVhbSYgb3V0KSBjb25zdDt=</span><br><span class="line">CU==</span><br><span class="line">cHJvdGVjdGVkOt==</span><br><span class="line">CXZvaWQgY2hlY2tJbmRleChpbnQgdGhlSW5kZXgpIGNvbnN0O4==</span><br><span class="line">CWNoYWluTm9kZTxUPiogZmlyc3ROb2RlO9==</span><br><span class="line">CWludCBsaXN0U2l6ZTs=</span><br><span class="line">fTt=</span><br><span class="line"></span><br><span class="line">dGVtcGxhdGUgPHR5cGVuYW1lIFQ+</span><br><span class="line">Y2hhaW48VD46OmNoYWluKGludCBpbml0aWFsQ2FwYWNpdHkpe3==</span><br><span class="line">CWlmKGluaXRpYWxDYXBhY2l0eSA8IDEpe8==</span><br><span class="line">CQlzdGQ6Om9zdHJpbmdzdHJlYW0gczv=</span><br><span class="line">CQlzIDw8ICJpbml0aWFsIGNhcGFjaXR5ID0gIjw8IGluaXRpYWxDYXBhY2l0eSA8PCAiIE11c3QgYmUgPiAwIjs=</span><br><span class="line">CQl0aHJvdyBpbGxlZ2FsUGFyYW1ldGVyVmFsdWUocy5zdHIoKSk7</span><br><span class="line">CX1=</span><br><span class="line">CWZpcnN0Tm9kZSA9IE5VTEw7</span><br><span class="line">CWxpc3RTaXplID0gMDt=</span><br><span class="line">fc==</span><br><span class="line"></span><br><span class="line">dGVtcGxhdGUgPHR5cGVuYW1lIFQ+</span><br><span class="line">Y2hhaW48VD46OmNoYWluKGNvbnN0IGNoYWluPFQ+JiB0aGVMaXN0KXv=</span><br><span class="line">CWxpc3RTaXplID0gdGhlTGlzdC5saXN0U2l6ZTt=</span><br><span class="line">CWlmIChsaXN0U2l6ZSA9PSAwKX==</span><br><span class="line">CXv=</span><br><span class="line">CQlmaXJzdE5vZGUgPSBOVUxMO0==</span><br><span class="line">CQlyZXR1cm47</span><br><span class="line">CX0=</span><br><span class="line">CWNoYWluTm9kZTxUPiogc291cmNlTm9kZSA9IHRoZUxpc3QuZmlyc3ROb2RlO1==</span><br><span class="line">CWZpcnN0Tm9kZSA9IG5ldyBjaGFpbk5vZGU8VD4oc291cmNlTm9kZS0+ZWxlbWVudCk7</span><br><span class="line">CXNvdXJjZU5vZGUgPSBzb3VyY2VOb2RlLT5uZXh0O7==</span><br><span class="line">CWNoYWluTm9kZTxUPiogdGFyZ2V0Tm9kZSA9IGZpcnN0Tm9kZTt=</span><br><span class="line">CXdoaWxlKHNvdXJjZU5vZGUgIT0gTlVMTCl7</span><br><span class="line">CQl0YXJnZXROb2RlLT5uZXh0ID0gbmV3IGNoYWluTm9kZTxUPihzb3VyY2VOb2RlLT5lbGVtZW50KTt=</span><br><span class="line">CQl0YXJnZXROb2RlID0gdGFyZ2V0Tm9kZS0+bmV4dDu=</span><br><span class="line">CQlzb3VyY2VOb2RlID0gc291cmNlTm9kZS0+bmV4dDs=</span><br><span class="line">CX1=</span><br><span class="line">CXRhcmdldE5vZGUtPm5leHQgPSBOVUxMOz==</span><br><span class="line">fS==</span><br><span class="line"></span><br><span class="line">dGVtcGxhdGUgPHR5cGVuYW1lIFQ+</span><br><span class="line">Y2hhaW48VD46On5jaGFpbigpe2==</span><br><span class="line">CXdoaWxlKGZpcnN0Tm9kZSAhPSBOVUxMKXu=</span><br><span class="line">CQljaGFpbk5vZGU8VD4qIG5leHROb2RlID0gZmlyc3ROb2RlLT5uZXh0O1==</span><br><span class="line">CQlkZWxldGUgZmlyc3ROb2RlO7==</span><br><span class="line">CQlmaXJzdE5vZGUgPSBuZXh0Tm9kZTu=</span><br><span class="line">CX1=</span><br><span class="line">fZ==</span><br><span class="line"></span><br><span class="line">dGVtcGxhdGUgPHR5cGVuYW1lIFQ+</span><br><span class="line">VCYgY2hhaW48VD46OmdldChpbnQgdGhlSW5kZXgpIGNvbnN0e9==</span><br><span class="line">CWNoZWNrSW5kZXgodGhlSW5kZXgpO/==</span><br><span class="line">CWNoYWluTm9kZTxUPiogY3VycmVudE5vZGUgPSBmaXJzdE5vZGU7</span><br><span class="line">CWZvcihpbnQgaSA9IDA7IGkgPCB0aGVJbmRleDsgKytpKXt=</span><br></pre></td></tr></table></figure><h2 id="0x03-è§£å¯†è„šæœ¬"><a href="#0x03-è§£å¯†è„šæœ¬" class="headerlink" title="0x03 è§£å¯†è„šæœ¬"></a>0x03 è§£å¯†è„šæœ¬</h2><p>æ ¹æ®Base64çš„å¡«å……è§„åˆ™ï¼Œå‘å¡«å……ä½è¯»å‡ºéšè—ä¿¡æ¯ã€‚</p><p>ç›¸åº”è„šæœ¬deStego.py:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">deStego</span>(<span class="params">stegoFile</span>):</span><br><span class="line">    b64table = <span class="string">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&quot;</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(stegoFile,<span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> stegoText:</span><br><span class="line">        message = <span class="string">&quot;&quot;</span></span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> stegoText:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                text = line[line.index(<span class="string">&quot;=&quot;</span>) - <span class="number">1</span>:-<span class="number">1</span>]</span><br><span class="line">                message += <span class="string">&quot;&quot;</span>.join([ <span class="built_in">bin</span>( <span class="number">0</span> <span class="keyword">if</span> i == <span class="string">&#x27;=&#x27;</span> <span class="keyword">else</span> b64table.find(i))[<span class="number">2</span>:].zfill(<span class="number">6</span>) <span class="keyword">for</span> i <span class="keyword">in</span> text])[<span class="number">2</span> <span class="keyword">if</span> text.count(<span class="string">&#x27;=&#x27;</span>) ==<span class="number">2</span> <span class="keyword">else</span> <span class="number">4</span>:<span class="number">6</span>]  </span><br><span class="line">            <span class="keyword">except</span>:</span><br><span class="line">                <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span>.join([<span class="built_in">chr</span>(<span class="built_in">int</span>(message[i:i+<span class="number">8</span>],<span class="number">2</span>)) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="built_in">len</span>(message),<span class="number">8</span>)])</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(sys.argv) == <span class="number">2</span>:</span><br><span class="line">        <span class="built_in">print</span>(deStego(sys.argv[<span class="number">1</span>]))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(deStego(<span class="string">&quot;stego.txt&quot;</span>))</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ–¹æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">â¯ python3 deStego.py stego.txt</span><br><span class="line">flag&#123;base64_1s_Ama2ing&#125;</span><br></pre></td></tr></table></figure><p>å¾—åˆ°flag</p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå®‰å…¨ </category>
          
          <category> Misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå®‰å…¨ </tag>
            
            <tag> Misc </tag>
            
            <tag> Base64 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OWASP Top10 åŠå¸¸è§é¢„é˜²æ–¹æ³•</title>
      <link href="/2021/07/06/d7843130fc49-q1jun/"/>
      <url>/2021/07/06/d7843130fc49-q1jun/</url>
      
        <content type="html"><![CDATA[<h2 id="1-æ³¨å…¥æ”»å‡»"><a href="#1-æ³¨å…¥æ”»å‡»" class="headerlink" title="1. æ³¨å…¥æ”»å‡»"></a>1. æ³¨å…¥æ”»å‡»</h2><p>ä¸€ä¸ª <code>æ³¨å…¥æ”»å‡»</code> æ˜¯æŒ‡æ¶æ„ä»£ç çš„è¾“å…¥æ”»å‡»è€…åˆ°åº”ç”¨ç¨‹åºè¿«ä½¿å…¶æ‰§è¡Œå‘½ä»¤å¦¥åæ•°æ®æˆ–æ•´ä¸ªåº”ç”¨ç¨‹åºã€‚æœ€å¸¸è§çš„æ³¨å…¥æ”»å‡»ç±»å‹æ˜¯<code> SQL æ³¨å…¥</code>å’Œ<code>è·¨ç«™ç‚¹è„šæœ¬ (XSS)</code> æ”»å‡»ï¼Œä½†ä¹Ÿæœ‰<code>ä»£ç æ³¨å…¥</code>ã€<code>å‘½ä»¤æ³¨å…¥</code>ã€<code>CCS æ³¨å…¥</code>ç­‰ã€‚</p><p>SQL æ³¨å…¥ æ˜¯æŒ‡åˆ©ç”¨ç”±äºç”¨æˆ·è¾“å…¥ä¸­ç¼ºå°‘å…ƒå­—ç¬¦å±è”½æˆ–éªŒè¯è€Œå¯¼è‡´çš„ <code>SQL æ•°æ®åº“æ¼æ´</code>ã€‚ </p><p>æ”»å‡»è€…è¯•å›¾é€šè¿‡æœ‰æƒè®¿é—®æ•°æ®åº“çš„åº”ç”¨ç¨‹åºæ³¨å…¥ä»–è‡ªå·±çš„æ•°æ®åº“å‘½ä»¤ã€‚ä½†æ˜¯ï¼Œç”±äºè¯·æ±‚æœªæ­£ç¡®éªŒè¯ï¼Œæ’å…¥çš„ä»£ç æ›´æ”¹äº†åŸå§‹ SQL å‘½ä»¤ï¼Œå› æ­¤æ›´æ”¹äº†æœ‰åˆ©äºæ”»å‡»è€…çš„ç»“æœã€‚ </p><p>æ”»å‡»æˆåŠŸåï¼Œæ”»å‡»è€…å¯ä»¥çª¥æ¢ã€ä¿®æ”¹æˆ–å®Œå…¨åˆ é™¤æ•°æ®ï¼Œå¹¶æ§åˆ¶æœåŠ¡å™¨ã€‚ä¸ºæ­¤ï¼Œæ”»å‡»è€…æœ‰ä¸åŒçš„æ–¹æ³•æ¥ç ´åç³»ç»Ÿã€‚ä¾‹å¦‚ï¼Œå¯ä»¥é€šè¿‡å“åº”æ—¶é—´æˆ–é”™è¯¯æ¶ˆæ¯æ‰¾åˆ°è¿›å…¥ç³»ç»Ÿçš„é€”å¾„ã€‚</p><h3 id="1-1-SQLæ³¨å…¥æ”»å‡»çš„é˜²èŒƒ"><a href="#1-1-SQLæ³¨å…¥æ”»å‡»çš„é˜²èŒƒ" class="headerlink" title="1.1 SQLæ³¨å…¥æ”»å‡»çš„é˜²èŒƒ"></a>1.1 SQLæ³¨å…¥æ”»å‡»çš„é˜²èŒƒ</h3><p>é¿å…æ³¨å…¥ç¼ºé™·çš„ä¸»è¦æ–¹æ³•æ˜¯å°†æ•°æ®åº“ä¸­çš„æ•°æ®ä¸å‘½ä»¤å’ŒæŸ¥è¯¢åˆ†å¼€ï¼Œå³å°†å…¶ä¸ Web åº”ç”¨ç¨‹åºé€»è¾‘åˆ†å¼€ã€‚è¿™å¯ä»¥é€šè¿‡å‡ ç§ä¸åŒçš„æ–¹å¼å®ç°ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>ä½¿ç”¨æ— éœ€ä½¿ç”¨è§£é‡Šå™¨æˆ–ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢çš„å®‰å…¨ API </li><li>å¼•å…¥ç§¯æçš„æœåŠ¡å™¨ç«¯è¾“å…¥éªŒè¯ï¼ˆç™½åå•ï¼‰</li><li>å¦‚æœåº”ç”¨ç¨‹åºä¸­éœ€è¦ç‰¹æ®Šå­—ç¬¦ï¼Œåˆ™åº”å°½å¯èƒ½é€šè¿‡ç‰¹å®šè§£é‡Šå™¨çš„è½¬ä¹‰è¯­æ³•é¿å…ä½¿ç”¨è¿™äº›å­—ç¬¦</li><li>åœ¨æŸ¥è¯¢ä¸­ä½¿ç”¨æ•°æ®åº“æ§ä»¶ï¼Œä¾‹å¦‚ LIMIT SQL å­å¥ï¼Œä»¥æœ€å¤§é™åº¦åœ°å‡å°‘æ³¨å…¥æˆåŠŸæ—¶æš´éœ²çš„æ•°æ®é‡</li></ul><h2 id="2-ç ´è§£è®¤è¯"><a href="#2-ç ´è§£è®¤è¯" class="headerlink" title="2. ç ´è§£è®¤è¯"></a>2. ç ´è§£è®¤è¯</h2><p>ä¸<code>èº«ä»½éªŒè¯</code>å’Œ<code>ä¼šè¯ç®¡ç†</code>ç›¸å…³çš„åº”ç”¨ç¨‹åºåŠŸèƒ½  ç»å¸¸è¢«é”™è¯¯åœ°å®ç°ï¼Œå…è®¸æ”»å‡»è€…ç ´åå¯†ç ã€å¯†é’¥æˆ–ä¼šè¯ä»¤ç‰Œæˆ–åˆ©ç”¨å…¶ä»–å®ç°ç¼ºé™·æ¥ä¸´æ—¶æˆ–æ°¸ä¹…åœ°å‡è®¾ç”¨æˆ·çš„èº«ä»½ã€‚ </p><p>æ”»å‡»è€…å¯ä»¥åˆ©ç”¨è¯¥æ¼æ´<code>åŠ«æŒç”¨æˆ·ä¼šè¯</code>ï¼Œè®¿é—®æˆ–ä¿®æ”¹å…¶æ— æƒè®¿é—®çš„ä¿¡æ¯ã€‚</p><h3 id="2-1-æŸåçš„èº«ä»½éªŒè¯æ¼æ´çš„é˜²èŒƒ"><a href="#2-1-æŸåçš„èº«ä»½éªŒè¯æ¼æ´çš„é˜²èŒƒ" class="headerlink" title="2.1 æŸåçš„èº«ä»½éªŒè¯æ¼æ´çš„é˜²èŒƒ"></a>2.1 æŸåçš„èº«ä»½éªŒè¯æ¼æ´çš„é˜²èŒƒ</h3><p>ä¸ºé¿å…åˆ©ç”¨æŸåçš„<code>èº«ä»½éªŒè¯</code>è¿›è¡Œæ”»å‡»ï¼ŒOWASP å»ºè®®é‡‡å–ä»¥ä¸‹æªæ–½ï¼š</p><ul><li>å¼•å…¥ç¡®å®šå¯†ç å¼±ç‚¹æˆ–å¼ºåº¦çš„å¯†ç æ£€æŸ¥</li><li>å°†å¯†ç é•¿åº¦ã€å¤æ‚æ€§å’Œè½®æ¢ä¸å¼ºå¤§ä¸”ç°ä»£çš„åŸºäºè¯æ®çš„å¯†ç ç­–ç•¥ä¿æŒä¸€è‡´</li><li>å¼•å…¥å¤šå› ç´ èº«ä»½éªŒè¯ï¼Œé˜»æ­¢ä½¿ç”¨è¢«ç›—å‡­æ®ã€æš´åŠ›æ”»å‡»ã€å¡«å……ç­‰</li><li>ä½¿ç”¨æœåŠ¡å™¨ç«¯å®‰å…¨ä¼šè¯ç®¡ç†å™¨ç”Ÿæˆæ—¶é—´æœ‰é™çš„æ–°çš„éšæœºä¼šè¯ ID</li><li>é¿å… URL ä¸­çš„ä¼šè¯ IDï¼Œå®‰å…¨åœ°å­˜å‚¨å®ƒä»¬ï¼Œå¹¶ç¡®ä¿å®ƒä»¬åœ¨ç”¨æˆ·æ³¨é”€ã€ä¼šè¯è¶…æ—¶å’Œç©ºé—²åå¤±æ•ˆ</li><li>ä½¿ç”¨é»˜è®¤å‡­æ®æ—¶ä¸å…è®¸éƒ¨ç½² </li><li>åœ¨ç›‘æ§å¤±è´¥çš„ç™»å½•å°è¯•æ—¶é™åˆ¶æˆ–å»¶è¿Ÿå®ƒä»¬ã€‚æ£€æµ‹åˆ°æ”»å‡»æ—¶å‘ç®¡ç†å‘˜å‘å‡ºè­¦æŠ¥</li></ul><h2 id="3-æ•æ„Ÿæ•°æ®æš´éœ²"><a href="#3-æ•æ„Ÿæ•°æ®æš´éœ²" class="headerlink" title="3. æ•æ„Ÿæ•°æ®æš´éœ²"></a>3. æ•æ„Ÿæ•°æ®æš´éœ²</h2><p><code>æ•æ„Ÿæ•°æ®æ³„éœ²</code>æ˜¯æœ€å¸¸è§çš„æ”»å‡»ä¹‹ä¸€ã€‚å®ƒåŒ…æ‹¬è®¿é—®ã€ä¿®æ”¹æˆ–çªƒå–æœªå—ä¿æŠ¤çš„é™æ­¢æˆ–ä¼ è¾“ä¸­çš„æ•°æ®ï¼ˆä¼ è¾“çš„æ•°æ®ï¼‰ã€‚æ­¤ç±»æ•°æ®é€šå¸¸åŒ…æ‹¬<code>ä¸ªäººèº«ä»½ä¿¡æ¯ (PII)</code>ï¼Œä¾‹å¦‚<code>å‡­æ®</code>ã€<code>å¥åº·è®°å½•</code>ã€<code>ä¿¡ç”¨å¡å·</code>ç­‰ã€‚ç¼ºä¹åŠ å¯†æ˜¯æ•°æ®æœ€ç»ˆæš´éœ²çš„åŸå› ä¹‹ä¸€ã€‚</p><p>è·å–æ•æ„Ÿæ•°æ®è®¿é—®æƒé™çš„æ–¹æ³•å„ä¸ç›¸åŒï¼Œä½†å¯èƒ½åŒ…æ‹¬æ”»å‡»è€…çªƒå–å¯†é’¥ã€æ‰§è¡Œè·¯å¾„æ”»å‡»ï¼ˆä¹Ÿç§°ä¸º<code>ä¸­é—´äºº</code>ï¼‰ã€ä»æœåŠ¡å™¨æˆ–ç”¨æˆ·çªƒå–æ˜æ–‡æ•°æ®ç­‰ã€‚ </p><p>æ¨¡ç³Šæµ‹è¯• æ˜¯ä¸€ç§ä½¿ç”¨æ— æ•ˆã€éšæœºæˆ–æ„å¤–æ•°æ®æ¥äº§ç”Ÿæ„å¤–çŠ¶æ€æˆ–è®¿é—®éšè—ç‰¹å¾çš„æŠ€æœ¯ã€‚æœ‰å¤šç§ç±»å‹çš„æ¨¡ç³Šæµ‹è¯•ï¼š</p><ul><li>åŸºäºè§‚å¯Ÿæ•°æ®çš„æ¨¡ç³Šæµ‹è¯•</li><li>åœ¨æ²¡æœ‰å…ˆå‰çŸ¥è¯†çš„æƒ…å†µä¸‹è¿›è¡Œæ¨¡ç³Šæµ‹è¯•</li></ul><h3 id="3-1-æ•æ„Ÿæ•°æ®æ³„éœ²çš„é˜²èŒƒ"><a href="#3-1-æ•æ„Ÿæ•°æ®æ³„éœ²çš„é˜²èŒƒ" class="headerlink" title="3.1 æ•æ„Ÿæ•°æ®æ³„éœ²çš„é˜²èŒƒ"></a>3.1 æ•æ„Ÿæ•°æ®æ³„éœ²çš„é˜²èŒƒ</h3><p>æ‚¨å¯ä»¥é‡‡å–å¤šç§æªæ–½æ¥ä¿æŠ¤ä»»ä½•æ•æ„Ÿæ•°æ®å…é­æ³„éœ²ã€‚è¿™äº›åŒ…æ‹¬ï¼š</p><ul><li>å®æ–½<code>ä¼ è¾“å±‚å®‰å…¨æ€§</code> (TLS) ä»¥ä¿æŠ¤ä¼ è¾“ä¸­çš„æ•°æ® </li><li>å°½å¯èƒ½é¿å…å­˜å‚¨æ•æ„Ÿæ•°æ®ï¼Œæˆ–å­˜å‚¨æ—¶é—´è¶…è¿‡æ‰€éœ€æ—¶é—´</li><li>åŠ å¯†æ‰€æœ‰éœ€è¦å­˜å‚¨çš„é™æ€æ•°æ®</li><li>é€šè¿‡ HTTP ä¸¥æ ¼ä¼ è¾“å®‰å…¨ ( HSTS ) æˆ–ç±»ä¼¼æŒ‡ä»¤å¼ºåˆ¶åŠ å¯†</li><li>ä¸è¦ç¼“å­˜åŒ…å«æ•æ„Ÿæ•°æ®çš„ç”¨æˆ·å“åº”</li><li>å¯¹æ•°æ®è¿›è¡Œåˆ†ç±»ï¼ˆå¤„ç†ã€å­˜å‚¨æˆ–ä¼ è¾“ï¼‰å¹¶æ ¹æ®åˆ†ç±»åº”ç”¨æ§åˆ¶</li><li>å®æ–½å¼ºå¤§çš„æ ‡å‡†ç®—æ³•ã€åè®®å’Œå¯†é’¥</li><li>ä½¿ç”¨<code>å“ˆå¸Œå‡½æ•°</code>ï¼Œä¾‹å¦‚ brcryptã€scryptã€Argon2ã€PBKDF2ï¼Œè¿™äº›å‡½æ•°æ€»æ˜¯å¯¹å¯†ç è¿›è¡ŒåŠ ç›å’Œå“ˆå¸Œå¤„ç†</li></ul><h2 id="4-XML-å¤–éƒ¨å®ä½“-XXE"><a href="#4-XML-å¤–éƒ¨å®ä½“-XXE" class="headerlink" title="4. XML å¤–éƒ¨å®ä½“ (XXE)"></a>4. XML å¤–éƒ¨å®ä½“ (XXE)</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè®¸å¤šæ—§çš„æˆ–é…ç½®ä¸å½“çš„ <code>XML å¤„ç†å™¨</code>ä¼šè¯„ä¼°  XML æ–‡æ¡£ä¸­çš„å¤–éƒ¨å®ä½“å¼•ç”¨ã€‚è¿™å¯ä»¥è¢«è®¾æ³•ä¸Šä¼  XML æ–‡æ¡£ï¼ˆä¾‹å¦‚ DOCX æˆ– SVG æ–‡ä»¶ï¼‰æˆ–åœ¨ XML æ–‡æ¡£ä¸­åŒ…å«æ¶æ„å†…å®¹çš„æ”»å‡»è€…åˆ©ç”¨ã€‚</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¤–éƒ¨å®ä½“å¯ç”¨äºä½¿ç”¨æ–‡ä»¶ URI å¤„ç†ç¨‹åºæå–å†…éƒ¨æ–‡ä»¶ã€‚å®ƒä»¬è¿˜å¯ä»¥å¯ç”¨å†…éƒ¨æ–‡ä»¶å…±äº«ã€å†…éƒ¨ç«¯å£æ‰«æã€è¿œç¨‹è¯·æ±‚æ‰§è¡Œå’Œæ‹’ç»æœåŠ¡æ”»å‡» (DOS) çš„æ€§èƒ½ã€‚</p><h3 id="4-1-XML-å¤–éƒ¨å®ä½“æ”»å‡»çš„é˜²èŒƒ"><a href="#4-1-XML-å¤–éƒ¨å®ä½“æ”»å‡»çš„é˜²èŒƒ" class="headerlink" title="4.1 XML å¤–éƒ¨å®ä½“æ”»å‡»çš„é˜²èŒƒ"></a>4.1 XML å¤–éƒ¨å®ä½“æ”»å‡»çš„é˜²èŒƒ</h3><p>ä¸ºäº†é˜²æ­¢è¿™ç§æ”»å‡»ï¼Œå¼€å‘äººå‘˜éœ€è¦æ¥å—åŸ¹è®­ä»¥æµ‹è¯•ã€è¯†åˆ«å’Œç¼“è§£ XXEã€‚æ­¤å¤–ï¼ŒOWASP å»ºè®®é‡‡å–ä»¥ä¸‹æªæ–½ï¼š</p><ul><li>é¿å…å¯¹æ½œåœ¨æ•æ„Ÿä¿¡æ¯è¿›è¡Œåºåˆ—åŒ–ï¼Œå¹¶ä½¿ç”¨ä¸å¤ªå¤æ‚çš„æ•°æ®æ ¼å¼ï¼Œä¾‹å¦‚ JSON</li><li>ç™½åå•æœåŠ¡å™¨ç«¯è¾“å…¥éªŒè¯ï¼Œä»¥é¿å…é€šè¿‡ XML æ–‡æ¡£å‘é€æ¶æ„æ•°æ®</li><li>é€šè¿‡ XML æ¨¡å¼éªŒè¯ä¼ å…¥çš„ XMLï¼Œå³ XSD éªŒè¯</li><li>ç¡®ä¿å®šæœŸä¿®è¡¥æˆ–å‡çº§ XML åº“å’Œå¤„ç†å™¨</li><li>åœ¨è§£æå™¨ä¸­å®Œå…¨ç¦ç”¨æ–‡æ¡£ç±»å‹å®šä¹‰ (DTD) å¤„ç†ï¼ˆè¿™ä¹Ÿå¯ä»¥ä¿æŠ¤è§£æå™¨å…å— DOS æ”»å‡»ï¼‰</li><li>æ‰‹åŠ¨æŸ¥çœ‹ XXE å®ä¾‹çš„æºä»£ç </li></ul><h2 id="5-ç ´åè®¿é—®æ§åˆ¶"><a href="#5-ç ´åè®¿é—®æ§åˆ¶" class="headerlink" title="5. ç ´åè®¿é—®æ§åˆ¶"></a>5. ç ´åè®¿é—®æ§åˆ¶</h2><p>æŸåçš„è®¿é—®æ§åˆ¶ æ˜¯æŒ‡å¯¹ç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·çš„è¡Œä¸ºå®æ–½é™åˆ¶æ—¶å­˜åœ¨çš„æ¼æ´ã€‚å½“é™åˆ¶æ²¡æœ‰å¾—åˆ°æ­£ç¡®æ‰§è¡Œæ—¶ï¼Œæ”»å‡»è€…å¯ä»¥åˆ©ç”¨è¿™ä¸ªå¼±ç‚¹æ¥è·å¾—å¯¹ç³»ç»ŸåŠŸèƒ½å’Œæ•æ„Ÿä¸ªäººæ•°æ®çš„æœªç»æˆæƒçš„ç®¡ç†è®¿é—®ã€‚ä»–ä»¬è¿˜å¯ä»¥åˆ›å»ºã€ä¿®æ”¹æˆ–åˆ é™¤æ•°æ®ã€‚</p><h3 id="5-1-è®¿é—®æ§åˆ¶å¤±æ•ˆçš„é˜²èŒƒ"><a href="#5-1-è®¿é—®æ§åˆ¶å¤±æ•ˆçš„é˜²èŒƒ" class="headerlink" title="5.1 è®¿é—®æ§åˆ¶å¤±æ•ˆçš„é˜²èŒƒ"></a>5.1 è®¿é—®æ§åˆ¶å¤±æ•ˆçš„é˜²èŒƒ</h3><p>ä¸ºäº†æœ‰æ•ˆåœ°é˜»æ­¢è®¿é—®æ§åˆ¶ï¼Œå®ƒå¿…é¡»åœ¨å—ä¿¡ä»»çš„æœåŠ¡å™¨ç«¯ä»£ç æˆ–æ— æœåŠ¡å™¨ API ä¸­å¼ºåˆ¶æ‰§è¡Œã€‚è¿™å°†é˜²æ­¢æ”»å‡»è€…ä¿®æ”¹è®¿é—®æ§åˆ¶æ£€æŸ¥æˆ–å…ƒæ•°æ®ã€‚OWASP åˆ—å‡ºäº†ä»¥ä¸‹æªæ–½æ¥é˜²æ­¢æ­¤ç±»æ”»å‡»ï¼š</p><ul><li>æ’é™¤å…¬å…±èµ„æºï¼Œé»˜è®¤æ‹’ç»</li><li>å¼•å…¥è®¿é—®æ§åˆ¶æœºåˆ¶å¹¶åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­é‡å¤ä½¿ç”¨å®ƒä»¬</li><li>å¼ºåˆ¶è®°å½•æ‰€æœ‰æƒ</li><li>è®°å½•å’Œç›‘æ§è®¿é—®æ§åˆ¶å¤±è´¥ï¼Œå¦‚æœéœ€è¦é€šçŸ¥ç®¡ç†å‘˜ï¼ˆé‡å¤ç™»å½•å°è¯•ï¼‰</li><li>æ³¨é”€åä½¿ JSON Web ä»¤ç‰Œ (JWT) æ— æ•ˆ</li><li>é€šè¿‡åŸŸæ¨¡å‹å¼ºåˆ¶æ‰§è¡Œç‹¬ç‰¹çš„åº”ç”¨ç¨‹åºä¸šåŠ¡é™åˆ¶è¦æ±‚</li><li>ç¡®ä¿å…ƒæ•°æ®å’Œå¤‡ä»½æ–‡ä»¶ä¸å­˜åœ¨äº Web æ ¹ç›®å½•ä¸­</li><li>ç¦ç”¨ç½‘ç»œæœåŠ¡å™¨ç›®å½•åˆ—è¡¨</li><li>æ‰§è¡ŒåŠŸèƒ½è®¿é—®æ§åˆ¶å•å…ƒå’Œé›†æˆæµ‹è¯•</li></ul><p>æ­¤å¤–ï¼Œæ‚¨å¯èƒ½è¿˜è¦ï¼š</p><ul><li>åˆ é™¤ä¸æ´»åŠ¨æˆ–ä¸å¿…è¦çš„å¸æˆ·</li><li>å¯¹æ‰€æœ‰æ¥å…¥ç‚¹å®æ–½å¤šå› ç´ èº«ä»½éªŒè¯</li><li>å¦‚æœä¸éœ€è¦ä¸€äº›æ¥å…¥ç‚¹ï¼Œåˆ™å‡å°‘æ¥å…¥ç‚¹çš„æ•°é‡</li><li>å®æ–½æœ€å°æƒé™åŸåˆ™ (PoLP) </li><li>å…³é—­æœåŠ¡å™¨ä¸Šä¸éœ€è¦çš„æœåŠ¡</li></ul><h2 id="6-å®‰å…¨é…ç½®é”™è¯¯"><a href="#6-å®‰å…¨é…ç½®é”™è¯¯" class="headerlink" title="6. å®‰å…¨é…ç½®é”™è¯¯"></a>6. å®‰å…¨é…ç½®é”™è¯¯</h2><p><code>å®‰å…¨é…ç½®é”™è¯¯</code> æ˜¯æ‰“å¼€æ”»å‡»é¢çš„å¸¸è§é—®é¢˜ã€‚è¿™é€šå¸¸æ˜¯ç”±äºï¼š </p><ul><li>ä¸å®‰å…¨çš„é»˜è®¤é…ç½®</li><li>ä¸å®Œæ•´æˆ–ä¸´æ—¶é…ç½®</li><li>æœªä¿®è¡¥çš„ç¼ºé™·</li><li>æœªä½¿ç”¨çš„é¡µé¢</li><li>æœªå—ä¿æŠ¤çš„æ–‡ä»¶å’Œç›®å½•</li><li>å¼€æ”¾äº‘å­˜å‚¨</li><li>é”™è¯¯é…ç½®çš„ HTTP æ ‡å¤´æˆ–åŠ å¯†</li><li>åŒ…å«æ•æ„Ÿä¿¡æ¯çš„è¯¦ç»†é”™è¯¯æ¶ˆæ¯</li></ul><p>ä¸ä»…å¿…é¡»å®‰å…¨åœ°é…ç½®æ‰€æœ‰<code>æ“ä½œç³»ç»Ÿ</code>ã€<code>æ¡†æ¶</code>ã€<code>åº“</code>å’Œ<code>åº”ç”¨ç¨‹åº</code>ï¼Œè€Œä¸”å¿…é¡»åŠæ—¶ä¿®è¡¥&#x2F;å‡çº§å®ƒä»¬ã€‚</p><p>åƒ Crashtest Security è¿™æ ·çš„è‡ªåŠ¨åŒ–æ¸—é€æµ‹è¯•å·¥å…·å¯ä»¥å¸®åŠ©æ£€æµ‹å®‰å…¨æ¼æ´ï¼Œè¿™äº›æ¼æ´å¯èƒ½é€šè¿‡å®‰å…¨é…ç½®é”™è¯¯è€Œå¯¼è‡´æ¼æ´ã€‚æ³¨å†Œå…è´¹è¯•ç”¨å¹¶ åœ¨å‡ åˆ†é’Ÿå†…å¼€å§‹æ‚¨çš„ç¬¬ä¸€æ¬¡æ‰«æã€‚</p><h3 id="6-1-å®‰å…¨é…ç½®é”™è¯¯æ”»å‡»çš„é˜²èŒƒ"><a href="#6-1-å®‰å…¨é…ç½®é”™è¯¯æ”»å‡»çš„é˜²èŒƒ" class="headerlink" title="6.1 å®‰å…¨é…ç½®é”™è¯¯æ”»å‡»çš„é˜²èŒƒ"></a>6.1 å®‰å…¨é…ç½®é”™è¯¯æ”»å‡»çš„é˜²èŒƒ</h3><p>OWASP å»ºè®®å®æ–½å®‰å…¨å®‰è£…è¿‡ç¨‹ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä½ åº”è¯¥ï¼š</p><ul><li>å¼€å‘å’Œè‡ªåŠ¨åŒ–ä¸€ä¸ªæµç¨‹ï¼Œè¯¥æµç¨‹å…è®¸å¿«é€Ÿè½»æ¾åœ°éƒ¨ç½²é…ç½®ç›¸åŒä½†å¯é€šè¿‡ä¸åŒå‡­æ®è®¿é—®çš„å®‰å…¨ç¯å¢ƒ</li><li>éƒ¨ç½²æœ€å°å¹³å°å¹¶åˆ é™¤æœªä½¿ç”¨çš„åŠŸèƒ½å’Œæ¡†æ¶æˆ–ä¸å®‰è£…</li><li>å¼•å…¥åˆ†ç¦»ç»„ä»¶å’Œç§Ÿæˆ·çš„åˆ†æ®µåº”ç”¨æ¶æ„</li><li>æŸ¥çœ‹å’Œæ›´æ–°æ‰€æœ‰å®‰å…¨è¯´æ˜ã€æ›´æ–°å’Œè¡¥ä¸çš„é…ç½®ï¼Œå°¤å…¶æ˜¯äº‘å­˜å‚¨æƒé™</li><li>åœ¨æ‰€æœ‰ç¯å¢ƒä¸­è‡ªåŠ¨ç›‘æ§å’ŒéªŒè¯å®‰å…¨é…ç½®çš„æœ‰æ•ˆæ€§</li><li>å€ŸåŠ©è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹å®æ—¶è§£å†³å®‰å…¨é—®é¢˜</li></ul><h2 id="7-è·¨ç«™è„šæœ¬ï¼ˆXSSï¼‰"><a href="#7-è·¨ç«™è„šæœ¬ï¼ˆXSSï¼‰" class="headerlink" title="7. è·¨ç«™è„šæœ¬ï¼ˆXSSï¼‰"></a>7. è·¨ç«™è„šæœ¬ï¼ˆXSSï¼‰</h2><p><code>è·¨ç«™ç‚¹è„šæœ¬</code>æ˜¯å°†<code>å®¢æˆ·ç«¯è„šæœ¬</code>æ³¨å…¥åˆ° <code>Web åº”ç”¨ç¨‹åº</code>ä¸­ï¼Œè¿™æ˜¯é€šè¿‡ä¸å¯¹ç”¨æˆ·è¾“å…¥è¿›è¡Œ<code>éªŒè¯</code>å’Œ<code>æ­£ç¡®ç¼–ç </code>æ¥å®ç°çš„ã€‚æ¶æ„è„šæœ¬åœ¨æœ€ç»ˆç”¨æˆ·çš„æµè§ˆå™¨ä¸­æ‰§è¡Œå¹¶å¯ç”¨å„ç§æ”»å‡»â€”â€”ä»çªƒå–ä»–ä»¬çš„ä¼šè¯åˆ°ç›‘æ§å’Œæ›´æ”¹å—å½±å“ç½‘ç«™ä¸Šçš„ä»»ä½•æ“ä½œã€‚ </p><p>å­˜åœ¨ä¸åŒç±»å‹çš„è·¨ç«™ç‚¹è„šæœ¬æ”»å‡»ï¼Œå…·ä½“å–å†³äºæ¶æ„è„šæœ¬æ˜¯éæŒä¹…æ€§æ³¨å…¥è¿˜æ˜¯æŒä¹…æ€§æ³¨å…¥ã€‚æ­¤å¤–ï¼Œè¿˜åŒºåˆ†äº†ç”±å®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨ç«¯æœ‰ç¼ºé™·çš„è¾“å…¥éªŒè¯å¼•èµ·çš„æ¼æ´ã€‚</p><h3 id="7-1-è·¨ç«™è„šæœ¬ï¼ˆXSSï¼‰çš„é˜²èŒƒ"><a href="#7-1-è·¨ç«™è„šæœ¬ï¼ˆXSSï¼‰çš„é˜²èŒƒ" class="headerlink" title="7.1 è·¨ç«™è„šæœ¬ï¼ˆXSSï¼‰çš„é˜²èŒƒ"></a>7.1 è·¨ç«™è„šæœ¬ï¼ˆXSSï¼‰çš„é˜²èŒƒ</h3><p>æ ¹æ® OWASP çš„è¯´æ³•ï¼Œé˜²æ­¢æ­¤ç±»æ”»å‡»çš„ä¸»è¦æ–¹æ³•æ˜¯å°†<code>ä¸å—ä¿¡ä»»</code>å’Œ<code>æœªç»éªŒè¯</code>çš„æ•°æ®è¾“å…¥ä¸æ´»åŠ¨æµè§ˆå™¨å†…å®¹åˆ†å¼€ã€‚è¿™å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å®Œæˆï¼š</p><ul><li>ä½¿ç”¨ <code>React JS</code>ã€<code>Ruby on Rails </code>å’Œå…¶ä»–åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šé¿å… XSS è®¾è®¡çš„æ¡†æ¶</li><li>é¿å… HTML ä¸­ä¸å—ä¿¡ä»»çš„ HTTP è¯·æ±‚æ•°æ®ï¼Œé™¤éåœ¨ OWASP å¤‡å¿˜å•ç³»åˆ—â€œXSS é¢„é˜²â€ä¸­å®šä¹‰çš„å…è®¸æ’æ§½ä¸­</li><li>åœ¨ HTML å…ƒç´ ä¸­æ’å…¥ä»»ä½•ä¸å—ä¿¡ä»»çš„æ•°æ®ä¹‹å‰ä½¿ç”¨ HTML ç¼–ç </li><li>å¯¹åŸºäº DOM çš„ XSS åº”ç”¨ä¸Šä¸‹æ–‡æ•æ„Ÿç¼–ç </li><li>å®æ–½å†…å®¹å®‰å…¨ç­–ç•¥ (CSP)ï¼Œä¸ºå®¢æˆ·ç«¯èµ„æºåˆ›å»ºæºå…è®¸åˆ—è¡¨ã€‚å¦‚æœæ²¡æœ‰å…è®¸é€šè¿‡æœ¬åœ°æ–‡ä»¶æ’å…¥æ¶æ„ä»£ç çš„æ¼æ´ï¼Œè¿™å°†å¾ˆæœ‰å¸®åŠ©</li></ul><h2 id="8-ä¸å®‰å…¨çš„ååºåˆ—åŒ–"><a href="#8-ä¸å®‰å…¨çš„ååºåˆ—åŒ–" class="headerlink" title="8. ä¸å®‰å…¨çš„ååºåˆ—åŒ–"></a>8. ä¸å®‰å…¨çš„ååºåˆ—åŒ–</h2><p><code>ä¸å®‰å…¨ååºåˆ—åŒ–</code> æ˜¯ä¸€ç§æ”»å‡»ï¼Œå…¶ä¸­å°†è¢«æ“çºµçš„å¯¹è±¡æ³¨å…¥åˆ° Web åº”ç”¨ç¨‹åºçš„ä¸Šä¸‹æ–‡ä¸­ã€‚å¦‚æœå­˜åœ¨åº”ç”¨ç¨‹åºæ¼æ´ï¼Œåˆ™å¯¹è±¡è¢«ååºåˆ—åŒ–å¹¶æ‰§è¡Œï¼Œä»è€Œå¯¼è‡´ <code>SQL æ³¨å…¥</code>ã€<code>è·¯å¾„éå†</code>ã€<code>åº”ç”¨ç¨‹åºæ‹’ç»æœåŠ¡</code>å’Œ<code>è¿œç¨‹ä»£ç </code>æ‰§è¡Œã€‚</p><h3 id="8-1-ä¸å®‰å…¨çš„ååºåˆ—åŒ–çš„é˜²èŒƒ"><a href="#8-1-ä¸å®‰å…¨çš„ååºåˆ—åŒ–çš„é˜²èŒƒ" class="headerlink" title="8.1 ä¸å®‰å…¨çš„ååºåˆ—åŒ–çš„é˜²èŒƒ"></a>8.1 ä¸å®‰å…¨çš„ååºåˆ—åŒ–çš„é˜²èŒƒ</h3><p>ä¸ºäº†é˜²æ­¢ä¸å®‰å…¨çš„ååºåˆ—åŒ–ï¼ŒOWASP å»ºè®®æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p><ul><li>æ‹’ç»æ¥è‡ªä¸å—ä¿¡ä»»æ¥æºçš„åºåˆ—åŒ–å¯¹è±¡</li><li>ä»…ä½¿ç”¨å…è®¸åŸå§‹æ•°æ®ç±»å‹çš„åºåˆ—åŒ–ä»‹è´¨</li><li>å®æ–½æ•°å­—ç­¾åä»¥æ£€æŸ¥åºåˆ—åŒ–å¯¹è±¡çš„å®Œæ•´æ€§</li><li>åœ¨ååºåˆ—åŒ–æœŸé—´å¼ºåˆ¶æ‰§è¡Œä¸¥æ ¼çš„ç±»å‹çº¦æŸä»¥æ£€æµ‹æ„å¤–å­å¥ </li><li>åœ¨å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œåœ¨ä½æƒé™ç¯å¢ƒä¸­éš”ç¦»å’Œè¿è¡Œååºåˆ—åŒ–ä»£ç ä»¥é˜²æ­¢æœªç»æˆæƒçš„æ“ä½œ</li><li>è®°å½•ååºåˆ—åŒ–å¼‚å¸¸å’Œå¤±è´¥çš„å®ä¾‹</li><li>ç›‘è§†å’Œ&#x2F;æˆ–é™åˆ¶æ¥è‡ªååºåˆ—åŒ–çš„æœåŠ¡å™¨æˆ–å®¹å™¨çš„ä»»ä½•ä¼ å‡ºæˆ–ä¼ å…¥ç½‘ç»œè¿æ¥</li></ul><h2 id="9-ä½¿ç”¨å·²çŸ¥æ¼æ´çš„ç»„ä»¶"><a href="#9-ä½¿ç”¨å·²çŸ¥æ¼æ´çš„ç»„ä»¶" class="headerlink" title="9.ä½¿ç”¨å·²çŸ¥æ¼æ´çš„ç»„ä»¶"></a>9.ä½¿ç”¨å·²çŸ¥æ¼æ´çš„ç»„ä»¶</h2><p>åº“ã€æ¡†æ¶å’Œå…¶ä»–è½¯ä»¶æ¨¡å—ç­‰ç»„ä»¶çš„æƒé™ä¸åº”ç”¨ç¨‹åºçš„æƒé™ç›¸åŒã€‚å¦‚æœåˆ©ç”¨<code>æ˜“å—æ”»å‡»çš„ç»„ä»¶</code>ï¼Œåˆ™å¯èƒ½ä¼šä¸¢å¤±æ•°æ®å’ŒæœåŠ¡å™¨æ¥ç®¡ã€‚ä½¿ç”¨å…·æœ‰å·²çŸ¥æ¼æ´çš„ç»„ä»¶çš„åº”ç”¨ç¨‹åºå’Œ API å¯èƒ½ä¼šç ´ååº”ç”¨ç¨‹åºé˜²å¾¡å¹¶å¼•å‘å„ç§æ”»å‡»å’Œå½±å“ã€‚è¿™æ˜¯ä¸€ä¸ªæ™®éå­˜åœ¨çš„é—®é¢˜ã€‚</p><p>ä¸ºäº†å¸®åŠ©æ‚¨è¯„ä¼°æ‚¨ä½¿ç”¨çš„ç»„ä»¶æ˜¯å¦å­˜åœ¨å·²çŸ¥æ¼æ´ï¼ŒæŒ‡çº¹æ‰«æä»ªä¼šå°è¯•æ£€æµ‹ä»»ä½•Web æœåŠ¡å™¨ æˆ– Web åº”ç”¨ç¨‹åº æ¡†æ¶ä»¥åŠæœåŠ¡å™¨ä¸Šè¿è¡Œçš„ç›¸å…³ç‰ˆæœ¬ã€‚</p><h3 id="9-1-ä½¿ç”¨å·²çŸ¥æ¼æ´çš„ç»„ä»¶çš„é˜²èŒƒ"><a href="#9-1-ä½¿ç”¨å·²çŸ¥æ¼æ´çš„ç»„ä»¶çš„é˜²èŒƒ" class="headerlink" title="9.1 ä½¿ç”¨å·²çŸ¥æ¼æ´çš„ç»„ä»¶çš„é˜²èŒƒ"></a>9.1 ä½¿ç”¨å·²çŸ¥æ¼æ´çš„ç»„ä»¶çš„é˜²èŒƒ</h3><p>è¦ä¿®å¤æ­¤ç±»ç»„ä»¶çš„ä½¿ç”¨ï¼Œæ‚¨åº”è¯¥ï¼š</p><ul><li>ä»…é€šè¿‡å®‰å…¨é“¾æ¥ä½¿ç”¨æ¥è‡ªå®˜æ–¹æ¥æºçš„ç»„ä»¶ã€‚ä½¿ç”¨ç­¾åçš„åŒ…æ¥æœ€å°åŒ–åŒ…ä¸­åŒ…å«æ¶æ„ç»„ä»¶çš„å¯èƒ½æ€§</li><li>ç›‘æ§ä»»ä½•æœªç»´æŠ¤ä¸”æœªä¸ºæ—§ç‰ˆæœ¬æä¾›å®‰å…¨è¡¥ä¸çš„åº“å’Œç»„ä»¶</li><li>éƒ¨ç½²è™šæ‹Ÿè¡¥ä¸ä»¥ç›‘æ§ã€æ£€æµ‹å’Œé˜²èŒƒæœªæ‰“è¡¥ä¸ç»„ä»¶çš„é—®é¢˜</li><li>åˆ é™¤æ‰€æœ‰æœªä½¿ç”¨çš„ä¾èµ–é¡¹ä»¥åŠä¸éœ€è¦çš„åŠŸèƒ½ã€ç»„ä»¶ã€æ–‡ä»¶å’Œæ–‡æ¡£</li><li>ä¿æŒå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ç»„ä»¶åŠå…¶ç‰ˆæœ¬å’Œä¾èµ–é¡¹çš„æœ€æ–°æ¸…å•ã€‚ç›‘æ§ç»„ä»¶æ¼æ´çš„é‡è¦æ¥æºï¼Œå¹¶å°½å¯èƒ½è‡ªåŠ¨åŒ–æµç¨‹</li><li>åœ¨åº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸå†…åˆ›å»ºå¹¶æŒç»­æ‰§è¡Œç›‘è§†ã€åˆ†ç±»ã€æ›´æ–°æˆ–æ›´æ”¹é…ç½®</li></ul><h2 id="10-æ—¥å¿—è®°å½•å’Œç›‘æ§ä¸è¶³"><a href="#10-æ—¥å¿—è®°å½•å’Œç›‘æ§ä¸è¶³" class="headerlink" title="10. æ—¥å¿—è®°å½•å’Œç›‘æ§ä¸è¶³"></a>10. æ—¥å¿—è®°å½•å’Œç›‘æ§ä¸è¶³</h2><p><code>æ—¥å¿—è®°å½•</code>å’Œ<code>ç›‘æ§</code>ä¸è¶³ï¼Œå†åŠ ä¸Šä¸äº‹ä»¶å“åº”çš„é›†æˆç¼ºå¤±æˆ–æ— æ•ˆï¼Œä½¿æ”»å‡»è€…èƒ½å¤Ÿè¿›ä¸€æ­¥æ”»å‡»ç³»ç»Ÿï¼Œä¿æŒæŒä¹…æ€§ï¼Œè½¬å‘æ›´å¤šç³»ç»Ÿï¼Œå¹¶<code>ç¯¡æ”¹</code>ã€<code>æå–</code>æˆ–<code>ç ´åæ•°æ®</code>ã€‚ </p><p>å¤§å¤šæ•°è¿è§„ç ”ç©¶è¡¨æ˜æ£€æµ‹è¿è§„çš„æ—¶é—´è¶…è¿‡ 200 å¤©ï¼Œé€šå¸¸ç”±å¤–éƒ¨æ–¹è€Œä¸æ˜¯å†…éƒ¨æµç¨‹æˆ–ç›‘æ§æ£€æµ‹åˆ°ã€‚</p><h3 id="10-1-å› æ—¥å¿—å’Œç›‘æ§ä¸è¶³è€Œå¯¼è‡´çš„æ”»å‡»çš„é˜²èŒƒ"><a href="#10-1-å› æ—¥å¿—å’Œç›‘æ§ä¸è¶³è€Œå¯¼è‡´çš„æ”»å‡»çš„é˜²èŒƒ" class="headerlink" title="10.1 å› æ—¥å¿—å’Œç›‘æ§ä¸è¶³è€Œå¯¼è‡´çš„æ”»å‡»çš„é˜²èŒƒ"></a>10.1 å› æ—¥å¿—å’Œç›‘æ§ä¸è¶³è€Œå¯¼è‡´çš„æ”»å‡»çš„é˜²èŒƒ</h3><p>ä¸ºäº†é˜²æ­¢ç”±äºæ­¤é—®é¢˜è€Œå‡ºç°çš„å¸¸è§æ¼æ´ï¼ŒOWASP å»ºè®®æ‚¨ï¼š</p><ul><li>åœ¨ç™»å½•ã€è®¿é—®æ§åˆ¶å¤±è´¥å’ŒæœåŠ¡å™¨ç«¯è¾“å…¥éªŒè¯å¤±è´¥æœŸé—´è®°å½•è¶³å¤Ÿçš„ç”¨æˆ·ä¸Šä¸‹æ–‡ï¼Œå¹¶ä¸”æ—¥å¿—æ•°æ®ä¿ç•™è¶³å¤Ÿé•¿çš„æ—¶é—´ã€‚è¿™å°†å¸®åŠ©æ‚¨å‘ç°å¯ç–‘æ´»åŠ¨å’Œå¸æˆ·</li><li>ä½¿ç”¨æ—¥å¿—ç®¡ç†è§£å†³æ–¹æ¡ˆæ˜“äºå¤„ç†çš„æ—¥å¿—æ ¼å¼</li><li>å¯¹æ‰€æœ‰é«˜ä»·å€¼äº¤æ˜“å®æ–½å…·æœ‰å®Œæ•´æ€§æ§åˆ¶çš„å®¡è®¡è·Ÿè¸ªï¼Œä»¥é¿å…åˆ é™¤æˆ–ç¯¡æ”¹ä¼å›¾</li><li>ä½¿ç”¨ç›‘æ§å’Œè­¦æŠ¥åŠæ—¶å‘ç°å¯ç–‘æ´»åŠ¨å¹¶é‡‡å–æªæ–½</li><li>å¼•å…¥äº‹ä»¶å“åº”å’Œæ¢å¤è®¡åˆ’ä»¥æœ‰æ•ˆåº”å¯¹æ”»å‡»</li></ul>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå®‰å…¨ </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå®‰å…¨ </tag>
            
            <tag> OWASP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxè®¾ç½®å®‰å…¨è®¿é—®æ§åˆ¶ç­–ç•¥</title>
      <link href="/2021/05/06/95681893a77a-q1jun/"/>
      <url>/2021/05/06/95681893a77a-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="Linuxæ·»åŠ è®¿é—®æ§åˆ¶ç­–ç•¥"><a href="#Linuxæ·»åŠ è®¿é—®æ§åˆ¶ç­–ç•¥" class="headerlink" title="Linuxæ·»åŠ è®¿é—®æ§åˆ¶ç­–ç•¥"></a>Linuxæ·»åŠ è®¿é—®æ§åˆ¶ç­–ç•¥</h1><blockquote><p> ubuntuç³»ç»Ÿé»˜è®¤å·²å®‰è£…ufwã€‚</p></blockquote><p>Linux 2.4å†…æ ¸ä»¥åæä¾›äº†ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„é˜²ç«å¢™å·¥å…·ï¼š<strong>netfilter&#x2F;iptables</strong>,ä»–å…è´¹ä¸”åŠŸèƒ½å¼ºå¤§ï¼Œå¯ä»¥å¯¹æµå…¥ã€æµå‡ºçš„ä¿¡æ¯è¿›è¡Œç»†åŒ–æ§åˆ¶ï¼Œå®ƒå¯ä»¥ å®ç°é˜²ç«å¢™ã€NATï¼ˆç½‘ç»œåœ°å€ç¿»è¯‘ï¼‰å’Œæ•°æ®åŒ…çš„åˆ†å‰²ç­‰åŠŸèƒ½ã€‚netfilterå·¥ä½œåœ¨å†…æ ¸å†…éƒ¨ï¼Œè€Œiptablesåˆ™æ˜¯è®©ç”¨æˆ·å®šä¹‰è§„åˆ™é›†çš„è¡¨ç»“æ„ã€‚</p><p>ä½†æ˜¯iptablesçš„è§„åˆ™ç¨å¾®æœ‰äº›â€œå¤æ‚â€ï¼Œå› æ­¤ubuntuæä¾›äº†ufwè¿™ä¸ªè®¾å®šå·¥å…·ï¼Œä»¥ç®€åŒ–iptablesçš„æŸäº›è®¾å®šï¼Œå…¶åå°ä»ç„¶æ˜¯ iptablesã€‚ufw å³uncomplicated firewallçš„ç®€ç§°ï¼Œä¸€äº›å¤æ‚çš„è®¾å®šè¿˜æ˜¯è¦å»iptablesã€‚</p><p>ufwç›¸å…³çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹æœ‰ï¼š</p><ul><li><p>&#x2F;etc &#x2F;ufw&#x2F;ï¼šé‡Œé¢æ˜¯ä¸€äº›ufwçš„ç¯å¢ƒè®¾å®šæ–‡ä»¶ï¼Œå¦‚ before.rulesã€after.rulesã€sysctl.confã€ufw.confï¼ŒåŠ for ip6 çš„ before6.rule åŠ after6.rulesã€‚<br>è¿™äº›æ–‡ä»¶ä¸€èˆ¬æŒ‰ç…§é»˜è®¤çš„è®¾ç½®è¿›è¡Œå°±okã€‚è‹¥å¼€å¯ufwä¹‹ åï¼Œ__&#x2F;etc&#x2F;ufw&#x2F;sysctl.conf__ä¼šè¦†ç›–é»˜è®¤çš„__&#x2F;etc&#x2F;sysctl.conf__æ–‡ä»¶ï¼Œè‹¥ä½ åŸæ¥çš„&#x2F;etc&#x2F;sysctl.confåšäº†ä¿® æ”¹ï¼Œå¯åŠ¨ufwåï¼Œè‹¥&#x2F;etc&#x2F;ufw&#x2F;sysctl.confä¸­æœ‰æ–°èµ‹å€¼ï¼Œåˆ™ä¼šè¦†ç›–&#x2F;etc&#x2F;sysctl.confçš„ï¼Œå¦åˆ™è¿˜ä»¥&#x2F;etc &#x2F;sysctl.confä¸ºå‡†ã€‚å½“ç„¶ä½ å¯ä»¥é€šè¿‡ä¿®æ”¹&#x2F;etc&#x2F;default&#x2F;ufwä¸­çš„â€œIPT_SYSCTL&#x3D;â€æ¡ç›®æ¥è®¾ç½®ä½¿ç”¨å“ªä¸ª sysctrl.conf.</p></li><li><p>&#x2F;var&#x2F;lib&#x2F;ufw&#x2F;user.rules è¿™ä¸ªæ–‡ä»¶ä¸­æ˜¯æˆ‘ä»¬è®¾ç½®çš„ä¸€äº›é˜²ç«å¢™è§„åˆ™ï¼Œæ‰“å¼€å¤§æ¦‚å°±èƒ½çœ‹æ˜ç™½ï¼Œæœ‰æ—¶æˆ‘ä»¬å¯ä»¥ç›´æ¥ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ï¼Œä¸ç”¨ä½¿ç”¨å‘½ä»¤æ¥è®¾å®šã€‚ä¿®æ”¹åè®°å¾—ufw reloadé‡å¯ufwä½¿å¾—æ–°è§„åˆ™ç”Ÿæ•ˆã€‚</p></li></ul><h2 id="0x01-å®‰è£…UFW"><a href="#0x01-å®‰è£…UFW" class="headerlink" title="0x01 å®‰è£…UFW"></a>0x01 å®‰è£…UFW</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install ufw</span><br></pre></td></tr></table></figure><h2 id="0x02-å¯ç”¨UFW"><a href="#0x02-å¯ç”¨UFW" class="headerlink" title="0x02 å¯ç”¨UFW"></a>0x02 å¯ç”¨UFW</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw enable</span><br><span class="line">sudo ufw default deny</span><br></pre></td></tr></table></figure><p>æ‰“å¼€ufwé˜²ç«å¢™ï¼Œå¹¶åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨å¼€å¯ã€‚</p><p>å…³é—­æ‰€æœ‰å¤–éƒ¨å¯¹æœ¬æœºçš„è®¿é—®ï¼Œä½†æœ¬æœºè®¿é—®å¤–éƒ¨æ­£å¸¸ã€‚</p><h2 id="0x03-è®¾ç½®è®¿é—®æ§åˆ¶ç­–ç•¥"><a href="#0x03-è®¾ç½®è®¿é—®æ§åˆ¶ç­–ç•¥" class="headerlink" title="0x03 è®¾ç½®è®¿é—®æ§åˆ¶ç­–ç•¥"></a>0x03 è®¾ç½®è®¿é—®æ§åˆ¶ç­–ç•¥</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw allow|deny [service]</span><br></pre></td></tr></table></figure><p>æ‰“å¼€æˆ–å…³é—­æŸä¸ªç«¯å£ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw allow smtp #å…è®¸æ‰€æœ‰çš„å¤–éƒ¨ipè®¿é—®æœ¬æœºçš„25/tcp(smtp)ç«¯å£</span><br><span class="line">sudo ufw allow 22/tcp #å…è®¸æ‰€æœ‰çš„å¤–éƒ¨ipè®¿é—®æœ¬æœºçš„22/tcp(ssh)ç«¯å£</span><br><span class="line">sudo ufw allow 53 #å…è®¸æ‰€æœ‰çš„å¤–éƒ¨ipè®¿é—®æœ¬æœºçš„53ç«¯å£(tcp/udp)</span><br><span class="line">sudo ufw allow proto udp 192.168.0.1 port 53 to 192.168.0.2 port 53</span><br><span class="line">sudo ufw deny smtp #ç¦æ­¢å¤–éƒ¨è®¿é—®smtpæœåŠ¡</span><br><span class="line">sudo ufw delete allow smtp #åˆ é™¤ä¸Šé¢å»ºç«‹çš„æŸæ¡è§„åˆ™</span><br></pre></td></tr></table></figure><p>ç»™æŸä¸€ipæ·»åŠ è§„åˆ™ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw allow from 192.168.1.100 #å…è®¸æ­¤ipè®¿é—®æ‰€æœ‰çš„æœ¬æœºç«¯å£</span><br><span class="line">sudo ufw delete allow from 192.168.1.100 #åˆ é™¤ä¸Šé¢çš„è§„åˆ™</span><br></pre></td></tr></table></figure><h2 id="0x04-æŸ¥çœ‹UFWé˜²ç«å¢™çŠ¶æ€"><a href="#0x04-æŸ¥çœ‹UFWé˜²ç«å¢™çŠ¶æ€" class="headerlink" title="0x04 æŸ¥çœ‹UFWé˜²ç«å¢™çŠ¶æ€"></a>0x04 æŸ¥çœ‹UFWé˜²ç«å¢™çŠ¶æ€</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw status</span><br></pre></td></tr></table></figure><h2 id="0x05-å¼€å¯-x2F-å…³é—­UFWé˜²ç«å¢™"><a href="#0x05-å¼€å¯-x2F-å…³é—­UFWé˜²ç«å¢™" class="headerlink" title="0x05 å¼€å¯&#x2F;å…³é—­UFWé˜²ç«å¢™"></a>0x05 å¼€å¯&#x2F;å…³é—­UFWé˜²ç«å¢™</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw enable|disable</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åç«¯ </tag>
            
            <tag> Linux </tag>
            
            <tag> ufw </tag>
            
            <tag> é˜²ç«å¢™ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BUUoj ä¹‹ RSA</title>
      <link href="/2021/04/12/710b737857f5-q1jun/"/>
      <url>/2021/04/12/710b737857f5-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="BUUOJ-rsa"><a href="#BUUOJ-rsa" class="headerlink" title="BUUOJ rsa"></a>BUUOJ rsa</h1><h2 id="0x01-é¢˜ç›®"><a href="#0x01-é¢˜ç›®" class="headerlink" title="0x01 é¢˜ç›®"></a>0x01 é¢˜ç›®</h2><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20220313201840503.png" alt="image-20220313201840503"></p><h2 id="0x02-RSAéå¯¹ç§°åŠ å¯†ç®—æ³•"><a href="#0x02-RSAéå¯¹ç§°åŠ å¯†ç®—æ³•" class="headerlink" title="0x02 RSAéå¯¹ç§°åŠ å¯†ç®—æ³•"></a>0x02 RSAéå¯¹ç§°åŠ å¯†ç®—æ³•</h2><p><strong>å…¬é’¥ä¸ç§é’¥çš„äº§ç”Ÿ</strong> ï¼š</p><ol><li>éšæœºé€‰æ‹©ä¸¤ä¸ªä¸åŒå¤§è´¨æ•° <code>p </code>å’Œ<code> q</code>ï¼Œè®¡ç®— <code>N=pÃ—q</code></li><li>æ ¹æ®æ¬§æ‹‰å‡½æ•°ï¼Œæ±‚å¾—<code> Ï†(N)=Ï†(p)Ï†(q)=(pâˆ’1)(qâˆ’1)</code></li><li>é€‰æ‹©ä¸€ä¸ªå°äº <code>Ï†(N)</code> çš„æ•´æ•° <code>e</code>ï¼Œä½¿ <code>e</code> å’Œ <code>Ï†(N)</code> äº’è´¨ã€‚å¹¶æ±‚å¾— <code>e</code> å…³äº<code> Ï†(N)</code> çš„æ¨¡åå…ƒç´ ï¼Œå‘½åä¸º <code>d</code>ï¼Œæœ‰ <code>edâ‰¡1(modÏ†(N))</code></li><li>å°† <code>p</code> å’Œ <code>q</code>çš„è®°å½•é”€æ¯</li></ol><p>æ­¤æ—¶ï¼Œ<code>(N,e)</code>æ˜¯å…¬é’¥ï¼Œ<code>(N,d)</code> æ˜¯ç§é’¥ã€‚</p><h3 id="0x0201-æ¶ˆæ¯åŠ å¯†"><a href="#0x0201-æ¶ˆæ¯åŠ å¯†" class="headerlink" title="0x0201 æ¶ˆæ¯åŠ å¯†"></a>0x0201 æ¶ˆæ¯åŠ å¯†</h3><p>é¦–å…ˆéœ€è¦å°†æ¶ˆæ¯ ä»¥ä¸€ä¸ªåŒæ–¹çº¦å®šå¥½çš„æ ¼å¼è½¬åŒ–ä¸ºä¸€ä¸ªå°äº<code> N</code>ï¼Œä¸”ä¸ <code>N </code>äº’è´¨çš„æ•´æ•° <code>m</code>ã€‚å¦‚æœæ¶ˆæ¯å¤ªé•¿ï¼Œå¯ä»¥å°†æ¶ˆæ¯åˆ†ä¸ºå‡ æ®µï¼Œè¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„å—åŠ å¯†ï¼Œåå¯¹äºæ¯ä¸€éƒ¨åˆ†åˆ©ç”¨å¦‚ä¸‹å…¬å¼åŠ å¯†ï¼š</p><p><strong>m^eâ‰¡c(modN)</strong></p><h3 id="0x0202-æ¶ˆæ¯è§£å¯†"><a href="#0x0202-æ¶ˆæ¯è§£å¯†" class="headerlink" title="0x0202 æ¶ˆæ¯è§£å¯†"></a>0x0202 æ¶ˆæ¯è§£å¯†</h3><p>åˆ©ç”¨å¯†é’¥ <code>d</code> è¿›è¡Œè§£å¯†ã€‚</p><p><strong>c^dâ‰¡m(modN)</strong></p><h2 id="0x03-è§£å¯†è„šæœ¬ï¼š"><a href="#0x03-è§£å¯†è„šæœ¬ï¼š" class="headerlink" title="0x03 è§£å¯†è„šæœ¬ï¼š"></a>0x03 è§£å¯†è„šæœ¬ï¼š</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Python <span class="number">3.10</span><span class="number">.2</span> (main, Feb  <span class="number">2</span> <span class="number">2022</span>, 05:<span class="number">51</span>:<span class="number">25</span>) [Clang <span class="number">13.0</span><span class="number">.0</span> (clang-<span class="number">1300.0</span><span class="number">.29</span><span class="number">.3</span>)] on darwin</span><br><span class="line"><span class="type">Type</span> <span class="string">&quot;help&quot;</span>, <span class="string">&quot;copyright&quot;</span>, <span class="string">&quot;credits&quot;</span> <span class="keyword">or</span> <span class="string">&quot;license&quot;</span> <span class="keyword">for</span> more information.</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> gmpy2 <span class="keyword">import</span> *</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p = <span class="number">473398607161</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>q = <span class="number">4511491</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>e = <span class="number">17</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>d = gmpy2.invert(e,(p-<span class="number">1</span>)*(q-<span class="number">1</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(d)</span><br><span class="line"><span class="number">125631357777427553</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå®‰å…¨ </category>
          
          <category> Crypto </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå®‰å…¨ </tag>
            
            <tag> Python </tag>
            
            <tag> RSA </tag>
            
            <tag> Crypto </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¯¾å ‚Linuxå®éªŒ4</title>
      <link href="/2021/04/10/952a4d8eea3e-q1jun/"/>
      <url>/2021/04/10/952a4d8eea3e-q1jun/</url>
      
        <content type="html"><![CDATA[<p>(1)æŸ¥çœ‹æœ¬æœºIPåœ°å€ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211202165106311.png" alt="image-20211202165106311"></p><p>æœ¬æœºIPåœ°å€ä¸ºï¼š10.211.55.10</p><p>(2)æµ‹è¯•Apacheè½¯ä»¶æ˜¯å¦å®‰è£…æˆåŠŸã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211202165353569.png" alt="image-20211202165353569"></p><p>é€šè¿‡<code>systemctl status apache2</code> æŸ¥çœ‹apacheè¿è¡Œæƒ…å†µï¼Œå®‰è£…å®Œæˆ</p><p>(3) å°†Apacheçš„æ€”å¬ç«¯å£æ”¹ä¸º8080ã€‚</p><p>1.è¿›å…¥apacheçš„é…ç½®æ–‡ä»¶ç›®å½•:<code>/etc/apache2/</code>,åœ¨ports.conf æ–‡ä»¶ä¸­ä¿®æ”¹ä¾¦å¬ç«¯å£ä¸º8080:</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211202165728936.png" alt="image-20211202165728936"></p><ol start="2"><li><p>é‡å¯apacheï¼Œå‘½ä»¤ï¼š<code>systemctl reload apache2</code>,åœ¨æµè§ˆå™¨è¾“å…¥10.211.55.10:8080è®¿é—®é¡µé¢<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211202165846969.png" alt="image-20211202165846969"></p><p>ä¿®æ”¹ç«¯å£8080æˆåŠŸã€‚</p></li></ol><p>(4) å°†æ–‡æ¡£æ ¹ç›®å½•è®¾ç½®ä¸º&#x2F;web, é»˜è®¤é¦–é¡µæ–‡ä»¶ä½¿ç”¨default.htmï¼Œå†…å®¹ä¸ºâ€Welcome to $USERNAMEâ€™s world.â€ ã€‚</p><ol><li>æ–°å»ºç›®å½•&#x2F;webï¼š<code>sudo mkdir /web</code></li><li>è®¾ç½®ç›®å½•æ‰€æœ‰è€…: <code>sudo chown -R www-data: /web</code></li><li>è¿›å…¥apacheé…ç½®ç›®å½•ï¼š<code>cd /etc/apache2/</code>ï¼Œä¿®æ”¹apache.confä¸­çš„ï¼š<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211202170207486.png" alt="image-20211202170207486"><br>æ”¹ä¸ºï¼š<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211202170228153.png" alt="image-20211202170228153"></li><li>è¿›å…¥site-availableæ–‡ä»¶å¤¹ä¸‹ï¼Œå°†é»˜è®¤æ–‡ä»¶<code>000-default.conf</code> åˆ é™¤æˆ–æ”¹åä¸º<code>000-default.conf.bak</code>,ç„¶åæ–°å»ºæ–‡ä»¶ï¼š<br><code>touch web.conf</code></li><li>ç¼–è¾‘web.confæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š<code>vim web.conf</code><br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211202170613248.png" alt="image-20211202170613248"></li></ol><p>6.åœ¨é»˜è®¤ç›®å½•&#x2F;webä¸‹æ–°å»ºæ–‡ä»¶default.htmå¹¶ä¸”è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo touch default.htm</span><br><span class="line">vim default.htm</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211202171059087.png" alt="image-20211202171059087"></p><ol start="7"><li>ä¿å­˜ä¹‹åï¼Œè¾“å…¥ <code>systemctl reload apache2</code>é‡å¯apacheæœåŠ¡åŠ è½½æ•°æ®</li><li>åœ¨æµè§ˆå™¨è¾“å…¥ï¼š10.211.55.10:8080 å›è½¦ï¼š<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211202171314518.png" alt="image-20211202171314518"></li></ol><p>ã€å®éªŒå°ç»“ã€‘ï¼š</p><p>â€‹    è¿™æ¬¡å®éªŒé€šè¿‡æ­å»ºApacheçš„webç¯å¢ƒï¼Œè®©æˆ‘ä½“ä¼šåˆ°äº†linuxç³»ç»Ÿæ­å»ºwebç¯å¢ƒçš„ä¾¿æ·ï¼Œåªéœ€è¦é€šè¿‡åŒ…ç®¡ç†å™¨Apt-getå°±èƒ½ç®€å•çš„å®‰è£…å¥½apacheçš„ç¯å¢ƒï¼Œåªéœ€è¦è‡ªå·±ç¨åŠ é…ç½®å°±èƒ½è®©å®ƒè¿è¡Œèµ·æ¥ï¼Œå…¶ä¸­è¦æ³¨æ„é…ç½®æ–‡ä»¶â€œ*.confâ€çš„è¯­æ³•æ˜¯å¦æ­£ç¡®ï¼Œä»¥åŠæ›´æ”¹äº†é»˜è®¤ç›®å½•ä¹‹åçš„æƒé™é—®é¢˜ï¼ŒLinuxæ˜¯ä¸€ä¸ªä¸¥è°¨çš„ç³»ç»Ÿï¼Œå¦‚æœä¸ç¨åŠ æ³¨æ„ å°†ä¼šé…¿æˆå¤§é”™ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åç«¯ </tag>
            
            <tag> Linux </tag>
            
            <tag> è¯¾å ‚ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¯¾å ‚Linuxå®éªŒ3</title>
      <link href="/2021/04/07/bf7be5723f6b-q1jun/"/>
      <url>/2021/04/07/bf7be5723f6b-q1jun/</url>
      
        <content type="html"><![CDATA[<p>æ–‡ä»¶å’Œç›®å½•çš„è®¿é—®æƒé™å…³ç³»åˆ°æ•´ä¸ªLinuxæ“ä½œç³»ç»Ÿçš„å®‰å…¨æ€§ï¼Œä½œä¸ºä¸€ä¸ªåˆæ ¼çš„Linux æ“ä½œç³»ç»Ÿç®¡ç†å‘˜ï¼Œå¿…é¡»æ·±åˆ»ç†è§£Linuxæ–‡ä»¶æƒé™çš„åŸºæœ¬æ¦‚å¿µå¹¶èƒ½å¤Ÿç†Ÿç»ƒåœ°è¿›è¡Œæƒé™è®¾ç½®ï¼ŒåŒæ—¶å¯¹ç”¨æˆ·å’Œç»„ç¾¤è¿›è¡Œç†Ÿç»ƒæ“ä½œç®¡ç†ã€‚</p><p>â€(1) å»ºç«‹ç”¨æˆ·user01ã€user02, è®¾ç½®ç”¨æˆ·å¯†ç ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121111831645.png" alt="image-20211121111831645"></p><p>â€(2) å°†æ–°å»ºç”¨æˆ·user01 ã€user02 åˆ†åˆ«åŠ å…¥stu01 ã€stu02 ç»„ç¾¤ä¸­ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121112321937.png" alt="image-20211121112321937"></p><p>â€(3) ä½¿ç”¨ su å‘½ä»¤è¿›è¡Œç”¨æˆ·ç™»å½•åˆ‡æ¢ï¼Œåˆ‡æ¢åˆ°rootç”¨æˆ·ã€‚â€</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121112501563.png" alt="image-20211121112501563"></p><p>â€(4) åœ¨çš„&#x2F;tmpç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶test01.txt å’Œç›®å½•test-dir ï¼Œå¹¶å°†å…¶æ‰€æœ‰è€…å’Œå±ç»„åˆ†åˆ«è®¾ç½®ä¸ºuser01å’Œstu01 ã€‚</p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121112916335.png" alt="image-20211121112916335"></p><p>â€(5) å°†æ–‡ä»¶test01.txtçš„æƒé™ä¿®æ”¹ä¸ºä»¥ä¸‹ä¸¤ç§ã€‚å¯¹äºæ¯ç§æƒé™ï¼Œåˆ†åˆ«åˆ‡æ¢åˆ°user01å’Œuser02ç”¨æˆ·ï¼ŒéªŒè¯è¿™ä¸¤ä¸ªç”¨æˆ·èƒ½å¦å¯¹test01.txtè¿›è¡Œè¯»å–ã€å†™å…¥ã€é‡å‘½åå’Œåˆ é™¤æ“ä½œã€‚</p><p>â€</p><p>â€â‘  -rwxrw-rw-ï¼ˆ766ï¼‰</p><p><strong>user01:</strong></p><ul><li>å†™<img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121120421189.png" alt="image-20211121120421189"></li><li>è¯»<img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121120437137.png" alt="image-20211121120437137"></li><li>é‡å‘½å<img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121120511304.png" alt="image-20211121120511304"></li><li>åˆ é™¤<img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121120528137.png" alt="image-20211121120528137"></li></ul><p><strong>user02:</strong></p><ul><li>å†™<img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121121206247.png" alt="image-20211121121206247"></li><li>è¯»<img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121121219716.png" alt="image-20211121121219716"></li><li>é‡å‘½å<img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121121239683.png" alt="image-20211121121239683"></li><li>åˆ é™¤<img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121121253721.png" alt="image-20211121121253721"></li></ul><p>â€â‘¡ -rwxrâ€“râ€“ï¼ˆ744ï¼‰</p><p><strong>user01:</strong></p><ul><li>å†™<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121210955660.png" alt="image-20211121210955660"></li><li>è¯»<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121211008780.png" alt="image-20211121211008780"></li><li>é‡å‘½å<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121211023700.png" alt="image-20211121211023700"></li><li>åˆ é™¤<br>â€<img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121211036695.png" alt="image-20211121211036695"></li></ul><p><strong>user02:</strong></p><ul><li>å†™<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121211355261.png" alt="image-20211121211355261"></li><li>è¯»<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121211415873.png" alt="image-20211121211415873"></li><li>é‡å‘½å<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121211450041.png" alt="image-20211121211450041"></li><li>åˆ é™¤â€<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121211622501.png" alt="image-20211121211622501"></li></ul><p>â€(6) å°†ç›®å½•test-dirçš„æƒé™ä¿®æ”¹ä¸ºä»¥ä¸‹ä¸¤ç§ã€‚å¯¹äºæ¯ç§æƒé™ï¼Œåˆ†åˆ«åˆ‡æ¢åˆ°user01å’Œuser02ç”¨æˆ·ï¼ŒéªŒè¯è¿™ä¸¤ä¸ªç”¨æˆ·èƒ½å¦è¿›å…¥ç›®å½•test-dirï¼Œå¹¶åœ¨ç›®å½•test-dirä¸‹è¿›è¡Œæ–°å»ºã€åˆ é™¤ã€é‡å‘½åã€ä¿®æ”¹æ–‡ä»¶å†…å®¹ç­‰ç›¸å…³æ“ä½œã€‚</p><p>â€</p><p>â€â‘  -rwxrwxrwxï¼ˆ777ï¼‰</p><p><strong>user01:</strong></p><ul><li><p>è¿›å…¥ç›®å½•test-dir<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121212550287.png" alt="image-20211121212550287"></p></li><li><p>æ–°å»º<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121212650188.png" alt="image-20211121212650188"></p></li><li><p>åˆ é™¤<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121212713265.png" alt="image-20211121212713265"></p></li><li><p>é‡å‘½å<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121212736668.png" alt="image-20211121212736668"></p></li><li><p>ä¿®æ”¹æ–‡ä»¶å†…å®¹â€<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121213029119.png" alt="image-20211121213029119"></p></li></ul><p>â€<strong>user02:</strong></p><ul><li><p>è¿›å…¥ç›®å½•test-dir<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121213318003.png" alt="image-20211121213318003"></p></li><li><p>æ–°å»º<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121213359504.png" alt="image-20211121213359504"></p></li><li><p>åˆ é™¤<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121213425566.png" alt="image-20211121213425566"></p></li><li><p>é‡å‘½å<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121213511150.png" alt="image-20211121213511150"></p></li><li><p>ä¿®æ”¹æ–‡ä»¶å†…å®¹â€<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121213547619.png" alt="image-20211121213547619"></p></li></ul><p>â‘¡ -rwxr-xr-xï¼ˆ755ï¼‰</p><p><strong>user01:</strong></p><ul><li><p>è¿›å…¥ç›®å½•test-dir<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121213936075.png" alt="image-20211121213936075"></p></li><li><p>æ–°å»º<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121214008348.png" alt="image-20211121214008348"></p></li><li><p>åˆ é™¤<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121214124418.png" alt="image-20211121214124418"></p></li><li><p>é‡å‘½å<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121214034342.png" alt="image-20211121214034342"></p></li><li><p>ä¿®æ”¹æ–‡ä»¶å†…å®¹â€<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121214104303.png" alt="image-20211121214104303"></p></li></ul><p>â€<strong>user02:</strong></p><ul><li><p>è¿›å…¥ç›®å½•test-dir<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121214300374.png" alt="image-20211121214300374"></p></li><li><p>æ–°å»º<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121214317979.png" alt="image-20211121214317979"></p></li><li><p>åˆ é™¤<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121214558711.png" alt="image-20211121214558711"></p></li><li><p>é‡å‘½å<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121214616117.png" alt="image-20211121214616117"></p></li><li><p>ä¿®æ”¹æ–‡ä»¶å†…å®¹â€<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211121214638137.png" alt="image-20211121214638137"></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> åç«¯å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åç«¯ </tag>
            
            <tag> Linux </tag>
            
            <tag> è¯¾å ‚ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¯¾å ‚Linuxå®éªŒ2</title>
      <link href="/2021/04/06/1462ba96bbf9-q1jun/"/>
      <url>/2021/04/06/1462ba96bbf9-q1jun/</url>
      
        <content type="html"><![CDATA[<p><strong>Shellè„šæœ¬ä»£ç ï¼š</strong></p><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/384f473cd928480bbb8f48547ebcfbbd-20220316152052977.png" alt="img"></p><p><strong>ã€è¿è¡Œæˆªå›¾ã€‘ï¼š</strong></p><p><strong>â€ŒA: åˆ›å»ºå­ç›®å½•å¹¶å¤åˆ¶æ–‡ä»¶(åœ¨&#x2F;tmpä¸‹åˆ›å»ºå­ç›®å½•tï¼Œå¹¶å°†&#x2F;proc&#x2F;cpuinfoæ–‡ä»¶æ‹·è´è¿›å»)</strong></p><p><strong>â€<img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/2f49450c7f13415bad0293c79d18e28e-20220316152053069.png" alt="img"></strong></p><p><strong>â€ŒB: æ–‡ä»¶æƒé™æµ‹è¯•(æµ‹è¯•å¯¹&#x2F;proc&#x2F;cpuinfoæ˜¯å¦æœ‰rã€wã€xçš„æƒé™ï¼Œåˆ†åˆ«è¾“å‡ºæµ‹è¯•ç»“æœ)</strong></p><p><strong>â€<img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/5bdbc81789984384b0646b04c06e688e-20220316152053149.png" alt="img"></strong></p><p><strong>â€ŒC: æ–‡ä»¶å­—ç¬¦è½¬æ¢(å°†&#x2F;proc&#x2F;cpuinfoæ–‡ä»¶ä¸­çš„å°å†™å­—ç¬¦è½¬æ¢ä¸ºå¤§å†™å¹¶è¾“å‡º)</strong></p><p><strong>â€<img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/26713d403dba4ed1a4ddcdab695c8f2c-20220316152053550.png" alt="img"></strong></p><p><strong>â€ŒD: å­ç›®å½•æ€»æ•°ç»Ÿè®¡(ç»Ÿè®¡è‡ªå·±ä¸»ç›®å½•ä¸‹å­—ç›®å½•çš„æ•°é‡å¹¶è¾“å‡º)</strong></p><p><strong>â€<img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/49c9199fdb594ee5b07ebb7685924577-20220316152053663.png" alt="img"></strong></p><p><strong>â€ŒE: æ–‡æœ¬æ–‡ä»¶è¡Œæ•°ç»Ÿè®¡(ç»Ÿè®¡&#x2F;proc&#x2F;cpuinfoæ–‡ä»¶ä¸­ç©ºè¡Œçš„è¡Œæ•°å¹¶è¾“å‡º)</strong></p><p><strong>â€<img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/6232d0da3a85432bbec14f7f7fed4a0a-20220316152053805.png" alt="img"></strong></p><p><strong>â€ŒQ: é€€å‡ºç³»ç»Ÿ</strong></p><p><strong>â€<img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/ce4cb5573f974118a859b64fa0945729-20220316152054464.png" alt="img"></strong></p><p><strong>ã€å®éªŒå°ç»“ã€‘ï¼š</strong></p><p><strong>1.åœ¨bashè„šæœ¬æ–‡ä»¶ä¸­å¯ä»¥é€šè¿‡echoæ¥è¾“å‡ºï¼Œå…¶ä¸­è¢«åå¼•å·åŒ…æ‹¬çš„æŒ‡ä»¤å¯ä»¥è¾“å‡ºæŒ‡ä»¤çš„ç»“æœã€‚</strong></p><p><strong>2.é€šè¿‡echoå‡½æ•°çš„-eå‚æ•°å¯ä»¥è®©echo****è¯†åˆ«è¾“å‡ºå†…å®¹ä¸­çš„è½¬ä¹‰å­—ç¬¦ã€‚</strong></p><p><strong>3.é€šè¿‡whileå¾ªç¯åŠ ä¸Šread caseå¯ä»¥å®ç°èœå•åŠŸèƒ½ã€‚</strong></p><p><strong>4.ä½¿ç”¨$(date+%Yå¹´%mæœˆ%dæ—¥)å¯ä»¥å®ç°DATEå˜é‡çš„æ ¼å¼åŒ–è¾“å‡ºã€‚</strong></p><p><strong>5.é€šè¿‡if test -r&#x2F;w&#x2F;x fileå¯ä»¥æµ‹è¯•æ–‡ä»¶çš„ è¯»&#x2F;å†™&#x2F;æ‰§è¡Œ æƒé™ã€‚</strong></p><p><strong>6.é€šè¿‡å¯¹è¾“å‡ºå†…å®¹ä½¿ç”¨tr a-z A-ZæŒ‡ä»¤å¯ä»¥å°†å†…å®¹ä¸­çš„å°å†™å…¨éƒ¨è½¬æ¢ä¸ºå¤§å†™å­—æ¯ã€‚</strong></p><p><strong>7.é€šè¿‡â€œ^dâ€å¯ä»¥åŒ¹é…æ¯è¡Œé¦–å­—æ¯ä¸ºdçš„è¡Œï¼Œä»è€Œåˆ©ç”¨ls -lå‘½ä»¤çš„è¾“å‡ºå’Œwc -lå‘½ä»¤è¿›è¡Œç»Ÿè®¡å½“å‰å­ç›®å½•çš„æ•°é‡ã€‚</strong></p><p><strong>8.é€šè¿‡find -type då¯ä»¥æ£€ç´¢æ–‡ä»¶å†…æ‰€æœ‰å­ç›®å½•ä¸­çš„æ–‡ä»¶å¤¹æ•°é‡ã€‚</strong></p><p><strong>9.é€šè¿‡â€œ^$â€å¯ä»¥åŒ¹é…æ–‡ä»¶ä¸­çš„ç©ºè¡Œï¼Œå†é€šè¿‡wc -læ¥ç»Ÿè®¡æ–‡æœ¬æ–‡ä»¶ç©ºè¡Œçš„æ•°é‡ã€‚</strong></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åç«¯ </tag>
            
            <tag> Linux </tag>
            
            <tag> è¯¾å ‚ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nmap-æ¸—é€ç«¯å£æ‰«æå·¥å…·çš„ä½¿ç”¨æ•™ç¨‹</title>
      <link href="/2021/03/21/2a15ab601f40-q1jun/"/>
      <url>/2021/03/21/2a15ab601f40-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="Nmap-æ¸—é€ç«¯å£æ‰«æå·¥å…·"><a href="#Nmap-æ¸—é€ç«¯å£æ‰«æå·¥å…·" class="headerlink" title="Nmap-æ¸—é€ç«¯å£æ‰«æå·¥å…·"></a>Nmap-æ¸—é€ç«¯å£æ‰«æå·¥å…·</h1><p><strong>Nmap</strong>æ˜¯ä¸€æ¬¾ç½‘ç»œæ‰«æå’Œä¸»æœºæ£€æµ‹çš„éå¸¸æœ‰ç”¨çš„å·¥å…·ã€‚<br>Nmapæ˜¯ä¸å±€é™äºä»…ä»…æ”¶é›†ä¿¡æ¯å’Œæšä¸¾ï¼ŒåŒæ—¶å¯ä»¥ç”¨æ¥ä½œä¸ºä¸€ä¸ªæ¼æ´æ¢æµ‹å™¨æˆ–å®‰å…¨æ‰«æå™¨ã€‚å®ƒå¯ä»¥é€‚ç”¨äºwinodws,linux,macç­‰æ“ä½œç³»ç»Ÿã€‚Nmapæ˜¯ä¸€æ¬¾éå¸¸å¼ºå¤§çš„å®ç”¨å·¥å…·,å¯ç”¨äºï¼š</p><ul><li>æ£€æµ‹æ´»åœ¨ç½‘ç»œä¸Šçš„ä¸»æœºï¼ˆä¸»æœºå‘ç°ï¼‰</li><li>æ£€æµ‹ä¸»æœºä¸Šå¼€æ”¾çš„ç«¯å£ï¼ˆç«¯å£å‘ç°æˆ–æšä¸¾ï¼‰</li><li>æ£€æµ‹åˆ°ç›¸åº”çš„ç«¯å£ï¼ˆæœåŠ¡å‘ç°ï¼‰çš„è½¯ä»¶å’Œç‰ˆæœ¬</li><li>æ£€æµ‹æ“ä½œç³»ç»Ÿï¼Œç¡¬ä»¶åœ°å€ï¼Œä»¥åŠè½¯ä»¶ç‰ˆæœ¬</li><li>æ£€æµ‹è„†å¼±æ€§çš„æ¼æ´ï¼ˆNmapçš„è„šæœ¬ï¼‰</li></ul><p>mapæ˜¯ä¸€ä¸ªéå¸¸æ™®éçš„å·¥å…·ï¼Œå®ƒæœ‰å‘½ä»¤è¡Œç•Œé¢å’Œå›¾å½¢ç”¨æˆ·ç•Œé¢ã€‚è¿™é‡Œä¸»è¦ä»‹ç»åŒ…æ‹¬ä»¥ä¸‹æ–¹é¢çš„å†…å®¹:</p><ul><li>ä»‹ç»Nmap</li><li>æ‰«æä¸­çš„é‡è¦å‚æ•°</li><li>æ“ä½œç³»ç»Ÿæ£€æµ‹</li></ul><blockquote><p>Nmapä½¿ç”¨ä¸åŒçš„æŠ€æœ¯æ¥æ‰§è¡Œæ‰«æï¼ŒåŒ…æ‹¬ï¼šTCPçš„connectï¼ˆï¼‰æ‰«æï¼ŒTCPåå‘çš„identæ‰«æï¼ŒFTPåå¼¹æ‰«æç­‰ã€‚æ‰€æœ‰è¿™äº›æ‰«æçš„ç±»å‹æœ‰è‡ªå·±çš„ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å°†è®¨è®ºè¿™äº›é—®é¢˜ã€‚</p></blockquote><h2 id="ç”¨æ³•ä¸¾ä¾‹ï¼š"><a href="#ç”¨æ³•ä¸¾ä¾‹ï¼š" class="headerlink" title="ç”¨æ³•ä¸¾ä¾‹ï¼š"></a>ç”¨æ³•ä¸¾ä¾‹ï¼š</h2><p>Nmapçš„ä½¿ç”¨å–å†³äºç›®æ ‡ä¸»æœº,å› ä¸ºæœ‰ä¸€ä¸ªç®€å•çš„ï¼ˆåŸºæœ¬ï¼‰æ‰«æå’Œé¢„å…ˆæ‰«æä¹‹é—´çš„å·®å¼‚ã€‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸€äº›å…ˆè¿›çš„æŠ€æœ¯æ¥ç»•è¿‡é˜²ç«å¢™å’Œå…¥ä¾µæ£€æµ‹&#x2F;é˜²å¾¡ç³»ç»Ÿï¼Œä»¥è·å¾—æ­£ç¡®çš„ç»“æœã€‚ä¸‹é¢æ˜¯ä¸€äº›åŸºæœ¬çš„å‘½ä»¤å’Œå®ƒä»¬çš„ç”¨æ³•çš„ä¾‹å­ï¼š<br> æ‰«æå•ä¸€çš„ä¸€ä¸ªä¸»æœºï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">nmap nxadmin.com</span><br><span class="line">nmap 192.168.1.2</span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">æ‰«ææ•´ä¸ªå­ç½‘,å‘½ä»¤å¦‚ä¸‹:</span></span><br><span class="line">nmap 192.168.1.1/24</span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">æ‰«æå¤šä¸ªç›®æ ‡,å‘½ä»¤å¦‚ä¸‹ï¼š</span></span><br><span class="line">nmap 192.168.1.2 192.168.1.5</span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">æ‰«æä¸€ä¸ªèŒƒå›´å†…çš„ç›®æ ‡,å¦‚ä¸‹ï¼š</span></span><br><span class="line">nmap 192.168.1.1-100 #(**æ‰«æIPåœ°å€ä¸º192.168.1.1-192.168.1.100å†…çš„æ‰€æœ‰ä¸»æœº)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">å¦‚æœä½ æœ‰ä¸€ä¸ªipåœ°å€åˆ—è¡¨ï¼Œå°†è¿™ä¸ªä¿å­˜ä¸ºä¸€ä¸ªtxtæ–‡ä»¶ï¼Œå’Œnampåœ¨åŒä¸€ç›®å½•ä¸‹,æ‰«æè¿™ä¸ªtxtå†…çš„æ‰€æœ‰ä¸»æœºï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</span></span><br><span class="line"></span><br><span class="line">nmap -iL target.txt</span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">å¦‚æœä½ æƒ³çœ‹åˆ°ä½ æ‰«æçš„æ‰€æœ‰ä¸»æœºçš„åˆ—è¡¨ï¼Œç”¨ä»¥ä¸‹å‘½ä»¤:</span></span><br><span class="line">nmap -sL 192.168.1.1/24</span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">æ‰«æé™¤è¿‡æŸä¸€ä¸ªipå¤–çš„æ‰€æœ‰å­ç½‘ä¸»æœº,å‘½ä»¤ï¼š</span></span><br><span class="line">nmap 192.168.1.1/24 -exclude 192.168.1.1</span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">æ‰«æé™¤è¿‡æŸä¸€ä¸ªæ–‡ä»¶ä¸­çš„ipå¤–çš„å­ç½‘ä¸»æœºå‘½ä»¤</span></span><br><span class="line">nmap 192.168.1.1/24 -exclude file xxx.txt # (xxx.txtä¸­çš„æ–‡ä»¶å°†ä¼šä»æ‰«æçš„ä¸»æœºä¸­æ’é™¤)</span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">æ‰«æç‰¹å®šä¸»æœºä¸Šçš„80,21,23ç«¯å£,å‘½ä»¤å¦‚ä¸‹</span></span><br><span class="line">nmap -p80,21,23 192.168.1.1</span><br></pre></td></tr></table></figure><p><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211119194950001.png" alt="image-20211119194950001"></p><h2 id="ä»‹ç»Nmapï¼š"><a href="#ä»‹ç»Nmapï¼š" class="headerlink" title="ä»‹ç»Nmapï¼š"></a>ä»‹ç»Nmapï¼š</h2><p>ä»ä¸Šé¢æˆ‘ä»¬å·²ç»äº†è§£äº†Nmapçš„åŸºç¡€çŸ¥è¯†ï¼Œä¸‹é¢æˆ‘ä»¬æ·±å…¥çš„æ¢è®¨ä¸€ä¸‹Nmapçš„æ‰«ææŠ€æœ¯ <strong>Tcp SYN Scan (sS)</strong><br> è¿™æ˜¯ä¸€ä¸ªåŸºæœ¬çš„æ‰«ææ–¹å¼,å®ƒè¢«ç§°ä¸ºåŠå¼€æ”¾æ‰«æï¼Œå› ä¸ºè¿™ç§æŠ€æœ¯ä½¿å¾—Nmapä¸éœ€è¦é€šè¿‡å®Œæ•´çš„æ¡æ‰‹ï¼Œå°±èƒ½è·å¾—è¿œç¨‹ä¸»æœºçš„ä¿¡æ¯ã€‚Nmapå‘é€SYNåŒ…åˆ°è¿œç¨‹ä¸»æœºï¼Œä½†æ˜¯å®ƒä¸ä¼šäº§ç”Ÿä»»ä½•ä¼šè¯.å› æ­¤ä¸ä¼šåœ¨ç›®æ ‡ä¸»æœºä¸Šäº§ç”Ÿä»»ä½•æ—¥å¿—è®°å½•,å› ä¸ºæ²¡æœ‰å½¢æˆä¼šè¯ã€‚è¿™ä¸ªå°±æ˜¯SYNæ‰«æçš„ä¼˜åŠ¿.<br> å¦‚æœNmapå‘½ä»¤ä¸­æ²¡æœ‰æŒ‡å‡ºæ‰«æç±»å‹,é»˜è®¤çš„å°±æ˜¯Tcp SYN.ä½†æ˜¯å®ƒéœ€è¦root&#x2F;administratoræƒé™.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sS 192.168.1.1</span><br></pre></td></tr></table></figure><p><strong>Tcp connect() scan(sT)</strong><br> å¦‚æœä¸é€‰æ‹©SYNæ‰«æ,TCP connect()æ‰«æå°±æ˜¯é»˜è®¤çš„æ‰«ææ¨¡å¼.ä¸åŒäºTcp SYNæ‰«æ,Tcp connect()æ‰«æéœ€è¦å®Œæˆä¸‰æ¬¡æ¡æ‰‹,å¹¶ä¸”è¦æ±‚è°ƒç”¨ç³»ç»Ÿçš„connect().Tcp connect()æ‰«ææŠ€æœ¯åªé€‚ç”¨äºæ‰¾å‡ºTCPå’ŒUDPç«¯å£.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sT 192.168.1.1</span><br></pre></td></tr></table></figure><p><strong>Udp scan(sU)</strong><br> é¡¾åæ€ä¹‰,è¿™ç§æ‰«ææŠ€æœ¯ç”¨æ¥å¯»æ‰¾ç›®æ ‡ä¸»æœºæ‰“å¼€çš„UDPç«¯å£.å®ƒä¸éœ€è¦å‘é€ä»»ä½•çš„SYNåŒ…ï¼Œå› ä¸ºè¿™ç§æŠ€æœ¯æ˜¯é’ˆå¯¹UDPç«¯å£çš„ã€‚UDPæ‰«æå‘é€UDPæ•° æ®åŒ…åˆ°ç›®æ ‡ä¸»æœºï¼Œå¹¶ç­‰å¾…å“åº”,å¦‚æœè¿”å›ICMPä¸å¯è¾¾çš„é”™è¯¯æ¶ˆæ¯ï¼Œè¯´æ˜ç«¯å£æ˜¯å…³é—­çš„ï¼Œå¦‚æœå¾—åˆ°æ­£ç¡®çš„é€‚å½“çš„å›åº”ï¼Œè¯´æ˜ç«¯å£æ˜¯å¼€æ”¾çš„.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sU 192.168.1.1</span><br></pre></td></tr></table></figure><p> <strong>FIN scan (sF)</strong><br> æœ‰æ—¶å€™Tcp SYNæ‰«æä¸æ˜¯æœ€ä½³çš„æ‰«ææ¨¡å¼,å› ä¸ºæœ‰é˜²ç«å¢™çš„å­˜åœ¨.ç›®æ ‡ä¸»æœºæœ‰æ—¶å€™å¯èƒ½æœ‰IDSå’ŒIPSç³»ç»Ÿçš„å­˜åœ¨,é˜²ç«å¢™ä¼šé˜»æ­¢æ‰SYNæ•°æ®åŒ…ã€‚å‘é€ä¸€ä¸ªè®¾ç½®äº†FINæ ‡å¿—çš„æ•°æ®åŒ…å¹¶ä¸éœ€è¦å®ŒæˆTCPçš„æ¡æ‰‹.</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root@bt:~# nmap -sF 192.168.1.8**</span><br><span class="line">Starting Nmap 5.51 at 2012-07-08 19:21 PKT</span><br><span class="line">Nmap scan report for 192.168.1.8</span><br><span class="line">Host is up (0.000026s latency).</span><br><span class="line">Not shown: 999 closed ports</span><br><span class="line">PORT STATE SERVICE</span><br><span class="line">111/tcp open|filtered rpcbind</span><br></pre></td></tr></table></figure><p> FINæ‰«æä¹Ÿä¸ä¼šåœ¨ç›®æ ‡ä¸»æœºä¸Šåˆ›å»ºæ—¥å¿—(FINæ‰«æçš„ä¼˜åŠ¿ä¹‹ä¸€).ä¸ªç±»å‹çš„æ‰«æéƒ½æ˜¯å…·æœ‰å·®å¼‚æ€§çš„,FINæ‰«æå‘é€çš„åŒ…åªåŒ…å«FINæ ‡è¯†,NULLæ‰«æä¸å‘é€æ•°æ®åŒ…ä¸Šçš„ä»»ä½•å­—èŠ‚,XMASæ‰«æå‘é€FINã€PSHå’ŒURGæ ‡è¯†çš„æ•°æ®åŒ….</p><p> <strong>PING Scan (sP)</strong><br> PINGæ‰«æä¸åŒäºå…¶å®ƒçš„æ‰«ææ–¹å¼ï¼Œå› ä¸ºå®ƒåªç”¨äºæ‰¾å‡ºä¸»æœºæ˜¯å¦æ˜¯å­˜åœ¨åœ¨ç½‘ç»œä¸­çš„.å®ƒä¸æ˜¯ç”¨æ¥å‘ç°æ˜¯å¦å¼€æ”¾ç«¯å£çš„.PINGæ‰«æéœ€è¦ROOTæƒé™ï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰ROOTæƒé™,PINGæ‰«æå°†ä¼šä½¿ç”¨connect()è°ƒç”¨.</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sP 192.168.1.1</span><br></pre></td></tr></table></figure><p> <strong>ç‰ˆæœ¬æ£€æµ‹(sV)</strong><br> ç‰ˆæœ¬æ£€æµ‹æ˜¯ç”¨æ¥æ‰«æç›®æ ‡ä¸»æœºå’Œç«¯å£ä¸Šè¿è¡Œçš„è½¯ä»¶çš„ç‰ˆæœ¬.å®ƒä¸åŒäºå…¶å®ƒçš„æ‰«ææŠ€æœ¯ï¼Œå®ƒä¸æ˜¯ç”¨æ¥æ‰«æç›®æ ‡ä¸»æœºä¸Šå¼€æ”¾çš„ç«¯å£ï¼Œä¸è¿‡å®ƒéœ€è¦ä»å¼€æ”¾çš„ç«¯å£è·å–ä¿¡æ¯æ¥åˆ¤æ–­è½¯ä»¶çš„ç‰ˆæœ¬.ä½¿ç”¨ç‰ˆæœ¬æ£€æµ‹æ‰«æä¹‹å‰éœ€è¦å…ˆç”¨TCP SYNæ‰«æå¼€æ”¾äº†å“ªäº›ç«¯å£.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sV 192.168.1.1</span><br></pre></td></tr></table></figure><p> <strong>Idle scan (sL)</strong><br> Idle scanæ˜¯ä¸€ç§å…ˆè¿›çš„æ‰«ææŠ€æœ¯ï¼Œå®ƒä¸æ˜¯ç”¨ä½ çœŸå®çš„ä¸»æœºIpå‘é€æ•°æ®åŒ…ï¼Œè€Œæ˜¯ä½¿ç”¨å¦å¤–ä¸€ä¸ªç›®æ ‡ç½‘ç»œçš„ä¸»æœºå‘é€æ•°æ®åŒ….</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sL 192.168.1.6 192.168.1.1</span><br></pre></td></tr></table></figure><p> Idle scanæ˜¯ä¸€ç§ç†æƒ³çš„åŒ¿åæ‰«ææŠ€æœ¯,é€šè¿‡ç›®æ ‡ç½‘ç»œä¸­çš„192.168.1.6å‘ä¸»æœº192.168.1.1å‘é€æ•°æ®ï¼Œæ¥è·å–192.168.1.1å¼€æ”¾çš„ç«¯å£<br> æœ‰éœ€è¦å…¶å®ƒçš„æ‰«ææŠ€æœ¯ï¼Œå¦‚ FTP bounceï¼ˆFTPåå¼¹ï¼‰, fragmentation scanï¼ˆç¢ç‰‡æ‰«æï¼‰, IP protocol scanï¼ˆIPåè®®æ‰«æï¼‰,ä»¥ä¸Šè®¨è®ºçš„æ˜¯å‡ ç§æœ€ä¸»è¦çš„æ‰«ææ–¹å¼.</p><p> <strong>Nmap</strong> <strong>çš„OSæ£€æµ‹ï¼ˆOï¼‰</strong><br> Nmapæœ€é‡è¦çš„ç‰¹ç‚¹ä¹‹ä¸€æ˜¯èƒ½å¤Ÿè¿œç¨‹æ£€æµ‹æ“ä½œç³»ç»Ÿå’Œè½¯ä»¶ï¼ŒNmapçš„OSæ£€æµ‹æŠ€æœ¯åœ¨æ¸—é€æµ‹è¯•ä¸­ç”¨æ¥äº†è§£è¿œç¨‹ä¸»æœºçš„æ“ä½œç³»ç»Ÿå’Œè½¯ä»¶æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œé€šè¿‡ è·å–çš„ä¿¡æ¯ä½ å¯ä»¥çŸ¥é“å·²çŸ¥çš„æ¼æ´ã€‚Nmapæœ‰ä¸€ä¸ªåä¸ºçš„nmap-OS-DBæ•°æ®åº“ï¼Œè¯¥æ•°æ®åº“åŒ…å«è¶…è¿‡2600æ“ä½œç³»ç»Ÿçš„ä¿¡æ¯ã€‚ NmapæŠŠTCPå’ŒUDPæ•°æ®åŒ…å‘é€åˆ°ç›®æ ‡æœºå™¨ä¸Šï¼Œç„¶åæ£€æŸ¥ç»“æœå’Œæ•°æ®åº“å¯¹ç…§ã€‚</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Initiating SYN Stealth Scan at 10:21</span><br><span class="line">Scanning localhost (127.0.0.1) [1000 ports]</span><br><span class="line">Discovered open port 111/tcp on 127.0.0.1</span><br><span class="line">Completed SYN Stealth Scan at 10:21, 0.08s elapsed (1000 total ports)</span><br><span class="line">Initiating OS detection (try #1) against localhost (127.0.0.1)</span><br><span class="line">Retrying OS detection (try #2) against localhost (127.0.0.1)</span><br></pre></td></tr></table></figure><p> ä¸Šé¢çš„ä¾‹å­æ¸…æ¥šåœ°è¡¨æ˜ï¼ŒNmapçš„é¦–æ¬¡å‘ç°å¼€æ”¾çš„ç«¯å£ï¼Œç„¶åå‘é€æ•°æ®åŒ…å‘ç°è¿œç¨‹æ“ä½œç³»ç»Ÿã€‚æ“ä½œç³»ç»Ÿæ£€æµ‹å‚æ•°æ˜¯Oï¼ˆå¤§å†™Oï¼‰<img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211119195013764.png" alt="image-20211119195013764"><br> Nmapçš„æ“ä½œç³»ç»ŸæŒ‡çº¹è¯†åˆ«æŠ€æœ¯ï¼š<br> è®¾å¤‡ç±»å‹ï¼ˆè·¯ç”±å™¨ï¼Œå·¥ä½œç»„ç­‰ï¼‰<br> è¿è¡Œï¼ˆè¿è¡Œçš„æ“ä½œç³»ç»Ÿï¼‰<br> æ“ä½œç³»ç»Ÿçš„è¯¦ç»†ä¿¡æ¯ï¼ˆæ“ä½œç³»ç»Ÿçš„åç§°å’Œç‰ˆæœ¬ï¼‰<br> ç½‘ç»œè·ç¦»ï¼ˆç›®æ ‡å’Œæ”»å‡»è€…ä¹‹é—´çš„è·ç¦»è·³ï¼‰<br> å¦‚æœè¿œç¨‹ä¸»æœºæœ‰é˜²ç«å¢™ï¼ŒIDSå’ŒIPSç³»ç»Ÿï¼Œä½ å¯ä»¥ä½¿ç”¨-PNå‘½ä»¤æ¥ç¡®ä¿ä¸pingè¿œç¨‹ä¸»æœºï¼Œå› ä¸ºæœ‰æ—¶å€™é˜²ç«å¢™ä¼šç»„ç»‡æ‰pingè¯·æ±‚.-PNå‘½ä»¤å‘Šè¯‰Nmapä¸ç”¨pingè¿œç¨‹ä¸»æœºã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -O -PN 192.168.1.1/24</span><br></pre></td></tr></table></figure><p> ä»¥ä¸Šå‘½ä»¤å‘Šè¯‰å‘ä¿¡ä¸»æœºè¿œç¨‹ä¸»æœºæ˜¯å­˜æ´»åœ¨ç½‘ç»œä¸Šçš„ï¼Œæ‰€ä»¥æ²¡æœ‰å¿…è¦å‘é€pingè¯·æ±‚,ä½¿ç”¨-PNå‚æ•°å¯ä»¥ç»•è¿‡PINGå‘½ä»¤,ä½†æ˜¯ä¸å½±å“ä¸»æœºçš„ç³»ç»Ÿçš„å‘ç°.<br> Nmapçš„æ“ä½œç³»ç»Ÿæ£€æµ‹çš„åŸºç¡€æ˜¯æœ‰å¼€æ”¾å’Œå…³é—­çš„ç«¯å£ï¼Œå¦‚æœOS scanæ— æ³•æ£€æµ‹åˆ°è‡³å°‘ä¸€ä¸ªå¼€æ”¾æˆ–è€…å…³é—­çš„ç«¯å£ï¼Œä¼šè¿”å›ä»¥ä¸‹é”™è¯¯ï¼š</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Warning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port</span><br></pre></td></tr></table></figure><p> OS Scançš„ç»“æœæ˜¯ä¸å¯é çš„ï¼Œå› ä¸ºæ²¡æœ‰å‘ç°è‡³å°‘ä¸€ä¸ªå¼€æ”¾æˆ–è€…å…³é—­çš„ç«¯å£.<br> <img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211119195447656.png" alt="image-20211119195447656"><br> è¿™ç§æƒ…å†µæ˜¯éå¸¸ä¸ç†æƒ³çš„ï¼Œåº”è¯¥æ˜¯è¿œç¨‹ä¸»æœºåšäº†é’ˆå¯¹æ“ä½œç³»ç»Ÿæ£€æµ‹çš„é˜²èŒƒã€‚å¦‚æœNmapä¸èƒ½æ£€æµ‹åˆ°è¿œç¨‹æ“ä½œç³»ç»Ÿç±»å‹ï¼Œé‚£ä¹ˆå°±æ²¡æœ‰å¿…è¦ä½¿ç”¨-osscan_limitæ£€æµ‹ã€‚<br> <img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/image-20211119195533611.png" alt="image-20211119195533611"></p><p>æƒ³å¥½é€šè¿‡Nmapå‡†ç¡®çš„æ£€æµ‹åˆ°è¿œç¨‹æ“ä½œç³»ç»Ÿæ˜¯æ¯”è¾ƒå›°éš¾çš„ï¼Œéœ€è¦ä½¿ç”¨åˆ°Nmapçš„çŒœæµ‹åŠŸèƒ½é€‰é¡¹, â€“osscan-guess çŒœæµ‹è®¤ä¸ºæœ€æ¥è¿‘ç›®æ ‡çš„åŒ¹é…æ“ä½œç³»ç»Ÿç±»å‹ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -O â€“osscan-guess 192.168.1.1</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p> Nmapæ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œå®ƒå…·æœ‰è¦†ç›–æ¸—é€æµ‹è¯•çš„ç¬¬ä¸€æ–¹é¢çš„èƒ½åŠ›ï¼Œå…¶ä¸­åŒ…æ‹¬ä¿¡æ¯çš„æ”¶é›†å’Œç»Ÿè®¡ã€‚æœ¬æ–‡ä»åˆçº§åˆ°é«˜çº§çš„è®²è§£äº†Nmapå…¥ä¾µæ‰«æå·¥å…·çš„ä½¿ç”¨.å¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©.</p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå®‰å…¨ </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå®‰å…¨ </tag>
            
            <tag> Web </tag>
            
            <tag> Nmap </tag>
            
            <tag> ç«¯å£æ‰«æ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>phpå­¦ä¹ ç¬”è®° 01</title>
      <link href="/2021/03/19/444faf94523a-q1jun/"/>
      <url>/2021/03/19/444faf94523a-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="phpå­¦ä¹ ç¬”è®°-01"><a href="#phpå­¦ä¹ ç¬”è®°-01" class="headerlink" title="phpå­¦ä¹ ç¬”è®° 01"></a>phpå­¦ä¹ ç¬”è®° 01</h1><blockquote><p>å°çŸ¥è¯†ï¼š<code>PHPæ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€</code>è¿™å¥è¯æ˜¯æ€ä¹ˆæ¥çš„ï¼Ÿ<br>PHPæ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€è¿™å¥è¯ï¼Œæœ€æ—©å‡ºç°åœ¨2001å¹´7æœˆçš„PHPå®˜æ–¹æ–‡æ¡£ä¸­<br>åŸå› å¾ˆæ˜ç¡®ï¼Œåªæ˜¯è¯´PHPæ˜¯webå¼€å‘ä¸­çš„æœ€å¥½çš„è¯­è¨€ï¼Œä½†ç»è¿‡æµä¼ ä¹‹åå°±å˜æˆäº†PHPæ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€äº†</p></blockquote><h2 id="0x01-phpçš„è¾“å‡º"><a href="#0x01-phpçš„è¾“å‡º" class="headerlink" title="0x01 phpçš„è¾“å‡º"></a>0x01 phpçš„è¾“å‡º</h2><p>phpçš„è¾“å‡ºæœ‰ä»¥ä¸‹å‡ ä¸ªè¯­å¥ï¼š</p><ul><li>echo()</li><li>print()</li><li>print_r()</li><li>var_dunp()</li></ul><h3 id="0x0101-echo"><a href="#0x0101-echo" class="headerlink" title="0x0101 echo() :"></a>0x0101 echo() :</h3><p>å¯ä»¥ä¸€æ¬¡è¾“å‡ºå¤šä¸ªå€¼ï¼Œå¤šä¸ªå€¼ä¹‹é—´ç”¨é€—å·åˆ†éš”ã€‚ä½†æ˜¯echo()æ˜¯è¯­è¨€ç»“æ„(<em>language construct</em>)ï¼Œå¹¶__ä¸æ˜¯çœŸæ­£çš„å‡½æ•°__ï¼Œå› æ­¤ä¸èƒ½ä½œä¸ºè¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†æ¥ä½¿ç”¨ã€‚echo()æ˜¯phpçš„å†…éƒ¨æŒ‡ä»¤ï¼Œä¸æ˜¯å‡½æ•°ï¼Œä¸”__æ— è¿”å›å€¼__ã€‚</p><h3 id="0x0102-print"><a href="#0x0102-print" class="headerlink" title="0x0102 print():"></a>0x0102 print():</h3><p>å‡½æ•°print()æ‰“å°ä¸€ä¸ªå€¼(å®ƒçš„å‚æ•°)ï¼Œå¦‚æœå­—ç¬¦ä¸²æˆåŠŸæ˜¾ç¤ºåˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚åªèƒ½æ‰“å°å‡ºç®€å•ç±»å‹å˜é‡çš„å€¼ï¼ˆå¦‚intã€stringï¼‰ï¼Œ__æœ‰è¿”å›å€¼__ã€‚</p><h3 id="0x0103-print-r-å’Œvar-dump"><a href="#0x0103-print-r-å’Œvar-dump" class="headerlink" title="0x0103 print_r()å’Œvar_dump():"></a>0x0103 print_r()å’Œvar_dump():</h3><p>print_r()å¯ä»¥æŠŠå­—ç¬¦ä¸²å’Œæ•°å­—ç®€å•åœ°æ‰“å°å‡ºæ¥ï¼Œè€Œæ•°ç»„åˆ™ä»¥æ‹¬èµ·æ¥çš„é”®å’Œå€¼å¾—åˆ—è¡¨å½¢å¼æ˜¾ç¤ºï¼Œå¹¶ä»¥Arrayå¼€å¤´ã€‚ä½†print_r()è¾“å‡ºå¸ƒå°”å€¼å’ŒNULLçš„ç»“æœæ²¡æœ‰æ„ä¹‰ï¼Œå› ä¸ºéƒ½æ˜¯æ‰“å°â€\nâ€ã€‚å› æ­¤ç”¨var_dump()å‡½æ•°æ›´é€‚åˆè°ƒè¯•ã€‚print_ræ˜¯å‡½æ•°ï¼Œå¯ä»¥æ‰“å°å‡ºæ¯”è¾ƒå¤æ‚çš„å˜é‡ï¼ˆå¦‚æ•°ç»„ã€å¯¹è±¡ï¼‰ï¼Œæœ‰è¿”å›å€¼ã€‚</p><h2 id="0x02-phpçš„æ³¨é‡Š"><a href="#0x02-phpçš„æ³¨é‡Š" class="headerlink" title="0x02 phpçš„æ³¨é‡Š"></a>0x02 phpçš„æ³¨é‡Š</h2><p>phpçš„æ³¨é‡Šæœ‰ä¸‰ç§ï¼š<code>//å†…å®¹</code>ï¼Œ<code>/*å†…å®¹*/</code>ï¼Œ<code>#å†…å®¹</code>ã€‚</p><blockquote><p>phpçš„æ³¨é‡Šä¸ä¼šåœ¨å‰ç«¯é¡µé¢çš„æºä»£ç ä¸­æ˜¾ç¤ºï¼ŒHTMLçš„æ³¨é‡Šåˆ™ä¼šæ˜¾ç¤ºåœ¨å‰ç«¯é¡µé¢çš„æºä»£ç ä¸­(å› ä¸ºå‰ç«¯é¡µé¢å°±æ˜¯htmlğŸ˜‚)ã€‚</p></blockquote><h3 id="0x0201-å•è¡Œæ³¨é‡Šï¼š"><a href="#0x0201-å•è¡Œæ³¨é‡Šï¼š" class="headerlink" title="0x0201 å•è¡Œæ³¨é‡Šï¼š"></a>0x0201 å•è¡Œæ³¨é‡Šï¼š</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™æ˜¯phpçš„å•è¡Œæ³¨é‡Š</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™ä¹Ÿæ˜¯phpçš„å•è¡Œæ³¨é‡Š(ä¸å»ºè®®ä½¿ç”¨)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="0x0202-å¤šè¡Œæ³¨é‡Šï¼š"><a href="#0x0202-å¤šè¡Œæ³¨é‡Šï¼š" class="headerlink" title="0x0202 å¤šè¡Œæ³¨é‡Šï¼š"></a>0x0202 å¤šè¡Œæ³¨é‡Šï¼š</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">è¿™æ˜¯</span></span><br><span class="line"><span class="comment">php</span></span><br><span class="line"><span class="comment">çš„å¤šè¡Œæ³¨é‡Š</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="0x03-phpçš„æ•°æ®ç±»å‹"><a href="#0x03-phpçš„æ•°æ®ç±»å‹" class="headerlink" title="0x03 phpçš„æ•°æ®ç±»å‹"></a>0x03 phpçš„æ•°æ®ç±»å‹</h3><p>phpæœ‰å…«å¤§æ•°æ®ç±»å‹ï¼Œå¦‚ä¸‹ï¼š</p><ul><li>å››ç§æ ‡é‡ç±»å‹ï¼šå¸ƒå°”ç±»å‹ã€æ•´å‹ã€æµ®ç‚¹å‹ã€å­—ç¬¦ä¸²å‹ã€‚</li><li>ä¸¤ç§å¤åˆç±»å‹ï¼šæ•°ç»„ã€å¯¹è±¡ã€‚</li><li>ä¸¤ç§ç‰¹æ®Šç±»å‹ï¼šèµ„æºã€NULLã€‚</li></ul><h2 id="phpçš„å˜é‡"><a href="#phpçš„å˜é‡" class="headerlink" title="phpçš„å˜é‡"></a>phpçš„å˜é‡</h2><ol><li>phpä¸­çš„å˜é‡å¤§å°å†™æ•æ„Ÿ</li><li>å˜é‡çš„å‘½ååªèƒ½ä»¥ä¸‹åˆ’çº¿å¼€å¤´æˆ–è€…å­—æ¯å¼€å¤´ï¼Œä¸èƒ½ä»¥æ•°å­—å¼€å¤´ä¸”ä¸åŒ…å«ç‰¹æ®Šå­—ç¬¦ã€‚</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// phpçš„å˜é‡å‘½å</span></span><br><span class="line"><span class="variable">$_test</span></span><br><span class="line"><span class="variable">$hello</span></span><br><span class="line"><span class="variable">$_123</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>phpæœ‰ä¹å¤§è¶…å…¨å±€å˜é‡(<strong>ç³»ç»Ÿå˜é‡</strong>):</p><ul><li><strong>$GLOBALS</strong></li><li><strong>$_SERVER</strong></li><li><strong>$_GET</strong></li><li><strong>$_POST</strong></li><li><strong>$_REQUEST</strong></li><li><strong>$_COOKIE</strong></li><li><strong>$_SESSION</strong></li><li><strong>$_FILES</strong></li><li><strong>$_ENV</strong></li></ul><p>PHP å˜é‡ä½œç”¨åŸŸ<br>å˜é‡çš„ä½œç”¨åŸŸæ˜¯è„šæœ¬ä¸­å˜é‡å¯è¢«å¼•ç”¨&#x2F;ä½¿ç”¨çš„éƒ¨åˆ†ã€‚</p><p>PHP æœ‰å››ç§ä¸åŒçš„å˜é‡ä½œç”¨åŸŸï¼š</p><ul><li>local</li><li>global</li><li>static</li><li>parameter</li></ul>]]></content>
      
      
      <categories>
          
          <category> åç«¯å­¦ä¹  </category>
          
          <category> PHP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åç«¯ </tag>
            
            <tag> php </tag>
            
            <tag> è¶…æ–‡æœ¬é¢„å¤„ç†å™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>phpè¶…æ–‡æœ¬é¢„å¤„ç†å™¨</title>
      <link href="/2021/03/18/762f1d5327cf-q1jun/"/>
      <url>/2021/03/18/762f1d5327cf-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="PHPè¶…æ–‡æœ¬é¢„å¤„ç†å™¨"><a href="#PHPè¶…æ–‡æœ¬é¢„å¤„ç†å™¨" class="headerlink" title="PHPè¶…æ–‡æœ¬é¢„å¤„ç†å™¨"></a>PHPè¶…æ–‡æœ¬é¢„å¤„ç†å™¨</h1><h2 id="0x01-PHP-å˜é‡"><a href="#0x01-PHP-å˜é‡" class="headerlink" title="0x01 PHP å˜é‡"></a>0x01 PHP å˜é‡</h2><p>ä¸ä»£æ•°ç±»ä¼¼ï¼Œå¯ä»¥ç»™ PHP å˜é‡èµ‹äºˆæŸä¸ªå€¼ï¼ˆx&#x3D;5ï¼‰æˆ–è€…è¡¨è¾¾å¼ï¼ˆz&#x3D;x+yï¼‰ã€‚</p><p>å˜é‡å¯ä»¥æ˜¯å¾ˆçŸ­çš„åç§°ï¼ˆå¦‚ x å’Œ yï¼‰æˆ–è€…æ›´å…·æè¿°æ€§çš„åç§°ï¼ˆå¦‚ ageã€carnameã€totalvolumeï¼‰ã€‚</p><p>PHP å˜é‡è§„åˆ™ï¼š</p><ul><li>å˜é‡ä»¥ $ ç¬¦å·å¼€å§‹ï¼Œåé¢è·Ÿç€å˜é‡çš„åç§°</li><li>å˜é‡åå¿…é¡»ä»¥å­—æ¯æˆ–è€…ä¸‹åˆ’çº¿å­—ç¬¦å¼€å§‹</li><li>å˜é‡ååªèƒ½åŒ…å«å­—æ¯æ•°å­—å­—ç¬¦ä»¥åŠä¸‹åˆ’çº¿ï¼ˆA-zã€0-9 å’Œ _ ï¼‰</li><li>å˜é‡åä¸èƒ½åŒ…å«ç©ºæ ¼</li><li>å˜é‡åæ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼ˆ$y å’Œ $Y æ˜¯ä¸¤ä¸ªä¸åŒçš„å˜é‡ï¼‰</li></ul><h2 id="0x02-åˆ›å»ºï¼ˆå£°æ˜ï¼‰PHP-å˜é‡"><a href="#0x02-åˆ›å»ºï¼ˆå£°æ˜ï¼‰PHP-å˜é‡" class="headerlink" title="0x02 åˆ›å»ºï¼ˆå£°æ˜ï¼‰PHP å˜é‡"></a>0x02 åˆ›å»ºï¼ˆå£°æ˜ï¼‰PHP å˜é‡</h2><p>PHP æ²¡æœ‰å£°æ˜å˜é‡çš„å‘½ä»¤ã€‚</p><p>å˜é‡åœ¨æ‚¨ç¬¬ä¸€æ¬¡èµ‹å€¼ç»™å®ƒçš„æ—¶å€™è¢«åˆ›å»º</p><blockquote><p>ä¸Pythonç±»ä¼¼</p></blockquote><p><strong>PHP æ˜¯ä¸€é—¨å¼±ç±»å‹è¯­è¨€</strong></p><p>ä¸å¿…å‘ PHP å£°æ˜è¯¥å˜é‡çš„æ•°æ®ç±»å‹ã€‚<br>PHP ä¼šæ ¹æ®å˜é‡çš„å€¼ï¼Œè‡ªåŠ¨æŠŠå˜é‡è½¬æ¢ä¸ºæ­£ç¡®çš„æ•°æ®ç±»å‹ã€‚<br>åœ¨å¼ºç±»å‹çš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨ä½¿ç”¨å˜é‡å‰å…ˆå£°æ˜ï¼ˆå®šä¹‰ï¼‰å˜é‡çš„ç±»å‹å’Œåç§°ã€‚</p><h2 id="0x03-PHP-å˜é‡ä½œç”¨åŸŸ"><a href="#0x03-PHP-å˜é‡ä½œç”¨åŸŸ" class="headerlink" title="0x03 PHP å˜é‡ä½œç”¨åŸŸ"></a>0x03 PHP å˜é‡ä½œç”¨åŸŸ</h2><p>å˜é‡çš„ä½œç”¨åŸŸæ˜¯è„šæœ¬ä¸­å˜é‡å¯è¢«å¼•ç”¨&#x2F;ä½¿ç”¨çš„éƒ¨åˆ†ã€‚</p><p>PHP æœ‰å››ç§ä¸åŒçš„å˜é‡ä½œç”¨åŸŸï¼š</p><ul><li>local</li><li>global</li><li>static</li><li>parameter</li></ul><blockquote><p>å¯ä»¥åœ¨ä¸åŒå‡½æ•°ä¸­ä½¿ç”¨ç›¸åŒçš„å˜é‡åç§°ï¼Œå› ä¸ºè¿™äº›å‡½æ•°å†…å®šä¹‰çš„å˜é‡åæ˜¯å±€éƒ¨å˜é‡ï¼Œåªä½œç”¨äºè¯¥å‡½æ•°å†…ã€‚</p></blockquote><h3 id="0x0301-PHP-global-å…³é”®å­—"><a href="#0x0301-PHP-global-å…³é”®å­—" class="headerlink" title="0x0301 PHP global å…³é”®å­—"></a>0x0301 PHP global å…³é”®å­—</h3><p>global å…³é”®å­—ç”¨äºå‡½æ•°å†…è®¿é—®å…¨å±€å˜é‡ã€‚</p><p>åœ¨å‡½æ•°å†…è°ƒç”¨å‡½æ•°å¤–å®šä¹‰çš„å…¨å±€å˜é‡ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å‡½æ•°ä¸­çš„å˜é‡å‰åŠ ä¸Š global å…³é”®å­—ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$x</span>=<span class="number">5</span>;</span><br><span class="line"><span class="variable">$y</span>=<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myTest</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">global</span> <span class="variable">$x</span>,<span class="variable">$y</span>;</span><br><span class="line">    <span class="variable">$y</span>=<span class="variable">$x</span>+<span class="variable">$y</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">myTest</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$y</span>; <span class="comment">// è¾“å‡º 15</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>PHP å°†æ‰€æœ‰å…¨å±€å˜é‡å­˜å‚¨åœ¨ä¸€ä¸ªåä¸º $GLOBALS[<em>index</em>] çš„æ•°ç»„ä¸­ã€‚ <em>index</em> ä¿å­˜å˜é‡çš„åç§°ã€‚è¿™ä¸ªæ•°ç»„å¯ä»¥åœ¨å‡½æ•°å†…éƒ¨è®¿é—®ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨æ¥æ›´æ–°å…¨å±€å˜é‡ã€‚</p><p>ä¸Šé¢çš„å®ä¾‹å¯ä»¥å†™æˆè¿™æ ·ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$x</span>=<span class="number">5</span>;</span><br><span class="line"><span class="variable">$y</span>=<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myTest</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="variable">$GLOBALS</span>[<span class="string">&#x27;y&#x27;</span>]=<span class="variable">$GLOBALS</span>[<span class="string">&#x27;x&#x27;</span>]+<span class="variable">$GLOBALS</span>[<span class="string">&#x27;y&#x27;</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">myTest</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$y</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="0x0302-Static-ä½œç”¨åŸŸ"><a href="#0x0302-Static-ä½œç”¨åŸŸ" class="headerlink" title="0x0302 Static ä½œç”¨åŸŸ"></a>0x0302 Static ä½œç”¨åŸŸ</h3><p>å½“ä¸€ä¸ªå‡½æ•°å®Œæˆæ—¶ï¼Œå®ƒçš„æ‰€æœ‰å˜é‡é€šå¸¸éƒ½ä¼šè¢«åˆ é™¤ã€‚ç„¶è€Œï¼Œæœ‰æ—¶å€™æ‚¨å¸Œæœ›æŸä¸ªå±€éƒ¨å˜é‡ä¸è¦è¢«åˆ é™¤ã€‚</p><p>è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œè¯·åœ¨æ‚¨ç¬¬ä¸€æ¬¡å£°æ˜å˜é‡æ—¶ä½¿ç”¨ <strong>static</strong> å…³é”®å­—ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myTest</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">static</span> <span class="variable">$x</span>=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$x</span>;</span><br><span class="line"><span class="variable">$x</span>++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_ invoke__">myTest</span>();</span><br><span class="line"><span class="title function_ invoke__">myTest</span>();</span><br><span class="line"><span class="title function_ invoke__">myTest</span>();</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="0x0303-PHP-echo-å’Œ-print-è¯­å¥"><a href="#0x0303-PHP-echo-å’Œ-print-è¯­å¥" class="headerlink" title="0x0303 PHP echo å’Œ print è¯­å¥"></a>0x0303 PHP echo å’Œ print è¯­å¥</h3><p>echo å’Œ print åŒºåˆ«:</p><ul><li>echo - å¯ä»¥è¾“å‡ºä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ä¸²</li><li>print - åªå…è®¸è¾“å‡ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿”å›å€¼æ€»ä¸º 1</li></ul><p><strong>æç¤ºï¼š</strong>echo è¾“å‡ºçš„é€Ÿåº¦æ¯” print å¿«ï¼Œ echo æ²¡æœ‰è¿”å›å€¼ï¼Œprintæœ‰è¿”å›å€¼1ã€‚</p><h2 id="0x04-PHP-æ•°æ®ç±»å‹"><a href="#0x04-PHP-æ•°æ®ç±»å‹" class="headerlink" title="0x04 PHP æ•°æ®ç±»å‹"></a>0x04 PHP æ•°æ®ç±»å‹</h2><p>Stringï¼ˆå­—ç¬¦ä¸²ï¼‰, Integerï¼ˆæ•´å‹ï¼‰, Floatï¼ˆæµ®ç‚¹å‹ï¼‰, Booleanï¼ˆå¸ƒå°”å‹ï¼‰, Arrayï¼ˆæ•°ç»„ï¼‰, Objectï¼ˆå¯¹è±¡ï¼‰, NULLï¼ˆç©ºå€¼ï¼‰</p><p>ä¸€ä¸ª<strong>å­—ç¬¦ä¸²</strong>æ˜¯ä¸€ä¸²å­—ç¬¦çš„åºåˆ—ï¼Œå°±åƒ â€œHello world!â€ã€‚</p><p><strong>æ•´æ•°</strong>æ˜¯ä¸€ä¸ªæ²¡æœ‰å°æ•°çš„æ•°å­—ã€‚</p><p>æ•´æ•°è§„åˆ™:</p><ul><li>æ•´æ•°å¿…é¡»è‡³å°‘æœ‰ä¸€ä¸ªæ•°å­— (0-9)</li><li>æ•´æ•°ä¸èƒ½åŒ…å«é€—å·æˆ–ç©ºæ ¼</li><li>æ•´æ•°æ˜¯æ²¡æœ‰å°æ•°ç‚¹çš„</li><li>æ•´æ•°å¯ä»¥æ˜¯æ­£æ•°æˆ–è´Ÿæ•°</li><li>æ•´å‹å¯ä»¥ç”¨ä¸‰ç§æ ¼å¼æ¥æŒ‡å®šï¼šåè¿›åˆ¶ï¼Œ åå…­è¿›åˆ¶ï¼ˆ ä»¥ 0x ä¸ºå‰ç¼€ï¼‰æˆ–å…«è¿›åˆ¶ï¼ˆå‰ç¼€ä¸º 0ï¼‰ã€‚</li></ul><p><strong>æµ®ç‚¹æ•°</strong>æ˜¯å¸¦å°æ•°éƒ¨åˆ†çš„æ•°å­—ï¼Œæˆ–æ˜¯æŒ‡æ•°å½¢å¼ã€‚</p><p><strong>å¸ƒå°”å‹</strong>å¯ä»¥æ˜¯ TRUE æˆ– FALSEã€‚</p><p>$x&#x3D;true;<br>$y&#x3D;false;</p><p>å¸ƒå°”å‹é€šå¸¸ç”¨äºæ¡ä»¶åˆ¤æ–­ã€‚åœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­ä½ ä¼šå­¦åˆ°æ›´å¤šå…³äºæ¡ä»¶æ§åˆ¶çš„æ•™ç¨‹ã€‚</p><p><strong>æ•°ç»„</strong>å¯ä»¥åœ¨ä¸€ä¸ªå˜é‡ä¸­å­˜å‚¨å¤šä¸ªå€¼ã€‚</p><p>åœ¨ä»¥ä¸‹å®ä¾‹ä¸­åˆ›å»ºäº†ä¸€ä¸ªæ•°ç»„ï¼Œ ç„¶åä½¿ç”¨ PHP var_dump() å‡½æ•°è¿”å›æ•°ç»„çš„æ•°æ®ç±»å‹å’Œå€¼ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="variable">$cars</span>=<span class="keyword">array</span>(<span class="string">&quot;Volvo&quot;</span>,<span class="string">&quot;BMW&quot;</span>,<span class="string">&quot;Toyota&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">var_dump</span>(<span class="variable">$cars</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">array</span>(<span class="number">3</span>) &#123; [<span class="number">0</span>]=&gt; <span class="keyword">string</span>(<span class="number">5</span>) <span class="string">&quot;Volvo&quot;</span> [<span class="number">1</span>]=&gt; <span class="keyword">string</span>(<span class="number">3</span>) <span class="string">&quot;BMW&quot;</span> [<span class="number">2</span>]=&gt; <span class="keyword">string</span>(<span class="number">6</span>) <span class="string">&quot;Toyota&quot;</span> &#125;</span><br></pre></td></tr></table></figure><p><strong>å¯¹è±¡</strong> æ•°æ®ç±»å‹ä¹Ÿå¯ä»¥ç”¨äºå­˜å‚¨æ•°æ®ã€‚</p><p>åœ¨ PHP ä¸­ï¼Œå¯¹è±¡å¿…é¡»å£°æ˜ã€‚</p><p>é¦–å…ˆï¼Œä½ å¿…é¡»ä½¿ç”¨classå…³é”®å­—å£°æ˜ç±»å¯¹è±¡ã€‚ç±»æ˜¯å¯ä»¥åŒ…å«å±æ€§å’Œæ–¹æ³•çš„ç»“æ„ã€‚</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="keyword">var</span> <span class="variable">$color</span>;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">Car</span>(<span class="params"><span class="variable">$color</span>=<span class="string">&quot;green&quot;</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable language_">$this</span>-&gt;color = <span class="variable">$color</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">what_color</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;color;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><strong>NULL å€¼</strong>è¡¨ç¤ºå˜é‡æ²¡æœ‰å€¼ã€‚NULL æ˜¯æ•°æ®ç±»å‹ä¸º NULL çš„å€¼ã€‚</p><p>NULL å€¼æŒ‡æ˜ä¸€ä¸ªå˜é‡æ˜¯å¦ä¸ºç©ºå€¼ã€‚ åŒæ ·å¯ç”¨äºæ•°æ®ç©ºå€¼å’ŒNULLå€¼çš„åŒºåˆ«ã€‚</p><p>å¯ä»¥é€šè¿‡è®¾ç½®å˜é‡å€¼ä¸º NULL æ¥æ¸…ç©ºå˜é‡æ•°æ®</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯å­¦ä¹  </category>
          
          <category> php </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åç«¯ </tag>
            
            <tag> php </tag>
            
            <tag> è¶…æ–‡æœ¬é¢„å¤„ç†å™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œæ‹“æ‰‘å®éªŒä¹‹æ ¡å›­ç½‘çš„æ„å»º2</title>
      <link href="/2021/03/12/58f62a0bb83e-q1jun/"/>
      <url>/2021/03/12/58f62a0bb83e-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="ecjtu-network-ExtraLab6"><a href="#ecjtu-network-ExtraLab6" class="headerlink" title="ecjtu-network-ExtraLab6"></a>ecjtu-network-ExtraLab6</h1><p>åä¸œäº¤é€šå¤§å­¦è®¡ç®—æœºç½‘ç»œ æœ€ç»ˆå®éªŒå…­ï¼šæ ¡å›­ç½‘</p><blockquote><p>å®éªŒæŒ‡å¯¼ä¹¦ç»™å‡ºçš„æ‹“æ‰‘å›¾ï¼š<br><img src="https://user-images.githubusercontent.com/57565901/121632559-c5b71980-cab3-11eb-9dab-2f494ca044cb.jpg" alt="extra"></p></blockquote><h2 id="0x01-æˆ‘ä»¬æ ¹æ®å®éªŒç»™å‡ºçš„æ‹“æ‰‘å›¾åœ¨Cisco-Packet-Tracerä¸­æŠŠå¯¹åº”çš„è®¾å¤‡é€‰å‡ºå¹¶æ‘†æ”¾å¥½"><a href="#0x01-æˆ‘ä»¬æ ¹æ®å®éªŒç»™å‡ºçš„æ‹“æ‰‘å›¾åœ¨Cisco-Packet-Tracerä¸­æŠŠå¯¹åº”çš„è®¾å¤‡é€‰å‡ºå¹¶æ‘†æ”¾å¥½" class="headerlink" title="0x01 :æˆ‘ä»¬æ ¹æ®å®éªŒç»™å‡ºçš„æ‹“æ‰‘å›¾åœ¨Cisco Packet Tracerä¸­æŠŠå¯¹åº”çš„è®¾å¤‡é€‰å‡ºå¹¶æ‘†æ”¾å¥½:"></a>0x01 :æˆ‘ä»¬æ ¹æ®å®éªŒç»™å‡ºçš„æ‹“æ‰‘å›¾åœ¨Cisco Packet Tracerä¸­æŠŠå¯¹åº”çš„è®¾å¤‡é€‰å‡ºå¹¶æ‘†æ”¾å¥½:</h2><p>å¦‚ä¸‹å›¾ï¼š<br><img src="https://user-images.githubusercontent.com/57565901/121632932-78877780-cab4-11eb-8bc5-0fc253210e30.png" alt="image"></p><p>ç”±äºç½‘ç»œç»“æ„è¿‡äºå¤æ‚ï¼Œä¸ºäº†ä¾¿äºè¯»è€…é˜…è¯»ï¼Œæˆ‘æŠŠå„åŒºåŸŸçš„æ‹“æ‰‘å›¾åˆ†å¼€æˆªå–ï¼š</p><h3 id="ã€æ•™å­¦åŒºã€‘"><a href="#ã€æ•™å­¦åŒºã€‘" class="headerlink" title="ã€æ•™å­¦åŒºã€‘"></a>ã€æ•™å­¦åŒºã€‘</h3><p><img src="https://user-images.githubusercontent.com/57565901/121639715-87bff280-cabf-11eb-9dad-f31e487cea05.png" alt="image"></p><h3 id="ã€å®¿èˆåŒºã€‘"><a href="#ã€å®¿èˆåŒºã€‘" class="headerlink" title="ã€å®¿èˆåŒºã€‘"></a>ã€å®¿èˆåŒºã€‘</h3><p><img src="https://user-images.githubusercontent.com/57565901/121639752-973f3b80-cabf-11eb-8702-685d4384e9d5.png" alt="image"></p><h3 id="ã€éª¨å¹²ç½‘ç»œåŒºã€‘"><a href="#ã€éª¨å¹²ç½‘ç»œåŒºã€‘" class="headerlink" title="ã€éª¨å¹²ç½‘ç»œåŒºã€‘"></a>ã€éª¨å¹²ç½‘ç»œåŒºã€‘</h3><p><img src="https://user-images.githubusercontent.com/57565901/121639824-af16bf80-cabf-11eb-9d5d-617fe34728ab.png" alt="image"></p><h3 id="ã€å¤–ç½‘å‡ºå£ã€‘"><a href="#ã€å¤–ç½‘å‡ºå£ã€‘" class="headerlink" title="ã€å¤–ç½‘å‡ºå£ã€‘"></a>ã€å¤–ç½‘å‡ºå£ã€‘</h3><p><img src="https://user-images.githubusercontent.com/57565901/121639841-b938be00-cabf-11eb-83e1-63684f34c743.png" alt="image"></p><h3 id="ã€DMZæ•°æ®æœºæˆ¿åŒºã€‘"><a href="#ã€DMZæ•°æ®æœºæˆ¿åŒºã€‘" class="headerlink" title="ã€DMZæ•°æ®æœºæˆ¿åŒºã€‘"></a>ã€DMZæ•°æ®æœºæˆ¿åŒºã€‘</h3><p><img src="https://user-images.githubusercontent.com/57565901/121639890-c786da00-cabf-11eb-8117-65ad5262362f.png" alt="image"></p><h2 id="0x02-é…ç½®æ¥å£å’ŒIPï¼Œè®¾ç½®ç½‘å…³ï¼š"><a href="#0x02-é…ç½®æ¥å£å’ŒIPï¼Œè®¾ç½®ç½‘å…³ï¼š" class="headerlink" title="0x02:é…ç½®æ¥å£å’ŒIPï¼Œè®¾ç½®ç½‘å…³ï¼š"></a>0x02:é…ç½®æ¥å£å’ŒIPï¼Œè®¾ç½®ç½‘å…³ï¼š</h2><p>PC1(é™æ€IPä¸»æœºä»¥æ­¤ç±»æ¨,DHCPåè®®ä¸»æœºä¾‹å¤–):</p><p><img src="https://user-images.githubusercontent.com/57565901/121633542-90133000-cab5-11eb-8d52-1065bc87f32a.png" alt="image"></p><h3 id="0x0201-å„ç§äºŒå±‚è·¯ç”±å™¨çš„é…ç½®ï¼š"><a href="#0x0201-å„ç§äºŒå±‚è·¯ç”±å™¨çš„é…ç½®ï¼š" class="headerlink" title="0x0201: å„ç§äºŒå±‚è·¯ç”±å™¨çš„é…ç½®ï¼š"></a>0x0201: å„ç§äºŒå±‚è·¯ç”±å™¨çš„é…ç½®ï¼š</h3><blockquote><p>é…ç½®äº¤æ¢æœºæ¥å£Vlanå¹¶æ‰“å¼€æ¥å£<br>Switch 0:</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int fa0/24</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 500</span></span><br><span class="line"><span class="meta prompt_">% </span><span class="language-bash">Access VLAN does not exist. Creating vlan 500</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int fa0/1</span> </span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 500</span></span><br></pre></td></tr></table></figure><p>Switch 1:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int fa0/24</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 501</span></span><br><span class="line"><span class="meta prompt_">% </span><span class="language-bash">Access VLAN does not exist. Creating vlan 501</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int fa0/1</span> </span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 501</span></span><br></pre></td></tr></table></figure><p>Switch 2:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int fa0/24</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 502</span></span><br><span class="line"><span class="meta prompt_">% </span><span class="language-bash">Access VLAN does not exist. Creating vlan 502</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int fa0/1</span> </span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 502</span></span><br></pre></td></tr></table></figure><p>Switch 3:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int fa0/24</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 700</span></span><br><span class="line"><span class="meta prompt_">% </span><span class="language-bash">Access VLAN does not exist. Creating vlan 700</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int fa0/1</span> </span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 700</span></span><br></pre></td></tr></table></figure><p>Switch 4:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int fa0/24</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 701</span></span><br><span class="line"><span class="meta prompt_">% </span><span class="language-bash">Access VLAN does not exist. Creating vlan 701</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int fa0/1</span> </span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 701</span></span><br></pre></td></tr></table></figure><p>Switch 5:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int fa0/24</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 702</span></span><br><span class="line"><span class="meta prompt_">% </span><span class="language-bash">Access VLAN does not exist. Creating vlan 702</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int fa0/1</span> </span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 702</span></span><br></pre></td></tr></table></figure><p>å› ä¸ºSwitch 6çš„é…ç½®å’Œä¸Šé¢å…­ä¸ªäº¤æ¢æœºçš„é…ç½®æœ‰æ‰€ä¸åŒï¼Œ<br>æ‰€ä»¥æˆ‘å†³å®šæŠŠSwitch 6çš„é…ç½®æ”¾åœ¨æ•°æ®ä¸­å¿ƒåŒºé…ç½®é‡Œå•ç‹¬ä»‹ç»ã€‚<br>ä¸‹é¢æ˜¯æ¯ä¸ªåŒºåŸŸå†…è®¾å¤‡çš„ç®€å•é…ç½®ã€‚<br>ï¼ˆæš‚æ—¶ä¸é…ç½®è·¯ç”±ç­–ç•¥ï¼Œè·¯ç”±ç­–ç•¥æ”¾åˆ°åé¢ï¼‰</p><h3 id="0x0201-æ•°æ®ä¸­å¿ƒåŒº"><a href="#0x0201-æ•°æ®ä¸­å¿ƒåŒº" class="headerlink" title="0x0201: æ•°æ®ä¸­å¿ƒåŒº:"></a>0x0201: æ•°æ®ä¸­å¿ƒåŒº:</h3><p>Switch 6:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int fa0/1</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 101</span></span><br><span class="line"><span class="meta prompt_">% </span><span class="language-bash">Access VLAN does not exist. Creating vlan 101</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int fa0/2</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 102</span></span><br><span class="line"><span class="meta prompt_">% </span><span class="language-bash">Access VLAN does not exist. Creating vlan 102</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int fa0/3</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 103</span></span><br><span class="line"><span class="meta prompt_">% </span><span class="language-bash">Access VLAN does not exist. Creating vlan 103</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int fa0/4</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 104</span></span><br><span class="line"><span class="meta prompt_">% </span><span class="language-bash">Access VLAN does not exist. Creating vlan 104</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int fa0/24</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport mode trunk</span> </span><br></pre></td></tr></table></figure><p>Multilayer Switch 3:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int vlan 101</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 192.168.1.254 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int vlan 102</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 192.168.2.254 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int vlan 103</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 192.168.3.254 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int vlan 104</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 192.168.4.254 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int fa0/10</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport trunk encapsulation dot1q</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 101</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 102</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 103</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 104</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„ç›®çš„æ˜¯è®©å„ä¸»æœº&#x2F;æœåŠ¡å™¨èƒ½pingé€šè¿™ä¸ªä¸‰å±‚äº¤æ¢æœºMS3ï¼š</p><p><img src="https://user-images.githubusercontent.com/57565901/121637122-842a6c80-cabb-11eb-96c1-5d18dbb5b79a.png" alt="image"></p><p>çœ‹æ¥æˆ‘ä»¬æˆåŠŸäº†ï¼ä¸‹é¢æˆ‘ä»¬ç»§ç»­æ•™å­¦åŒº(â—â€™â—¡â€™â—)</p><h3 id="0x0202-æ•™å­¦åŒº"><a href="#0x0202-æ•™å­¦åŒº" class="headerlink" title="0x0202: æ•™å­¦åŒº:"></a>0x0202: æ•™å­¦åŒº:</h3><p>Multilayer Switch 0:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int fa0/1</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 500</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int vlan 500</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 172.16.10.1 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int fa0/2</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 501</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int vlan 501</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 172.16.20.1 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int fa0/3</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 502</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int vlan 502</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 172.16.30.1 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br></pre></td></tr></table></figure><p>æˆåŠŸæˆªå›¾ï¼š</p><p><img src="https://user-images.githubusercontent.com/57565901/121637797-8b9e4580-cabc-11eb-9363-2b6b1945f9bb.png" alt="image"></p><h3 id="0x0203-å­¦ç”Ÿå®¿èˆåŒº-DHCPåŠ¨æ€åˆ†é…IP"><a href="#0x0203-å­¦ç”Ÿå®¿èˆåŒº-DHCPåŠ¨æ€åˆ†é…IP" class="headerlink" title="0x0203: å­¦ç”Ÿå®¿èˆåŒº(DHCPåŠ¨æ€åˆ†é…IP):"></a>0x0203: å­¦ç”Ÿå®¿èˆåŒº(DHCPåŠ¨æ€åˆ†é…IP):</h3><p>Multilayer Switch 4(ä»¥ä¸‹ç®€ç§°MS4):</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int fa0/1</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 700</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int vlan 700</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 172.20.40.1 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int fa0/2</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 701</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int vlan 701</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 172.20.50.1 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int fa0/3</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 702</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int vlan 702</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 172.20.60.1 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br></pre></td></tr></table></figure><p>MS4é…ç½®DHCPæœåŠ¡:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">ip dhcp pool vlan700</span></span><br><span class="line"><span class="meta prompt_">Switch(dhcp-config)#</span><span class="language-bash">network 172.20.40.0 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(dhcp-config)#</span><span class="language-bash">defa</span></span><br><span class="line"><span class="meta prompt_">Switch(dhcp-config)#</span><span class="language-bash">default-router 172.20.40.1</span></span><br><span class="line"><span class="meta prompt_">Switch(dhcp-config)#</span><span class="language-bash">dns-server 0.0.0.0</span></span><br><span class="line"><span class="meta prompt_">Switch(dhcp-config)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">ip dhcp pool vlan701</span></span><br><span class="line"><span class="meta prompt_">Switch(dhcp-config)#</span><span class="language-bash">network 172.20.50.0 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(dhcp-config)#</span><span class="language-bash">default-router 172.20.50.1</span></span><br><span class="line"><span class="meta prompt_">Switch(dhcp-config)#</span><span class="language-bash">dns-server 0.0.0.0</span></span><br><span class="line"><span class="meta prompt_">Switch(dhcp-config)#</span><span class="language-bash">ip dhcp pool vlan702</span></span><br><span class="line"><span class="meta prompt_">Switch(dhcp-config)#</span><span class="language-bash">network 172.20.60.0 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(dhcp-config)#</span><span class="language-bash">default-router 172.20.60.1</span></span><br><span class="line"><span class="meta prompt_">Switch(dhcp-config)#</span><span class="language-bash">dns-server 0.0.0.0</span></span><br><span class="line"><span class="meta prompt_">Switch(dhcp-config)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br></pre></td></tr></table></figure><p>è¿™å‡ æ¡æŒ‡ä»¤çš„ä½œç”¨æ˜¯è®©æ‰€é…ç½®çš„DHCPä¸åˆ†é…ä»¥ä¸‹å‡ ä¸ªIPï¼Œå› ä¸ºè¿™å‡ ä¸ªIPä½œä¸ºç½‘å…³é…ç½®åœ¨è™šæ¥å£Vlan700ã€701ã€702ä¸­ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">ip dhcp excluded-address 172.20.40.1</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">ip dhcp excluded-address 172.20.50.1</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">ip dhcp excluded-address 172.20.60.1</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™é‡Œæˆ‘ä»¬è¦åœ¨PCä¸­æ‰“å¼€DHCPæœåŠ¡å™¢ï¼</p><p><img src="https://user-images.githubusercontent.com/57565901/121639235-d02ae080-cabe-11eb-86f0-db743c54beb4.png" alt="image"><br>å‡ºç°å›¾ä¸Šå³ä¸‹è§’çš„ç”±DHCPæœåŠ¡åˆ†å‘çš„IPï¼Œè¯´æ˜DHCPæœåŠ¡é…ç½®å®Œæˆï¼<br>ä¸‹é¢æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹ä¸»æœºPCä¸MS4çš„è¿é€šæ€§ï¼š</p><p><img src="https://user-images.githubusercontent.com/57565901/121639330-f9e40780-cabe-11eb-82e7-f75abeba880b.png" alt="image"><br>æˆåŠŸï¼ï¼ï¼æˆ‘ä»¬ç»§ç»­å¾€ä¸‹åšã€‚</p><h3 id="0x0204-éª¨å¹²ç½‘ç»œåŒº"><a href="#0x0204-éª¨å¹²ç½‘ç»œåŒº" class="headerlink" title="0x0204: éª¨å¹²ç½‘ç»œåŒº:"></a>0x0204: éª¨å¹²ç½‘ç»œåŒº:</h3><blockquote><p>ä¸ºäº†ä¾¿äºè¯»è€…é˜…è¯»ï¼Œæˆ‘ä»¬å°†ä¸‰å±‚äº¤æ¢æœº<code>Multilayer Switch</code>ç¼©å†™ä¸º<code>MS</code>ã€‚<br>MS0:</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int f0/24</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 321</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int vlan 321</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 10.10.21.253 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span></span><br></pre></td></tr></table></figure><p>MS1:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int fa0/24</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 321</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int vlan 321</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 10.10.21.254 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int fa0/1</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 320</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int vlan 320</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 10.10.20.253 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br></pre></td></tr></table></figure><p>MS3:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int f0/24</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 340</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int vlan 340</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 10.10.40.254 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int f0/1</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 350</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int vlan 350</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 10.10.50.253 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span></span><br></pre></td></tr></table></figure><p>MS4:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int fa0/24</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 331</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int vlan 331</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 10.10.31.253 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br></pre></td></tr></table></figure><p>MS5:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int fa0/24</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 331</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int vlan 331</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 10.10.31.254 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int fa0/1</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 330</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int vlan 330</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 10.10.30.253 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span></span><br></pre></td></tr></table></figure><blockquote><p>MS2å’ŒMS6ä¸¤å°ä¸‰å±‚äº¤æ¢æœºè¦å½¢æˆèšåˆé“¾è·¯,æ‰€ä»¥è¿™é‡Œå•ç‹¬åˆ†å¼€é…ç½®ã€‚</p></blockquote><p>MS2:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int fa0/2</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">channel-group 1 mode on</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport trunk encapsulation dot1Q</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport mode trunk</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int fa0/3</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">channel-group 1 mode on</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport trunk encapsulation dot1Q</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport mode trunk</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int Port-channel 1</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport trunk encapsulation dot1Q</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport mode trunk</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int fa0/1</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 320</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int vlan 320</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 10.10.20.254 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int range f0/2-3</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if-range)#</span><span class="language-bash">switchport access vlan 300</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if-range)#</span><span class="language-bash">int vlan 300</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 10.10.1.253 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int fa0/24</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 340</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int vlan 340</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 10.10.40.253 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int fa0/10</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 341</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int vlan 341</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 10.10.60.253 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br></pre></td></tr></table></figure><p>MS6:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int fa0/1</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 330</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int vlan 330</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 10.10.30.254 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int range fa0/2-3</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if-range)#</span><span class="language-bash">channel-group 1 mode on</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if-range)#</span><span class="language-bash">switchport trunk encapsulation dot1Q</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if-range)#</span><span class="language-bash">switchport mode trunk</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if-range)#</span><span class="language-bash">switchport access vlan 300</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if-range)#</span><span class="language-bash">int vlan 300</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 10.10.1.254 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int fa0/10</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 350</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int vlan 350</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 10.10.70.253 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br></pre></td></tr></table></figure><p>èšåˆé“¾è·¯å®Œæˆï¼ä¸‹é¢æˆ‘ä»¬é…ç½®è·¯ç”±å™¨Router0çš„æ¥å£IPå’Œç½‘å…³ã€‚<br>Router 0:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Router&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Router#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">int e1/1</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">ip address 10.10.70.254 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">int e1/0</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">ip address 10.10.60.254 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">int f0/0</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">ip address 10.10.50.254 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">int f0/1</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">ip address 200.1.1.254 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">no shut</span></span><br></pre></td></tr></table></figure><blockquote><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬æŠŠå…¨éƒ¨çš„æ¥å£å’Œç½‘å…³å·²ç»é…ç½®å¥½äº†ï¼Œä¸‡äº‹å¤§å‰ï¼Œåªæ¬ ä¸œé£(è·¯ç”±ç­–ç•¥)ï¼<br>åªè¦æŠŠè·¯ç”±ç­–ç•¥åšå®Œå°±èƒ½æŠŠæ‰€æœ‰è®¾å¤‡è”é€šï¼Œ<br>ä¸‹é¢æˆ‘ä»¬å°±å¼€å§‹æˆ‘ä»¬ç†Ÿæ‚‰çš„OSPFåŠ¨æ€è·¯ç”±çš„é…ç½®ï¼</p></blockquote><h2 id="0x03-OSPFåŠ¨æ€è·¯ç”±åè®®éƒ¨ç½²"><a href="#0x03-OSPFåŠ¨æ€è·¯ç”±åè®®éƒ¨ç½²" class="headerlink" title="0x03 : OSPFåŠ¨æ€è·¯ç”±åè®®éƒ¨ç½²"></a>0x03 : OSPFåŠ¨æ€è·¯ç”±åè®®éƒ¨ç½²</h2><blockquote><p>å¦‚å›¾ï¼Œæˆ‘å°†åˆ’åˆ†çš„ospfåŒºåŸŸæ ‡æ³¨èµ·æ¥:<br><img src="https://user-images.githubusercontent.com/57565901/121667233-a41e5800-cadc-11eb-8b5b-7f1631692e75.png" alt="image"></p></blockquote><p>MS0:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int loopback0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 1.1.1.1 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span> </span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">ip routing</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">router ospf 1</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">router-id 1.1.1.1</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">log-adjacency-changes</span> </span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 1.1.1.0 0.0.0.255 area 1</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 172.16.0.0 0.0.255.255 area 1</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 10.10.21.0 0.0.0.255 area 1</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br></pre></td></tr></table></figure><p>MS1:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int loopback0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 2.2.2.2 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">ip routing</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">router ospf 1</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">router-id 2.2.2.2</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 2.2.2.0 0.0.0.255 area 1</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 10.10.21.0 0.0.0.255 area 1</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 10.10.20.0 0.0.0.255 area 1</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span></span><br></pre></td></tr></table></figure><p>MS4:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int loopback0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 5.5.5.5 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">ip routing</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">router ospf 2</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">router-id 5.5.5.5</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 5.5.5.0 0.0.0.255 area 2</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 172.20.0.0 0.0.255.255 area 2</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 10.10.31.0 0.0.0.255 area 2</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">log-adjacency-changes</span> </span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span></span><br></pre></td></tr></table></figure><p>MS5:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int loopback0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 6.6.6.6 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">ip routing</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">router ospf 2</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">router-id 6.6.6.6</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 6.6.6.0 0.0.0.255 area 2</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 10.10.31.0 0.0.0.255 area 2</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 10.10.30.0 0.0.0.255 area 2</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">log-adjacency-changes</span> </span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span></span><br></pre></td></tr></table></figure><blockquote><p>ä¸‹é¢é…ç½®èšåˆé“¾è·¯ä¸­çš„OSPFï¼š</p></blockquote><p>MS2:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int loopback0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 3.3.3.3 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">ip routing</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">router ospf 1</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">router-id 3.3.3.3</span> </span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash"><span class="built_in">log</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 3.3.3.0 0.0.0.255 area 0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 10.10.20.0 0.0.0.255 area 1</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 10.10.40.0 0.0.0.255 area 3</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 10.10.1.0 0.0.0.255 area 0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 10.10.60.0 0.0.0.255 area 4</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span></span><br></pre></td></tr></table></figure><p>MS6:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line">Enter configuration commands, one per line.  End with CNTL/Z.</span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">Switch(config)<span class="comment">#int loopback0</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">%LINK-5-CHANGED: Interface Loopback0, changed state to up</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">LINEPROTO-5-UPDOWN: Line protocol on Interface Loopback0, changed state to up</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 7.7.7.7 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">ip routing</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">router ospf 2</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">router-id 7.7.7.7</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash"><span class="built_in">log</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 7.7.7.0 0.0.0.255 area 0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 10.10.30.0 0.0.0.255 area 2</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 10.10.70.0 0.0.0.255 area 4</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 10.10.70.0 0.0.0.255 area 4</span></span><br><span class="line">01:15:16: %OSPF-5-ADJCHG: Process 2, Nbr 6.6.6.6 on Vlan330 network </span><br><span class="line"><span class="meta prompt_">% </span><span class="language-bash">Incomplete <span class="built_in">command</span>.</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">Switch(config-router)<span class="comment">#network 10.10.1.0 0.0.0.255 area 0</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span></span><br></pre></td></tr></table></figure><p>MS3:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int loopback0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 4.4.4.4 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">ip routing</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">router ospf 3</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">router-id 4.4.4.4</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash"><span class="built_in">log</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 4.4.4.0 0.0.0.255 area 3</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 10.10.40.0 0.0.0.255 area 3</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 10.10.50.0 0.0.0.255 area 3</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 192.168.0.0 0.0.255.255 area 3</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">ip route 0.0.0.0 0.0.0.0 10.10.40.253 //æ·»åŠ ç¼ºçœè·¯ç”±</span></span><br></pre></td></tr></table></figure><p>Router0:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Router&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Router#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">int loopback0</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">ip address 8.8.8.8 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">router ospf 4</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash">router 8.8.8.8</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash">router-id 8.8.8.8</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash"><span class="built_in">log</span></span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash">network 8.8.8.0 0.0.0.255 area 4</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash">network 10.10.60.0 0.0.0.255 area 4</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash">network 10.10.70.0 0.0.0.255 area 4</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash">network 200.1.1.0 0.0.0.255 area 4</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash">network 10.10.50.0 0.0.0.255 area 3</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœä½ è·Ÿç€æˆ‘çš„æ­¥éª¤æ¥å†™ï¼Œåˆ°è¿™é‡Œæ‰€æœ‰çš„ä¸»æœºæˆ–è€…æœåŠ¡å™¨éƒ½åº”è¯¥å¯ä»¥ç›¸äº’é€šä¿¡äº†ï¼<br>æ•ˆæœå›¾å¦‚ä¸‹ï¼š</p><p><img src="https://user-images.githubusercontent.com/57565901/121694187-777a3880-cafc-11eb-9a04-f27141203581.png" alt="image"></p><p><img src="https://user-images.githubusercontent.com/57565901/121694398-abedf480-cafc-11eb-95cc-dcedb1016a0b.png" alt="image"></p></blockquote><h2 id="0x04-ACLè®¿é—®æ§åˆ¶åˆ—è¡¨å’ŒNATçš„è®¾ç½®"><a href="#0x04-ACLè®¿é—®æ§åˆ¶åˆ—è¡¨å’ŒNATçš„è®¾ç½®" class="headerlink" title="0x04 :ACLè®¿é—®æ§åˆ¶åˆ—è¡¨å’ŒNATçš„è®¾ç½®:"></a>0x04 :ACLè®¿é—®æ§åˆ¶åˆ—è¡¨å’ŒNATçš„è®¾ç½®:</h2><blockquote><p>é¢˜ç›®è¦æ±‚ï¼š<br>MS3ï¼š<br>1.ACL 101ç¦æ­¢å­¦ç”Ÿå®¿èˆåŒºè®¿é—®å†…ç½‘PRIæœåŠ¡å™¨ï¼Œè™šæ¥å£é…ç½®101 in<br>2.ACL 101åªå…è®¸è®¿é—®192.168.3.1 tcp80ç«¯å£</p><p>Router 0ï¼š<br>ACL101:permit 172.16.0.0&#x2F;16<br>ACL102:permit 172.20.0.0&#x2F;16<br>ACL103:permit 192.168.0.0&#x2F;16</p></blockquote><p>MS3:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">access-list 101 permit tcp any 192.168.3.1 0.0.0.255 eq 80</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">access-list 101 deny ip 172.20.0.0 0.0.255.255 host 192.168.1.1</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">access-list 101 deny ip any 192.168.3.1 0.0.0.255</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">access-list 101 permit ip any any</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int vlan 340</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip access-group 101 <span class="keyword">in</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int vlan 350</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip access-group 101 <span class="keyword">in</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br></pre></td></tr></table></figure><blockquote><p>æ­¤å¤„æ³¨æ„natç›¸å…³çš„æ ‡å‡†è®¿é—®æ§åˆ¶åˆ—è¡¨aclåªèƒ½æ˜¯è·¯ç”±å™¨æ¥å£inæ–¹å‘<br>Router0:</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Router&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Router#</span><span class="language-bash">conf t</span></span><br><span class="line">Enter configuration commands, one per line.  End with CNTL/Z.</span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">access-list 101 permit ip 172.16.0.0 0.0.255.255 any</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">access-list 101 deny ip any any</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">access-list 102 permit ip 172.20.0.0 0.0.255.255 any</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">access-list 102 deny ip any any</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">access-list 103 permit ip 192.168.0.0 0.0.255.255 any</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">access-list 103 deny ip any any</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">ip nat pool pool-teacher 200.1.1.31 200.1.1.100 netmask 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">ip nat pool pool-student 200.1.1.101 200.1.1.230 netmask 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">ip nat pool pool-admin 200.1.1.231 200.1.1.240 netmask 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">ip nat inside <span class="built_in">source</span> list 101 pool pool-teacher</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">ip nat inside <span class="built_in">source</span> list 102 pool pool-student</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">ip nat inside <span class="built_in">source</span> list 103 pool pool-admin</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">int fa0/0</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">ip nat inside</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">int e1/0</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">ip nat inside</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">int e1/1</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">ip nat inside</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">int f0/1</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">ip nat outside</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line">//è®¾ç½®é™æ€nat</span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">ip nat inside <span class="built_in">source</span> static 192.168.3.1 200.1.1.242</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">ip nat inside <span class="built_in">source</span> static 192.168.2.1 200.1.1.241</span></span><br></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œæˆ‘ä»¬å¯ä»¥æµ‹è¯•ä¸€ä¸‹NATåè®®ï¼Œç”¨å¤–ç½‘ä¸»æœº(<a target="_blank" rel="noopener" href="http://www.internet-server.com)è®¿é—®www.ecjtu.jx.cnçš„å¤–ç½‘ip/">www.internet-server.com)è®¿é—®www.ecjtu.jx.cnçš„å¤–ç½‘IP</a>:</p><p><img src="https://user-images.githubusercontent.com/57565901/121711207-eb244180-cb0c-11eb-9872-456dbae3655d.png" alt="image"></p><p>ä½†è¿™åªèƒ½è¯æ˜æˆ‘ä»¬çš„é™æ€NATèµ·ä½œç”¨äº†ï¼Œå½“æˆ‘ä»¬è¦æµ‹è¯•åŠ¨æ€NATçš„æ—¶å€™æ€ä¹ˆåŠå‘¢qwq<br>å½“ç„¶æ˜¯é€šè¿‡è·¯ç”±å™¨çš„NATè¡¨äº†ï¼Œä¸è¿‡å¾—å…ˆé€šè¿‡NATè®¿é—®ä¸€éå¯¹åº”çš„ä¸»æœºã€‚</p><p><img src="https://user-images.githubusercontent.com/57565901/121711427-2f174680-cb0d-11eb-9feb-c07d0523bf8f.png" alt="image"><br>ç„¶åæˆ‘ä»¬æŸ¥çœ‹NATè¡¨ï¼š</p><p><img src="https://user-images.githubusercontent.com/57565901/121711530-48b88e00-cb0d-11eb-890e-a15e4ce55302.png" alt="image"><br>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœˆèµ·æ¥çš„é‚£äº›IPéƒ½æ˜¯æˆ‘ä»¬åˆ’åˆ†çš„NATæ± é‡Œé¢çš„IPï¼Œ<br>åˆ†åˆ«æ˜¯æ•™å­¦åŒºã€å­¦ç”Ÿå®¿èˆåŒºã€ç®¡ç†å‘˜åŒºçš„IPã€‚<br>åˆ°è¿™é‡Œæˆ‘ä»¬çš„NATå’ŒACLçš„åˆ’åˆ†å·²ç»å®Œæˆäº†ã€‚</p><h2 id="0x05-DNSæœåŠ¡å™¨çš„é…ç½®"><a href="#0x05-DNSæœåŠ¡å™¨çš„é…ç½®" class="headerlink" title="0x05 : DNSæœåŠ¡å™¨çš„é…ç½®"></a>0x05 : DNSæœåŠ¡å™¨çš„é…ç½®</h2><p>æœ€åçš„DNSæœåŠ¡å™¨çš„é…ç½®å°±æ¯”è¾ƒç®€å•äº†ï¼Œé€šè¿‡Cisco Packet Tracerå›¾å½¢åŒ–ç•Œé¢ç‚¹å¼€æœåŠ¡å™¨ï¼Œè¿›å…¥å¦‚ä¸‹ç•Œé¢ï¼š<br><img src="https://user-images.githubusercontent.com/57565901/121712024-d300f200-cb0d-11eb-84d7-d3d8558e7683.png" alt="image"></p><p>åˆ†åˆ«å¡«å…¥åŸŸåå’Œå¯¹åº”çš„IPåœ°å€å°±è¡Œäº†ã€‚<br>æˆ‘ä»¬å°†DNSæœåŠ¡å™¨IPå¡«å…¥ä¸»æœºè¿›è¡Œæµ‹è¯•ï¼š</p><p><img src="https://user-images.githubusercontent.com/57565901/121712100-ed3ad000-cb0d-11eb-9181-6a9f6c27355a.png" alt="image"></p><p>æ¥ä¸‹æ¥è®¿é—®<a target="_blank" rel="noopener" href="http://www.ecjtu.jx.cn/">www.ecjtu.jx.cn</a>:</p><p><img src="https://user-images.githubusercontent.com/57565901/121712147-004da000-cb0e-11eb-9a25-9df0b1b3e540.png" alt="image"></p><h2 id="0x06-è‡³æ­¤æˆ‘ä»¬å®Œæˆäº†æ ¡å›­ç½‘å®éªŒæ‰€æœ‰çš„å®éªŒè¦æ±‚"><a href="#0x06-è‡³æ­¤æˆ‘ä»¬å®Œæˆäº†æ ¡å›­ç½‘å®éªŒæ‰€æœ‰çš„å®éªŒè¦æ±‚" class="headerlink" title="0x06:è‡³æ­¤æˆ‘ä»¬å®Œæˆäº†æ ¡å›­ç½‘å®éªŒæ‰€æœ‰çš„å®éªŒè¦æ±‚"></a>0x06:è‡³æ­¤æˆ‘ä»¬å®Œæˆäº†æ ¡å›­ç½‘å®éªŒæ‰€æœ‰çš„å®éªŒè¦æ±‚</h2><p>æ‰€æœ‰å‘½ä»¤ã€æˆªå›¾éƒ½ä¸ºæœ¬äººå®Œæˆï¼Œä»…ä¾›å‚è€ƒï¼Œæ‹’ç»è½¬è½½ã€‚   </p><p>By Auspic1ous å¤§äºŒèœé¸¡  </p><h1 id="æ¬¢è¿å¤§å®¶åœ¨ä¸‹æ–¹è¯„è®º"><a href="#æ¬¢è¿å¤§å®¶åœ¨ä¸‹æ–¹è¯„è®º" class="headerlink" title="æ¬¢è¿å¤§å®¶åœ¨ä¸‹æ–¹è¯„è®º"></a>æ¬¢è¿å¤§å®¶åœ¨ä¸‹æ–¹è¯„è®º</h1>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå®‰å…¨ </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå®‰å…¨ </tag>
            
            <tag> Web </tag>
            
            <tag> Ciscoæ¨¡æ‹Ÿå™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œæ‹“æ‰‘å®éªŒä¹‹æ ¡å›­ç½‘çš„æ„å»º1</title>
      <link href="/2021/03/06/02d6fe92269a-q1jun/"/>
      <url>/2021/03/06/02d6fe92269a-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="ecjtu-Network-lab6"><a href="#ecjtu-Network-lab6" class="headerlink" title="ecjtu-Network-lab6"></a>ecjtu-Network-lab6</h1><p>åä¸œäº¤é€šå¤§å­¦è®¡ç®—æœºç½‘ç»œå®éªŒå…­ Cisco Packet Tracer  V8.0.0</p><p>ï¼ˆä¸€ï¼‰æ ¡å›­ç½‘è®¾è®¡ç¤ºä¾‹1ï¼ˆå¿…åšå†…å®¹ï¼‰</p><p>ï¼ˆ1ï¼‰æŸå­¦é™¢æœ‰æ•™èŒå·¥50äººï¼Œå¹³å‡åˆ†å¸ƒåœ¨æ•™å­¦æ¥¼1å’Œæ•™å­¦æ¥¼2ï¼Œå­¦ç”Ÿ400äººï¼Œå¹³å‡åˆ†å¸ƒåœ¨å®¿èˆæ¥¼1å’Œå®¿èˆæ¥¼2ï¼Œæœ‰ä¸€ä¸ªæ•°æ®ä¸­å¿ƒæœåŠ¡å™¨ã€‚<br>ï¼ˆ2ï¼‰æ¯æ ‹æ•™å­¦æ¥¼å’Œå®¿èˆæ¥¼åˆ†åˆ«è®¾ç½®ä¸ºä¸åŒçš„VLANç½‘æ®µï¼Œæ•™å­¦æ¥¼é€šè¿‡æ±‡èšè·¯ç”±å™¨è¿æ¥åˆ°å­¦é™¢çš„æ ¸å¿ƒè·¯ç”±å™¨ï¼Œå®¿èˆæ¥¼é€šè¿‡ä¸‰å±‚äº¤æ¢æœºè¿æ¥åˆ°å­¦é™¢çš„æ ¸å¿ƒè·¯ç”±å™¨ã€‚æ•°æ®ä¸­å¿ƒæœåŠ¡å™¨ä½œä¸ºä¸€ä¸ªç‹¬ç«‹ç½‘æ®µè¿æ¥åˆ°æ ¸å¿ƒè·¯ç”±å™¨ã€‚<br>ï¼ˆ3ï¼‰å­¦é™¢æ ¸å¿ƒè·¯ç”±å™¨é€šè¿‡serialæ¥å£è¿æ¥åˆ°ISPçš„è·¯ç”±å™¨ï¼Œä»è€Œè¿æ¥åˆ°äº’è”ç½‘ã€‚<br>ï¼ˆ4ï¼‰é‡‡ç”¨åˆé€‚çš„è·¯ç”±é…ç½®ç­–ç•¥ï¼ˆé™æ€è·¯ç”±ã€RIPåè®®ã€OSPFåè®®ï¼‰ï¼Œä½¿å¾—å­¦é™¢ç½‘ç»œå†…éƒ¨äº’è”äº’é€šã€‚<br>ï¼ˆ5ï¼‰åœ¨å­¦é™¢æ ¸å¿ƒè·¯ç”±å™¨ä¸Šé…ç½®åˆé€‚çš„NATï¼Œä½¿å¾—å®¿èˆæ¥¼1å’Œå®¿èˆæ¥¼2æ‰€å±å­ç½‘èŒƒå›´èƒ½è®¿é—®å¤–ç½‘ï¼Œè€Œæ•™å­¦æ¥¼1å’Œæ•™å­¦æ¥¼2æ‰€å±å­ç½‘èŒƒå›´ä¸èƒ½è®¿é—®å¤–ç½‘ã€‚<br>ï¼ˆ6ï¼‰åœ¨å­¦é™¢æ ¸å¿ƒè·¯ç”±å™¨ä¸Šè®¾ç½®æ ‡å‡†ACLæˆ–æ‰©å±•ACLï¼Œå…è®¸æ•™å­¦æ¥¼çš„ç”¨æˆ·åªå¯ä»¥è®¿é—®æ•°æ®ä¸­å¿ƒæœåŠ¡å™¨çš„WWWæœåŠ¡å’ŒFTPæœåŠ¡ã€‚å…è®¸å®¿èˆæ¥¼çš„ç”¨æˆ·å¯ä»¥è®¿é—®å¤–ç½‘çš„èµ„æºï¼Œä¹Ÿèƒ½è®¿é—®æ•™å­¦æ¥¼çš„èµ„æºï¼Œå…¶ä½™çš„éƒ½ä¸å¯ä»¥è®¿é—®ã€‚</p><p>è¯·æ ¹æ®ä»¥ä¸Šéœ€æ±‚ï¼Œç»™å‡ºå­¦é™¢çš„å…·ä½“ç½‘ç»œè®¾è®¡æ–¹æ¡ˆï¼Œå„æ¥¼æ ‹åˆ†å¸ƒä¸èŠ‚ç‚¹æ•°éœ€æ±‚ï¼Œç”»å‡ºç½‘ç»œæ‹“æ‰‘ç»“æ„è®¾è®¡å›¾ï¼Œç»™å‡ºVLAN åŠ æ‰€æœ‰IP åœ°å€è§„åˆ’ï¼Œå®Œæˆè®¾å¤‡é€‰å‹ï¼Œè¯¦ç»†å®éªŒé…ç½®ç­‰ã€‚å¹¶å°†ä»¥ä¸Šæ‰€æœ‰å†…å®¹è®°å½•åœ¨å®éªŒæŠ¥å‘Šä¸Šã€‚</p><h2 id="0x01-æŒ‰ç…§æ‹“æ‰‘å›¾æ·»åŠ å¥½è®¾å¤‡ï¼Œå¹¶æ ‡æ˜æ¥å£å’ŒIPç­‰ç­‰"><a href="#0x01-æŒ‰ç…§æ‹“æ‰‘å›¾æ·»åŠ å¥½è®¾å¤‡ï¼Œå¹¶æ ‡æ˜æ¥å£å’ŒIPç­‰ç­‰" class="headerlink" title="0x01:æŒ‰ç…§æ‹“æ‰‘å›¾æ·»åŠ å¥½è®¾å¤‡ï¼Œå¹¶æ ‡æ˜æ¥å£å’ŒIPç­‰ç­‰"></a>0x01:æŒ‰ç…§æ‹“æ‰‘å›¾æ·»åŠ å¥½è®¾å¤‡ï¼Œå¹¶æ ‡æ˜æ¥å£å’ŒIPç­‰ç­‰</h2><p><img src="https://user-images.githubusercontent.com/57565901/121010883-8abd9900-c7c8-11eb-9a8b-440e22b6dc99.png" alt="image"></p><blockquote><p>æ³¨æ„å…¶ä¸­æ ¸å¿ƒè·¯ç”±å™¨Router1ï¼Œæˆ‘ä»¬è¦å…ˆå…³é—­ç”µæºï¼Œæ·»åŠ æ¥å£æ¨¡å— <code>NM-2FE2W</code> å’Œ <code>WIC-1T</code> ï¼š<br><img src="https://user-images.githubusercontent.com/57565901/121011001-b17bcf80-c7c8-11eb-9774-01a7cd08fca4.png" alt="image"></p></blockquote><h2 id="0x02-ä¸‹é¢ä¾¿æ˜¯é…ç½®è®¡ç®—æœºIPã€ç½‘å…³ã€æ©ç å’Œè·¯ç”±å™¨ç«¯å£äº†"><a href="#0x02-ä¸‹é¢ä¾¿æ˜¯é…ç½®è®¡ç®—æœºIPã€ç½‘å…³ã€æ©ç å’Œè·¯ç”±å™¨ç«¯å£äº†" class="headerlink" title="0x02:ä¸‹é¢ä¾¿æ˜¯é…ç½®è®¡ç®—æœºIPã€ç½‘å…³ã€æ©ç å’Œè·¯ç”±å™¨ç«¯å£äº†"></a>0x02:ä¸‹é¢ä¾¿æ˜¯é…ç½®è®¡ç®—æœºIPã€ç½‘å…³ã€æ©ç å’Œè·¯ç”±å™¨ç«¯å£äº†</h2><p><img src="https://user-images.githubusercontent.com/57565901/121011872-b0976d80-c7c9-11eb-85b6-3f496f9f864b.png" alt="image"></p><blockquote><p>æ³¨æ„å³ä¸Šè§’ä¸‰å±‚äº¤æ¢æœºè¿™é‡Œçš„èŠ‚ç‚¹IPåœ°å€æ˜¯æ²¡æœ‰ç»™å‡ºçš„ï¼Œ<br>è¿™é‡Œæˆ‘ä»¬æ ¹æ®ä¸‹é¢çš„ç½‘å…³å‘½åä¹ æƒ¯æ¨ç®—å‡ºæ­¤å¤„ç½‘å…³ä¸º<code>10.1.1.254/24</code><br><img src="https://user-images.githubusercontent.com/57565901/121012526-619e0800-c7ca-11eb-97b4-0892eb1e345c.png" alt="image"></p></blockquote><p>å…¶ä»–çš„PCå’Œserverç®€å•çš„é…ç½®ä¸€ä¸‹IPã€ç½‘å…³ã€æ©ç å°±è¡Œï¼Œæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„åœ°æ–¹ã€‚</p><p>é…ç½®[Router2]çš„f0&#x2F;1.1å’Œf0&#x2F;1.2ä¸¤ä¸ªå­ç«¯å£çš„å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Router&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Router#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">int fa0/1  //å¼€å¯ç«¯å£fa0/1</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">int fa0/1.1</span></span><br><span class="line"><span class="meta prompt_">Router(config-subif)#</span><span class="language-bash">encapsulation dot1q 2</span> </span><br><span class="line">//é‡è¦æŒ‡ä»¤ï¼Œdot1Qä¸ºè¿™ä¸ªæ¥å£é…ç½®802.1Qåè®® ï¼Œæœ€åçš„2æ˜¯è®¾ç½®ä¸ºvlan2çš„æ„æ€</span><br><span class="line"><span class="meta prompt_">Router(config-subif)#</span><span class="language-bash">ip add 192.168.2.254 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Router(config-subif)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Router(config-subif)#</span><span class="language-bash">int fa0/1.2</span></span><br><span class="line"><span class="meta prompt_">Router(config-subif)#</span><span class="language-bash">encapsulation dot1q 3</span></span><br><span class="line"><span class="meta prompt_">Router(config-subif)#</span><span class="language-bash">ip add 192.168.3.254 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Router(config-subif)#</span><span class="language-bash">no shut</span> </span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">int fa0/0</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">ip address 192.168.4.100 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">no shut</span></span><br></pre></td></tr></table></figure><p>è®¾ç½®äº¤æ¢æœº[Switch 1]çš„f0&#x2F;1ä¸ºtrunkæ¨¡å¼(Switch 2åŒç†)ï¼Œåˆ’åˆ†VLAN:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int fa0/1</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport mode trunk</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport trunk allowed vlan all</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int fa0/2</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 2</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int fa0/3</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 3</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br></pre></td></tr></table></figure><p>é…ç½®ä¸‰å±‚äº¤æ¢æœºMS1:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">vlan 10</span></span><br><span class="line"><span class="meta prompt_">Switch(config-vlan)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">vlan 20</span></span><br><span class="line"><span class="meta prompt_">Switch(config-vlan)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int fa0/2</span> </span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 20</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int fa0/1</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 10</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int vlan 10</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 10.1.2.100 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int vlan 20</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip address 10.1.1.254 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br></pre></td></tr></table></figure><p>é…ç½®ä¸‰å±‚äº¤æ¢æœºMS2:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int fa0/1</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 5 //è¿™é‡Œå†™vlan 4æˆ–è€…vlan 5éƒ½å¯ä»¥,è™šæ¥å£</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int vlan 4</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip add 172.16.4.254 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">int vlan 5</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip add 172.16.5.254 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int vlan 10</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int fa0/2</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">switchport access vlan 10</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int vlan 10 //é…ç½®ä¸€ä¸ªvlan10è™šæ¥å£ä½œä¸ºè·¯ç”±å‡ºå£</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip add 172.16.1.100 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br></pre></td></tr></table></figure><h2 id="0x03-åŠ¨æ€è·¯ç”±-OSPFåè®®ï¼š"><a href="#0x03-åŠ¨æ€è·¯ç”±-OSPFåè®®ï¼š" class="headerlink" title="0x03:åŠ¨æ€è·¯ç”±-OSPFåè®®ï¼š"></a>0x03:åŠ¨æ€è·¯ç”±-OSPFåè®®ï¼š</h2><p>å…³äºospfã€bgpä¸­çš„Router-IDå’Œloopbackæ¥å£ï¼š</p><blockquote><p>åŠ¨æ€è·¯ç”±åè®®OSPF ã€BGP åœ¨è¿è¡Œè¿‡ç¨‹ä¸­éœ€è¦ä¸ºè¯¥åè®®æŒ‡å®šä¸€ä¸ªRouter idï¼Œä½œä¸ºæ­¤è·¯ç”±å™¨çš„å”¯ä¸€æ ‡è¯†ï¼Œå¹¶è¦æ±‚åœ¨æ•´ä¸ªè‡ªæ²»ç³»ç»Ÿå†…å”¯ä¸€ã€‚ç”±äºrouter id æ˜¯ä¸€ä¸ª32 ä½çš„æ— ç¬¦å·æ•´æ•°ï¼Œè¿™ä¸€ç‚¹ä¸IPåœ°å€ååˆ†ç›¸åƒã€‚è€Œä¸”IP åœ°å€æ˜¯ä¸ä¼šå‡ºç°é‡å¤ç°è±¡çš„ï¼Œæ‰€ä»¥é€šå¸¸å°†è·¯ç”±å™¨çš„router idæŒ‡å®šä¸ºä¸è¯¥è®¾å¤‡ä¸Šçš„æŸä¸ªæ¥å£çš„åœ°å€ç›¸åŒã€‚ç”±äºloopback æ¥å£çš„IP åœ°å€é€šå¸¸è¢«è§†ä¸ºè·¯ç”±å™¨çš„æ ‡è¯†ï¼Œæ‰€ä»¥ä¹Ÿå°±æˆäº†router idçš„æœ€ä½³é€‰æ‹©ã€‚</p></blockquote><h3 id="0x0301-å…³äºospfä¸­åŒºåŸŸareaçš„åˆ’åˆ†å¦‚ä¸‹-ä¸­é—´çš„ç»ˆç«¯è·¯ç”±å™¨ä¸ºarea-0ä½œä¸ºéª¨å¹²ç½‘ç»œè¿æ¥å…¶ä»–ç½‘ç»œ"><a href="#0x0301-å…³äºospfä¸­åŒºåŸŸareaçš„åˆ’åˆ†å¦‚ä¸‹-ä¸­é—´çš„ç»ˆç«¯è·¯ç”±å™¨ä¸ºarea-0ä½œä¸ºéª¨å¹²ç½‘ç»œè¿æ¥å…¶ä»–ç½‘ç»œ" class="headerlink" title="0x0301:å…³äºospfä¸­åŒºåŸŸareaçš„åˆ’åˆ†å¦‚ä¸‹,ä¸­é—´çš„ç»ˆç«¯è·¯ç”±å™¨ä¸ºarea 0ä½œä¸ºéª¨å¹²ç½‘ç»œè¿æ¥å…¶ä»–ç½‘ç»œ:"></a>0x0301:å…³äºospfä¸­åŒºåŸŸ<code>area</code>çš„åˆ’åˆ†å¦‚ä¸‹,ä¸­é—´çš„ç»ˆç«¯è·¯ç”±å™¨ä¸º<code>area 0</code>ä½œä¸ºéª¨å¹²ç½‘ç»œè¿æ¥å…¶ä»–ç½‘ç»œ:</h3><p><img src="https://user-images.githubusercontent.com/57565901/121023330-c3b03a80-c7d5-11eb-84b3-2dcc540634aa.png" alt="image"></p><h3 id="0x0301-åŠ¨æ€è·¯ç”±é…ç½®å‘½ä»¤ï¼š"><a href="#0x0301-åŠ¨æ€è·¯ç”±é…ç½®å‘½ä»¤ï¼š" class="headerlink" title="0x0301:åŠ¨æ€è·¯ç”±é…ç½®å‘½ä»¤ï¼š"></a>0x0301:åŠ¨æ€è·¯ç”±é…ç½®å‘½ä»¤ï¼š</h3><p>Router ISP:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">int loopback0 //è®¾ç½®å›ç¯æ¥å£</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">ip address 1.1.1.1 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">router ospf 1</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash">router-id 1.1.1.1 //è®¾ç½®è·¯ç”±ID</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash">network 202.121.241.0 0.0.0.255 area 1</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash">network 219.220.240.0 0.0.0.255 area 1</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash">network 1.1.1.0 0.0.0.255 area 1</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash">network 5.5.5.0 0.0.0.255 area 0 //5.5.5.0ä¸ºæ ¸å¿ƒç½‘ç»œå·</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash">log-adjacency-changes  //å¼€å¯æ—¥å¿—æç¤º</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">ip route 0.0.0.0 0.0.0.0 202.121.241.8</span></span><br></pre></td></tr></table></figure><p>Router1:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Router&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Router#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">int loopback0</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">ip add 5.5.5.5 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">router ospf 5</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash">router-id 5.5.5.5</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash">network 5.5.5.0 0.0.0.255 area 0</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash">network 202.121.241.0 0.0.0.255 area 1</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash">network 10.1.2.0 0.0.0.255 area 2</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash">network 192.168.4.0 0.0.0.255 area 3</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash">network 172.16.1.0 0.0.0.255 area 4</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash">log-adjacency-changes //å¼€å¯æ—¥å¿—åŠŸèƒ½</span></span><br></pre></td></tr></table></figure><p>Router2:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">int loopback0</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">ip add 3.3.3.3 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">router ospf 3</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash">router-id 3.3.3.3</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash">network 5.5.5.0 0.0.0.255 area 0</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash">network 192.168.4.0 0.0.0.255 area 3</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash">network 192.168.2.0 0.0.0.255 area 3</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash">network 192.168.3.0 0.0.0.255 area 3</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash">network 3.3.3.0 0.0.0.255 area 3</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash">log-adjacency-changes //å¼€å¯æ—¥å¿—åŠŸèƒ½</span></span><br><span class="line"><span class="meta prompt_">Router(config-router)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">ip route 0.0.0.0 0.0.0.0 192.168.4.101</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">end</span></span><br><span class="line"><span class="meta prompt_">Router#</span></span><br></pre></td></tr></table></figure><p>MS1:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int loopback0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip add 2.2.2.2 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">ip routing</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">router ospf 2</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">router-id 2.2.2.2</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 2.2.2.0 0.0.0.255 area 2</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 10.1.2.0 0.0.0.255 area 2</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 10.1.1.0 0.0.0.255 area 2</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 5.5.5.0 0.0.0.255 area 0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">log-adjacency-changes</span> </span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">ip route 0.0.0.0 0.0.0.0 10.1.2.101</span></span><br></pre></td></tr></table></figure><p>MS2:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Switch#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">int loopback0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">ip add 4.4.4.4 255.255.255.0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash">no shut</span></span><br><span class="line"><span class="meta prompt_">Switch(config-if)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">ip routing</span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash">router ospf 4</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">router-id 4.4.4.4</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 4.4.4.0 0.0.0.255 area 4</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 172.16.1.0 0.0.0.255 area 4</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 5.5.5.0 0.0.0.255 area 0</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 172.16.4.0 0.0.0.255 area 4</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">network 172.16.5.0 0.0.0.255 area 4</span></span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash">log-adjacency-changes</span> </span><br><span class="line"><span class="meta prompt_">Switch(config-router)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Switch(config)#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">Switch(config)<span class="comment">#ip route 0.0.0.0 0.0.0.0 172.16.1.101 //ç¼ºçœè·¯ç”±</span></span></span><br></pre></td></tr></table></figure><p>è¿é€šæ•ˆæœå›¾ï¼š<br><img src="https://user-images.githubusercontent.com/57565901/121059622-40eaa800-c7f4-11eb-8a56-9187653606e0.png" alt="image"></p><h2 id="0x04-è‡³æ­¤æ‰€æœ‰è®¾å¤‡å‡å¯ä»¥å®Œæˆé€šè®¯-å‰©ä¸‹çš„å°±æ˜¯NATåè®®å’ŒACLç­–ç•¥ç»„çš„å¸ƒç½®äº†"><a href="#0x04-è‡³æ­¤æ‰€æœ‰è®¾å¤‡å‡å¯ä»¥å®Œæˆé€šè®¯-å‰©ä¸‹çš„å°±æ˜¯NATåè®®å’ŒACLç­–ç•¥ç»„çš„å¸ƒç½®äº†" class="headerlink" title="0x04:è‡³æ­¤æ‰€æœ‰è®¾å¤‡å‡å¯ä»¥å®Œæˆé€šè®¯,å‰©ä¸‹çš„å°±æ˜¯NATåè®®å’ŒACLç­–ç•¥ç»„çš„å¸ƒç½®äº†"></a>0x04:è‡³æ­¤æ‰€æœ‰è®¾å¤‡å‡å¯ä»¥å®Œæˆé€šè®¯,å‰©ä¸‹çš„å°±æ˜¯NATåè®®å’ŒACLç­–ç•¥ç»„çš„å¸ƒç½®äº†</h2><p>  æ ‡å‡†IPè®¿é—®æ§åˆ¶åˆ—è¡¨ï¼Œä¸€ä¸ªæ ‡å‡†IPè®¿é—®æ§åˆ¶åˆ—è¡¨åŒ¹é…IPåè®®åŒ…é’Ÿçš„æºåœ°å€æˆ–æºåœ°å€ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œ<br>å¯å¯¹åŒ¹é…çš„åè®®åŒ…é‡‡å–æ‹’ç»æˆ–å…è®¸ä¸¤ä¸ªæ“ä½œã€‚ç¼–å·èŒƒå›´æ˜¯ä»1~99.</p><p>  æ‰©å±•IPè®¿é—®æ§åˆ¶åˆ—è¡¨ï¼Œæ‰©å±•IPè®¿é—®æ§åˆ¶åˆ—è¡¨æ¯”æ ‡å‡†IPè®¿é—®æ§åˆ¶åˆ—è¡¨å…·æœ‰æ›´å¤šçš„åŒ¹é…é¡¹ï¼Œ<br>åŒ…æ‹¬åè®®ç±»å‹ã€æºåœ°å€ã€ç›®çš„åœ°å€ã€æºç«¯å£ã€ç›®çš„ç«¯å£ã€å»ºç«‹è¿æ¥çš„å’ŒIPä¼˜å…ˆçº§ç­‰ã€‚<br>ç¼–å·èŒƒå›´æ˜¯ä»100~199</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è¿™é‡Œæˆ‘ä»¬å†çœ‹çœ‹è¯¥å®éªŒçš„è¦æ±‚ï¼š</span><br><span class="line">  ï¼ˆ5ï¼‰åœ¨å­¦é™¢æ ¸å¿ƒè·¯ç”±å™¨ä¸Šé…ç½®åˆé€‚çš„NATï¼Œä½¿å¾—å®¿èˆæ¥¼1å’Œå®¿èˆæ¥¼2æ‰€å±å­ç½‘èŒƒå›´èƒ½è®¿é—®å¤–ç½‘ï¼Œè€Œæ•™å­¦æ¥¼1å’Œæ•™å­¦æ¥¼2æ‰€å±å­ç½‘èŒƒå›´ä¸èƒ½è®¿é—®å¤–ç½‘ã€‚</span><br><span class="line">  ï¼ˆ6ï¼‰åœ¨å­¦é™¢æ ¸å¿ƒè·¯ç”±å™¨ä¸Šè®¾ç½®æ ‡å‡†ACLæˆ–æ‰©å±•ACLï¼Œå…è®¸æ•™å­¦æ¥¼çš„ç”¨æˆ·åªå¯ä»¥è®¿é—®æ•°æ®ä¸­å¿ƒæœåŠ¡å™¨çš„WWWæœåŠ¡å’ŒFTPæœåŠ¡ã€‚</span><br><span class="line">å…è®¸å®¿èˆæ¥¼çš„ç”¨æˆ·å¯ä»¥è®¿é—®å¤–ç½‘çš„èµ„æºï¼Œä¹Ÿèƒ½è®¿é—®æ•™å­¦æ¥¼çš„èµ„æºï¼Œå…¶ä½™çš„éƒ½ä¸å¯ä»¥è®¿é—®ã€‚</span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡ŒWWWæœåŠ¡å³TCPåè®®ç«¯å£é»˜è®¤ä¸º80ï¼ŒFTPæ–‡ä»¶ä¼ è¾“åè®®é»˜è®¤ç«¯å£ä¸º21ã€‚</p></blockquote><p>å› ä¸ºè¦ä½¿<code>å®¿èˆæ¥¼1</code>å’Œ<code>å®¿èˆæ¥¼2</code>èƒ½è®¿é—®å¤–ç½‘ï¼Œè€Œ<code>æ•™å­¦æ¥¼1</code>å’Œ<code>æ•™å­¦æ¥¼2</code>ä¸èƒ½è®¿é—®å¤–ç½‘ï¼Œ<br>æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å¯¹æ•™å­¦æ¥¼æ‰€å±ç½‘æ®µè®¾ç½®å¯¹åº”çš„åŠ¨æ€NATå³å¯</p><blockquote><p>æ­¤å¤„æ³¨æ„natç›¸å…³çš„æ ‡å‡†è®¿é—®æ§åˆ¶åˆ—è¡¨aclåªèƒ½æ˜¯è·¯ç”±å™¨æ¥å£inæ–¹å‘</p></blockquote><p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåŠ¨æ€NATçš„åœ°å€æ± ä¸ºï¼š202.121.241.9~202.121.241.100 (å­ç½‘æ©ç &#x2F;24)<br>å¯¹äºæ ¸å¿ƒè·¯ç”±å™¨Router 1:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Router&gt;</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Router#</span><span class="language-bash">conf t</span></span><br><span class="line">Enter configuration commands, one per line.  End with CNTL/Z.</span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">access-list 10 permit 172.16.0.0 0.0.255.255</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">access-list 10 deny any</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">int fa1/0</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">ip access-group 10 <span class="keyword">in</span></span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line">//åˆ›å»ºä¸€ä¸ªåœ°å€æ± ,åœ°å€æ± å‘½åä¸ºnat-pool_1 </span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">ip nat pool nat-pool_1 202.121.241.9 202.121.241.100 netmask 255.255.255.0</span></span><br><span class="line">//è®¾ç½®åœ°å€æ± nat-pool_1åˆ°insideæ–¹å‘ï¼Œé™„åŠ è®¿é—®æ§åˆ¶åˆ—è¡¨10</span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">ip nat inside <span class="built_in">source</span> list 10 pool nat-pool_1</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">int fa1/0</span></span><br><span class="line">//è®¾ç½®æ¥å£fa1/0ä¸ºNATå†…æ¥å£</span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">ip nat inside</span></span><br><span class="line">//è®¾ç½®æ¥å£s0/3/0ä¸ºNATå¤–æ¥å£</span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">int s0/3/0</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">ip nat outside</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•åˆšåˆšé…ç½®çš„åŠ¨æ€NATï¼Œè®©å®¿èˆæ¥¼1å’Œå®¿èˆæ¥¼2çš„PCä¸å¤–ç½‘è®¾å¤‡é€šä¿¡,é€šè¿‡ä»¥ä¸‹æŒ‡ä»¤æŸ¥çœ‹åŠ¨æ€è·¯ç”±ç»“æœ:<br>è¿™é‡Œå¯ä»¥å‘ç°ç¬¬ä¸€åˆ—inside global ä¸­å‡ºç°äº†æˆ‘ä»¬å»ºå¥½çš„åœ°å€æ± ä¸­çš„IP</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Router#</span><span class="language-bash">sh ip nat translations</span> </span><br><span class="line">Pro  Inside global     Inside local       Outside local      Outside global</span><br><span class="line">icmp 202.121.241.10:1  172.16.5.22:1      219.220.240.101:1  219.220.240.101:1</span><br><span class="line">icmp 202.121.241.9:2   172.16.4.22:2      219.220.240.101:2  219.220.240.101:2</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬å®Œæˆäº†å®¿èˆæ¥¼é€šè¿‡NATè®¿é—®å¤–ç½‘,ä¸‹é¢è®¾ç½®çš„ACLå°†ä»¤æ•™å­¦æ¥¼1å’Œæ•™å­¦æ¥¼2ä¸èƒ½è®¿é—®å¤–ç½‘ã€‚<br>å¯¹äºæ ¸å¿ƒè·¯ç”±å™¨Router 1:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Router#</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Router#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">access-list 102 permit ip 172.16.0.0 0.0.255.255 any</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">access-list 102 deny ip 192.168.0.0 0.0.255.255 any</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">access-list 102 permit ip any any</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">int s0/3/0</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">ip access-group 102 out</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span></span><br></pre></td></tr></table></figure><p>ä¸‹é¢è®¾ç½®åªèƒ½è®¿é—®æ•°æ®ä¸­å¿ƒçš„80å’Œ21ç«¯å£ã€‚<br>å¯¹äºæ ¸å¿ƒè·¯ç”±å™¨Router 1:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">Router#</span><span class="language-bash">en</span></span><br><span class="line"><span class="meta prompt_">Router#</span><span class="language-bash">conf t</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">access-list 101 permit tcp any 10.1.0.0 0.0.255.255 eq 80</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">access-list 101 permit tcp any 10.1.0.0 0.0.255.255 eq 21</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">access-list 101 deny ip any any</span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span><span class="language-bash">int fa1/1</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash">ip access-group 101 out</span></span><br><span class="line"><span class="meta prompt_">Router(config-if)#</span><span class="language-bash"><span class="built_in">exit</span></span></span><br><span class="line"><span class="meta prompt_">Router(config)#</span></span><br></pre></td></tr></table></figure><!-- wp:paragraph --><p>ä¸ªäººç–å¿½ï¼Œå…¶å®è¿˜æœ‰æ•™å­¦æ¥¼ä¸å®¿èˆæ¥¼ä¸èƒ½äº’é€šï¼Œå¹¶ä¸”å®¿èˆæ¥¼ä¸èƒ½è®¿é—®æ•°æ®ä¸­å¿ƒï¼Œåªéœ€è¦åœ¨101ç­–ç•¥ç»„æœ€åä¸€æ¡å‰åŠ ä¸Šä¸€æ¡ï¼š</p><!-- /wp:paragraph --><!-- wp:code --><pre class="wp-block-code"><code>access-list 101 deny ip 172.16.0.0 0.0.255.255 any</code></pre><!-- /wp:code --><!-- wp:paragraph --><p>åœ¨Router1çš„f0/0æ¥å£ä¸ŠåŠ ä¸Šä¸€ä¸ª103ç­–ç•¥ç»„ï¼š</p><!-- /wp:paragraph --><!-- wp:code --><pre class="wp-block-code"><code>Router#conf tRouter(config)#access-list 103 deny ip 192.168.0.0 0.0.255.255 172.16.0.0 0.0.255.255Router(config)#access-list 103 permit ip any anyRouter(config)#int fa0/0Router(config-if)#ip access-group 103 inRouter(config-if)#exit</code></pre><!-- /wp:code --><h3 id="æœ€ç»ˆæ•ˆæœ"><a href="#æœ€ç»ˆæ•ˆæœ" class="headerlink" title="æœ€ç»ˆæ•ˆæœ:"></a>æœ€ç»ˆæ•ˆæœ:</h3><blockquote><p>PC0:å¤–ç½‘è®¾å¤‡<br>PC1:æ•™å­¦æ¥¼1è®¾å¤‡<br>PC2:æ•™å­¦æ¥¼2è®¾å¤‡<br>PC3:å®¿èˆæ¥¼1è®¾å¤‡<br>PC4:å®¿èˆæ¥¼2è®¾å¤‡  </p></blockquote><p><img src="https://user-images.githubusercontent.com/57565901/121219035-e023a400-c8b5-11eb-924a-08596d229a44.png" alt="image"></p><p>ä½¿ç”¨æµè§ˆå™¨è®¿é—®æ•°æ®ä¸­å¿ƒdatacenterçš„80ç«¯å£ï¼š</p><blockquote><p>PC1:æ•™å­¦æ¥¼1è®¾å¤‡<br>PC2:æ•™å­¦æ¥¼2è®¾å¤‡<br>åœ¨ä¸Šå›¾ä¸­PC1å’ŒPC2ä¸èƒ½ç›´æ¥é€šè¿‡ICMP(pingå‘½ä»¤)è®¿é—®datacenterï¼Œä¿è¯æ•°æ®ä¸­å¿ƒå®‰å…¨ã€‚  </p></blockquote><p><img src="https://user-images.githubusercontent.com/57565901/121219349-2f69d480-c8b6-11eb-80b9-3a400441ff94.png" alt="image"><br><img src="https://user-images.githubusercontent.com/57565901/121219393-3a246980-c8b6-11eb-9c6a-9ea46f1061cb.png" alt="image"></p><h2 id="0x05-è‡³æ­¤æˆ‘ä»¬å®Œæˆäº†å®éªŒå…­æ‰€æœ‰çš„å®éªŒè¦æ±‚"><a href="#0x05-è‡³æ­¤æˆ‘ä»¬å®Œæˆäº†å®éªŒå…­æ‰€æœ‰çš„å®éªŒè¦æ±‚" class="headerlink" title="0x05:è‡³æ­¤æˆ‘ä»¬å®Œæˆäº†å®éªŒå…­æ‰€æœ‰çš„å®éªŒè¦æ±‚"></a>0x05:è‡³æ­¤æˆ‘ä»¬å®Œæˆäº†å®éªŒå…­æ‰€æœ‰çš„å®éªŒè¦æ±‚</h2><p>æ‰€æœ‰å‘½ä»¤ã€æˆªå›¾éƒ½ä¸ºæœ¬äººå®Œæˆï¼Œä»…ä¾›å‚è€ƒï¼Œæ‹’ç»è½¬è½½ã€‚   </p><p>By Auspic1ous å¤§äºŒèœé¸¡  </p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå®‰å…¨ </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå®‰å…¨ </tag>
            
            <tag> Web </tag>
            
            <tag> Ciscoæ¨¡æ‹Ÿå™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysqlæ–°å»ºç”¨æˆ·åŠæ•°æ®åº“éšç¬”</title>
      <link href="/2021/02/18/a38d80c5dd3f-q1jun/"/>
      <url>/2021/02/18/a38d80c5dd3f-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="Mysql-æ–°å»ºç”¨æˆ·ä»¥åŠæ•°æ®åº“éšç¬”"><a href="#Mysql-æ–°å»ºç”¨æˆ·ä»¥åŠæ•°æ®åº“éšç¬”" class="headerlink" title="Mysql æ–°å»ºç”¨æˆ·ä»¥åŠæ•°æ®åº“éšç¬”"></a>Mysql æ–°å»ºç”¨æˆ·ä»¥åŠæ•°æ®åº“éšç¬”</h1><h2 id="1-å®‰è£…å¥½MySQLä¹‹å"><a href="#1-å®‰è£…å¥½MySQLä¹‹å" class="headerlink" title="1. å®‰è£…å¥½MySQLä¹‹å"></a>1. å®‰è£…å¥½MySQLä¹‹å</h2><p>å‡å¦‚æ˜¯é€šè¿‡yumç­‰åŒ…æ§åˆ¶å™¨å®‰è£…ç­‰mysqlï¼Œæˆ‘ä»¬æ²¡æœ‰è®¾ç½®rootçš„åˆå§‹å¯†ç ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡æŸ¥æ‰¾é…ç½®æ–‡ä»¶æ¥å¾—åˆ°rootç”¨æˆ·çš„é»˜è®¤å¯†ç ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /var/log/mysqld.log |grep password</span><br></pre></td></tr></table></figure><p>å¾—åˆ°å¯†ç ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2021-11-16T09:50:21.808068Z 6 [Note] [MY-010454] [Server] A temporary password is generated <span class="keyword">for</span> root@localhost: PcWkrqq,/1r+</span><br></pre></td></tr></table></figure><h2 id="2-ä¿®æ”¹é»˜è®¤å¯†ç "><a href="#2-ä¿®æ”¹é»˜è®¤å¯†ç " class="headerlink" title="2.ä¿®æ”¹é»˜è®¤å¯†ç "></a>2.ä¿®æ”¹é»˜è®¤å¯†ç </h2><p>é€šè¿‡æ‰€å¾—é»˜è®¤å¯†ç è¿›å…¥rootç”¨æˆ·mysqlï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p </span><br></pre></td></tr></table></figure><p>ç„¶åé€šè¿‡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET PASSWORD = PASSWORD(<span class="string">&quot;password&quot;</span>);</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹é»˜è®¤å¯†ç ä¸º <code>password</code> ã€‚</p><blockquote><p>ä½†æ˜¯æœ‰æ—¶å€™è¿™é‡ŒæŠ¥é”™ï¼š<br>ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near â€˜PASSWORD(â€œpasswordâ€)â€™ at line 1</p></blockquote><p>æˆ–è€…é€šè¿‡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; Alter user <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED BY <span class="string">&#x27;password&#x27;</span>;</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br></pre></td></tr></table></figure><p>æç¤ºQuery OKè¯´æ˜ä¿®æ”¹å¯†ç æˆåŠŸï¼</p><h2 id="3-å¼€å¯ç”¨æˆ·è¿œç¨‹è®¿é—®"><a href="#3-å¼€å¯ç”¨æˆ·è¿œç¨‹è®¿é—®" class="headerlink" title="3.å¼€å¯ç”¨æˆ·è¿œç¨‹è®¿é—®"></a>3.å¼€å¯ç”¨æˆ·è¿œç¨‹è®¿é—®</h2><p>é€‰æ‹©æ•°æ®åº“â€˜mysqlâ€™ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use mysql;</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹userè¡¨ï¼Œç”¨<code>\G</code>å¯ä»¥æ ¼å¼åŒ–è¾“å‡ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from user \G;</span><br><span class="line">select host,user from user \G;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update user <span class="built_in">set</span> host=<span class="string">&quot;%&quot;</span> <span class="built_in">where</span> Host=<span class="string">&#x27;localhost&#x27;</span> and user=<span class="string">&quot;root&quot;</span>;</span><br></pre></td></tr></table></figure><p>æ›´æ–°æƒé™ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><h2 id="4-åˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·"><a href="#4-åˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·" class="headerlink" title="4.åˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·"></a>4.åˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·</h2><p>åˆ›å»ºæ•°æ®åº“ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create DATABASE wp_data Default character <span class="built_in">set</span> utf8 collate utf8_unicode_ci;</span><br></pre></td></tr></table></figure><p>åˆ›å»ºç”¨æˆ·å¹¶è®¾ç½®å¯†ç ï¼Œèµ‹äºˆæƒé™ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant all on wp_data.* to <span class="string">&#x27;wp_user&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED BY <span class="string">&quot;password&quot;</span>;</span><br></pre></td></tr></table></figure><p><strong>ç¬¬äºŒç§æ–¹æ³•ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE ROLE <span class="string">&#x27;wp_user&#x27;</span>;</span><br><span class="line">GRANT ALL ON wp_data.* to <span class="string">&#x27;wp_user&#x27;</span>;</span><br><span class="line">Alter user <span class="string">&#x27;wp_user&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified by <span class="string">&#x27;Qwe111..&#x27;</span>;</span><br></pre></td></tr></table></figure><blockquote><p>ç”±äºå‰é¢æˆ‘ä»¬å¼€å¯äº†è¿œç¨‹è®¿é—®ï¼Œæ­¤å¤„â€™localhostâ€™éœ€è¦æ”¹ä¸ºâ€™%â€™ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼<br>å¯ä»¥é€šè¿‡ <code>select user,host from user;</code>æŸ¥çœ‹ã€‚</p></blockquote><p>å½“æˆ‘ä»¬è¾“å…¥è¿›å…¥â€™wp_userâ€™ç”¨æˆ·ç•Œé¢ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql -u wp_user -p</span><br><span class="line">Enter password: </span><br><span class="line">ERROR 3118 (HY000): Access denied <span class="keyword">for</span> user <span class="string">&#x27;wp_user&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>. Account is locked.</span><br></pre></td></tr></table></figure><p>æŠ¥é”™ï¼Œç”¨æˆ·è¢«é”å®šã€‚<br>æˆ‘ä»¬å†è¿›å…¥rootç”¨æˆ·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select user,host,account_locked From mysql.user <span class="built_in">where</span> user=<span class="string">&#x27;wp_user&#x27;</span>;</span><br><span class="line">+---------+------+----------------+</span><br><span class="line">| user    | host | account_locked |</span><br><span class="line">+---------+------+----------------+</span><br><span class="line">| wp_user | %    | Y              |</span><br><span class="line">+---------+------+----------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><p>ç„¶åä¿®æ”¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Alter user <span class="string">&#x27;wp_user&#x27;</span>@<span class="string">&#x27;%&#x27;</span> account unlock;</span><br></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥æˆåŠŸè¿›å…¥æ–°ç”¨æˆ·äº†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@TSRAL6PZHRZ2 tmp]<span class="comment"># mysql -u wp_user -p</span></span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Your MySQL connection <span class="built_in">id</span> is 12</span><br><span class="line">Server version: 8.0.27 MySQL Community Server - GPL</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2021, Oracle and/or its affiliates.</span><br><span class="line"></span><br><span class="line">Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">affiliates. Other names may be trademarks of their respective</span><br><span class="line">owners.</span><br><span class="line"></span><br><span class="line">Type <span class="string">&#x27;help;&#x27;</span> or <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">&#x27;\c&#x27;</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| wp_data            |</span><br><span class="line">+--------------------+</span><br><span class="line">2 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åç«¯ </tag>
            
            <tag> Linux </tag>
            
            <tag> MySql </tag>
            
            <tag> æ•°æ®åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸è§çš„æ–‡ä»¶å¤´åå…­è¿›åˆ¶æ ¼å¼</title>
      <link href="/2021/02/12/d877fb6462e1-q1jun/"/>
      <url>/2021/02/12/d877fb6462e1-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="å¸¸è§æ–‡ä»¶å¤´æ ¼å¼ï¼š"><a href="#å¸¸è§æ–‡ä»¶å¤´æ ¼å¼ï¼š" class="headerlink" title="å¸¸è§æ–‡ä»¶å¤´æ ¼å¼ï¼š"></a>å¸¸è§æ–‡ä»¶å¤´æ ¼å¼ï¼š</h1><p>[<br>    {â€œæ‰©å±•åâ€:123,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€00001A00051004â€,â€æ–‡ä»¶æè¿°â€:â€Lotus1-2-3spreadsheet(v9)fileâ€},<br>    {â€œæ‰©å±•åâ€:â€3gg;3gp;3g2â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€000000nn66747970336770â€,â€æ–‡ä»¶æè¿°â€:â€3rdGenerationPartnershipProject3GPP(nn&#x3D;0x14)and3GPP2(nn&#x3D;0x20)multimediafilesâ€},<br>    {â€œæ‰©å±•åâ€:â€7zâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€377ABCAF271Câ€,â€æ–‡ä»¶æè¿°â€:â€7-ZIPcompressedfileâ€},<br>    {â€œæ‰©å±•åâ€:â€abaâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€00014241â€,â€æ–‡ä»¶æè¿°â€:â€PalmAddressBookArchivefileâ€},<br>    {â€œæ‰©å±•åâ€:â€abiâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€414F4C494E444558â€,â€æ–‡ä»¶æè¿°â€:â€AOLaddressbookindexfileâ€},<br>    {â€œæ‰©å±•åâ€:â€aby;idxâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€414F4C4442â€,â€æ–‡ä»¶æè¿°â€:â€AOLdatabasefiles:addressbook(ABY)anduserconfigurationdata(MAIN.IDX)â€},<br>    {â€œæ‰©å±•åâ€:â€accdbâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€000100005374616E6461726420414345204442â€,â€æ–‡ä»¶æè¿°â€:â€MicrosoftAccess2007fileâ€},<br>    {â€œæ‰©å±•åâ€:â€ACMâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D5Aâ€,â€æ–‡ä»¶æè¿°â€:â€MSaudiocompressionmanagerdriverâ€},<br>    {â€œæ‰©å±•åâ€:â€ADFâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€444F53â€,â€æ–‡ä»¶æè¿°â€:â€Amigadiskfileâ€},<br>    {â€œæ‰©å±•åâ€:â€adxâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€0300000041505052â€,â€æ–‡ä»¶æè¿°â€:â€LotusApproachADXfileâ€},<br>    {â€œæ‰©å±•åâ€:â€AIFFâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€464F524D00â€,â€æ–‡ä»¶æè¿°â€:â€AudioInterchangeFileâ€},<br>    {â€œæ‰©å±•åâ€:â€ainâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€2112â€,â€æ–‡ä»¶æè¿°â€:â€AINCompressedArchiveFileâ€},<br>    {â€œæ‰©å±•åâ€:â€amiâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€5B7665725Dâ€,â€æ–‡ä»¶æè¿°â€:â€LotusAmiProâ€},<br>    {â€œæ‰©å±•åâ€:â€amrâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€2321414D52â€,â€æ–‡ä»¶æè¿°â€:â€AdaptiveMulti-RateACELP(AlgebraicCodeExcitedLinearPrediction)Codec,commonlyaudioformatwithGSMcellphonesâ€},<br>    {â€œæ‰©å±•åâ€:â€ANIâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€52494646â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€APIâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D5A900003000000â€,â€æ–‡ä»¶æè¿°â€:â€Acrobatplug-inâ€},<br>    {â€œæ‰©å±•åâ€:â€arcâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€1A0xâ€,â€æ–‡ä»¶æè¿°â€:â€LHarchivefile,oldversion(wherex&#x3D;0x2,0x3,0x4,0x8or0x9fortypes1-5,respectively)â€},<br>    {â€œæ‰©å±•åâ€:â€arcâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€41724301â€,â€æ–‡ä»¶æè¿°â€:â€FreeArccompressedfileâ€},<br>    {â€œæ‰©å±•åâ€:â€arjâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€60EAâ€,â€æ–‡ä»¶æè¿°â€:â€ARJCompressedArchiveâ€},<br>    {â€œæ‰©å±•åâ€:â€ARJâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€60EA27â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€ARTâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4A47030E000000â€,â€æ–‡ä»¶æè¿°â€:â€AOLARTfileâ€},<br>    {â€œæ‰©å±•åâ€:â€ARTâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4A47040E000000â€,â€æ–‡ä»¶æè¿°â€:â€AOLARTfileâ€},<br>    {â€œæ‰©å±•åâ€:â€asfâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€3026B2758E66CF11â€,â€æ–‡ä»¶æè¿°â€:â€WindowsMediaâ€},<br>    {â€œæ‰©å±•åâ€:â€asf;wma;wmvâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€3026B2758E66CF11A6D900AA0062CE6Câ€,â€æ–‡ä»¶æè¿°â€:â€MicrosoftWindowsMediaAudio&#x2F;VideoFile(AdvancedStreamingFormat)â€},<br>    {â€œæ‰©å±•åâ€:â€asxâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€3Câ€,â€æ–‡ä»¶æè¿°â€:â€AdvancedStreamredirectorfileâ€},<br>    {â€œæ‰©å±•åâ€:â€auâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€2E736E64â€,â€æ–‡ä»¶æè¿°â€:â€SoundMachineAudioFileâ€},<br>    {â€œæ‰©å±•åâ€:â€â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€â€,â€æ–‡ä»¶æè¿°â€:â€NeXT&#x2F;SunMicrosystemsÎ¼-Lawaudiofileâ€},<br>    {â€œæ‰©å±•åâ€:â€aviâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€41564920â€,â€æ–‡ä»¶æè¿°â€:â€AudioVideoInterleave(AVI)â€},<br>    {â€œæ‰©å±•åâ€:â€AXâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D5Aâ€,â€æ–‡ä»¶æè¿°â€:â€Librarycachefileâ€},<br>    {â€œæ‰©å±•åâ€:â€AXâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D5A900003000000â€,â€æ–‡ä»¶æè¿°â€:â€DirectShowfilterâ€},<br>    {â€œæ‰©å±•åâ€:â€bagâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€414F4C2046656564626167â€,â€æ–‡ä»¶æè¿°â€:â€AOLandAIMbuddylistfileâ€},<br>    {â€œæ‰©å±•åâ€:â€BASâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€202020â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€binâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€424C4932323351â€,â€æ–‡ä»¶æè¿°â€:â€ThomsonSpeedtouchseriesWLANrouterfirmwareâ€},<br>    {â€œæ‰©å±•åâ€:â€bmpâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€424Dâ€,â€æ–‡ä»¶æè¿°â€:â€WindowsBitmapâ€},<br>    {â€œæ‰©å±•åâ€:â€BMPâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€424D3Eâ€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€bz;bz2â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€425A68â€,â€æ–‡ä»¶æè¿°â€:â€BZIPArchiveâ€},<br>    {â€œæ‰©å±•åâ€:â€BZ2;TAR.BZ2;TBZ2;TB2â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€425A68â€,â€æ–‡ä»¶æè¿°â€:â€bzip2compressedarchiveâ€},<br>    {â€œæ‰©å±•åâ€:â€CABâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€495363â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€CAB;HDRâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€49536328â€,â€æ–‡ä»¶æè¿°â€:â€InstallShieldv5.xor6.xcompressedfileâ€},<br>    {â€œæ‰©å±•åâ€:â€CABâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D534346â€,â€æ–‡ä»¶æè¿°â€:â€MicrosoftCABFileFormatâ€},<br>    {â€œæ‰©å±•åâ€:â€catâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:30,â€æ–‡ä»¶æè¿°â€:â€Microsoftsecuritycatalogfileâ€},<br>    {â€œæ‰©å±•åâ€:â€CBDâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€434246494C45â€,â€æ–‡ä»¶æè¿°â€:â€WordPerfectdictionaryfile(unconfirmed)â€},<br>    {â€œæ‰©å±•åâ€:â€CCDâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€5B436Câ€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€cdrâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€CDRâ€,â€æ–‡ä»¶æè¿°â€:â€CorelDrawâ€},<br>    {â€œæ‰©å±•åâ€:â€CDRâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€454C49544520436F6D6D616E64657220â€,â€æ–‡ä»¶æè¿°â€:â€ElitePlusCommandersavedgamefileâ€},<br>    {â€œæ‰©å±•åâ€:â€CDR,DVFâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D535F564F494345â€,â€æ–‡ä»¶æè¿°â€:â€SonyCompressedVoiceFileâ€},<br>    {â€œæ‰©å±•åâ€:â€CHI;CHMâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€49545346â€,â€æ–‡ä»¶æè¿°â€:â€MicrosoftCompiledHTMLHelpFileâ€},<br>    {â€œæ‰©å±•åâ€:â€CHMâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€495453â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€CLBâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€434D5831â€,â€æ–‡ä»¶æè¿°â€:â€CorelBinarymetafileâ€},<br>    {â€œæ‰©å±•åâ€:â€CLBâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€434F4D2Bâ€,â€æ–‡ä»¶æè¿°â€:â€COM+Catalogfileâ€},<br>    {â€œæ‰©å±•åâ€:â€cntâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€3A42617365â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€COM,DLL,DRV,EXE,PIF,QTS,QTX,SYSâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D5Aâ€,â€æ–‡ä»¶æè¿°â€:â€Windows&#x2F;DOSexecutablefileâ€},<br>    {â€œæ‰©å±•åâ€:â€COMâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D5AEEâ€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€COMâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€E93B03â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€CPEâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€464158434F5645522D564552â€,â€æ–‡ä»¶æè¿°â€:â€MicrosoftFaxCoverSheetâ€},<br>    {â€œæ‰©å±•åâ€:â€CPLâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D5Aâ€,â€æ–‡ä»¶æè¿°â€:â€Controlpanelapplicationâ€},<br>    {â€œæ‰©å±•åâ€:â€CPTâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4350543746494C45â€,â€æ–‡ä»¶æè¿°â€:â€CorelPhotopaintfileâ€},<br>    {â€œæ‰©å±•åâ€:â€CPTâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€43505446494C45â€,â€æ–‡ä»¶æè¿°â€:â€CorelPhotopaintfileâ€},<br>    {â€œæ‰©å±•åâ€:â€CPXâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€5B5769â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€cru;crushâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4352555348â€,â€æ–‡ä»¶æè¿°â€:â€CRUSHArchiveFileâ€},<br>    {â€œæ‰©å±•åâ€:â€CRUâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€43525553482076â€,â€æ–‡ä»¶æè¿°â€:â€Crushcompressedarchiveâ€},<br>    {â€œæ‰©å±•åâ€:â€CRWâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€49491A00000048454150434344520200â€,â€æ–‡ä»¶æè¿°â€:â€CanondigitalcameraRAWfileâ€},<br>    {â€œæ‰©å±•åâ€:â€CTFâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€436174616C6F6720332E303000â€,â€æ–‡ä»¶æè¿°â€:â€WhereIsItCatalogfileâ€},<br>    {â€œæ‰©å±•åâ€:â€CURâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€0000020001002020â€,â€æ–‡ä»¶æè¿°â€:â€Windowscursorfileâ€},<br>    {â€œæ‰©å±•åâ€:â€datâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:3,â€æ–‡ä»¶æè¿°â€:â€MapInfoNativeDataFormatâ€},<br>    {â€œæ‰©å±•åâ€:â€datâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€1A52545320434F4D5052455353454420494D4147452056312E301Aâ€,â€æ–‡ä»¶æè¿°â€:â€RuntimeSoftwarediskimageâ€},<br>    {â€œæ‰©å±•åâ€:â€datâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€415647365F496E746567726974795F4461746162617365â€,â€æ–‡ä»¶æè¿°â€:â€AVG6Integritydatabasefileâ€},<br>    {â€œæ‰©å±•åâ€:â€DATâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€43524547â€,â€æ–‡ä»¶æè¿°â€:â€Windows9xregistryhiveâ€},<br>    {â€œæ‰©å±•åâ€:â€DATâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€436C69656E742055726C4361636865204D4D462056657220â€,â€æ–‡ä»¶æè¿°â€:â€IEHistoryDATfileâ€},<br>    {â€œæ‰©å±•åâ€:â€DATâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€45524653534156454441544146494C45â€,â€æ–‡ä»¶æè¿°â€:â€KrollEasyRecoverySavedRecoveryStatefileâ€},<br>    {â€œæ‰©å±•åâ€:â€DATâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€496E6E6F20536574757020556E696E7374616C6C204C6F6720286229â€,â€æ–‡ä»¶æè¿°â€:â€InnoSetupUninstallLogfileâ€},<br>    {â€œæ‰©å±•åâ€:â€dbâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€0006156100000002000004D200001000â€,â€æ–‡ä»¶æè¿°â€:â€NetscapeNavigator(v4)databasefileâ€},<br>    {â€œæ‰©å±•åâ€:â€DBâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€44424648â€,â€æ–‡ä»¶æè¿°â€:â€PalmZirephotodatabaseâ€},<br>    {â€œæ‰©å±•åâ€:â€dbâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:8,â€æ–‡ä»¶æè¿°â€:â€dBASEIVordBFastconfigurationfileâ€},<br>    {â€œæ‰©å±•åâ€:â€db3â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:3,â€æ–‡ä»¶æè¿°â€:â€dBASEIIIfileâ€},<br>    {â€œæ‰©å±•åâ€:â€db4â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:4,â€æ–‡ä»¶æè¿°â€:â€dBASEIVdatafileâ€},<br>    {â€œæ‰©å±•åâ€:â€dbaâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€00014244â€,â€æ–‡ä»¶æè¿°â€:â€PalmDateBookArchivefileâ€},<br>    {â€œæ‰©å±•åâ€:â€dbxâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€CFAD12FEâ€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€dbxâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€CFAD12FEC5FD746Fâ€,â€æ–‡ä»¶æè¿°â€:â€OutlookExpressâ€},<br>    {â€œæ‰©å±•åâ€:â€dciâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€3C21646F63747970â€,â€æ–‡ä»¶æè¿°â€:â€AOLHTMLmailfileâ€},<br>    {â€œæ‰©å±•åâ€:â€dcxâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€3ADE68B1â€,â€æ–‡ä»¶æè¿°â€:â€DCXGraphicFileâ€},<br>    {â€œæ‰©å±•åâ€:â€DDBâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€000100â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€dibâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€424Dâ€,â€æ–‡ä»¶æè¿°â€:â€device-independentbitmapimageâ€},<br>    {â€œæ‰©å±•åâ€:â€DLLâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D5A90â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€DMPâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D444D5093A7â€,â€æ–‡ä»¶æè¿°â€:â€Windowsminidumpfileâ€},<br>    {â€œæ‰©å±•åâ€:â€DMSâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€444D5321â€,â€æ–‡ä»¶æè¿°â€:â€AmigaDiskMashercompressedarchiveâ€},<br>    {â€œæ‰©å±•åâ€:â€docâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€0D444F43â€,â€æ–‡ä»¶æè¿°â€:â€DeskMateDocumentfileâ€},<br>    {â€œæ‰©å±•åâ€:â€docâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€1234567890FFâ€,â€æ–‡ä»¶æè¿°â€:â€MSWord6.0â€},<br>    {â€œæ‰©å±•åâ€:â€docâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€31BE000000AB0000â€,â€æ–‡ä»¶æè¿°â€:â€MSWordforDOS6.0â€},<br>    {â€œæ‰©å±•åâ€:â€docâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€7FFE340Aâ€,â€æ–‡ä»¶æè¿°â€:â€MSWordâ€},<br>    {â€œæ‰©å±•åâ€:â€dot;ppt;xla;ppa;pps;pot;msi;sdw;dbâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€D0CF11E0â€,â€æ–‡ä»¶æè¿°â€:â€MSOffice&#x2F;OLE2â€},<br>    {â€œæ‰©å±•åâ€:â€doc;dot;xls;xlt;xla;ppt;apr;ppa;pps;pot;msi;sdw;dbâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€D0CF11E0A1B11AE1â€,â€æ–‡ä»¶æè¿°â€:â€MSCompoundDocumentv1orLotusApproachAPRfileâ€},<br>    {â€œæ‰©å±•åâ€:â€DPLâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D5A50â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€DRVâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D5A16â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€drwâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:7,â€æ–‡ä»¶æè¿°â€:â€Acommonsignatureandfileextensionformanydrawingprograms.â€},<br>    {â€œæ‰©å±•åâ€:â€drwâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€01FF02040302â€,â€æ–‡ä»¶æè¿°â€:â€Micrografxvectorgraphicfileâ€},<br>    {â€œæ‰©å±•åâ€:â€ds4â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D47582069747064â€,â€æ–‡ä»¶æè¿°â€:â€MicrografixDesigner4â€},<br>    {â€œæ‰©å±•åâ€:â€DSNâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D56â€,â€æ–‡ä»¶æè¿°â€:â€CDStomperProlabelfileâ€},<br>    {â€œæ‰©å±•åâ€:â€dspâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€23204D6963726F736F667420446576656C6F7065722053747564696Fâ€,â€æ–‡ä»¶æè¿°â€:â€MicrosoftDeveloperStudioprojectfileâ€},<br>    {â€œæ‰©å±•åâ€:â€dssâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€02647373â€,â€æ–‡ä»¶æè¿°â€:â€DigitalSpeechStandard(Olympus,Grundig,&amp;Phillips)â€},<br>    {â€œæ‰©å±•åâ€:â€dtdâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€0764743264647464â€,â€æ–‡ä»¶æè¿°â€:â€DesignTools2DDesignfileâ€},<br>    {â€œæ‰©å±•åâ€:â€dtdâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€3C21454E54495459â€,â€æ–‡ä»¶æè¿°â€:â€XMLDTDâ€},<br>    {â€œæ‰©å±•åâ€:â€DVRâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€445644â€,â€æ–‡ä»¶æè¿°â€:â€DVR-Studiostreamfileâ€},<br>    {â€œæ‰©å±•åâ€:â€dwgâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€414331â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€41433130â€,â€æ–‡ä»¶æè¿°â€:â€GenericAutoCADdrawingâ€},<br>    {â€œæ‰©å±•åâ€:â€â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€â€,â€æ–‡ä»¶æè¿°â€:â€NOTESonAutoCADfileheaders:The0x41-43-31-30(AC10)isagenericheader,occupyingthefirstfourbytesinthefile.Thenexttwobytesgivefurtherindicationabouttheversionorsubtype:â€},<br>    {â€œæ‰©å±•åâ€:â€â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€â€,â€æ–‡ä»¶æè¿°â€:â€0x30-32(02)â€”AutoCADR2.5â€},<br>    {â€œæ‰©å±•åâ€:â€â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€â€,â€æ–‡ä»¶æè¿°â€:â€0x30-33(03)â€”AutoCADR2.6â€},<br>    {â€œæ‰©å±•åâ€:â€â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€â€,â€æ–‡ä»¶æè¿°â€:â€0x30-34(04)â€”AutoCADR9â€},<br>    {â€œæ‰©å±•åâ€:â€â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€â€,â€æ–‡ä»¶æè¿°â€:â€0x30-36(06)â€”AutoCADR10â€},<br>    {â€œæ‰©å±•åâ€:â€â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€â€,â€æ–‡ä»¶æè¿°â€:â€0x30-39(09)â€”AutoCADR11&#x2F;R12â€},<br>    {â€œæ‰©å±•åâ€:â€â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€â€,â€æ–‡ä»¶æè¿°â€:â€0x31-30(10)â€”AutoCADR13(subtype10)â€},<br>    {â€œæ‰©å±•åâ€:â€â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€â€,â€æ–‡ä»¶æè¿°â€:â€0x31-31(11)â€”AutoCADR13(subtype11)â€},<br>    {â€œæ‰©å±•åâ€:â€â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€â€,â€æ–‡ä»¶æè¿°â€:â€0x31-32(12)â€”AutoCADR13(subtype12)â€},<br>    {â€œæ‰©å±•åâ€:â€â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€â€,â€æ–‡ä»¶æè¿°â€:â€0x31-33(13)â€”AutoCADR14(subtype13)â€},<br>    {â€œæ‰©å±•åâ€:â€â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€â€,â€æ–‡ä»¶æè¿°â€:â€0x31-34(14)â€”AutoCADR14(subtype14)â€},<br>    {â€œæ‰©å±•åâ€:â€â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€â€,â€æ–‡ä»¶æè¿°â€:â€0x31-35(15)â€”AutoCADR2000â€},<br>    {â€œæ‰©å±•åâ€:â€â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€â€,â€æ–‡ä»¶æè¿°â€:â€0x31-38(18)â€”AutoCADR2004â€},<br>    {â€œæ‰©å±•åâ€:â€â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€â€,â€æ–‡ä»¶æè¿°â€:â€0x32-31(21)â€”AutoCADR2007â€},<br>    {â€œæ‰©å±•åâ€:â€Enn(wherennarenumbers)â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€455646â€,â€æ–‡ä»¶æè¿°â€:â€EnCaseevidencefileâ€},<br>    {â€œæ‰©å±•åâ€:â€ECOâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€2A5052â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€elfâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€7F454C4601010100â€,â€æ–‡ä»¶æè¿°â€:â€ELFExecutableâ€},<br>    {â€œæ‰©å±•åâ€:â€emfâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€0100000058000000â€,â€æ–‡ä»¶æè¿°â€:â€Extended(Enhanced)WindowsMetafileFormat,printerspoolfileâ€},<br>    {â€œæ‰©å±•åâ€:â€emlâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€44656C69766572792D646174653Aâ€,â€æ–‡ä»¶æè¿°â€:â€Emailâ€},<br>    {â€œæ‰©å±•åâ€:â€EMLâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€46726F6D202020â€,â€æ–‡ä»¶æè¿°â€:â€Acommmonfileextensionfore-mailfiles.SignaturesshownhereareforNetscape,Eudora,andagenericsignature,respectively.EMLisalsousedbyOutlookExpressandQuickMail.â€},<br>    {â€œæ‰©å±•åâ€:â€EMLâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€46726F6D203F3F3Fâ€,â€æ–‡ä»¶æè¿°â€:â€Acommmonfileextensionfore-mailfiles.SignaturesshownhereareforNetscape,Eudora,andagenericsignature,respectively.EMLisalsousedbyOutlookExpressandQuickMail.â€},<br>    {â€œæ‰©å±•åâ€:â€EMLâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€46726F6D3A20â€,â€æ–‡ä»¶æè¿°â€:â€Acommmonfileextensionfore-mailfiles.SignaturesshownhereareforNetscape,Eudora,andagenericsignature,respectively.EMLisalsousedbyOutlookExpressandQuickMail.â€},<br>    {â€œæ‰©å±•åâ€:â€EMLâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€526563â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€encâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€005C41B1FFâ€,â€æ–‡ä»¶æè¿°â€:â€MujahideenSecrets2encryptedfileâ€},<br>    {<br>        â€œæ‰©å±•åâ€: â€œenlâ€,<br>        â€œæ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€: â€œ[32byteoffset] 40 40 40 20 00 00 40 40 40 40â€,<br>        â€œæ–‡ä»¶æè¿°â€: â€œEndNote Library Fileâ€<br>    },<br>    {â€œæ‰©å±•åâ€:â€epsâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€25215053â€,â€æ–‡ä»¶æè¿°â€:â€AdobeEPSFileâ€},<br>    {â€œæ‰©å±•åâ€:â€epsâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€252150532D41646F6265â€,â€æ–‡ä»¶æè¿°â€:â€Postscriptâ€},<br>    {â€œæ‰©å±•åâ€:â€epsâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€252150532D41646F62652D332E3020455053462D332030â€,â€æ–‡ä»¶æè¿°â€:â€AdobeencapsulatedPostScriptfile(Ifthissignatureisnotattheimmediatebeginningofthefile,itwilloccurearlyinthefile,commonlyatbyteoffset30)â€},<br>    {â€œæ‰©å±•åâ€:â€EPSâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€C5D0D3â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€ethâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€1A350100â€,â€æ–‡ä»¶æè¿°â€:â€GNNettestWinPharoahcapturefileâ€},<br>    {â€œæ‰©å±•åâ€:â€evtâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€300000004C664C65â€,â€æ–‡ä»¶æè¿°â€:â€WindowsEventViewerfileâ€},<br>    {â€œæ‰©å±•åâ€:â€evtâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€03000000C466C456â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€EVTXâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€456C6646696C6500â€,â€æ–‡ä»¶æè¿°â€:â€WindowsVistaeventlogfileâ€},<br>    {â€œæ‰©å±•åâ€:â€exe;dll;drv;vxd;sys;ocx;vbxâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D5Aâ€,â€æ–‡ä»¶æè¿°â€:â€Win32Executableâ€},<br>    {â€œæ‰©å±•åâ€:â€exe;dll;drv;vxd;sys;ocx;vbxâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D5Aâ€,â€æ–‡ä»¶æè¿°â€:â€Win16Executableâ€},<br>    {â€œæ‰©å±•åâ€:â€exe;com;386;ax;acm;sys;dll;drv;flt;fon;ocx;scr;lrc;vxd;cpl;x32â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D5Aâ€,â€æ–‡ä»¶æè¿°â€:â€ExecutableFileâ€},<br>    {â€œæ‰©å±•åâ€:â€EXE,DLL,OCX,OLB,IMM,IMEâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D5A90â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€fliâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€0011AFâ€,â€æ–‡ä»¶æè¿°â€:â€FLICAnimationfileâ€},<br>    {â€œæ‰©å±•åâ€:â€fltâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€000101â€,â€æ–‡ä»¶æè¿°â€:â€OpenFlight3Dfileâ€},<br>    {â€œæ‰©å±•åâ€:â€FLTâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D5A900003000000â€,â€æ–‡ä»¶æè¿°â€:â€Auditiongraphicfilterfile(Adobe)â€},<br>    {â€œæ‰©å±•åâ€:â€FLVâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€464C5601â€,â€æ–‡ä»¶æè¿°â€:â€Flashvideofileâ€},<br>    {â€œæ‰©å±•åâ€:â€fmâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€3C4D616B657246696C6520â€,â€æ–‡ä»¶æè¿°â€:â€AdobeFrameMakerfileâ€},<br>    {â€œæ‰©å±•åâ€:â€fm3â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€00001A0007800100â€,â€æ–‡ä»¶æè¿°â€:â€Lotus123v3FMTfileâ€},<br>    {â€œæ‰©å±•åâ€:â€fmtâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€20006800200â€,â€æ–‡ä»¶æè¿°â€:â€Lotus123v4FMTfileâ€},<br>    {â€œæ‰©å±•åâ€:â€FNTâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€434841â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€FONâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D5Aâ€,â€æ–‡ä»¶æè¿°â€:â€Fontfileâ€},<br>    {â€œæ‰©å±•åâ€:â€GBCâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€87F53Eâ€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€gidâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€3F5F0300â€,â€æ–‡ä»¶æè¿°â€:â€WindowsHelpIndexFileâ€},<br>    {â€œæ‰©å±•åâ€:â€GIDâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4C4E0200â€,â€æ–‡ä»¶æè¿°â€:â€WindowsHelpindexfileâ€},<br>    {â€œæ‰©å±•åâ€:â€GIFâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€47494638â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€gifâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€474946383761â€,â€æ–‡ä»¶æè¿°â€:â€Graphicsinterchangeformatfile(GIF87A)â€},<br>    {â€œæ‰©å±•åâ€:â€gifâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€474946383961â€,â€æ–‡ä»¶æè¿°â€:â€Graphicsinterchangeformatfile(GIF89A)â€},<br>    {â€œæ‰©å±•åâ€:â€GTDâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€7B5072â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€GX2â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€475832â€,â€æ–‡ä»¶æè¿°â€:â€ShowPartnergraphicsfile(notconfirmed)â€},<br>    {â€œæ‰©å±•åâ€:â€gz;tar;tgzâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€1F8Bâ€,â€æ–‡ä»¶æè¿°â€:â€GzipArchiveFileâ€},<br>    {â€œæ‰©å±•åâ€:â€gz;tgzâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€1F8B08â€,â€æ–‡ä»¶æè¿°â€:â€GZCompressedFileâ€},<br>    {â€œæ‰©å±•åâ€:â€hapâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€91334846â€,â€æ–‡ä»¶æè¿°â€:â€HAPArchiveFileâ€},<br>    {â€œæ‰©å±•åâ€:â€HDMPâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D444D5093A7â€,â€æ–‡ä»¶æè¿°â€:â€Windowsheapdumpfileâ€},<br>    {â€œæ‰©å±•åâ€:â€hdrâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€233F52414449414E43450Aâ€,â€æ–‡ä»¶æè¿°â€:â€adianceHighDynamicRangeimagefileâ€},<br>    {â€œæ‰©å±•åâ€:â€HLPâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€3F5F03â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€hlpâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€3F5F0300â€,â€æ–‡ä»¶æè¿°â€:â€WindowsHelpfileâ€},<br>    {â€œæ‰©å±•åâ€:â€HLPâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4C4E0200â€,â€æ–‡ä»¶æè¿°â€:â€WindowsHelpfileâ€},<br>    {<br>        â€œæ‰©å±•åâ€: â€œhlpâ€,<br>        â€œæ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€: â€œ[7byteoffset] 00 00 FF FF FF FFâ€,<br>        â€œæ–‡ä»¶æè¿°â€: â€œWindows Help fileâ€<br>    },<br>    {â€œæ‰©å±•åâ€:â€hqxâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€28546869732066696C65â€,â€æ–‡ä»¶æè¿°â€:â€MacintoshBinHex4CompressedArchiveâ€},<br>    {â€œæ‰©å±•åâ€:â€hqxâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€28546869732066696C65206D75737420626520636F6E76657274656420776974682042696E48657820â€,â€æ–‡ä»¶æè¿°â€:â€MacintoshBinHex4CompressedArchiveâ€},<br>    {â€œæ‰©å±•åâ€:â€HTMâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€3C2144â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€htm;htmlâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€3C21444F4354â€,â€æ–‡ä»¶æè¿°â€:â€HyperTextMarkupLanguage3â€},<br>    {â€œæ‰©å±•åâ€:â€htm;htmlâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€3C48544D4C3Eâ€,â€æ–‡ä»¶æè¿°â€:â€HyperTextMarkupLanguage2â€},<br>    {â€œæ‰©å±•åâ€:â€htm;htmlâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€3C68746D6C3Eâ€,â€æ–‡ä»¶æè¿°â€:â€HyperTextMarkupLanguage1â€},<br>    {â€œæ‰©å±•åâ€:â€htmlâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€68746D6C3Eâ€,â€æ–‡ä»¶æè¿°â€:â€HTMLâ€},<br>    {â€œæ‰©å±•åâ€:â€icoâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€0000010000â€,â€æ–‡ä»¶æè¿°â€:â€IconFileâ€},<br>    {â€œæ‰©å±•åâ€:â€icoâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€0000010001002020â€,â€æ–‡ä»¶æè¿°â€:â€IconFileâ€},<br>    {â€œæ‰©å±•åâ€:â€IFFâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€464F524Dâ€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€IFOâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€445644â€,â€æ–‡ä»¶æè¿°â€:â€DVDinfofileâ€},<br>    {â€œæ‰©å±•åâ€:â€IMEâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D5A90â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€imgâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€000100080001000101â€,â€æ–‡ä»¶æè¿°â€:â€VenturaPublisher&#x2F;GEMVDIImageFormatBitmapfileâ€},<br>    {â€œæ‰©å±•åâ€:â€IMGâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€00FFFFâ€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€IMMâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D5A90â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€indâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€414F4C494458â€,â€æ–‡ä»¶æè¿°â€:â€AOLclientpreferences&#x2F;settingsfile(MAIN.IND)â€},<br>    {â€œæ‰©å±•åâ€:â€ISOâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4344303031â€,â€æ–‡ä»¶æè¿°â€:â€ISO-9660CDDiscImage(Thissignatureusuallyoccursatbyte8001,8801,or9001.)â€},<br>    {â€œæ‰©å±•åâ€:â€ivrâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€2E524543â€,â€æ–‡ä»¶æè¿°â€:â€RealPlayervideofile(V11andlater)â€},<br>    {â€œæ‰©å±•åâ€:â€JARâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4A4152435300â€,â€æ–‡ä»¶æè¿°â€:â€JARCScompressedarchiveâ€},<br>    {â€œæ‰©å±•åâ€:â€jarâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€5F27A889â€,â€æ–‡ä»¶æè¿°â€:â€JARArchiveFileâ€},<br>    {â€œæ‰©å±•åâ€:â€jpg;jpegâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€FFD8FFâ€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€jpg;jpe;jpegâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€FFD8FFE000â€,â€æ–‡ä»¶æè¿°â€:â€JPGGraphicFileâ€},<br>    {â€œæ‰©å±•åâ€:â€jpg;jpe;jpegâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€FFD8FFFE00â€,â€æ–‡ä»¶æè¿°â€:â€JPGGraphicFileâ€},<br>    {â€œæ‰©å±•åâ€:â€KGBâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4B47425F61726368202Dâ€,â€æ–‡ä»¶æè¿°â€:â€KGBarchiveâ€},<br>    {â€œæ‰©å±•åâ€:â€KOZâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€49443303000000â€,â€æ–‡ä»¶æè¿°â€:â€SprintMusicStoreaudiofile(formobiledevices)â€},<br>    {â€œæ‰©å±•åâ€:â€LDBâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€42494Câ€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€lhaâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€2D6C68352Dâ€,â€æ–‡ä»¶æè¿°â€:â€LHACompressedâ€},<br>    {<br>        â€œæ‰©å±•åâ€: â€œlha; lzhâ€,<br>        â€œæ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€: â€œ[2byteoffset] 2D 6C 68â€,<br>        â€œæ–‡ä»¶æè¿°â€: â€œCompressed archive fileâ€<br>    },<br>    {â€œæ‰©å±•åâ€:â€LHPâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€3F5F03â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€lhpâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€3F5F0300â€,â€æ–‡ä»¶æè¿°â€:â€WindowsHelpFileâ€},<br>    {â€œæ‰©å±•åâ€:â€libâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€213C617263683E0Aâ€,â€æ–‡ä»¶æè¿°â€:â€Unixarchiver(ar)filesandMicrosoftProgramLibraryCommonObjectFileFormat(COFF)â€},<br>    {â€œæ‰©å±•åâ€:â€LIBâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€2A2420â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€LITâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€49544F4C49544C53â€,â€æ–‡ä»¶æè¿°â€:â€MicrosoftReadereBookfileâ€},<br>    {â€œæ‰©å±•åâ€:â€LNKâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4C0000â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€lnkâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4C000000â€,â€æ–‡ä»¶æè¿°â€:â€WindowsShortcut(LinkFile)â€},<br>    {â€œæ‰©å±•åâ€:â€lnkâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4C000000011402â€,â€æ–‡ä»¶æè¿°â€:â€WindowsLinkFileâ€},<br>    {â€œæ‰©å±•åâ€:â€LNKâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4C00000001140200â€,â€æ–‡ä»¶æè¿°â€:â€Windowsshortcutfileâ€},<br>    {â€œæ‰©å±•åâ€:â€logâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€2A2A2A2020496E7374616C6C6174696F6E205374617274656420â€,â€æ–‡ä»¶æè¿°â€:â€SymantecWiseInstallerlogfileâ€},<br>    {â€œæ‰©å±•åâ€:â€lzhâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€lhâ€,â€æ–‡ä»¶æè¿°â€:â€Lzcompressionfileâ€},<br>    {â€œæ‰©å±•åâ€:â€lwpâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€576F726450726Fâ€,â€æ–‡ä»¶æè¿°â€:â€LotusWordProv9â€},<br>    {â€œæ‰©å±•åâ€:â€m3uâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€234558â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€m4aâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€00000020667479704D34412000000000â€,â€æ–‡ä»¶æè¿°â€:â€AppleLosslessAudioCodecfileâ€},<br>    {â€œæ‰©å±•åâ€:â€m4a;m4vâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€00000020667479704D34412000000000â€,â€æ–‡ä»¶æè¿°â€:â€QuickTimeM4A&#x2F;M4Vfileâ€},<br>    {â€œæ‰©å±•åâ€:â€manifestâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€3C3F786D6C2076657273696F6E3Dâ€,â€æ–‡ä»¶æè¿°â€:â€WindowsVisualStylesheetXMLfileâ€},<br>    {â€œæ‰©å±•åâ€:â€MARâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D41523100â€,â€æ–‡ä»¶æè¿°â€:â€Mozillaarchiveâ€},<br>    {â€œæ‰©å±•åâ€:â€MARâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D415243â€,â€æ–‡ä»¶æè¿°â€:â€Microsoft&#x2F;MSNMARCarchiveâ€},<br>    {â€œæ‰©å±•åâ€:â€MARâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D41723000â€,â€æ–‡ä»¶æè¿°â€:â€MArcompressedarchiveâ€},<br>    {â€œæ‰©å±•åâ€:â€maxâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€D0CF11â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€mdbâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€000100005374616E64617264204A6574204442â€,â€æ–‡ä»¶æè¿°â€:â€MicrosoftAccessfileâ€},<br>    {â€œæ‰©å±•åâ€:â€mdb;mda;mde;mdtâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€5374616E64617264204Aâ€,â€æ–‡ä»¶æè¿°â€:â€MSAccessâ€},<br>    {â€œæ‰©å±•åâ€:â€MDFâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€00FFFFâ€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€mdfâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€00FFFFFFFFFFFFFFFFFFFF0000020001â€,â€æ–‡ä»¶æè¿°â€:â€Alcohol120%CDimageâ€},<br>    {â€œæ‰©å±•åâ€:â€mdfâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€010F0000â€,â€æ–‡ä»¶æè¿°â€:â€MicrosoftSQLServer2000databaseâ€},<br>    {â€œæ‰©å±•åâ€:â€MDIâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4550â€,â€æ–‡ä»¶æè¿°â€:â€MicrosoftDocumentImagingfileâ€},<br>    {â€œæ‰©å±•åâ€:â€MDSâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D4544â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€MID;MIDIâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D546864â€,â€æ–‡ä»¶æè¿°â€:â€MusicalInstrumentDigitalInterface(MIDI)soundfileâ€},<br>    {â€œæ‰©å±•åâ€:â€mkvâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€1A45DFA3934282886D6174726F736B61â€,â€æ–‡ä»¶æè¿°â€:â€Matroskastreamfileâ€},<br>    {â€œæ‰©å±•åâ€:â€MLSâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D494C4553â€,â€æ–‡ä»¶æè¿°â€:â€Milestonesv1.0projectmanagementandschedulingsoftware(Alsosee&quot;MV2C&quot;and&quot;MV214&quot;signatures)â€},<br>    {â€œæ‰©å±•åâ€:â€MLSâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D4C5357â€,â€æ–‡ä»¶æè¿°â€:â€Skypelocalizationdatafileâ€},<br>    {â€œæ‰©å±•åâ€:â€MLSâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D56323134â€,â€æ–‡ä»¶æè¿°â€:â€Milestonesv2.1bprojectmanagementandschedulingsoftware(Alsosee&quot;MILES&quot;and&quot;MV2C&quot;signatures)â€},<br>    {â€œæ‰©å±•åâ€:â€MLSâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D563243â€,â€æ–‡ä»¶æè¿°â€:â€Milestonesv2.1aprojectmanagementandschedulingsoftware(Alsosee&quot;MILES&quot;and&quot;MV214&quot;signatures)â€},<br>    {â€œæ‰©å±•åâ€:â€MMFâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D4D4D440000â€,â€æ–‡ä»¶æè¿°â€:â€YamahaCorp.SyntheticmusicMobileApplicationFormat(SMAF)formultimediafilesthatcanbeplayedonhand-helddevices.â€},<br>    {â€œæ‰©å±•åâ€:â€mnyâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€000100004D534953414D204461746162617365â€,â€æ–‡ä»¶æè¿°â€:â€MicrosoftMoneyfileâ€},<br>    {â€œæ‰©å±•åâ€:â€MOVâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€00000Fâ€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€MOVâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€000077â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€movâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€6D6F6F76â€,â€æ–‡ä»¶æè¿°â€:â€Quicktimeâ€},<br>    {â€œæ‰©å±•åâ€:â€movâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€6D646174â€,â€æ–‡ä»¶æè¿°â€:â€QuickTimeMovieâ€},<br>    {â€œæ‰©å±•åâ€:â€mpâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€0CEDâ€,â€æ–‡ä»¶æè¿°â€:â€MonochromePictureTIFFbitmapfile(unconfirmed)â€},<br>    {â€œæ‰©å±•åâ€:â€MP3â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€494433â€,â€æ–‡ä»¶æè¿°â€:â€MPEG-1AudioLayer3(MP3)audiofileâ€},<br>    {â€œæ‰©å±•åâ€:â€MP3â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€FFFB50â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€mp4â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€000000186674797033677035â€,â€æ–‡ä»¶æè¿°â€:â€MPEG-4videofilesâ€},<br>    {â€œæ‰©å±•åâ€:â€MPAâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€000001â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€mpg;mpegâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€000001B3â€,â€æ–‡ä»¶æè¿°â€:â€MPEGMovieâ€},<br>    {â€œæ‰©å±•åâ€:â€mpgâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€000001BAâ€,â€æ–‡ä»¶æè¿°â€:â€MPEGâ€},<br>    {â€œæ‰©å±•åâ€:â€MSCâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€3C3F78â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€mscâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€3C3F786D6C2076657273696F6E3D22312E30223F3E0D0A3C4D4D435F436F6E736F6C6546696C6520436F6E736F6C6556657273696F6E3D22â€,â€æ–‡ä»¶æè¿°â€:â€MicrosoftManagementConsoleSnap-inControlfileâ€},<br>    {â€œæ‰©å±•åâ€:â€msiâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€2320â€,â€æ–‡ä»¶æè¿°â€:â€Cerius2fileâ€},<br>    {â€œæ‰©å±•åâ€:â€MSVâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D535F564F494345â€,â€æ–‡ä»¶æè¿°â€:â€SonyMemoryStickCompressedVoicefileâ€},<br>    {â€œæ‰©å±•åâ€:â€NESâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4E4553â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€NLSâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€C22020â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€nriâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€0E4E65726F49534Fâ€,â€æ–‡ä»¶æè¿°â€:â€NeroCDCompilationâ€},<br>    {â€œæ‰©å±•åâ€:â€ntfâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€1A0000â€,â€æ–‡ä»¶æè¿°â€:â€LotusNotesdatabasetemplateâ€},<br>    {â€œæ‰©å±•åâ€:â€nsf;ntfâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€1A0000030000â€,â€æ–‡ä»¶æè¿°â€:â€LotusNotesDatabase&#x2F;Templateâ€},<br>    {â€œæ‰©å±•åâ€:â€nsfâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€1A00000300001100â€,â€æ–‡ä»¶æè¿°â€:â€NotesDatabaseâ€},<br>    {â€œæ‰©å±•åâ€:â€nsfâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€1A0000040000â€,â€æ–‡ä»¶æè¿°â€:â€LotusNotesdatabaseâ€},<br>    {â€œæ‰©å±•åâ€:â€ntfâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€30314F52444E414E43452053555256455920202020202020â€,â€æ–‡ä»¶æè¿°â€:â€NationalTransferFormatMapFileâ€},<br>    {â€œæ‰©å±•åâ€:â€objâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4C01â€,â€æ–‡ä»¶æè¿°â€:â€MicrosoftCommonObjectFileFormat(COFF)relocatableobjectcodefileforanIntel386orlater&#x2F;compatibleprocessorsâ€},<br>    {â€œæ‰©å±•åâ€:â€OCXâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D5Aâ€,â€æ–‡ä»¶æè¿°â€:â€ActiveXorOLECustomControlâ€},<br>    {â€œæ‰©å±•åâ€:â€OCXâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D5A90â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€OLBâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D5Aâ€,â€æ–‡ä»¶æè¿°â€:â€OLEobjectlibraryâ€},<br>    {â€œæ‰©å±•åâ€:â€OLBâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D5A90â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€org;pfcâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€414F4C564D313030â€,â€æ–‡ä»¶æè¿°â€:â€AOLpersonalfilecabinet(PFC)fileâ€},<br>    {â€œæ‰©å±•åâ€:â€pakâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€1A0Bâ€,â€æ–‡ä»¶æè¿°â€:â€Compressedarchivefileâ€},<br>    {â€œæ‰©å±•åâ€:â€PATâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4746315041544348â€,â€æ–‡ä»¶æè¿°â€:â€AdvancedGravisUltrasoundpatchfileâ€},<br>    {â€œæ‰©å±•åâ€:â€PATâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€47504154â€,â€æ–‡ä»¶æè¿°â€:â€GIMP(GNUImageManipulationProgram)patternfileâ€},<br>    {â€œæ‰©å±•åâ€:â€PBKâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€5B4144â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€PCBâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€17A150â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€PCSâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€0A0501â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€pcxâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€0Ann0101â€,â€æ–‡ä»¶æè¿°â€:â€ZSOFTPaintbrushfile(wherenn&#x3D;0x02,0x03,or0x05)â€},<br>    {â€œæ‰©å±•åâ€:â€pcxâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€0A050108â€,â€æ–‡ä»¶æè¿°â€:â€PCPaintbrush(oftenassociatedwithQuakeEnginegames)â€},<br>    {<br>        â€œæ‰©å±•åâ€: â€œpdbâ€,<br>        â€œæ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€: â€œ[11byteoffset] 00 00 00 00 00 00 00 00 00 00 00 00   00 00 00 00 00 00 00 00 00 00 00 00â€,<br>        â€œæ–‡ä»¶æè¿°â€: â€œPalmpilot Database&#x2F;Document Fileâ€<br>    },<br>    {â€œæ‰©å±•åâ€:â€PDFâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€255044â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€pdf;fdfâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€25504446â€,â€æ–‡ä»¶æè¿°â€:â€AdobePortableDocumentFormatandFormsDocumentfileâ€},<br>    {â€œæ‰©å±•åâ€:â€pdfâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€255044462D312Eâ€,â€æ–‡ä»¶æè¿°â€:â€AdobeAcrobatâ€},<br>    {â€œæ‰©å±•åâ€:â€PDGâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€484802â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€pfâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€1100000053434341â€,â€æ–‡ä»¶æè¿°â€:â€Windowsprefetchfileâ€},<br>    {â€œæ‰©å±•åâ€:â€picâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€0100000001â€,â€æ–‡ä»¶æè¿°â€:â€Unknowntypepicturefileâ€},<br>    {â€œæ‰©å±•åâ€:â€PJTâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€000007â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€PLLâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€24536Fâ€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€PNGâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€89504Eâ€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€PNGâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€89504E47â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€pngâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€89504E470D0Aâ€,â€æ–‡ä»¶æè¿°â€:â€PNGImageFileâ€},<br>    {â€œæ‰©å±•åâ€:â€pngâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€89504E470D0A1A0Aâ€,â€æ–‡ä»¶æè¿°â€:â€PNGImageFileâ€},<br>    {â€œæ‰©å±•åâ€:â€PPCâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€526563â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€PPTâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€D0CF11â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {<br>        â€œæ‰©å±•åâ€: â€œpptâ€,<br>        â€œæ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€: â€œ[512byteoffset] 00 6E 1E F0â€,<br>        â€œæ–‡ä»¶æè¿°â€: â€œPowerPoint presentation subheader (MS Office)â€<br>    },<br>    {<br>        â€œæ‰©å±•åâ€: â€œpptâ€,<br>        â€œæ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€: â€œ[512byteoffset] 0F 00 E8 03â€,<br>        â€œæ–‡ä»¶æè¿°â€: â€œPowerPoint presentation subheader (MS Office)â€<br>    },<br>    {â€œæ‰©å±•åâ€:â€PPZâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D534346â€,â€æ–‡ä»¶æè¿°â€:â€PowerpointPackagedPresentationâ€},<br>    {â€œæ‰©å±•åâ€:â€prcâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€424F4F4B4D4F4249â€,â€æ–‡ä»¶æè¿°â€:â€Palmpilotresourcefileâ€},<br>    {â€œæ‰©å±•åâ€:â€PRGâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€234445â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€psâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€252150532D41646F6265â€,â€æ–‡ä»¶æè¿°â€:â€Postscriptâ€},<br>    {â€œæ‰©å±•åâ€:â€PSDâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€384250â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€psdâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€38425053â€,â€æ–‡ä»¶æè¿°â€:â€AdobePhotoshopimagefileâ€},<br>    {â€œæ‰©å±•åâ€:â€pspâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€7E424B00â€,â€æ–‡ä»¶æè¿°â€:â€PaintShopProImageFileâ€},<br>    {â€œæ‰©å±•åâ€:â€pstâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€2142444Eâ€,â€æ–‡ä»¶æè¿°â€:â€MicrosoftOutlookPersonalFolderfileâ€},<br>    {â€œæ‰©å±•åâ€:â€pwlâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€E3828596â€,â€æ–‡ä»¶æè¿°â€:â€WindowsPasswordâ€},<br>    {â€œæ‰©å±•åâ€:â€qbbâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€458600000600â€,â€æ–‡ä»¶æè¿°â€:â€IntuitQuickBooksBackupfileâ€},<br>    {â€œæ‰©å±•åâ€:â€qdfâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€AC9EBD8Fâ€,â€æ–‡ä»¶æè¿°â€:â€Quickenâ€},<br>    {â€œæ‰©å±•åâ€:â€qphâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€03000000â€,â€æ–‡ä»¶æè¿°â€:â€Quickenpricehistoryfileâ€},<br>    {â€œæ‰©å±•åâ€:â€qtâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€6D646174â€,â€æ–‡ä»¶æè¿°â€:â€QuicktimeMovieFileâ€},<br>    {â€œæ‰©å±•åâ€:â€qxdâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€00004949585052â€,â€æ–‡ä»¶æè¿°â€:â€QuarkExpressdocument(Intel&amp;Motorola,respectively)â€},<br>    {â€œæ‰©å±•åâ€:â€qxdâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€00004D4D585052â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€raâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€2E524D460000001200â€,â€æ–‡ä»¶æè¿°â€:â€RealAudiofileâ€},<br>    {â€œæ‰©å±•åâ€:â€ra;ramâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€2E7261FDâ€,â€æ–‡ä»¶æè¿°â€:â€RealAudioFileâ€},<br>    {â€œæ‰©å±•åâ€:â€raâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€2E7261FD00â€,â€æ–‡ä»¶æè¿°â€:â€RealAudiostreamingmediafileâ€},<br>    {â€œæ‰©å±•åâ€:â€RARâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€526172â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€rarâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€52617221â€,â€æ–‡ä»¶æè¿°â€:â€RARArchiveFileâ€},<br>    {â€œæ‰©å±•åâ€:â€RAWâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€060500â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€regâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€5245474544495434â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€rgbâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€01DA01010003â€,â€æ–‡ä»¶æè¿°â€:â€SiliconGraphicsRGBBitmapâ€},<br>    {â€œæ‰©å±•åâ€:â€RMâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€2E524Dâ€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€rm;rmvbâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€2E524D46â€,â€æ–‡ä»¶æè¿°â€:â€RealMediastreamingmediafileâ€},<br>    {â€œæ‰©å±•åâ€:â€rpmâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€EDABEEDBâ€,â€æ–‡ä»¶æè¿°â€:â€RPMArchiveFileâ€},<br>    {â€œæ‰©å±•åâ€:â€RTDâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€43232B44A4434DA5486472â€,â€æ–‡ä»¶æè¿°â€:â€RagTimedocumentfileâ€},<br>    {â€œæ‰©å±•åâ€:â€RTFâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€7B5C72â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€rtfâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€7B5C727466â€,â€æ–‡ä»¶æè¿°â€:â€RichTextFormatFileâ€},<br>    {â€œæ‰©å±•åâ€:â€savâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€24464C3240282329205350535320444154412046494C45â€,â€æ–‡ä»¶æè¿°â€:â€SPSSDatafileâ€},<br>    {â€œæ‰©å±•åâ€:â€SBVâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€46454446â€,â€æ–‡ä»¶æè¿°â€:â€(Unknownfiletype)â€},<br>    {â€œæ‰©å±•åâ€:â€SCHâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€2A7665â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€scmâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€805343â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€SH3â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4848474231â€,â€æ–‡ä»¶æè¿°â€:â€HarvardGraphicspresentationfileâ€},<br>    {â€œæ‰©å±•åâ€:â€SHDâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4B490000â€,â€æ–‡ä»¶æè¿°â€:â€Windows9xprinterspoolfileâ€},<br>    {â€œæ‰©å±•åâ€:â€sitâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€53495421â€,â€æ–‡ä»¶æè¿°â€:â€Stuffitv1ArchiveFileâ€},<br>    {â€œæ‰©å±•åâ€:â€sitâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€53747566664974â€,â€æ–‡ä»¶æè¿°â€:â€Stuffitv5ArchiveFileâ€},<br>    {â€œæ‰©å±•åâ€:â€sleâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€3A56455253494F4Eâ€,â€æ–‡ä»¶æè¿°â€:â€Surfplankiteprojectfileâ€},<br>    {â€œæ‰©å±•åâ€:â€sleâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€414376â€,â€æ–‡ä»¶æè¿°â€:â€teganosSecuritySuitevirtualsecuredriveâ€},<br>    {â€œæ‰©å±•åâ€:â€sly;srt;sltâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€53520100â€,â€æ–‡ä»¶æè¿°â€:â€Sagesly.or.srt.or.sltâ€},<br>    {â€œæ‰©å±•åâ€:â€SMDâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€00FFFFâ€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€snmâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€001E849000000000â€,â€æ–‡ä»¶æè¿°â€:â€NetscapeCommunicator(v4)mailfolderâ€},<br>    {â€œæ‰©å±•åâ€:â€SNPâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D534346â€,â€æ–‡ä»¶æè¿°â€:â€MicrosoftAccessSnapshotViewerfileâ€},<br>    {â€œæ‰©å±•åâ€:â€solâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€00BFâ€,â€æ–‡ä»¶æè¿°â€:â€AdobeFlashsharedobjectfile(e.g.,Flashcookies)â€},<br>    {â€œæ‰©å±•åâ€:â€splâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€00000100â€,â€æ–‡ä»¶æè¿°â€:â€WindowsNT&#x2F;2000&#x2F;XPprinterspoolfileâ€},<br>    {â€œæ‰©å±•åâ€:â€SCRâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D5Aâ€,â€æ–‡ä»¶æè¿°â€:â€Screensaverâ€},<br>    {â€œæ‰©å±•åâ€:â€SUBâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€FFFFFFâ€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€SWFâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€435753â€,â€æ–‡ä»¶æè¿°â€:â€ShockwaveFlashfile(v5+)â€},<br>    {â€œæ‰©å±•åâ€:â€SWFâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€465753â€,â€æ–‡ä»¶æè¿°â€:â€MacromediaShockwaveFlashplayerfileâ€},<br>    {â€œæ‰©å±•åâ€:â€sxcâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€calcâ€,â€æ–‡ä»¶æè¿°â€:â€OpenOfficeCalcâ€},<br>    {â€œæ‰©å±•åâ€:â€sxdâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€drawâ€,â€æ–‡ä»¶æè¿°â€:â€OpenOfficeDrawâ€},<br>    {â€œæ‰©å±•åâ€:â€sxiâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€impressâ€,â€æ–‡ä»¶æè¿°â€:â€OpenOfficeImpressâ€},<br>    {â€œæ‰©å±•åâ€:â€sxmâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€mathâ€,â€æ–‡ä»¶æè¿°â€:â€OpenOfficeMathâ€},<br>    {â€œæ‰©å±•åâ€:â€sxwâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€writerâ€,â€æ–‡ä»¶æè¿°â€:â€OpenOfficeWriterâ€},<br>    {â€œæ‰©å±•åâ€:â€sywâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€414D594Fâ€,â€æ–‡ä»¶æè¿°â€:â€HarvardGraphicssymbolgraphicâ€},<br>    {â€œæ‰©å±•åâ€:â€TAGâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€000002â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€tar;cpioâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€303730373037â€,â€æ–‡ä»¶æè¿°â€:â€CPIOArchiveFileâ€},<br>    {â€œæ‰©å±•åâ€:â€tar.zâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€1F9D90â€,â€æ–‡ä»¶æè¿°â€:â€Compressedtapearchivefileâ€},<br>    {â€œæ‰©å±•åâ€:â€tgaâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€0000100000â€,â€æ–‡ä»¶æè¿°â€:â€RLEå‹ç¼©çš„å‰5å­—èŠ‚â€},<br>    {â€œæ‰©å±•åâ€:â€TGAâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€000002â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€tgaâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€0000020000â€,â€æ–‡ä»¶æè¿°â€:â€æœªå‹ç¼©çš„å‰5å­—èŠ‚â€},<br>    {â€œæ‰©å±•åâ€:â€TIF;TIFFâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€492049â€,â€æ–‡ä»¶æè¿°â€:â€TaggedImageFileFormatfileâ€},<br>    {â€œæ‰©å±•åâ€:â€tif;tiffâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€49492Aâ€,â€æ–‡ä»¶æè¿°â€:â€TIFF(Intel)â€},<br>    {â€œæ‰©å±•åâ€:â€tif;tiffâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€49492A00â€,â€æ–‡ä»¶æè¿°â€:â€TaggedImageFileFormatfile(littleendian,i.e.,LSBfirstinthebyte;Intel)â€},<br>    {â€œæ‰©å±•åâ€:â€TIF;TIFFâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D4D002Aâ€,â€æ–‡ä»¶æè¿°â€:â€TaggedImageFileFormatfile(bigendian,i.e.,LSBlastinthebyte;Motorola)â€},<br>    {â€œæ‰©å±•åâ€:â€tif;tiffâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D4D2Aâ€,â€æ–‡ä»¶æè¿°â€:â€TIFF(Motorola)â€},<br>    {â€œæ‰©å±•åâ€:â€TIF;TIFFâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D4D002Bâ€,â€æ–‡ä»¶æè¿°â€:â€BigTIFFfiles;TaggedImageFileFormatfiles&gt;4GBâ€},<br>    {â€œæ‰©å±•åâ€:â€TLBâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D53465402000100â€,â€æ–‡ä»¶æè¿°â€:â€OLE,SPSS,orVisualC++typelibraryfileâ€},<br>    {â€œæ‰©å±•åâ€:â€tr1â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€0110â€,â€æ–‡ä»¶æè¿°â€:â€NovellLANalyzercapturefileâ€},<br>    {â€œæ‰©å±•åâ€:â€TSTâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€000100â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€TTFâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€000100â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€ufaâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€554641â€,â€æ–‡ä»¶æè¿°â€:â€UFAArchiveFileâ€},<br>    {â€œæ‰©å±•åâ€:â€VBXâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D5Aâ€,â€æ–‡ä»¶æè¿°â€:â€VisualBASICapplicationâ€},<br>    {â€œæ‰©å±•åâ€:â€VCDâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€454E5452595643440200000102001858â€,â€æ–‡ä»¶æè¿°â€:â€VideoVCD(GNUVCDImager)fileâ€},<br>    {â€œæ‰©å±•åâ€:â€vcfâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€424547494E3A56434152440D0Aâ€,â€æ–‡ä»¶æè¿°â€:â€vCardfileâ€},<br>    {â€œæ‰©å±•åâ€:â€vobâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€000001BAâ€,â€æ–‡ä»¶æè¿°â€:â€DVDVideoMovieFile(video&#x2F;dvd,video&#x2F;mpeg)â€},<br>    {â€œæ‰©å±•åâ€:â€VXD,386â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€4D5Aâ€,â€æ–‡ä»¶æè¿°â€:â€Windowsvirtualdevicedriversâ€},<br>    {â€œæ‰©å±•åâ€:â€WAVâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€524946â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€wavâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€57415645â€,â€æ–‡ä»¶æè¿°â€:â€Waveâ€},<br>    {â€œæ‰©å±•åâ€:â€wavâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€57415645666D74â€,â€æ–‡ä»¶æè¿°â€:â€WaveFilesâ€},<br>    {â€œæ‰©å±•åâ€:â€wb2â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€00000200â€,â€æ–‡ä»¶æè¿°â€:â€QuattroProforWindowsSpreadsheetfileâ€},<br>    {<br>        â€œæ‰©å±•åâ€: â€œwb3â€,<br>        â€œæ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€: â€œ[24byteoffset] 3E 00 03 00 FE FF 09 00 06â€,<br>        â€œæ–‡ä»¶æè¿°â€: â€œQuatro Pro for Windows 7.0 Notebook fileâ€<br>    },<br>    {â€œæ‰©å±•åâ€:â€wk1;wksâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€2000604060â€,â€æ–‡ä»¶æè¿°â€:â€Lotus123v1Worksheetâ€},<br>    {â€œæ‰©å±•åâ€:â€wk1â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€0000020006040600080000000000â€,â€æ–‡ä»¶æè¿°â€:â€Lotus1-2-3spreadsheet(v1)fileâ€},<br>    {â€œæ‰©å±•åâ€:â€wk3â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€00001A0000100400â€,â€æ–‡ä»¶æè¿°â€:â€Lotus123spreadsheet(v3)fileâ€},<br>    {â€œæ‰©å±•åâ€:â€wk4;wk5â€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€00001A0002100400â€,â€æ–‡ä»¶æè¿°â€:â€Lotus1-2-3spreadsheet(v4,v5)fileâ€},<br>    {â€œæ‰©å±•åâ€:â€wksâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€0E574B53â€,â€æ–‡ä»¶æè¿°â€:â€DeskMateWorksheetâ€},<br>    {â€œæ‰©å±•åâ€:â€WMAâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€3026B2â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€wmfâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€01000900â€,â€æ–‡ä»¶æè¿°â€:â€GraphicsMetafileâ€},<br>    {â€œæ‰©å±•åâ€:â€wmfâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€010009000003â€,â€æ–‡ä»¶æè¿°â€:â€WindowsMetadatafile(Win3.xformat)â€},<br>    {â€œæ‰©å±•åâ€:â€wmfâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€02000900â€,â€æ–‡ä»¶æè¿°â€:â€GraphicsMetafileâ€},<br>    {â€œæ‰©å±•åâ€:â€wmfâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€D7CDC69Aâ€,â€æ–‡ä»¶æè¿°â€:â€WindowsMetaFileâ€},<br>    {â€œæ‰©å±•åâ€:â€WMVâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€3026B2â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€wpâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€FF575043â€,â€æ–‡ä»¶æè¿°â€:â€WordPerfectv5orv6â€},<br>    {â€œæ‰©å±•åâ€:â€wpdâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€FF575043â€,â€æ–‡ä»¶æè¿°â€:â€WordPerfectâ€},<br>    {â€œæ‰©å±•åâ€:â€wpgâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€FF575047â€,â€æ–‡ä»¶æè¿°â€:â€WordPerfectGraphicsâ€},<br>    {â€œæ‰©å±•åâ€:â€wriâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€31BEâ€,â€æ–‡ä»¶æè¿°â€:â€MicrosoftWritefileâ€},<br>    {â€œæ‰©å±•åâ€:â€WRIâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€31BE00â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€wriâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€32BEâ€,â€æ–‡ä»¶æè¿°â€:â€MicrosoftWritefileâ€},<br>    {â€œæ‰©å±•åâ€:â€wsâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€1D7Dâ€,â€æ–‡ä»¶æè¿°â€:â€WordStarVersion5.0&#x2F;6.0documentâ€},<br>    {â€œæ‰©å±•åâ€:â€XBEâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€584245â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€xdrâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€3Câ€,â€æ–‡ä»¶æè¿°â€:â€BizTalkXML-DataReducedSchemafileâ€},<br>    {â€œæ‰©å±•åâ€:â€xlsâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€0902060000001000B9045C00â€,â€æ–‡ä»¶æè¿°â€:â€MSExcelv2â€},<br>    {â€œæ‰©å±•åâ€:â€xlsâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€0904060000001000F6055C00â€,â€æ–‡ä»¶æè¿°â€:â€MSExcelv4â€},<br>    {â€œæ‰©å±•åâ€:â€XLSâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€D0CF11â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€xlsâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€D0CF11E0â€,â€æ–‡ä»¶æè¿°â€:â€MSExcelâ€},<br>    {<br>        â€œæ‰©å±•åâ€: â€œxlsâ€,<br>        â€œæ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€: â€œ[512byteoffset]  09 08 10 00 00 06 05 00â€,<br>        â€œæ–‡ä»¶æè¿°â€: â€œExcel spreadsheet subheader (MS Office)â€<br>    },<br>    {â€œæ‰©å±•åâ€:â€XMLâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€3C3F78â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€xmlâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€3C3F786D6Câ€,â€æ–‡ä»¶æè¿°â€:â€XMLDocumentâ€},<br>    {â€œæ‰©å±•åâ€:â€xmlâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€FFFE3C0052004F004F0054005300540055004200â€,â€æ–‡ä»¶æè¿°â€:â€XMLDocument(ROOTSTUB)â€},<br>    {â€œæ‰©å±•åâ€:â€XMVâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€005001â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€XSLâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€FFFE3Câ€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€xulâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€7273696F6E3D22313C3F786D6C2076652E30223F3Eâ€,â€æ–‡ä»¶æè¿°â€:â€XMLUserInterfaceLanguagefileâ€},<br>    {â€œæ‰©å±•åâ€:â€zâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€1F9Dâ€,â€æ–‡ä»¶æè¿°â€:â€TARCompressedArchiveFileâ€},<br>    {â€œæ‰©å±•åâ€:â€Zâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€1F9D8Câ€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€ZIPâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€504B03â€,â€æ–‡ä»¶æè¿°â€:â€â€},<br>    {â€œæ‰©å±•åâ€:â€zip;jar;zipxâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€504B0304â€,â€æ–‡ä»¶æè¿°â€:â€ZIPArchiveâ€},<br>    {â€œæ‰©å±•åâ€:â€zipâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€504B3030â€,â€æ–‡ä»¶æè¿°â€:â€ZIPArchive(outdated)â€},<br>    {â€œæ‰©å±•åâ€:â€Zipâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€504B3030504B0304â€,â€æ–‡ä»¶æè¿°â€:â€WINZIPCompressedâ€},<br>    {â€œæ‰©å±•åâ€:â€zooâ€,â€æ–‡ä»¶å¤´æ ‡è¯†ï¼ˆHEXï¼‰â€:â€5A4F4F20â€,â€æ–‡ä»¶æè¿°â€:â€ZOOArchiveFileâ€}<br>]</p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå®‰å…¨ </category>
          
          <category> Misc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå®‰å…¨ </tag>
            
            <tag> Misc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysqlä¸­é»˜è®¤Datatimeä¸º0æ—¶é—´æŠ¥é”™é—®é¢˜è§£å†³</title>
      <link href="/2021/01/02/47ee6c9eb30a-q1jun/"/>
      <url>/2021/01/02/47ee6c9eb30a-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="Mysqlä¸­é»˜è®¤Datatimeä¸º0æ—¶é—´æŠ¥é”™"><a href="#Mysqlä¸­é»˜è®¤Datatimeä¸º0æ—¶é—´æŠ¥é”™" class="headerlink" title="Mysqlä¸­é»˜è®¤Datatimeä¸º0æ—¶é—´æŠ¥é”™"></a>Mysqlä¸­é»˜è®¤Datatimeä¸º0æ—¶é—´æŠ¥é”™</h1><p>è¿è¡ŒSqlè„šæœ¬æ—¶æŠ¥é”™ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Err] <span class="number">1067</span> <span class="operator">-</span> Invalid <span class="keyword">default</span> <span class="keyword">value</span> <span class="keyword">for</span> <span class="string">&#x27;UPDATE_TIME&#x27;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé—®é¢˜å’Œmysqlä¸­sql_modeæœ‰å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ä¸¤ç§æ–¹æ³•æ¥æŸ¥çœ‹å®ƒçš„å€¼:</p><p><strong>æ–¹æ³•1</strong>:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> VARIABLES <span class="keyword">LIKE</span> <span class="string">&#x27;sql_mode%&#x27;</span>;</span><br></pre></td></tr></table></figure><p>è¿”å›ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">+</span><span class="comment">---------------+------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> Variable_name <span class="operator">|</span> <span class="keyword">Value</span>                                                                                    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> sql_mode      <span class="operator">|</span> ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.15</span> sec)</span><br></pre></td></tr></table></figure><p><strong>æ–¹æ³•2:</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@sql</span>_mode;</span><br></pre></td></tr></table></figure><p>è¿”å›ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">+</span><span class="comment">-----------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> @<span class="variable">@sql</span>_mode                                                                                                            <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.05</span> sec)</span><br></pre></td></tr></table></figure><h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><p>å¯ä»¥çœ‹åˆ°sql_modeä¸­æœ‰NO_ZERO_IN_DATE,NO_ZERO_DATEä¸¤ä¸ªå­—æ®µï¼Œè¿™å°±æ˜¯ç½ªé­ç¥¸é¦–ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨å…¨å±€è®¾ç½®ï¼ˆGlobalï¼‰æŠŠè¿™ä¸¤ä¸ªå­—æ®µç»™å»æ‰å°±è¡Œäº†ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">set</span> <span class="keyword">global</span> sql_mode<span class="operator">=</span><span class="string">&#x27;ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION&#x27;</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.03</span> sec)</span><br></pre></td></tr></table></figure><p>ç„¶åé‡å¯MysqlæœåŠ¡ï¼Œå¦‚æœä¸æƒ³é‡å¯ä¹Ÿå¯ç›´æ¥è®¾ç½®å½“å‰çš„sql_modeï¼Œä½†æ˜¯ä¸€å®šè¦è®¾ç½®å…¨å±€çš„sql_modeï¼Œå¦åˆ™å…³æ‰æ­¤ç»ˆç«¯å°±åˆæ¢å¤åŸæ ·äº†ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">set</span> sql_mode<span class="operator">=</span><span class="string">&#x27;ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION&#x27;</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.05</span> sec)</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">set</span> session sql_mode<span class="operator">=</span><span class="string">&#x27;ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION&#x27;</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.05</span> sec)</span><br></pre></td></tr></table></figure><p>é‡æ–°æŸ¥è¯¢Sql_modeï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SHOW</span> VARIABLES <span class="keyword">LIKE</span> <span class="string">&#x27;sql_mode%&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> Variable_name <span class="operator">|</span> <span class="keyword">Value</span>                                                                                    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> sql_mode      <span class="operator">|</span> ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.04</span> sec)</span><br><span class="line"> </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åç«¯ </tag>
            
            <tag> Linux </tag>
            
            <tag> MySql </tag>
            
            <tag> æŠ¥é”™ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MarkDownä½¿ç”¨æ•™ç¨‹</title>
      <link href="/2020/12/12/a801c1bd0b64-q1jun/"/>
      <url>/2020/12/12/a801c1bd0b64-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="markdown-æ•™ç¨‹"><a href="#markdown-æ•™ç¨‹" class="headerlink" title="markdown æ•™ç¨‹"></a>markdown æ•™ç¨‹</h1><h2 id="1-Markdown-æ ‡é¢˜"><a href="#1-Markdown-æ ‡é¢˜" class="headerlink" title="1.Markdown æ ‡é¢˜"></a>1.Markdown æ ‡é¢˜</h2><p>1ã€ä½¿ç”¨ &#x3D; å’Œ - æ ‡è®°ä¸€çº§å’ŒäºŒçº§æ ‡é¢˜<br>&#x3D; å’Œ - æ ‡è®°è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="section">æˆ‘å±•ç¤ºçš„æ˜¯ä¸€çº§æ ‡é¢˜</span></span><br><span class="line"><span class="section">=================</span></span><br><span class="line"></span><br><span class="line"><span class="section">æˆ‘å±•ç¤ºçš„æ˜¯äºŒçº§æ ‡é¢˜</span></span><br><span class="line"><span class="section">-----------------</span></span><br></pre></td></tr></table></figure><p>2 ã€ä½¿ç”¨ # å·æ ‡è®°</p><p>ä½¿ç”¨ <strong>#</strong> å·å¯è¡¨ç¤º 1-6 çº§æ ‡é¢˜ï¼Œä¸€çº§æ ‡é¢˜å¯¹åº”ä¸€ä¸ª <strong>#</strong> å·ï¼ŒäºŒçº§æ ‡é¢˜å¯¹åº”ä¸¤ä¸ª <strong>#</strong> å·ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># ä¸€çº§æ ‡é¢˜</span><br><span class="line">## äºŒçº§æ ‡é¢˜</span><br><span class="line">### ä¸‰çº§æ ‡é¢˜</span><br><span class="line">#### å››çº§æ ‡é¢˜</span><br><span class="line">##### äº”çº§æ ‡é¢˜</span><br><span class="line">###### å…­çº§æ ‡é¢˜</span><br></pre></td></tr></table></figure><h2 id="2-Markdown-æ®µè½"><a href="#2-Markdown-æ®µè½" class="headerlink" title="2.Markdown æ®µè½"></a>2.Markdown æ®µè½</h2><p>Markdown æ®µè½æ²¡æœ‰ç‰¹æ®Šçš„æ ¼å¼ï¼Œç›´æ¥ç¼–å†™æ–‡å­—å°±å¥½ï¼Œ<strong>æ®µè½çš„æ¢è¡Œæ˜¯ä½¿ç”¨ä¸¤ä¸ªä»¥ä¸Šç©ºæ ¼åŠ ä¸Šå›è½¦</strong>ã€‚  </p><h2 id="3-å­—ä½“"><a href="#3-å­—ä½“" class="headerlink" title="3.å­—ä½“"></a>3.å­—ä½“</h2><p>Markdown å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‡ ç§å­—ä½“:</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="strong">*æ–œä½“æ–‡æœ¬*</span></span><br><span class="line"><span class="emphasis">_æ–œä½“æ–‡æœ¬_</span></span><br><span class="line"><span class="strong">**ç²—ä½“æ–‡æœ¬**</span></span><br><span class="line"><span class="emphasis">__ç²—ä½“æ–‡æœ¬__</span></span><br><span class="line"><span class="strong">***ç²—æ–œä½“æ–‡æœ¬**</span>*</span><br><span class="line"><span class="emphasis">___ç²—æ–œä½“æ–‡æœ¬__</span>_</span><br></pre></td></tr></table></figure><h2 id="3-åˆ†éš”çº¿"><a href="#3-åˆ†éš”çº¿" class="headerlink" title="3.åˆ†éš”çº¿"></a>3.åˆ†éš”çº¿</h2><p>ä½ å¯ä»¥åœ¨ä¸€è¡Œä¸­ç”¨ä¸‰ä¸ªä»¥ä¸Šçš„æ˜Ÿå·ã€å‡å·ã€åº•çº¿æ¥å»ºç«‹ä¸€ä¸ªåˆ†éš”çº¿ï¼Œè¡Œå†…ä¸èƒ½æœ‰å…¶ä»–ä¸œè¥¿ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨æ˜Ÿå·æˆ–æ˜¯å‡å·ä¸­é—´æ’å…¥ç©ºæ ¼ã€‚ä¸‹é¢æ¯ç§å†™æ³•éƒ½å¯ä»¥å»ºç«‹åˆ†éš”çº¿ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="strong">**<span class="emphasis">*</span></span></span><br><span class="line"><span class="emphasis"><span class="strong"></span></span></span><br><span class="line"><span class="emphasis"><span class="strong">*</span> <span class="emphasis">* *</span></span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">**</span><span class="strong">**<span class="emphasis">*</span></span></span><br><span class="line"><span class="emphasis"><span class="strong"></span></span></span><br><span class="line"><span class="emphasis"><span class="strong">- - -</span></span></span><br><span class="line"><span class="emphasis"><span class="strong"></span></span></span><br><span class="line"><span class="emphasis"><span class="strong">----------</span></span></span><br></pre></td></tr></table></figure><h2 id="4-åˆ é™¤çº¿"><a href="#4-åˆ é™¤çº¿" class="headerlink" title="4.åˆ é™¤çº¿"></a>4.åˆ é™¤çº¿</h2><p>å¦‚æœæ®µè½ä¸Šçš„æ–‡å­—è¦æ·»åŠ åˆ é™¤çº¿ï¼Œåªéœ€è¦åœ¨æ–‡å­—çš„ä¸¤ç«¯åŠ ä¸Šä¸¤ä¸ªæ³¢æµªçº¿<code>~~</code>å³å¯ï¼Œå®ä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RUNOOB<span class="selector-class">.COM</span></span><br><span class="line">GOOGLE<span class="selector-class">.COM</span></span><br><span class="line">~~BAIDU.COM~~</span><br></pre></td></tr></table></figure><h2 id="5-ä¸‹åˆ’çº¿"><a href="#5-ä¸‹åˆ’çº¿" class="headerlink" title="5.ä¸‹åˆ’çº¿"></a>5.ä¸‹åˆ’çº¿</h2><p>ä¸‹åˆ’çº¿å¯ä»¥é€šè¿‡ HTML çš„ <code>&lt;u&gt; </code>æ ‡ç­¾æ¥å®ç°ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">u</span>&gt;</span>å¸¦ä¸‹åˆ’çº¿æ–‡æœ¬<span class="tag">&lt;/<span class="name">u</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="6-è„šæ³¨"><a href="#6-è„šæ³¨" class="headerlink" title="6.è„šæ³¨"></a>6.è„šæ³¨</h2><p>è„šæ³¨æ˜¯å¯¹æ–‡æœ¬çš„è¡¥å……è¯´æ˜ã€‚</p><p>Markdown è„šæ³¨çš„æ ¼å¼å¦‚ä¸‹:</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[^è¦æ³¨æ˜çš„æ–‡æœ¬]</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹å®ä¾‹æ¼”ç¤ºäº†è„šæ³¨çš„ç”¨æ³•ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">åˆ›å»ºè„šæ³¨æ ¼å¼ç±»ä¼¼è¿™æ · [^è¦æ³¨æ˜çš„æ–‡æœ¬]ã€‚</span><br><span class="line"></span><br><span class="line">[<span class="symbol">^Q1JUN.CN</span>]: <span class="link">ä¸€ä¸ªä¸ªäººåšå®¢ç•Œé¢ï¼</span></span><br></pre></td></tr></table></figure><h2 id="7-Markdown-åˆ—è¡¨"><a href="#7-Markdown-åˆ—è¡¨" class="headerlink" title="7.Markdown åˆ—è¡¨"></a>7.Markdown åˆ—è¡¨</h2><p>Markdown æ”¯æŒæœ‰åºåˆ—è¡¨å’Œæ— åºåˆ—è¡¨ã€‚</p><p>æ— åºåˆ—è¡¨ä½¿ç”¨æ˜Ÿå·(*)ã€åŠ å·(+)æˆ–æ˜¯å‡å·(-)ä½œä¸ºåˆ—è¡¨æ ‡è®°ï¼Œè¿™äº›æ ‡è®°åé¢è¦æ·»åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œç„¶åå†å¡«å†™å†…å®¹ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">*</span> ç¬¬ä¸€é¡¹</span><br><span class="line"><span class="bullet">*</span> ç¬¬äºŒé¡¹</span><br><span class="line"><span class="bullet">*</span> ç¬¬ä¸‰é¡¹</span><br><span class="line"></span><br><span class="line"><span class="bullet">+</span> ç¬¬ä¸€é¡¹</span><br><span class="line"><span class="bullet">+</span> ç¬¬äºŒé¡¹</span><br><span class="line"><span class="bullet">+</span> ç¬¬ä¸‰é¡¹</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> ç¬¬ä¸€é¡¹</span><br><span class="line"><span class="bullet">-</span> ç¬¬äºŒé¡¹</span><br><span class="line"><span class="bullet">-</span> ç¬¬ä¸‰é¡¹</span><br></pre></td></tr></table></figure><p>æœ‰åºåˆ—è¡¨ä½¿ç”¨æ•°å­—å¹¶åŠ ä¸Š . å·æ¥è¡¨ç¤ºï¼Œå¦‚ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> ç¬¬ä¸€é¡¹</span><br><span class="line"><span class="bullet">2.</span> ç¬¬äºŒé¡¹</span><br><span class="line"><span class="bullet">3.</span> ç¬¬ä¸‰é¡¹</span><br></pre></td></tr></table></figure><h3 id="åˆ—è¡¨åµŒå¥—"><a href="#åˆ—è¡¨åµŒå¥—" class="headerlink" title="åˆ—è¡¨åµŒå¥—"></a>åˆ—è¡¨åµŒå¥—</h3><p>åˆ—è¡¨åµŒå¥—åªéœ€åœ¨å­åˆ—è¡¨ä¸­çš„é€‰é¡¹å‰é¢æ·»åŠ å››ä¸ªç©ºæ ¼å³å¯ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> ç¬¬ä¸€é¡¹ï¼š</span><br><span class="line"><span class="bullet">    -</span> ç¬¬ä¸€é¡¹åµŒå¥—çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span><br><span class="line"><span class="bullet">    -</span> ç¬¬ä¸€é¡¹åµŒå¥—çš„ç¬¬äºŒä¸ªå…ƒç´ </span><br><span class="line"><span class="bullet">2.</span> ç¬¬äºŒé¡¹ï¼š</span><br><span class="line"><span class="bullet">    -</span> ç¬¬äºŒé¡¹åµŒå¥—çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span><br><span class="line"><span class="bullet">    -</span> ç¬¬äºŒé¡¹åµŒå¥—çš„ç¬¬äºŒä¸ªå…ƒç´ </span><br></pre></td></tr></table></figure><h2 id="8-Markdown-åŒºå—"><a href="#8-Markdown-åŒºå—" class="headerlink" title="8.Markdown åŒºå—"></a>8.Markdown åŒºå—</h2><p>Markdown åŒºå—å¼•ç”¨æ˜¯åœ¨æ®µè½å¼€å¤´ä½¿ç”¨ &gt; ç¬¦å· ï¼Œç„¶ååé¢ç´§è·Ÿä¸€ä¸ªç©ºæ ¼ç¬¦å·ï¼š</p><figure class="highlight node-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span> <span class="language-javascript">åŒºå—å¼•ç”¨</span></span><br><span class="line"><span class="meta prompt_">&gt;</span> <span class="language-javascript">èœé¸Ÿæ•™ç¨‹</span></span><br><span class="line"><span class="meta prompt_">&gt;</span> <span class="language-javascript">å­¦çš„ä¸ä»…æ˜¯æŠ€æœ¯æ›´æ˜¯æ¢¦æƒ³</span></span><br></pre></td></tr></table></figure><p>å¦å¤–åŒºå—æ˜¯å¯ä»¥åµŒå¥—çš„ï¼Œä¸€ä¸ª &gt; ç¬¦å·æ˜¯æœ€å¤–å±‚ï¼Œä¸¤ä¸ª &gt; ç¬¦å·æ˜¯ç¬¬ä¸€å±‚åµŒå¥—ï¼Œä»¥æ­¤ç±»æ¨ï¼š</p><figure class="highlight node-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span> <span class="language-javascript">æœ€å¤–å±‚</span></span><br><span class="line"><span class="meta prompt_">&gt;</span> <span class="language-javascript">&gt; ç¬¬ä¸€å±‚åµŒå¥—</span></span><br><span class="line"><span class="meta prompt_">&gt;</span> <span class="language-javascript">&gt; &gt; ç¬¬äºŒå±‚åµŒå¥—</span></span><br></pre></td></tr></table></figure><h3 id="åŒºå—ä¸­ä½¿ç”¨åˆ—è¡¨"><a href="#åŒºå—ä¸­ä½¿ç”¨åˆ—è¡¨" class="headerlink" title="åŒºå—ä¸­ä½¿ç”¨åˆ—è¡¨"></a>åŒºå—ä¸­ä½¿ç”¨åˆ—è¡¨</h3><p>åŒºå—ä¸­ä½¿ç”¨åˆ—è¡¨å®ä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight node-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">&gt;</span> <span class="language-javascript">åŒºå—ä¸­ä½¿ç”¨åˆ—è¡¨</span></span><br><span class="line"><span class="meta prompt_">&gt;</span> <span class="language-javascript"><span class="number">1.</span> ç¬¬ä¸€é¡¹</span></span><br><span class="line"><span class="meta prompt_">&gt;</span> <span class="language-javascript"><span class="number">2.</span> ç¬¬äºŒé¡¹</span></span><br><span class="line"><span class="meta prompt_">&gt;</span> <span class="language-javascript">+ ç¬¬ä¸€é¡¹</span></span><br><span class="line"><span class="meta prompt_">&gt;</span> <span class="language-javascript">+ ç¬¬äºŒé¡¹</span></span><br><span class="line"><span class="meta prompt_">&gt;</span> <span class="language-javascript">+ ç¬¬ä¸‰é¡¹</span></span><br></pre></td></tr></table></figure><h3 id="åˆ—è¡¨ä¸­ä½¿ç”¨åŒºå—"><a href="#åˆ—è¡¨ä¸­ä½¿ç”¨åŒºå—" class="headerlink" title="åˆ—è¡¨ä¸­ä½¿ç”¨åŒºå—"></a>åˆ—è¡¨ä¸­ä½¿ç”¨åŒºå—</h3><p>å¦‚æœè¦åœ¨åˆ—è¡¨é¡¹ç›®å†…æ”¾è¿›åŒºå—ï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨ &gt; å‰æ·»åŠ å››ä¸ªç©ºæ ¼çš„ç¼©è¿›ã€‚</p><p>åˆ—è¡¨ä¸­ä½¿ç”¨åŒºå—å®ä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>ç¬¬ä¸€é¡¹</span><br><span class="line"><span class="code">    &gt; èœé¸Ÿæ•™ç¨‹</span></span><br><span class="line"><span class="code">    &gt; å­¦çš„ä¸ä»…æ˜¯æŠ€æœ¯æ›´æ˜¯æ¢¦æƒ³</span></span><br><span class="line"><span class="bullet">* </span>ç¬¬äºŒé¡¹</span><br></pre></td></tr></table></figure><h2 id="9-Markdown-ä»£ç "><a href="#9-Markdown-ä»£ç " class="headerlink" title="9.Markdown ä»£ç "></a>9.Markdown ä»£ç </h2><p>å¦‚æœæ˜¯æ®µè½ä¸Šçš„ä¸€ä¸ªå‡½æ•°æˆ–ç‰‡æ®µçš„ä»£ç å¯ä»¥ç”¨åå¼•å·æŠŠå®ƒåŒ…èµ·æ¥ï¼ˆ<code> </code> &#96;ï¼‰ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">`printf()`</span> å‡½æ•°</span><br></pre></td></tr></table></figure><h3 id="ä»£ç åŒºå—"><a href="#ä»£ç åŒºå—" class="headerlink" title="ä»£ç åŒºå—"></a>ä»£ç åŒºå—</h3><p>ä»£ç åŒºå—ä½¿ç”¨ 4 ä¸ªç©ºæ ¼æˆ–è€…ä¸€ä¸ªåˆ¶è¡¨ç¬¦ï¼ˆTab é”®ï¼‰ã€‚</p><pre><code>print(&quot;hello&quot;)</code></pre><p>ä½ ä¹Ÿå¯ä»¥ç”¨ &#96;&#96;&#96; åŒ…è£¹ä¸€æ®µä»£ç ï¼Œå¹¶æŒ‡å®šä¸€ç§è¯­è¨€ï¼ˆä¹Ÿå¯ä»¥ä¸æŒ‡å®šï¼‰ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">```javascript</span></span><br><span class="line"><span class="code">$(document).ready(function () &#123;</span></span><br><span class="line"><span class="code">    alert(&#x27;RUNOOB&#x27;);</span></span><br><span class="line"><span class="code">&#125;);</span></span><br><span class="line"><span class="code">```</span></span><br></pre></td></tr></table></figure><h2 id="10-Markdown-é“¾æ¥"><a href="#10-Markdown-é“¾æ¥" class="headerlink" title="10.Markdown é“¾æ¥"></a>10.Markdown é“¾æ¥</h2><p>é“¾æ¥ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[é“¾æ¥åç§°]</span>(é“¾æ¥åœ°å€)</span><br><span class="line"></span><br><span class="line">æˆ–è€…</span><br><span class="line"></span><br><span class="line">&lt;é“¾æ¥åœ°å€&gt;</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¿™æ˜¯ä¸€ä¸ªé“¾æ¥ <span class="selector-attr">[ç™¾åº¦ä¸€ä¸‹]</span>(<span class="attribute">https</span>:<span class="comment">//www.baidu.com)</span></span><br></pre></td></tr></table></figure><p>ç›´æ¥ä½¿ç”¨é“¾æ¥åœ°å€ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;https:<span class="regexp">//</span>www.baidu.com&gt;</span><br></pre></td></tr></table></figure><h3 id="é«˜çº§é“¾æ¥"><a href="#é«˜çº§é“¾æ¥" class="headerlink" title="é«˜çº§é“¾æ¥"></a>é«˜çº§é“¾æ¥</h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å˜é‡æ¥è®¾ç½®ä¸€ä¸ªé“¾æ¥ï¼Œå˜é‡èµ‹å€¼åœ¨æ–‡æ¡£æœ«å°¾è¿›è¡Œï¼š</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">è¿™ä¸ªé“¾æ¥ç”¨ <span class="number">1</span> ä½œä¸ºç½‘å€å˜é‡ <span class="selector-attr">[Google]</span><span class="selector-attr">[1]</span></span><br><span class="line">è¿™ä¸ªé“¾æ¥ç”¨ <span class="selector-tag">runoob</span> ä½œä¸ºç½‘å€å˜é‡ <span class="selector-attr">[Runoob]</span><span class="selector-attr">[runoob]</span></span><br><span class="line">ç„¶ååœ¨æ–‡æ¡£çš„ç»“å°¾ä¸ºå˜é‡èµ‹å€¼ï¼ˆç½‘å€ï¼‰</span><br><span class="line"></span><br><span class="line">  <span class="selector-attr">[1]</span>: <span class="selector-tag">http</span>:<span class="comment">//www.google.com/</span></span><br><span class="line">  <span class="selector-attr">[runoob]</span>: <span class="selector-tag">http</span>:<span class="comment">//www.runoob.com/</span></span><br></pre></td></tr></table></figure><h2 id="11-Markdown-å›¾ç‰‡"><a href="#11-Markdown-å›¾ç‰‡" class="headerlink" title="11.Markdown å›¾ç‰‡"></a>11.Markdown å›¾ç‰‡</h2><p>Markdown å›¾ç‰‡è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">!<span class="selector-attr">[alt å±æ€§æ–‡æœ¬]</span>(å›¾ç‰‡åœ°å€)</span><br><span class="line"></span><br><span class="line">!<span class="selector-attr">[alt å±æ€§æ–‡æœ¬]</span>(å›¾ç‰‡åœ°å€ &quot;å¯é€‰æ ‡é¢˜&quot;)</span><br></pre></td></tr></table></figure><p>å¼€å¤´ä¸€ä¸ªæ„Ÿå¹å· !<br>æ¥ç€ä¸€ä¸ªæ–¹æ‹¬å·ï¼Œé‡Œé¢æ”¾ä¸Šå›¾ç‰‡çš„æ›¿ä»£æ–‡å­—<br>æ¥ç€ä¸€ä¸ªæ™®é€šæ‹¬å·ï¼Œé‡Œé¢æ”¾ä¸Šå›¾ç‰‡çš„ç½‘å€ï¼Œæœ€åè¿˜å¯ä»¥ç”¨å¼•å·åŒ…ä½å¹¶åŠ ä¸Šé€‰æ‹©æ€§çš„ â€˜titleâ€™ å±æ€§çš„æ–‡å­—ã€‚</p><p>Markdown è¿˜æ²¡æœ‰åŠæ³•æŒ‡å®šå›¾ç‰‡çš„é«˜åº¦ä¸å®½åº¦ï¼Œå¦‚æœä½ éœ€è¦çš„è¯ï¼Œä½ å¯ä»¥ä½¿ç”¨æ™®é€šçš„ <img> æ ‡ç­¾ã€‚</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;http://static.runoob.com/images/runoob-logo.png&quot;</span> <span class="attr">width</span>=<span class="string">&quot;50%&quot;</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="12-Markdown-è¡¨æ ¼"><a href="#12-Markdown-è¡¨æ ¼" class="headerlink" title="12.Markdown è¡¨æ ¼"></a>12.Markdown è¡¨æ ¼</h2><p>Markdown åˆ¶ä½œè¡¨æ ¼ä½¿ç”¨ | æ¥åˆ†éš”ä¸åŒçš„å•å…ƒæ ¼ï¼Œä½¿ç”¨ - æ¥åˆ†éš”è¡¨å¤´å’Œå…¶ä»–è¡Œã€‚</p><p>è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">|<span class="string">  è¡¨å¤´   </span>|<span class="string"> è¡¨å¤´  </span>|</span><br><span class="line">|<span class="string">  ----  </span>|<span class="string"> ----  </span>|</span><br><span class="line">|<span class="string"> å•å…ƒæ ¼  </span>|<span class="string"> å•å…ƒæ ¼ </span>|</span><br><span class="line">|<span class="string"> å•å…ƒæ ¼  </span>|<span class="string"> å•å…ƒæ ¼ </span>|</span><br></pre></td></tr></table></figure><p><strong>å¯¹é½æ–¹å¼</strong></p><p>æˆ‘ä»¬å¯ä»¥è®¾ç½®è¡¨æ ¼çš„å¯¹é½æ–¹å¼ï¼š</p><ul><li><strong>-:</strong> è®¾ç½®å†…å®¹å’Œæ ‡é¢˜æ å±…å³å¯¹é½ã€‚</li><li><strong>:-</strong> è®¾ç½®å†…å®¹å’Œæ ‡é¢˜æ å±…å·¦å¯¹é½ã€‚</li><li><strong>:-:</strong> è®¾ç½®å†…å®¹å’Œæ ‡é¢˜æ å±…ä¸­å¯¹é½ã€‚</li></ul><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">| å·¦å¯¹é½ | å³å¯¹é½ | å±…ä¸­å¯¹é½ |</span><br><span class="line">| :-----| ----: | :----: |</span><br><span class="line">| å•å…ƒæ ¼ | å•å…ƒæ ¼ | å•å…ƒæ ¼ |</span><br><span class="line">| å•å…ƒæ ¼ | å•å…ƒæ ¼ | å•å…ƒæ ¼ |</span><br></pre></td></tr></table></figure><h2 id="13-Markdown-é«˜çº§æŠ€å·§"><a href="#13-Markdown-é«˜çº§æŠ€å·§" class="headerlink" title="13.Markdown é«˜çº§æŠ€å·§"></a>13.Markdown é«˜çº§æŠ€å·§</h2><p><strong>æ”¯æŒçš„ HTML å…ƒç´ </strong><br>ä¸åœ¨ Markdown æ¶µç›–èŒƒå›´ä¹‹å†…çš„æ ‡ç­¾ï¼Œéƒ½å¯ä»¥ç›´æ¥åœ¨æ–‡æ¡£é‡Œé¢ç”¨ HTML æ’°å†™ã€‚</p><p>ç›®å‰æ”¯æŒçš„ HTML å…ƒç´ æœ‰ï¼š<kbd> <b> <i> <em> <sup> <sub> <br>ç­‰ ï¼Œå¦‚ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨ &lt;<span class="selector-tag">kbd</span>&gt;Ctrl&lt;/<span class="selector-tag">kbd</span>&gt;+&lt;<span class="selector-tag">kbd</span>&gt;Alt&lt;/<span class="selector-tag">kbd</span>&gt;+&lt;<span class="selector-tag">kbd</span>&gt;<span class="selector-tag">Del</span>&lt;/<span class="selector-tag">kbd</span>&gt; é‡å¯ç”µè„‘</span><br></pre></td></tr></table></figure><p><strong>è½¬ä¹‰</strong><br>Markdown ä½¿ç”¨äº†å¾ˆå¤šç‰¹æ®Šç¬¦å·æ¥è¡¨ç¤ºç‰¹å®šçš„æ„ä¹‰ï¼Œå¦‚æœéœ€è¦æ˜¾ç¤ºç‰¹å®šçš„ç¬¦å·åˆ™éœ€è¦ä½¿ç”¨è½¬ä¹‰å­—ç¬¦ï¼ŒMarkdown ä½¿ç”¨åæ–œæ è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="strong">**æ–‡æœ¬åŠ ç²—**</span> </span><br><span class="line">\*\* æ­£å¸¸æ˜¾ç¤ºæ˜Ÿå· \*\*</span><br></pre></td></tr></table></figure><p>Markdown æ”¯æŒä»¥ä¸‹è¿™äº›ç¬¦å·å‰é¢åŠ ä¸Šåæ–œæ æ¥å¸®åŠ©æ’å…¥æ™®é€šçš„ç¬¦å·ï¼š</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">\   åæ–œçº¿</span><br><span class="line">`   åå¼•å·</span><br><span class="line"><span class="bullet">*   </span>æ˜Ÿå·</span><br><span class="line">_   ä¸‹åˆ’çº¿</span><br><span class="line">&#123;&#125;  èŠ±æ‹¬å·</span><br><span class="line">[]  æ–¹æ‹¬å·</span><br><span class="line">()  å°æ‹¬å·</span><br><span class="line">#   äº•å­—å·</span><br><span class="line">+   åŠ å·</span><br><span class="line"><span class="bullet">-   </span>å‡å·</span><br><span class="line"><span class="bullet">.   </span>è‹±æ–‡å¥ç‚¹</span><br><span class="line">!   æ„Ÿå¹å·</span><br></pre></td></tr></table></figure><p><strong>å…¬å¼</strong></p><p>å½“ä½ éœ€è¦åœ¨ç¼–è¾‘å™¨ä¸­æ’å…¥æ•°å­¦å…¬å¼æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ä¸ªç¾å…ƒç¬¦ $$ åŒ…è£¹ TeX æˆ– LaTeX æ ¼å¼çš„æ•°å­¦å…¬å¼æ¥å®ç°ã€‚æäº¤åï¼Œé—®ç­”å’Œæ–‡ç« é¡µä¼šæ ¹æ®éœ€è¦åŠ è½½ Mathjax å¯¹æ•°å­¦å…¬å¼è¿›è¡Œæ¸²æŸ“ã€‚å¦‚ï¼š</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line"><span class="string">\mathbf&#123;V&#125;_1</span> <span class="string">\times</span> <span class="string">\mathbf&#123;V&#125;_2</span> =  <span class="string">\begin&#123;vmatrix&#125;</span> </span><br><span class="line"><span class="string">\mathbf&#123;i&#125;</span> &amp; <span class="string">\mathbf&#123;j&#125;</span> &amp; <span class="string">\mathbf&#123;k&#125;</span> <span class="string">\\</span></span><br><span class="line"><span class="string">\frac&#123;\partial</span> X&#125;&#123;<span class="string">\partial</span> u&#125; &amp;  <span class="string">\frac&#123;\partial</span> Y&#125;&#123;<span class="string">\partial</span> u&#125; &amp; <span class="number">0</span> <span class="string">\\</span></span><br><span class="line"><span class="string">\frac&#123;\partial</span> X&#125;&#123;<span class="string">\partial</span> v&#125; &amp;  <span class="string">\frac&#123;\partial</span> Y&#125;&#123;<span class="string">\partial</span> v&#125; &amp; <span class="number">0</span> <span class="string">\\</span></span><br><span class="line"><span class="string">\end&#123;vmatrix&#125;</span></span><br><span class="line">$&#123;$tep1&#125;&#123;<span class="string">\style&#123;visibility:hidden&#125;&#123;(x+1)(x+1)&#125;&#125;</span></span><br><span class="line">$$</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> MarkDown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IPåœ°å€åˆ’åˆ†å¸¸è¯†</title>
      <link href="/2020/12/06/71dc04547509-q1jun/"/>
      <url>/2020/12/06/71dc04547509-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="IPåœ°å€åˆ’åˆ†å¸¸è¯†"><a href="#IPåœ°å€åˆ’åˆ†å¸¸è¯†" class="headerlink" title="IPåœ°å€åˆ’åˆ†å¸¸è¯†"></a>IPåœ°å€åˆ’åˆ†å¸¸è¯†</h1><p>IPåœ°å€çš„åˆ†ç±»ï¼š</p><p><strong>Aç±»IPåœ°å€:</strong><br><code>1.0.0.0 ~127.0.0.0</code>  255.0.0.0<br>Aç±»ç½‘ç»œæœ‰127ä¸ªï¼Œæ¯ä¸ªç½‘ç»œèƒ½å®¹çº³16777214ä¸ªä¸»æœº<br>A:0-127ï¼Œå…¶ä¸­0ä»£è¡¨ä»»ä½•åœ°å€ï¼Œ127ä¸ºå›ç¯æµ‹è¯•åœ°å€ï¼Œå› æ­¤ï¼ŒAç±»ipåœ°å€çš„å®é™…èŒƒå›´æ˜¯1-126.<br><strong>Bç±»IPåœ°å€:</strong><br><code>128.0.0.0ï½191.255.255.255</code><br>Bç±»ç½‘ç»œæœ‰16382ä¸ªï¼Œæ¯ä¸ªç½‘ç»œèƒ½å®¹çº³6ä¸‡å¤šä¸ªä¸»æœº<br>128-191ï¼Œå…¶ä¸­128.0.0.0å’Œ191.255.0.0ä¸ºä¿ç•™ipï¼Œå®é™…èŒƒå›´æ˜¯128.1.0.0â€“191.254.0.0<br><strong>Cç±»IPåœ°å€:</strong><br><code>192.0.0.0åˆ°223.255.255.255</code><br>Cç±»ç½‘ç»œå¯è¾¾209ä¸‡ä½™ä¸ªï¼Œæ¯ä¸ªç½‘ç»œèƒ½å®¹çº³254ä¸ªä¸»æœº<br>å…¶ä¸­192.0.0.0å’Œ223.255.255.0ä¸ºä¿ç•™ipï¼Œå®é™…èŒƒå›´æ˜¯192.0.1.0â€“223.255.254.0<br><strong>Dç±»IPåœ°å€:</strong><br><code>224.0.0.0ï½239.255.255.255</code><br>ç”¨äºå¤šç‚¹å¹¿æ’­ï¼ˆMulticastï¼‰<br><strong>Eç±»IPåœ°å€:</strong><br><code>240.0.0.0ï½255.255.255.254</code><br>ä¸ºå°†æ¥ä½¿ç”¨ä¿ç•™</p><blockquote><p>å…¨é›¶ï¼ˆâ€œ0ï¼0ï¼0ï¼0â€ï¼‰åœ°å€å¯¹åº”äºå½“å‰ä¸»æœºã€‚å…¨â€œ1â€çš„IPåœ°å€ï¼ˆâ€œ255ï¼255ï¼255ï¼255â€ï¼‰æ˜¯å½“å‰å­ç½‘çš„å¹¿æ’­åœ°å€</p></blockquote><p>åœ¨IPåœ°å€3ç§ä¸»è¦ç±»å‹é‡Œï¼Œå„ä¿ç•™äº†3ä¸ªåŒºåŸŸä½œä¸ºç§æœ‰åœ°å€ï¼Œå…¶åœ°å€èŒƒå›´å¦‚ä¸‹ï¼š<br>    Aç±»åœ°å€ï¼š<code>10.0.0.0ï½10.255.255.255 </code><br>    Bç±»åœ°å€ï¼š<code>172.16.0.0ï½172.31.255.255 </code><br>    Cç±»åœ°å€ï¼š<code>192.168.0.0ï½192.168.255.255</code></p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œå®‰å…¨ </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç½‘ç»œå®‰å…¨ </tag>
            
            <tag> TCP/IP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AnimateåŠ¨ç”»åº“</title>
      <link href="/2020/09/01/5fa232f93cd0-q1jun/"/>
      <url>/2020/09/01/5fa232f93cd0-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="Animate-libraries"><a href="#Animate-libraries" class="headerlink" title="Animate_libraries"></a>Animate_libraries</h1><p>ä¸€ä¸ªcssæ ·å¼ï¼Œé‡Œé¢åŒ…å«äº†å¯ä»¥ç›´æ¥å¼•ç”¨çš„åŠ¨ç”»ç±»ã€‚</p><blockquote><p>ç¬¬ä¸€æ¬¡åœ¨githubä¸Šå†™é¡¹ç›®ï¼Œè¿™æ˜¯æˆ‘æ‰¾åˆ°çš„ä¸€ä¸ªcsså¼€æºé¡¹ç›®animateï¼Œè¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹è¿™ä¸ªåŒ…çš„ç”¨æ³•ã€‚</p></blockquote><h2 id="æŸ¥çœ‹æ•ˆæœé¢„è§ˆå¯ä»¥æ‰“å¼€ï¼š"><a href="#æŸ¥çœ‹æ•ˆæœé¢„è§ˆå¯ä»¥æ‰“å¼€ï¼š" class="headerlink" title="æŸ¥çœ‹æ•ˆæœé¢„è§ˆå¯ä»¥æ‰“å¼€ï¼š"></a>æŸ¥çœ‹æ•ˆæœé¢„è§ˆå¯ä»¥æ‰“å¼€ï¼š</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://animate.style/</span><br></pre></td></tr></table></figure><p><a target="_blank" rel="noopener" href="https://animate.style/">Animate.Styleæ•ˆæœé¢„è§ˆ</a></p><blockquote><p>æˆ‘è¿™é‡Œç”¨çš„ç‰ˆæœ¬æ˜¯V4.1.1ï¼Œå¦‚æœéœ€è¦åˆ«çš„ç‰ˆæœ¬ä¹Ÿå¯ä»¥åœ¨é‡Œé¢ä¸‹è½½ã€‚<br>è¿™è¾¹åªç®€å•ä»‹ç»ä¸€ä¸‹ä½¿ç”¨&#x3D;w&#x3D;ã€‚</p></blockquote><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>ä½ å¯ä»¥ç›´æ¥åœ¨è¿™ä¸ªä¸»é¡µä¸‹è½½animate.cssåˆ°ä½ çš„cssæ–‡ä»¶å¤¹å¹¶é…åˆ<code>&lt;link&gt;</code>ä½¿ç”¨<br>åŒæ ·ä½ ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡ä¸‹é¢çš„ä»£ç è¿›è¡Œäº’è”ç½‘ä¸Šçš„è·å–ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span></span></span><br><span class="line"><span class="tag">    <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">href</span>=<span class="string">&quot;https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css&quot;</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å¦‚ä½•ä½¿ç”¨"><a href="#å¦‚ä½•ä½¿ç”¨" class="headerlink" title="å¦‚ä½•ä½¿ç”¨"></a>å¦‚ä½•ä½¿ç”¨</h2><p>ç®€å•çš„é€šè¿‡åœ¨æ ‡ç­¾ä¸­åŠ å…¥<code>class=&quot;&quot;</code>æ¥è°ƒç”¨animate.cssä¸­çš„åŠ¨æ¼«ï¼Œè‡³äº<code>class=&quot;&quot;Â·çš„</code>â€œâ€&#96;ä¸­å¡«ä»€ä¹ˆ<br>å°±ä»ä¸Šé¢çš„æ•ˆæœé¢„è§ˆä¸­è·å¾—å¯¹åº”çš„ç±»åæ¥ä½¿ç”¨å•¦ã€‚æ¯”å¦‚è¿™é‡Œç»™å›¾ç‰‡æ·»åŠ ä¸€ä¸ªæŠ–åŠ¨çš„åŠ¨ç”»ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>animate CSS style<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;./css/animate.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;animate__animated animate__bounce&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./images/doge.jpg&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œè¦æ³¨æ„å¿…é¡»è¦å…ˆåœ¨å‰é¢åŠ ä¸Š<code>animate__animated</code>å¹¶ä¸”éƒ½æ˜¯ä»¥<code>animate__</code>ä¸ºå‰ç¼€,é‡Œé¢æ˜¯ä¸¤ä¸ª<code>_</code><br>å½“ç„¶ï¼Œè¿˜å¯ä»¥ç»™è¿™ä¸ªæŠ–åŠ¨åŠ¨ç”»è¿˜æœ‰å…¶ä»–çš„åŠ¨ç”»å±æ€§ï¼Œæ¯”å¦‚:</p></blockquote><table><thead><tr><th>ClassName</th><th>å±æ€§</th></tr></thead><tbody><tr><td>animate__delay-2s</td><td>æ‰“å¼€ç½‘é¡µåå»¶è¿Ÿ2sæ’­æ”¾åŠ¨ç”»</td></tr><tr><td>animate__slow</td><td>è®¾ç½®åŠ¨ç”»æ’­æ”¾é€Ÿåº¦ä¸ºæ…¢é€Ÿ(åŸé€Ÿ1sæ”¹ä¸º2s)</td></tr><tr><td>animate__slower</td><td>è®¾ç½®åŠ¨ç”»æ’­æ”¾é€Ÿåº¦ä¸ºæ›´æ…¢é€Ÿ(åŸé€Ÿ1sæ”¹ä¸º3s)</td></tr><tr><td>animate__fast</td><td>åŒç†1sâ€“&gt;800ms</td></tr><tr><td>animate__faster</td><td>åŒç†1sâ€“&gt;500ms</td></tr><tr><td>animate__repeat-1</td><td>é‡å¤1æ¬¡</td></tr><tr><td>animate__infinite</td><td>é‡å¤æ— æ•°æ¬¡ï¼Œä¸€ç›´æ’­æ”¾</td></tr></tbody></table><p>å¦‚æœè¿˜æƒ³è·å¾—æ›´å¤šçš„åŠ¨ç”»å¯ä»¥å‚è€ƒ<a target="_blank" rel="noopener" href="https://animate.style/">Animate.Styleæ•ˆæœé¢„è§ˆ</a>é‡Œé¢ç»™å‡ºçš„åŠ¨ç”»ï¼š<br><img src="https://q1jun-tc.oss-cn-shenzhen.aliyuncs.com/uPic/120014447-a7154500-c014-11eb-8b29-5e8492f48962.png" alt="image"><br>å³ä¾§å¯ä»¥ç›´æ¥å¤åˆ¶åŠ¨ç”»å¯¹åº”çš„classnameï¼Œæ·»åŠ åˆ°<code>class=&quot;&quot;</code>å°±å¥½äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> åŠ¨ç”» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¸¸ç”¨UIæ¡†æ¶æ¨è</title>
      <link href="/2020/06/06/9715e8564cad-q1jun/"/>
      <url>/2020/06/06/9715e8564cad-q1jun/</url>
      
        <content type="html"><![CDATA[<h1 id="Common-User-Interface"><a href="#Common-User-Interface" class="headerlink" title="Common-User-Interface"></a>Common-User-Interface</h1><blockquote><p>è¿™é‡Œæ¨èä¸€äº›å¸¸ç”¨çš„UIç•Œé¢</p></blockquote><h2 id="We-UI"><a href="#We-UI" class="headerlink" title="We UI"></a>We UI</h2><p><a target="_blank" rel="noopener" href="https://weui.io/">WeUI</a></p><blockquote><p>WeUI æ˜¯ä¸€å¥—åŒå¾®ä¿¡åŸç”Ÿè§†è§‰ä½“éªŒä¸€è‡´çš„åŸºç¡€æ ·å¼åº“,<br>ç”±å¾®ä¿¡å®˜æ–¹è®¾è®¡å›¢é˜Ÿä¸ºå¾®ä¿¡å†…ç½‘é¡µå’Œå¾®ä¿¡å°ç¨‹åºé‡èº«è®¾è®¡,ä»¤ç”¨æˆ·çš„ä½¿ç”¨æ„ŸçŸ¥æ›´åŠ ç»Ÿä¸€ã€‚</p></blockquote><h2 id="Element-UI"><a href="#Element-UI" class="headerlink" title="Element UI"></a>Element UI</h2><p><a target="_blank" rel="noopener" href="https://element.eleme.cn/#/zh-CN/component/button">Elment UI</a></p><blockquote><p>element-uiæ˜¯ä¸€ä¸ªuiåº“ï¼Œå®ƒä¸ä¾èµ–äºvueã€‚ä½†æ˜¯å´æ˜¯å½“å‰å’Œvueé…åˆåšé¡¹ç›®å¼€å‘çš„ä¸€ä¸ªæ¯”è¾ƒå¥½çš„uiæ¡†æ¶ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯å­¦ä¹  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> UI </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
